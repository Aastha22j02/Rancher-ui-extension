{"remainingRequest":"/home/ubuntu/susecon-2024-ext-demo/node_modules/babel-loader/lib/index.js??ref--16-1!/home/ubuntu/susecon-2024-ext-demo/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/ubuntu/susecon-2024-ext-demo/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/edit/storage.k8s.io.storageclass/provisioners/driver.harvesterhci.io.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/edit/storage.k8s.io.storageclass/provisioners/driver.harvesterhci.io.vue","mtime":1725271280091},{"path":"/home/ubuntu/susecon-2024-ext-demo/babel.config.js","mtime":1725268750245},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/babel-loader/lib/index.js","mtime":1725271298942},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1725271300920}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3JzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNsaWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmFzc2lnbi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuZW5kcy13aXRoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnN0YXJ0cy13aXRoLmpzIjsKZnVuY3Rpb24gb3duS2V5cyhlLCByKSB7IHZhciB0ID0gT2JqZWN0LmtleXMoZSk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBvID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKTsgciAmJiAobyA9IG8uZmlsdGVyKGZ1bmN0aW9uIChyKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsIHIpLmVudW1lcmFibGU7IH0pKSwgdC5wdXNoLmFwcGx5KHQsIG8pOyB9IHJldHVybiB0OyB9CmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQoZSkgeyBmb3IgKHZhciByID0gMTsgciA8IGFyZ3VtZW50cy5sZW5ndGg7IHIrKykgeyB2YXIgdCA9IG51bGwgIT0gYXJndW1lbnRzW3JdID8gYXJndW1lbnRzW3JdIDoge307IHIgJSAyID8gb3duS2V5cyhPYmplY3QodCksICEwKS5mb3JFYWNoKGZ1bmN0aW9uIChyKSB7IF9kZWZpbmVQcm9wZXJ0eShlLCByLCB0W3JdKTsgfSkgOiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGUsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHQpKSA6IG93bktleXMoT2JqZWN0KHQpKS5mb3JFYWNoKGZ1bmN0aW9uIChyKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCByLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsIHIpKTsgfSk7IH0gcmV0dXJuIGU7IH0KaW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiL2hvbWUvdWJ1bnR1L3N1c2Vjb24tMjAyNC1leHQtZGVtby9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvcmVnZW5lcmF0b3IvaW5kZXguanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICd2dWV4JzsKaW1wb3J0IHNlbXZlciBmcm9tICdzZW12ZXInOwppbXBvcnQgeyBMYWJlbGVkSW5wdXQgfSBmcm9tICdAY29tcG9uZW50cy9Gb3JtL0xhYmVsZWRJbnB1dCc7CmltcG9ydCBCYW5uZXIgZnJvbSAnQGNvbXBvbmVudHMvQmFubmVyL0Jhbm5lci52dWUnOwppbXBvcnQgS2V5VmFsdWUgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvZm9ybS9LZXlWYWx1ZSc7CmltcG9ydCB7IGNsb25lIH0gZnJvbSAnQHNoZWxsL3V0aWxzL29iamVjdCc7CmltcG9ydCB7IGFsbEhhc2ggfSBmcm9tICdAc2hlbGwvdXRpbHMvcHJvbWlzZSc7CnZhciBERUZBVUxUX1BBUkFNRVRFUlMgPSBbJ2hvc3RTdG9yYWdlQ2xhc3MnXTsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIExhYmVsZWRJbnB1dDogTGFiZWxlZElucHV0LAogICAgQmFubmVyOiBCYW5uZXIsCiAgICBLZXlWYWx1ZTogS2V5VmFsdWUKICB9LAogIHByb3BzOiB7CiAgICB2YWx1ZTogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICB9LAogICAgbW9kZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICB9CiAgfSwKICBmZXRjaDogZnVuY3Rpb24gZmV0Y2goKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgIHZhciByZXM7CiAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgcmV0dXJuIGFsbEhhc2goewogICAgICAgICAgICAgIHJrZTJWZXJzaW9uczogX3RoaXMuJHN0b3JlLmRpc3BhdGNoKCdtYW5hZ2VtZW50L3JlcXVlc3QnLCB7CiAgICAgICAgICAgICAgICB1cmw6ICcvdjEtcmtlMi1yZWxlYXNlL3JlbGVhc2VzJwogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0pOwogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICByZXMgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICBfdGhpcy5ya2UyVmVyc2lvbnMgPSByZXMucmtlMlZlcnNpb25zOwogICAgICAgICAgY2FzZSA0OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUpOwogICAgfSkpKCk7CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcmtlMlZlcnNpb25zOiB7fQogICAgfTsKICB9LAogIGNvbXB1dGVkOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIG1hcEdldHRlcnMoWydjdXJyZW50Q2x1c3RlciddKSksIHt9LCB7CiAgICBpc1NhdGlzZmllc1ZlcnNpb246IGZ1bmN0aW9uIGlzU2F0aXNmaWVzVmVyc2lvbigpIHsKICAgICAgdmFyIGt1YmVybmV0ZXNWZXJzaW9uID0gdGhpcy5jdXJyZW50Q2x1c3Rlci5rdWJlcm5ldGVzVmVyc2lvbiB8fCAnJzsKICAgICAgdmFyIGt1YmVybmV0ZXNWZXJzaW9uRXh0ZW5zaW9uID0gdGhpcy5jdXJyZW50Q2x1c3Rlci5rdWJlcm5ldGVzVmVyc2lvbkV4dGVuc2lvbjsKICAgICAgaWYgKGt1YmVybmV0ZXNWZXJzaW9uRXh0ZW5zaW9uLnN0YXJ0c1dpdGgoJytya2UyJykpIHsKICAgICAgICB2YXIgX3RoaXMkcmtlMlZlcnNpb25zLCBfY2hhcnRzJGhhcnZlc3RlckNzaTsKICAgICAgICB2YXIgY2hhcnRzID0gKCgoKF90aGlzJHJrZTJWZXJzaW9ucyA9IHRoaXMucmtlMlZlcnNpb25zKSA9PT0gbnVsbCB8fCBfdGhpcyRya2UyVmVyc2lvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJHJrZTJWZXJzaW9ucy5kYXRhKSB8fCBbXSkuZmluZChmdW5jdGlvbiAodikgewogICAgICAgICAgcmV0dXJuIHYuaWQgPT09IGt1YmVybmV0ZXNWZXJzaW9uOwogICAgICAgIH0pIHx8IHt9KS5jaGFydHM7CiAgICAgICAgdmFyIGNzaVZlcnNpb24gPSAoY2hhcnRzID09PSBudWxsIHx8IGNoYXJ0cyA9PT0gdm9pZCAwIHx8IChfY2hhcnRzJGhhcnZlc3RlckNzaSA9IGNoYXJ0c1snaGFydmVzdGVyLWNzaS1kcml2ZXInXSkgPT09IG51bGwgfHwgX2NoYXJ0cyRoYXJ2ZXN0ZXJDc2kgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jaGFydHMkaGFydmVzdGVyQ3NpLnZlcnNpb24pIHx8ICcnOwogICAgICAgIGlmIChjc2lWZXJzaW9uLmVuZHNXaXRoKCcwMCcpKSB7CiAgICAgICAgICBjc2lWZXJzaW9uID0gY3NpVmVyc2lvbi5zbGljZSgwLCAtMik7CiAgICAgICAgfQogICAgICAgIHJldHVybiBzZW12ZXIuc2F0aXNmaWVzKGNzaVZlcnNpb24sICc+PTAuMS4xNScpOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CiAgICB9LAogICAgcGFyYW1ldGVyczogewogICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgICB2YXIgX3RoaXMkdmFsdWU7CiAgICAgICAgdmFyIHBhcmFtZXRlcnMgPSBjbG9uZSgoX3RoaXMkdmFsdWUgPSB0aGlzLnZhbHVlKSA9PT0gbnVsbCB8fCBfdGhpcyR2YWx1ZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkdmFsdWUucGFyYW1ldGVycykgfHwge307CiAgICAgICAgREVGQVVMVF9QQVJBTUVURVJTLm1hcChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgICBkZWxldGUgcGFyYW1ldGVyc1trZXldOwogICAgICAgIH0pOwogICAgICAgIHJldHVybiBwYXJhbWV0ZXJzOwogICAgICB9LAogICAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWx1ZSkgewogICAgICAgIE9iamVjdC5hc3NpZ24odGhpcy52YWx1ZS5wYXJhbWV0ZXJzLCB2YWx1ZSk7CiAgICAgIH0KICAgIH0KICB9KQp9Ow=="},{"version":3,"names":["mapGetters","semver","LabeledInput","Banner","KeyValue","clone","allHash","DEFAULT_PARAMETERS","components","props","value","type","Object","required","mode","String","fetch","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","res","wrap","_callee$","_context","prev","next","rke2Versions","$store","dispatch","url","sent","stop","data","computed","_objectSpread","isSatisfiesVersion","kubernetesVersion","currentCluster","kubernetesVersionExtension","startsWith","_this$rke2Versions","_charts$harvesterCsi","charts","find","v","id","csiVersion","version","endsWith","slice","satisfies","parameters","get","_this$value","map","key","set","assign"],"sources":["node_modules/@rancher/shell/edit/storage.k8s.io.storageclass/provisioners/driver.harvesterhci.io.vue"],"sourcesContent":["<script>\r\nimport { mapGetters } from 'vuex';\r\nimport semver from 'semver';\r\n\r\nimport { LabeledInput } from '@components/Form/LabeledInput';\r\nimport Banner from '@components/Banner/Banner.vue';\r\nimport KeyValue from '@shell/components/form/KeyValue';\r\n\r\nimport { clone } from '@shell/utils/object';\r\nimport { allHash } from '@shell/utils/promise';\r\n\r\nconst DEFAULT_PARAMETERS = [\r\n  'hostStorageClass',\r\n];\r\n\r\nexport default {\r\n  components: {\r\n    LabeledInput,\r\n    Banner,\r\n    KeyValue,\r\n  },\r\n\r\n  props: {\r\n    value: {\r\n      type:     Object,\r\n      required: true\r\n    },\r\n    mode: {\r\n      type:     String,\r\n      required: true\r\n    }\r\n  },\r\n\r\n  async fetch() {\r\n    const res = await allHash({ rke2Versions: this.$store.dispatch('management/request', { url: '/v1-rke2-release/releases' }) });\r\n\r\n    this.rke2Versions = res.rke2Versions;\r\n  },\r\n\r\n  data() {\r\n    return { rke2Versions: {} };\r\n  },\r\n\r\n  computed: {\r\n    ...mapGetters(['currentCluster']),\r\n\r\n    isSatisfiesVersion() {\r\n      const kubernetesVersion = this.currentCluster.kubernetesVersion || '';\r\n      const kubernetesVersionExtension = this.currentCluster.kubernetesVersionExtension;\r\n\r\n      if (kubernetesVersionExtension.startsWith('+rke2')) {\r\n        const charts = ((this.rke2Versions?.data || []).find((v) => v.id === kubernetesVersion) || {}).charts;\r\n        let csiVersion = charts?.['harvester-csi-driver']?.version || '';\r\n\r\n        if (csiVersion.endsWith('00')) {\r\n          csiVersion = csiVersion.slice(0, -2);\r\n        }\r\n\r\n        return semver.satisfies(csiVersion, '>=0.1.15');\r\n      } else {\r\n        return true;\r\n      }\r\n    },\r\n\r\n    parameters: {\r\n      get() {\r\n        const parameters = clone(this.value?.parameters) || {};\r\n\r\n        DEFAULT_PARAMETERS.map((key) => {\r\n          delete parameters[key];\r\n        });\r\n\r\n        return parameters;\r\n      },\r\n\r\n      set(value) {\r\n        Object.assign(this.value.parameters, value);\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<template>\r\n  <div>\r\n    <Banner\r\n      v-if=\"!isSatisfiesVersion\"\r\n      color=\"warning\"\r\n    >\r\n      {{ t('storageClass.harvesterhci.warning.unSatisfiesVersion', null, true) }}\r\n    </Banner>\r\n    <div v-else>\r\n      <div\r\n        class=\"row mb-10\"\r\n      >\r\n        <div class=\"col span-6\">\r\n          <LabeledInput\r\n            v-model=\"value.parameters.hostStorageClass\"\r\n            :label=\"t('storageClass.harvesterhci.hostStorageClass.label')\"\r\n            :placeholder=\"t('storageClass.harvesterhci.hostStorageClass.placeholder')\"\r\n            :mode=\"mode\"\r\n            :tooltip=\"t('storageClass.harvesterhci.hostStorageClass.tooltip')\"\r\n          />\r\n        </div>\r\n      </div>\r\n      <KeyValue\r\n        v-model=\"parameters\"\r\n        :add-label=\"t('storageClass.longhorn.addLabel')\"\r\n        :read-allowed=\"false\"\r\n        :mode=\"mode\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;AACA,SAAAA,UAAA;AACA,OAAAC,MAAA;AAEA,SAAAC,YAAA;AACA,OAAAC,MAAA;AACA,OAAAC,QAAA;AAEA,SAAAC,KAAA;AACA,SAAAC,OAAA;AAEA,IAAAC,kBAAA,IACA,mBACA;AAEA;EACAC,UAAA;IACAN,YAAA,EAAAA,YAAA;IACAC,MAAA,EAAAA,MAAA;IACAC,QAAA,EAAAA;EACA;EAEAK,KAAA;IACAC,KAAA;MACAC,IAAA,EAAAC,MAAA;MACAC,QAAA;IACA;IACAC,IAAA;MACAH,IAAA,EAAAI,MAAA;MACAF,QAAA;IACA;EACA;EAEAG,KAAA,WAAAA,MAAA;IAAA,IAAAC,KAAA;IAAA,OAAAC,iBAAA,eAAAC,mBAAA,CAAAC,IAAA,UAAAC,QAAA;MAAA,IAAAC,GAAA;MAAA,OAAAH,mBAAA,CAAAI,IAAA,UAAAC,SAAAC,QAAA;QAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;UAAA;YAAAF,QAAA,CAAAE,IAAA;YAAA,OACArB,OAAA;cAAAsB,YAAA,EAAAX,KAAA,CAAAY,MAAA,CAAAC,QAAA;gBAAAC,GAAA;cAAA;YAAA;UAAA;YAAAT,GAAA,GAAAG,QAAA,CAAAO,IAAA;YAEAf,KAAA,CAAAW,YAAA,GAAAN,GAAA,CAAAM,YAAA;UAAA;UAAA;YAAA,OAAAH,QAAA,CAAAQ,IAAA;QAAA;MAAA,GAAAZ,OAAA;IAAA;EACA;EAEAa,IAAA,WAAAA,KAAA;IACA;MAAAN,YAAA;IAAA;EACA;EAEAO,QAAA,EAAAC,aAAA,CAAAA,aAAA,KACApC,UAAA;IAEAqC,kBAAA,WAAAA,mBAAA;MACA,IAAAC,iBAAA,QAAAC,cAAA,CAAAD,iBAAA;MACA,IAAAE,0BAAA,QAAAD,cAAA,CAAAC,0BAAA;MAEA,IAAAA,0BAAA,CAAAC,UAAA;QAAA,IAAAC,kBAAA,EAAAC,oBAAA;QACA,IAAAC,MAAA,OAAAF,kBAAA,QAAAd,YAAA,cAAAc,kBAAA,uBAAAA,kBAAA,CAAAR,IAAA,SAAAW,IAAA,WAAAC,CAAA;UAAA,OAAAA,CAAA,CAAAC,EAAA,KAAAT,iBAAA;QAAA,UAAAM,MAAA;QACA,IAAAI,UAAA,IAAAJ,MAAA,aAAAA,MAAA,gBAAAD,oBAAA,GAAAC,MAAA,sCAAAD,oBAAA,uBAAAA,oBAAA,CAAAM,OAAA;QAEA,IAAAD,UAAA,CAAAE,QAAA;UACAF,UAAA,GAAAA,UAAA,CAAAG,KAAA;QACA;QAEA,OAAAlD,MAAA,CAAAmD,SAAA,CAAAJ,UAAA;MACA;QACA;MACA;IACA;IAEAK,UAAA;MACAC,GAAA,WAAAA,IAAA;QAAA,IAAAC,WAAA;QACA,IAAAF,UAAA,GAAAhD,KAAA,EAAAkD,WAAA,QAAA7C,KAAA,cAAA6C,WAAA,uBAAAA,WAAA,CAAAF,UAAA;QAEA9C,kBAAA,CAAAiD,GAAA,WAAAC,GAAA;UACA,OAAAJ,UAAA,CAAAI,GAAA;QACA;QAEA,OAAAJ,UAAA;MACA;MAEAK,GAAA,WAAAA,IAAAhD,KAAA;QACAE,MAAA,CAAA+C,MAAA,MAAAjD,KAAA,CAAA2C,UAAA,EAAA3C,KAAA;MACA;IACA;EAAA;AAEA","ignoreList":[]}]}