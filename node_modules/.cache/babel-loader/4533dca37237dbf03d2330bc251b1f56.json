{"remainingRequest":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js??ref--16-1!/home/ubuntu/suseconf/node_modules/@rancher/shell/models/apps.statefulset.js","dependencies":[{"path":"/home/ubuntu/suseconf/node_modules/@rancher/shell/models/apps.statefulset.js","mtime":1725338146566},{"path":"/home/ubuntu/suseconf/babel.config.js","mtime":1725343995893},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js","mtime":1725271298942}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVmbGVjdC5jb25zdHJ1Y3QuanMiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2siOwppbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzIjsKaW1wb3J0IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4iOwppbXBvcnQgX2dldFByb3RvdHlwZU9mIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2dldFByb3RvdHlwZU9mIjsKaW1wb3J0IF9pbmhlcml0cyBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9pbmhlcml0cyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCBfcmVnZW5lcmF0b3JSdW50aW1lIGZyb20gIi9ob21lL3VidW50dS9zdXNlY29uZi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvcmVnZW5lcmF0b3IvaW5kZXguanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmZ1bmN0aW9uIF9jYWxsU3VwZXIodCwgbywgZSkgeyByZXR1cm4gbyA9IF9nZXRQcm90b3R5cGVPZihvKSwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odCwgX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpID8gUmVmbGVjdC5jb25zdHJ1Y3QobywgZSB8fCBbXSwgX2dldFByb3RvdHlwZU9mKHQpLmNvbnN0cnVjdG9yKSA6IG8uYXBwbHkodCwgZSkpOyB9CmZ1bmN0aW9uIF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKSB7IHRyeSB7IHZhciB0ID0gIUJvb2xlYW4ucHJvdG90eXBlLnZhbHVlT2YuY2FsbChSZWZsZWN0LmNvbnN0cnVjdChCb29sZWFuLCBbXSwgZnVuY3Rpb24gKCkge30pKTsgfSBjYXRjaCAodCkge30gcmV0dXJuIChfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0ID0gZnVuY3Rpb24gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpIHsgcmV0dXJuICEhdDsgfSkoKTsgfQppbXBvcnQgV29ya2xvYWQgZnJvbSAnLi93b3JrbG9hZCc7CmltcG9ydCB7IFdPUktMT0FEX1RZUEVTLCBQT0QgfSBmcm9tICdAc2hlbGwvY29uZmlnL3R5cGVzJzsKaW1wb3J0IHsgV09SS0xPQURfVFlQRV9UT19LSU5EX01BUFBJTkcgfSBmcm9tICdAc2hlbGwvZGV0YWlsL3dvcmtsb2FkL2luZGV4JzsKdmFyIFN0YXRlZnVsU2V0ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfV29ya2xvYWQpIHsKICBmdW5jdGlvbiBTdGF0ZWZ1bFNldCgpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTdGF0ZWZ1bFNldCk7CiAgICByZXR1cm4gX2NhbGxTdXBlcih0aGlzLCBTdGF0ZWZ1bFNldCwgYXJndW1lbnRzKTsKICB9CiAgX2luaGVyaXRzKFN0YXRlZnVsU2V0LCBfV29ya2xvYWQpOwogIHJldHVybiBfY3JlYXRlQ2xhc3MoU3RhdGVmdWxTZXQsIFt7CiAgICBrZXk6ICJyb2xsQmFjayIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3JvbGxCYWNrID0gX2FzeW5jVG9HZW5lcmF0b3IoLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKGNsdXN0ZXIsIHN0YXRlZnVsU2V0LCByZXZpc2lvbikgewogICAgICAgIHZhciBib2R5OwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBib2R5ID0gW3sKICAgICAgICAgICAgICAgIG9wOiAncmVwbGFjZScsCiAgICAgICAgICAgICAgICBwYXRoOiAnL3NwZWMvdGVtcGxhdGUnLAogICAgICAgICAgICAgICAgdmFsdWU6IHsKICAgICAgICAgICAgICAgICAgbWV0YWRhdGE6IHJldmlzaW9uLmRhdGEuc3BlYy50ZW1wbGF0ZS5tZXRhZGF0YSwKICAgICAgICAgICAgICAgICAgc3BlYzogcmV2aXNpb24uZGF0YS5zcGVjLnRlbXBsYXRlLnNwZWMKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICBvcDogJ3JlcGxhY2UnLAogICAgICAgICAgICAgICAgcGF0aDogJy9tZXRhZGF0YS9nZW5lcmF0aW9uJywKICAgICAgICAgICAgICAgIHZhbHVlOiByZXZpc2lvbi5yZXZpc2lvbgogICAgICAgICAgICAgIH1dOwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgIHJldHVybiB0aGlzLnJvbGxCYWNrV29ya2xvYWQoY2x1c3Rlciwgc3RhdGVmdWxTZXQsICdzdGF0ZWZ1bHNldHMnLCBib2R5KTsKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSwgdGhpcyk7CiAgICAgIH0pKTsKICAgICAgZnVuY3Rpb24gcm9sbEJhY2soX3gsIF94MiwgX3gzKSB7CiAgICAgICAgcmV0dXJuIF9yb2xsQmFjay5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CiAgICAgIHJldHVybiByb2xsQmFjazsKICAgIH0oKSAvLyB3ZSBuZWVkIHRvIHByb3ZpZGUgYSBuZXcgcG9kcyBnZXR0ZXIgZm9yIHN0YXRlZnVsc2V0cyBiZWNhdXNlIHRoZSByZWxhdGlvbnNoaXAKICAgIC8vIGRvbmUgb24gdGhlIHBhcmVudCBtb2RlbCAid29ya2xvYWQiIGlzIG5vdCBjb3JyZWN0CiAgfSwgewogICAga2V5OiAicG9kcyIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgdmFyIF90aGlzJG1ldGFkYXRhLAogICAgICAgIF90aGlzID0gdGhpczsKICAgICAgdmFyIHJlbGF0aW9uc2hpcHMgPSAoKF90aGlzJG1ldGFkYXRhID0gdGhpcy5tZXRhZGF0YSkgPT09IG51bGwgfHwgX3RoaXMkbWV0YWRhdGEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJG1ldGFkYXRhLnJlbGF0aW9uc2hpcHMpIHx8IFtdOwogICAgICB2YXIgcG9kUmVsYXRpb25zaGlwID0gcmVsYXRpb25zaGlwcy5maWx0ZXIoZnVuY3Rpb24gKHJlbGF0aW9uc2hpcCkgewogICAgICAgIHJldHVybiByZWxhdGlvbnNoaXAudG9UeXBlID09PSBQT0Q7CiAgICAgIH0pWzBdOwogICAgICBpZiAocG9kUmVsYXRpb25zaGlwKSB7CiAgICAgICAgdmFyIHBvZHMgPSB0aGlzLiRnZXR0ZXJzWydwb2RzQnlOYW1lc3BhY2UnXSh0aGlzLm1ldGFkYXRhLm5hbWVzcGFjZSk7CiAgICAgICAgcmV0dXJuIHBvZHMuZmlsdGVyKGZ1bmN0aW9uIChwb2QpIHsKICAgICAgICAgIHZhciBfcG9kJG1ldGFkYXRhOwogICAgICAgICAgLy8gYSBiaXQgb2YgYSBkdXBsaWNhdGlvbiBvZiBwb2RSZWxhdGlvbnNoaXAsIGJ1dCBhbHdheXMgc2FmZSB0byBjaGVjay4uLgogICAgICAgICAgaWYgKChfcG9kJG1ldGFkYXRhID0gcG9kLm1ldGFkYXRhKSAhPT0gbnVsbCAmJiBfcG9kJG1ldGFkYXRhICE9PSB2b2lkIDAgJiYgKF9wb2QkbWV0YWRhdGEgPSBfcG9kJG1ldGFkYXRhLm93bmVyUmVmZXJlbmNlcykgIT09IG51bGwgJiYgX3BvZCRtZXRhZGF0YSAhPT0gdm9pZCAwICYmIF9wb2QkbWV0YWRhdGEubGVuZ3RoKSB7CiAgICAgICAgICAgIHZhciBfcG9kJG1ldGFkYXRhMjsKICAgICAgICAgICAgdmFyIG93bmVyUmVmZXJlbmNlc1N0YXRlZnVsU2V0ID0gKF9wb2QkbWV0YWRhdGEyID0gcG9kLm1ldGFkYXRhKSA9PT0gbnVsbCB8fCBfcG9kJG1ldGFkYXRhMiA9PT0gdm9pZCAwIHx8IChfcG9kJG1ldGFkYXRhMiA9IF9wb2QkbWV0YWRhdGEyLm93bmVyUmVmZXJlbmNlcykgPT09IG51bGwgfHwgX3BvZCRtZXRhZGF0YTIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9wb2QkbWV0YWRhdGEyLmZpbmQoZnVuY3Rpb24gKG93bikgewogICAgICAgICAgICAgIHJldHVybiBvd24ua2luZCA9PT0gV09SS0xPQURfVFlQRV9UT19LSU5EX01BUFBJTkdbV09SS0xPQURfVFlQRVMuU1RBVEVGVUxfU0VUXTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGlmIChvd25lclJlZmVyZW5jZXNTdGF0ZWZ1bFNldCkgewogICAgICAgICAgICAgIHJldHVybiAiIi5jb25jYXQocG9kLm1ldGFkYXRhLm5hbWVzcGFjZSwgIi8iKS5jb25jYXQob3duZXJSZWZlcmVuY2VzU3RhdGVmdWxTZXQubmFtZSkgPT09IF90aGlzLmlkOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgcmV0dXJuIFtdOwogICAgfQogIH1dKTsKfShXb3JrbG9hZCk7CmV4cG9ydCB7IFN0YXRlZnVsU2V0IGFzIGRlZmF1bHQgfTs="},{"version":3,"names":["Workload","WORKLOAD_TYPES","POD","WORKLOAD_TYPE_TO_KIND_MAPPING","StatefulSet","_Workload","_classCallCheck","_callSuper","arguments","_inherits","_createClass","key","value","_rollBack","_asyncToGenerator","_regeneratorRuntime","mark","_callee","cluster","statefulSet","revision","body","wrap","_callee$","_context","prev","next","op","path","metadata","data","spec","template","rollBackWorkload","stop","rollBack","_x","_x2","_x3","apply","get","_this$metadata","_this","relationships","podRelationship","filter","relationship","toType","pods","$getters","namespace","pod","_pod$metadata","ownerReferences","length","_pod$metadata2","ownerReferencesStatefulSet","find","own","kind","STATEFUL_SET","concat","name","id","default"],"sources":["/home/ubuntu/suseconf/node_modules/@rancher/shell/models/apps.statefulset.js"],"sourcesContent":["import Workload from './workload';\nimport { WORKLOAD_TYPES, POD } from '@shell/config/types';\nimport { WORKLOAD_TYPE_TO_KIND_MAPPING } from '@shell/detail/workload/index';\n\nexport default class StatefulSet extends Workload {\n  async rollBack(cluster, statefulSet, revision) {\n    const body = [\n      {\n        op:    'replace',\n        path:  '/spec/template',\n        value: {\n          metadata: revision.data.spec.template.metadata,\n          spec:     revision.data.spec.template.spec\n        }\n      }, {\n        op:    'replace',\n        path:  '/metadata/generation',\n        value: revision.revision,\n      }\n    ];\n\n    await this.rollBackWorkload(cluster, statefulSet, 'statefulsets', body);\n  }\n\n  // we need to provide a new pods getter for statefulsets because the relationship\n  // done on the parent model \"workload\" is not correct\n  get pods() {\n    const relationships = this.metadata?.relationships || [];\n    const podRelationship = relationships.filter((relationship) => relationship.toType === POD)[0];\n\n    if (podRelationship) {\n      const pods = this.$getters['podsByNamespace'](this.metadata.namespace);\n\n      return pods.filter((pod) => {\n        // a bit of a duplication of podRelationship, but always safe to check...\n        if (pod.metadata?.ownerReferences?.length) {\n          const ownerReferencesStatefulSet = pod.metadata?.ownerReferences?.find((own) => own.kind === WORKLOAD_TYPE_TO_KIND_MAPPING[WORKLOAD_TYPES.STATEFUL_SET]);\n\n          if (ownerReferencesStatefulSet) {\n            return `${ pod.metadata.namespace }/${ ownerReferencesStatefulSet.name }` === this.id;\n          }\n        }\n\n        return false;\n      });\n    }\n\n    return [];\n  }\n}\n"],"mappings":"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","ignoreList":[]}]}