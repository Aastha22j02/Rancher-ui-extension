{"remainingRequest":"/home/ubuntu/susecon-2024-ext-demo/node_modules/babel-loader/lib/index.js??ref--16-1!/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/store/i18n.js","dependencies":[{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/store/i18n.js","mtime":1725271280091},{"path":"/home/ubuntu/susecon-2024-ext-demo/babel.config.js","mtime":1725268750245},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/babel-loader/lib/index.js","mtime":1725271298942}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmRlc2NyaXB0aW9uLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZnJvbS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNsaWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9ycy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5rZXlzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nLmpzIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgX3R5cGVvZiBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90eXBlb2YiOwppbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5IjsKaW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiL2hvbWUvdWJ1bnR1L3N1c2Vjb24tMjAyNC1leHQtZGVtby9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvcmVnZW5lcmF0b3IvaW5kZXguanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmZ1bmN0aW9uIG93bktleXMoZSwgcikgeyB2YXIgdCA9IE9iamVjdC5rZXlzKGUpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgbyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7IHIgJiYgKG8gPSBvLmZpbHRlcihmdW5jdGlvbiAocikgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLCByKS5lbnVtZXJhYmxlOyB9KSksIHQucHVzaC5hcHBseSh0LCBvKTsgfSByZXR1cm4gdDsgfQpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKGUpIHsgZm9yICh2YXIgciA9IDE7IHIgPCBhcmd1bWVudHMubGVuZ3RoOyByKyspIHsgdmFyIHQgPSBudWxsICE9IGFyZ3VtZW50c1tyXSA/IGFyZ3VtZW50c1tyXSA6IHt9OyByICUgMiA/IG93bktleXMoT2JqZWN0KHQpLCAhMCkuZm9yRWFjaChmdW5jdGlvbiAocikgeyBfZGVmaW5lUHJvcGVydHkoZSwgciwgdFtyXSk7IH0pIDogT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMgPyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyh0KSkgOiBvd25LZXlzKE9iamVjdCh0KSkuZm9yRWFjaChmdW5jdGlvbiAocikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgciwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LCByKSk7IH0pOyB9IHJldHVybiBlOyB9CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maW5kLWluZGV4LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5wcm9taXNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwpmdW5jdGlvbiBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihyLCBlKSB7IHZhciB0ID0gInVuZGVmaW5lZCIgIT0gdHlwZW9mIFN5bWJvbCAmJiByW1N5bWJvbC5pdGVyYXRvcl0gfHwgclsiQEBpdGVyYXRvciJdOyBpZiAoIXQpIHsgaWYgKEFycmF5LmlzQXJyYXkocikgfHwgKHQgPSBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkocikpIHx8IGUgJiYgciAmJiAibnVtYmVyIiA9PSB0eXBlb2Ygci5sZW5ndGgpIHsgdCAmJiAociA9IHQpOyB2YXIgX24gPSAwLCBGID0gZnVuY3Rpb24gRigpIHt9OyByZXR1cm4geyBzOiBGLCBuOiBmdW5jdGlvbiBuKCkgeyByZXR1cm4gX24gPj0gci5sZW5ndGggPyB7IGRvbmU6ICEwIH0gOiB7IGRvbmU6ICExLCB2YWx1ZTogcltfbisrXSB9OyB9LCBlOiBmdW5jdGlvbiBlKHIpIHsgdGhyb3cgcjsgfSwgZjogRiB9OyB9IHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBpdGVyYXRlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC4iKTsgfSB2YXIgbywgYSA9ICEwLCB1ID0gITE7IHJldHVybiB7IHM6IGZ1bmN0aW9uIHMoKSB7IHQgPSB0LmNhbGwocik7IH0sIG46IGZ1bmN0aW9uIG4oKSB7IHZhciByID0gdC5uZXh0KCk7IHJldHVybiBhID0gci5kb25lLCByOyB9LCBlOiBmdW5jdGlvbiBlKHIpIHsgdSA9ICEwLCBvID0gcjsgfSwgZjogZnVuY3Rpb24gZigpIHsgdHJ5IHsgYSB8fCBudWxsID09IHQucmV0dXJuIHx8IHQucmV0dXJuKCk7IH0gZmluYWxseSB7IGlmICh1KSB0aHJvdyBvOyB9IH0gfTsgfQpmdW5jdGlvbiBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkociwgYSkgeyBpZiAocikgeyBpZiAoInN0cmluZyIgPT0gdHlwZW9mIHIpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShyLCBhKTsgdmFyIHQgPSB7fS50b1N0cmluZy5jYWxsKHIpLnNsaWNlKDgsIC0xKTsgcmV0dXJuICJPYmplY3QiID09PSB0ICYmIHIuY29uc3RydWN0b3IgJiYgKHQgPSByLmNvbnN0cnVjdG9yLm5hbWUpLCAiTWFwIiA9PT0gdCB8fCAiU2V0IiA9PT0gdCA/IEFycmF5LmZyb20ocikgOiAiQXJndW1lbnRzIiA9PT0gdCB8fCAvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdCh0KSA/IF9hcnJheUxpa2VUb0FycmF5KHIsIGEpIDogdm9pZCAwOyB9IH0KZnVuY3Rpb24gX2FycmF5TGlrZVRvQXJyYXkociwgYSkgeyAobnVsbCA9PSBhIHx8IGEgPiByLmxlbmd0aCkgJiYgKGEgPSByLmxlbmd0aCk7IGZvciAodmFyIGUgPSAwLCBuID0gQXJyYXkoYSk7IGUgPCBhOyBlKyspIG5bZV0gPSByW2VdOyByZXR1cm4gbjsgfQppbXBvcnQgbWVyZ2UgZnJvbSAnbG9kYXNoL21lcmdlJzsKaW1wb3J0IEludGxNZXNzYWdlRm9ybWF0IGZyb20gJ2ludGwtbWVzc2FnZWZvcm1hdCc7CmltcG9ydCB7IGdldCB9IGZyb20gJ0BzaGVsbC91dGlscy9vYmplY3QnOwppbXBvcnQgZW4gZnJvbSAnQHNoZWxsL2Fzc2V0cy90cmFuc2xhdGlvbnMvZW4tdXMueWFtbCc7CmltcG9ydCB7IGdldFByb2R1Y3QsIGdldFZlbmRvciwgRE9DU19CQVNFIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy9wcml2YXRlLWxhYmVsJzsKaW1wb3J0IHsgbG9hZFRyYW5zbGF0aW9uIH0gZnJvbSAnQHNoZWxsL3V0aWxzL2R5bmFtaWMtaW1wb3J0ZXInOwp2YXIgTk9ORSA9ICdub25lJzsKdmFyIERFRkFVTFRfTE9DQUxFID0gJ2VuLXVzJzsKCi8vIEZvcm1hdHRlcnMgY2FuJ3QgYmUgc2VyaWFsaXplZCBpbnRvIHN0YXRlCnZhciBpbnRsQ2FjaGUgPSB7fTsKdmFyIGxhc3RMb2FkZWQgPSAwOwpleHBvcnQgdmFyIHN0YXRlID0gZnVuY3Rpb24gc3RhdGUoKSB7CiAgLy8gY29uc3QgdHJhbnNsYXRpb25Db250ZXh0ID0gcmVxdWlyZS5jb250ZXh0KCdAc2hlbGwvYXNzZXRzL3RyYW5zbGF0aW9ucycsIHRydWUsIC8uKi8pOwogIC8vIGNvbnN0IGF2YWlsYWJsZSA9IHRyYW5zbGF0aW9uQ29udGV4dC5rZXlzKCkubWFwKHBhdGggPT4gcGF0aC5yZXBsYWNlKC9eLipcLyhbXlwvXSspXC5bXi5dKyQvLCAnJDEnKSk7CiAgLy8gVXNpbmcgcmVxdWlyZS5jb250ZXh0KCkgZm9yY2VzIHRoZW0gdG8gYWxsIGJlIGluIHRoZSBzYW1lIHdlYnBhY2sgY2h1bmsgbmFtZS4uLiBqdXN0IGhhcmRjb2RlIHRoZSBsaXN0IGZvciBub3cgc28gemgtaGFucwogIC8vIGdldHMgZ2VuZXJhdGVkIGFzIGl0J3Mgb3duIGNodW5rIGluc3RlYWQgb2YgYmVpbmcgbG9hZGVkIGFsbCB0aGUgdGltZS4KICB2YXIgYXZhaWxhYmxlID0gW0RFRkFVTFRfTE9DQUxFLCAnemgtaGFucyddOwogIHZhciBvdXQgPSB7CiAgICBkZWZhdWx0OiBERUZBVUxUX0xPQ0FMRSwKICAgIHNlbGVjdGVkOiBudWxsLAogICAgcHJldmlvdXM6IG51bGwsCiAgICBhdmFpbGFibGU6IGF2YWlsYWJsZSwKICAgIHRyYW5zbGF0aW9uczogX2RlZmluZVByb3BlcnR5KHt9LCBERUZBVUxUX0xPQ0FMRSwgZW4pCiAgfTsKICByZXR1cm4gb3V0Owp9OwpleHBvcnQgdmFyIGdldHRlcnMgPSB7CiAgc2VsZWN0ZWRMb2NhbGVMYWJlbDogZnVuY3Rpb24gc2VsZWN0ZWRMb2NhbGVMYWJlbChzdGF0ZSkgewogICAgdmFyIGtleSA9ICJsb2NhbGUuIi5jb25jYXQoc3RhdGUuc2VsZWN0ZWQpOwogICAgaWYgKHN0YXRlLnNlbGVjdGVkID09PSBOT05FKSB7CiAgICAgIHJldHVybiAiJSIuY29uY2F0KGtleSwgIiUiKTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBnZXQoc3RhdGUudHJhbnNsYXRpb25zW3N0YXRlLmRlZmF1bHRdLCBrZXkpOwogICAgfQogIH0sCiAgYXZhaWxhYmxlTG9jYWxlczogZnVuY3Rpb24gYXZhaWxhYmxlTG9jYWxlcyhzdGF0ZSwgZ2V0dGVycykgewogICAgdmFyIG91dCA9IHt9OwogICAgdmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHN0YXRlLmF2YWlsYWJsZSksCiAgICAgIF9zdGVwOwogICAgdHJ5IHsKICAgICAgZm9yIChfaXRlcmF0b3IucygpOyAhKF9zdGVwID0gX2l0ZXJhdG9yLm4oKSkuZG9uZTspIHsKICAgICAgICB2YXIgbG9jYWxlID0gX3N0ZXAudmFsdWU7CiAgICAgICAgdmFyIGtleSA9ICJsb2NhbGUuIi5jb25jYXQobG9jYWxlKTsKICAgICAgICBpZiAoc3RhdGUuc2VsZWN0ZWQgPT09IE5PTkUpIHsKICAgICAgICAgIG91dFtsb2NhbGVdID0gIiUiLmNvbmNhdChrZXksICIlIik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIG91dFtsb2NhbGVdID0gZ2V0KHN0YXRlLnRyYW5zbGF0aW9uc1tzdGF0ZS5kZWZhdWx0XSwga2V5KTsKICAgICAgICB9CiAgICAgIH0KICAgIH0gY2F0Y2ggKGVycikgewogICAgICBfaXRlcmF0b3IuZShlcnIpOwogICAgfSBmaW5hbGx5IHsKICAgICAgX2l0ZXJhdG9yLmYoKTsKICAgIH0KICAgIHJldHVybiBvdXQ7CiAgfSwKICB0OiBmdW5jdGlvbiB0KHN0YXRlKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKGtleSwgYXJncywgbGFuZ3VhZ2UpIHsKICAgICAgaWYgKHN0YXRlLnNlbGVjdGVkID09PSBOT05FICYmICFsYW5ndWFnZSkgewogICAgICAgIHJldHVybiAiJSIuY29uY2F0KGtleSwgIiUiKTsKICAgICAgfQogICAgICB2YXIgbG9jYWxlID0gbGFuZ3VhZ2UgfHwgc3RhdGUuc2VsZWN0ZWQ7CiAgICAgIHZhciBjYWNoZUtleSA9ICIiLmNvbmNhdChsb2NhbGUsICIvIikuY29uY2F0KGtleSk7CiAgICAgIHZhciBmb3JtYXR0ZXIgPSBpbnRsQ2FjaGVbY2FjaGVLZXldOwogICAgICBpZiAoIWZvcm1hdHRlcikgewogICAgICAgIHZhciBfbXNnOwogICAgICAgIHZhciBtc2cgPSBnZXQoc3RhdGUudHJhbnNsYXRpb25zW2xvY2FsZV0sIGtleSk7CiAgICAgICAgaWYgKCFtc2cpIHsKICAgICAgICAgIG1zZyA9IGdldChzdGF0ZS50cmFuc2xhdGlvbnNbc3RhdGUuZGVmYXVsdF0sIGtleSk7CiAgICAgICAgfQogICAgICAgIGlmIChtc2cgPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDsKICAgICAgICB9CiAgICAgICAgaWYgKF90eXBlb2YobXNnKSA9PT0gJ29iamVjdCcpIHsKICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1RyYW5zbGF0aW9uIGZvcicsIGNhY2hlS2V5LCAnaXMgYW4gb2JqZWN0Jyk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc29sZQoKICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7CiAgICAgICAgfQogICAgICAgIGlmICgoX21zZyA9IG1zZykgIT09IG51bGwgJiYgX21zZyAhPT0gdm9pZCAwICYmIF9tc2cuaW5jbHVkZXMoJ3snKSkgewogICAgICAgICAgZm9ybWF0dGVyID0gbmV3IEludGxNZXNzYWdlRm9ybWF0KG1zZywgbG9jYWxlKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgZm9ybWF0dGVyID0gbXNnOwogICAgICAgIH0KICAgICAgICBpbnRsQ2FjaGVbY2FjaGVLZXldID0gZm9ybWF0dGVyOwogICAgICB9CiAgICAgIGlmICh0eXBlb2YgZm9ybWF0dGVyID09PSAnc3RyaW5nJykgewogICAgICAgIHJldHVybiBmb3JtYXR0ZXI7CiAgICAgIH0gZWxzZSBpZiAoZm9ybWF0dGVyICYmIGZvcm1hdHRlci5mb3JtYXQpIHsKICAgICAgICAvLyBJbmplY3QgdGhpbmdzIGxpa2UgYXBwTmFtZSBzbyB0aGV5J3JlIGFsd2F5cyBhdmFpbGFibGUgaW4gYW55IHRyYW5zbGF0aW9uCiAgICAgICAgdmFyIG1vcmVBcmdzID0gX29iamVjdFNwcmVhZCh7CiAgICAgICAgICB2ZW5kb3I6IGdldFZlbmRvcigpLAogICAgICAgICAgYXBwTmFtZTogZ2V0UHJvZHVjdCgpLAogICAgICAgICAgZG9jc0Jhc2U6IERPQ1NfQkFTRQogICAgICAgIH0sIGFyZ3MpOwogICAgICAgIHJldHVybiBmb3JtYXR0ZXIuZm9ybWF0KG1vcmVBcmdzKTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gJz8nOwogICAgICB9CiAgICB9OwogIH0sCiAgZXhpc3RzOiBmdW5jdGlvbiBleGlzdHMoc3RhdGUpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoa2V5LCBsYW5ndWFnZSkgewogICAgICB2YXIgbG9jYWxlID0gbGFuZ3VhZ2UgfHwgc3RhdGUuc2VsZWN0ZWQ7CiAgICAgIHZhciBjYWNoZUtleSA9ICIiLmNvbmNhdChsb2NhbGUsICIvIikuY29uY2F0KGtleSk7CiAgICAgIGlmIChpbnRsQ2FjaGVbY2FjaGVLZXldKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KICAgICAgdmFyIG1zZyA9IGdldChzdGF0ZS50cmFuc2xhdGlvbnNbc3RhdGUuZGVmYXVsdF0sIGtleSk7CiAgICAgIGlmICghbXNnICYmIGxvY2FsZSAmJiBsb2NhbGUgIT09IE5PTkUpIHsKICAgICAgICBtc2cgPSBnZXQoc3RhdGUudHJhbnNsYXRpb25zW2xvY2FsZV0sIGtleSk7CiAgICAgIH0KICAgICAgaWYgKG1zZyAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KICAgICAgcmV0dXJuIGZhbHNlOwogICAgfTsKICB9LAogIGN1cnJlbnQ6IGZ1bmN0aW9uIGN1cnJlbnQoc3RhdGUpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBzdGF0ZS5zZWxlY3RlZDsKICAgIH07CiAgfSwKICBkZWZhdWx0OiBmdW5jdGlvbiBfZGVmYXVsdChzdGF0ZSkgewogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHN0YXRlLmRlZmF1bHQ7CiAgICB9OwogIH0sCiAgbXVsdGlXaXRoRmFsbGJhY2s6IGZ1bmN0aW9uIG11bHRpV2l0aEZhbGxiYWNrKHN0YXRlLCBnZXR0ZXJzKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKGl0ZW1zKSB7CiAgICAgIHZhciBrZXkgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6ICdrZXknOwogICAgICByZXR1cm4gaXRlbXMubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgaXRlbVtrZXldID0gZ2V0dGVycy53aXRoRmFsbGJhY2soaXRlbVtrZXldLCBudWxsLCBpdGVtW2tleV0pOwogICAgICAgIHJldHVybiBpdGVtOwogICAgICB9KTsKICAgIH07CiAgfSwKICB3aXRoRmFsbGJhY2s6IGZ1bmN0aW9uIHdpdGhGYWxsYmFjayhzdGF0ZSwgZ2V0dGVycykgewogICAgcmV0dXJuIGZ1bmN0aW9uIChrZXksIGFyZ3MsIGZhbGxiYWNrKSB7CiAgICAgIHZhciBmYWxsYmFja0lzS2V5ID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiBmYWxzZTsKICAgICAgLy8gU3VwcG9ydCB3aXRoRmFsbGJhY2soa2V5LGZhbGxiYWNrKSB3aGVuIG5vIGFyZ3MKICAgICAgaWYgKCFmYWxsYmFjayAmJiB0eXBlb2YgYXJncyA9PT0gJ3N0cmluZycpIHsKICAgICAgICBmYWxsYmFjayA9IGFyZ3M7CiAgICAgICAgYXJncyA9IHt9OwogICAgICB9CiAgICAgIGlmIChnZXR0ZXJzLmV4aXN0cyhrZXkpKSB7CiAgICAgICAgcmV0dXJuIGdldHRlcnMudChrZXksIGFyZ3MpOwogICAgICB9IGVsc2UgaWYgKGZhbGxiYWNrSXNLZXkpIHsKICAgICAgICByZXR1cm4gZ2V0dGVycy50KGZhbGxiYWNrLCBhcmdzKTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gZmFsbGJhY2s7CiAgICAgIH0KICAgIH07CiAgfQp9OwpleHBvcnQgdmFyIG11dGF0aW9ucyA9IHsKICBsb2FkVHJhbnNsYXRpb25zOiBmdW5jdGlvbiBsb2FkVHJhbnNsYXRpb25zKHN0YXRlLCBfcmVmKSB7CiAgICB2YXIgbG9jYWxlID0gX3JlZi5sb2NhbGUsCiAgICAgIHRyYW5zbGF0aW9ucyA9IF9yZWYudHJhbnNsYXRpb25zOwogICAgc3RhdGUudHJhbnNsYXRpb25zW2xvY2FsZV0gPSB0cmFuc2xhdGlvbnM7CiAgfSwKICBtZXJnZUxvYWRUcmFuc2xhdGlvbnM6IGZ1bmN0aW9uIG1lcmdlTG9hZFRyYW5zbGF0aW9ucyhzdGF0ZSwgX3JlZjIpIHsKICAgIHZhciBsb2NhbGUgPSBfcmVmMi5sb2NhbGUsCiAgICAgIHRyYW5zbGF0aW9ucyA9IF9yZWYyLnRyYW5zbGF0aW9uczsKICAgIGlmICghc3RhdGUudHJhbnNsYXRpb25zW2xvY2FsZV0pIHsKICAgICAgc3RhdGUudHJhbnNsYXRpb25zW2xvY2FsZV0gPSB0cmFuc2xhdGlvbnM7CiAgICB9IGVsc2UgewogICAgICBtZXJnZShzdGF0ZS50cmFuc2xhdGlvbnNbbG9jYWxlXSwgdHJhbnNsYXRpb25zKTsKICAgIH0KICB9LAogIHNldFNlbGVjdGVkOiBmdW5jdGlvbiBzZXRTZWxlY3RlZChzdGF0ZSwgbG9jYWxlKSB7CiAgICAvLyB0aGlzIHdpbGwgc2V0IHRoZSBsYW5nIHBhcmFtIG9uIEhUTUwgKGJlc3QgcGxhY2UgdG8gYWRkIHRoaXMgYWN0aW9uIHNpbmNlIGFsbCBsb2NhbGUgY2hhbmdlcyBnbyB0aHJvdWdoIHRoaXMgbXV0YXRpb24pCiAgICBpZiAobG9jYWxlID09PSBOT05FKSB7CiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2h0bWwnKS5yZW1vdmVBdHRyaWJ1dGUoJ2xhbmcnKTsKICAgIH0gZWxzZSB7CiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2h0bWwnKS5zZXRBdHRyaWJ1dGUoJ2xhbmcnLCBsb2NhbGUpOwogICAgfQogICAgc3RhdGUuc2VsZWN0ZWQgPSBsb2NhbGU7CiAgfSwKICAvLyBBZGQgYSBsb2NhbGUgdG8gdGhlIGxpc3Qgb2YgYXZhaWxhYmxlIGxvY2FsZXMKICBhZGRMb2NhbGU6IGZ1bmN0aW9uIGFkZExvY2FsZShzdGF0ZSwgX3JlZjMpIHsKICAgIHZhciBsb2NhbGUgPSBfcmVmMy5sb2NhbGUsCiAgICAgIGxhYmVsID0gX3JlZjMubGFiZWw7CiAgICB2YXIgaGFzTG9jYWxlID0gc3RhdGUuYXZhaWxhYmxlLmZpbmQoZnVuY3Rpb24gKGwpIHsKICAgICAgcmV0dXJuIGwgPT09IGxvY2FsZTsKICAgIH0pOwogICAgaWYgKCFoYXNMb2NhbGUpIHsKICAgICAgdmFyIF9zdGF0ZSR0cmFuc2xhdGlvbnMkczsKICAgICAgc3RhdGUuYXZhaWxhYmxlLnB1c2gobG9jYWxlKTsKICAgICAgaWYgKCEoKF9zdGF0ZSR0cmFuc2xhdGlvbnMkcyA9IHN0YXRlLnRyYW5zbGF0aW9uc1tzdGF0ZS5kZWZhdWx0XSkgIT09IG51bGwgJiYgX3N0YXRlJHRyYW5zbGF0aW9ucyRzICE9PSB2b2lkIDAgJiYgKF9zdGF0ZSR0cmFuc2xhdGlvbnMkcyA9IF9zdGF0ZSR0cmFuc2xhdGlvbnMkcy5sb2NhbGUpICE9PSBudWxsICYmIF9zdGF0ZSR0cmFuc2xhdGlvbnMkcyAhPT0gdm9pZCAwICYmIF9zdGF0ZSR0cmFuc2xhdGlvbnMkc1tsb2NhbGVdKSkgewogICAgICAgIHN0YXRlLnRyYW5zbGF0aW9uc1tzdGF0ZS5kZWZhdWx0XS5sb2NhbGVbbG9jYWxlXSA9IGxhYmVsOwogICAgICB9CiAgICB9CiAgfSwKICAvLyBSZW1vdmUgbG9jYWxlCiAgcmVtb3ZlTG9jYWxlOiBmdW5jdGlvbiByZW1vdmVMb2NhbGUoc3RhdGUsIGxvY2FsZSkgewogICAgdmFyIGluZGV4ID0gc3RhdGUuYXZhaWxhYmxlLmZpbmRJbmRleChmdW5jdGlvbiAobCkgewogICAgICByZXR1cm4gbCA9PT0gbG9jYWxlOwogICAgfSk7CiAgICBpZiAoaW5kZXggIT09IC0xKSB7CiAgICAgIHN0YXRlLmF2YWlsYWJsZS5zcGxpY2UoaW5kZXgsIDEpOwogICAgICBpZiAoc3RhdGUudHJhbnNsYXRpb25zW2xvY2FsZV0pIHsKICAgICAgICBkZWxldGUgc3RhdGUudHJhbnNsYXRpb25zW2xvY2FsZV07CiAgICAgIH0KICAgIH0KICB9Cn07CmV4cG9ydCB2YXIgYWN0aW9ucyA9IHsKICBpbml0OiBmdW5jdGlvbiBpbml0KF9yZWY0KSB7CiAgICB2YXIgc3RhdGUgPSBfcmVmNC5zdGF0ZSwKICAgICAgY29tbWl0ID0gX3JlZjQuY29tbWl0LAogICAgICBkaXNwYXRjaCA9IF9yZWY0LmRpc3BhdGNoLAogICAgICByb290R2V0dGVycyA9IF9yZWY0LnJvb3RHZXR0ZXJzOwogICAgdmFyIHNlbGVjdGVkID0gcm9vdEdldHRlcnNbJ3ByZWZzL2dldCddKCdsb2NhbGUnKTsKCiAgICAvLyBXZSBtaWdodCBiZSB1c2luZyBhIGxvY2FsZSB0aGF0IGlzIGxvYWRlZCBieSBhIHBsdWdpbiB0aGF0IGlzIG5vIGxvbmdlciBsb2FkZWQKICAgIHZhciBleGlzdHMgPSAhIXN0YXRlLmF2YWlsYWJsZS5maW5kKGZ1bmN0aW9uIChsb2MpIHsKICAgICAgcmV0dXJuIGxvYyA9PT0gc2VsZWN0ZWQ7CiAgICB9KTsKICAgIGlmICghc2VsZWN0ZWQgfHwgIWV4aXN0cykgewogICAgICBzZWxlY3RlZCA9IHN0YXRlLmRlZmF1bHQ7CiAgICB9CiAgICByZXR1cm4gZGlzcGF0Y2goJ3N3aXRjaFRvJywgc2VsZWN0ZWQpOwogIH0sCiAgbG9hZDogZnVuY3Rpb24gbG9hZChfcmVmNSwgbG9jYWxlKSB7CiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgdmFyIGNvbW1pdCwgdHJhbnNsYXRpb25zTW9kdWxlLCB0cmFuc2xhdGlvbnM7CiAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBjb21taXQgPSBfcmVmNS5jb21taXQ7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICByZXR1cm4gbG9hZFRyYW5zbGF0aW9uKGxvY2FsZSk7CiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgIHRyYW5zbGF0aW9uc01vZHVsZSA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgIHRyYW5zbGF0aW9ucyA9IHRyYW5zbGF0aW9uc01vZHVsZS5kZWZhdWx0IHx8IHRyYW5zbGF0aW9uc01vZHVsZTsKICAgICAgICAgICAgY29tbWl0KCdsb2FkVHJhbnNsYXRpb25zJywgewogICAgICAgICAgICAgIGxvY2FsZTogbG9jYWxlLAogICAgICAgICAgICAgIHRyYW5zbGF0aW9uczogdHJhbnNsYXRpb25zCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCB0cnVlKTsKICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlKTsKICAgIH0pKSgpOwogIH0sCiAgbWVyZ2VMb2FkOiBmdW5jdGlvbiBtZXJnZUxvYWQoX3JlZjYsIF9yZWY3KSB7CiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgIHZhciBjb21taXQsIGxvY2FsZSwgbW9kdWxlLCBwcm9taXNlLCB0cmFuc2xhdGlvbnNNb2R1bGUsIHRyYW5zbGF0aW9uczsKICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBjb21taXQgPSBfcmVmNi5jb21taXQ7CiAgICAgICAgICAgIGxvY2FsZSA9IF9yZWY3LmxvY2FsZSwgbW9kdWxlID0gX3JlZjcubW9kdWxlOwogICAgICAgICAgICBwcm9taXNlID0gdHlwZW9mIG1vZHVsZSA9PT0gJ2Z1bmN0aW9uJyA/IG1vZHVsZSgpIDogUHJvbWlzZS5yZXNvbHZlKG1vZHVsZSk7CiAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNTsKICAgICAgICAgICAgcmV0dXJuIHByb21pc2U7CiAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgIHRyYW5zbGF0aW9uc01vZHVsZSA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICB0cmFuc2xhdGlvbnMgPSB0cmFuc2xhdGlvbnNNb2R1bGUuZGVmYXVsdCB8fCB0cmFuc2xhdGlvbnNNb2R1bGU7CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCBjb21taXQoJ21lcmdlTG9hZFRyYW5zbGF0aW9ucycsIHsKICAgICAgICAgICAgICBsb2NhbGU6IGxvY2FsZSwKICAgICAgICAgICAgICB0cmFuc2xhdGlvbnM6IHRyYW5zbGF0aW9ucwogICAgICAgICAgICB9KSk7CiAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUyKTsKICAgIH0pKSgpOwogIH0sCiAgLy8gQWRkIGEgbG9jYWxlIHRvIHRoZSBsaXN0IG9mIGF2YWlsYWJsZSBsb2NhbGVzCiAgYWRkTG9jYWxlOiBmdW5jdGlvbiBhZGRMb2NhbGUoX3JlZjgsIF9yZWY5KSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjguY29tbWl0OwogICAgdmFyIGxvY2FsZSA9IF9yZWY5LmxvY2FsZSwKICAgICAgbGFiZWwgPSBfcmVmOS5sYWJlbDsKICAgIGNvbW1pdCgnYWRkTG9jYWxlJywgewogICAgICBsb2NhbGU6IGxvY2FsZSwKICAgICAgbGFiZWw6IGxhYmVsCiAgICB9KTsKICB9LAogIC8vIFJlbW92ZSBhIGxvY2FsZSBmcm9tIHRoZSBsaXN0IG9mIGF2YWlsYWJsZSBsb2NhbGVzCiAgcmVtb3ZlTG9jYWxlOiBmdW5jdGlvbiByZW1vdmVMb2NhbGUoX3JlZjEwLCBfcmVmMTEpIHsKICAgIHZhciBjb21taXQgPSBfcmVmMTAuY29tbWl0LAogICAgICBnZXR0ZXJzID0gX3JlZjEwLmdldHRlcnMsCiAgICAgIGRpc3BhdGNoID0gX3JlZjEwLmRpc3BhdGNoOwogICAgdmFyIGxvY2FsZSA9IF9yZWYxMS5sb2NhbGU7CiAgICB2YXIgY3VycmVudCA9IGdldHRlcnNbJ2N1cnJlbnQnXSgpOwoKICAgIC8vIElmIHdlIGFyZSByZW1vdmluZyB0aGUgY3VycmVudCBsb2NhbGUsIHN3aXRjaCBiYWNrIHRvIHRoZSBkZWZhdWx0IGxvY2FsZQogICAgaWYgKGN1cnJlbnQgPT09IGxvY2FsZSkgewogICAgICBkaXNwYXRjaCgnc3dpdGNoVG8nLCBERUZBVUxUX0xPQ0FMRSk7CiAgICB9CiAgICBjb21taXQoJ3JlbW92ZUxvY2FsZScsIGxvY2FsZSk7CiAgfSwKICBzd2l0Y2hUbzogZnVuY3Rpb24gc3dpdGNoVG8oX3JlZjEyLCBsb2NhbGUpIHsKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMygpIHsKICAgICAgdmFyIF9yb290U3RhdGUkJHBsdWdpbiwgX3Jvb3RTdGF0ZSQkcGx1Z2luMjsKICAgICAgdmFyIHN0YXRlLCByb290U3RhdGUsIGNvbW1pdCwgZGlzcGF0Y2gsIGdldHRlcnMsIGN1cnJlbnRMb2NhbGUsIGxhc3RMb2FkLCBpMThuRXh0LCByZWxvYWQsIHAsIF9yb290U3RhdGUkJHBsdWdpbjMsIGRlZmF1bHRJMThuRXh0OwogICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIHN0YXRlID0gX3JlZjEyLnN0YXRlLCByb290U3RhdGUgPSBfcmVmMTIucm9vdFN0YXRlLCBjb21taXQgPSBfcmVmMTIuY29tbWl0LCBkaXNwYXRjaCA9IF9yZWYxMi5kaXNwYXRjaCwgZ2V0dGVycyA9IF9yZWYxMi5nZXR0ZXJzOwogICAgICAgICAgICBjdXJyZW50TG9jYWxlID0gZ2V0dGVyc1snY3VycmVudCddKCk7CiAgICAgICAgICAgIGlmICghKGxvY2FsZSA9PT0gTk9ORSkpIHsKICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDU7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY29tbWl0KCdzZXRTZWxlY3RlZCcsIGxvY2FsZSk7CgogICAgICAgICAgICAvLyBEb24ndCByZW1lbWJlciBpbnRvIGNvb2tpZQogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIik7CiAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgIGxhc3RMb2FkID0gKF9yb290U3RhdGUkJHBsdWdpbiA9IHJvb3RTdGF0ZS4kcGx1Z2luKSA9PT0gbnVsbCB8fCBfcm9vdFN0YXRlJCRwbHVnaW4gPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9yb290U3RhdGUkJHBsdWdpbi5sYXN0TG9hZDsKICAgICAgICAgICAgaTE4bkV4dCA9IChfcm9vdFN0YXRlJCRwbHVnaW4yID0gcm9vdFN0YXRlLiRwbHVnaW4pID09PSBudWxsIHx8IF9yb290U3RhdGUkJHBsdWdpbjIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9yb290U3RhdGUkJHBsdWdpbjIuZ2V0RHluYW1pYygnbDEwbicsIGxvY2FsZSk7CiAgICAgICAgICAgIHJlbG9hZCA9IGxhc3RMb2FkZWQgPCBsYXN0TG9hZDsKICAgICAgICAgICAgbGFzdExvYWRlZCA9IGxhc3RMb2FkOwogICAgICAgICAgICBpZiAoISghc3RhdGUudHJhbnNsYXRpb25zW2xvY2FsZV0gfHwgcmVsb2FkKSkgewogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMzQ7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgX2NvbnRleHQzLnByZXYgPSAxMDsKICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAxMzsKICAgICAgICAgICAgcmV0dXJuIGRpc3BhdGNoKCdsb2FkJywgbG9jYWxlKTsKICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjA7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgX2NvbnRleHQzLnByZXYgPSAxNTsKICAgICAgICAgICAgX2NvbnRleHQzLnQwID0gX2NvbnRleHQzWyJjYXRjaCJdKDEwKTsKICAgICAgICAgICAgaWYgKCEoIWkxOG5FeHQgJiYgbG9jYWxlICE9PSBERUZBVUxUX0xPQ0FMRSkpIHsKICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDIwOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIFRyeSB0byBzaG93IHNvbWV0aGluZy4uLiB3ZSBjb3VsZCBub3QgbG9hZCB0aGUgbG9jYWxlIGZyb20gdGhlIGJ1aWx0LWluIHRyYW5zbGF0aW9ucwogICAgICAgICAgICAvLyBhbmQgdGhlcmUgYXJlIG5vIHBsdWdpbnMgcHJvdmlkaW5nIHRyYW5zbGF0aW9ucwogICAgICAgICAgICBjb21taXQoJ3NldFNlbGVjdGVkJywgREVGQVVMVF9MT0NBTEUpOwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIik7CiAgICAgICAgICBjYXNlIDIwOgogICAgICAgICAgICBpZiAoIShpMThuRXh0ICYmIGkxOG5FeHQubGVuZ3RoKSkgewogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMzQ7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcCA9IFtdOwogICAgICAgICAgICBpMThuRXh0LmZvckVhY2goZnVuY3Rpb24gKGZuKSB7CiAgICAgICAgICAgICAgcC5wdXNoKGRpc3BhdGNoKCdtZXJnZUxvYWQnLCB7CiAgICAgICAgICAgICAgICBsb2NhbGU6IGxvY2FsZSwKICAgICAgICAgICAgICAgIG1vZHVsZTogZm4KICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgLy8gbG9hZCBhbGwgb2YgdGhlIGRlZmF1bHQgbG9jYWxlcyBmcm9tIHRoZSBwbHVnaW5zIGZvciBmYWxsYmFjawogICAgICAgICAgICBpZiAobG9jYWxlICE9PSBERUZBVUxUX0xPQ0FMRSkgewogICAgICAgICAgICAgIGRlZmF1bHRJMThuRXh0ID0gKF9yb290U3RhdGUkJHBsdWdpbjMgPSByb290U3RhdGUuJHBsdWdpbikgPT09IG51bGwgfHwgX3Jvb3RTdGF0ZSQkcGx1Z2luMyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3Jvb3RTdGF0ZSQkcGx1Z2luMy5nZXREeW5hbWljKCdsMTBuJywgREVGQVVMVF9MT0NBTEUpOwogICAgICAgICAgICAgIGlmIChkZWZhdWx0STE4bkV4dCAmJiBkZWZhdWx0STE4bkV4dC5sZW5ndGgpIHsKICAgICAgICAgICAgICAgIGRlZmF1bHRJMThuRXh0LmZvckVhY2goZnVuY3Rpb24gKGZuKSB7CiAgICAgICAgICAgICAgICAgIHAucHVzaChkaXNwYXRjaCgnbWVyZ2VMb2FkJywgewogICAgICAgICAgICAgICAgICAgIGxvY2FsZTogREVGQVVMVF9MT0NBTEUsCiAgICAgICAgICAgICAgICAgICAgbW9kdWxlOiBmbgogICAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgX2NvbnRleHQzLnByZXYgPSAyNDsKICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyNzsKICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKHApOwogICAgICAgICAgY2FzZSAyNzoKICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAzNDsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlIDI5OgogICAgICAgICAgICBfY29udGV4dDMucHJldiA9IDI5OwogICAgICAgICAgICBfY29udGV4dDMudDEgPSBfY29udGV4dDNbImNhdGNoIl0oMjQpOwogICAgICAgICAgICBpZiAoIShsb2NhbGUgIT09IERFRkFVTFRfTE9DQUxFKSkgewogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMzQ7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY29tbWl0KCdzZXRTZWxlY3RlZCcsIERFRkFVTFRfTE9DQUxFKTsKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoInJldHVybiIpOwogICAgICAgICAgY2FzZSAzNDoKICAgICAgICAgICAgY29tbWl0KCdzZXRTZWxlY3RlZCcsIGxvY2FsZSk7CgogICAgICAgICAgICAvLyBPbnkgdXBkYXRlIHRoZSBwcmVmZXJlbmNlIGlmIHRoZSBsb2NhbGUgY2hhbmdlZAogICAgICAgICAgICBpZiAoY3VycmVudExvY2FsZSAhPT0gbG9jYWxlKSB7CiAgICAgICAgICAgICAgZGlzcGF0Y2goJ3ByZWZzL3NldCcsIHsKICAgICAgICAgICAgICAgIGtleTogJ2xvY2FsZScsCiAgICAgICAgICAgICAgICB2YWx1ZTogc3RhdGUuc2VsZWN0ZWQKICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICByb290OiB0cnVlCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIGNhc2UgMzY6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUzLCBudWxsLCBbWzEwLCAxNV0sIFsyNCwgMjldXSk7CiAgICB9KSkoKTsKICB9LAogIHRvZ2dsZU5vbmU6IGZ1bmN0aW9uIHRvZ2dsZU5vbmUoX3JlZjEzKSB7CiAgICB2YXIgc3RhdGUgPSBfcmVmMTMuc3RhdGUsCiAgICAgIGRpc3BhdGNoID0gX3JlZjEzLmRpc3BhdGNoOwogICAgaWYgKHN0YXRlLnNlbGVjdGVkID09PSBOT05FKSB7CiAgICAgIHJldHVybiBkaXNwYXRjaCgnc3dpdGNoVG8nLCBzdGF0ZS5wcmV2aW91cyB8fCBzdGF0ZS5kZWZhdWx0KTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBkaXNwYXRjaCgnc3dpdGNoVG8nLCBOT05FKTsKICAgIH0KICB9Cn07"},{"version":3,"names":["merge","IntlMessageFormat","get","en","getProduct","getVendor","DOCS_BASE","loadTranslation","NONE","DEFAULT_LOCALE","intlCache","lastLoaded","state","available","out","default","selected","previous","translations","_defineProperty","getters","selectedLocaleLabel","key","concat","availableLocales","_iterator","_createForOfIteratorHelper","_step","s","n","done","locale","value","err","e","f","t","args","language","cacheKey","formatter","_msg","msg","undefined","_typeof","console","error","includes","format","moreArgs","_objectSpread","vendor","appName","docsBase","exists","current","_default","multiWithFallback","items","arguments","length","map","item","withFallback","fallback","fallbackIsKey","mutations","loadTranslations","_ref","mergeLoadTranslations","_ref2","setSelected","document","querySelector","removeAttribute","setAttribute","addLocale","_ref3","label","hasLocale","find","l","_state$translations$s","push","removeLocale","index","findIndex","splice","actions","init","_ref4","commit","dispatch","rootGetters","loc","load","_ref5","_asyncToGenerator","_regeneratorRuntime","mark","_callee","translationsModule","wrap","_callee$","_context","prev","next","sent","abrupt","stop","mergeLoad","_ref6","_ref7","_callee2","module","promise","_callee2$","_context2","Promise","resolve","_ref8","_ref9","_ref10","_ref11","switchTo","_ref12","_callee3","_rootState$$plugin","_rootState$$plugin2","rootState","currentLocale","lastLoad","i18nExt","reload","p","_rootState$$plugin3","defaultI18nExt","_callee3$","_context3","$plugin","getDynamic","t0","forEach","fn","all","t1","root","toggleNone","_ref13"],"sources":["/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/store/i18n.js"],"sourcesContent":["import merge from 'lodash/merge';\nimport IntlMessageFormat from 'intl-messageformat';\nimport { get } from '@shell/utils/object';\nimport en from '@shell/assets/translations/en-us.yaml';\nimport { getProduct, getVendor, DOCS_BASE } from '@shell/config/private-label';\nimport { loadTranslation } from '@shell/utils/dynamic-importer';\n\nconst NONE = 'none';\nconst DEFAULT_LOCALE = 'en-us';\n\n// Formatters can't be serialized into state\nconst intlCache = {};\n\nlet lastLoaded = 0;\n\nexport const state = function() {\n  // const translationContext = require.context('@shell/assets/translations', true, /.*/);\n  // const available = translationContext.keys().map(path => path.replace(/^.*\\/([^\\/]+)\\.[^.]+$/, '$1'));\n  // Using require.context() forces them to all be in the same webpack chunk name... just hardcode the list for now so zh-hans\n  // gets generated as it's own chunk instead of being loaded all the time.\n  const available = [DEFAULT_LOCALE, 'zh-hans'];\n\n  const out = {\n    default:      DEFAULT_LOCALE,\n    selected:     null,\n    previous:     null,\n    available,\n    translations: { [DEFAULT_LOCALE]: en },\n  };\n\n  return out;\n};\n\nexport const getters = {\n  selectedLocaleLabel(state) {\n    const key = `locale.${ state.selected }`;\n\n    if ( state.selected === NONE ) {\n      return `%${ key }%`;\n    } else {\n      return get(state.translations[state.default], key);\n    }\n  },\n\n  availableLocales(state, getters) {\n    const out = {};\n\n    for ( const locale of state.available ) {\n      const key = `locale.${ locale }`;\n\n      if ( state.selected === NONE ) {\n        out[locale] = `%${ key }%`;\n      } else {\n        out[locale] = get(state.translations[state.default], key);\n      }\n    }\n\n    return out;\n  },\n\n  t: (state) => (key, args, language) => {\n    if (state.selected === NONE && !language) {\n      return `%${ key }%`;\n    }\n\n    const locale = language || state.selected;\n    const cacheKey = `${ locale }/${ key }`;\n    let formatter = intlCache[cacheKey];\n\n    if ( !formatter ) {\n      let msg = get(state.translations[locale], key);\n\n      if ( !msg ) {\n        msg = get(state.translations[state.default], key);\n      }\n\n      if ( msg === undefined ) {\n        return undefined;\n      }\n\n      if ( typeof msg === 'object' ) {\n        console.error('Translation for', cacheKey, 'is an object'); // eslint-disable-line no-console\n\n        return undefined;\n      }\n\n      if ( msg?.includes('{')) {\n        formatter = new IntlMessageFormat(msg, locale);\n      } else {\n        formatter = msg;\n      }\n\n      intlCache[cacheKey] = formatter;\n    }\n\n    if ( typeof formatter === 'string' ) {\n      return formatter;\n    } else if ( formatter && formatter.format ) {\n      // Inject things like appName so they're always available in any translation\n      const moreArgs = {\n        vendor:   getVendor(),\n        appName:  getProduct(),\n        docsBase: DOCS_BASE,\n        ...args\n      };\n\n      return formatter.format(moreArgs);\n    } else {\n      return '?';\n    }\n  },\n\n  exists: (state) => (key, language) => {\n    const locale = language || state.selected;\n    const cacheKey = `${ locale }/${ key }`;\n\n    if ( intlCache[cacheKey] ) {\n      return true;\n    }\n\n    let msg = get(state.translations[state.default], key);\n\n    if ( !msg && locale && locale !== NONE ) {\n      msg = get(state.translations[locale], key);\n    }\n\n    if ( msg !== undefined ) {\n      return true;\n    }\n\n    return false;\n  },\n\n  current: (state) => () => {\n    return state.selected;\n  },\n\n  default: (state) => () => {\n    return state.default;\n  },\n\n  multiWithFallback: (state, getters) => (items, key = 'key') => {\n    return items.map((item) => {\n      item[key] = getters.withFallback(item[key], null, item[key]);\n\n      return item;\n    });\n  },\n\n  withFallback: (state, getters) => (key, args, fallback, fallbackIsKey = false) => {\n    // Support withFallback(key,fallback) when no args\n    if ( !fallback && typeof args === 'string' ) {\n      fallback = args;\n      args = {};\n    }\n\n    if ( getters.exists(key) ) {\n      return getters.t(key, args);\n    } else if ( fallbackIsKey ) {\n      return getters.t(fallback, args);\n    } else {\n      return fallback;\n    }\n  },\n\n};\n\nexport const mutations = {\n  loadTranslations(state, { locale, translations }) {\n    state.translations[locale] = translations;\n  },\n\n  mergeLoadTranslations(state, { locale, translations }) {\n    if (!state.translations[locale]) {\n      state.translations[locale] = translations;\n    } else {\n      merge(state.translations[locale], translations);\n    }\n  },\n\n  setSelected(state, locale) {\n    // this will set the lang param on HTML (best place to add this action since all locale changes go through this mutation)\n    if (locale === NONE) {\n      document.querySelector('html').removeAttribute('lang');\n    } else {\n      document.querySelector('html').setAttribute('lang', locale);\n    }\n\n    state.selected = locale;\n  },\n\n  // Add a locale to the list of available locales\n  addLocale(state, { locale, label }) {\n    const hasLocale = state.available.find((l) => l === locale);\n\n    if (!hasLocale) {\n      state.available.push(locale);\n      if (!state.translations[state.default]?.locale?.[locale]) {\n        state.translations[state.default].locale[locale] = label;\n      }\n    }\n  },\n\n  // Remove locale\n  removeLocale(state, locale) {\n    const index = state.available.findIndex((l) => l === locale);\n\n    if (index !== -1) {\n      state.available.splice(index, 1);\n\n      if (state.translations[locale]) {\n        delete state.translations[locale];\n      }\n    }\n  }\n};\n\nexport const actions = {\n  init({\n    state, commit, dispatch, rootGetters\n  }) {\n    let selected = rootGetters['prefs/get']('locale');\n\n    // We might be using a locale that is loaded by a plugin that is no longer loaded\n    const exists = !!state.available.find((loc) => loc === selected);\n\n    if ( !selected || !exists) {\n      selected = state.default;\n    }\n\n    return dispatch('switchTo', selected);\n  },\n\n  async load({ commit }, locale) {\n    const translationsModule = await loadTranslation(locale);\n    const translations = translationsModule.default || translationsModule;\n\n    commit('loadTranslations', { locale, translations });\n\n    return true;\n  },\n\n  async mergeLoad({ commit }, { locale, module }) {\n    const promise = typeof (module) === 'function' ? module() : Promise.resolve(module);\n    const translationsModule = await promise;\n    const translations = translationsModule.default || translationsModule;\n\n    return commit('mergeLoadTranslations', { locale, translations });\n  },\n\n  // Add a locale to the list of available locales\n  addLocale({ commit }, { locale, label }) {\n    commit('addLocale', { locale, label });\n  },\n\n  // Remove a locale from the list of available locales\n  removeLocale({ commit, getters, dispatch }, { locale }) {\n    const current = getters['current']();\n\n    // If we are removing the current locale, switch back to the default locale\n    if (current === locale) {\n      dispatch('switchTo', DEFAULT_LOCALE);\n    }\n\n    commit('removeLocale', locale );\n  },\n\n  async switchTo({\n    state,\n    rootState,\n    commit,\n    dispatch,\n    getters\n  }, locale) {\n    const currentLocale = getters['current']();\n\n    if ( locale === NONE ) {\n      commit('setSelected', locale);\n\n      // Don't remember into cookie\n      return;\n    }\n\n    const lastLoad = rootState.$plugin?.lastLoad;\n    const i18nExt = rootState.$plugin?.getDynamic('l10n', locale);\n    const reload = lastLoaded < lastLoad;\n\n    lastLoaded = lastLoad;\n\n    if ( !state.translations[locale] || reload) {\n      try {\n        await dispatch('load', locale);\n      } catch (e) {\n        if (!i18nExt && locale !== DEFAULT_LOCALE) {\n          // Try to show something... we could not load the locale from the built-in translations\n          // and there are no plugins providing translations\n          commit('setSelected', DEFAULT_LOCALE);\n\n          return;\n        }\n      }\n\n      // Load all of the locales from the plugins\n      if (i18nExt && i18nExt.length) {\n        const p = [];\n\n        i18nExt.forEach((fn) => {\n          p.push(dispatch('mergeLoad', { locale, module: fn }));\n        });\n\n        // load all of the default locales from the plugins for fallback\n        if (locale !== DEFAULT_LOCALE) {\n          const defaultI18nExt = rootState.$plugin?.getDynamic('l10n', DEFAULT_LOCALE);\n\n          if (defaultI18nExt && defaultI18nExt.length) {\n            defaultI18nExt.forEach((fn) => {\n              p.push(dispatch('mergeLoad', { locale: DEFAULT_LOCALE, module: fn }));\n            });\n          }\n        }\n\n        try {\n          await Promise.all(p);\n        } catch (e) {\n          if (locale !== DEFAULT_LOCALE) {\n            commit('setSelected', DEFAULT_LOCALE);\n\n            return;\n          }\n        }\n      }\n    }\n\n    commit('setSelected', locale);\n\n    // Ony update the preference if the locale changed\n    if (currentLocale !== locale) {\n      dispatch('prefs/set', {\n        key:   'locale',\n        value: state.selected\n      }, { root: true });\n    }\n  },\n\n  toggleNone({ state, dispatch }) {\n    if ( state.selected === NONE ) {\n      return dispatch('switchTo', state.previous || state.default);\n    } else {\n      return dispatch('switchTo', NONE);\n    }\n  }\n};\n"],"mappings":"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","ignoreList":[]}]}