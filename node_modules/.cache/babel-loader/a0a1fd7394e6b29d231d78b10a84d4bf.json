{"remainingRequest":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js??ref--16-1!/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/ubuntu/suseconf/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ubuntu/suseconf/node_modules/@rancher/shell/edit/token.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/ubuntu/suseconf/node_modules/@rancher/shell/edit/token.vue","mtime":1725338146566},{"path":"/home/ubuntu/suseconf/babel.config.js","mtime":1725343995893},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js","mtime":1725271298942},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1725271300920}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3JzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5IjsKaW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiL2hvbWUvdWJ1bnR1L3N1c2Vjb25mL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9yZWdlbmVyYXRvci9pbmRleC5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmZ1bmN0aW9uIG93bktleXMoZSwgcikgeyB2YXIgdCA9IE9iamVjdC5rZXlzKGUpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgbyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7IHIgJiYgKG8gPSBvLmZpbHRlcihmdW5jdGlvbiAocikgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLCByKS5lbnVtZXJhYmxlOyB9KSksIHQucHVzaC5hcHBseSh0LCBvKTsgfSByZXR1cm4gdDsgfQpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKGUpIHsgZm9yICh2YXIgciA9IDE7IHIgPCBhcmd1bWVudHMubGVuZ3RoOyByKyspIHsgdmFyIHQgPSBudWxsICE9IGFyZ3VtZW50c1tyXSA/IGFyZ3VtZW50c1tyXSA6IHt9OyByICUgMiA/IG93bktleXMoT2JqZWN0KHQpLCAhMCkuZm9yRWFjaChmdW5jdGlvbiAocikgeyBfZGVmaW5lUHJvcGVydHkoZSwgciwgdFtyXSk7IH0pIDogT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMgPyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyh0KSkgOiBvd25LZXlzKE9iamVjdCh0KSkuZm9yRWFjaChmdW5jdGlvbiAocikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgciwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LCByKSk7IH0pOyB9IHJldHVybiBlOyB9CmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICd2dWV4JzsKaW1wb3J0IGRheSBmcm9tICdkYXlqcyc7CmltcG9ydCBzb3J0QnkgZnJvbSAnbG9kYXNoL3NvcnRCeSc7CmltcG9ydCB7IE1BTkFHRU1FTlQsIE5PUk1BTiB9IGZyb20gJ0BzaGVsbC9jb25maWcvdHlwZXMnOwppbXBvcnQgeyBCYW5uZXIgfSBmcm9tICdAY29tcG9uZW50cy9CYW5uZXInOwppbXBvcnQgRGV0YWlsVGV4dCBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9EZXRhaWxUZXh0JzsKaW1wb3J0IEZvb3RlciBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9mb3JtL0Zvb3Rlcic7CmltcG9ydCB7IExhYmVsZWRJbnB1dCB9IGZyb20gJ0Bjb21wb25lbnRzL0Zvcm0vTGFiZWxlZElucHV0JzsKaW1wb3J0IExhYmVsZWRTZWxlY3QgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvZm9ybS9MYWJlbGVkU2VsZWN0JzsKaW1wb3J0IHsgUmFkaW9Hcm91cCB9IGZyb20gJ0Bjb21wb25lbnRzL0Zvcm0vUmFkaW8nOwppbXBvcnQgU2VsZWN0IGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL2Zvcm0vU2VsZWN0JzsKaW1wb3J0IENyZWF0ZUVkaXRWaWV3IGZyb20gJ0BzaGVsbC9taXhpbnMvY3JlYXRlLWVkaXQtdmlldyc7CmltcG9ydCB7IGRpZmZGcm9tIH0gZnJvbSAnQHNoZWxsL3V0aWxzL3RpbWUnOwppbXBvcnQgeyBmaWx0ZXJIaWRkZW5Mb2NhbENsdXN0ZXIsIGZpbHRlck9ubHlLdWJlcm5ldGVzQ2x1c3RlcnMgfSBmcm9tICdAc2hlbGwvdXRpbHMvY2x1c3Rlcic7CmltcG9ydCB7IFNFVFRJTkcgfSBmcm9tICdAc2hlbGwvY29uZmlnL3NldHRpbmdzJzsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIEJhbm5lcjogQmFubmVyLAogICAgRGV0YWlsVGV4dDogRGV0YWlsVGV4dCwKICAgIEZvb3RlcjogRm9vdGVyLAogICAgTGFiZWxlZElucHV0OiBMYWJlbGVkSW5wdXQsCiAgICBMYWJlbGVkU2VsZWN0OiBMYWJlbGVkU2VsZWN0LAogICAgUmFkaW9Hcm91cDogUmFkaW9Hcm91cCwKICAgIFNlbGVjdDogU2VsZWN0CiAgfSwKICBtaXhpbnM6IFtDcmVhdGVFZGl0Vmlld10sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIC8vIEdldCB0aGUgc2V0dGluZyB0aGF0IGRlZmluZXMgdGhlIG1heCB0b2tlbiBUVEwgYWxsb3dlZCAoaW4gbWludXRlcykKICAgIHZhciBtYXhUVExTZXR0aW5nID0gdGhpcy4kc3RvcmUuZ2V0dGVyc1snbWFuYWdlbWVudC9ieUlkJ10oTUFOQUdFTUVOVC5TRVRUSU5HLCBTRVRUSU5HLkFVVEhfVE9LRU5fTUFYX1RUTF9NSU5VVEVTKTsKICAgIHZhciBtYXhUVEwgPSAwOwogICAgdHJ5IHsKICAgICAgbWF4VFRMID0gcGFyc2VJbnQobWF4VFRMU2V0dGluZy52YWx1ZSB8fCBtYXhUVExTZXR0aW5nLmRlZmF1bHQsIDEwKTsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgbWF4VFRMID0gMDsKICAgIH0KICAgIHJldHVybiB7CiAgICAgIGVycm9yczogbnVsbCwKICAgICAgZm9ybTogewogICAgICAgIGV4cGlyeVR5cGU6ICduZXZlcicsCiAgICAgICAgY3VzdG9tRXhwaXJ5OiAwLAogICAgICAgIGN1c3RvbUV4cGlyeVVuaXRzOiAnbWludXRlJwogICAgICB9LAogICAgICBjcmVhdGVkOiBudWxsLAogICAgICB0dGxMaW1pdGVkOiBmYWxzZSwKICAgICAgYWNjZXNzS2V5OiAnJywKICAgICAgc2VjcmV0S2V5OiAnJywKICAgICAgbWF4VFRMOiBtYXhUVEwKICAgIH07CiAgfSwKICBjb21wdXRlZDogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBtYXBHZXR0ZXJzKHsKICAgIHQ6ICdpMThuL3QnCiAgfSkpLCB7fSwgewogICAgc2NvcGVzOiBmdW5jdGlvbiBzY29wZXMoKSB7CiAgICAgIHZhciBhbGwgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzWydtYW5hZ2VtZW50L2FsbCddKE1BTkFHRU1FTlQuQ0xVU1RFUik7CiAgICAgIHZhciBrdWJlQ2x1c3RlcnMgPSBmaWx0ZXJIaWRkZW5Mb2NhbENsdXN0ZXIoZmlsdGVyT25seUt1YmVybmV0ZXNDbHVzdGVycyhhbGwsIHRoaXMuJHN0b3JlKSwgdGhpcy4kc3RvcmUpOwogICAgICB2YXIgb3V0ID0ga3ViZUNsdXN0ZXJzLm1hcChmdW5jdGlvbiAob3B0KSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHZhbHVlOiBvcHQuaWQsCiAgICAgICAgICBsYWJlbDogb3B0Lm5hbWVEaXNwbGF5CiAgICAgICAgfTsKICAgICAgfSk7CiAgICAgIG91dCA9IHNvcnRCeShvdXQsIFsnbGFiZWwnXSk7CiAgICAgIG91dC51bnNoaWZ0KHsKICAgICAgICB2YWx1ZTogJycsCiAgICAgICAgbGFiZWw6IHRoaXMudCgnYWNjb3VudEFuZEtleXMuYXBpS2V5cy5hZGQubm9TY29wZScpCiAgICAgIH0pOwogICAgICByZXR1cm4gb3V0OwogICAgfSwKICAgIGV4cGlyeU9wdGlvbnM6IGZ1bmN0aW9uIGV4cGlyeU9wdGlvbnMoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHZhciBvcHRpb25zID0gWyduZXZlcicsICdkYXknLCAnbW9udGgnLCAneWVhcicsICdjdXN0b20nXTsKICAgICAgdmFyIG9wdHMgPSBvcHRpb25zLm1hcChmdW5jdGlvbiAob3B0KSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHZhbHVlOiBvcHQsCiAgICAgICAgICBsYWJlbDogX3RoaXMudCgiYWNjb3VudEFuZEtleXMuYXBpS2V5cy5hZGQuZXhwaXJ5Lm9wdGlvbnMuIi5jb25jYXQob3B0KSkKICAgICAgICB9OwogICAgICB9KTsKCiAgICAgIC8vIFdoZW4gdGhlIFRUTCBpcyBhbnl0aGluZyBvdGhlciB0aGFuIDAsIHByZXNlbnQgb25seSB0d28gb3B0aW9ucwogICAgICAvLyAoMSkgVGhlIG1heGltdW0gYWxsb3dlZAogICAgICAvLyAoMikgQ3VzdG9tCiAgICAgIGlmICh0aGlzLm1heFRUTCAhPT0gMCkgewogICAgICAgIHZhciBub3cgPSBkYXkoKTsKICAgICAgICB2YXIgZXhwaXJ5ID0gbm93LmFkZCh0aGlzLm1heFRUTCwgJ21pbnV0ZScpOwogICAgICAgIHZhciBtYXggPSBkaWZmRnJvbShleHBpcnksIG5vdywgdGhpcy50KTsKICAgICAgICBvcHRzID0gb3B0cy5maWx0ZXIoZnVuY3Rpb24gKG9wdCkgewogICAgICAgICAgcmV0dXJuIG9wdC52YWx1ZSA9PT0gJ2N1c3RvbSc7CiAgICAgICAgfSk7CiAgICAgICAgb3B0cy51bnNoaWZ0KHsKICAgICAgICAgIHZhbHVlOiAnbWF4JywKICAgICAgICAgIGxhYmVsOiB0aGlzLnQoJ2FjY291bnRBbmRLZXlzLmFwaUtleXMuYWRkLmV4cGlyeS5vcHRpb25zLm1heGltdW0nLCB7CiAgICAgICAgICAgIHZhbHVlOiBtYXguc3RyaW5nCiAgICAgICAgICB9KQogICAgICAgIH0pOwogICAgICB9CiAgICAgIHJldHVybiBvcHRzOwogICAgfSwKICAgIGV4cGlyeVVuaXRzT3B0aW9uczogZnVuY3Rpb24gZXhwaXJ5VW5pdHNPcHRpb25zKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKICAgICAgdmFyIG9wdGlvbnMgPSBbJ21pbnV0ZScsICdob3VyJywgJ2RheScsICdtb250aCcsICd5ZWFyJ107CiAgICAgIHZhciBmaWx0ZXJlZCA9IHRoaXMuZmlsdGVyT3B0aW9uc0ZvclRUTChvcHRpb25zKTsKICAgICAgcmV0dXJuIGZpbHRlcmVkLm1hcChmdW5jdGlvbiAob3B0KSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHZhbHVlOiBvcHQsCiAgICAgICAgICBsYWJlbDogX3RoaXMyLnQoImFjY291bnRBbmRLZXlzLmFwaUtleXMuYWRkLmN1c3RvbUV4cGlyeS5vcHRpb25zLiIuY29uY2F0KG9wdCkpCiAgICAgICAgfTsKICAgICAgfSk7CiAgICB9CiAgfSksCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIC8vIEF1dG8tc2VsZWN0IHRoZSBmaXJzdCBvcHRpb24gb24gbG9hZAogICAgdGhpcy5mb3JtLmV4cGlyeVR5cGUgPSB0aGlzLmV4cGlyeU9wdGlvbnNbMF0udmFsdWU7CiAgfSwKICBtZXRob2RzOiB7CiAgICBmaWx0ZXJPcHRpb25zRm9yVFRMOiBmdW5jdGlvbiBmaWx0ZXJPcHRpb25zRm9yVFRMKG9wdHMpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CiAgICAgIHJldHVybiBvcHRzLmZpbHRlcihmdW5jdGlvbiAob3B0aW9uKSB7CiAgICAgICAgaWYgKG9wdGlvbiA9PT0gJ25ldmVyJykgewogICAgICAgICAgcmV0dXJuIF90aGlzMy5tYXhUVEwgPT09IDA7CiAgICAgICAgfSBlbHNlIGlmIChvcHRpb24gPT09ICdjdXN0b20nKSB7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdmFyIG5vdyA9IGRheSgpOwogICAgICAgICAgdmFyIGV4cGlyeSA9IGRheSgpLmFkZCgxLCBvcHRpb24pOwogICAgICAgICAgdmFyIHR0bCA9IGV4cGlyeS5kaWZmKG5vdykgLyA2MDAwMDsgLy8gQ29udmVydCB0byBtaW51dGVzCgogICAgICAgICAgcmV0dXJuIF90aGlzMy5tYXhUVEwgPT09IDAgfHwgdHRsIDw9IF90aGlzMy5tYXhUVEw7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBhY3R1YWxseVNhdmU6IGZ1bmN0aW9uIGFjdHVhbGx5U2F2ZSh1cmwpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvcigvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIHJlcywgdG9rZW47CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF90aGlzNC51cGRhdGVFeHBpcnkoKTsKICAgICAgICAgICAgICBpZiAoIV90aGlzNC5pc0NyZWF0ZSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE1OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OwogICAgICAgICAgICAgIHJldHVybiBfdGhpczQudmFsdWUuc2F2ZSgpOwogICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICBfdGhpczQuY3JlYXRlZCA9IHJlczsKICAgICAgICAgICAgICBfdGhpczQudHRsTGltaXRlZCA9IHJlcy50dGwgIT09IF90aGlzNC52YWx1ZS50dGw7CiAgICAgICAgICAgICAgdG9rZW4gPSBfdGhpczQuY3JlYXRlZC50b2tlbi5zcGxpdCgnOicpOwogICAgICAgICAgICAgIF90aGlzNC5hY2Nlc3NLZXkgPSB0b2tlblswXTsKICAgICAgICAgICAgICBfdGhpczQuc2VjcmV0S2V5ID0gdG9rZW4ubGVuZ3RoID4gMSA/IHRva2VuWzFdIDogJyc7CiAgICAgICAgICAgICAgX3RoaXM0LnRva2VuID0gX3RoaXM0LmNyZWF0ZWQudG9rZW47CgogICAgICAgICAgICAgIC8vIEZvcmNlIGEgcmVmcmVzaCBvZiB0aGUgdG9rZW4gc28gd2UgZ2V0IHRoZSBleHBpcnkgZGF0ZSBjb3JyZWN0bHkKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTM7CiAgICAgICAgICAgICAgcmV0dXJuIF90aGlzNC4kc3RvcmUuZGlzcGF0Y2goJ3JhbmNoZXIvZmluZCcsIHsKICAgICAgICAgICAgICAgIHR5cGU6IE5PUk1BTi5UT0tFTiwKICAgICAgICAgICAgICAgIGlkOiByZXMuaWQsCiAgICAgICAgICAgICAgICBvcHQ6IHsKICAgICAgICAgICAgICAgICAgZm9yY2U6IHRydWUKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICByb290OiB0cnVlCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE3OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNzsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXM0LnZhbHVlLnNhdmUoKTsKICAgICAgICAgICAgY2FzZSAxNzoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBkb25lOiBmdW5jdGlvbiBkb25lKCkgewogICAgICBpZiAoIXRoaXMuY3JlYXRlZCkgewogICAgICAgIHRoaXMuZG9uZUNyZWF0ZSgpOwogICAgICB9CiAgICB9LAogICAgZG9uZUNyZWF0ZTogZnVuY3Rpb24gZG9uZUNyZWF0ZSgpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIG5hbWU6ICdhY2NvdW50JwogICAgICB9KTsKICAgIH0sCiAgICB1cGRhdGVFeHBpcnk6IGZ1bmN0aW9uIHVwZGF0ZUV4cGlyeSgpIHsKICAgICAgdmFyIHYgPSB0aGlzLmZvcm0uZXhwaXJ5VHlwZTsKICAgICAgdmFyIGluY3JlbWVudCA9IHYgPT09ICdjdXN0b20nID8gcGFyc2VJbnQodGhpcy5mb3JtLmN1c3RvbUV4cGlyeSkgOiAxOwogICAgICB2YXIgdW5pdHMgPSB2ID09PSAnY3VzdG9tJyA/IHRoaXMuZm9ybS5jdXN0b21FeHBpcnlVbml0cyA6IHY7CiAgICAgIHZhciB0dGwgPSAwOwogICAgICBpZiAodW5pdHMgPT09ICdtYXgnKSB7CiAgICAgICAgdHRsID0gdGhpcy5tYXhUVEwgKiA2MCAqIDEwMDA7CiAgICAgIH0gZWxzZSBpZiAodW5pdHMgIT09ICduZXZlcicpIHsKICAgICAgICB2YXIgbm93ID0gZGF5KCk7CiAgICAgICAgdmFyIGV4cGlyeSA9IGRheSgpLmFkZChpbmNyZW1lbnQsIHVuaXRzKTsKICAgICAgICB0dGwgPSBleHBpcnkuZGlmZihub3cpOwogICAgICB9CiAgICAgIHRoaXMudmFsdWUudHRsID0gdHRsOwogICAgfQogIH0KfTs="},{"version":3,"names":["mapGetters","day","sortBy","MANAGEMENT","NORMAN","Banner","DetailText","Footer","LabeledInput","LabeledSelect","RadioGroup","Select","CreateEditView","diffFrom","filterHiddenLocalCluster","filterOnlyKubernetesClusters","SETTING","components","mixins","data","maxTTLSetting","$store","getters","AUTH_TOKEN_MAX_TTL_MINUTES","maxTTL","parseInt","value","default","e","errors","form","expiryType","customExpiry","customExpiryUnits","created","ttlLimited","accessKey","secretKey","computed","_objectSpread","t","scopes","all","CLUSTER","kubeClusters","out","map","opt","id","label","nameDisplay","unshift","expiryOptions","_this","options","opts","concat","now","expiry","add","max","filter","string","expiryUnitsOptions","_this2","filtered","filterOptionsForTTL","mounted","methods","_this3","option","ttl","diff","actuallySave","url","_this4","_asyncToGenerator","_regeneratorRuntime","mark","_callee","res","token","wrap","_callee$","_context","prev","next","updateExpiry","isCreate","save","sent","split","length","dispatch","type","TOKEN","force","root","stop","done","doneCreate","$router","push","name","v","increment","units"],"sources":["node_modules/@rancher/shell/edit/token.vue"],"sourcesContent":["<script>\nimport { mapGetters } from 'vuex';\nimport day from 'dayjs';\nimport sortBy from 'lodash/sortBy';\nimport { MANAGEMENT, NORMAN } from '@shell/config/types';\nimport { Banner } from '@components/Banner';\nimport DetailText from '@shell/components/DetailText';\nimport Footer from '@shell/components/form/Footer';\nimport { LabeledInput } from '@components/Form/LabeledInput';\nimport LabeledSelect from '@shell/components/form/LabeledSelect';\nimport { RadioGroup } from '@components/Form/Radio';\nimport Select from '@shell/components/form/Select';\nimport CreateEditView from '@shell/mixins/create-edit-view';\nimport { diffFrom } from '@shell/utils/time';\nimport { filterHiddenLocalCluster, filterOnlyKubernetesClusters } from '@shell/utils/cluster';\nimport { SETTING } from '@shell/config/settings';\n\nexport default {\n  components: {\n    Banner,\n    DetailText,\n    Footer,\n    LabeledInput,\n    LabeledSelect,\n    RadioGroup,\n    Select,\n  },\n\n  mixins: [CreateEditView],\n\n  data() {\n    // Get the setting that defines the max token TTL allowed (in minutes)\n    const maxTTLSetting = this.$store.getters['management/byId'](MANAGEMENT.SETTING, SETTING.AUTH_TOKEN_MAX_TTL_MINUTES);\n    let maxTTL = 0;\n\n    try {\n      maxTTL = parseInt(maxTTLSetting.value || maxTTLSetting.default, 10);\n    } catch (e) {\n      maxTTL = 0;\n    }\n\n    return {\n      errors: null,\n      form:   {\n        expiryType:        'never',\n        customExpiry:      0,\n        customExpiryUnits: 'minute',\n      },\n      created:    null,\n      ttlLimited: false,\n      accessKey:  '',\n      secretKey:  '',\n      maxTTL,\n    };\n  },\n\n  computed: {\n    ...mapGetters({ t: 'i18n/t' }),\n    scopes() {\n      const all = this.$store.getters['management/all'](MANAGEMENT.CLUSTER);\n      const kubeClusters = filterHiddenLocalCluster(filterOnlyKubernetesClusters(all, this.$store), this.$store);\n      let out = kubeClusters.map((opt) => ({ value: opt.id, label: opt.nameDisplay }));\n\n      out = sortBy(out, ['label']);\n      out.unshift( { value: '', label: this.t('accountAndKeys.apiKeys.add.noScope') } );\n\n      return out;\n    },\n\n    expiryOptions() {\n      const options = ['never', 'day', 'month', 'year', 'custom'];\n      let opts = options.map((opt) => ({ value: opt, label: this.t(`accountAndKeys.apiKeys.add.expiry.options.${ opt }`) }));\n\n      // When the TTL is anything other than 0, present only two options\n      // (1) The maximum allowed\n      // (2) Custom\n      if (this.maxTTL !== 0 ) {\n        const now = day();\n        const expiry = now.add(this.maxTTL, 'minute');\n        const max = diffFrom(expiry, now, this.t);\n\n        opts = opts.filter((opt) => opt.value === 'custom');\n        opts.unshift({ value: 'max', label: this.t('accountAndKeys.apiKeys.add.expiry.options.maximum', { value: max.string }) });\n      }\n\n      return opts;\n    },\n    expiryUnitsOptions() {\n      const options = ['minute', 'hour', 'day', 'month', 'year'];\n      const filtered = this.filterOptionsForTTL(options);\n\n      return filtered.map((opt) => ({ value: opt, label: this.t(`accountAndKeys.apiKeys.add.customExpiry.options.${ opt }`) }));\n    },\n  },\n\n  mounted() {\n    // Auto-select the first option on load\n    this.form.expiryType = this.expiryOptions[0].value;\n  },\n\n  methods: {\n    filterOptionsForTTL(opts) {\n      return opts.filter((option) => {\n        if (option === 'never' ) {\n          return this.maxTTL === 0;\n        } else if (option === 'custom') {\n          return true;\n        } else {\n          const now = day();\n          const expiry = day().add(1, option);\n          const ttl = expiry.diff(now) / 60000; // Convert to minutes\n\n          return this.maxTTL === 0 || ttl <= this.maxTTL;\n        }\n      });\n    },\n\n    async actuallySave(url) {\n      this.updateExpiry();\n      if ( this.isCreate ) {\n        // Description is a bit weird, so need to clone and set this\n        // rather than use this.value - need to find a way to set this if we ever\n        // want to allow edit (which I don't think we do)\n        const res = await this.value.save();\n\n        this.created = res;\n        this.ttlLimited = res.ttl !== this.value.ttl;\n        const token = this.created.token.split(':');\n\n        this.accessKey = token[0];\n        this.secretKey = (token.length > 1) ? token[1] : '';\n        this.token = this.created.token;\n\n        // Force a refresh of the token so we get the expiry date correctly\n        await this.$store.dispatch('rancher/find', {\n          type: NORMAN.TOKEN,\n          id:   res.id,\n          opt:  { force: true }\n        }, { root: true });\n      } else {\n        // Note: update of existing key not supported currently\n        await this.value.save();\n      }\n    },\n\n    done() {\n      if (!this.created) {\n        this.doneCreate();\n      }\n    },\n\n    doneCreate() {\n      this.$router.push({ name: 'account' });\n    },\n\n    updateExpiry() {\n      const v = this.form.expiryType;\n      const increment = (v === 'custom') ? parseInt(this.form.customExpiry) : 1;\n      const units = (v === 'custom') ? this.form.customExpiryUnits : v;\n      let ttl = 0;\n\n      if (units === 'max') {\n        ttl = this.maxTTL * 60 * 1000;\n      } else if ( units !== 'never' ) {\n        const now = day();\n        const expiry = day().add(increment, units);\n\n        ttl = expiry.diff(now);\n      }\n      this.value.ttl = ttl;\n    }\n  }\n};\n</script>\n\n<template>\n  <div v-if=\"!created\">\n    <div class=\"pl-10 pr-10\">\n      <LabeledInput\n        key=\"description\"\n        v-model=\"value.description\"\n        :placeholder=\"t('accountAndKeys.apiKeys.add.description.placeholder')\"\n        label-key=\"accountAndKeys.apiKeys.add.description.label\"\n        mode=\"edit\"\n        :min-height=\"30\"\n      />\n\n      <LabeledSelect\n        v-model=\"value.clusterId\"\n        class=\"mt-20 scope-select\"\n        label-key=\"accountAndKeys.apiKeys.add.scope\"\n        :options=\"scopes\"\n      />\n\n      <h5 class=\"pt-20\">\n        {{ t('accountAndKeys.apiKeys.add.expiry.label') }}\n      </h5>\n\n      <div class=\"ml-10\">\n        <RadioGroup\n          v-model=\"form.expiryType\"\n          :options=\"expiryOptions\"\n          data-testid=\"expiry__options\"\n          class=\"mr-20\"\n          name=\"expiryGroup\"\n        />\n        <div class=\"ml-20 mt-10 expiry\">\n          <input\n            v-model=\"form.customExpiry\"\n            :disabled=\"form.expiryType !== 'custom'\"\n            type=\"number\"\n            :mode=\"mode\"\n          >\n          <Select\n            v-model=\"form.customExpiryUnits\"\n            :disabled=\"form.expiryType !== 'custom'\"\n            :options=\"expiryUnitsOptions\"\n            :clearable=\"false\"\n            :reduce=\"opt=>opt.value\"\n          />\n        </div>\n      </div>\n    </div>\n    <Footer\n      :errors=\"errors\"\n      :mode=\"mode\"\n      @save=\"save\"\n      @done=\"done\"\n    />\n  </div>\n  <div v-else>\n    <div>{{ t('accountAndKeys.apiKeys.info.keyCreated') }}</div>\n\n    <DetailText\n      :value=\"accessKey\"\n      label-key=\"accountAndKeys.apiKeys.info.accessKey\"\n      class=\"mt-20\"\n    />\n    <DetailText\n      :value=\"secretKey\"\n      label-key=\"accountAndKeys.apiKeys.info.secretKey\"\n      class=\"mt-20\"\n    />\n\n    <p class=\"mt-20\">\n      {{ t('accountAndKeys.apiKeys.info.bearerTokenTip') }}\n    </p>\n\n    <DetailText\n      :value=\"token\"\n      label-key=\"accountAndKeys.apiKeys.info.bearerToken\"\n      class=\"mt-20\"\n    />\n\n    <Banner\n      color=\"warning\"\n      class=\"mt-20\"\n    >\n      <div>\n        {{ t('accountAndKeys.apiKeys.info.saveWarning') }}\n      </div>\n    </Banner>\n\n    <Banner\n      v-if=\"ttlLimited\"\n      color=\"warning\"\n      class=\"mt-20\"\n    >\n      <div>\n        {{ t('accountAndKeys.apiKeys.info.ttlLimitedWarning') }}\n      </div>\n    </Banner>\n\n    <div class=\"buttons mt-20\">\n      <div class=\"right\">\n        <button\n          type=\"button\"\n          data-testid=\"token_done_create_button\"\n          class=\"btn role-primary\"\n          @click=\"doneCreate\"\n        >\n          <t k=\"generic.done\" />\n        </button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n  .scope-select {\n    min-width: 33%;\n    width: unset;\n  }\n  .expiry {\n    display: flex;\n    > * {\n      flex: 0 0 200px;\n      margin-right: 10px;\n    }\n  }\n\n  .buttons {\n    display: grid;\n    grid-template-areas:  \"left right\";\n    grid-template-columns: \"min-content auto\";\n\n    .right {\n      grid-area: right;\n      text-align: right;\n\n      .btn, button {\n        margin: 0 0 0 $column-gutter;\n      }\n    }\n  }\n</style>\n"],"mappings":"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","ignoreList":[]}]}