{"remainingRequest":"/home/ubuntu/susecon-2024-ext-demo/node_modules/babel-loader/lib/index.js??ref--16-1!/home/ubuntu/susecon-2024-ext-demo/node_modules/cache-loader/dist/cjs.js??ref--17-0!/home/ubuntu/susecon-2024-ext-demo/node_modules/ts-loader/index.js??ref--17-1!/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/detail/__tests__/provisioning.cattle.io.cluster.test.ts","dependencies":[{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/detail/__tests__/provisioning.cattle.io.cluster.test.ts","mtime":1725271280091},{"path":"/home/ubuntu/susecon-2024-ext-demo/babel.config.js","mtime":1725268750245},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/babel-loader/lib/index.js","mtime":1725271298942},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/ts-loader/index.js","mtime":1725271299135}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgX3JlZ2VuZXJhdG9yUnVudGltZSBmcm9tICIvaG9tZS91YnVudHUvc3VzZWNvbi0yMDI0LWV4dC1kZW1vL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9yZWdlbmVyYXRvci9pbmRleC5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnByb21pc2UuanMiOwppbXBvcnQgeyBzaGFsbG93TW91bnQgfSBmcm9tICdAdnVlL3Rlc3QtdXRpbHMnOwppbXBvcnQgUHJvdmlzaW9uaW5nQ2F0dGxlSW9DbHVzdGVyIGZyb20gJ0BzaGVsbC9kZXRhaWwvcHJvdmlzaW9uaW5nLmNhdHRsZS5pby5jbHVzdGVyLnZ1ZSc7Cmplc3QubW9jaygnQHNoZWxsL3V0aWxzL2NsaXBib2FyZCcsIGZ1bmN0aW9uICgpIHsKICByZXR1cm4gewogICAgY29weVRleHRUb0NsaXBib2FyZDogamVzdC5mbihmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoe30pOwogICAgfSkKICB9Owp9KTsKZGVzY3JpYmUoJ3ZpZXc6IHByb3Zpc2lvbmluZy5jYXR0bGUuaW8uY2x1c3RlcicsIGZ1bmN0aW9uICgpIHsKICB2YXIgbW9ja1N0b3JlID0gewogICAgZ2V0dGVyczogewogICAgICAnbWFuYWdlbWVudC9jYW5MaXN0JzogZnVuY3Rpb24gbWFuYWdlbWVudENhbkxpc3QoKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0sCiAgICAgICdtYW5hZ2VtZW50L3NjaGVtYUZvcic6IGplc3QuZm4oKSwKICAgICAgJ2kxOG4vdCc6IGZ1bmN0aW9uIGkxOG5UKHRleHQpIHsKICAgICAgICByZXR1cm4gdGV4dDsKICAgICAgfSwKICAgICAgdDogZnVuY3Rpb24gdCh0ZXh0KSB7CiAgICAgICAgcmV0dXJuIHRleHQ7CiAgICAgIH0sCiAgICAgIGN1cnJlbnRTdG9yZTogZnVuY3Rpb24gY3VycmVudFN0b3JlKCkgewogICAgICAgIHJldHVybiAnY3VycmVudF9zdG9yZSc7CiAgICAgIH0sCiAgICAgICdjdXJyZW50X3N0b3JlL3NjaGVtYUZvcic6IGplc3QuZm4oKSwKICAgICAgJ2N1cnJlbnRfc3RvcmUvYWxsJzogamVzdC5mbigpLAogICAgICB3b3Jrc3BhY2U6IGplc3QuZm4oKQogICAgfQogIH07CiAgdmFyIG1vY2tzID0gewogICAgJHN0b3JlOiBtb2NrU3RvcmUsCiAgICAkZmV0Y2hTdGF0ZTogewogICAgICBwZW5kaW5nOiBmYWxzZQogICAgfSwKICAgICRyb3V0ZTogewogICAgICBxdWVyeTogewogICAgICAgIEFTOiAnJwogICAgICB9LAogICAgICBuYW1lOiB7CiAgICAgICAgZW5kc1dpdGg6IGZ1bmN0aW9uIGVuZHNXaXRoKCkgewogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH07CiAgZGVzY3JpYmUoJ3JlZ2lzdHJhdGlvbiB0YWIgdmlzaWJpbGl0eScsIGZ1bmN0aW9uICgpIHsKICAgIGl0KCdhIGhvc3RlZCBLdWJlcm5ldGVzIFByb3ZpZGVyIHdpdGggYSBwcml2YXRlIGVuZHBvaW50IChuZXR3b3JrIGNvbmZpZykgYW5kIGNsdXN0ZXIgbm90IHJlYWR5IHNob3VsZCBTSE9XIHRoZSByZWdpc3RyYXRpb24gdGFiJywgLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgIHZhciB2YWx1ZSwgd3JhcHBlcjsKICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIHZhbHVlID0gewogICAgICAgICAgICAgIGlzSG9zdGVkS3ViZXJuZXRlc1Byb3ZpZGVyOiB0cnVlLAogICAgICAgICAgICAgIGlzUHJpdmF0ZUhvc3RlZFByb3ZpZGVyOiB0cnVlLAogICAgICAgICAgICAgIG1nbXQ6IHsKICAgICAgICAgICAgICAgIGhhc0xpbms6IGZ1bmN0aW9uIGhhc0xpbmsoKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBqZXN0LmZuKCk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgbGlua0ZvcjogZnVuY3Rpb24gbGlua0ZvcigpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuICcnOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGlzUmVhZHk6IGZhbHNlCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9OwogICAgICAgICAgICB3cmFwcGVyID0gc2hhbGxvd01vdW50KFByb3Zpc2lvbmluZ0NhdHRsZUlvQ2x1c3RlciwgewogICAgICAgICAgICAgIG1vY2tzOiBtb2NrcywKICAgICAgICAgICAgICBwcm9wc0RhdGE6IHsKICAgICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OwogICAgICAgICAgICByZXR1cm4gd3JhcHBlci5zZXREYXRhKHsKICAgICAgICAgICAgICBjbHVzdGVyVG9rZW46IHt9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICBleHBlY3Qod3JhcHBlci52bS5zaG93UmVnaXN0cmF0aW9uKS50b1N0cmljdEVxdWFsKHRydWUpOwogICAgICAgICAgY2FzZSA1OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUpOwogICAgfSkpKTsKICAgIGl0KCdhIGhvc3RlZCBLdWJlcm5ldGVzIFByb3ZpZGVyIFdJVEhPVVQgYSBwcml2YXRlIGVuZHBvaW50IChuZXR3b3JrIGNvbmZpZykgYW5kIGNsdXN0ZXIgbm90IHJlYWR5IHNob3VsZCBOT1QgU0hPVyB0aGUgcmVnaXN0cmF0aW9uIHRhYicsIC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgdmFyIHZhbHVlLCB3cmFwcGVyOwogICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIHZhbHVlID0gewogICAgICAgICAgICAgIGlzSG9zdGVkS3ViZXJuZXRlc1Byb3ZpZGVyOiB0cnVlLAogICAgICAgICAgICAgIG1nbXQ6IHsKICAgICAgICAgICAgICAgIGhhc0xpbms6IGZ1bmN0aW9uIGhhc0xpbmsoKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBqZXN0LmZuKCk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgbGlua0ZvcjogZnVuY3Rpb24gbGlua0ZvcigpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuICcnOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGlzUmVhZHk6IGZhbHNlCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9OwogICAgICAgICAgICB3cmFwcGVyID0gc2hhbGxvd01vdW50KFByb3Zpc2lvbmluZ0NhdHRsZUlvQ2x1c3RlciwgewogICAgICAgICAgICAgIG1vY2tzOiBtb2NrcywKICAgICAgICAgICAgICBwcm9wc0RhdGE6IHsKICAgICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNDsKICAgICAgICAgICAgcmV0dXJuIHdyYXBwZXIuc2V0RGF0YSh7CiAgICAgICAgICAgICAgY2x1c3RlclRva2VuOiB7fQogICAgICAgICAgICB9KTsKICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgZXhwZWN0KHdyYXBwZXIudm0uc2hvd1JlZ2lzdHJhdGlvbikudG9TdHJpY3RFcXVhbChmYWxzZSk7CiAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUyKTsKICAgIH0pKSk7CiAgfSk7Cn0pOw=="},{"version":3,"names":["shallowMount","ProvisioningCattleIoCluster","jest","mock","copyTextToClipboard","fn","Promise","resolve","describe","mockStore","getters","managementCanList","i18nT","text","t","currentStore","workspace","mocks","$store","$fetchState","pending","$route","query","AS","name","endsWith","it","_asyncToGenerator","_regeneratorRuntime","mark","_callee","value","wrapper","wrap","_callee$","_context","prev","next","isHostedKubernetesProvider","isPrivateHostedProvider","mgmt","hasLink","linkFor","isReady","propsData","setData","clusterToken","expect","vm","showRegistration","toStrictEqual","stop","_callee2","_callee2$","_context2"],"sources":["/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/detail/__tests__/provisioning.cattle.io.cluster.test.ts"],"sourcesContent":["import { shallowMount } from '@vue/test-utils';\nimport ProvisioningCattleIoCluster from '@shell/detail/provisioning.cattle.io.cluster.vue';\n\njest.mock('@shell/utils/clipboard', () => {\n  return { copyTextToClipboard: jest.fn(() => Promise.resolve({})) };\n});\n\ndescribe('view: provisioning.cattle.io.cluster', () => {\n  const mockStore = {\n    getters: {\n      'management/canList':      () => true,\n      'management/schemaFor':    jest.fn(),\n      'i18n/t':                  (text: string) => text,\n      t:                         (text: string) => text,\n      currentStore:              () => 'current_store',\n      'current_store/schemaFor': jest.fn(),\n      'current_store/all':       jest.fn(),\n      workspace:                 jest.fn(),\n    },\n  };\n\n  const mocks = {\n    $store:      mockStore,\n    $fetchState: { pending: false },\n    $route:      {\n      query: { AS: '' },\n      name:  {\n        endsWith: () => {\n          return false;\n        },\n      },\n    },\n  };\n\n  describe('registration tab visibility', () => {\n    it('a hosted Kubernetes Provider with a private endpoint (network config) and cluster not ready should SHOW the registration tab', async() => {\n      const value = {\n        isHostedKubernetesProvider: true,\n        isPrivateHostedProvider:    true,\n        mgmt:                       {\n          hasLink: () => jest.fn(),\n          linkFor: () => '',\n          isReady: false\n        }\n      };\n\n      const wrapper = shallowMount(ProvisioningCattleIoCluster, {\n        mocks,\n        propsData: { value },\n      });\n\n      await wrapper.setData({ clusterToken: {} });\n\n      expect(wrapper.vm.showRegistration).toStrictEqual(true);\n    });\n\n    it('a hosted Kubernetes Provider WITHOUT a private endpoint (network config) and cluster not ready should NOT SHOW the registration tab', async() => {\n      const value = {\n        isHostedKubernetesProvider: true,\n        mgmt:                       {\n          hasLink: () => jest.fn(),\n          linkFor: () => '',\n          isReady: false\n        }\n      };\n\n      const wrapper = shallowMount(ProvisioningCattleIoCluster, {\n        mocks,\n        propsData: { value },\n      });\n\n      await wrapper.setData({ clusterToken: {} });\n\n      expect(wrapper.vm.showRegistration).toStrictEqual(false);\n    });\n  });\n});\n"],"mappings":"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","ignoreList":[]}]}