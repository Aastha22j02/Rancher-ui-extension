{"remainingRequest":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js??ref--16-1!/home/ubuntu/suseconf/node_modules/@rancher/shell/plugins/dashboard-store/normalize.js","dependencies":[{"path":"/home/ubuntu/suseconf/node_modules/@rancher/shell/plugins/dashboard-store/normalize.js","mtime":1725338146566},{"path":"/home/ubuntu/suseconf/babel.config.js","mtime":1725343995893},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js","mtime":1725271298942}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5IjsKaW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiL2hvbWUvdWJ1bnR1L3N1c2Vjb25mL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9yZWdlbmVyYXRvci9pbmRleC5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuam9pbi5qcyI7CmltcG9ydCB7IFNDSEVNQSB9IGZyb20gJ0BzaGVsbC9jb25maWcvdHlwZXMnOwppbXBvcnQgeyBhcHBseUNoYW5nZXNldCwgY2hhbmdlc2V0LCBjaGFuZ2VzZXRDb25mbGljdHMgfSBmcm9tICdAc2hlbGwvdXRpbHMvb2JqZWN0JzsKZXhwb3J0IHZhciBLRVlfRklFTERfRk9SID0gX2RlZmluZVByb3BlcnR5KF9kZWZpbmVQcm9wZXJ0eSh7fSwgU0NIRU1BLCAnX2lkJyksICJkZWZhdWx0IiwgJ2lkJyk7CmV4cG9ydCBmdW5jdGlvbiBrZXlGaWVsZEZvcih0eXBlKSB7CiAgcmV0dXJuIEtFWV9GSUVMRF9GT1JbdHlwZV0gfHwgS0VZX0ZJRUxEX0ZPUlsnZGVmYXVsdCddOwp9CmV4cG9ydCBmdW5jdGlvbiBub3JtYWxpemVUeXBlKHR5cGUpIHsKICB2YXIgX3R5cGU7CiAgdHlwZSA9ICgoKF90eXBlID0gdHlwZSkgPT09IG51bGwgfHwgX3R5cGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90eXBlLnR5cGUpIHx8IHR5cGUgfHwgJycpLnRvTG93ZXJDYXNlKCk7CiAgcmV0dXJuIHR5cGU7Cn0KCi8vIERldGVjdCBhbmQgcmVzb2x2ZSBjb25mbGljdHMgZnJvbSBhIDQwOSByZXNwb25zZS4KLy8gSWYgdGhleSBhcmUgcmVzb2x2ZWQsIHJldHVybiBhIGZhbHNlLXkgdmFsdWUKLy8gRWxzZSB0aGV5IGNhbid0IGJlIHJlc29sdmVkLCByZXR1cm4gYW4gYXJyYXkgb2YgZXJyb3JzIHRvIHNob3cgdG8gdGhlIHVzZXIuCmV4cG9ydCBmdW5jdGlvbiBoYW5kbGVDb25mbGljdChfeCwgX3gyLCBfeDMsIF94NCwgX3g1LCBfeDYpIHsKICByZXR1cm4gX2hhbmRsZUNvbmZsaWN0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KZnVuY3Rpb24gX2hhbmRsZUNvbmZsaWN0KCkgewogIF9oYW5kbGVDb25mbGljdCA9IF9hc3luY1RvR2VuZXJhdG9yKC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZShpbml0aWFsVmFsdWVKU09OLCB2YWx1ZSwgbGl2ZVZhbHVlLCByb290R2V0dGVycywgc3RvcmUsIHN0b3JlTmFtZXNwYWNlKSB7CiAgICB2YXIgb3JpZywgdXNlciwgY3VyLCBiZ0NoYW5nZSwgdXNlckNoYW5nZSwgYWN0dWFsQ29uZmxpY3RzLCBvdXQ7CiAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgY2FzZSAwOgogICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICByZXR1cm4gc3RvcmUuZGlzcGF0Y2goIiIuY29uY2F0KHN0b3JlTmFtZXNwYWNlLCAiL2NsZWFuRm9yRGlmZiIpLCBpbml0aWFsVmFsdWVKU09OLCB7CiAgICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICAgIH0pOwogICAgICAgIGNhc2UgMjoKICAgICAgICAgIG9yaWcgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgX2NvbnRleHQubmV4dCA9IDU7CiAgICAgICAgICByZXR1cm4gc3RvcmUuZGlzcGF0Y2goIiIuY29uY2F0KHN0b3JlTmFtZXNwYWNlLCAiL2NsZWFuRm9yRGlmZiIpLCB2YWx1ZS50b0pTT04oKSwgewogICAgICAgICAgICByb290OiB0cnVlCiAgICAgICAgICB9KTsKICAgICAgICBjYXNlIDU6CiAgICAgICAgICB1c2VyID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA4OwogICAgICAgICAgcmV0dXJuIHN0b3JlLmRpc3BhdGNoKCIiLmNvbmNhdChzdG9yZU5hbWVzcGFjZSwgIi9jbGVhbkZvckRpZmYiKSwgbGl2ZVZhbHVlLnRvSlNPTigpLCB7CiAgICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICAgIH0pOwogICAgICAgIGNhc2UgODoKICAgICAgICAgIGN1ciA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICBiZ0NoYW5nZSA9IGNoYW5nZXNldChvcmlnLCBjdXIpOwogICAgICAgICAgdXNlckNoYW5nZSA9IGNoYW5nZXNldChvcmlnLCB1c2VyKTsKICAgICAgICAgIGFjdHVhbENvbmZsaWN0cyA9IGNoYW5nZXNldENvbmZsaWN0cyhiZ0NoYW5nZSwgdXNlckNoYW5nZSk7CiAgICAgICAgICBjb25zb2xlLmxvZygnQmFja2dyb3VuZCBDaGFuZ2UnLCBiZ0NoYW5nZSk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc29sZQogICAgICAgICAgY29uc29sZS5sb2coJ1VzZXIgQ2hhbmdlJywgdXNlckNoYW5nZSk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc29sZQogICAgICAgICAgY29uc29sZS5sb2coJ0NvbmZsaWN0cycsIGFjdHVhbENvbmZsaWN0cyk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc29sZQoKICAgICAgICAgIHZhbHVlLm1ldGFkYXRhLnJlc291cmNlVmVyc2lvbiA9IGxpdmVWYWx1ZS5tZXRhZGF0YS5yZXNvdXJjZVZlcnNpb247CiAgICAgICAgICBhcHBseUNoYW5nZXNldCh2YWx1ZSwgYmdDaGFuZ2UpOwogICAgICAgICAgaWYgKCFhY3R1YWxDb25mbGljdHMubGVuZ3RoKSB7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyMjsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgICAvLyBTdG9wIHRoZSBzYXZlIGFuZCBsZXQgdGhlIHVzZXIgaW5zcGVjdCBhbmQgY29udGludWUgZWRpdGluZwogICAgICAgICAgb3V0ID0gW3Jvb3RHZXR0ZXJzWydpMThuL3QnXSgndmFsaWRhdGlvbi5jb25mbGljdCcsIHsKICAgICAgICAgICAgZmllbGRzOiBhY3R1YWxDb25mbGljdHMuam9pbignLCAnKSwKICAgICAgICAgICAgZmllbGRDb3VudDogYWN0dWFsQ29uZmxpY3RzLmxlbmd0aAogICAgICAgICAgfSldOwogICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgb3V0KTsKICAgICAgICBjYXNlIDIyOgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgZmFsc2UpOwogICAgICAgIGNhc2UgMjM6CiAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgIH0KICAgIH0sIF9jYWxsZWUpOwogIH0pKTsKICByZXR1cm4gX2hhbmRsZUNvbmZsaWN0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0="},{"version":3,"names":["SCHEMA","applyChangeset","changeset","changesetConflicts","KEY_FIELD_FOR","_defineProperty","keyFieldFor","type","normalizeType","_type","toLowerCase","handleConflict","_x","_x2","_x3","_x4","_x5","_x6","_handleConflict","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","initialValueJSON","value","liveValue","rootGetters","store","storeNamespace","orig","user","cur","bgChange","userChange","actualConflicts","out","wrap","_callee$","_context","prev","next","dispatch","concat","root","sent","toJSON","console","log","metadata","resourceVersion","length","fields","join","fieldCount","abrupt","stop"],"sources":["/home/ubuntu/suseconf/node_modules/@rancher/shell/plugins/dashboard-store/normalize.js"],"sourcesContent":["import { SCHEMA } from '@shell/config/types';\n\nimport { applyChangeset, changeset, changesetConflicts } from '@shell/utils/object';\n\nexport const KEY_FIELD_FOR = {\n  [SCHEMA]: '_id',\n  default:  'id',\n};\n\nexport function keyFieldFor(type) {\n  return KEY_FIELD_FOR[type] || KEY_FIELD_FOR['default'];\n}\n\nexport function normalizeType(type) {\n  type = (type?.type || type || '').toLowerCase();\n\n  return type;\n}\n\n// Detect and resolve conflicts from a 409 response.\n// If they are resolved, return a false-y value\n// Else they can't be resolved, return an array of errors to show to the user.\nexport async function handleConflict(initialValueJSON, value, liveValue, rootGetters, store, storeNamespace) {\n  const orig = await store.dispatch(`${ storeNamespace }/cleanForDiff`, initialValueJSON, { root: true });\n  const user = await store.dispatch(`${ storeNamespace }/cleanForDiff`, value.toJSON(), { root: true });\n  const cur = await store.dispatch(`${ storeNamespace }/cleanForDiff`, liveValue.toJSON(), { root: true });\n\n  const bgChange = changeset(orig, cur);\n  const userChange = changeset(orig, user);\n  const actualConflicts = changesetConflicts(bgChange, userChange);\n\n  console.log('Background Change', bgChange); // eslint-disable-line no-console\n  console.log('User Change', userChange); // eslint-disable-line no-console\n  console.log('Conflicts', actualConflicts); // eslint-disable-line no-console\n\n  value.metadata.resourceVersion = liveValue.metadata.resourceVersion;\n  applyChangeset(value, bgChange);\n\n  if ( actualConflicts.length ) {\n    // Stop the save and let the user inspect and continue editing\n    const out = [rootGetters['i18n/t']('validation.conflict', { fields: actualConflicts.join(', '), fieldCount: actualConflicts.length })];\n\n    return out;\n  } else {\n    // The save can continue\n    return false;\n  }\n}\n"],"mappings":"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","ignoreList":[]}]}