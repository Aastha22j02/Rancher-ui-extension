{"remainingRequest":"/home/ubuntu/susecon-2024-ext-demo/node_modules/babel-loader/lib/index.js??ref--16-1!/home/ubuntu/susecon-2024-ext-demo/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/ubuntu/susecon-2024-ext-demo/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/chart/monitoring/steps/uninstall-v1.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/chart/monitoring/steps/uninstall-v1.vue","mtime":1725271280091},{"path":"/home/ubuntu/susecon-2024-ext-demo/babel.config.js","mtime":1725268750245},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/babel-loader/lib/index.js","mtime":1725271298942},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1725271300920}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgX3JlZ2VuZXJhdG9yUnVudGltZSBmcm9tICIvaG9tZS91YnVudHUvc3VzZWNvbi0yMDI0LWV4dC1kZW1vL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9yZWdlbmVyYXRvci9pbmRleC5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnByb21pc2UuanMiOwppbXBvcnQgeyBoYXZlVjFNb25pdG9yaW5nLCBoYXZlVjFNb25pdG9yaW5nV29ya2xvYWRzIH0gZnJvbSAnQHNoZWxsL3V0aWxzL21vbml0b3JpbmcnOwppbXBvcnQgQXN5bmNCdXR0b24gZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvQXN5bmNCdXR0b24nOwppbXBvcnQgSWNvbk1lc3NhZ2UgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvSWNvbk1lc3NhZ2UnOwpmdW5jdGlvbiBkZWxheSh0LCB2KSB7CiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICBzZXRUaW1lb3V0KHJlc29sdmUuYmluZChudWxsLCB2KSwgdCk7CiAgfSk7Cn0KZXhwb3J0IGRlZmF1bHQgewogIGxhYmVsOiAnbW9uaXRvcmluZy5pbnN0YWxsU3RlcHMudW5pbnN0YWxsVjEuc3RlcFRpdGxlJywKICBzdWJ0ZXh0OiAnbW9uaXRvcmluZy5pbnN0YWxsU3RlcHMudW5pbnN0YWxsVjEuc3RlcFN1YnRleHQnLAogIHdlaWdodDogMTAwLAogIGNvbXBvbmVudHM6IHsKICAgIEFzeW5jQnV0dG9uOiBBc3luY0J1dHRvbiwKICAgIEljb25NZXNzYWdlOiBJY29uTWVzc2FnZQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGhhdmVWMU1vbml0b3Jpbmc6IGZhbHNlLAogICAgICBlcnJvcjogbnVsbAogICAgfTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB0aGlzLmhhdmVWMU1vbml0b3JpbmcgPSBoYXZlVjFNb25pdG9yaW5nKHRoaXMuJHN0b3JlLmdldHRlcnMpOwogICAgdGhpcy4kZW1pdCgndXBkYXRlJywgewogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgcmVhZHk6IGZhbHNlLAogICAgICBoaWRkZW46ICF0aGlzLmhhdmVWMU1vbml0b3JpbmcKICAgIH0pOwogIH0sCiAgbWV0aG9kczogewogICAgdW5pbnN0YWxsOiBmdW5jdGlvbiB1bmluc3RhbGwoYnV0dG9uQ2IpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2NsdXN0ZXIvcHJvbXB0TW9kYWwnLCB7CiAgICAgICAgY29tcG9uZW50OiAnR2VuZXJpY1Byb21wdCcsCiAgICAgICAgY29tcG9uZW50UHJvcHM6IHsKICAgICAgICAgIGFwcGx5TW9kZTogJ3VuaW5zdGFsbCcsCiAgICAgICAgICBhcHBseUFjdGlvbjogZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgX2FwcGx5QWN0aW9uID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZShidXR0b25Eb25lKSB7CiAgICAgICAgICAgICAgdmFyIGluZGV4LCBoYXNWMU1vbml0b3JpbmcsIGhhc1YxTW9uaXRvcmluZ1dvcmtsb2FkczsKICAgICAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLiRzdG9yZS5nZXR0ZXJzWydjdXJyZW50Q2x1c3RlciddLmRvQWN0aW9uKCdkaXNhYmxlTW9uaXRvcmluZycpOwogICAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgICAgaW5kZXggPSAwOwogICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgICAgaWYgKCEoaW5kZXggPCAzMCkpIHsKICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxODsKICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAvLyBXYWl0IDMwIHNlY29uZHMgZm9yIHRoZSBjb250YWluZXJzIHRvIGdvCiAgICAgICAgICAgICAgICAgICAgaGFzVjFNb25pdG9yaW5nID0gaGF2ZVYxTW9uaXRvcmluZyhfdGhpcy4kc3RvcmUuZ2V0dGVycyk7CiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDc7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGhhdmVWMU1vbml0b3JpbmdXb3JrbG9hZHMoX3RoaXMuJHN0b3JlKTsKICAgICAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgICAgIGhhc1YxTW9uaXRvcmluZ1dvcmtsb2FkcyA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICAgICAgaWYgKCEoIWhhc1YxTW9uaXRvcmluZyAmJiAhaGFzVjFNb25pdG9yaW5nV29ya2xvYWRzKSkgewogICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEzOwogICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIF90aGlzLiRlbWl0KCd1cGRhdGUnLCB7CiAgICAgICAgICAgICAgICAgICAgICByZWFkeTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgIGhpZGRlbjogdHJ1ZQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIF90aGlzLmhhdmVWMU1vbml0b3JpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBidXR0b25Eb25lKHRydWUpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwogICAgICAgICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGVsYXkoMTAwMCk7CiAgICAgICAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgICAgICAgICAgaW5kZXgrKzsKICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgY2FzZSAxODoKICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIkZhaWxlZCB0byB1bmluc3RhbGw6IHRpbWVkIG91dCIpOwogICAgICAgICAgICAgICAgICBjYXNlIDE5OgogICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgZnVuY3Rpb24gYXBwbHlBY3Rpb24oX3gpIHsKICAgICAgICAgICAgICByZXR1cm4gX2FwcGx5QWN0aW9uLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIGFwcGx5QWN0aW9uOwogICAgICAgICAgfSgpLAogICAgICAgICAgdGl0bGU6IHRoaXMudCgncHJvbXB0UmVtb3ZlLnRpdGxlJywge30sIHRydWUpLAogICAgICAgICAgYm9keTogdGhpcy50KCdtb25pdG9yaW5nLmluc3RhbGxTdGVwcy51bmluc3RhbGxWMS5wcm9tcHREZXNjcmlwdGlvbicsIHt9LCB0cnVlKQogICAgICAgIH0KICAgICAgfSk7CiAgICAgIGJ1dHRvbkNiKHRydWUpOwogICAgfQogIH0KfTs="},{"version":3,"names":["haveV1Monitoring","haveV1MonitoringWorkloads","AsyncButton","IconMessage","delay","t","v","Promise","resolve","setTimeout","bind","label","subtext","weight","components","data","error","mounted","$store","getters","$emit","loading","ready","hidden","methods","uninstall","buttonCb","_this","dispatch","component","componentProps","applyMode","applyAction","_applyAction","_asyncToGenerator","_regeneratorRuntime","mark","_callee","buttonDone","index","hasV1Monitoring","hasV1MonitoringWorkloads","wrap","_callee$","_context","prev","next","doAction","sent","abrupt","Error","stop","_x","apply","arguments","title","body"],"sources":["node_modules/@rancher/shell/chart/monitoring/steps/uninstall-v1.vue"],"sourcesContent":["\n<script>\nimport { haveV1Monitoring, haveV1MonitoringWorkloads } from '@shell/utils/monitoring';\nimport AsyncButton from '@shell/components/AsyncButton';\nimport IconMessage from '@shell/components/IconMessage';\n\nfunction delay(t, v) {\n  return new Promise((resolve) => {\n    setTimeout(resolve.bind(null, v), t);\n  });\n}\n\nexport default {\n\n  label:   'monitoring.installSteps.uninstallV1.stepTitle',\n  subtext: 'monitoring.installSteps.uninstallV1.stepSubtext',\n  weight:  100,\n\n  components: {\n    AsyncButton,\n    IconMessage\n  },\n\n  data() {\n    return {\n      haveV1Monitoring: false,\n      error:            null,\n    };\n  },\n\n  mounted() {\n    this.haveV1Monitoring = haveV1Monitoring(this.$store.getters);\n    this.$emit('update', {\n      loading: false,\n      ready:   false,\n      hidden:  !this.haveV1Monitoring,\n    });\n  },\n\n  methods: {\n    uninstall(buttonCb) {\n      this.$store.dispatch('cluster/promptModal', {\n        component:      'GenericPrompt',\n        componentProps: {\n          applyMode:   'uninstall',\n          applyAction: async(buttonDone) => {\n            await this.$store.getters['currentCluster'].doAction('disableMonitoring');\n\n            for (let index = 0; index < 30; index++) {\n            // Wait 30 seconds for the containers to go\n              const hasV1Monitoring = haveV1Monitoring(this.$store.getters);\n              const hasV1MonitoringWorkloads = await haveV1MonitoringWorkloads(this.$store);\n\n              if ((!hasV1Monitoring && !hasV1MonitoringWorkloads)) {\n                this.$emit('update', { ready: true, hidden: true });\n                this.haveV1Monitoring = false;\n\n                buttonDone(true);\n\n                return;\n              }\n              await delay(1000);\n            }\n\n            throw new Error(`Failed to uninstall: timed out`);\n          },\n          title: this.t('promptRemove.title', {}, true),\n          body:  this.t('monitoring.installSteps.uninstallV1.promptDescription', {}, true),\n        },\n      });\n      buttonCb(true);\n    },\n  }\n};\n\n</script>\n<template>\n  <div class=\"v1-monitoring\">\n    <template v-if=\"haveV1Monitoring\">\n      <IconMessage\n        class=\"mt-40 mb-20\"\n        icon=\"icon-warning\"\n        :vertical=\"true\"\n        icon-state=\"warning\"\n      >\n        <template #message>\n          <p>\n            {{ t('monitoring.installSteps.uninstallV1.warning1') }}\n          </p>\n          <p\n            v-clean-html=\"t('monitoring.installSteps.uninstallV1.warning2', {}, true)\"\n            class=\"mt-10\"\n          />\n        </template>\n      </IconMessage>\n      <AsyncButton\n        mode=\"uninstall\"\n        :delay=\"0\"\n        @click=\"uninstall\"\n      />\n    </template>\n    <IconMessage\n      v-else\n      class=\"mt-40\"\n      icon=\"icon-checkmark\"\n      :vertical=\"true\"\n      icon-state=\"success\"\n    >\n      <template #message>\n        <p class=\"\">\n          {{ t('monitoring.installSteps.uninstallV1.success1') }}\n        </p>\n        <p\n          v-clean-html=\"t('monitoring.installSteps.uninstallV1.success2')\"\n          class=\"mt-10\"\n        />\n      </template>\n    </IconMessage>\n  </div>\n</template>\n\n<style lang='scss' scoped>\n.v1-monitoring {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  width: 100%;\n  p {\n    max-width: 900px;\n  }\n  .btn {\n    min-width: 200px;\n  }\n}\n</style>\n"],"mappings":";;;;;AAEA,SAAAA,gBAAA,EAAAC,yBAAA;AACA,OAAAC,WAAA;AACA,OAAAC,WAAA;AAEA,SAAAC,MAAAC,CAAA,EAAAC,CAAA;EACA,WAAAC,OAAA,WAAAC,OAAA;IACAC,UAAA,CAAAD,OAAA,CAAAE,IAAA,OAAAJ,CAAA,GAAAD,CAAA;EACA;AACA;AAEA;EAEAM,KAAA;EACAC,OAAA;EACAC,MAAA;EAEAC,UAAA;IACAZ,WAAA,EAAAA,WAAA;IACAC,WAAA,EAAAA;EACA;EAEAY,IAAA,WAAAA,KAAA;IACA;MACAf,gBAAA;MACAgB,KAAA;IACA;EACA;EAEAC,OAAA,WAAAA,QAAA;IACA,KAAAjB,gBAAA,GAAAA,gBAAA,MAAAkB,MAAA,CAAAC,OAAA;IACA,KAAAC,KAAA;MACAC,OAAA;MACAC,KAAA;MACAC,MAAA,QAAAvB;IACA;EACA;EAEAwB,OAAA;IACAC,SAAA,WAAAA,UAAAC,QAAA;MAAA,IAAAC,KAAA;MACA,KAAAT,MAAA,CAAAU,QAAA;QACAC,SAAA;QACAC,cAAA;UACAC,SAAA;UACAC,WAAA;YAAA,IAAAC,YAAA,GAAAC,iBAAA,eAAAC,mBAAA,CAAAC,IAAA,UAAAC,QAAAC,UAAA;cAAA,IAAAC,KAAA,EAAAC,eAAA,EAAAC,wBAAA;cAAA,OAAAN,mBAAA,CAAAO,IAAA,UAAAC,SAAAC,QAAA;gBAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;kBAAA;oBAAAF,QAAA,CAAAE,IAAA;oBAAA,OACAnB,KAAA,CAAAT,MAAA,CAAAC,OAAA,mBAAA4B,QAAA;kBAAA;oBAEAR,KAAA;kBAAA;oBAAA,MAAAA,KAAA;sBAAAK,QAAA,CAAAE,IAAA;sBAAA;oBAAA;oBACA;oBACAN,eAAA,GAAAxC,gBAAA,CAAA2B,KAAA,CAAAT,MAAA,CAAAC,OAAA;oBAAAyB,QAAA,CAAAE,IAAA;oBAAA,OACA7C,yBAAA,CAAA0B,KAAA,CAAAT,MAAA;kBAAA;oBAAAuB,wBAAA,GAAAG,QAAA,CAAAI,IAAA;oBAAA,MAEA,CAAAR,eAAA,KAAAC,wBAAA;sBAAAG,QAAA,CAAAE,IAAA;sBAAA;oBAAA;oBACAnB,KAAA,CAAAP,KAAA;sBAAAE,KAAA;sBAAAC,MAAA;oBAAA;oBACAI,KAAA,CAAA3B,gBAAA;oBAEAsC,UAAA;oBAAA,OAAAM,QAAA,CAAAK,MAAA;kBAAA;oBAAAL,QAAA,CAAAE,IAAA;oBAAA,OAIA1C,KAAA;kBAAA;oBAbAmC,KAAA;oBAAAK,QAAA,CAAAE,IAAA;oBAAA;kBAAA;oBAAA,MAgBA,IAAAI,KAAA;kBAAA;kBAAA;oBAAA,OAAAN,QAAA,CAAAO,IAAA;gBAAA;cAAA,GAAAd,OAAA;YAAA,CACA;YAAA,SAAAL,YAAAoB,EAAA;cAAA,OAAAnB,YAAA,CAAAoB,KAAA,OAAAC,SAAA;YAAA;YAAA,OAAAtB,WAAA;UAAA;UACAuB,KAAA,OAAAlD,CAAA;UACAmD,IAAA,OAAAnD,CAAA;QACA;MACA;MACAqB,QAAA;IACA;EACA;AACA","ignoreList":[]}]}