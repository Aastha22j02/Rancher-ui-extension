{"remainingRequest":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js??ref--16-1!/home/ubuntu/suseconf/node_modules/@rancher/shell/store/catalog.js","dependencies":[{"path":"/home/ubuntu/suseconf/node_modules/@rancher/shell/store/catalog.js","mtime":1725338146566},{"path":"/home/ubuntu/suseconf/babel.config.js","mtime":1725343995893},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js","mtime":1725271298942}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3NsaWNlZFRvQXJyYXkiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBfdG9Db25zdW1hYmxlQXJyYXkgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdG9Db25zdW1hYmxlQXJyYXkiOwppbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5IjsKaW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiL2hvbWUvdWJ1bnR1L3N1c2Vjb25mL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9yZWdlbmVyYXRvci9pbmRleC5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKZnVuY3Rpb24gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIociwgZSkgeyB2YXIgdCA9ICJ1bmRlZmluZWQiICE9IHR5cGVvZiBTeW1ib2wgJiYgcltTeW1ib2wuaXRlcmF0b3JdIHx8IHJbIkBAaXRlcmF0b3IiXTsgaWYgKCF0KSB7IGlmIChBcnJheS5pc0FycmF5KHIpIHx8ICh0ID0gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KHIpKSB8fCBlICYmIHIgJiYgIm51bWJlciIgPT0gdHlwZW9mIHIubGVuZ3RoKSB7IHQgJiYgKHIgPSB0KTsgdmFyIF9uID0gMCwgRiA9IGZ1bmN0aW9uIEYoKSB7fTsgcmV0dXJuIHsgczogRiwgbjogZnVuY3Rpb24gbigpIHsgcmV0dXJuIF9uID49IHIubGVuZ3RoID8geyBkb25lOiAhMCB9IDogeyBkb25lOiAhMSwgdmFsdWU6IHJbX24rK10gfTsgfSwgZTogZnVuY3Rpb24gZShyKSB7IHRocm93IHI7IH0sIGY6IEYgfTsgfSB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gaXRlcmF0ZSBub24taXRlcmFibGUgaW5zdGFuY2UuXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuIik7IH0gdmFyIG8sIGEgPSAhMCwgdSA9ICExOyByZXR1cm4geyBzOiBmdW5jdGlvbiBzKCkgeyB0ID0gdC5jYWxsKHIpOyB9LCBuOiBmdW5jdGlvbiBuKCkgeyB2YXIgciA9IHQubmV4dCgpOyByZXR1cm4gYSA9IHIuZG9uZSwgcjsgfSwgZTogZnVuY3Rpb24gZShyKSB7IHUgPSAhMCwgbyA9IHI7IH0sIGY6IGZ1bmN0aW9uIGYoKSB7IHRyeSB7IGEgfHwgbnVsbCA9PSB0LnJldHVybiB8fCB0LnJldHVybigpOyB9IGZpbmFsbHkgeyBpZiAodSkgdGhyb3cgbzsgfSB9IH07IH0KZnVuY3Rpb24gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KHIsIGEpIHsgaWYgKHIpIHsgaWYgKCJzdHJpbmciID09IHR5cGVvZiByKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkociwgYSk7IHZhciB0ID0ge30udG9TdHJpbmcuY2FsbChyKS5zbGljZSg4LCAtMSk7IHJldHVybiAiT2JqZWN0IiA9PT0gdCAmJiByLmNvbnN0cnVjdG9yICYmICh0ID0gci5jb25zdHJ1Y3Rvci5uYW1lKSwgIk1hcCIgPT09IHQgfHwgIlNldCIgPT09IHQgPyBBcnJheS5mcm9tKHIpIDogIkFyZ3VtZW50cyIgPT09IHQgfHwgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QodCkgPyBfYXJyYXlMaWtlVG9BcnJheShyLCBhKSA6IHZvaWQgMDsgfSB9CmZ1bmN0aW9uIF9hcnJheUxpa2VUb0FycmF5KHIsIGEpIHsgKG51bGwgPT0gYSB8fCBhID4gci5sZW5ndGgpICYmIChhID0gci5sZW5ndGgpOyBmb3IgKHZhciBlID0gMCwgbiA9IEFycmF5KGEpOyBlIDwgYTsgZSsrKSBuW2VdID0gcltlXTsgcmV0dXJuIG47IH0KaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmRlc2NyaXB0aW9uLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZyb20uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc29ydC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNsaWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5hc3NpZ24uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZW50cmllcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5rZXlzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC52YWx1ZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5wcm9taXNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLm1hdGNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3RhcnRzLXdpdGguanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcudHJpbS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzbmV4dC5wcm9taXNlLmFsbC1zZXR0bGVkLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgeyBDQVRBTE9HLCBFWFBFUklNRU5UQUwsIERFUFJFQ0FURUQgfSBmcm9tICdAc2hlbGwvY29uZmlnL3R5cGVzJzsKaW1wb3J0IHsgQ0FUQUxPRyBhcyBDQVRBTE9HX0FOTk9UQVRJT05TIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy9sYWJlbHMtYW5ub3RhdGlvbnMnOwppbXBvcnQgeyBhZGRQYXJhbXMgfSBmcm9tICdAc2hlbGwvdXRpbHMvdXJsJzsKaW1wb3J0IHsgYWxsSGFzaCwgYWxsSGFzaFNldHRsZWQgfSBmcm9tICdAc2hlbGwvdXRpbHMvcHJvbWlzZSc7CmltcG9ydCB7IGNsb25lIH0gZnJvbSAnQHNoZWxsL3V0aWxzL29iamVjdCc7CmltcG9ydCB7IGZpbmRCeSwgYWRkT2JqZWN0LCBmaWx0ZXJCeSwgaXNBcnJheSB9IGZyb20gJ0BzaGVsbC91dGlscy9hcnJheSc7CmltcG9ydCB7IHN0cmluZ2lmeSB9IGZyb20gJ0BzaGVsbC91dGlscy9lcnJvcic7CmltcG9ydCB7IGNsYXNzaWZ5IH0gZnJvbSAnQHNoZWxsL3BsdWdpbnMvZGFzaGJvYXJkLXN0b3JlL2NsYXNzaWZ5JzsKaW1wb3J0IHsgc29ydEJ5IH0gZnJvbSAnQHNoZWxsL3V0aWxzL3NvcnQnOwppbXBvcnQgeyBpbXBvcnRDaGFydCB9IGZyb20gJ0BzaGVsbC91dGlscy9keW5hbWljLWltcG9ydGVyJzsKaW1wb3J0IHsgZW5zdXJlUmVnZXggfSBmcm9tICdAc2hlbGwvdXRpbHMvc3RyaW5nJzsKaW1wb3J0IHsgaXNQcmVyZWxlYXNlIH0gZnJvbSAnQHNoZWxsL3V0aWxzL3ZlcnNpb24nOwppbXBvcnQgZGlmZmVyZW5jZSBmcm9tICdsb2Rhc2gvZGlmZmVyZW5jZSc7CmltcG9ydCB7IGxvb2t1cCB9IGZyb20gJ0BzaGVsbC9wbHVnaW5zL2Rhc2hib2FyZC1zdG9yZS9tb2RlbC1sb2FkZXInOwp2YXIgQUxMT1dFRF9DQVRFR09SSUVTID0gWydTdG9yYWdlJywgJ01vbml0b3JpbmcnLCAnRGF0YWJhc2UnLCAnUmVwb3NpdG9yeScsICdTZWN1cml0eScsICdOZXR3b3JraW5nJywgJ1BhYVMnLCAnSW5mcmFzdHJ1Y3R1cmUnLCAnQXBwbGljYXRpb25zJ107CnZhciBDRVJUSUZJRURfU09SVFMgPSBfZGVmaW5lUHJvcGVydHkoX2RlZmluZVByb3BlcnR5KF9kZWZpbmVQcm9wZXJ0eShfZGVmaW5lUHJvcGVydHkoe30sIENBVEFMT0dfQU5OT1RBVElPTlMuX1JBTkNIRVIsIDEpLCBDQVRBTE9HX0FOTk9UQVRJT05TLl9FWFBFUklNRU5UQUwsIDEpLCBDQVRBTE9HX0FOTk9UQVRJT05TLl9QQVJUTkVSLCAyKSwgIm90aGVyIiwgMyk7CmV4cG9ydCB2YXIgV0lORE9XUyA9ICd3aW5kb3dzJzsKZXhwb3J0IHZhciBMSU5VWCA9ICdsaW51eCc7CmV4cG9ydCB2YXIgc3RhdGUgPSBmdW5jdGlvbiBzdGF0ZSgpIHsKICByZXR1cm4gewogICAgbG9hZGVkOiB7fSwKICAgIGNsdXN0ZXJSZXBvczogW10sCiAgICBuYW1lc3BhY2VkUmVwb3M6IFtdLAogICAgY2hhcnRzOiB7fSwKICAgIHZlcnNpb25JbmZvczoge30sCiAgICBjb25maWc6IHsKICAgICAgbmFtZXNwYWNlOiAnY2F0YWxvZycKICAgIH0sCiAgICBpblN0b3JlOiB1bmRlZmluZWQKICB9Owp9OwpleHBvcnQgdmFyIGdldHRlcnMgPSB7CiAgaXNMb2FkZWQ6IGZ1bmN0aW9uIGlzTG9hZGVkKHN0YXRlKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKHJlcG8pIHsKICAgICAgcmV0dXJuICEhc3RhdGUubG9hZGVkW3JlcG8uX2tleV07CiAgICB9OwogIH0sCiAgcmVwb3M6IGZ1bmN0aW9uIHJlcG9zKHN0YXRlKSB7CiAgICB2YXIgY2x1c3RlcmVkID0gc3RhdGUuY2x1c3RlclJlcG9zIHx8IFtdOwogICAgdmFyIG5hbWVzcGFjZWQgPSBzdGF0ZS5uYW1lc3BhY2VkUmVwb3MgfHwgW107CiAgICByZXR1cm4gW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShjbHVzdGVyZWQpLCBfdG9Db25zdW1hYmxlQXJyYXkobmFtZXNwYWNlZCkpOwogIH0sCiAgLy8gUmF3IGNoYXJ0cwogIHJhd0NoYXJ0czogZnVuY3Rpb24gcmF3Q2hhcnRzKHN0YXRlKSB7CiAgICByZXR1cm4gc3RhdGUuY2hhcnRzOwogIH0sCiAgcmVwbzogZnVuY3Rpb24gcmVwbyhzdGF0ZSwgZ2V0dGVycykgewogICAgcmV0dXJuIGZ1bmN0aW9uIChfcmVmKSB7CiAgICAgIHZhciByZXBvVHlwZSA9IF9yZWYucmVwb1R5cGUsCiAgICAgICAgcmVwb05hbWUgPSBfcmVmLnJlcG9OYW1lOwogICAgICB2YXIgYXJ5ID0gcmVwb1R5cGUgPT09ICdjbHVzdGVyJyA/IHN0YXRlLmNsdXN0ZXJSZXBvcyA6IHN0YXRlLm5hbWVzcGFjZWRSZXBvczsKICAgICAgcmV0dXJuIGZpbmRCeShhcnksICdtZXRhZGF0YS5uYW1lJywgcmVwb05hbWUpOwogICAgfTsKICB9LAogIGNoYXJ0czogZnVuY3Rpb24gY2hhcnRzKHN0YXRlLCBnZXR0ZXJzLCByb290U3RhdGUsIHJvb3RHZXR0ZXJzKSB7CiAgICB2YXIgX3Jvb3RHZXR0ZXJzJGN1cnJlbnRQOwogICAgdmFyIHJlcG9LZXlzID0gZ2V0dGVycy5yZXBvcy5tYXAoZnVuY3Rpb24gKHgpIHsKICAgICAgcmV0dXJuIHguX2tleTsKICAgIH0pOwogICAgdmFyIGNsdXN0ZXIgPSByb290R2V0dGVyc1snY3VycmVudENsdXN0ZXInXTsKICAgIGlmICgoKF9yb290R2V0dGVycyRjdXJyZW50UCA9IHJvb3RHZXR0ZXJzWydjdXJyZW50UHJvZHVjdCddKSA9PT0gbnVsbCB8fCBfcm9vdEdldHRlcnMkY3VycmVudFAgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9yb290R2V0dGVycyRjdXJyZW50UC5pblN0b3JlKSA9PT0gJ21hbmFnZW1lbnQnKSB7CiAgICAgIGNsdXN0ZXIgPSBudWxsOwogICAgfQoKICAgIC8vIEZpbHRlciBvdXQgY2hhcnRzIGZvciByZXBvcyB0aGF0IGFyZSBubyBsb25nZXIgaW4gdGhlIHN0b3JlLCByYXRoZXIKICAgIC8vIHRoYW4gdHJ5aW5nIHRvIGNsZWFyIHRoZW0gd2hlbiBhIHJlcG8gaXMgcmVtb3ZlZC4KICAgIC8vIEFuZCBvbmVzIHRoYXQgYXJlIGZvciB0aGUgd3Jvbmcga2luZCBvZiBjbHVzdGVyCiAgICB2YXIgb3V0ID0gT2JqZWN0LnZhbHVlcyhzdGF0ZS5jaGFydHMpLmZpbHRlcihmdW5jdGlvbiAoY2hhcnQpIHsKICAgICAgaWYgKCFyZXBvS2V5cy5pbmNsdWRlcyhjaGFydC5yZXBvS2V5KSkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICBpZiAoY2x1c3RlciAmJiBjaGFydC5zY29wZSAmJiBjaGFydC5zY29wZSAhPT0gY2x1c3Rlci5zY29wZSkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0pOwogICAgcmV0dXJuIHNvcnRCeShvdXQsIFsnY2VydGlmaWVkU29ydCcsICdyZXBvTmFtZScsICdjaGFydE5hbWUnXSk7CiAgfSwKICBjaGFydDogZnVuY3Rpb24gY2hhcnQoc3RhdGUsIGdldHRlcnMpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoX3JlZjIpIHsKICAgICAgdmFyIGtleSA9IF9yZWYyLmtleSwKICAgICAgICByZXBvVHlwZSA9IF9yZWYyLnJlcG9UeXBlLAogICAgICAgIHJlcG9OYW1lID0gX3JlZjIucmVwb05hbWUsCiAgICAgICAgY2hhcnROYW1lID0gX3JlZjIuY2hhcnROYW1lLAogICAgICAgIHByZWZlclJlcG9UeXBlID0gX3JlZjIucHJlZmVyUmVwb1R5cGUsCiAgICAgICAgcHJlZmVyUmVwb05hbWUgPSBfcmVmMi5wcmVmZXJSZXBvTmFtZSwKICAgICAgICBpbmNsdWRlSGlkZGVuID0gX3JlZjIuaW5jbHVkZUhpZGRlbiwKICAgICAgICBzaG93RGVwcmVjYXRlZCA9IF9yZWYyLnNob3dEZXByZWNhdGVkOwogICAgICBpZiAoa2V5ICYmICFyZXBvVHlwZSAmJiAhcmVwb05hbWUgJiYgIWNoYXJ0TmFtZSkgewogICAgICAgIHZhciBwYXJzZWQgPSBwYXJzZUtleShrZXkpOwogICAgICAgIHJlcG9UeXBlID0gcGFyc2VkLnJlcG9UeXBlOwogICAgICAgIHJlcG9OYW1lID0gcGFyc2VkLnJlcG9OYW1lOwogICAgICAgIGNoYXJ0TmFtZSA9IHBhcnNlZC5jaGFydE5hbWU7CiAgICAgIH0KICAgICAgdmFyIG1hdGNoaW5nID0gZmlsdGVyQnkoZ2V0dGVycy5jaGFydHMsIHsKICAgICAgICByZXBvVHlwZTogcmVwb1R5cGUsCiAgICAgICAgcmVwb05hbWU6IHJlcG9OYW1lLAogICAgICAgIGNoYXJ0TmFtZTogY2hhcnROYW1lLAogICAgICAgIGRlcHJlY2F0ZWQ6ICEhc2hvd0RlcHJlY2F0ZWQKICAgICAgfSk7CiAgICAgIGlmIChpbmNsdWRlSGlkZGVuID09PSBmYWxzZSkgewogICAgICAgIG1hdGNoaW5nID0gbWF0Y2hpbmcuZmlsdGVyKGZ1bmN0aW9uICh4KSB7CiAgICAgICAgICByZXR1cm4gIXguaGlkZGVuOwogICAgICAgIH0pOwogICAgICB9CiAgICAgIGlmICghbWF0Y2hpbmcubGVuZ3RoKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGlmIChwcmVmZXJSZXBvVHlwZSAmJiBwcmVmZXJSZXBvTmFtZSkgewogICAgICAgIHByZWZlclNhbWVSZXBvKG1hdGNoaW5nLCBwcmVmZXJSZXBvVHlwZSwgcHJlZmVyUmVwb05hbWUpOwogICAgICB9CiAgICAgIHJldHVybiBtYXRjaGluZ1swXTsKICAgIH07CiAgfSwKICBpc0luc3RhbGxlZDogZnVuY3Rpb24gaXNJbnN0YWxsZWQoc3RhdGUsIGdldHRlcnMsIHJvb3RTdGF0ZSwgcm9vdEdldHRlcnMpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoX3JlZjMpIHsKICAgICAgdmFyIGd2ciA9IF9yZWYzLmd2cjsKICAgICAgdmFyIG5hbWUsIHZlcnNpb247CiAgICAgIHZhciBpZHggPSBndnIuaW5kZXhPZignLycpOwogICAgICBpZiAoaWR4ID4gMCkgewogICAgICAgIG5hbWUgPSBndnIuc3Vic3RyKDAsIGlkeCk7CiAgICAgICAgdmVyc2lvbiA9IGd2ci5zdWJzdHIoaWR4ICsgMSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbmFtZSA9IGd2cjsKICAgICAgfQogICAgICB2YXIgaW5TdG9yZSA9IHJvb3RHZXR0ZXJzWydjdXJyZW50UHJvZHVjdCddLmluU3RvcmU7CiAgICAgIHZhciBzY2hlbWEgPSByb290R2V0dGVyc1siIi5jb25jYXQoaW5TdG9yZSwgIi9zY2hlbWFGb3IiKV0obmFtZSk7CiAgICAgIGlmIChzY2hlbWEgJiYgKCF2ZXJzaW9uIHx8IHNjaGVtYS5hdHRyaWJ1dGVzLnZlcnNpb24gPT09IHZlcnNpb24pKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KICAgICAgcmV0dXJuIGZhbHNlOwogICAgfTsKICB9LAogIHZlcnNpb25TYXRpc2Z5aW5nOiBmdW5jdGlvbiB2ZXJzaW9uU2F0aXNmeWluZyhzdGF0ZSwgZ2V0dGVycykgewogICAgcmV0dXJuIGZ1bmN0aW9uIChfcmVmNCkgewogICAgICB2YXIgcmVwb1R5cGUgPSBfcmVmNC5yZXBvVHlwZSwKICAgICAgICByZXBvTmFtZSA9IF9yZWY0LnJlcG9OYW1lLAogICAgICAgIGNvbnN0cmFpbnQgPSBfcmVmNC5jb25zdHJhaW50LAogICAgICAgIGNoYXJ0VmVyc2lvbiA9IF9yZWY0LmNoYXJ0VmVyc2lvbjsKICAgICAgdmFyIG5hbWUsIHdhbnRWZXJzaW9uOwogICAgICB2YXIgaWR4ID0gY29uc3RyYWludC5pbmRleE9mKCc9Jyk7CiAgICAgIGlmIChpZHggPiAwKSB7CiAgICAgICAgbmFtZSA9IGNvbnN0cmFpbnQuc3Vic3RyKDAsIGlkeCk7CiAgICAgICAgd2FudFZlcnNpb24gPSBub3JtYWxpemVWZXJzaW9uKGNvbnN0cmFpbnQuc3Vic3RyKGlkeCArIDEpKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBuYW1lID0gY29uc3RyYWludDsKICAgICAgICB3YW50VmVyc2lvbiA9ICdsYXRlc3QnOwogICAgICB9CiAgICAgIG5hbWUgPSBuYW1lLnRvTG93ZXJDYXNlKCkudHJpbSgpOwogICAgICBjaGFydFZlcnNpb24gPSBub3JtYWxpemVWZXJzaW9uKGNoYXJ0VmVyc2lvbik7CiAgICAgIHZhciBtYXRjaGluZyA9IGdldHRlcnMuY2hhcnRzLmZpbHRlcihmdW5jdGlvbiAoY2hhcnQpIHsKICAgICAgICByZXR1cm4gY2hhcnQuY2hhcnROYW1lLnRvTG93ZXJDYXNlKCkudHJpbSgpID09PSBuYW1lOwogICAgICB9KTsKICAgICAgaWYgKCFtYXRjaGluZy5sZW5ndGgpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgaWYgKHJlcG9UeXBlICYmIHJlcG9OYW1lKSB7CiAgICAgICAgcHJlZmVyU2FtZVJlcG8obWF0Y2hpbmcsIHJlcG9UeXBlLCByZXBvTmFtZSk7CiAgICAgIH0KICAgICAgdmFyIGNoYXJ0ID0gbWF0Y2hpbmdbMF07CiAgICAgIHZhciB2ZXJzaW9uOwogICAgICBpZiAod2FudFZlcnNpb24gPT09ICdsYXRlc3QnKSB7CiAgICAgICAgdmVyc2lvbiA9IGNoYXJ0LnZlcnNpb25zWzBdOwogICAgICB9IGVsc2UgaWYgKHdhbnRWZXJzaW9uID09PSAnbWF0Y2gnIHx8IHdhbnRWZXJzaW9uID09PSAnbWF0Y2hpbmcnKSB7CiAgICAgICAgdmVyc2lvbiA9IGNoYXJ0LnZlcnNpb25zLmZpbmQoZnVuY3Rpb24gKHYpIHsKICAgICAgICAgIHJldHVybiBub3JtYWxpemVWZXJzaW9uKHYudmVyc2lvbikgPT09IGNoYXJ0VmVyc2lvbjsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2ZXJzaW9uID0gY2hhcnQudmVyc2lvbnMuZmluZChmdW5jdGlvbiAodikgewogICAgICAgICAgcmV0dXJuIG5vcm1hbGl6ZVZlcnNpb24odi52ZXJzaW9uKSA9PT0gd2FudFZlcnNpb247CiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgaWYgKHZlcnNpb24pIHsKICAgICAgICByZXR1cm4gY2xvbmUodmVyc2lvbik7CiAgICAgIH0KICAgIH07CiAgfSwKICB2ZXJzaW9uUHJvdmlkaW5nOiBmdW5jdGlvbiB2ZXJzaW9uUHJvdmlkaW5nKHN0YXRlLCBnZXR0ZXJzKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKF9yZWY1KSB7CiAgICAgIHZhciByZXBvVHlwZSA9IF9yZWY1LnJlcG9UeXBlLAogICAgICAgIHJlcG9OYW1lID0gX3JlZjUucmVwb05hbWUsCiAgICAgICAgZ3ZyID0gX3JlZjUuZ3ZyOwogICAgICB2YXIgbWF0Y2hpbmcgPSBnZXR0ZXJzLmNoYXJ0cy5maWx0ZXIoZnVuY3Rpb24gKGNoYXJ0KSB7CiAgICAgICAgcmV0dXJuIGNoYXJ0LnByb3ZpZGVzLmluY2x1ZGVzKGd2cik7CiAgICAgIH0pOwogICAgICBpZiAoIW1hdGNoaW5nLmxlbmd0aCkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBpZiAocmVwb1R5cGUgJiYgcmVwb05hbWUpIHsKICAgICAgICBwcmVmZXJTYW1lUmVwbyhtYXRjaGluZywgcmVwb1R5cGUsIHJlcG9OYW1lKTsKICAgICAgfQogICAgICB2YXIgdmVyc2lvbiA9IG1hdGNoaW5nWzBdLnZlcnNpb25zLmZpbmQoZnVuY3Rpb24gKHZlcnNpb24pIHsKICAgICAgICB2YXIgX3ZlcnNpb24kYW5ub3RhdGlvbnM7CiAgICAgICAgcmV0dXJuICgoX3ZlcnNpb24kYW5ub3RhdGlvbnMgPSB2ZXJzaW9uLmFubm90YXRpb25zKSA9PT0gbnVsbCB8fCBfdmVyc2lvbiRhbm5vdGF0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3ZlcnNpb24kYW5ub3RhdGlvbnNbQ0FUQUxPR19BTk5PVEFUSU9OUy5QUk9WSURFU10pID09PSBndnI7CiAgICAgIH0pOwogICAgICBpZiAodmVyc2lvbikgewogICAgICAgIHJldHVybiBjbG9uZSh2ZXJzaW9uKTsKICAgICAgfQogICAgfTsKICB9LAogIHZlcnNpb246IGZ1bmN0aW9uIHZlcnNpb24oc3RhdGUsIGdldHRlcnMpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoX3JlZjYpIHsKICAgICAgdmFyIHJlcG9UeXBlID0gX3JlZjYucmVwb1R5cGUsCiAgICAgICAgcmVwb05hbWUgPSBfcmVmNi5yZXBvTmFtZSwKICAgICAgICBjaGFydE5hbWUgPSBfcmVmNi5jaGFydE5hbWUsCiAgICAgICAgdmVyc2lvbk5hbWUgPSBfcmVmNi52ZXJzaW9uTmFtZTsKICAgICAgdmFyIGNoYXJ0ID0gZ2V0dGVyc1snY2hhcnQnXSh7CiAgICAgICAgcmVwb1R5cGU6IHJlcG9UeXBlLAogICAgICAgIHJlcG9OYW1lOiByZXBvTmFtZSwKICAgICAgICBjaGFydE5hbWU6IGNoYXJ0TmFtZQogICAgICB9KTsKICAgICAgaWYgKCFjaGFydCkgewogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CiAgICAgIHZhciB2ZXJzaW9uOwogICAgICBpZiAodmVyc2lvbk5hbWUpIHsKICAgICAgICB2ZXJzaW9uID0gZmluZEJ5KGNoYXJ0LnZlcnNpb25zLCAndmVyc2lvbicsIHZlcnNpb25OYW1lKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2ZXJzaW9uID0gY2hhcnQudmVyc2lvbnNbMF07CiAgICAgIH0KICAgICAgaWYgKHZlcnNpb24pIHsKICAgICAgICByZXR1cm4gY2xvbmUodmVyc2lvbik7CiAgICAgIH0KICAgIH07CiAgfSwKICBlcnJvcnM6IGZ1bmN0aW9uIGVycm9ycyhzdGF0ZSkgewogICAgcmV0dXJuIHN0YXRlLmVycm9ycyB8fCBbXTsKICB9LAogIGhhdmVDb21wb25lbnQ6IGZ1bmN0aW9uIGhhdmVDb21wb25lbnQoKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKG5hbWUpIHsKICAgICAgcmV0dXJuIGdldHRlcnNbJ3R5cGUtbWFwL2hhc0N1c3RvbUNoYXJ0J10obmFtZSk7CiAgICB9OwogIH0sCiAgaW1wb3J0Q29tcG9uZW50OiBmdW5jdGlvbiBpbXBvcnRDb21wb25lbnQoc3RhdGUsIGdldHRlcnMpIHsKICAgIHJldHVybiBmdW5jdGlvbiAobmFtZSkgewogICAgICByZXR1cm4gZ2V0dGVyc1sndHlwZS1tYXAvaW1wb3J0Q2hhcnQnXShuYW1lKTsKICAgIH07CiAgfSwKICBjaGFydFN0ZXBzOiBmdW5jdGlvbiBjaGFydFN0ZXBzKHN0YXRlLCBnZXR0ZXJzKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKG5hbWUpIHsKICAgICAgdmFyIHN0ZXBzID0gW107CiAgICAgIHZhciBzdGVwc1BhdGggPSAiLi8iLmNvbmNhdChuYW1lLCAiL3N0ZXBzLyIpOwogICAgICAvLyByZXF1aXJlLmNvbnRleHQgb25seSB0YWtlcyBsaXRlcmFscywgc28gZmluZCBhbGwgY2FuZGlkYXRlIHN0ZXAgZmlsZXMgYW5kIGZpbHRlciBvdXQKICAgICAgdmFyIGFsbFBhdGhzID0gcmVxdWlyZS5jb250ZXh0KCdAc2hlbGwvY2hhcnQnLCB0cnVlLCAvXC52dWUkLykua2V5cygpOwogICAgICBhbGxQYXRocy5maWx0ZXIoZnVuY3Rpb24gKHBhdGgpIHsKICAgICAgICByZXR1cm4gcGF0aC5zdGFydHNXaXRoKHN0ZXBzUGF0aCk7CiAgICAgIH0pLmZvckVhY2goZnVuY3Rpb24gKHBhdGgpIHsKICAgICAgICB0cnkgewogICAgICAgICAgc3RlcHMucHVzaCh7CiAgICAgICAgICAgIG5hbWU6IHBhdGgucmVwbGFjZShzdGVwc1BhdGgsICcnKSwKICAgICAgICAgICAgY29tcG9uZW50OiBpbXBvcnRDaGFydChwYXRoLnN1YnN0cigyLCBwYXRoLmxlbmd0aCkpCiAgICAgICAgICB9KTsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICBjb25zb2xlLndhcm4oIkZhaWxlZCB0byBsb2FkIHN0ZXAgY29tcG9uZW50ICIuY29uY2F0KHBhdGgsICIgZm9yIGNoYXJ0ICIpLmNvbmNhdChuYW1lKSwgZSk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc29sZQogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHJldHVybiBzdGVwczsKICAgIH07CiAgfSwKICBpblN0b3JlOiBmdW5jdGlvbiBpblN0b3JlKHN0YXRlKSB7CiAgICByZXR1cm4gc3RhdGUuaW5TdG9yZTsKICB9LAogIGNsYXNzaWZ5OiBmdW5jdGlvbiBjbGFzc2lmeShzdGF0ZSwgZ2V0dGVycywgcm9vdFN0YXRlKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKG9iaikgewogICAgICB2YXIgX29iaiRtZXRhZGF0YTsKICAgICAgcmV0dXJuIGxvb2t1cChzdGF0ZS5jb25maWcubmFtZXNwYWNlLCBvYmogPT09IG51bGwgfHwgb2JqID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvYmoudHlwZSwgb2JqID09PSBudWxsIHx8IG9iaiA9PT0gdm9pZCAwIHx8IChfb2JqJG1ldGFkYXRhID0gb2JqLm1ldGFkYXRhKSA9PT0gbnVsbCB8fCBfb2JqJG1ldGFkYXRhID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfb2JqJG1ldGFkYXRhLm5hbWUsIHJvb3RTdGF0ZSk7CiAgICB9OwogIH0KfTsKZXhwb3J0IHZhciBtdXRhdGlvbnMgPSB7CiAgcmVzZXQ6IGZ1bmN0aW9uIHJlc2V0KGN1cnJlbnRTdGF0ZSkgewogICAgdmFyIG5ld1N0YXRlID0gc3RhdGUoKTsKICAgIE9iamVjdC5hc3NpZ24oY3VycmVudFN0YXRlLCBuZXdTdGF0ZSk7CiAgfSwKICBzZXRJblN0b3JlOiBmdW5jdGlvbiBzZXRJblN0b3JlKHN0YXRlLCBpblN0b3JlKSB7CiAgICBzdGF0ZS5pblN0b3JlID0gaW5TdG9yZTsKICB9LAogIHNldFJlcG9zOiBmdW5jdGlvbiBzZXRSZXBvcyhzdGF0ZSwgX3JlZjcpIHsKICAgIHZhciBjbHVzdGVyID0gX3JlZjcuY2x1c3RlciwKICAgICAgbmFtZXNwYWNlZCA9IF9yZWY3Lm5hbWVzcGFjZWQ7CiAgICBzdGF0ZS5jbHVzdGVyUmVwb3MgPSBjbHVzdGVyOwogICAgc3RhdGUubmFtZXNwYWNlZFJlcG9zID0gbmFtZXNwYWNlZDsKICB9LAogIHNldENoYXJ0czogZnVuY3Rpb24gc2V0Q2hhcnRzKHN0YXRlLCBfcmVmOCkgewogICAgdmFyIGNoYXJ0cyA9IF9yZWY4LmNoYXJ0cywKICAgICAgX3JlZjgkZXJyb3JzID0gX3JlZjguZXJyb3JzLAogICAgICBlcnJvcnMgPSBfcmVmOCRlcnJvcnMgPT09IHZvaWQgMCA/IFtdIDogX3JlZjgkZXJyb3JzLAogICAgICBfcmVmOCRsb2FkZWQgPSBfcmVmOC5sb2FkZWQsCiAgICAgIGxvYWRlZCA9IF9yZWY4JGxvYWRlZCA9PT0gdm9pZCAwID8gW10gOiBfcmVmOCRsb2FkZWQ7CiAgICBzdGF0ZS5jaGFydHMgPSBjaGFydHM7CiAgICBzdGF0ZS5lcnJvcnMgPSBlcnJvcnM7CiAgICB2YXIgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIobG9hZGVkKSwKICAgICAgX3N0ZXA7CiAgICB0cnkgewogICAgICBmb3IgKF9pdGVyYXRvci5zKCk7ICEoX3N0ZXAgPSBfaXRlcmF0b3IubigpKS5kb25lOykgewogICAgICAgIHZhciByZXBvID0gX3N0ZXAudmFsdWU7CiAgICAgICAgc3RhdGUubG9hZGVkW3JlcG8uX2tleV0gPSB0cnVlOwogICAgICB9CiAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgX2l0ZXJhdG9yLmUoZXJyKTsKICAgIH0gZmluYWxseSB7CiAgICAgIF9pdGVyYXRvci5mKCk7CiAgICB9CiAgfSwKICBzZXRWZXJzaW9uczogZnVuY3Rpb24gc2V0VmVyc2lvbnMoc3RhdGUsIHZlcnNpb25zKSB7CiAgICBzdGF0ZS52ZXJzaW9uSW5mb3MgPSB2ZXJzaW9uczsKICB9LAogIGNhY2hlVmVyc2lvbjogZnVuY3Rpb24gY2FjaGVWZXJzaW9uKHN0YXRlLCBfcmVmOSkgewogICAgdmFyIGtleSA9IF9yZWY5LmtleSwKICAgICAgaW5mbyA9IF9yZWY5LmluZm87CiAgICBzdGF0ZS52ZXJzaW9uSW5mb3Nba2V5XSA9IGluZm87CiAgfQp9OwpleHBvcnQgdmFyIGFjdGlvbnMgPSB7CiAgLyoqCiAgICogZm9yY2U6IEFsd2F5cyByZWZyZXNoIGNhdGFsb2cncyBoZWxtIHJlcG8gYnkgcmUtZmV0Y2hpbmcgaW5kZXgueWFtbAogICAqCiAgICogcmVzZXQ6IGNsZWFyIGV4aXN0aW5nIGNoYXJ0cyBhbmQgdmVyc2lvbiBjYWNoZQogICAqLwogIGxvYWQ6IGZ1bmN0aW9uIGxvYWQoY3R4KSB7CiAgICB2YXIgX2FyZ3VtZW50cyA9IGFyZ3VtZW50czsKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvcigvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgIHZhciBfaGFzaCRjbHVzdGVyOwogICAgICB2YXIgX3JlZjEwLCBmb3JjZSwgcmVzZXQsIHN0YXRlLCBnZXR0ZXJzLCByb290R2V0dGVycywgY29tbWl0LCBkaXNwYXRjaCwgcHJvbWlzZXMsIGluU3RvcmUsIGhhc2gsIHJlcG9zLCBsb2FkZWQsIF9pdGVyYXRvcjIsIF9zdGVwMiwgX3JlcG8sIHJlcywgY2hhcnRzLCBlcnJvcnMsIF9pLCBfT2JqZWN0JGtleXMsIGtleSwgb2JqLCByZXBvLCBrLCBfaXRlcmF0b3IzLCBfc3RlcDMsIGVudHJ5OwogICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgX3JlZjEwID0gX2FyZ3VtZW50cy5sZW5ndGggPiAxICYmIF9hcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IF9hcmd1bWVudHNbMV0gOiB7fSwgZm9yY2UgPSBfcmVmMTAuZm9yY2UsIHJlc2V0ID0gX3JlZjEwLnJlc2V0OwogICAgICAgICAgICBzdGF0ZSA9IGN0eC5zdGF0ZSwgZ2V0dGVycyA9IGN0eC5nZXR0ZXJzLCByb290R2V0dGVycyA9IGN0eC5yb290R2V0dGVycywgY29tbWl0ID0gY3R4LmNvbW1pdCwgZGlzcGF0Y2ggPSBjdHguZGlzcGF0Y2g7CiAgICAgICAgICAgIHByb21pc2VzID0ge307IC8vIEluc3RhbGxpbmcgYW4gYXBwPyBUaGlzIGlzIGZpbmUgKGluIGNsdXN0ZXIgc3RvcmUpCiAgICAgICAgICAgIC8vIEZldGNoaW5nIGxpc3Qgb2YgY2x1c3RlciB0ZW1wbGF0ZXM/IFRoaXMgaXMgZmluZSAoaW4gbWFuYWdlbWVudCBzdG9yZSkKICAgICAgICAgICAgLy8gSW5zdGFsbGluZyBhIGNsdXN0ZXIgdGVtcGxhdGU/IFRoaXMgaXNuJ3QgZmluZSAoaW4gY2x1c3RlciBzdG9yZSBhcyBwZXIgaW5zdGFsbGluZyBhcHAsIGJ1dCBpZiB0aGVyZSBpcyBubyBjbHVzdGVyIHdlIG5lZWQgdG8gZGVmYXVsdCB0byBtYW5hZ2VtZW50KQogICAgICAgICAgICBpblN0b3JlID0gcm9vdEdldHRlcnNbJ2N1cnJlbnRDbHVzdGVyJ10gPyByb290R2V0dGVyc1snY3VycmVudFByb2R1Y3QnXS5pblN0b3JlIDogJ21hbmFnZW1lbnQnOwogICAgICAgICAgICBpZiAocm9vdEdldHRlcnNbIiIuY29uY2F0KGluU3RvcmUsICIvc2NoZW1hRm9yIildKENBVEFMT0cuQ0xVU1RFUl9SRVBPKSkgewogICAgICAgICAgICAgIHByb21pc2VzLmNsdXN0ZXIgPSBkaXNwYXRjaCgiIi5jb25jYXQoaW5TdG9yZSwgIi9maW5kQWxsIiksIHsKICAgICAgICAgICAgICAgIHR5cGU6IENBVEFMT0cuQ0xVU1RFUl9SRVBPCiAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgcm9vdDogdHJ1ZQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChyb290R2V0dGVyc1siIi5jb25jYXQoaW5TdG9yZSwgIi9zY2hlbWFGb3IiKV0oQ0FUQUxPRy5SRVBPKSkgewogICAgICAgICAgICAgIHByb21pc2VzLm5hbWVzcGFjZWQgPSBkaXNwYXRjaCgiIi5jb25jYXQoaW5TdG9yZSwgIi9maW5kQWxsIiksIHsKICAgICAgICAgICAgICAgIHR5cGU6IENBVEFMT0cuUkVQTwogICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gODsKICAgICAgICAgICAgcmV0dXJuIGFsbEhhc2gocHJvbWlzZXMpOwogICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICBoYXNoID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgLy8gQXMgcGVyIGNvbW1lbnQgYWJvdmUsIHdoZW4gdGhlcmUgYXJlIG5vIGNsdXN0ZXJzIHRoaXMgd2lsbCBiZSBtYW5hZ2VtZW50LiBTdG9yZSBpdCBzdWNoIHRoYXQgaXQgY2FuIGJlIHVzZWQgZm9yIHRob3NlIGNhc2VzCiAgICAgICAgICAgIGNvbW1pdCgnc2V0SW5TdG9yZScsIGluU3RvcmUpOwogICAgICAgICAgICBoYXNoLmNsdXN0ZXIgPSAoX2hhc2gkY2x1c3RlciA9IGhhc2guY2x1c3RlcikgPT09IG51bGwgfHwgX2hhc2gkY2x1c3RlciA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2hhc2gkY2x1c3Rlci5maWx0ZXIoZnVuY3Rpb24gKHJlcG8pIHsKICAgICAgICAgICAgICB2YXIgX3JlcG8kbWV0YWRhdGE7CiAgICAgICAgICAgICAgcmV0dXJuICEoKHJlcG8gPT09IG51bGwgfHwgcmVwbyA9PT0gdm9pZCAwIHx8IChfcmVwbyRtZXRhZGF0YSA9IHJlcG8ubWV0YWRhdGEpID09PSBudWxsIHx8IF9yZXBvJG1ldGFkYXRhID09PSB2b2lkIDAgfHwgKF9yZXBvJG1ldGFkYXRhID0gX3JlcG8kbWV0YWRhdGEuYW5ub3RhdGlvbnMpID09PSBudWxsIHx8IF9yZXBvJG1ldGFkYXRhID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcmVwbyRtZXRhZGF0YVtDQVRBTE9HX0FOTk9UQVRJT05TLkhJRERFTl9SRVBPXSkgPT09ICd0cnVlJyk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjb21taXQoJ3NldFJlcG9zJywgaGFzaCk7CiAgICAgICAgICAgIHJlcG9zID0gZ2V0dGVyc1sncmVwb3MnXTsKICAgICAgICAgICAgbG9hZGVkID0gW107CiAgICAgICAgICAgIHByb21pc2VzID0ge307CiAgICAgICAgICAgIF9pdGVyYXRvcjIgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihyZXBvcyk7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgZm9yIChfaXRlcmF0b3IyLnMoKTsgIShfc3RlcDIgPSBfaXRlcmF0b3IyLm4oKSkuZG9uZTspIHsKICAgICAgICAgICAgICAgIF9yZXBvID0gX3N0ZXAyLnZhbHVlOwogICAgICAgICAgICAgICAgaWYgKChmb3JjZSA9PT0gdHJ1ZSB8fCAhZ2V0dGVycy5pc0xvYWRlZChfcmVwbykpICYmIF9yZXBvLmNhbkxvYWQpIHsKICAgICAgICAgICAgICAgICAgY29uc29sZS5pbmZvKCdMb2FkaW5nIGluZGV4IGZvciByZXBvJywgX3JlcG8ubmFtZSwgIigiLmNvbmNhdChfcmVwby5fa2V5LCAiKSIpKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1jb25zb2xlCiAgICAgICAgICAgICAgICAgIHByb21pc2VzW19yZXBvLl9rZXldID0gX3JlcG8uZm9sbG93TGluaygnaW5kZXgnKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgICAgIF9pdGVyYXRvcjIuZShlcnIpOwogICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgIF9pdGVyYXRvcjIuZigpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxOTsKICAgICAgICAgICAgcmV0dXJuIGFsbEhhc2hTZXR0bGVkKHByb21pc2VzKTsKICAgICAgICAgIGNhc2UgMTk6CiAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgIGNoYXJ0cyA9IHJlc2V0ID8ge30gOiBzdGF0ZS5jaGFydHM7CiAgICAgICAgICAgIGVycm9ycyA9IFtdOwogICAgICAgICAgICBfaSA9IDAsIF9PYmplY3Qka2V5cyA9IE9iamVjdC5rZXlzKHJlcyk7CiAgICAgICAgICBjYXNlIDIzOgogICAgICAgICAgICBpZiAoIShfaSA8IF9PYmplY3Qka2V5cy5sZW5ndGgpKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM1OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGtleSA9IF9PYmplY3Qka2V5c1tfaV07CiAgICAgICAgICAgIG9iaiA9IHJlc1trZXldOwogICAgICAgICAgICByZXBvID0gZmluZEJ5KHJlcG9zLCAnX2tleScsIGtleSk7CiAgICAgICAgICAgIGlmICghKG9iai5zdGF0dXMgPT09ICdyZWplY3RlZCcpKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDMwOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVycm9ycy5wdXNoKHN0cmluZ2lmeShvYmoucmVhc29uKSk7CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoImNvbnRpbnVlIiwgMzIpOwogICAgICAgICAgY2FzZSAzMDoKICAgICAgICAgICAgZm9yIChrIGluIG9iai52YWx1ZS5lbnRyaWVzKSB7CiAgICAgICAgICAgICAgX2l0ZXJhdG9yMyA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKG9iai52YWx1ZS5lbnRyaWVzW2tdKTsKICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgZm9yIChfaXRlcmF0b3IzLnMoKTsgIShfc3RlcDMgPSBfaXRlcmF0b3IzLm4oKSkuZG9uZTspIHsKICAgICAgICAgICAgICAgICAgZW50cnkgPSBfc3RlcDMudmFsdWU7CiAgICAgICAgICAgICAgICAgIGFkZENoYXJ0KGN0eCwgY2hhcnRzLCBlbnRyeSwgcmVwbyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgICAgICBfaXRlcmF0b3IzLmUoZXJyKTsKICAgICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgICAgX2l0ZXJhdG9yMy5mKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGxvYWRlZC5wdXNoKHJlcG8pOwogICAgICAgICAgY2FzZSAzMjoKICAgICAgICAgICAgX2krKzsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDIzOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgMzU6CiAgICAgICAgICAgIGNvbW1pdCgnc2V0Q2hhcnRzJywgewogICAgICAgICAgICAgIGNoYXJ0czogY2hhcnRzLAogICAgICAgICAgICAgIGVycm9yczogZXJyb3JzLAogICAgICAgICAgICAgIGxvYWRlZDogbG9hZGVkCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBpZiAocmVzZXQpIHsKICAgICAgICAgICAgICBjb21taXQoJ3NldFZlcnNpb25zJywge30pOwogICAgICAgICAgICB9CiAgICAgICAgICBjYXNlIDM3OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUpOwogICAgfSkpKCk7CiAgfSwKICByZWZyZXNoOiBmdW5jdGlvbiByZWZyZXNoKF9yZWYxMSkgewogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgIHZhciBnZXR0ZXJzLCBjb21taXQsIGRpc3BhdGNoLCBwcm9taXNlczsKICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBnZXR0ZXJzID0gX3JlZjExLmdldHRlcnMsIGNvbW1pdCA9IF9yZWYxMS5jb21taXQsIGRpc3BhdGNoID0gX3JlZjExLmRpc3BhdGNoOwogICAgICAgICAgICBwcm9taXNlcyA9IGdldHRlcnMucmVwb3MubWFwKGZ1bmN0aW9uICh4KSB7CiAgICAgICAgICAgICAgcmV0dXJuIHgucmVmcmVzaCgpOwogICAgICAgICAgICB9KTsgLy8gQFRPRE8gd2FpdCBmb3IgcmVwbyBzdGF0ZSB0byBpbmRpY2F0ZSB0aGV5J3JlIGRvbmUgb25jZSB0aGUgQVBJIGhhcyB0aGF0CiAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNDsKICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsU2V0dGxlZChwcm9taXNlcyk7CiAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNjsKICAgICAgICAgICAgcmV0dXJuIGRpc3BhdGNoKCdsb2FkJywgewogICAgICAgICAgICAgIGZvcmNlOiB0cnVlLAogICAgICAgICAgICAgIHJlc2V0OiB0cnVlCiAgICAgICAgICAgIH0pOwogICAgICAgICAgY2FzZSA2OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlMik7CiAgICB9KSkoKTsKICB9LAogIC8qCiAgICBGZXRjaCBmdWxsIGluZm9ybWF0aW9uIGFib3V0IGEgc3BlY2lmaWMgdmVyc2lvbiBvZiBhIEhlbG0gY2hhcnQsCiAgICBpbmNsdWRpbmcgdGhlIHN0YW5kYXJkIHZhbHVlcyBhbmQgUkVBRE1FLgogICovCiAgZ2V0VmVyc2lvbkluZm86IGZ1bmN0aW9uIGdldFZlcnNpb25JbmZvKF9yZWYxMiwgX3JlZjEzKSB7CiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMygpIHsKICAgICAgdmFyIHN0YXRlLCBnZXR0ZXJzLCBjb21taXQsIHJlcG9UeXBlLCByZXBvTmFtZSwgY2hhcnROYW1lLCB2ZXJzaW9uTmFtZSwga2V5LCBpbmZvLCByZXBvOwogICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIHN0YXRlID0gX3JlZjEyLnN0YXRlLCBnZXR0ZXJzID0gX3JlZjEyLmdldHRlcnMsIGNvbW1pdCA9IF9yZWYxMi5jb21taXQ7CiAgICAgICAgICAgIHJlcG9UeXBlID0gX3JlZjEzLnJlcG9UeXBlLCByZXBvTmFtZSA9IF9yZWYxMy5yZXBvTmFtZSwgY2hhcnROYW1lID0gX3JlZjEzLmNoYXJ0TmFtZSwgdmVyc2lvbk5hbWUgPSBfcmVmMTMudmVyc2lvbk5hbWU7CiAgICAgICAgICAgIGtleSA9ICIiLmNvbmNhdChyZXBvVHlwZSwgIi8iKS5jb25jYXQocmVwb05hbWUsICIvIikuY29uY2F0KGNoYXJ0TmFtZSwgIi8iKS5jb25jYXQodmVyc2lvbk5hbWUpOwogICAgICAgICAgICBpbmZvID0gc3RhdGUudmVyc2lvbkluZm9zW2tleV07CiAgICAgICAgICAgIGlmIChpbmZvKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAxMjsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXBvID0gZ2V0dGVyc1sncmVwbyddKHsKICAgICAgICAgICAgICByZXBvVHlwZTogcmVwb1R5cGUsCiAgICAgICAgICAgICAgcmVwb05hbWU6IHJlcG9OYW1lCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBpZiAocmVwbykgewogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gODsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcG8gbm90IGZvdW5kJyk7CiAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMTA7CiAgICAgICAgICAgIHJldHVybiByZXBvLmZvbGxvd0xpbmsoJ2luZm8nLCB7CiAgICAgICAgICAgICAgdXJsOiBhZGRQYXJhbXMocmVwby5saW5rcy5pbmZvLCB7CiAgICAgICAgICAgICAgICBjaGFydE5hbWU6IGNoYXJ0TmFtZSwKICAgICAgICAgICAgICAgIHZlcnNpb246IHZlcnNpb25OYW1lCiAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfSk7CiAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICBpbmZvID0gX2NvbnRleHQzLnNlbnQ7CiAgICAgICAgICAgIGNvbW1pdCgnY2FjaGVWZXJzaW9uJywgewogICAgICAgICAgICAgIGtleToga2V5LAogICAgICAgICAgICAgIGluZm86IGluZm8KICAgICAgICAgICAgfSk7CiAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIiwgaW5mbyk7CiAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlMyk7CiAgICB9KSkoKTsKICB9LAogIHJlaHlkcmF0ZTogZnVuY3Rpb24gcmVoeWRyYXRlKGN0eCkgewogICAgdmFyIHN0YXRlID0gY3R4LnN0YXRlLAogICAgICBjb21taXQgPSBjdHguY29tbWl0OwogICAgdmFyIGNoYXJ0cyA9IHN0YXRlLmNoYXJ0cyB8fCB7fTsKICAgIE9iamVjdC5lbnRyaWVzKHN0YXRlLmNoYXJ0cykuZm9yRWFjaChmdW5jdGlvbiAoX3JlZjE0KSB7CiAgICAgIHZhciBfcmVmMTUgPSBfc2xpY2VkVG9BcnJheShfcmVmMTQsIDIpLAogICAgICAgIGtleSA9IF9yZWYxNVswXSwKICAgICAgICBjaGFydCA9IF9yZWYxNVsxXTsKICAgICAgaWYgKGNoYXJ0Ll9fcmVoeWRyYXRlKSB7CiAgICAgICAgY2hhcnRzW2tleV0gPSBjbGFzc2lmeShjdHgsIGNoYXJ0KTsKICAgICAgfQogICAgfSk7CiAgICBjb21taXQoJ3NldENoYXJ0cycsIHsKICAgICAgY2hhcnRzOiBjaGFydHMsCiAgICAgIGVycm9yczogc3RhdGUuZXJyb3JzCiAgICB9KTsKICB9Cn07CmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZUtleShyZXBvVHlwZSwgcmVwb05hbWUsIGNoYXJ0TmFtZSkgewogIHJldHVybiAiIi5jb25jYXQocmVwb1R5cGUsICIvIikuY29uY2F0KHJlcG9OYW1lLCAiLyIpLmNvbmNhdChjaGFydE5hbWUpOwp9CmV4cG9ydCBmdW5jdGlvbiBwYXJzZUtleShrZXkpIHsKICB2YXIgcGFydHMgPSBrZXkuc3BsaXQoJy8nKTsKICByZXR1cm4gewogICAgcmVwb1R5cGU6IHBhcnRzWzBdLAogICAgcmVwb05hbWU6IHBhcnRzWzFdLAogICAgY2hhcnROYW1lOiBwYXJ0c1syXQogIH07Cn0KZnVuY3Rpb24gYWRkQ2hhcnQoY3R4LCBtYXAsIGNoYXJ0LCByZXBvKSB7CiAgdmFyIF9jaGFydCRhbm5vdGF0aW9ucywgX2NoYXJ0JGFubm90YXRpb25zMiwgX2NoYXJ0JGFubm90YXRpb25zMTM7CiAgdmFyIHJlcG9UeXBlID0gcmVwby50eXBlID09PSBDQVRBTE9HLkNMVVNURVJfUkVQTyA/ICdjbHVzdGVyJyA6ICduYW1lc3BhY2UnOwogIHZhciByZXBvTmFtZSA9IHJlcG8ubWV0YWRhdGEubmFtZTsKICB2YXIga2V5ID0gZ2VuZXJhdGVLZXkocmVwb1R5cGUsIHJlcG9OYW1lLCBjaGFydC5uYW1lKTsKICB2YXIgb2JqID0gbWFwW2tleV07CiAgdmFyIGNlcnRpZmllZEFubm90YXRpb24gPSAoX2NoYXJ0JGFubm90YXRpb25zID0gY2hhcnQuYW5ub3RhdGlvbnMpID09PSBudWxsIHx8IF9jaGFydCRhbm5vdGF0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2NoYXJ0JGFubm90YXRpb25zW0NBVEFMT0dfQU5OT1RBVElPTlMuQ0VSVElGSUVEXTsKICB2YXIgY2VydGlmaWVkID0gbnVsbDsKICB2YXIgc2lkZUxhYmVsID0gbnVsbDsKICBpZiAocmVwby5pc1JhbmNoZXIpIHsKICAgIGNlcnRpZmllZCA9IENBVEFMT0dfQU5OT1RBVElPTlMuX1JBTkNIRVI7CiAgfSBlbHNlIGlmIChyZXBvLmlzUGFydG5lcikgewogICAgY2VydGlmaWVkID0gQ0FUQUxPR19BTk5PVEFUSU9OUy5fUEFSVE5FUjsKICB9IGVsc2UgewogICAgY2VydGlmaWVkID0gQ0FUQUxPR19BTk5PVEFUSU9OUy5fT1RIRVI7CiAgfQogIGlmIChjaGFydC5kZXByZWNhdGVkKSB7CiAgICBzaWRlTGFiZWwgPSBERVBSRUNBVEVEOwogIH0gZWxzZSBpZiAoKF9jaGFydCRhbm5vdGF0aW9uczIgPSBjaGFydC5hbm5vdGF0aW9ucykgIT09IG51bGwgJiYgX2NoYXJ0JGFubm90YXRpb25zMiAhPT0gdm9pZCAwICYmIF9jaGFydCRhbm5vdGF0aW9uczJbQ0FUQUxPR19BTk5PVEFUSU9OUy5FWFBFUklNRU5UQUxdKSB7CiAgICBzaWRlTGFiZWwgPSBFWFBFUklNRU5UQUw7CiAgfSBlbHNlIGlmICghcmVwby5pc1JhbmNoZXJTb3VyY2UgJiYgY2VydGlmaWVkQW5ub3RhdGlvbiAmJiBjZXJ0aWZpZWRBbm5vdGF0aW9uICE9PSBDQVRBTE9HX0FOTk9UQVRJT05TLl9SQU5DSEVSICYmIGNlcnRpZmllZCA9PT0gQ0FUQUxPR19BTk5PVEFUSU9OUy5fT1RIRVIpIHsKICAgIC8vIEJ1dCBhbnlib2R5IGNhbiBzZXQgdGhlIHNpZGUgbGFiZWwKICAgIHNpZGVMYWJlbCA9IGNlcnRpZmllZEFubm90YXRpb247CiAgfQogIGlmICghb2JqKSB7CiAgICB2YXIgX2NoYXJ0JGFubm90YXRpb25zMywgX2NoYXJ0JGFubm90YXRpb25zNCwgX2NoYXJ0JGFubm90YXRpb25zNSwgX2NoYXJ0JGFubm90YXRpb25zNiwgX2NoYXJ0JGFubm90YXRpb25zNywgX2NoYXJ0JGFubm90YXRpb25zOCwgX2NoYXJ0JGFubm90YXRpb25zOSwgX2NoYXJ0JGFubm90YXRpb25zMTAsIF9jaGFydCRhbm5vdGF0aW9uczExLCBfY2hhcnQkYW5ub3RhdGlvbnMxMjsKICAgIGlmIChjdHgpIHt9CiAgICBvYmogPSBjbGFzc2lmeShjdHgsIHsKICAgICAga2V5OiBrZXksCiAgICAgIHR5cGU6ICdjaGFydCcsCiAgICAgIGlkOiBrZXksCiAgICAgIGNlcnRpZmllZDogY2VydGlmaWVkLAogICAgICBzaWRlTGFiZWw6IHNpZGVMYWJlbCwKICAgICAgcmVwb1R5cGU6IHJlcG9UeXBlLAogICAgICByZXBvTmFtZTogcmVwb05hbWUsCiAgICAgIHJlcG9OYW1lRGlzcGxheTogY3R4LnJvb3RHZXR0ZXJzWydpMThuL3dpdGhGYWxsYmFjayddKCJjYXRhbG9nLnJlcG8ubmFtZS5cIiIuY29uY2F0KHJlcG9OYW1lLCAiXCIiKSwgbnVsbCwgcmVwb05hbWUpLAogICAgICBjZXJ0aWZpZWRTb3J0OiBDRVJUSUZJRURfU09SVFNbY2VydGlmaWVkXSB8fCA5OSwKICAgICAgaWNvbjogY2hhcnQuaWNvbiwKICAgICAgY29sb3I6IHJlcG8uY29sb3IsCiAgICAgIGNoYXJ0VHlwZTogKChfY2hhcnQkYW5ub3RhdGlvbnMzID0gY2hhcnQuYW5ub3RhdGlvbnMpID09PSBudWxsIHx8IF9jaGFydCRhbm5vdGF0aW9uczMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jaGFydCRhbm5vdGF0aW9uczNbQ0FUQUxPR19BTk5PVEFUSU9OUy5UWVBFXSkgfHwgQ0FUQUxPR19BTk5PVEFUSU9OUy5fQVBQLAogICAgICBjaGFydE5hbWU6IGNoYXJ0Lm5hbWUsCiAgICAgIGNoYXJ0TmFtZURpc3BsYXk6ICgoX2NoYXJ0JGFubm90YXRpb25zNCA9IGNoYXJ0LmFubm90YXRpb25zKSA9PT0gbnVsbCB8fCBfY2hhcnQkYW5ub3RhdGlvbnM0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfY2hhcnQkYW5ub3RhdGlvbnM0W0NBVEFMT0dfQU5OT1RBVElPTlMuRElTUExBWV9OQU1FXSkgfHwgY2hhcnQubmFtZSwKICAgICAgY2hhcnREZXNjcmlwdGlvbjogY2hhcnQuZGVzY3JpcHRpb24sCiAgICAgIGZlYXR1cmVkOiAoX2NoYXJ0JGFubm90YXRpb25zNSA9IGNoYXJ0LmFubm90YXRpb25zKSA9PT0gbnVsbCB8fCBfY2hhcnQkYW5ub3RhdGlvbnM1ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfY2hhcnQkYW5ub3RhdGlvbnM1W0NBVEFMT0dfQU5OT1RBVElPTlMuRkVBVFVSRURdLAogICAgICByZXBvS2V5OiByZXBvLl9rZXksCiAgICAgIHZlcnNpb25zOiBbXSwKICAgICAgY2F0ZWdvcmllczogZmlsdGVyQ2F0ZWdvcmllcyhjaGFydC5rZXl3b3JkcyksCiAgICAgIGRlcHJlY2F0ZWQ6ICEhY2hhcnQuZGVwcmVjYXRlZCwKICAgICAgZXhwZXJpbWVudGFsOiAhISgoX2NoYXJ0JGFubm90YXRpb25zNiA9IGNoYXJ0LmFubm90YXRpb25zKSAhPT0gbnVsbCAmJiBfY2hhcnQkYW5ub3RhdGlvbnM2ICE9PSB2b2lkIDAgJiYgX2NoYXJ0JGFubm90YXRpb25zNltDQVRBTE9HX0FOTk9UQVRJT05TLkVYUEVSSU1FTlRBTF0pLAogICAgICBoaWRkZW46ICEhKChfY2hhcnQkYW5ub3RhdGlvbnM3ID0gY2hhcnQuYW5ub3RhdGlvbnMpICE9PSBudWxsICYmIF9jaGFydCRhbm5vdGF0aW9uczcgIT09IHZvaWQgMCAmJiBfY2hhcnQkYW5ub3RhdGlvbnM3W0NBVEFMT0dfQU5OT1RBVElPTlMuSElEREVOXSksCiAgICAgIHRhcmdldE5hbWVzcGFjZTogKF9jaGFydCRhbm5vdGF0aW9uczggPSBjaGFydC5hbm5vdGF0aW9ucykgPT09IG51bGwgfHwgX2NoYXJ0JGFubm90YXRpb25zOCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2NoYXJ0JGFubm90YXRpb25zOFtDQVRBTE9HX0FOTk9UQVRJT05TLk5BTUVTUEFDRV0sCiAgICAgIHRhcmdldE5hbWU6IChfY2hhcnQkYW5ub3RhdGlvbnM5ID0gY2hhcnQuYW5ub3RhdGlvbnMpID09PSBudWxsIHx8IF9jaGFydCRhbm5vdGF0aW9uczkgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jaGFydCRhbm5vdGF0aW9uczlbQ0FUQUxPR19BTk5PVEFUSU9OUy5SRUxFQVNFX05BTUVdLAogICAgICBzY29wZTogKF9jaGFydCRhbm5vdGF0aW9uczEwID0gY2hhcnQuYW5ub3RhdGlvbnMpID09PSBudWxsIHx8IF9jaGFydCRhbm5vdGF0aW9uczEwID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfY2hhcnQkYW5ub3RhdGlvbnMxMFtDQVRBTE9HX0FOTk9UQVRJT05TLlNDT1BFXSwKICAgICAgcHJvdmlkZXM6IFtdLAogICAgICB3aW5kb3dzSW5jb21wYXRpYmxlOiAhKCgoX2NoYXJ0JGFubm90YXRpb25zMTEgPSBjaGFydC5hbm5vdGF0aW9ucykgPT09IG51bGwgfHwgX2NoYXJ0JGFubm90YXRpb25zMTEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jaGFydCRhbm5vdGF0aW9uczExW0NBVEFMT0dfQU5OT1RBVElPTlMuUEVSTUlUVEVEX09TXSkgfHwgJycpLmluY2x1ZGVzKCd3aW5kb3dzJyksCiAgICAgIGRlcGxveXNPbldpbmRvd3M6ICgoKF9jaGFydCRhbm5vdGF0aW9uczEyID0gY2hhcnQuYW5ub3RhdGlvbnMpID09PSBudWxsIHx8IF9jaGFydCRhbm5vdGF0aW9uczEyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfY2hhcnQkYW5ub3RhdGlvbnMxMltDQVRBTE9HX0FOTk9UQVRJT05TLkRFUExPWUVEX09TXSkgfHwgJycpLmluY2x1ZGVzKCd3aW5kb3dzJykKICAgIH0pOwogICAgbWFwW2tleV0gPSBvYmo7CiAgfQogIGNoYXJ0LmtleSA9ICIiLmNvbmNhdChrZXksICIvIikuY29uY2F0KGNoYXJ0LnZlcnNpb24pOwogIGNoYXJ0LnJlcG9UeXBlID0gcmVwb1R5cGU7CiAgY2hhcnQucmVwb05hbWUgPSByZXBvTmFtZTsKICB2YXIgcHJvdmlkZXMgPSAoX2NoYXJ0JGFubm90YXRpb25zMTMgPSBjaGFydC5hbm5vdGF0aW9ucykgPT09IG51bGwgfHwgX2NoYXJ0JGFubm90YXRpb25zMTMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jaGFydCRhbm5vdGF0aW9uczEzW0NBVEFMT0dfQU5OT1RBVElPTlMuUFJPVklERVNdOwogIGlmIChwcm92aWRlcykgewogICAgYWRkT2JqZWN0KG9iai5wcm92aWRlcywgcHJvdmlkZXMpOwogIH0KICBvYmoudmVyc2lvbnMucHVzaChjaGFydCk7Cn0KZnVuY3Rpb24gcHJlZmVyU2FtZVJlcG8obWF0Y2hpbmcsIHJlcG9UeXBlLCByZXBvTmFtZSkgewogIG1hdGNoaW5nLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsKICAgIHZhciBhU2FtZVJlcG8gPSBhLnJlcG9UeXBlID09PSByZXBvVHlwZSAmJiBhLnJlcG9OYW1lID09PSByZXBvTmFtZSA/IDEgOiAwOwogICAgdmFyIGJTYW1lUmVwbyA9IGIucmVwb1R5cGUgPT09IHJlcG9UeXBlICYmIGIucmVwb05hbWUgPT09IHJlcG9OYW1lID8gMSA6IDA7CiAgICBpZiAoYVNhbWVSZXBvICYmICFiU2FtZVJlcG8pIHsKICAgICAgcmV0dXJuIC0xOwogICAgfSBlbHNlIGlmICghYVNhbWVSZXBvICYmIGJTYW1lUmVwbykgewogICAgICByZXR1cm4gMTsKICAgIH0KICAgIHJldHVybiAwOwogIH0pOwp9CmZ1bmN0aW9uIG5vcm1hbGl6ZVZlcnNpb24odikgewogIHJldHVybiB2LnJlcGxhY2UoL152L2ksICcnKS50b0xvd2VyQ2FzZSgpLnRyaW0oKTsKfQpmdW5jdGlvbiBmaWx0ZXJDYXRlZ29yaWVzKGNhdGVnb3JpZXMpIHsKICBjYXRlZ29yaWVzID0gKGNhdGVnb3JpZXMgfHwgW10pLm1hcChmdW5jdGlvbiAoeCkgewogICAgcmV0dXJuIG5vcm1hbGl6ZUNhdGVnb3J5KHgpOwogIH0pOwogIHZhciBvdXQgPSBbXTsKICBmb3IgKHZhciBfaTIgPSAwLCBfQUxMT1dFRF9DQVRFR09SSUVTID0gQUxMT1dFRF9DQVRFR09SSUVTOyBfaTIgPCBfQUxMT1dFRF9DQVRFR09SSUVTLmxlbmd0aDsgX2kyKyspIHsKICAgIHZhciBjID0gX0FMTE9XRURfQ0FURUdPUklFU1tfaTJdOwogICAgaWYgKGNhdGVnb3JpZXMuaW5jbHVkZXMobm9ybWFsaXplQ2F0ZWdvcnkoYykpKSB7CiAgICAgIGFkZE9iamVjdChvdXQsIGMpOwogICAgfQogIH0KICByZXR1cm4gb3V0Owp9CmZ1bmN0aW9uIG5vcm1hbGl6ZUNhdGVnb3J5KGMpIHsKICByZXR1cm4gYy5yZXBsYWNlKC9ccysvZywgJycpLnRvTG93ZXJDYXNlKCk7Cn0KCi8qCmNhdGFsb2cuY2F0dGxlLmlvL2RlcGx5cy1vbi1vczogT1MgLT4gcmVxdWlyZXMgZ2xvYmFsLmNhdHRsZS5PUy5lbmFibGVkOiB0cnVlCiAgZGVmYXVsdDogbm90aGluZwpjYXRhbG9nLmNhdHRsZS5pby9wZXJtaXRzLW9zOiBPUyAtPiB3aWxsIGJyZWFrIG9uIGNsdXN0ZXJzIGNvbnRhaW5pbmcgbm9kZXMgdGhhdCBhcmUgbm90IE9TCiAgZGVmYXVsdCBpZiBub3QgZm91bmQ6IGNhdGFsb2cuY2F0dGxlLmlvL3Blcm1pdHMtb3M6IGxpbnV4CiovCmV4cG9ydCBmdW5jdGlvbiBjb21wYXRpYmxlVmVyc2lvbnNGb3IoY2hhcnQsIG9zKSB7CiAgdmFyIGluY2x1ZGVQcmVyZWxlYXNlID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiB0cnVlOwogIHZhciB2ZXJzaW9ucyA9IGNoYXJ0LnZlcnNpb25zOwogIGlmIChvcyAmJiAhaXNBcnJheShvcykpIHsKICAgIG9zID0gW29zXTsKICB9CiAgcmV0dXJuIHZlcnNpb25zLmZpbHRlcihmdW5jdGlvbiAodmVyKSB7CiAgICB2YXIgX3ZlciRhbm5vdGF0aW9uczsKICAgIHZhciBvc1Blcm1pdHRlZCA9ICgodmVyID09PSBudWxsIHx8IHZlciA9PT0gdm9pZCAwIHx8IChfdmVyJGFubm90YXRpb25zID0gdmVyLmFubm90YXRpb25zKSA9PT0gbnVsbCB8fCBfdmVyJGFubm90YXRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdmVyJGFubm90YXRpb25zW0NBVEFMT0dfQU5OT1RBVElPTlMuUEVSTUlUVEVEX09TXSkgfHwgTElOVVgpLnNwbGl0KCcsJyk7CiAgICBpZiAoIWluY2x1ZGVQcmVyZWxlYXNlICYmIGlzUHJlcmVsZWFzZSh2ZXIudmVyc2lvbikpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgaWYgKCFvcyB8fCBkaWZmZXJlbmNlKG9zLCBvc1Blcm1pdHRlZCkubGVuZ3RoID09PSAwKSB7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgcmV0dXJuIGZhbHNlOwogIH0pOwp9CmV4cG9ydCBmdW5jdGlvbiBmaWx0ZXJBbmRBcnJhbmdlQ2hhcnRzKGNoYXJ0cykgewogIHZhciBfcmVmMTYgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9LAogICAgX3JlZjE2JGNsdXN0ZXJQcm92aWRlID0gX3JlZjE2LmNsdXN0ZXJQcm92aWRlciwKICAgIGNsdXN0ZXJQcm92aWRlciA9IF9yZWYxNiRjbHVzdGVyUHJvdmlkZSA9PT0gdm9pZCAwID8gJycgOiBfcmVmMTYkY2x1c3RlclByb3ZpZGUsCiAgICBvcGVyYXRpbmdTeXN0ZW1zID0gX3JlZjE2Lm9wZXJhdGluZ1N5c3RlbXMsCiAgICBjYXRlZ29yeSA9IF9yZWYxNi5jYXRlZ29yeSwKICAgIHNlYXJjaFF1ZXJ5ID0gX3JlZjE2LnNlYXJjaFF1ZXJ5LAogICAgX3JlZjE2JHNob3dEZXByZWNhdGVkID0gX3JlZjE2LnNob3dEZXByZWNhdGVkLAogICAgc2hvd0RlcHJlY2F0ZWQgPSBfcmVmMTYkc2hvd0RlcHJlY2F0ZWQgPT09IHZvaWQgMCA/IGZhbHNlIDogX3JlZjE2JHNob3dEZXByZWNhdGVkLAogICAgX3JlZjE2JHNob3dIaWRkZW4gPSBfcmVmMTYuc2hvd0hpZGRlbiwKICAgIHNob3dIaWRkZW4gPSBfcmVmMTYkc2hvd0hpZGRlbiA9PT0gdm9pZCAwID8gZmFsc2UgOiBfcmVmMTYkc2hvd0hpZGRlbiwKICAgIF9yZWYxNiRzaG93UHJlcmVsZWFzZSA9IF9yZWYxNi5zaG93UHJlcmVsZWFzZSwKICAgIHNob3dQcmVyZWxlYXNlID0gX3JlZjE2JHNob3dQcmVyZWxlYXNlID09PSB2b2lkIDAgPyB0cnVlIDogX3JlZjE2JHNob3dQcmVyZWxlYXNlLAogICAgX3JlZjE2JGhpZGVSZXBvcyA9IF9yZWYxNi5oaWRlUmVwb3MsCiAgICBoaWRlUmVwb3MgPSBfcmVmMTYkaGlkZVJlcG9zID09PSB2b2lkIDAgPyBbXSA6IF9yZWYxNiRoaWRlUmVwb3MsCiAgICBfcmVmMTYkc2hvd1JlcG9zID0gX3JlZjE2LnNob3dSZXBvcywKICAgIHNob3dSZXBvcyA9IF9yZWYxNiRzaG93UmVwb3MgPT09IHZvaWQgMCA/IFtdIDogX3JlZjE2JHNob3dSZXBvcywKICAgIF9yZWYxNiRzaG93VHlwZXMgPSBfcmVmMTYuc2hvd1R5cGVzLAogICAgc2hvd1R5cGVzID0gX3JlZjE2JHNob3dUeXBlcyA9PT0gdm9pZCAwID8gW10gOiBfcmVmMTYkc2hvd1R5cGVzLAogICAgX3JlZjE2JGhpZGVUeXBlcyA9IF9yZWYxNi5oaWRlVHlwZXMsCiAgICBoaWRlVHlwZXMgPSBfcmVmMTYkaGlkZVR5cGVzID09PSB2b2lkIDAgPyBbXSA6IF9yZWYxNiRoaWRlVHlwZXM7CiAgdmFyIG91dCA9IGNoYXJ0cy5maWx0ZXIoZnVuY3Rpb24gKGMpIHsKICAgIGlmIChjLmRlcHJlY2F0ZWQgJiYgIXNob3dEZXByZWNhdGVkIHx8IGMuaGlkZGVuICYmICFzaG93SGlkZGVuIHx8IGhpZGVSZXBvcyAhPT0gbnVsbCAmJiBoaWRlUmVwb3MgIT09IHZvaWQgMCAmJiBoaWRlUmVwb3MubGVuZ3RoICYmIGhpZGVSZXBvcy5pbmNsdWRlcyhjLnJlcG9LZXkpIHx8IHNob3dSZXBvcyAhPT0gbnVsbCAmJiBzaG93UmVwb3MgIT09IHZvaWQgMCAmJiBzaG93UmVwb3MubGVuZ3RoICYmICFzaG93UmVwb3MuaW5jbHVkZXMoYy5yZXBvS2V5KSB8fCBoaWRlVHlwZXMgIT09IG51bGwgJiYgaGlkZVR5cGVzICE9PSB2b2lkIDAgJiYgaGlkZVR5cGVzLmxlbmd0aCAmJiBoaWRlVHlwZXMuaW5jbHVkZXMoYy5jaGFydFR5cGUpIHx8IHNob3dUeXBlcyAhPT0gbnVsbCAmJiBzaG93VHlwZXMgIT09IHZvaWQgMCAmJiBzaG93VHlwZXMubGVuZ3RoICYmICFzaG93VHlwZXMuaW5jbHVkZXMoYy5jaGFydFR5cGUpIHx8IGMuY2hhcnROYW1lID09PSAncmFuY2hlci13aW5zLXVwZ3JhZGVyJyAmJiBjbHVzdGVyUHJvdmlkZXIgPT09ICdya2UyJykgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgICBpZiAoY29tcGF0aWJsZVZlcnNpb25zRm9yKGMsIG9wZXJhdGluZ1N5c3RlbXMsIHNob3dQcmVyZWxlYXNlKS5sZW5ndGggPD0gMCkgewogICAgICAvLyBUaGVyZSdzIG5vIHZlcnNpb25zIGNvbXBhdGlibGUgd2l0aCB0aGUgc3BlY2lmaWVkIG9zCiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIGlmIChjYXRlZ29yeSAmJiAhYy5jYXRlZ29yaWVzLmluY2x1ZGVzKGNhdGVnb3J5KSkgewogICAgICAvLyBUaGUgY2F0ZWdvcnkgZmlsdGVyIGRvZXNuJ3QgbWF0Y2gKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgaWYgKHNlYXJjaFF1ZXJ5KSB7CiAgICAgIC8vIFRoZSBzZWFyY2ggZmlsdGVyIGRvZXNuJ3QgbWF0Y2gKICAgICAgdmFyIHNlYXJjaFRva2VucyA9IHNlYXJjaFF1ZXJ5LnNwbGl0KC9ccypbLCBdXHMqLykubWFwKGZ1bmN0aW9uICh4KSB7CiAgICAgICAgcmV0dXJuIGVuc3VyZVJlZ2V4KHgsIGZhbHNlKTsKICAgICAgfSk7CiAgICAgIHZhciBfaXRlcmF0b3I0ID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIoc2VhcmNoVG9rZW5zKSwKICAgICAgICBfc3RlcDQ7CiAgICAgIHRyeSB7CiAgICAgICAgZm9yIChfaXRlcmF0b3I0LnMoKTsgIShfc3RlcDQgPSBfaXRlcmF0b3I0Lm4oKSkuZG9uZTspIHsKICAgICAgICAgIHZhciB0b2tlbiA9IF9zdGVwNC52YWx1ZTsKICAgICAgICAgIHZhciBjaGFydERlc2NyaXB0aW9uID0gYy5jaGFydERlc2NyaXB0aW9uIHx8ICcnOwogICAgICAgICAgaWYgKCFjLmNoYXJ0TmFtZURpc3BsYXkubWF0Y2godG9rZW4pICYmICFjaGFydERlc2NyaXB0aW9uLm1hdGNoKHRva2VuKSkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBfaXRlcmF0b3I0LmUoZXJyKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICBfaXRlcmF0b3I0LmYoKTsKICAgICAgfQogICAgfQogICAgcmV0dXJuIHRydWU7CiAgfSk7CiAgcmV0dXJuIHNvcnRCeShvdXQsIFsnY2VydGlmaWVkU29ydCcsICdyZXBvTmFtZScsICdjaGFydE5hbWVEaXNwbGF5J10pOwp9"},{"version":3,"names":["CATALOG","EXPERIMENTAL","DEPRECATED","CATALOG_ANNOTATIONS","addParams","allHash","allHashSettled","clone","findBy","addObject","filterBy","isArray","stringify","classify","sortBy","importChart","ensureRegex","isPrerelease","difference","lookup","ALLOWED_CATEGORIES","CERTIFIED_SORTS","_defineProperty","_RANCHER","_EXPERIMENTAL","_PARTNER","WINDOWS","LINUX","state","loaded","clusterRepos","namespacedRepos","charts","versionInfos","config","namespace","inStore","undefined","getters","isLoaded","repo","_key","repos","clustered","namespaced","concat","_toConsumableArray","rawCharts","_ref","repoType","repoName","ary","rootState","rootGetters","_rootGetters$currentP","repoKeys","map","x","cluster","out","Object","values","filter","chart","includes","repoKey","scope","_ref2","key","chartName","preferRepoType","preferRepoName","includeHidden","showDeprecated","parsed","parseKey","matching","deprecated","hidden","length","preferSameRepo","isInstalled","_ref3","gvr","name","version","idx","indexOf","substr","schema","attributes","versionSatisfying","_ref4","constraint","chartVersion","wantVersion","normalizeVersion","toLowerCase","trim","versions","find","v","versionProviding","_ref5","provides","_version$annotations","annotations","PROVIDES","_ref6","versionName","errors","haveComponent","importComponent","chartSteps","steps","stepsPath","allPaths","require","context","keys","path","startsWith","forEach","push","replace","component","e","console","warn","obj","_obj$metadata","type","metadata","mutations","reset","currentState","newState","assign","setInStore","setRepos","_ref7","setCharts","_ref8","_ref8$errors","_ref8$loaded","_iterator","_createForOfIteratorHelper","_step","s","n","done","value","err","f","setVersions","cacheVersion","_ref9","info","actions","load","ctx","_arguments","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_hash$cluster","_ref10","force","commit","dispatch","promises","hash","_iterator2","_step2","_repo","res","_i","_Object$keys","k","_iterator3","_step3","entry","wrap","_callee$","_context","prev","next","CLUSTER_REPO","root","REPO","sent","_repo$metadata","HIDDEN_REPO","canLoad","followLink","status","reason","abrupt","entries","addChart","stop","refresh","_ref11","_callee2","_callee2$","_context2","Promise","allSettled","getVersionInfo","_ref12","_ref13","_callee3","_callee3$","_context3","Error","url","links","rehydrate","_ref14","_ref15","_slicedToArray","__rehydrate","generateKey","parts","split","_chart$annotations","_chart$annotations2","_chart$annotations13","certifiedAnnotation","CERTIFIED","certified","sideLabel","isRancher","isPartner","_OTHER","isRancherSource","_chart$annotations3","_chart$annotations4","_chart$annotations5","_chart$annotations6","_chart$annotations7","_chart$annotations8","_chart$annotations9","_chart$annotations10","_chart$annotations11","_chart$annotations12","id","repoNameDisplay","certifiedSort","icon","color","chartType","TYPE","_APP","chartNameDisplay","DISPLAY_NAME","chartDescription","description","featured","FEATURED","categories","filterCategories","keywords","experimental","HIDDEN","targetNamespace","NAMESPACE","targetName","RELEASE_NAME","SCOPE","windowsIncompatible","PERMITTED_OS","deploysOnWindows","DEPLOYED_OS","sort","a","b","aSameRepo","bSameRepo","normalizeCategory","_i2","_ALLOWED_CATEGORIES","c","compatibleVersionsFor","os","includePrerelease","ver","_ver$annotations","osPermitted","filterAndArrangeCharts","_ref16","_ref16$clusterProvide","clusterProvider","operatingSystems","category","searchQuery","_ref16$showDeprecated","_ref16$showHidden","showHidden","_ref16$showPrerelease","showPrerelease","_ref16$hideRepos","hideRepos","_ref16$showRepos","showRepos","_ref16$showTypes","showTypes","_ref16$hideTypes","hideTypes","searchTokens","_iterator4","_step4","token","match"],"sources":["/home/ubuntu/suseconf/node_modules/@rancher/shell/store/catalog.js"],"sourcesContent":["import { CATALOG, EXPERIMENTAL, DEPRECATED } from '@shell/config/types';\nimport { CATALOG as CATALOG_ANNOTATIONS } from '@shell/config/labels-annotations';\nimport { addParams } from '@shell/utils/url';\nimport { allHash, allHashSettled } from '@shell/utils/promise';\nimport { clone } from '@shell/utils/object';\nimport { findBy, addObject, filterBy, isArray } from '@shell/utils/array';\nimport { stringify } from '@shell/utils/error';\nimport { classify } from '@shell/plugins/dashboard-store/classify';\nimport { sortBy } from '@shell/utils/sort';\nimport { importChart } from '@shell/utils/dynamic-importer';\nimport { ensureRegex } from '@shell/utils/string';\nimport { isPrerelease } from '@shell/utils/version';\nimport difference from 'lodash/difference';\nimport { lookup } from '@shell/plugins/dashboard-store/model-loader';\n\nconst ALLOWED_CATEGORIES = [\n  'Storage',\n  'Monitoring',\n  'Database',\n  'Repository',\n  'Security',\n  'Networking',\n  'PaaS',\n  'Infrastructure',\n  'Applications',\n];\n\nconst CERTIFIED_SORTS = {\n  [CATALOG_ANNOTATIONS._RANCHER]:      1,\n  [CATALOG_ANNOTATIONS._EXPERIMENTAL]: 1,\n  [CATALOG_ANNOTATIONS._PARTNER]:      2,\n  other:                               3,\n};\n\nexport const WINDOWS = 'windows';\nexport const LINUX = 'linux';\n\nexport const state = function() {\n  return {\n    loaded:          {},\n    clusterRepos:    [],\n    namespacedRepos: [],\n    charts:          {},\n    versionInfos:    {},\n    config:          { namespace: 'catalog' },\n    inStore:         undefined,\n  };\n};\n\nexport const getters = {\n  isLoaded(state) {\n    return (repo) => {\n      return !!state.loaded[repo._key];\n    };\n  },\n\n  repos(state) {\n    const clustered = state.clusterRepos || [];\n    const namespaced = state.namespacedRepos || [];\n\n    return [...clustered, ...namespaced];\n  },\n\n  // Raw charts\n  rawCharts(state) {\n    return state.charts;\n  },\n\n  repo(state, getters) {\n    return ({ repoType, repoName }) => {\n      const ary = (repoType === 'cluster' ? state.clusterRepos : state.namespacedRepos);\n\n      return findBy(ary, 'metadata.name', repoName);\n    };\n  },\n\n  charts(state, getters, rootState, rootGetters) {\n    const repoKeys = getters.repos.map((x) => x._key);\n    let cluster = rootGetters['currentCluster'];\n\n    if ( rootGetters['currentProduct']?.inStore === 'management' ) {\n      cluster = null;\n    }\n\n    // Filter out charts for repos that are no longer in the store, rather\n    // than trying to clear them when a repo is removed.\n    // And ones that are for the wrong kind of cluster\n    const out = Object.values(state.charts).filter((chart) => {\n      if ( !repoKeys.includes(chart.repoKey) ) {\n        return false;\n      }\n\n      if ( cluster && chart.scope && chart.scope !== cluster.scope ) {\n        return false;\n      }\n\n      return true;\n    });\n\n    return sortBy(out, ['certifiedSort', 'repoName', 'chartName']);\n  },\n\n  chart(state, getters) {\n    return ({\n      key, repoType, repoName, chartName, preferRepoType, preferRepoName, includeHidden, showDeprecated\n    }) => {\n      if ( key && !repoType && !repoName && !chartName) {\n        const parsed = parseKey(key);\n\n        repoType = parsed.repoType;\n        repoName = parsed.repoName;\n        chartName = parsed.chartName;\n      }\n\n      let matching = filterBy(getters.charts, {\n        repoType,\n        repoName,\n        chartName,\n        deprecated: !!showDeprecated,\n      });\n\n      if ( includeHidden === false ) {\n        matching = matching.filter((x) => !x.hidden);\n      }\n\n      if ( !matching.length ) {\n        return;\n      }\n\n      if ( preferRepoType && preferRepoName ) {\n        preferSameRepo(matching, preferRepoType, preferRepoName);\n      }\n\n      return matching[0];\n    };\n  },\n\n  isInstalled(state, getters, rootState, rootGetters) {\n    return ({ gvr }) => {\n      let name, version;\n      const idx = gvr.indexOf('/');\n\n      if ( idx > 0 ) {\n        name = gvr.substr(0, idx);\n        version = gvr.substr(idx + 1);\n      } else {\n        name = gvr;\n      }\n\n      const inStore = rootGetters['currentProduct'].inStore;\n      const schema = rootGetters[`${ inStore }/schemaFor`](name);\n\n      if ( schema && (!version || schema.attributes.version === version) ) {\n        return true;\n      }\n\n      return false;\n    };\n  },\n\n  versionSatisfying(state, getters) {\n    return ({\n      repoType, repoName, constraint, chartVersion\n    }) => {\n      let name, wantVersion;\n      const idx = constraint.indexOf('=');\n\n      if ( idx > 0 ) {\n        name = constraint.substr(0, idx);\n        wantVersion = normalizeVersion(constraint.substr(idx + 1));\n      } else {\n        name = constraint;\n        wantVersion = 'latest';\n      }\n\n      name = name.toLowerCase().trim();\n      chartVersion = normalizeVersion(chartVersion);\n\n      const matching = getters.charts.filter((chart) => chart.chartName.toLowerCase().trim() === name);\n\n      if ( !matching.length ) {\n        return;\n      }\n\n      if ( repoType && repoName ) {\n        preferSameRepo(matching, repoType, repoName);\n      }\n\n      const chart = matching[0];\n      let version;\n\n      if ( wantVersion === 'latest' ) {\n        version = chart.versions[0];\n      } else if ( wantVersion === 'match' || wantVersion === 'matching' ) {\n        version = chart.versions.find((v) => normalizeVersion(v.version) === chartVersion);\n      } else {\n        version = chart.versions.find((v) => normalizeVersion(v.version) === wantVersion);\n      }\n\n      if ( version ) {\n        return clone(version);\n      }\n    };\n  },\n\n  versionProviding(state, getters) {\n    return ({ repoType, repoName, gvr }) => {\n      const matching = getters.charts.filter((chart) => chart.provides.includes(gvr) );\n\n      if ( !matching.length ) {\n        return;\n      }\n\n      if ( repoType && repoName ) {\n        preferSameRepo(matching, repoType, repoName);\n      }\n\n      const version = matching[0].versions.find((version) => version.annotations?.[CATALOG_ANNOTATIONS.PROVIDES] === gvr);\n\n      if ( version ) {\n        return clone(version);\n      }\n    };\n  },\n\n  version(state, getters) {\n    return ({\n      repoType, repoName, chartName, versionName\n    }) => {\n      const chart = getters['chart']({\n        repoType, repoName, chartName\n      });\n\n      if ( !chart ) {\n        return null;\n      }\n\n      let version;\n\n      if ( versionName ) {\n        version = findBy(chart.versions, 'version', versionName);\n      } else {\n        version = chart.versions[0];\n      }\n\n      if ( version ) {\n        return clone(version);\n      }\n    };\n  },\n\n  errors(state) {\n    return state.errors || [];\n  },\n\n  haveComponent() {\n    return (name) => {\n      return getters['type-map/hasCustomChart'](name);\n    };\n  },\n\n  importComponent(state, getters) {\n    return (name) => {\n      return getters['type-map/importChart'](name);\n    };\n  },\n\n  chartSteps(state, getters) {\n    return (name) => {\n      const steps = [];\n\n      const stepsPath = `./${ name }/steps/`;\n      // require.context only takes literals, so find all candidate step files and filter out\n      const allPaths = require.context('@shell/chart', true, /\\.vue$/).keys();\n\n      allPaths\n        .filter((path) => path.startsWith(stepsPath))\n        .forEach((path) => {\n          try {\n            steps.push({\n              name:      path.replace(stepsPath, ''),\n              component: importChart(path.substr(2, path.length)),\n            });\n          } catch (e) {\n            console.warn(`Failed to load step component ${ path } for chart ${ name }`, e); // eslint-disable-line no-console\n          }\n        });\n\n      return steps;\n    };\n  },\n\n  inStore(state) {\n    return state.inStore;\n  },\n\n  classify: (state, getters, rootState) => (obj) => {\n    return lookup(state.config.namespace, obj?.type, obj?.metadata?.name, rootState);\n  },\n};\n\nexport const mutations = {\n  reset(currentState) {\n    const newState = state();\n\n    Object.assign(currentState, newState);\n  },\n\n  setInStore(state, inStore) {\n    state.inStore = inStore;\n  },\n\n  setRepos(state, { cluster, namespaced }) {\n    state.clusterRepos = cluster;\n    state.namespacedRepos = namespaced;\n  },\n\n  setCharts(state, { charts, errors = [], loaded = [] }) {\n    state.charts = charts;\n    state.errors = errors;\n\n    for ( const repo of loaded ) {\n      state.loaded[repo._key] = true;\n    }\n  },\n\n  setVersions(state, versions) {\n    state.versionInfos = versions;\n  },\n\n  cacheVersion(state, { key, info }) {\n    state.versionInfos[key] = info;\n  }\n};\n\nexport const actions = {\n  /**\n   * force: Always refresh catalog's helm repo by re-fetching index.yaml\n   *\n   * reset: clear existing charts and version cache\n   */\n  async load(ctx, { force, reset } = {}) {\n    const {\n      state, getters, rootGetters, commit, dispatch\n    } = ctx;\n\n    let promises = {};\n    // Installing an app? This is fine (in cluster store)\n    // Fetching list of cluster templates? This is fine (in management store)\n    // Installing a cluster template? This isn't fine (in cluster store as per installing app, but if there is no cluster we need to default to management)\n\n    const inStore = rootGetters['currentCluster'] ? rootGetters['currentProduct'].inStore : 'management';\n\n    if ( rootGetters[`${ inStore }/schemaFor`](CATALOG.CLUSTER_REPO) ) {\n      promises.cluster = dispatch(`${ inStore }/findAll`, { type: CATALOG.CLUSTER_REPO }, { root: true });\n    }\n\n    if ( rootGetters[`${ inStore }/schemaFor`](CATALOG.REPO) ) {\n      promises.namespaced = dispatch(`${ inStore }/findAll`, { type: CATALOG.REPO }, { root: true });\n    }\n\n    const hash = await allHash(promises);\n\n    // As per comment above, when there are no clusters this will be management. Store it such that it can be used for those cases\n    commit('setInStore', inStore);\n    hash.cluster = hash.cluster?.filter((repo) => !(repo?.metadata?.annotations?.[CATALOG_ANNOTATIONS.HIDDEN_REPO] === 'true'));\n\n    commit('setRepos', hash);\n\n    const repos = getters['repos'];\n    const loaded = [];\n\n    promises = {};\n\n    for ( const repo of repos ) {\n      if ( (force === true || !getters.isLoaded(repo)) && repo.canLoad ) {\n        console.info('Loading index for repo', repo.name, `(${ repo._key })`); // eslint-disable-line no-console\n        promises[repo._key] = repo.followLink('index');\n      }\n    }\n\n    const res = await allHashSettled(promises);\n    const charts = reset ? {} : state.charts;\n    const errors = [];\n\n    for ( const key of Object.keys(res) ) {\n      const obj = res[key];\n      const repo = findBy(repos, '_key', key);\n\n      if ( obj.status === 'rejected' ) {\n        errors.push(stringify(obj.reason));\n        continue;\n      }\n\n      for ( const k in obj.value.entries ) {\n        for ( const entry of obj.value.entries[k] ) {\n          addChart(ctx, charts, entry, repo);\n        }\n      }\n\n      loaded.push(repo);\n    }\n\n    commit('setCharts', {\n      charts,\n      errors,\n      loaded,\n    });\n\n    if (reset) {\n      commit('setVersions', {});\n    }\n  },\n\n  async refresh({ getters, commit, dispatch }) {\n    const promises = getters.repos.map((x) => x.refresh());\n\n    // @TODO wait for repo state to indicate they're done once the API has that\n\n    await Promise.allSettled(promises);\n\n    await dispatch('load', { force: true, reset: true });\n  },\n\n  /*\n    Fetch full information about a specific version of a Helm chart,\n    including the standard values and README.\n  */\n  async getVersionInfo({ state, getters, commit }, {\n    repoType, repoName, chartName, versionName\n  }) {\n    const key = `${ repoType }/${ repoName }/${ chartName }/${ versionName }`;\n    let info = state.versionInfos[key];\n\n    if ( !info ) {\n      const repo = getters['repo']({ repoType, repoName });\n\n      if ( !repo ) {\n        throw new Error('Repo not found');\n      }\n\n      info = await repo.followLink('info', {\n        url: addParams(repo.links.info, {\n          chartName,\n          version: versionName\n        })\n      });\n\n      commit('cacheVersion', { key, info });\n    }\n\n    return info;\n  },\n\n  rehydrate(ctx) {\n    const { state, commit } = ctx;\n    const charts = state.charts || {};\n\n    Object.entries(state.charts).forEach(([key, chart]) => {\n      if (chart.__rehydrate) {\n        charts[key] = classify(ctx, chart);\n      }\n    });\n    commit('setCharts', {\n      charts,\n      errors: state.errors,\n    });\n  }\n};\n\nexport function generateKey(repoType, repoName, chartName) {\n  return `${ repoType }/${ repoName }/${ chartName }`;\n}\n\nexport function parseKey(key) {\n  const parts = key.split('/');\n\n  return {\n    repoType:  parts[0],\n    repoName:  parts[1],\n    chartName: parts[2],\n  };\n}\n\nfunction addChart(ctx, map, chart, repo) {\n  const repoType = (repo.type === CATALOG.CLUSTER_REPO ? 'cluster' : 'namespace');\n  const repoName = repo.metadata.name;\n  const key = generateKey(repoType, repoName, chart.name);\n  let obj = map[key];\n\n  const certifiedAnnotation = chart.annotations?.[CATALOG_ANNOTATIONS.CERTIFIED];\n\n  let certified = null;\n  let sideLabel = null;\n\n  if ( repo.isRancher ) {\n    certified = CATALOG_ANNOTATIONS._RANCHER;\n  } else if ( repo.isPartner ) {\n    certified = CATALOG_ANNOTATIONS._PARTNER;\n  } else {\n    certified = CATALOG_ANNOTATIONS._OTHER;\n  }\n\n  if ( chart.deprecated ) {\n    sideLabel = DEPRECATED;\n  } else if ( chart.annotations?.[CATALOG_ANNOTATIONS.EXPERIMENTAL] ) {\n    sideLabel = EXPERIMENTAL;\n  } else if (\n    !repo.isRancherSource &&\n    certifiedAnnotation &&\n    certifiedAnnotation !== CATALOG_ANNOTATIONS._RANCHER &&\n    certified === CATALOG_ANNOTATIONS._OTHER\n  ) {\n    // But anybody can set the side label\n    sideLabel = certifiedAnnotation;\n  }\n\n  if ( !obj ) {\n    if ( ctx ) { }\n    obj = classify(ctx, {\n      key,\n      type:                'chart',\n      id:                  key,\n      certified,\n      sideLabel,\n      repoType,\n      repoName,\n      repoNameDisplay:     ctx.rootGetters['i18n/withFallback'](`catalog.repo.name.\"${ repoName }\"`, null, repoName),\n      certifiedSort:       CERTIFIED_SORTS[certified] || 99,\n      icon:                chart.icon,\n      color:               repo.color,\n      chartType:           chart.annotations?.[CATALOG_ANNOTATIONS.TYPE] || CATALOG_ANNOTATIONS._APP,\n      chartName:           chart.name,\n      chartNameDisplay:    chart.annotations?.[CATALOG_ANNOTATIONS.DISPLAY_NAME] || chart.name,\n      chartDescription:    chart.description,\n      featured:            chart.annotations?.[CATALOG_ANNOTATIONS.FEATURED],\n      repoKey:             repo._key,\n      versions:            [],\n      categories:          filterCategories(chart.keywords),\n      deprecated:          !!chart.deprecated,\n      experimental:        !!chart.annotations?.[CATALOG_ANNOTATIONS.EXPERIMENTAL],\n      hidden:              !!chart.annotations?.[CATALOG_ANNOTATIONS.HIDDEN],\n      targetNamespace:     chart.annotations?.[CATALOG_ANNOTATIONS.NAMESPACE],\n      targetName:          chart.annotations?.[CATALOG_ANNOTATIONS.RELEASE_NAME],\n      scope:               chart.annotations?.[CATALOG_ANNOTATIONS.SCOPE],\n      provides:            [],\n      windowsIncompatible: !(chart.annotations?.[CATALOG_ANNOTATIONS.PERMITTED_OS] || '').includes('windows'),\n      deploysOnWindows:    (chart.annotations?.[CATALOG_ANNOTATIONS.DEPLOYED_OS] || '').includes('windows')\n    });\n\n    map[key] = obj;\n  }\n\n  chart.key = `${ key }/${ chart.version }`;\n  chart.repoType = repoType;\n  chart.repoName = repoName;\n\n  const provides = chart.annotations?.[CATALOG_ANNOTATIONS.PROVIDES];\n\n  if ( provides ) {\n    addObject(obj.provides, provides);\n  }\n\n  obj.versions.push(chart);\n}\n\nfunction preferSameRepo(matching, repoType, repoName) {\n  matching.sort((a, b) => {\n    const aSameRepo = a.repoType === repoType && a.repoName === repoName ? 1 : 0;\n    const bSameRepo = b.repoType === repoType && b.repoName === repoName ? 1 : 0;\n\n    if ( aSameRepo && !bSameRepo ) {\n      return -1;\n    } else if ( !aSameRepo && bSameRepo ) {\n      return 1;\n    }\n\n    return 0;\n  });\n}\n\nfunction normalizeVersion(v) {\n  return v.replace(/^v/i, '').toLowerCase().trim();\n}\n\nfunction filterCategories(categories) {\n  categories = (categories || []).map((x) => normalizeCategory(x));\n\n  const out = [];\n\n  for ( const c of ALLOWED_CATEGORIES ) {\n    if ( categories.includes(normalizeCategory(c)) ) {\n      addObject(out, c);\n    }\n  }\n\n  return out;\n}\n\nfunction normalizeCategory(c) {\n  return c.replace(/\\s+/g, '').toLowerCase();\n}\n\n/*\ncatalog.cattle.io/deplys-on-os: OS -> requires global.cattle.OS.enabled: true\n  default: nothing\ncatalog.cattle.io/permits-os: OS -> will break on clusters containing nodes that are not OS\n  default if not found: catalog.cattle.io/permits-os: linux\n*/\nexport function compatibleVersionsFor(chart, os, includePrerelease = true) {\n  const versions = chart.versions;\n\n  if (os && !isArray(os)) {\n    os = [os];\n  }\n\n  return versions.filter((ver) => {\n    const osPermitted = (ver?.annotations?.[CATALOG_ANNOTATIONS.PERMITTED_OS] || LINUX).split(',');\n\n    if ( !includePrerelease && isPrerelease(ver.version) ) {\n      return false;\n    }\n\n    if ( !os || difference(os, osPermitted).length === 0) {\n      return true;\n    }\n\n    return false;\n  });\n}\n\nexport function filterAndArrangeCharts(charts, {\n  clusterProvider = '',\n  operatingSystems,\n  category,\n  searchQuery,\n  showDeprecated = false,\n  showHidden = false,\n  showPrerelease = true,\n  hideRepos = [],\n  showRepos = [],\n  showTypes = [],\n  hideTypes = [],\n} = {}) {\n  const out = charts.filter((c) => {\n    if (\n      ( c.deprecated && !showDeprecated ) ||\n      ( c.hidden && !showHidden ) ||\n      ( hideRepos?.length && hideRepos.includes(c.repoKey) ) ||\n      ( showRepos?.length && !showRepos.includes(c.repoKey) ) ||\n      ( hideTypes?.length && hideTypes.includes(c.chartType) ) ||\n      ( showTypes?.length && !showTypes.includes(c.chartType) ) ||\n      (c.chartName === 'rancher-wins-upgrader' && clusterProvider === 'rke2')\n    ) {\n      return false;\n    }\n\n    if (compatibleVersionsFor(c, operatingSystems, showPrerelease).length <= 0) {\n      // There's no versions compatible with the specified os\n      return false;\n    }\n\n    if ( category && !c.categories.includes(category) ) {\n      // The category filter doesn't match\n      return false;\n    }\n\n    if ( searchQuery ) {\n      // The search filter doesn't match\n      const searchTokens = searchQuery.split(/\\s*[, ]\\s*/).map((x) => ensureRegex(x, false));\n\n      for ( const token of searchTokens ) {\n        const chartDescription = c.chartDescription || '';\n\n        if ( !c.chartNameDisplay.match(token) && !chartDescription.match(token) ) {\n          return false;\n        }\n      }\n    }\n\n    return true;\n  });\n\n  return sortBy(out, ['certifiedSort', 'repoName', 'chartNameDisplay']);\n}\n"],"mappings":"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","ignoreList":[]}]}