{"remainingRequest":"/home/ubuntu/susecon-2024-ext-demo/node_modules/babel-loader/lib/index.js??ref--16-1!/home/ubuntu/susecon-2024-ext-demo/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/ubuntu/susecon-2024-ext-demo/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/components/form/Members/MembershipEditor.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/components/form/Members/MembershipEditor.vue","mtime":1725271280091},{"path":"/home/ubuntu/susecon-2024-ext-demo/babel.config.js","mtime":1725268750245},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/babel-loader/lib/index.js","mtime":1725271298942},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1725271300920}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90b0NvbnN1bWFibGVBcnJheSI7CmltcG9ydCBfc2xpY2VkVG9BcnJheSBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9zbGljZWRUb0FycmF5IjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgX3JlZ2VuZXJhdG9yUnVudGltZSBmcm9tICIvaG9tZS91YnVudHUvc3VzZWNvbi0yMDI0LWV4dC1kZW1vL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9yZWdlbmVyYXRvci9pbmRleC5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmpvaW4uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuYXNzaWduLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnByb21pc2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5yZXBsYWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvci5qcyI7CmltcG9ydCB7IE1BTkFHRU1FTlQsIE5PUk1BTiB9IGZyb20gJ0BzaGVsbC9jb25maWcvdHlwZXMnOwppbXBvcnQgQXJyYXlMaXN0IGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL2Zvcm0vQXJyYXlMaXN0JzsKaW1wb3J0IExvYWRpbmcgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvTG9hZGluZyc7CmltcG9ydCB7IF9DUkVBVEUsIF9WSUVXIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy9xdWVyeS1wYXJhbXMnOwppbXBvcnQgeyBnZXQsIHNldCB9IGZyb20gJ0BzaGVsbC91dGlscy9vYmplY3QnOwpmdW5jdGlvbiBub3JtYWxpemVJZChpZCkgewogIHJldHVybiAoaWQgPT09IG51bGwgfHwgaWQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGlkLnJlcGxhY2UoJzonLCAnLycpKSB8fCBpZDsKfQpleHBvcnQgZnVuY3Rpb24gY2FuVmlld01lbWJlcnNoaXBFZGl0b3Ioc3RvcmUpIHsKICB2YXIgbmVlZHNQcm9qZWN0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBmYWxzZTsKICByZXR1cm4gKCEhc3RvcmUuZ2V0dGVyc1snbWFuYWdlbWVudC9zY2hlbWFGb3InXShNQU5BR0VNRU5ULlBST0pFQ1RfUk9MRV9URU1QTEFURV9CSU5ESU5HKSB8fCAhbmVlZHNQcm9qZWN0KSAmJiAhIXN0b3JlLmdldHRlcnNbJ21hbmFnZW1lbnQvc2NoZW1hRm9yJ10oTUFOQUdFTUVOVC5ST0xFX1RFTVBMQVRFKSAmJiAhIXN0b3JlLmdldHRlcnNbJ3JhbmNoZXIvc2NoZW1hRm9yJ10oTk9STUFOLlBSSU5DSVBBTCk7Cn0KZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIEFycmF5TGlzdDogQXJyYXlMaXN0LAogICAgTG9hZGluZzogTG9hZGluZwogIH0sCiAgcHJvcHM6IHsKICAgIGFkZE1lbWJlckRpYWxvZ05hbWU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICByZXF1aXJlZDogdHJ1ZQogICAgfSwKICAgIHBhcmVudEtleTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICB9LAogICAgcGFyZW50SWQ6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiBudWxsCiAgICB9LAogICAgbW9kZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICB9LAogICAgdHlwZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICB9LAogICAgZGVmYXVsdEJpbmRpbmdIYW5kbGVyOiB7CiAgICAgIHR5cGU6IEZ1bmN0aW9uLAogICAgICBkZWZhdWx0OiBudWxsCiAgICB9LAogICAgbW9kYWxTdGlja3k6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0KICB9LAogIGZldGNoOiBmdW5jdGlvbiBmZXRjaCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgdmFyIHJvbGVCaW5kaW5nUmVxdWVzdFBhcmFtcywgdXNlckh5ZHJhdGlvbiwgX3lpZWxkJFByb21pc2UkYWxsLCBfeWllbGQkUHJvbWlzZSRhbGwyLCBhbGxCaW5kaW5ncywgYmluZGluZ3MsIGRlZmF1bHRCaW5kaW5nOwogICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgcm9sZUJpbmRpbmdSZXF1ZXN0UGFyYW1zID0gewogICAgICAgICAgICAgIHR5cGU6IF90aGlzLnR5cGUsCiAgICAgICAgICAgICAgb3B0OiB7CiAgICAgICAgICAgICAgICBmb3JjZTogdHJ1ZQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKICAgICAgICAgICAgaWYgKF90aGlzLnR5cGUgPT09IE5PUk1BTi5QUk9KRUNUX1JPTEVfVEVNUExBVEVfQklORElORyAmJiBfdGhpcy5wYXJlbnRJZCkgewogICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24ocm9sZUJpbmRpbmdSZXF1ZXN0UGFyYW1zLCB7CiAgICAgICAgICAgICAgICBvcHQ6IHsKICAgICAgICAgICAgICAgICAgZmlsdGVyOiB7CiAgICAgICAgICAgICAgICAgICAgcHJvamVjdElkOiBfdGhpcy5wYXJlbnRJZC5zcGxpdCgnLycpLmpvaW4oJzonKQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdXNlckh5ZHJhdGlvbiA9IFtfdGhpcy5zY2hlbWEgPyBfdGhpcy4kc3RvcmUuZGlzcGF0Y2goInJhbmNoZXIvZmluZEFsbCIsIHJvbGVCaW5kaW5nUmVxdWVzdFBhcmFtcykgOiBbXSwgX3RoaXMuJHN0b3JlLmRpc3BhdGNoKCdyYW5jaGVyL2ZpbmRBbGwnLCB7CiAgICAgICAgICAgICAgdHlwZTogTk9STUFOLlBSSU5DSVBBTAogICAgICAgICAgICB9KSwgX3RoaXMuJHN0b3JlLmRpc3BhdGNoKCJtYW5hZ2VtZW50L2ZpbmRBbGwiLCB7CiAgICAgICAgICAgICAgdHlwZTogTUFOQUdFTUVOVC5ST0xFX1RFTVBMQVRFCiAgICAgICAgICAgIH0pLCBfdGhpcy4kc3RvcmUuZGlzcGF0Y2goIm1hbmFnZW1lbnQvZmluZEFsbCIsIHsKICAgICAgICAgICAgICB0eXBlOiBNQU5BR0VNRU5ULlVTRVIKICAgICAgICAgICAgfSldOwogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNTsKICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKHVzZXJIeWRyYXRpb24pOwogICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICBfeWllbGQkUHJvbWlzZSRhbGwgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICBfeWllbGQkUHJvbWlzZSRhbGwyID0gX3NsaWNlZFRvQXJyYXkoX3lpZWxkJFByb21pc2UkYWxsLCAxKTsKICAgICAgICAgICAgYWxsQmluZGluZ3MgPSBfeWllbGQkUHJvbWlzZSRhbGwyWzBdOwogICAgICAgICAgICBiaW5kaW5ncyA9IGFsbEJpbmRpbmdzLmZpbHRlcihmdW5jdGlvbiAoYikgewogICAgICAgICAgICAgIHJldHVybiBub3JtYWxpemVJZChnZXQoYiwgX3RoaXMucGFyZW50S2V5KSkgPT09IG5vcm1hbGl6ZUlkKF90aGlzLnBhcmVudElkKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIF90aGlzLiRzZXQoX3RoaXMsICdsYXN0U2F2ZWRCaW5kaW5ncycsIF90b0NvbnN1bWFibGVBcnJheShiaW5kaW5ncykpOwoKICAgICAgICAgICAgLy8gQWRkIHRoZSBjdXJyZW50IHVzZXIgYXMgdGhlIHByb2plY3Qgb3duZXIuIFRoaXMgd2lsbCBnZXQgY3JlYXRlZCBieSBkZWZhdWx0CiAgICAgICAgICAgIGlmICghKF90aGlzLm1vZGUgPT09IF9DUkVBVEUgJiYgYmluZGluZ3MubGVuZ3RoID09PSAwICYmIF90aGlzLmRlZmF1bHRCaW5kaW5nSGFuZGxlcikpIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTY7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEzOwogICAgICAgICAgICByZXR1cm4gX3RoaXMuZGVmYXVsdEJpbmRpbmdIYW5kbGVyKCk7CiAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICBkZWZhdWx0QmluZGluZyA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgIGRlZmF1bHRCaW5kaW5nLmlzRGVmYXVsdEJpbmRpbmcgPSB0cnVlOwogICAgICAgICAgICBiaW5kaW5ncy5wdXNoKGRlZmF1bHRCaW5kaW5nKTsKICAgICAgICAgIGNhc2UgMTY6CiAgICAgICAgICAgIF90aGlzLiRzZXQoX3RoaXMsICdiaW5kaW5ncycsIGJpbmRpbmdzKTsKICAgICAgICAgIGNhc2UgMTc6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSk7CiAgICB9KSkoKTsKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzY2hlbWE6IHRoaXMuJHN0b3JlLmdldHRlcnNbInJhbmNoZXIvc2NoZW1hRm9yIl0odGhpcy50eXBlKSwKICAgICAgYmluZGluZ3M6IFtdLAogICAgICBsYXN0U2F2ZWRCaW5kaW5nczogW10KICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgbmV3QmluZGluZ3M6IGZ1bmN0aW9uIG5ld0JpbmRpbmdzKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKICAgICAgcmV0dXJuIHRoaXMuYmluZGluZ3MuZmlsdGVyKGZ1bmN0aW9uIChiaW5kaW5nKSB7CiAgICAgICAgcmV0dXJuICFiaW5kaW5nLmlkICYmICFfdGhpczIubGFzdFNhdmVkQmluZGluZ3MuaW5jbHVkZXMoYmluZGluZykgJiYgIWJpbmRpbmcuaXNEZWZhdWx0QmluZGluZzsKICAgICAgfSk7CiAgICB9LAogICAgcmVtb3ZlZEJpbmRpbmdzOiBmdW5jdGlvbiByZW1vdmVkQmluZGluZ3MoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwogICAgICByZXR1cm4gdGhpcy5sYXN0U2F2ZWRCaW5kaW5ncy5maWx0ZXIoZnVuY3Rpb24gKGJpbmRpbmcpIHsKICAgICAgICByZXR1cm4gIV90aGlzMy5iaW5kaW5ncy5pbmNsdWRlcyhiaW5kaW5nKTsKICAgICAgfSk7CiAgICB9LAogICAgbWVtYmVyc2hpcFVwZGF0ZTogZnVuY3Rpb24gbWVtYmVyc2hpcFVwZGF0ZSgpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CiAgICAgIHZhciBuZXdCaW5kaW5ncyA9IHRoaXMubmV3QmluZGluZ3M7CiAgICAgIHZhciByZW1vdmVkQmluZGluZ3MgPSB0aGlzLnJlbW92ZWRCaW5kaW5nczsKICAgICAgcmV0dXJuIHsKICAgICAgICBuZXdCaW5kaW5nczogdGhpcy5uZXdCaW5kaW5ncywKICAgICAgICByZW1vdmVkQmluZGluZ3M6IHRoaXMucmVtb3ZlZEJpbmRpbmdzLAogICAgICAgIHNhdmU6IGZ1bmN0aW9uIHNhdmUocGFyZW50SWQpIHsKICAgICAgICAgIHZhciBzYXZlZFByb21pc2VzID0gbmV3QmluZGluZ3MubWFwKGZ1bmN0aW9uIChiaW5kaW5nKSB7CiAgICAgICAgICAgIHNldChiaW5kaW5nLCBfdGhpczQucGFyZW50S2V5LCBwYXJlbnRJZCk7CiAgICAgICAgICAgIHJldHVybiBiaW5kaW5nLnNhdmUoKTsKICAgICAgICAgIH0pOwogICAgICAgICAgdmFyIHJlbW92ZWRQcm9taXNlcyA9IHJlbW92ZWRCaW5kaW5ncy5tYXAoZnVuY3Rpb24gKGJpbmRpbmcpIHsKICAgICAgICAgICAgcmV0dXJuIGJpbmRpbmcucmVtb3ZlKCk7CiAgICAgICAgICB9KTsKICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KHNhdmVkUHJvbWlzZXMpLCBfdG9Db25zdW1hYmxlQXJyYXkocmVtb3ZlZFByb21pc2VzKSkpOwogICAgICAgIH0KICAgICAgfTsKICAgIH0sCiAgICBpc0NyZWF0ZTogZnVuY3Rpb24gaXNDcmVhdGUoKSB7CiAgICAgIHJldHVybiB0aGlzLm1vZGUgPT09IF9DUkVBVEU7CiAgICB9LAogICAgaXNWaWV3OiBmdW5jdGlvbiBpc1ZpZXcoKSB7CiAgICAgIHJldHVybiB0aGlzLm1vZGUgPT09IF9WSUVXOwogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIG1lbWJlcnNoaXBVcGRhdGU6IHsKICAgICAgZGVlcDogdHJ1ZSwKICAgICAgaGFuZGxlcjogZnVuY3Rpb24gaGFuZGxlcigpIHsKICAgICAgICB0aGlzLiRlbWl0KCdtZW1iZXJzaGlwLXVwZGF0ZScsIHRoaXMubWVtYmVyc2hpcFVwZGF0ZSk7CiAgICAgIH0KICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGFkZE1lbWJlcjogZnVuY3Rpb24gYWRkTWVtYmVyKCkgewogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnY2x1c3Rlci9wcm9tcHRNb2RhbCcsIHsKICAgICAgICBjb21wb25lbnQ6IHRoaXMuYWRkTWVtYmVyRGlhbG9nTmFtZSwKICAgICAgICBjb21wb25lbnRQcm9wczogewogICAgICAgICAgb25BZGQ6IHRoaXMub25BZGRNZW1iZXIKICAgICAgICB9LAogICAgICAgIG1vZGFsU3RpY2t5OiB0aGlzLm1vZGFsU3RpY2t5CiAgICAgIH0pOwogICAgfSwKICAgIG9uQWRkTWVtYmVyOiBmdW5jdGlvbiBvbkFkZE1lbWJlcihiaW5kaW5ncykgewogICAgICB0aGlzLiRzZXQodGhpcywgJ2JpbmRpbmdzJywgW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheSh0aGlzLmJpbmRpbmdzKSwgX3RvQ29uc3VtYWJsZUFycmF5KGJpbmRpbmdzKSkpOwogICAgfQogIH0KfTs="},{"version":3,"names":["MANAGEMENT","NORMAN","ArrayList","Loading","_CREATE","_VIEW","get","set","normalizeId","id","replace","canViewMembershipEditor","store","needsProject","arguments","length","undefined","getters","PROJECT_ROLE_TEMPLATE_BINDING","ROLE_TEMPLATE","PRINCIPAL","components","props","addMemberDialogName","type","String","required","parentKey","parentId","default","mode","defaultBindingHandler","Function","modalSticky","Boolean","fetch","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","roleBindingRequestParams","userHydration","_yield$Promise$all","_yield$Promise$all2","allBindings","bindings","defaultBinding","wrap","_callee$","_context","prev","next","opt","force","Object","assign","filter","projectId","split","join","schema","$store","dispatch","USER","Promise","all","sent","_slicedToArray","b","$set","_toConsumableArray","isDefaultBinding","push","stop","data","lastSavedBindings","computed","newBindings","_this2","binding","includes","removedBindings","_this3","membershipUpdate","_this4","save","savedPromises","map","removedPromises","remove","concat","isCreate","isView","watch","deep","handler","$emit","methods","addMember","component","componentProps","onAdd","onAddMember"],"sources":["node_modules/@rancher/shell/components/form/Members/MembershipEditor.vue"],"sourcesContent":["<script>\r\nimport { MANAGEMENT, NORMAN } from '@shell/config/types';\r\nimport ArrayList from '@shell/components/form/ArrayList';\r\nimport Loading from '@shell/components/Loading';\r\nimport { _CREATE, _VIEW } from '@shell/config/query-params';\r\nimport { get, set } from '@shell/utils/object';\r\n\r\nfunction normalizeId(id) {\r\n  return id?.replace(':', '/') || id;\r\n}\r\n\r\nexport function canViewMembershipEditor(store, needsProject = false) {\r\n  return (!!store.getters['management/schemaFor'](MANAGEMENT.PROJECT_ROLE_TEMPLATE_BINDING) || !needsProject) &&\r\n    !!store.getters['management/schemaFor'](MANAGEMENT.ROLE_TEMPLATE) &&\r\n    !!store.getters['rancher/schemaFor'](NORMAN.PRINCIPAL);\r\n}\r\n\r\nexport default {\r\n  components: { ArrayList, Loading },\r\n\r\n  props: {\r\n    addMemberDialogName: {\r\n      type:     String,\r\n      required: true\r\n    },\r\n\r\n    parentKey: {\r\n      type:     String,\r\n      required: true\r\n    },\r\n\r\n    parentId: {\r\n      type:    String,\r\n      default: null\r\n    },\r\n\r\n    mode: {\r\n      type:     String,\r\n      required: true\r\n    },\r\n\r\n    type: {\r\n      type:     String,\r\n      required: true\r\n    },\r\n\r\n    defaultBindingHandler: {\r\n      type:    Function,\r\n      default: null,\r\n    },\r\n\r\n    modalSticky: {\r\n      type:    Boolean,\r\n      default: false,\r\n    }\r\n  },\r\n\r\n  async fetch() {\r\n    const roleBindingRequestParams = { type: this.type, opt: { force: true } };\r\n\r\n    if (this.type === NORMAN.PROJECT_ROLE_TEMPLATE_BINDING && this.parentId) {\r\n      Object.assign(roleBindingRequestParams, { opt: { filter: { projectId: this.parentId.split('/').join(':') } } });\r\n    }\r\n    const userHydration = [\r\n      this.schema ? this.$store.dispatch(`rancher/findAll`, roleBindingRequestParams) : [],\r\n      this.$store.dispatch('rancher/findAll', { type: NORMAN.PRINCIPAL }),\r\n      this.$store.dispatch(`management/findAll`, { type: MANAGEMENT.ROLE_TEMPLATE }),\r\n      this.$store.dispatch(`management/findAll`, { type: MANAGEMENT.USER })\r\n    ];\r\n    const [allBindings] = await Promise.all(userHydration);\r\n\r\n    const bindings = allBindings\r\n      .filter((b) => normalizeId(get(b, this.parentKey)) === normalizeId(this.parentId));\r\n\r\n    this.$set(this, 'lastSavedBindings', [...bindings]);\r\n\r\n    // Add the current user as the project owner. This will get created by default\r\n    if (this.mode === _CREATE && bindings.length === 0 && this.defaultBindingHandler) {\r\n      const defaultBinding = await this.defaultBindingHandler();\r\n\r\n      defaultBinding.isDefaultBinding = true;\r\n      bindings.push(defaultBinding);\r\n    }\r\n\r\n    this.$set(this, 'bindings', bindings);\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      schema:            this.$store.getters[`rancher/schemaFor`](this.type),\r\n      bindings:          [],\r\n      lastSavedBindings: [],\r\n    };\r\n  },\r\n\r\n  computed: {\r\n    newBindings() {\r\n      return this.bindings\r\n        .filter((binding) => !binding.id && !this.lastSavedBindings.includes(binding) && !binding.isDefaultBinding);\r\n    },\r\n    removedBindings() {\r\n      return this.lastSavedBindings\r\n        .filter((binding) => !this.bindings.includes(binding));\r\n    },\r\n    membershipUpdate() {\r\n      const newBindings = this.newBindings;\r\n      const removedBindings = this.removedBindings;\r\n\r\n      return {\r\n        newBindings:     this.newBindings,\r\n        removedBindings: this.removedBindings,\r\n        save:            (parentId) => {\r\n          const savedPromises = newBindings.map((binding) => {\r\n            set(binding, this.parentKey, parentId);\r\n\r\n            return binding.save();\r\n          });\r\n\r\n          const removedPromises = removedBindings.map((binding) => binding.remove());\r\n\r\n          return Promise.all([...savedPromises, ...removedPromises]);\r\n        }\r\n      };\r\n    },\r\n\r\n    isCreate() {\r\n      return this.mode === _CREATE;\r\n    },\r\n\r\n    isView() {\r\n      return this.mode === _VIEW;\r\n    },\r\n  },\r\n  watch: {\r\n    membershipUpdate: {\r\n      deep: true,\r\n      handler() {\r\n        this.$emit('membership-update', this.membershipUpdate);\r\n      }\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    addMember() {\r\n      this.$store.dispatch('cluster/promptModal', {\r\n        component:      this.addMemberDialogName,\r\n        componentProps: { onAdd: this.onAddMember },\r\n        modalSticky:    this.modalSticky\r\n      });\r\n    },\r\n\r\n    onAddMember(bindings) {\r\n      this.$set(this, 'bindings', [...this.bindings, ...bindings]);\r\n    },\r\n  }\r\n};\r\n</script>\r\n<template>\r\n  <Loading v-if=\"$fetchState.pending\" />\r\n  <ArrayList\r\n    v-else\r\n    v-model=\"bindings\"\r\n    :mode=\"mode\"\r\n    :show-header=\"true\"\r\n  >\r\n    <template #column-headers>\r\n      <div class=\"box mb-0\">\r\n        <div class=\"column-headers row\">\r\n          <div class=\"col span-6\">\r\n            <label class=\"text-label\">{{ t('membershipEditor.user') }}</label>\r\n          </div>\r\n          <div class=\"col span-6\">\r\n            <label class=\"text-label\">{{ t('membershipEditor.role') }}</label>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </template>\r\n    <template #columns=\"{row}\">\r\n      <div class=\"columns row\">\r\n        <div class=\"col span-6\">\r\n          <Principal\r\n            :key=\"row.value.principalId\"\r\n            :value=\"row.value.principalId\"\r\n          />\r\n        </div>\r\n        <div class=\"col span-6 role\">\r\n          {{ row.value.roleDisplay }}\r\n        </div>\r\n      </div>\r\n    </template>\r\n    <template #add>\r\n      <button\r\n        type=\"button\"\r\n        class=\"btn role-primary mt-10\"\r\n        @click=\"addMember\"\r\n      >\r\n        {{ t('generic.add') }}\r\n      </button>\r\n    </template>\r\n    <template #remove-button=\"{remove, i}\">\r\n      <span v-if=\"(isCreate && i === 0) || isView\" />\r\n      <button\r\n        v-else\r\n        type=\"button\"\r\n        :disabled=\"isView\"\r\n        class=\"btn role-link\"\r\n        @click=\"remove\"\r\n      >\r\n        {{ t('generic.remove') }}\r\n      </button>\r\n    </template>\r\n  </ArrayList>\r\n</template>\r\n\r\n<style lang=\"scss\" scoped>\r\n.role {\r\n  display: flex;\r\n  align-items: center;\r\n  flex-direction: row;\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]}]}