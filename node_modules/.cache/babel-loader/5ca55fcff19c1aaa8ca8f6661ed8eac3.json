{"remainingRequest":"/home/ubuntu/susecon-2024-ext-demo/node_modules/babel-loader/lib/index.js??ref--16-1!/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/plugins/dashboard-store/resource-class.js","dependencies":[{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/plugins/dashboard-store/resource-class.js","mtime":1725271280091},{"path":"/home/ubuntu/susecon-2024-ext-demo/babel.config.js","mtime":1725268750245},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/babel-loader/lib/index.js","mtime":1725271298942}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3NsaWNlZFRvQXJyYXkiOwppbXBvcnQgX3RvQ29uc3VtYWJsZUFycmF5IGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvQ29uc3VtYWJsZUFycmF5IjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgX3R5cGVvZiBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90eXBlb2YiOwppbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcyI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHkiOwp2YXIgX1NUQVRFUzsKZnVuY3Rpb24gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIociwgZSkgeyB2YXIgdCA9ICJ1bmRlZmluZWQiICE9IHR5cGVvZiBTeW1ib2wgJiYgcltTeW1ib2wuaXRlcmF0b3JdIHx8IHJbIkBAaXRlcmF0b3IiXTsgaWYgKCF0KSB7IGlmIChBcnJheS5pc0FycmF5KHIpIHx8ICh0ID0gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KHIpKSB8fCBlICYmIHIgJiYgIm51bWJlciIgPT0gdHlwZW9mIHIubGVuZ3RoKSB7IHQgJiYgKHIgPSB0KTsgdmFyIF9uID0gMCwgRiA9IGZ1bmN0aW9uIEYoKSB7fTsgcmV0dXJuIHsgczogRiwgbjogZnVuY3Rpb24gbigpIHsgcmV0dXJuIF9uID49IHIubGVuZ3RoID8geyBkb25lOiAhMCB9IDogeyBkb25lOiAhMSwgdmFsdWU6IHJbX24rK10gfTsgfSwgZTogZnVuY3Rpb24gZShyKSB7IHRocm93IHI7IH0sIGY6IEYgfTsgfSB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gaXRlcmF0ZSBub24taXRlcmFibGUgaW5zdGFuY2UuXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuIik7IH0gdmFyIG8sIGEgPSAhMCwgdSA9ICExOyByZXR1cm4geyBzOiBmdW5jdGlvbiBzKCkgeyB0ID0gdC5jYWxsKHIpOyB9LCBuOiBmdW5jdGlvbiBuKCkgeyB2YXIgciA9IHQubmV4dCgpOyByZXR1cm4gYSA9IHIuZG9uZSwgcjsgfSwgZTogZnVuY3Rpb24gZShyKSB7IHUgPSAhMCwgbyA9IHI7IH0sIGY6IGZ1bmN0aW9uIGYoKSB7IHRyeSB7IGEgfHwgbnVsbCA9PSB0LnJldHVybiB8fCB0LnJldHVybigpOyB9IGZpbmFsbHkgeyBpZiAodSkgdGhyb3cgbzsgfSB9IH07IH0KZnVuY3Rpb24gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KHIsIGEpIHsgaWYgKHIpIHsgaWYgKCJzdHJpbmciID09IHR5cGVvZiByKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkociwgYSk7IHZhciB0ID0ge30udG9TdHJpbmcuY2FsbChyKS5zbGljZSg4LCAtMSk7IHJldHVybiAiT2JqZWN0IiA9PT0gdCAmJiByLmNvbnN0cnVjdG9yICYmICh0ID0gci5jb25zdHJ1Y3Rvci5uYW1lKSwgIk1hcCIgPT09IHQgfHwgIlNldCIgPT09IHQgPyBBcnJheS5mcm9tKHIpIDogIkFyZ3VtZW50cyIgPT09IHQgfHwgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QodCkgPyBfYXJyYXlMaWtlVG9BcnJheShyLCBhKSA6IHZvaWQgMDsgfSB9CmZ1bmN0aW9uIF9hcnJheUxpa2VUb0FycmF5KHIsIGEpIHsgKG51bGwgPT0gYSB8fCBhID4gci5sZW5ndGgpICYmIChhID0gci5sZW5ndGgpOyBmb3IgKHZhciBlID0gMCwgbiA9IEFycmF5KGEpOyBlIDwgYTsgZSsrKSBuW2VdID0gcltlXTsgcmV0dXJuIG47IH0KaW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiL2hvbWUvdWJ1bnR1L3N1c2Vjb24tMjAyNC1leHQtZGVtby9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvcmVnZW5lcmF0b3IvaW5kZXguanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmZ1bmN0aW9uIG93bktleXMoZSwgcikgeyB2YXIgdCA9IE9iamVjdC5rZXlzKGUpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgbyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7IHIgJiYgKG8gPSBvLmZpbHRlcihmdW5jdGlvbiAocikgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLCByKS5lbnVtZXJhYmxlOyB9KSksIHQucHVzaC5hcHBseSh0LCBvKTsgfSByZXR1cm4gdDsgfQpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKGUpIHsgZm9yICh2YXIgciA9IDE7IHIgPCBhcmd1bWVudHMubGVuZ3RoOyByKyspIHsgdmFyIHQgPSBudWxsICE9IGFyZ3VtZW50c1tyXSA/IGFyZ3VtZW50c1tyXSA6IHt9OyByICUgMiA/IG93bktleXMoT2JqZWN0KHQpLCAhMCkuZm9yRWFjaChmdW5jdGlvbiAocikgeyBfZGVmaW5lUHJvcGVydHkoZSwgciwgdFtyXSk7IH0pIDogT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMgPyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyh0KSkgOiBvd25LZXlzKE9iamVjdCh0KSkuZm9yRWFjaChmdW5jdGlvbiAocikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgciwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LCByKSk7IH0pOyB9IHJldHVybiBlOyB9CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5kZXNjcmlwdGlvbi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5mcm9tLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmpvaW4uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNvcnQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3JzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnZhbHVlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnByb21pc2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zcGxpdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy50cmltLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgeyBOT1JNQU5fTkFNRSB9IGZyb20gJ0BzaGVsbC9jb25maWcvbGFiZWxzLWFubm90YXRpb25zJzsKaW1wb3J0IHsgX0NMT05FLCBfQ09ORklHLCBfRURJVCwgX1VORkxBRywgX1ZJRVcsIF9ZQU1MLCBBUywgTU9ERSB9IGZyb20gJ0BzaGVsbC9jb25maWcvcXVlcnktcGFyYW1zJzsKaW1wb3J0IHsgVklFV19JTl9BUEkgfSBmcm9tICdAc2hlbGwvc3RvcmUvcHJlZnMnOwppbXBvcnQgeyBhZGRPYmplY3QsIGFkZE9iamVjdHMsIGZpbmRCeSwgcmVtb3ZlQXQgfSBmcm9tICdAc2hlbGwvdXRpbHMvYXJyYXknOwppbXBvcnQgQ3VzdG9tVmFsaWRhdG9ycyBmcm9tICdAc2hlbGwvdXRpbHMvY3VzdG9tLXZhbGlkYXRvcnMnOwppbXBvcnQgeyBkb3dubG9hZEZpbGUsIGdlbmVyYXRlWmlwIH0gZnJvbSAnQHNoZWxsL3V0aWxzL2Rvd25sb2FkJzsKaW1wb3J0IHsgY2xvbmUsIGdldCBhcyBfZ2V0IH0gZnJvbSAnQHNoZWxsL3V0aWxzL29iamVjdCc7CmltcG9ydCB7IGVhY2hMaW1pdCB9IGZyb20gJ0BzaGVsbC91dGlscy9wcm9taXNlJzsKaW1wb3J0IHsgc29ydGFibGVOdW1lcmljU3VmZml4IH0gZnJvbSAnQHNoZWxsL3V0aWxzL3NvcnQnOwppbXBvcnQgeyBjb2VyY2VTdHJpbmdUeXBlVG9TY2FsYXJUeXBlLCBlc2NhcGVIdG1sLCB1Y0ZpcnN0IH0gZnJvbSAnQHNoZWxsL3V0aWxzL3N0cmluZyc7CmltcG9ydCB7IGRpc3BsYXlLZXlGb3IsIHZhbGlkYXRlQm9vbGVhbiwgdmFsaWRhdGVDaGFycywgdmFsaWRhdGVEbnNMaWtlVHlwZXMsIHZhbGlkYXRlTGVuZ3RoIH0gZnJvbSAnQHNoZWxsL3V0aWxzL3ZhbGlkYXRvcnMnOwppbXBvcnQgZm9ybVJ1bGVzR2VuZXJhdG9yIGZyb20gJ0BzaGVsbC91dGlscy92YWxpZGF0b3JzL2Zvcm1SdWxlcy9pbmRleCc7CmltcG9ydCB7IHdhaXRGb3IgfSBmcm9tICdAc2hlbGwvdXRpbHMvYXN5bmMnOwppbXBvcnQganN5YW1sIGZyb20gJ2pzLXlhbWwnOwppbXBvcnQgY29tcGFjdCBmcm9tICdsb2Rhc2gvY29tcGFjdCc7CmltcG9ydCBmb3JJbiBmcm9tICdsb2Rhc2gvZm9ySW4nOwppbXBvcnQgaXNFbXB0eSBmcm9tICdsb2Rhc2gvaXNFbXB0eSc7CmltcG9ydCBpc0Z1bmN0aW9uIGZyb20gJ2xvZGFzaC9pc0Z1bmN0aW9uJzsKaW1wb3J0IGlzU3RyaW5nIGZyb20gJ2xvZGFzaC9pc1N0cmluZyc7CmltcG9ydCB1bmlxIGZyb20gJ2xvZGFzaC91bmlxJzsKaW1wb3J0IFZ1ZSBmcm9tICd2dWUnOwppbXBvcnQgeyBub3JtYWxpemVUeXBlIH0gZnJvbSAnLi9ub3JtYWxpemUnOwppbXBvcnQgeyBFeHRlbnNpb25Qb2ludCwgQWN0aW9uTG9jYXRpb24gfSBmcm9tICdAc2hlbGwvY29yZS90eXBlcyc7CmltcG9ydCB7IGdldEFwcGxpY2FibGVFeHRlbnNpb25FbmhhbmNlbWVudHMgfSBmcm9tICdAc2hlbGwvY29yZS9wbHVnaW4taGVscGVycyc7CnZhciBTVFJJTkdfTElLRV9UWVBFUyA9IFsnc3RyaW5nJywgJ2RhdGUnLCAnYmxvYicsICdlbnVtJywgJ211bHRpbGluZScsICdtYXNrZWQnLCAncGFzc3dvcmQnLCAnZG5zTGFiZWwnLCAnaG9zdG5hbWUnXTsKdmFyIEROU19MSUtFX1RZUEVTID0gWydkbnNMYWJlbCcsICdkbnNMYWJlbFJlc3RyaWN0ZWQnLCAnaG9zdG5hbWUnXTsKdmFyIFJFTUFQX1NUQVRFID0gewogIGRpc2FibGVkOiAnaW5hY3RpdmUnLAogIG5vdGFwcGxpZWQ6ICdOb3QgQXBwbGllZCcsCiAgbm90cmVhZHk6ICdOb3QgUmVhZHknLAogIHdhaXRhcHBsaWVkOiAnV2FpdCBBcHBsaWVkJywKICBvdXRvZnN5bmM6ICdPdXQgb2YgU3luYycsCiAgJ2luLXByb2dyZXNzJzogJ0luIFByb2dyZXNzJywKICBnaXR1cGRhdGluZzogJ0dpdCBVcGRhdGluZycsCiAgZXJyYXBwbGllZDogJ0VyciBBcHBsaWVkJywKICB3YWl0Y2hlY2tpbjogJ1dhaXQgQ2hlY2stSW4nLAogIG9mZjogJ0Rpc2FibGVkJywKICB3YWl0aW5nZm9yaW5mcmFzdHJ1Y3R1cmU6ICdXYWl0aW5nIGZvciBJbmZyYScsCiAgd2FpdGluZ2Zvcm5vZGVyZWY6ICdXYWl0aW5nIGZvciBOb2RlIFJlZicKfTsKdmFyIERFRkFVTFRfQ09MT1IgPSAnd2FybmluZyc7CnZhciBERUZBVUxUX0lDT04gPSAneCc7CnZhciBERUZBVUxUX1dBSVRfSU5URVJWQUwgPSAxMDAwOwp2YXIgREVGQVVMVF9XQUlUX1RNSU1FT1VUID0gMzAwMDA7CmV4cG9ydCB2YXIgU1RBVEVTX0VOVU0gPSB7CiAgSU5fVVNFOiAnaW4tdXNlJywKICBJTl9QUk9HUkVTUzogJ2luLXByb2dyZXNzJywKICBQRU5ESU5HX1JPTExCQUNLOiAncGVuZGluZy1yb2xsYmFjaycsCiAgUEVORElOR19VUEdSQURFOiAncGVuZGluZy11cGdyYWRlJywKICBBQk9SVEVEOiAnYWJvcnRlZCcsCiAgQUNUSVZBVElORzogJ2FjdGl2YXRpbmcnLAogIEFDVElWRTogJ2FjdGl2ZScsCiAgQVZBSUxBQkxFOiAnYXZhaWxhYmxlJywKICBCQUNLRURfVVA6ICdiYWNrZWR1cCcsCiAgQk9VTkQ6ICdib3VuZCcsCiAgQlVJTERJTkc6ICdidWlsZGluZycsCiAgQ09NUExFVEVEOiAnY29tcGxldGVkJywKICBDT1JET05FRDogJ2NvcmRvbmVkJywKICBDT1VOVDogJ2NvdW50JywKICBDUkVBVEVEOiAnY3JlYXRlZCcsCiAgQ1JFQVRJTkc6ICdjcmVhdGluZycsCiAgREVBQ1RJVkFUSU5HOiAnZGVhY3RpdmF0aW5nJywKICBERUdSQURFRDogJ2RlZ3JhZGVkJywKICBERU5JRUQ6ICdkZW5pZWQnLAogIERFUExPWUVEOiAnZGVwbG95ZWQnLAogIERFUExPWUlORzogJ2RlcGxveWluZycsCiAgRElTQUJMRUQ6ICdkaXNhYmxlZCcsCiAgRElTQ09OTkVDVEVEOiAnZGlzY29ubmVjdGVkJywKICBEUkFJTkVEOiAnZHJhaW5lZCcsCiAgRFJBSU5JTkc6ICdkcmFpbmluZycsCiAgRVJSX0FQUExJRUQ6ICdlcnJhcHBsaWVkJywKICBFUlJPUjogJ2Vycm9yJywKICBFUlJPUklORzogJ2Vycm9yaW5nJywKICBFUlJPUlM6ICdlcnJvcnMnLAogIEVYUElSRUQ6ICdleHBpcmVkJywKICBFWFBJUklORzogJ2V4cGlyaW5nJywKICBGQUlMOiAnZmFpbCcsCiAgRkFJTEVEOiAnZmFpbGVkJywKICBIRUFMVEhZOiAnaGVhbHRoeScsCiAgSU5BQ1RJVkU6ICdpbmFjdGl2ZScsCiAgSU5GTzogJ2luZm8nLAogIElOSVRJQUxJWklORzogJ2luaXRpYWxpemluZycsCiAgSU5QUk9HUkVTUzogJ2lucHJvZ3Jlc3MnLAogIExPQ0tFRDogJ2xvY2tlZCcsCiAgTUlHUkFUSU5HOiAnbWlncmF0aW5nJywKICBNSVNTSU5HOiAnbWlzc2luZycsCiAgTU9ESUZJRUQ6ICdtb2RpZmllZCcsCiAgTk9UX0FQUExJQ0FCTEU6ICdub3RBcHBsaWNhYmxlJywKICBOT1RfQVBMTElFRDogJ25vdGFwcGxpZWQnLAogIE5PVF9SRUFEWTogJ25vdHJlYWR5JywKICBPRkY6ICdvZmYnLAogIE9SUEhBTkVEOiAnb3JwaGFuZWQnLAogIE9USEVSOiAnb3RoZXInLAogIE9VVF9PRl9TWU5DOiAnb3V0b2ZzeW5jJywKICBPTl9HT0lORzogJ29uLWdvaW5nJywKICBQQVNTOiAncGFzcycsCiAgUEFTU0VEOiAncGFzc2VkJywKICBQQVVTRUQ6ICdwYXVzZWQnLAogIFBFTkRJTkc6ICdwZW5kaW5nJywKICBQUk9WSVNJT05JTkc6ICdwcm92aXNpb25pbmcnLAogIFBST1ZJU0lPTkVEOiAncHJvdmlzaW9uZWQnLAogIFBVUkdFRDogJ3B1cmdlZCcsCiAgUFVSR0lORzogJ3B1cmdpbmcnLAogIFJFQURZOiAncmVhZHknLAogIFJFQ09OTkVDVElORzogJ3JlY29ubmVjdGluZycsCiAgUkVHSVNURVJJTkc6ICdyZWdpc3RlcmluZycsCiAgUkVJTklUSUFMSVpJTkc6ICdyZWluaXRpYWxpemluZycsCiAgUkVMRUFTRUQ6ICdyZWxlYXNlZCcsCiAgUkVNT1ZFRDogJ3JlbW92ZWQnLAogIFJFTU9WSU5HOiAncmVtb3ZpbmcnLAogIFJFUVVFU1RFRDogJ3JlcXVlc3RlZCcsCiAgUkVTVEFSVElORzogJ3Jlc3RhcnRpbmcnLAogIFJFU1RPUklORzogJ3Jlc3RvcmluZycsCiAgUkVTSVpJTkc6ICdyZXNpemluZycsCiAgUlVOTklORzogJ3J1bm5pbmcnLAogIFNLSVA6ICdza2lwJywKICBTS0lQUEVEOiAnc2tpcHBlZCcsCiAgU1RBUlRJTkc6ICdzdGFydGluZycsCiAgU1RPUFBFRDogJ3N0b3BwZWQnLAogIFNUT1BQSU5HOiAnc3RvcHBpbmcnLAogIFNVQ0NFRURFRDogJ3N1Y2NlZWRlZCcsCiAgU1VDQ0VTUzogJ3N1Y2Nlc3MnLAogIFNVQ0NFU1NGVUw6ICdzdWNjZXNzZnVsJywKICBTVVBFUlNFREVEOiAnc3VwZXJzZWRlZCcsCiAgU1VTUEVOREVEOiAnc3VzcGVuZGVkJywKICBVTkFWQUlMQUJMRTogJ3VuYXZhaWxhYmxlJywKICBVTkhFQUxUSFk6ICd1bmhlYWx0aHknLAogIFVOSU5TVEFMTEVEOiAndW5pbnN0YWxsZWQnLAogIFVOSU5TVEFMTElORzogJ3VuaW5zdGFsbGluZycsCiAgVU5LTk9XTjogJ3Vua25vd24nLAogIFVOVFJJR0dFUkVEOiAndW50cmlnZ2VyZWQnLAogIFVQREFUSU5HOiAndXBkYXRpbmcnLAogIFdBSVRfQVBQTElFRDogJ3dhaXRhcHBsaWVkJywKICBXQUlUX0NIRUNLSU46ICd3YWl0Y2hlY2tpbicsCiAgV0FJVElORzogJ3dhaXRpbmcnLAogIFdBUk5JTkc6ICd3YXJuaW5nJwp9OwpleHBvcnQgZnVuY3Rpb24gbWFwU3RhdGVUb0VudW0oc3RhdHVzU3RyaW5nKSB7CiAgLy8gZS5nLiBpbiBmbGVldCBTdGF0dXMgaXMgQ2FwaXRhbGl6ZWQuIFRoaXMgZnVuY3Rpb24gd2lsbCBtYXAgaXQgdG8gdGhlIGVudW0KICByZXR1cm4gT2JqZWN0LnZhbHVlcyhTVEFURVNfRU5VTSkuZmluZChmdW5jdGlvbiAodmFsKSB7CiAgICByZXR1cm4gdmFsLnRvTG93ZXJDYXNlKCkgPT09IHN0YXR1c1N0cmluZy50b0xvY2FsZUxvd2VyQ2FzZSgpOwogIH0pOwp9CmV4cG9ydCB2YXIgU1RBVEVTID0gKF9TVEFURVMgPSB7fSwgX2RlZmluZVByb3BlcnR5KF9kZWZpbmVQcm9wZXJ0eShfZGVmaW5lUHJvcGVydHkoX2RlZmluZVByb3BlcnR5KF9kZWZpbmVQcm9wZXJ0eShfZGVmaW5lUHJvcGVydHkoX2RlZmluZVByb3BlcnR5KF9kZWZpbmVQcm9wZXJ0eShfZGVmaW5lUHJvcGVydHkoX2RlZmluZVByb3BlcnR5KF9TVEFURVMsIFNUQVRFU19FTlVNLklOX1VTRSwgewogIGNvbG9yOiAnc3VjY2VzcycsCiAgaWNvbjogJ2RvdC1vcGVuJywKICBsYWJlbDogJ0luIFVzZScsCiAgY29tcG91bmRJY29uOiAnY2hlY2ttYXJrJwp9KSwgU1RBVEVTX0VOVU0uSU5fUFJPR1JFU1MsIHsKICBjb2xvcjogJ2luZm8nLAogIGljb246ICd0YWcnLAogIGxhYmVsOiAnSW4gUHJvZ3Jlc3MnLAogIGNvbXBvdW5kSWNvbjogJ2luZm8nCn0pLCBTVEFURVNfRU5VTS5QRU5ESU5HX1JPTExCQUNLLCB7CiAgY29sb3I6ICdpbmZvJywKICBpY29uOiAnZG90LWhhbGYnLAogIGxhYmVsOiAnUGVuZGluZyBSb2xsYmFjaycsCiAgY29tcG91bmRJY29uOiAnaW5mbycKfSksIFNUQVRFU19FTlVNLlBFTkRJTkdfVVBHUkFERSwgewogIGNvbG9yOiAnaW5mbycsCiAgaWNvbjogJ2RvdC1oYWxmJywKICBsYWJlbDogJ1BlbmRpbmcgVXBkYXRlJywKICBjb21wb3VuZEljb246ICdpbmZvJwp9KSwgU1RBVEVTX0VOVU0uQUJPUlRFRCwgewogIGNvbG9yOiAnd2FybmluZycsCiAgaWNvbjogJ2Vycm9yJywKICBsYWJlbDogJ0Fib3J0ZWQnLAogIGNvbXBvdW5kSWNvbjogJ3dhcm5pbmcnCn0pLCBTVEFURVNfRU5VTS5BQ1RJVkFUSU5HLCB7CiAgY29sb3I6ICdpbmZvJywKICBpY29uOiAndGFnJywKICBsYWJlbDogJ0FjdGl2YXRpbmcnLAogIGNvbXBvdW5kSWNvbjogJ2luZm8nCn0pLCBTVEFURVNfRU5VTS5BQ1RJVkUsIHsKICBjb2xvcjogJ3N1Y2Nlc3MnLAogIGljb246ICdkb3Qtb3BlbicsCiAgbGFiZWw6ICdBY3RpdmUnLAogIGNvbXBvdW5kSWNvbjogJ2NoZWNrbWFyaycKfSksIFNUQVRFU19FTlVNLkFWQUlMQUJMRSwgewogIGNvbG9yOiAnc3VjY2VzcycsCiAgaWNvbjogJ2RvdC1vcGVuJywKICBsYWJlbDogJ0F2YWlsYWJsZScsCiAgY29tcG91bmRJY29uOiAnY2hlY2ttYXJrJwp9KSwgU1RBVEVTX0VOVU0uQkFDS0VEX1VQLCB7CiAgY29sb3I6ICdzdWNjZXNzJywKICBpY29uOiAnYmFja3VwJywKICBsYWJlbDogJ0JhY2tlZCBVcCcsCiAgY29tcG91bmRJY29uOiAnY2hlY2ttYXJrJwp9KSwgU1RBVEVTX0VOVU0uQk9VTkQsIHsKICBjb2xvcjogJ3N1Y2Nlc3MnLAogIGljb246ICdkb3QnLAogIGxhYmVsOiAnQm91bmQnLAogIGNvbXBvdW5kSWNvbjogJ2NoZWNrbWFyaycKfSksIF9kZWZpbmVQcm9wZXJ0eShfZGVmaW5lUHJvcGVydHkoX2RlZmluZVByb3BlcnR5KF9kZWZpbmVQcm9wZXJ0eShfZGVmaW5lUHJvcGVydHkoX2RlZmluZVByb3BlcnR5KF9kZWZpbmVQcm9wZXJ0eShfZGVmaW5lUHJvcGVydHkoX2RlZmluZVByb3BlcnR5KF9kZWZpbmVQcm9wZXJ0eShfU1RBVEVTLCBTVEFURVNfRU5VTS5CVUlMRElORywgewogIGNvbG9yOiAnc3VjY2VzcycsCiAgaWNvbjogJ2RvdC1vcGVuJywKICBsYWJlbDogJ0J1aWxkaW5nJywKICBjb21wb3VuZEljb246ICdjaGVja21hcmsnCn0pLCBTVEFURVNfRU5VTS5DT01QTEVURUQsIHsKICBjb2xvcjogJ3N1Y2Nlc3MnLAogIGljb246ICdkb3QnLAogIGxhYmVsOiAnQ29tcGxldGVkJywKICBjb21wb3VuZEljb246ICdjaGVja21hcmsnCn0pLCBTVEFURVNfRU5VTS5DT1JET05FRCwgewogIGNvbG9yOiAnaW5mbycsCiAgaWNvbjogJ3RhZycsCiAgbGFiZWw6ICdDb3Jkb25lZCcsCiAgY29tcG91bmRJY29uOiAnaW5mbycKfSksIFNUQVRFU19FTlVNLkNPVU5ULCB7CiAgY29sb3I6ICdzdWNjZXNzJywKICBpY29uOiAnZG90LW9wZW4nLAogIGxhYmVsOiAnQ291bnQnLAogIGNvbXBvdW5kSWNvbjogJ2NoZWNrbWFyaycKfSksIFNUQVRFU19FTlVNLkNSRUFURUQsIHsKICBjb2xvcjogJ2luZm8nLAogIGljb246ICd0YWcnLAogIGxhYmVsOiAnQ3JlYXRlZCcsCiAgY29tcG91bmRJY29uOiAnaW5mbycKfSksIFNUQVRFU19FTlVNLkNSRUFUSU5HLCB7CiAgY29sb3I6ICdpbmZvJywKICBpY29uOiAndGFnJywKICBsYWJlbDogJ0NyZWF0aW5nJywKICBjb21wb3VuZEljb246ICdpbmZvJwp9KSwgU1RBVEVTX0VOVU0uREVBQ1RJVkFUSU5HLCB7CiAgY29sb3I6ICdpbmZvJywKICBpY29uOiAnYWRqdXN0JywKICBsYWJlbDogJ0RlYWN0aXZhdGluZycsCiAgY29tcG91bmRJY29uOiAnaW5mbycKfSksIFNUQVRFU19FTlVNLkRFR1JBREVELCB7CiAgY29sb3I6ICd3YXJuaW5nJywKICBpY29uOiAnZXJyb3InLAogIGxhYmVsOiAnRGVncmFkZWQnLAogIGNvbXBvdW5kSWNvbjogJ3dhcm5pbmcnCn0pLCBTVEFURVNfRU5VTS5ERU5JRUQsIHsKICBjb2xvcjogJ2Vycm9yJywKICBpY29uOiAnYWRqdXN0JywKICBsYWJlbDogJ0RlbmllZCcsCiAgY29tcG91bmRJY29uOiAnZXJyb3InCn0pLCBTVEFURVNfRU5VTS5ERVBMT1lFRCwgewogIGNvbG9yOiAnc3VjY2VzcycsCiAgaWNvbjogJ2RvdC1vcGVuJywKICBsYWJlbDogJ0RlcGxveWVkJywKICBjb21wb3VuZEljb246ICdjaGVja21hcmsnCn0pLCBfZGVmaW5lUHJvcGVydHkoX2RlZmluZVByb3BlcnR5KF9kZWZpbmVQcm9wZXJ0eShfZGVmaW5lUHJvcGVydHkoX2RlZmluZVByb3BlcnR5KF9kZWZpbmVQcm9wZXJ0eShfZGVmaW5lUHJvcGVydHkoX2RlZmluZVByb3BlcnR5KF9kZWZpbmVQcm9wZXJ0eShfZGVmaW5lUHJvcGVydHkoX1NUQVRFUywgU1RBVEVTX0VOVU0uRElTQUJMRUQsIHsKICBjb2xvcjogJ3dhcm5pbmcnLAogIGljb246ICdlcnJvcicsCiAgbGFiZWw6ICdEaXNhYmxlZCcsCiAgY29tcG91bmRJY29uOiAnd2FybmluZycKfSksIFNUQVRFU19FTlVNLkRJU0NPTk5FQ1RFRCwgewogIGNvbG9yOiAnd2FybmluZycsCiAgaWNvbjogJ2Vycm9yJywKICBsYWJlbDogJ0Rpc2Nvbm5lY3RlZCcsCiAgY29tcG91bmRJY29uOiAnd2FybmluZycKfSksIFNUQVRFU19FTlVNLkRSQUlORUQsIHsKICBjb2xvcjogJ2luZm8nLAogIGljb246ICd0YWcnLAogIGxhYmVsOiAnRHJhaW5lZCcsCiAgY29tcG91bmRJY29uOiAnaW5mbycKfSksIFNUQVRFU19FTlVNLkRSQUlOSU5HLCB7CiAgY29sb3I6ICd3YXJuaW5nJywKICBpY29uOiAndGFnJywKICBsYWJlbDogJ0RyYWluaW5nJywKICBjb21wb3VuZEljb246ICd3YXJuaW5nJwp9KSwgU1RBVEVTX0VOVU0uRVJSX0FQUExJRUQsIHsKICBjb2xvcjogJ2Vycm9yJywKICBpY29uOiAnZXJyb3InLAogIGxhYmVsOiAnRXJyb3IgQXBwbGllZCcsCiAgY29tcG91bmRJY29uOiAnZXJyb3InCn0pLCBTVEFURVNfRU5VTS5FUlJPUiwgewogIGNvbG9yOiAnZXJyb3InLAogIGljb246ICdlcnJvcicsCiAgbGFiZWw6ICdFcnJvcicsCiAgY29tcG91bmRJY29uOiAnZXJyb3InCn0pLCBTVEFURVNfRU5VTS5FUlJPUklORywgewogIGNvbG9yOiAnZXJyb3InLAogIGljb246ICdlcnJvcicsCiAgbGFiZWw6ICdFcnJvcmluZycsCiAgY29tcG91bmRJY29uOiAnZXJyb3InCn0pLCBTVEFURVNfRU5VTS5FUlJPUlMsIHsKICBjb2xvcjogJ2Vycm9yJywKICBpY29uOiAnZXJyb3InLAogIGxhYmVsOiAnRXJyb3JzJywKICBjb21wb3VuZEljb246ICdlcnJvcicKfSksIFNUQVRFU19FTlVNLkVYUElSRUQsIHsKICBjb2xvcjogJ2Vycm9yJywKICBpY29uOiAnZXJyb3InLAogIGxhYmVsOiAnRXhwaXJlZCcsCiAgY29tcG91bmRJY29uOiAnd2FybmluZycKfSksIFNUQVRFU19FTlVNLkVYUElSSU5HLCB7CiAgY29sb3I6ICd3YXJuaW5nJywKICBpY29uOiAnZXJyb3InLAogIGxhYmVsOiAnRXhwaXJpbmcnLAogIGNvbXBvdW5kSWNvbjogJ2Vycm9yJwp9KSwgX2RlZmluZVByb3BlcnR5KF9kZWZpbmVQcm9wZXJ0eShfZGVmaW5lUHJvcGVydHkoX2RlZmluZVByb3BlcnR5KF9kZWZpbmVQcm9wZXJ0eShfZGVmaW5lUHJvcGVydHkoX2RlZmluZVByb3BlcnR5KF9kZWZpbmVQcm9wZXJ0eShfZGVmaW5lUHJvcGVydHkoX2RlZmluZVByb3BlcnR5KF9TVEFURVMsIFNUQVRFU19FTlVNLkZBSUwsIHsKICBjb2xvcjogJ2Vycm9yJywKICBpY29uOiAnZXJyb3InLAogIGxhYmVsOiAnRmFpbCcsCiAgY29tcG91bmRJY29uOiAnZXJyb3InCn0pLCBTVEFURVNfRU5VTS5GQUlMRUQsIHsKICBjb2xvcjogJ2Vycm9yJywKICBpY29uOiAnZXJyb3InLAogIGxhYmVsOiAnRmFpbGVkJywKICBjb21wb3VuZEljb246ICdlcnJvcicKfSksIFNUQVRFU19FTlVNLkhFQUxUSFksIHsKICBjb2xvcjogJ3N1Y2Nlc3MnLAogIGljb246ICdkb3Qtb3BlbicsCiAgbGFiZWw6ICdIZWFsdGh5JywKICBjb21wb3VuZEljb246ICdjaGVja21hcmsnCn0pLCBTVEFURVNfRU5VTS5JTkFDVElWRSwgewogIGNvbG9yOiAnZXJyb3InLAogIGljb246ICdkb3QnLAogIGxhYmVsOiAnSW5hY3RpdmUnLAogIGNvbXBvdW5kSWNvbjogJ2Vycm9yJwp9KSwgU1RBVEVTX0VOVU0uSU5JVElBTElaSU5HLCB7CiAgY29sb3I6ICd3YXJuaW5nJywKICBpY29uOiAnZXJyb3InLAogIGxhYmVsOiAnSW5pdGlhbGl6aW5nJywKICBjb21wb3VuZEljb246ICd3YXJuaW5nJwp9KSwgU1RBVEVTX0VOVU0uSU5QUk9HUkVTUywgewogIGNvbG9yOiAnaW5mbycsCiAgaWNvbjogJ3NwaW5uZXInLAogIGxhYmVsOiAnSW4gUHJvZ3Jlc3MnLAogIGNvbXBvdW5kSWNvbjogJ2luZm8nCn0pLCBTVEFURVNfRU5VTS5JTkZPLCB7CiAgY29sb3I6ICdpbmZvJywKICBpY29uOiAnaW5mbycsCiAgbGFiZWw6ICdJbmZvJywKICBjb21wb3VuZEljb246ICdpbmZvJwp9KSwgU1RBVEVTX0VOVU0uTE9DS0VELCB7CiAgY29sb3I6ICd3YXJuaW5nJywKICBpY29uOiAnYWRqdXN0JywKICBsYWJlbDogJ0xvY2tlZCcsCiAgY29tcG91bmRJY29uOiAnd2FybmluZycKfSksIFNUQVRFU19FTlVNLk1JR1JBVElORywgewogIGNvbG9yOiAnaW5mbycsCiAgaWNvbjogJ2luZm8nLAogIGxhYmVsOiAnTWlncmF0ZWQnLAogIGNvbXBvdW5kSWNvbjogJ2luZm8nCn0pLCBTVEFURVNfRU5VTS5NSVNTSU5HLCB7CiAgY29sb3I6ICd3YXJuaW5nJywKICBpY29uOiAnYWRqdXN0JywKICBsYWJlbDogJ01pc3NpbmcnLAogIGNvbXBvdW5kSWNvbjogJ3dhcm5pbmcnCn0pLCBfZGVmaW5lUHJvcGVydHkoX2RlZmluZVByb3BlcnR5KF9kZWZpbmVQcm9wZXJ0eShfZGVmaW5lUHJvcGVydHkoX2RlZmluZVByb3BlcnR5KF9kZWZpbmVQcm9wZXJ0eShfZGVmaW5lUHJvcGVydHkoX2RlZmluZVByb3BlcnR5KF9kZWZpbmVQcm9wZXJ0eShfZGVmaW5lUHJvcGVydHkoX1NUQVRFUywgU1RBVEVTX0VOVU0uTU9ESUZJRUQsIHsKICBjb2xvcjogJ3dhcm5pbmcnLAogIGljb246ICdlZGl0JywKICBsYWJlbDogJ01vZGlmaWVkJywKICBjb21wb3VuZEljb246ICd3YXJuaW5nJwp9KSwgU1RBVEVTX0VOVU0uTk9UX0FQUExJQ0FCTEUsIHsKICBjb2xvcjogJ3dhcm5pbmcnLAogIGljb246ICd0YWcnLAogIGxhYmVsOiAnTm90IEFwcGxpY2FibGUnLAogIGNvbXBvdW5kSWNvbjogJ3dhcm5pbmcnCn0pLCBTVEFURVNfRU5VTS5OT1RfQVBMTElFRCwgewogIGNvbG9yOiAnd2FybmluZycsCiAgaWNvbjogJ3RhZycsCiAgbGFiZWw6ICdOb3QgQXBwbGllZCcsCiAgY29tcG91bmRJY29uOiAnd2FybmluZycKfSksIFNUQVRFU19FTlVNLk5PVF9SRUFEWSwgewogIGNvbG9yOiAnd2FybmluZycsCiAgaWNvbjogJ3RhZycsCiAgbGFiZWw6ICdOb3QgUmVhZHknLAogIGNvbXBvdW5kSWNvbjogJ3dhcm5pbmcnCn0pLCBTVEFURVNfRU5VTS5PRkYsIHsKICBjb2xvcjogJ2RhcmtlcicsCiAgaWNvbjogJ2Vycm9yJywKICBsYWJlbDogJ09mZicKfSksIFNUQVRFU19FTlVNLk9OX0dPSU5HLCB7CiAgY29sb3I6ICdpbmZvJywKICBpY29uOiAnaW5mbycsCiAgbGFiZWw6ICdJbmZvJywKICBjb21wb3VuZEljb246ICdpbmZvJwp9KSwgU1RBVEVTX0VOVU0uT1JQSEFORUQsIHsKICBjb2xvcjogJ3dhcm5pbmcnLAogIGljb246ICd0YWcnLAogIGxhYmVsOiAnT3JwaGFuZWQnLAogIGNvbXBvdW5kSWNvbjogJ3dhcm5pbmcnCn0pLCBTVEFURVNfRU5VTS5PVEhFUiwgewogIGNvbG9yOiAnaW5mbycsCiAgaWNvbjogJ2luZm8nLAogIGxhYmVsOiAnT3RoZXInLAogIGNvbXBvdW5kSWNvbjogJ2luZm8nCn0pLCBTVEFURVNfRU5VTS5PVVRfT0ZfU1lOQywgewogIGNvbG9yOiAnd2FybmluZycsCiAgaWNvbjogJ3RhZycsCiAgbGFiZWw6ICdPdXQgT2YgU3luYycsCiAgY29tcG91bmRJY29uOiAnd2FybmluZycKfSksIFNUQVRFU19FTlVNLlBBU1MsIHsKICBjb2xvcjogJ3N1Y2Nlc3MnLAogIGljb246ICdkb3QtZG90ZmlsbCcsCiAgbGFiZWw6ICdQYXNzJywKICBjb21wb3VuZEljb246ICdjaGVja21hcmsnCn0pLCBfZGVmaW5lUHJvcGVydHkoX2RlZmluZVByb3BlcnR5KF9kZWZpbmVQcm9wZXJ0eShfZGVmaW5lUHJvcGVydHkoX2RlZmluZVByb3BlcnR5KF9kZWZpbmVQcm9wZXJ0eShfZGVmaW5lUHJvcGVydHkoX2RlZmluZVByb3BlcnR5KF9kZWZpbmVQcm9wZXJ0eShfZGVmaW5lUHJvcGVydHkoX1NUQVRFUywgU1RBVEVTX0VOVU0uUEFTU0VELCB7CiAgY29sb3I6ICdzdWNjZXNzJywKICBpY29uOiAnZG90LWRvdGZpbGwnLAogIGxhYmVsOiAnUGFzc2VkJywKICBjb21wb3VuZEljb246ICdjaGVja21hcmsnCn0pLCBTVEFURVNfRU5VTS5QQVVTRUQsIHsKICBjb2xvcjogJ2luZm8nLAogIGljb246ICdpbmZvJywKICBsYWJlbDogJ1BhdXNlZCcsCiAgY29tcG91bmRJY29uOiAnaW5mbycKfSksIFNUQVRFU19FTlVNLlBFTkRJTkcsIHsKICBjb2xvcjogJ2luZm8nLAogIGljb246ICd0YWcnLAogIGxhYmVsOiAnUGVuZGluZycsCiAgY29tcG91bmRJY29uOiAnaW5mbycKfSksIFNUQVRFU19FTlVNLlBST1ZJU0lPTklORywgewogIGNvbG9yOiAnaW5mbycsCiAgaWNvbjogJ2RvdCcsCiAgbGFiZWw6ICdQcm92aXNpb25pbmcnLAogIGNvbXBvdW5kSWNvbjogJ2luZm8nCn0pLCBTVEFURVNfRU5VTS5QUk9WSVNJT05FRCwgewogIGNvbG9yOiAnc3VjY2VzcycsCiAgaWNvbjogJ2RvdCcsCiAgbGFiZWw6ICdQcm92aXNpb25lZCcsCiAgY29tcG91bmRJY29uOiAnY2hlY2ttYXJrJwp9KSwgU1RBVEVTX0VOVU0uUFVSR0VELCB7CiAgY29sb3I6ICdlcnJvcicsCiAgaWNvbjogJ3B1cmdlZCcsCiAgbGFiZWw6ICdQdXJnZWQnLAogIGNvbXBvdW5kSWNvbjogJ2Vycm9yJwp9KSwgU1RBVEVTX0VOVU0uUFVSR0lORywgewogIGNvbG9yOiAnaW5mbycsCiAgaWNvbjogJ3B1cmdlZCcsCiAgbGFiZWw6ICdQdXJnaW5nJywKICBjb21wb3VuZEljb246ICdpbmZvJwp9KSwgU1RBVEVTX0VOVU0uUkVBRFksIHsKICBjb2xvcjogJ3N1Y2Nlc3MnLAogIGljb246ICdkb3Qtb3BlbicsCiAgbGFiZWw6ICdSZWFkeScsCiAgY29tcG91bmRJY29uOiAnY2hlY2ttYXJrJwp9KSwgU1RBVEVTX0VOVU0uUkVDT05ORUNUSU5HLCB7CiAgY29sb3I6ICdlcnJvcicsCiAgaWNvbjogJ2Vycm9yJywKICBsYWJlbDogJ1JlY29ubmVjdGluZycsCiAgY29tcG91bmRJY29uOiAnZXJyb3InCn0pLCBTVEFURVNfRU5VTS5SRUdJU1RFUklORywgewogIGNvbG9yOiAnaW5mbycsCiAgaWNvbjogJ3RhZycsCiAgbGFiZWw6ICdSZWdpc3RlcmluZycsCiAgY29tcG91bmRJY29uOiAnaW5mbycKfSksIF9kZWZpbmVQcm9wZXJ0eShfZGVmaW5lUHJvcGVydHkoX2RlZmluZVByb3BlcnR5KF9kZWZpbmVQcm9wZXJ0eShfZGVmaW5lUHJvcGVydHkoX2RlZmluZVByb3BlcnR5KF9kZWZpbmVQcm9wZXJ0eShfZGVmaW5lUHJvcGVydHkoX2RlZmluZVByb3BlcnR5KF9kZWZpbmVQcm9wZXJ0eShfU1RBVEVTLCBTVEFURVNfRU5VTS5SRUlOSVRJQUxJWklORywgewogIGNvbG9yOiAnd2FybmluZycsCiAgaWNvbjogJ2Vycm9yJywKICBsYWJlbDogJ1JlaW5pdGlhbGl6aW5nJywKICBjb21wb3VuZEljb246ICd3YXJuaW5nJwp9KSwgU1RBVEVTX0VOVU0uUkVMRUFTRUQsIHsKICBjb2xvcjogJ3dhcm5pbmcnLAogIGljb246ICdlcnJvcicsCiAgbGFiZWw6ICdSZWxlYXNlZCcsCiAgY29tcG91bmRJY29uOiAnd2FybmluZycKfSksIFNUQVRFU19FTlVNLlJFTU9WRUQsIHsKICBjb2xvcjogJ2Vycm9yJywKICBpY29uOiAndHJhc2gnLAogIGxhYmVsOiAnUmVtb3ZlZCcsCiAgY29tcG91bmRJY29uOiAnZXJyb3InCn0pLCBTVEFURVNfRU5VTS5SRU1PVklORywgewogIGNvbG9yOiAnaW5mbycsCiAgaWNvbjogJ3RyYXNoJywKICBsYWJlbDogJ1JlbW92aW5nJywKICBjb21wb3VuZEljb246ICdpbmZvJwp9KSwgU1RBVEVTX0VOVU0uUkVRVUVTVEVELCB7CiAgY29sb3I6ICdpbmZvJywKICBpY29uOiAndGFnJywKICBsYWJlbDogJ1JlcXVlc3RlZCcsCiAgY29tcG91bmRJY29uOiAnaW5mbycKfSksIFNUQVRFU19FTlVNLlJFU1RBUlRJTkcsIHsKICBjb2xvcjogJ2luZm8nLAogIGljb246ICdhZGp1c3QnLAogIGxhYmVsOiAnUmVzdGFydGluZycsCiAgY29tcG91bmRJY29uOiAnaW5mbycKfSksIFNUQVRFU19FTlVNLlJFU1RPUklORywgewogIGNvbG9yOiAnaW5mbycsCiAgaWNvbjogJ21lZGljYWxjcm9zcycsCiAgbGFiZWw6ICdSZXN0b3JpbmcnLAogIGNvbXBvdW5kSWNvbjogJ2luZm8nCn0pLCBTVEFURVNfRU5VTS5SRVNJWklORywgewogIGNvbG9yOiAnd2FybmluZycsCiAgaWNvbjogJ2RvdCcsCiAgbGFiZWw6ICdSZXNpemluZycsCiAgY29tcG91bmRJY29uOiAnd2FybmluZycKfSksIFNUQVRFU19FTlVNLlJVTk5JTkcsIHsKICBjb2xvcjogJ3N1Y2Nlc3MnLAogIGljb246ICdkb3Qtb3BlbicsCiAgbGFiZWw6ICdSdW5uaW5nJywKICBjb21wb3VuZEljb246ICdjaGVja21hcmsnCn0pLCBTVEFURVNfRU5VTS5TS0lQLCB7CiAgY29sb3I6ICdpbmZvJywKICBpY29uOiAnZG90LW9wZW4nLAogIGxhYmVsOiAnU2tpcCcsCiAgY29tcG91bmRJY29uOiAnaW5mbycKfSksIF9kZWZpbmVQcm9wZXJ0eShfZGVmaW5lUHJvcGVydHkoX2RlZmluZVByb3BlcnR5KF9kZWZpbmVQcm9wZXJ0eShfZGVmaW5lUHJvcGVydHkoX2RlZmluZVByb3BlcnR5KF9kZWZpbmVQcm9wZXJ0eShfZGVmaW5lUHJvcGVydHkoX2RlZmluZVByb3BlcnR5KF9kZWZpbmVQcm9wZXJ0eShfU1RBVEVTLCBTVEFURVNfRU5VTS5TS0lQUEVELCB7CiAgY29sb3I6ICdpbmZvJywKICBpY29uOiAnZG90LW9wZW4nLAogIGxhYmVsOiAnU2tpcHBlZCcsCiAgY29tcG91bmRJY29uOiAnaW5mbycKfSksIFNUQVRFU19FTlVNLlNUQVJUSU5HLCB7CiAgY29sb3I6ICdpbmZvJywKICBpY29uOiAnYWRqdXN0JywKICBsYWJlbDogJ1N0YXJ0aW5nJywKICBjb21wb3VuZEljb246ICdpbmZvJwp9KSwgU1RBVEVTX0VOVU0uU1RPUFBFRCwgewogIGNvbG9yOiAnZXJyb3InLAogIGljb246ICdkb3QnLAogIGxhYmVsOiAnU3RvcHBlZCcsCiAgY29tcG91bmRJY29uOiAnZXJyb3InCn0pLCBTVEFURVNfRU5VTS5TVE9QUElORywgewogIGNvbG9yOiAnaW5mbycsCiAgaWNvbjogJ2FkanVzdCcsCiAgbGFiZWw6ICdTdG9wcGluZycsCiAgY29tcG91bmRJY29uOiAnaW5mbycKfSksIFNUQVRFU19FTlVNLlNVQ0NFRURFRCwgewogIGNvbG9yOiAnc3VjY2VzcycsCiAgaWNvbjogJ2RvdC1kb3RmaWxsJywKICBsYWJlbDogJ1N1Y2NlZWRlZCcsCiAgY29tcG91bmRJY29uOiAnY2hlY2ttYXJrJwp9KSwgU1RBVEVTX0VOVU0uU1VDQ0VTUywgewogIGNvbG9yOiAnc3VjY2VzcycsCiAgaWNvbjogJ2RvdC1vcGVuJywKICBsYWJlbDogJ1N1Y2Nlc3MnLAogIGNvbXBvdW5kSWNvbjogJ2NoZWNrbWFyaycKfSksIFNUQVRFU19FTlVNLlNVQ0NFU1NGVUwsIHsKICBjb2xvcjogJ3N1Y2Nlc3MnLAogIGljb246ICdkb3Qtb3BlbicsCiAgbGFiZWw6ICdTdWNjZXNzZnVsJwp9KSwgU1RBVEVTX0VOVU0uU1VQRVJTRURFRCwgewogIGNvbG9yOiAnaW5mbycsCiAgaWNvbjogJ2RvdC1vcGVuJywKICBsYWJlbDogJ1N1cGVyc2VkZWQnLAogIGNvbXBvdW5kSWNvbjogJ2luZm8nCn0pLCBTVEFURVNfRU5VTS5TVVNQRU5ERUQsIHsKICBjb2xvcjogJ2luZm8nLAogIGljb246ICdwYXVzZScsCiAgbGFiZWw6ICdTdXNwZW5kZWQnLAogIGNvbXBvdW5kSWNvbjogJ2luZm8nCn0pLCBTVEFURVNfRU5VTS5VTkFWQUlMQUJMRSwgewogIGNvbG9yOiAnZXJyb3InLAogIGljb246ICdlcnJvcicsCiAgbGFiZWw6ICdVbmF2YWlsYWJsZScsCiAgY29tcG91bmRJY29uOiAnZXJyb3InCn0pLCBfZGVmaW5lUHJvcGVydHkoX2RlZmluZVByb3BlcnR5KF9kZWZpbmVQcm9wZXJ0eShfZGVmaW5lUHJvcGVydHkoX2RlZmluZVByb3BlcnR5KF9kZWZpbmVQcm9wZXJ0eShfZGVmaW5lUHJvcGVydHkoX2RlZmluZVByb3BlcnR5KF9kZWZpbmVQcm9wZXJ0eShfZGVmaW5lUHJvcGVydHkoX1NUQVRFUywgU1RBVEVTX0VOVU0uVU5IRUFMVEhZLCB7CiAgY29sb3I6ICdlcnJvcicsCiAgaWNvbjogJ2Vycm9yJywKICBsYWJlbDogJ1VuaGVhbHRoeScsCiAgY29tcG91bmRJY29uOiAnZXJyb3InCn0pLCBTVEFURVNfRU5VTS5VTklOU1RBTExFRCwgewogIGNvbG9yOiAnaW5mbycsCiAgaWNvbjogJ3RyYXNoJywKICBsYWJlbDogJ1VuaW5zdGFsbGVkJywKICBjb21wb3VuZEljb246ICdpbmZvJwp9KSwgU1RBVEVTX0VOVU0uVU5JTlNUQUxMSU5HLCB7CiAgY29sb3I6ICdpbmZvJywKICBpY29uOiAndHJhc2gnLAogIGxhYmVsOiAnVW5pbnN0YWxsaW5nJywKICBjb21wb3VuZEljb246ICdpbmZvJwp9KSwgU1RBVEVTX0VOVU0uVU5LTk9XTiwgewogIGNvbG9yOiAnd2FybmluZycsCiAgaWNvbjogJ3gnLAogIGxhYmVsOiAnVW5rbm93bicsCiAgY29tcG91bmRJY29uOiAnd2FybmluZycKfSksIFNUQVRFU19FTlVNLlVOVFJJR0dFUkVELCB7CiAgY29sb3I6ICdzdWNjZXNzJywKICBpY29uOiAndGFnJywKICBsYWJlbDogJ1VudHJpZ2dlcmVkJywKICBjb21wb3VuZEljb246ICdjaGVja21hcmsnCn0pLCBTVEFURVNfRU5VTS5VUERBVElORywgewogIGNvbG9yOiAnd2FybmluZycsCiAgaWNvbjogJ3RhZycsCiAgbGFiZWw6ICdVcGRhdGluZycsCiAgY29tcG91bmRJY29uOiAnd2FybmluZycKfSksIFNUQVRFU19FTlVNLldBSVRfQVBQTElFRCwgewogIGNvbG9yOiAnaW5mbycsCiAgaWNvbjogJ3RhZycsCiAgbGFiZWw6ICdXYWl0IEFwcGxpZWQnLAogIGNvbXBvdW5kSWNvbjogJ2luZm8nCn0pLCBTVEFURVNfRU5VTS5XQUlUX0NIRUNLSU4sIHsKICBjb2xvcjogJ3dhcm5pbmcnLAogIGljb246ICd0YWcnLAogIGxhYmVsOiAnV2FpdCBDaGVja2luJywKICBjb21wb3VuZEljb246ICd3YXJuaW5nJwp9KSwgU1RBVEVTX0VOVU0uV0FJVElORywgewogIGNvbG9yOiAnaW5mbycsCiAgaWNvbjogJ3RhZycsCiAgbGFiZWw6ICdXYWl0aW5nJywKICBjb21wb3VuZEljb246ICdpbmZvJwp9KSwgU1RBVEVTX0VOVU0uV0FSTklORywgewogIGNvbG9yOiAnd2FybmluZycsCiAgaWNvbjogJ2Vycm9yJywKICBsYWJlbDogJ1dhcm5pbmcnLAogIGNvbXBvdW5kSWNvbjogJ3dhcm5pbmcnCn0pLCBfZGVmaW5lUHJvcGVydHkoX1NUQVRFUywgU1RBVEVTX0VOVU0uREVQTE9ZSU5HLCB7CiAgY29sb3I6ICdpbmZvJywKICBpY29uOiAnaW5mbycsCiAgbGFiZWw6ICdEZXBsb3lpbmcnLAogIGNvbXBvdW5kSWNvbjogJ2luZm8nCn0pKTsKZXhwb3J0IGZ1bmN0aW9uIGdldFN0YXRlc0J5VHlwZSgpIHsKICB2YXIgdHlwZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogJ2luZm8nOwogIHZhciBvdXQgPSB7CiAgICBpbmZvOiBbXSwKICAgIGVycm9yOiBbXSwKICAgIHN1Y2Nlc3M6IFtdLAogICAgd2FybmluZzogW10sCiAgICB1bmtub3duOiBbXQogIH07CiAgZm9ySW4oU1RBVEVTLCBmdW5jdGlvbiAoc3RhdGUsIHN0YXRlS2V5KSB7CiAgICBpZiAoc3RhdGUuY29sb3IpIHsKICAgICAgaWYgKG91dFtzdGF0ZS5jb2xvcl0pIHsKICAgICAgICBvdXRbc3RhdGUuY29sb3JdLnB1c2goc3RhdGVLZXkpOwogICAgICB9IGVsc2UgewogICAgICAgIG91dC51bmtub3duLnB1c2goc3RhdGVLZXkpOwogICAgICB9CiAgICB9CiAgfSk7CiAgcmV0dXJuIG91dDsKfQp2YXIgU09SVF9PUkRFUiA9IHsKICBlcnJvcjogMSwKICB3YXJuaW5nOiAyLAogIGluZm86IDMsCiAgc3VjY2VzczogNCwKICByZWFkeTogNSwKICBub3RyZWFkeTogNiwKICBvdGhlcjogNwp9OwpleHBvcnQgZnVuY3Rpb24gZ2V0U3RhdGVMYWJlbChzdGF0ZSkgewogIHZhciBsb3dlcmNhc2VTdGF0ZSA9IHN0YXRlLnRvTG93ZXJDYXNlKCk7CiAgcmV0dXJuIFNUQVRFU1tsb3dlcmNhc2VTdGF0ZV0gPyBTVEFURVNbbG93ZXJjYXNlU3RhdGVdLmxhYmVsIDogU1RBVEVTW1NUQVRFU19FTlVNLlVOS05PV05dLmxhYmVsOwp9CmV4cG9ydCBmdW5jdGlvbiBjb2xvckZvclN0YXRlKHN0YXRlLCBpc0Vycm9yLCBpc1RyYW5zaXRpb25pbmcpIHsKICBpZiAoaXNFcnJvcikgewogICAgcmV0dXJuICd0ZXh0LWVycm9yJzsKICB9CiAgaWYgKGlzVHJhbnNpdGlvbmluZykgewogICAgcmV0dXJuICd0ZXh0LWluZm8nOwogIH0KICB2YXIga2V5ID0gKHN0YXRlIHx8ICdhY3RpdmUnKS50b0xvd2VyQ2FzZSgpOwogIHZhciBjb2xvcjsKICBpZiAoU1RBVEVTW2tleV0gJiYgU1RBVEVTW2tleV0uY29sb3IpIHsKICAgIGNvbG9yID0gbWF5YmVGbi5jYWxsKHRoaXMsIFNUQVRFU1trZXldLmNvbG9yKTsKICB9CiAgaWYgKCFjb2xvcikgewogICAgY29sb3IgPSBERUZBVUxUX0NPTE9SOwogIH0KICByZXR1cm4gInRleHQtIi5jb25jYXQoY29sb3IpOwp9CmV4cG9ydCBmdW5jdGlvbiBzdGF0ZURpc3BsYXkoc3RhdGUpIHsKICAvLyBAVE9ETyB1c2UgdHJhbnNsYXRpb25zCiAgdmFyIGtleSA9IChzdGF0ZSB8fCAnYWN0aXZlJykudG9Mb3dlckNhc2UoKTsKICBpZiAoUkVNQVBfU1RBVEVba2V5XSkgewogICAgcmV0dXJuIFJFTUFQX1NUQVRFW2tleV07CiAgfQogIHJldHVybiBrZXkuc3BsaXQoLy0vKS5tYXAodWNGaXJzdCkuam9pbignLScpOwp9CmV4cG9ydCBmdW5jdGlvbiBwcmltYXJ5RGlzcGxheVN0YXR1c0Zyb21Db3VudChzdGF0dXMpIHsKICB2YXIgc3RhdHVzT3JkZXIgPSBbU1RBVEVTX0VOVU0uRVJST1IsIFNUQVRFU19FTlVNLkZBSUxFRCwgU1RBVEVTX0VOVU0uV0FSTklORywgU1RBVEVTX0VOVU0uTU9ESUZJRUQsIFNUQVRFU19FTlVNLldBSVRfQVBQTElFRCwgU1RBVEVTX0VOVU0uT1JQSEFORUQsIFNUQVRFU19FTlVNLk1JU1NJTkcsIFNUQVRFU19FTlVNLlVOS05PV04sIFNUQVRFU19FTlVNLk5PVF9SRUFEWSwgU1RBVEVTX0VOVU0uUkVBRFldOwoKICAvLyBzb3J0IHN0YXR1cyBieSBvcmRlciBvZiBzdGF0dXNPcmRlcgogIHZhciBleGlzdGluZ1N0YXR1c2VzID0gT2JqZWN0LmtleXMoc3RhdHVzKS5maWx0ZXIoZnVuY3Rpb24gKGtleSkgewogICAgcmV0dXJuIHN0YXR1c1trZXldID4gMCAmJiBzdGF0dXNPcmRlci5pbmNsdWRlcyhrZXkudG9Mb3dlckNhc2UoKSk7CiAgfSkuc29ydChmdW5jdGlvbiAoYSwgYikgewogICAgcmV0dXJuIHN0YXR1c09yZGVyLmluZGV4T2YoYS50b0xvd2VyQ2FzZSgpKSAtIHN0YXR1c09yZGVyLmluZGV4T2YoYi50b0xvd2VyQ2FzZSgpKTsKICB9KTsKICByZXR1cm4gZXhpc3RpbmdTdGF0dXNlc1swXSA/IGV4aXN0aW5nU3RhdHVzZXNbMF0gOiBTVEFURVNfRU5VTS5VTktOT1dOOwp9CmV4cG9ydCBmdW5jdGlvbiBzdGF0ZVNvcnQoY29sb3IsIGRpc3BsYXkpIHsKICBjb2xvciA9IGNvbG9yLnJlcGxhY2UoL14odGV4dHxiZyktLywgJycpOwogIHJldHVybiAiIi5jb25jYXQoU09SVF9PUkRFUltjb2xvcl0gfHwgU09SVF9PUkRFUlsnb3RoZXInXSwgIiAiKS5jb25jYXQoZGlzcGxheSk7Cn0KZXhwb3J0IGZ1bmN0aW9uIGlzQ29uZGl0aW9uUmVhZHlBbmRXYWl0aW5nKGNvbmRpdGlvbikgewogIHZhciBfY29uZGl0aW9uJHR5cGUsIF9jb25kaXRpb24kcmVhc29uOwogIGlmICghY29uZGl0aW9uKSB7CiAgICByZXR1cm4gZmFsc2U7CiAgfQogIHJldHVybiAoY29uZGl0aW9uID09PSBudWxsIHx8IGNvbmRpdGlvbiA9PT0gdm9pZCAwIHx8IChfY29uZGl0aW9uJHR5cGUgPSBjb25kaXRpb24udHlwZSkgPT09IG51bGwgfHwgX2NvbmRpdGlvbiR0eXBlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfY29uZGl0aW9uJHR5cGUudG9Mb3dlckNhc2UoKSkgPT09ICdyZWFkeScgJiYgKGNvbmRpdGlvbiA9PT0gbnVsbCB8fCBjb25kaXRpb24gPT09IHZvaWQgMCB8fCAoX2NvbmRpdGlvbiRyZWFzb24gPSBjb25kaXRpb24ucmVhc29uKSA9PT0gbnVsbCB8fCBfY29uZGl0aW9uJHJlYXNvbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2NvbmRpdGlvbiRyZWFzb24udG9Mb3dlckNhc2UoKSkgPT09ICd3YWl0aW5nJzsKfQpmdW5jdGlvbiBtYXliZUZuKHZhbCkgewogIGlmIChpc0Z1bmN0aW9uKHZhbCkpIHsKICAgIHJldHVybiB2YWwodGhpcyk7CiAgfQogIHJldHVybiB2YWw7Cn0KdmFyIFJlc291cmNlID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBSZXNvdXJjZShkYXRhLCBjdHgpIHsKICAgIHZhciByZWh5ZHJhdGVOYW1lc3BhY2UgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IG51bGw7CiAgICB2YXIgc2V0Q2xvbmUgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6IGZhbHNlOwogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFJlc291cmNlKTsKICAgIGZvciAodmFyIGsgaW4gZGF0YSkgewogICAgICB0aGlzW2tdID0gZGF0YVtrXTsKICAgIH0KICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnJGN0eCcsIHsKICAgICAgdmFsdWU6IGN0eCwKICAgICAgZW51bWVyYWJsZTogZmFsc2UKICAgIH0pOwogICAgaWYgKHJlaHlkcmF0ZU5hbWVzcGFjZSkgewogICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgJ19fcmVoeWRyYXRlJywgewogICAgICAgIHZhbHVlOiByZWh5ZHJhdGVOYW1lc3BhY2UsCiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgICBjb25maWd1cmFibGU6IHRydWUKICAgICAgfSk7CiAgICB9CiAgICBpZiAoc2V0Q2xvbmUpIHsKICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsICdfX2Nsb25lJywgewogICAgICAgIHZhbHVlOiB0cnVlLAogICAgICAgIGVudW1lcmFibGU6IHRydWUsCiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICAgIHdyaXRhYmxlOiB0cnVlCiAgICAgIH0pOwogICAgfQogIH0KICByZXR1cm4gX2NyZWF0ZUNsYXNzKFJlc291cmNlLCBbewogICAga2V5OiAnJGdldHRlcnMnLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLiRjdHguZ2V0dGVyczsKICAgIH0KICB9LCB7CiAgICBrZXk6ICckcm9vdEdldHRlcnMnLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLiRjdHgucm9vdEdldHRlcnM7CiAgICB9CiAgfSwgewogICAga2V5OiAnJGRpc3BhdGNoJywKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy4kY3R4LmRpc3BhdGNoOwogICAgfQogIH0sIHsKICAgIGtleTogJyRzdGF0ZScsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuJGN0eC5zdGF0ZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICckcm9vdFN0YXRlJywKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy4kY3R4LnJvb3RTdGF0ZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjdXN0b21WYWxpZGF0aW9uUnVsZXMiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiBbCiAgICAgICAgLyoqCiAgICAgICAgICogRXNzZW50aWFsbHkgYSBmYWtlIHNjaGVtYSBvYmplY3Qgd2l0aCBhZGRpdGlvbmFsIHBhcmFtcyB0byBleHRlbmQgdmFsaWRhdGlvbgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIHtudWxsYWJsZX0gVmFsdWUgaXMgbnVsbGFibGUKICAgICAgICAgKiBAcGFyYW0ge3BhdGh9IFBhdGggb24gdGhlIHJlc291cmNlIHRvIHRoZSB2YWx1ZSB0byB2YWxpZGF0ZQogICAgICAgICAqIEBwYXJhbSB7cmVxdWlyZWR9IFZhbHVlIHJlcXVpcmVkCiAgICAgICAgICogQHBhcmFtIHtyZXF1aXJlZElmfSBWYWx1ZSByZXF1aXJlZCBpZiB2YWx1ZSBhdCBwYXRoIG5vdCBlbXB0eQogICAgICAgICAqIEBwYXJhbSB7dHJhbnNsYXRpb25LZXl9IEh1bWFuIHJlYWRhYmxlIGRpc3BsYXkga2V5IGZvciBwYXJhbSBpbiBwYXRoIGUuZy4gbWV0YWRhdGEubmFtZSA9PT0gTmFtZQogICAgICAgICAqIEBwYXJhbSB7dHlwZX0gVHlwZSBvZiBmaWVsZCB0byB2YWxpZGF0ZQogICAgICAgICAqIEBwYXJhbSB7dmFsaWRhdG9yc30gYXJyYXkgb2Ygc3RyaW5ncyB3aGVyZSBpdGVtIGlzIG5hbWUgb2YgZXhwb3J0ZWQgdmFsaWRhdG9yIGZ1bmN0aW9uIGluIGN1c3RvbS12YWxpZGF0b3JzLCBhcmdzIGNhbiBiZSBwYXNzZWQgYnkgcHJlcGVuZGluZyBhcmdzIHNlcGFyYXRlZCBieSBjb2xvbi4gZS5nIG1heExlbmd0aDo2MwogICAgICAgICAqLwogICAgICAgIC8qIHsKICAgICAgICAgIG51bGxhYmxlOiAgICAgICBmYWxzZSwKICAgICAgICAgIHBhdGg6ICAgICAgICAgICAnc3BlYy5wb3J0cycsCiAgICAgICAgICByZXF1aXJlZDogICAgICAgdHJ1ZSwKICAgICAgICAgIHR5cGU6ICAgICAgICAgICAnYXJyYXknLAogICAgICAgICAgdmFsaWRhdG9yczogICAgIFsnc2VydmljZVBvcnQnXSwKICAgICAgICB9ICovCiAgICAgIF07CiAgICB9CiAgfSwgewogICAga2V5OiAiX2tleSIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgdmFyIG0gPSB0aGlzLm1ldGFkYXRhOwogICAgICBpZiAobSkgewogICAgICAgIGlmIChtLnVpZCkgewogICAgICAgICAgcmV0dXJuIG0udWlkOwogICAgICAgIH0KICAgICAgICBpZiAobS5uYW1lc3BhY2UpIHsKICAgICAgICAgIHJldHVybiAiIi5jb25jYXQodGhpcy50eXBlLCAiLyIpLmNvbmNhdChtLm5hbWVzcGFjZSwgIi8iKS5jb25jYXQobS5uYW1lKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKHRoaXMuaWQpIHsKICAgICAgICByZXR1cm4gIiIuY29uY2F0KHRoaXMudHlwZSwgIi8iKS5jb25jYXQodGhpcy5pZCk7CiAgICAgIH0KICAgICAgcmV0dXJuICIiLmNvbmNhdCh0aGlzLnR5cGUsICIvIikuY29uY2F0KE1hdGgucmFuZG9tKCkpOwogICAgfQogIH0sIHsKICAgIGtleTogInNjaGVtYSIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuJGdldHRlcnNbJ3NjaGVtYUZvciddKHRoaXMudHlwZSk7CiAgICB9CiAgfSwgewogICAga2V5OiAidG9TdHJpbmciLAogICAgdmFsdWU6IGZ1bmN0aW9uIHRvU3RyaW5nKCkgewogICAgICByZXR1cm4gIlsiLmNvbmNhdCh0aGlzLnR5cGUsICI6ICIpLmNvbmNhdCh0aGlzLmlkLCAiXSIpOwogICAgfQogIH0sIHsKICAgIGtleTogInR5cGVEaXNwbGF5IiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgc2NoZW1hID0gdGhpcy5zY2hlbWE7CiAgICAgIGlmIChzY2hlbWEpIHsKICAgICAgICByZXR1cm4gdGhpcy4kcm9vdEdldHRlcnNbJ3R5cGUtbWFwL2xhYmVsRm9yJ10oc2NoZW1hKTsKICAgICAgfQogICAgICByZXR1cm4gJz8nOwogICAgfQogIH0sIHsKICAgIGtleTogIm5hbWVEaXNwbGF5IiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgX3RoaXMkc3BlYywgX3RoaXMkbWV0YWRhdGEsIF90aGlzJG1ldGFkYXRhMjsKICAgICAgcmV0dXJuIHRoaXMuZGlzcGxheU5hbWUgfHwgKChfdGhpcyRzcGVjID0gdGhpcy5zcGVjKSA9PT0gbnVsbCB8fCBfdGhpcyRzcGVjID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRzcGVjLmRpc3BsYXlOYW1lKSB8fCAoKF90aGlzJG1ldGFkYXRhID0gdGhpcy5tZXRhZGF0YSkgPT09IG51bGwgfHwgX3RoaXMkbWV0YWRhdGEgPT09IHZvaWQgMCB8fCAoX3RoaXMkbWV0YWRhdGEgPSBfdGhpcyRtZXRhZGF0YS5hbm5vdGF0aW9ucykgPT09IG51bGwgfHwgX3RoaXMkbWV0YWRhdGEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJG1ldGFkYXRhW05PUk1BTl9OQU1FXSkgfHwgdGhpcy5uYW1lIHx8ICgoX3RoaXMkbWV0YWRhdGEyID0gdGhpcy5tZXRhZGF0YSkgPT09IG51bGwgfHwgX3RoaXMkbWV0YWRhdGEyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRtZXRhZGF0YTIubmFtZSkgfHwgdGhpcy5pZDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJuYW1lU29ydCIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHNvcnRhYmxlTnVtZXJpY1N1ZmZpeCh0aGlzLm5hbWVEaXNwbGF5KS50b0xvd2VyQ2FzZSgpOwogICAgfQogIH0sIHsKICAgIGtleTogIm5hbWVzcGFjZWROYW1lIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgX3RoaXMkbWV0YWRhdGEzOwogICAgICB2YXIgbmFtZXNwYWNlID0gKF90aGlzJG1ldGFkYXRhMyA9IHRoaXMubWV0YWRhdGEpID09PSBudWxsIHx8IF90aGlzJG1ldGFkYXRhMyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkbWV0YWRhdGEzLm5hbWVzcGFjZTsKICAgICAgdmFyIG5hbWUgPSB0aGlzLm5hbWVEaXNwbGF5OwogICAgICBpZiAobmFtZXNwYWNlKSB7CiAgICAgICAgcmV0dXJuICIiLmNvbmNhdChuYW1lc3BhY2UsICI6IikuY29uY2F0KG5hbWUpOwogICAgICB9CiAgICAgIHJldHVybiBuYW1lOwogICAgfQogIH0sIHsKICAgIGtleTogIm5hbWVzcGFjZWROYW1lU29ydCIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHNvcnRhYmxlTnVtZXJpY1N1ZmZpeCh0aGlzLm5hbWVzcGFjZWROYW1lKS50b0xvd2VyQ2FzZSgpOwogICAgfQogIH0sIHsKICAgIGtleTogImdyb3VwQnlMYWJlbCIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgdmFyIF90aGlzJG1ldGFkYXRhNDsKICAgICAgdmFyIG5hbWUgPSAoX3RoaXMkbWV0YWRhdGE0ID0gdGhpcy5tZXRhZGF0YSkgPT09IG51bGwgfHwgX3RoaXMkbWV0YWRhdGE0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRtZXRhZGF0YTQubmFtZXNwYWNlOwogICAgICB2YXIgb3V0OwogICAgICBpZiAobmFtZSkgewogICAgICAgIG91dCA9IHRoaXMudCgncmVzb3VyY2VUYWJsZS5ncm91cExhYmVsLm5hbWVzcGFjZScsIHsKICAgICAgICAgIG5hbWU6IGVzY2FwZUh0bWwobmFtZSkKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBvdXQgPSB0aGlzLnQoJ3Jlc291cmNlVGFibGUuZ3JvdXBMYWJlbC5ub3RJbkFOYW1lc3BhY2UnKTsKICAgICAgfQogICAgICByZXR1cm4gb3V0OwogICAgfQogIH0sIHsKICAgIGtleTogInNldExhYmVscyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0TGFiZWxzKCAvKiB2YWwgKi8KICAgICkgewogICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ltcGxlbWVudCBzZXRMYWJlbHMgaW4gc3ViY2xhc3MnKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzZXRMYWJlbCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0TGFiZWwoIC8qIGtleSwgdmFsICovCiAgICApIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbXBsZW1lbnQgc2V0TGFiZWwgaW4gc3ViY2xhc3MnKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzZXRBbm5vdGF0aW9ucyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0QW5ub3RhdGlvbnModmFsKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcignSW1wbGVtZW50IHNldEFubm90YXRpb25zIGluIHN1YmNsYXNzJyk7CiAgICB9CiAgfSwgewogICAga2V5OiAic2V0QW5ub3RhdGlvbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0QW5ub3RhdGlvbihrZXksIHZhbCkgewogICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ltcGxlbWVudCBzZXRBbm5vdGF0aW9uIGluIHN1YmNsYXNzJyk7CiAgICB9CgogICAgLy8gWW91IGNhbiBvdmVycmlkZSB0aGUgZGlzcGxheWVkIGJ5IHByb3ZpZGluZyB5b3VyIG93biBzdGF0ZURpc3BsYXkgKGFuZCBwb3NzaWJseSB1c2luZyB0aGUgZnVuY3Rpb24gZXhwb3J0ZWQgYWJvdmUpCiAgfSwgewogICAga2V5OiAic3RhdGVEaXNwbGF5IiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gc3RhdGVEaXNwbGF5KHRoaXMuc3RhdGUpOwogICAgfQogIH0sIHsKICAgIGtleTogInN0YXRlQ29sb3IiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHZhciBfdGhpcyRzdGF0ZU9iaiwgX3RoaXMkc3RhdGVPYmoyOwogICAgICByZXR1cm4gY29sb3JGb3JTdGF0ZS5jYWxsKHRoaXMsIHRoaXMuc3RhdGUsIChfdGhpcyRzdGF0ZU9iaiA9IHRoaXMuc3RhdGVPYmopID09PSBudWxsIHx8IF90aGlzJHN0YXRlT2JqID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRzdGF0ZU9iai5lcnJvciwgKF90aGlzJHN0YXRlT2JqMiA9IHRoaXMuc3RhdGVPYmopID09PSBudWxsIHx8IF90aGlzJHN0YXRlT2JqMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkc3RhdGVPYmoyLnRyYW5zaXRpb25pbmcpOwogICAgfQogIH0sIHsKICAgIGtleTogInN0YXRlQmFja2dyb3VuZCIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuc3RhdGVDb2xvci5yZXBsYWNlKCd0ZXh0LScsICdiZy0nKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzdGF0ZUljb24iLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHZhciB0cmFucyA9IGZhbHNlOwogICAgICB2YXIgZXJyb3IgPSBmYWxzZTsKICAgICAgaWYgKHRoaXMubWV0YWRhdGEgJiYgdGhpcy5tZXRhZGF0YS5zdGF0ZSkgewogICAgICAgIHRyYW5zID0gdGhpcy5tZXRhZGF0YS5zdGF0ZS50cmFuc2l0aW9uaW5nOwogICAgICAgIGVycm9yID0gdGhpcy5tZXRhZGF0YS5zdGF0ZS5lcnJvcjsKICAgICAgfQogICAgICBpZiAodHJhbnMpIHsKICAgICAgICByZXR1cm4gJ2ljb24gaWNvbi1zcGlubmVyIGljb24tc3Bpbic7CiAgICAgIH0KICAgICAgaWYgKGVycm9yKSB7CiAgICAgICAgcmV0dXJuICdpY29uIGljb24tZXJyb3InOwogICAgICB9CiAgICAgIHZhciBrZXkgPSAodGhpcy5zdGF0ZSB8fCAnJykudG9Mb3dlckNhc2UoKTsKICAgICAgdmFyIGljb247CiAgICAgIGlmIChTVEFURVNba2V5XSAmJiBTVEFURVNba2V5XS5pY29uKSB7CiAgICAgICAgaWNvbiA9IG1heWJlRm4uY2FsbCh0aGlzLCBTVEFURVNba2V5XS5pY29uKTsKICAgICAgfQogICAgICBpZiAoIWljb24pIHsKICAgICAgICBpY29uID0gREVGQVVMVF9JQ09OOwogICAgICB9CiAgICAgIHJldHVybiAiaWNvbiBpY29uLSIuY29uY2F0KGljb24pOwogICAgfQogIH0sIHsKICAgIGtleTogInN0YXRlU29ydCIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHN0YXRlU29ydCh0aGlzLnN0YXRlQ29sb3IsIHRoaXMuc3RhdGVEaXNwbGF5KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzdGF0ZURlc2NyaXB0aW9uIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgX3RoaXMkc3RhdGVPYmozLCBfdGhpcyRzdGF0ZU9iajQsIF90aGlzJHN0YXRlT2JqNTsKICAgICAgdmFyIHRyYW5zID0gKChfdGhpcyRzdGF0ZU9iajMgPSB0aGlzLnN0YXRlT2JqKSA9PT0gbnVsbCB8fCBfdGhpcyRzdGF0ZU9iajMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJHN0YXRlT2JqMy50cmFuc2l0aW9uaW5nKSB8fCBmYWxzZTsKICAgICAgdmFyIGVycm9yID0gKChfdGhpcyRzdGF0ZU9iajQgPSB0aGlzLnN0YXRlT2JqKSA9PT0gbnVsbCB8fCBfdGhpcyRzdGF0ZU9iajQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJHN0YXRlT2JqNC5lcnJvcikgfHwgZmFsc2U7CiAgICAgIHZhciBtZXNzYWdlID0gKF90aGlzJHN0YXRlT2JqNSA9IHRoaXMuc3RhdGVPYmopID09PSBudWxsIHx8IF90aGlzJHN0YXRlT2JqNSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkc3RhdGVPYmo1Lm1lc3NhZ2U7CiAgICAgIHJldHVybiB0cmFucyB8fCBlcnJvciA/IHVjRmlyc3QobWVzc2FnZSkgOiAnJzsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzdGF0ZU9iaiIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgdmFyIF90aGlzJG1ldGFkYXRhNTsKICAgICAgcmV0dXJuIChfdGhpcyRtZXRhZGF0YTUgPSB0aGlzLm1ldGFkYXRhKSA9PT0gbnVsbCB8fCBfdGhpcyRtZXRhZGF0YTUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJG1ldGFkYXRhNS5zdGF0ZTsKICAgIH0KCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICB9LCB7CiAgICBrZXk6ICJ3YWl0Rm9yVGVzdEZuIiwKICAgIHZhbHVlOiBmdW5jdGlvbiB3YWl0Rm9yVGVzdEZuKGZuLCBtc2csIHRpbWVvdXRNcywgaW50ZXJ2YWxNcykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICByZXR1cm4gd2FpdEZvcihmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIGZuLmFwcGx5KF90aGlzKTsKICAgICAgfSwgbXNnLCB0aW1lb3V0TXMgfHwgREVGQVVMVF9XQUlUX1RNSU1FT1VULCBpbnRlcnZhbE1zIHx8IERFRkFVTFRfV0FJVF9JTlRFUlZBTCwgdHJ1ZSk7CiAgICB9CiAgfSwgewogICAga2V5OiAid2FpdEZvclN0YXRlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiB3YWl0Rm9yU3RhdGUoc3RhdGUsIHRpbWVvdXQsIGludGVydmFsKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwogICAgICByZXR1cm4gdGhpcy53YWl0Rm9yVGVzdEZuKGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gKF90aGlzMi5zdGF0ZSB8fCAnJykudG9Mb3dlckNhc2UoKSA9PT0gc3RhdGUudG9Mb3dlckNhc2UoKTsKICAgICAgfSwgInN0YXRlPSIuY29uY2F0KHN0YXRlKSwgdGltZW91dCwgaW50ZXJ2YWwpOwogICAgfQogIH0sIHsKICAgIGtleTogIndhaXRGb3JUcmFuc2l0aW9uIiwKICAgIHZhbHVlOiBmdW5jdGlvbiB3YWl0Rm9yVHJhbnNpdGlvbigpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CiAgICAgIHJldHVybiB0aGlzLndhaXRGb3JUZXN0Rm4oZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiAhX3RoaXMzLnRyYW5zaXRpb25pbmc7CiAgICAgIH0sICd0cmFuc2l0aW9uIGNvbXBsZXRpb24nLCB1bmRlZmluZWQsIHVuZGVmaW5lZCk7CiAgICB9CiAgfSwgewogICAga2V5OiAid2FpdEZvckFjdGlvbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gd2FpdEZvckFjdGlvbihuYW1lKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwogICAgICByZXR1cm4gdGhpcy53YWl0Rm9yVGVzdEZuKGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gX3RoaXM0Lmhhc0FjdGlvbihuYW1lKTsKICAgICAgfSwgImFjdGlvbj0iLmNvbmNhdChuYW1lKSwgdW5kZWZpbmVkLCB1bmRlZmluZWQpOwogICAgfQogIH0sIHsKICAgIGtleTogIndhaXRGb3JMaW5rIiwKICAgIHZhbHVlOiBmdW5jdGlvbiB3YWl0Rm9yTGluayhuYW1lKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwogICAgICByZXR1cm4gdGhpcy53YWl0Rm9yVGVzdEZuKGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gX3RoaXM1Lmhhc0xpbmsobmFtZSk7CiAgICAgIH0sICJsaW5rPSIuY29uY2F0KG5hbWUpLCB1bmRlZmluZWQsIHVuZGVmaW5lZCk7CiAgICB9CiAgfSwgewogICAga2V5OiAiaGFzQ29uZGl0aW9uIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBoYXNDb25kaXRpb24oY29uZGl0aW9uKSB7CiAgICAgIHJldHVybiB0aGlzLmlzQ29uZGl0aW9uKGNvbmRpdGlvbiwgbnVsbCk7CiAgICB9CiAgfSwgewogICAga2V5OiAiaXNDb25kaXRpb24iLAogICAgdmFsdWU6IGZ1bmN0aW9uIGlzQ29uZGl0aW9uKGNvbmRpdGlvbikgewogICAgICB2YXIgd2l0aFN0YXR1cyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogJ1RydWUnOwogICAgICBpZiAoIXRoaXMuc3RhdHVzIHx8ICF0aGlzLnN0YXR1cy5jb25kaXRpb25zKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIHZhciBlbnRyeSA9IGZpbmRCeSh0aGlzLnN0YXR1cy5jb25kaXRpb25zIHx8IFtdLCAndHlwZScsIGNvbmRpdGlvbik7CiAgICAgIGlmICghZW50cnkpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgaWYgKCF3aXRoU3RhdHVzKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KICAgICAgcmV0dXJuIChlbnRyeS5zdGF0dXMgfHwgJycpLnRvTG93ZXJDYXNlKCkgPT09ICIiLmNvbmNhdCh3aXRoU3RhdHVzKS50b0xvd2VyQ2FzZSgpOwogICAgfQogIH0sIHsKICAgIGtleTogIndhaXRGb3JDb25kaXRpb24iLAogICAgdmFsdWU6IGZ1bmN0aW9uIHdhaXRGb3JDb25kaXRpb24obmFtZSkgewogICAgICB2YXIgX3RoaXM2ID0gdGhpczsKICAgICAgdmFyIHdpdGhTdGF0dXMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6ICdUcnVlJzsKICAgICAgdmFyIHRpbWVvdXRNcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogREVGQVVMVF9XQUlUX1RNSU1FT1VUOwogICAgICB2YXIgaW50ZXJ2YWxNcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDogREVGQVVMVF9XQUlUX0lOVEVSVkFMOwogICAgICByZXR1cm4gdGhpcy53YWl0Rm9yVGVzdEZuKGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gX3RoaXM2LmlzQ29uZGl0aW9uKG5hbWUsIHdpdGhTdGF0dXMpOwogICAgICB9LCAiY29uZGl0aW9uICIuY29uY2F0KG5hbWUsICI9IikuY29uY2F0KHdpdGhTdGF0dXMpLCB0aW1lb3V0TXMsIGludGVydmFsTXMpOwogICAgfQoKICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogIH0sIHsKICAgIGtleTogImF2YWlsYWJsZUFjdGlvbnMiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHZhciBhbGwgPSB0aGlzLl9hdmFpbGFibGVBY3Rpb25zOwoKICAgICAgLy8gUmVtb3ZlIGRpc2FibGVkIGl0ZW1zIGFuZCBjb25zZWN1dGl2ZSBkaXZpZGVycwogICAgICB2YXIgbGFzdCA9IG51bGw7CiAgICAgIHZhciBvdXQgPSBhbGwuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgaWYgKGl0ZW0uZW5hYmxlZCA9PT0gZmFsc2UpIHsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgICAgdmFyIGN1ciA9IGl0ZW0uZGl2aWRlcjsKICAgICAgICB2YXIgb2sgPSAhY3VyIHx8IGN1ciAmJiAhbGFzdDsKICAgICAgICBsYXN0ID0gY3VyOwogICAgICAgIHJldHVybiBvazsKICAgICAgfSk7CgogICAgICAvLyBSZW1vdmUgZGl2aWRlcnMgYXQgdGhlIGJlZ2lubmluZwogICAgICB3aGlsZSAob3V0Lmxlbmd0aCAmJiBvdXRbMF0uZGl2aWRlcikgewogICAgICAgIG91dC5zaGlmdCgpOwogICAgICB9CgogICAgICAvLyBSZW1vdmUgZGl2aWRlcnMgYXQgdGhlIGVuZAogICAgICB3aGlsZSAob3V0Lmxlbmd0aCAmJiBvdXRbb3V0Lmxlbmd0aCAtIDFdLmRpdmlkZXIpIHsKICAgICAgICBvdXQucG9wKCk7CiAgICAgIH0KCiAgICAgIC8vIFJlbW92ZSBjb25zZWN1dGl2ZSBkaXZpZGVycyBpbiB0aGUgbWlkZGxlCiAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgb3V0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgaWYgKG91dFtpXS5kaXZpZGVyICYmIG91dFtpIC0gMV0uZGl2aWRlcikgewogICAgICAgICAgcmVtb3ZlQXQob3V0LCBpLCAxKTsKICAgICAgICAgIGktLTsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIG91dDsKICAgIH0KCiAgICAvLyBZb3UgY2FuIGFkZCBjdXN0b20gYWN0aW9ucyBieSBvdmVycmlkaW5nIHlvdXIgb3duIGF2YWlsYWJsZUFjdGlvbnMgKGFuZCBwcm9iYWJseSByZWFkaW5nIHN1cGVyLl9hdmFpbGFibGVBY3Rpb25zKQogIH0sIHsKICAgIGtleTogIl9hdmFpbGFibGVBY3Rpb25zIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgX3RoaXM3ID0gdGhpczsKICAgICAgLy8gZ2V0IG1lbnUgYWN0aW9ucyBhdmFpbGFibGUgYnkgcGx1Z2lucyBjb25maWd1cmF0aW9uCiAgICAgIHZhciBjdXJyZW50Um91dGUgPSB0aGlzLmN1cnJlbnRSb3V0ZXIoKS5hcHAuX3JvdXRlOwogICAgICB2YXIgZXh0ZW5zaW9uTWVudUFjdGlvbnMgPSBnZXRBcHBsaWNhYmxlRXh0ZW5zaW9uRW5oYW5jZW1lbnRzKHRoaXMuJHJvb3RTdGF0ZSwgRXh0ZW5zaW9uUG9pbnQuQUNUSU9OLCBBY3Rpb25Mb2NhdGlvbi5UQUJMRSwgY3VycmVudFJvdXRlLCB0aGlzKTsKICAgICAgdmFyIGFsbCA9IFt7CiAgICAgICAgZGl2aWRlcjogdHJ1ZQogICAgICB9LCB7CiAgICAgICAgYWN0aW9uOiB0aGlzLmNhblVwZGF0ZSA/ICdnb1RvRWRpdCcgOiAnZ29Ub1ZpZXdDb25maWcnLAogICAgICAgIGxhYmVsOiB0aGlzLnQodGhpcy5jYW5VcGRhdGUgPyAnYWN0aW9uLmVkaXQnIDogJ2FjdGlvbi52aWV3JyksCiAgICAgICAgaWNvbjogJ2ljb24gaWNvbi1lZGl0JywKICAgICAgICBlbmFibGVkOiB0aGlzLmNhbkN1c3RvbUVkaXQKICAgICAgfSwgewogICAgICAgIGFjdGlvbjogdGhpcy5jYW5FZGl0WWFtbCA/ICdnb1RvRWRpdFlhbWwnIDogJ2dvVG9WaWV3WWFtbCcsCiAgICAgICAgbGFiZWw6IHRoaXMudCh0aGlzLmNhbkVkaXRZYW1sID8gJ2FjdGlvbi5lZGl0WWFtbCcgOiAnYWN0aW9uLnZpZXdZYW1sJyksCiAgICAgICAgaWNvbjogJ2ljb24gaWNvbi1maWxlJywKICAgICAgICBlbmFibGVkOiB0aGlzLmNhbllhbWwKICAgICAgfSwgewogICAgICAgIGFjdGlvbjogdGhpcy5jYW5DdXN0b21FZGl0ID8gJ2dvVG9DbG9uZScgOiAnY2xvbmVZYW1sJywKICAgICAgICBsYWJlbDogdGhpcy50KCdhY3Rpb24uY2xvbmUnKSwKICAgICAgICBpY29uOiAnaWNvbiBpY29uLWNvcHknLAogICAgICAgIGVuYWJsZWQ6IHRoaXMuY2FuQ2xvbmUgJiYgdGhpcy5jYW5DcmVhdGUgJiYgKHRoaXMuY2FuQ3VzdG9tRWRpdCB8fCB0aGlzLmNhbllhbWwpCiAgICAgIH0sIHsKICAgICAgICBkaXZpZGVyOiB0cnVlCiAgICAgIH0sIHsKICAgICAgICBhY3Rpb246ICdkb3dubG9hZCcsCiAgICAgICAgbGFiZWw6IHRoaXMudCgnYWN0aW9uLmRvd25sb2FkJyksCiAgICAgICAgaWNvbjogJ2ljb24gaWNvbi1kb3dubG9hZCcsCiAgICAgICAgYnVsa2FibGU6IHRydWUsCiAgICAgICAgYnVsa0FjdGlvbjogJ2Rvd25sb2FkQnVsaycsCiAgICAgICAgZW5hYmxlZDogdGhpcy5jYW5ZYW1sLAogICAgICAgIHdlaWdodDogLTkKICAgICAgfSwgewogICAgICAgIGFjdGlvbjogJ3ZpZXdJbkFwaScsCiAgICAgICAgbGFiZWw6IHRoaXMudCgnYWN0aW9uLnZpZXdJbkFwaScpLAogICAgICAgIGljb246ICdpY29uIGljb24tZXh0ZXJuYWwtbGluaycsCiAgICAgICAgZW5hYmxlZDogdGhpcy5jYW5WaWV3SW5BcGkKICAgICAgfSwgewogICAgICAgIGFjdGlvbjogJ3Byb21wdFJlbW92ZScsCiAgICAgICAgYWx0QWN0aW9uOiAncmVtb3ZlJywKICAgICAgICBsYWJlbDogdGhpcy50KCdhY3Rpb24ucmVtb3ZlJyksCiAgICAgICAgaWNvbjogJ2ljb24gaWNvbi10cmFzaCcsCiAgICAgICAgYnVsa2FibGU6IHRydWUsCiAgICAgICAgZW5hYmxlZDogdGhpcy5jYW5EZWxldGUsCiAgICAgICAgYnVsa0FjdGlvbjogJ3Byb21wdFJlbW92ZScsCiAgICAgICAgd2VpZ2h0OiAtMTAgLy8gRGVsZXRlIGFsd2F5cyBnb2VzIGxhc3QKICAgICAgfV07CgogICAgICAvLyBFeHRlbnNpb24gYWN0aW9ucyBnZXQgYWRkZWQgdG8gdGhlIGVuZCwgc28gYWRkIGEgZGl2aWRlciBpZiB0aGVyZSBhcmUgYW55CiAgICAgIGlmIChleHRlbnNpb25NZW51QWN0aW9ucy5sZW5ndGgpIHsKICAgICAgICAvLyBBZGQgYSBkaXZpZGVyIGZpcnN0CiAgICAgICAgYWxsLnB1c2goewogICAgICAgICAgZGl2aWRlcjogdHJ1ZQogICAgICAgIH0pOwogICAgICAgIGV4dGVuc2lvbk1lbnVBY3Rpb25zLmZvckVhY2goZnVuY3Rpb24gKGFjdGlvbikgewogICAgICAgICAgdmFyIG5ld0FjdGlvbkluc3RhbmNlID0gX29iamVjdFNwcmVhZCh7fSwgYWN0aW9uKTsKICAgICAgICAgIHZhciBlbmFibGVkRm4gPSBuZXdBY3Rpb25JbnN0YW5jZS5lbmFibGVkOwogICAgICAgICAgdmFyIHR5cGVvZkVuYWJsZWQgPSBfdHlwZW9mKGVuYWJsZWRGbik7CiAgICAgICAgICBzd2l0Y2ggKHR5cGVvZkVuYWJsZWQpIHsKICAgICAgICAgICAgY2FzZSAndW5kZWZpbmVkJzoKICAgICAgICAgICAgICBuZXdBY3Rpb25JbnN0YW5jZS5lbmFibGVkID0gdHJ1ZTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAnZnVuY3Rpb24nOgogICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXdBY3Rpb25JbnN0YW5jZSwgJ2VuYWJsZWQnLCB7CiAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGVuYWJsZWRGbihfdGhpczcpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlICdib29sZWFuJzoKICAgICAgICAgICAgICAvLyBubyBvcCwganVzdCB1c2UgaXQgZGlyZWN0bHkKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAvLyB1bnN1cHBvcnRlZCB2YWx1ZQogICAgICAgICAgICAgIGNvbnNvbGUud2FybigiVW5zdXBwb3J0ZWQgJ2VuYWJsZWQnIHByb3BlcnR5IHR5cGUgZm9yIGFjdGlvbjogIi5jb25jYXQoYWN0aW9uLmxhYmVsIHx8IGFjdGlvbi5sYWJlbEtleSkpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnNvbGUKICAgICAgICAgICAgICBkZWxldGUgbmV3QWN0aW9uSW5zdGFuY2UuZW5hYmxlZDsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAgIGFsbC5wdXNoKG5ld0FjdGlvbkluc3RhbmNlKTsKICAgICAgICB9KTsKICAgICAgfQogICAgICByZXR1cm4gYWxsOwogICAgfQoKICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogIH0sIHsKICAgIGtleTogImNhbkRlbGV0ZSIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuX2NhbkRlbGV0ZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJfY2FuRGVsZXRlIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5oYXNMaW5rKCdyZW1vdmUnKSAmJiB0aGlzLiRyb290R2V0dGVyc1sndHlwZS1tYXAvb3B0aW9uc0ZvciddKHRoaXMudHlwZSkuaXNSZW1vdmFibGU7CiAgICB9CiAgfSwgewogICAga2V5OiAiY2FuQ2xvbmUiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQogIH0sIHsKICAgIGtleTogImNhblVwZGF0ZSIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuaGFzTGluaygndXBkYXRlJykgJiYgdGhpcy4kcm9vdEdldHRlcnNbJ3R5cGUtbWFwL29wdGlvbnNGb3InXSh0aGlzLnR5cGUpLmlzRWRpdGFibGU7CiAgICB9CiAgfSwgewogICAga2V5OiAiY2FuQ3VzdG9tRWRpdCIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuJHJvb3RHZXR0ZXJzWyd0eXBlLW1hcC9oYXNDdXN0b21FZGl0J10odGhpcy50eXBlLCB0aGlzLmlkKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjYW5DcmVhdGUiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHZhciBfdGhpcyRzY2hlbWE7CiAgICAgIGlmICh0aGlzLnNjaGVtYSAmJiAhKChfdGhpcyRzY2hlbWEgPSB0aGlzLnNjaGVtYSkgIT09IG51bGwgJiYgX3RoaXMkc2NoZW1hICE9PSB2b2lkIDAgJiYgX3RoaXMkc2NoZW1hLmNvbGxlY3Rpb25NZXRob2RzLmZpbmQoZnVuY3Rpb24gKHgpIHsKICAgICAgICByZXR1cm4geC50b0xvd2VyQ2FzZSgpID09PSAncG9zdCc7CiAgICAgIH0pKSkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICByZXR1cm4gdGhpcy4kcm9vdEdldHRlcnNbJ3R5cGUtbWFwL29wdGlvbnNGb3InXSh0aGlzLnR5cGUpLmlzQ3JlYXRhYmxlOwogICAgfQogIH0sIHsKICAgIGtleTogImNhblZpZXdJbkFwaSIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuaGFzTGluaygnc2VsZicpICYmIHRoaXMuJHJvb3RHZXR0ZXJzWydwcmVmcy9nZXQnXShWSUVXX0lOX0FQSSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiY2FuWWFtbCIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuaGFzTGluaygndmlldycpOwogICAgfQogIH0sIHsKICAgIGtleTogImNhbkVkaXRZYW1sIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgX3RoaXMkc2NoZW1hMjsKICAgICAgcmV0dXJuIChfdGhpcyRzY2hlbWEyID0gdGhpcy5zY2hlbWEpICE9PSBudWxsICYmIF90aGlzJHNjaGVtYTIgIT09IHZvaWQgMCAmJiAoX3RoaXMkc2NoZW1hMiA9IF90aGlzJHNjaGVtYTIucmVzb3VyY2VNZXRob2RzKSAhPT0gbnVsbCAmJiBfdGhpcyRzY2hlbWEyICE9PSB2b2lkIDAgJiYgX3RoaXMkc2NoZW1hMi5maW5kKGZ1bmN0aW9uICh4KSB7CiAgICAgICAgcmV0dXJuIHggPT09ICdibG9ja2VkLVBVVCc7CiAgICAgIH0pID8gZmFsc2UgOiB0aGlzLmNhblVwZGF0ZTsKICAgIH0KCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICB9LCB7CiAgICBrZXk6ICJoYXNMaW5rIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBoYXNMaW5rKGxpbmtOYW1lKSB7CiAgICAgIHJldHVybiAhIXRoaXMubGlua0ZvcihsaW5rTmFtZSk7CiAgICB9CiAgfSwgewogICAga2V5OiAibGlua0ZvciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gbGlua0ZvcihsaW5rTmFtZSkgewogICAgICByZXR1cm4gKHRoaXMubGlua3MgfHwge30pW2xpbmtOYW1lXTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJmb2xsb3dMaW5rIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBmb2xsb3dMaW5rKGxpbmtOYW1lKSB7CiAgICAgIHZhciBvcHQgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9OwogICAgICBpZiAoIW9wdC51cmwpIHsKICAgICAgICBvcHQudXJsID0gKHRoaXMubGlua3MgfHwge30pW2xpbmtOYW1lXTsKICAgICAgfQogICAgICBpZiAob3B0LnVybFN1ZmZpeCkgewogICAgICAgIG9wdC51cmwgKz0gb3B0LnVybFN1ZmZpeDsKICAgICAgfQogICAgICBpZiAoIW9wdC51cmwpIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIlVua25vd24gbGluayAiLmNvbmNhdChsaW5rTmFtZSwgIiBvbiAiKS5jb25jYXQodGhpcy50eXBlLCAiICIpLmNvbmNhdCh0aGlzLmlkKSk7CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXMuJGRpc3BhdGNoKCdyZXF1ZXN0JywgewogICAgICAgIG9wdDogb3B0LAogICAgICAgIHR5cGU6IHRoaXMudHlwZQogICAgICB9KTsKICAgIH0KCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICB9LCB7CiAgICBrZXk6ICJoYXNBY3Rpb24iLAogICAgdmFsdWU6IGZ1bmN0aW9uIGhhc0FjdGlvbihhY3Rpb25OYW1lKSB7CiAgICAgIHJldHVybiAhIXRoaXMuYWN0aW9uTGlua0ZvcihhY3Rpb25OYW1lKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJhY3Rpb25MaW5rRm9yIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBhY3Rpb25MaW5rRm9yKGFjdGlvbk5hbWUpIHsKICAgICAgcmV0dXJuICh0aGlzLmFjdGlvbnMgfHwgdGhpcy5hY3Rpb25MaW5rcyB8fCB7fSlbYWN0aW9uTmFtZV07CiAgICB9CiAgfSwgewogICAga2V5OiAiZG9BY3Rpb24iLAogICAgdmFsdWU6IGZ1bmN0aW9uIGRvQWN0aW9uKGFjdGlvbk5hbWUsIGJvZHkpIHsKICAgICAgdmFyIG9wdCA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDoge307CiAgICAgIHJldHVybiB0aGlzLiRkaXNwYXRjaCgncmVzb3VyY2VBY3Rpb24nLCB7CiAgICAgICAgcmVzb3VyY2U6IHRoaXMsCiAgICAgICAgYWN0aW9uTmFtZTogYWN0aW9uTmFtZSwKICAgICAgICBib2R5OiBib2R5LAogICAgICAgIG9wdDogb3B0CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogImRvQWN0aW9uR3Jvd2wiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9kb0FjdGlvbkdyb3dsID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZShhY3Rpb25OYW1lLCBib2R5KSB7CiAgICAgICAgdmFyIG9wdCwKICAgICAgICAgIF9hcmdzID0gYXJndW1lbnRzOwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBvcHQgPSBfYXJncy5sZW5ndGggPiAyICYmIF9hcmdzWzJdICE9PSB1bmRlZmluZWQgPyBfYXJnc1syXSA6IHt9OwogICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxOwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OwogICAgICAgICAgICAgIHJldHVybiB0aGlzLiRkaXNwYXRjaCgncmVzb3VyY2VBY3Rpb24nLCB7CiAgICAgICAgICAgICAgICByZXNvdXJjZTogdGhpcywKICAgICAgICAgICAgICAgIGFjdGlvbk5hbWU6IGFjdGlvbk5hbWUsCiAgICAgICAgICAgICAgICBib2R5OiBib2R5LAogICAgICAgICAgICAgICAgb3B0OiBvcHQKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA5OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDY7CiAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSgxKTsKICAgICAgICAgICAgICB0aGlzLiRkaXNwYXRjaCgnZ3Jvd2wvZnJvbUVycm9yJywgewogICAgICAgICAgICAgICAgdGl0bGU6IHRoaXMuJHJvb3RHZXR0ZXJzWydpMThuL3QnXSgnZ2VuZXJpYy5ub3RpZmljYXRpb24udGl0bGUuZXJyb3InKSwKICAgICAgICAgICAgICAgIGVycjogX2NvbnRleHQudDAuZGF0YSB8fCBfY29udGV4dC50MAogICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSwgdGhpcywgW1sxLCA2XV0pOwogICAgICB9KSk7CiAgICAgIGZ1bmN0aW9uIGRvQWN0aW9uR3Jvd2woX3gsIF94MikgewogICAgICAgIHJldHVybiBfZG9BY3Rpb25Hcm93bC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CiAgICAgIHJldHVybiBkb0FjdGlvbkdyb3dsOwogICAgfSgpIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogIH0sIHsKICAgIGtleTogInBhdGNoIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBwYXRjaChkYXRhKSB7CiAgICAgIHZhciBfdGhpczggPSB0aGlzOwogICAgICB2YXIgb3B0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTsKICAgICAgdmFyIG1lcmdlID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiBmYWxzZTsKICAgICAgdmFyIGFsZXJ0T25FcnJvciA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDogZmFsc2U7CiAgICAgIGlmICghb3B0LnVybCkgewogICAgICAgIC8vIFdvcmthcm91bmQgZm9yIHRoZSBsaW5rcyBub3QgYmVpbmcgY29ycmVjdCAtIHZpZXcgbGluayBpcyB0aGUgb25seSBvbmUgdGhhdCBzZWVtcyBjb3JyZWN0CiAgICAgICAgb3B0LnVybCA9IHRoaXMubGlua0ZvcigndmlldycpIHx8IHRoaXMubGlua0Zvcignc2VsZicpOwogICAgICB9CiAgICAgIG9wdC5tZXRob2QgPSAncGF0Y2gnOwogICAgICBvcHQuaGVhZGVycyA9IG9wdC5oZWFkZXJzIHx8IHt9OwogICAgICBpZiAoIW9wdC5oZWFkZXJzWydjb250ZW50LXR5cGUnXSkgewogICAgICAgIHZhciBjb250ZW50VHlwZSA9IG1lcmdlID8gJ2FwcGxpY2F0aW9uL3N0cmF0ZWdpYy1tZXJnZS1wYXRjaCtqc29uJyA6ICdhcHBsaWNhdGlvbi9qc29uLXBhdGNoK2pzb24nOwogICAgICAgIG9wdC5oZWFkZXJzWydjb250ZW50LXR5cGUnXSA9IGNvbnRlbnRUeXBlOwogICAgICB9CiAgICAgIG9wdC5kYXRhID0gZGF0YTsKICAgICAgdmFyIGRpc3BhdGNoID0gdGhpcy4kZGlzcGF0Y2goJ3JlcXVlc3QnLCB7CiAgICAgICAgb3B0OiBvcHQsCiAgICAgICAgdHlwZTogdGhpcy50eXBlCiAgICAgIH0pOwogICAgICByZXR1cm4gIWFsZXJ0T25FcnJvciA/IGRpc3BhdGNoIDogZGlzcGF0Y2guY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgICB2YXIgdGl0bGUgPSBfdGhpczgudCgncmVzb3VyY2UuZXJyb3JzLnVwZGF0ZScsIHsKICAgICAgICAgIG5hbWU6IF90aGlzOC5uYW1lCiAgICAgICAgfSk7CiAgICAgICAgY29uc29sZS5lcnJvcih0aXRsZSwgZSk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc29sZQoKICAgICAgICBfdGhpczguJGRpc3BhdGNoKCdncm93bC9lcnJvcicsIHsKICAgICAgICAgIHRpdGxlOiB0aXRsZSwKICAgICAgICAgIG1lc3NhZ2U6IGUgPT09IG51bGwgfHwgZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZS5tZXNzYWdlLAogICAgICAgICAgdGltZW91dDogNTAwMAogICAgICAgIH0sIHsKICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAic2F2ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2F2ZSgpIHsKICAgICAgcmV0dXJuIHRoaXMuX3NhdmUuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJlbW92ZSBhbnkgdW53YW50ZWQgcHJvcGVydGllcyBmcm9tIHRoZSBvYmplY3QgdGhhdCB3aWxsIGJlIHNhdmVkCiAgICAgKi8KICB9LCB7CiAgICBrZXk6ICJjbGVhbkZvclNhdmUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNsZWFuRm9yU2F2ZShkYXRhLCBmb3JOZXcpIHsKICAgICAgZGVsZXRlIGRhdGEuX19yZWh5ZHJhdGU7CiAgICAgIGRlbGV0ZSBkYXRhLl9fY2xvbmU7CiAgICAgIHJldHVybiBkYXRhOwogICAgfQoKICAgIC8qKgogICAgICogQWxsb3cgdG8gaGFuZGxlIHRoZSByZXNwb25zZSBvZiB0aGUgc2F2ZSByZXF1ZXN0CiAgICAgKiBAcGFyYW0geyp9IHJlcyBGdWxsIHJlcXVlc3QgcmVzcG9uc2UKICAgICAqLwogIH0sIHsKICAgIGtleTogInByb2Nlc3NTYXZlUmVzcG9uc2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHByb2Nlc3NTYXZlUmVzcG9uc2UocmVzKSB7fQogIH0sIHsKICAgIGtleTogIl9zYXZlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfc2F2ZTIgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgX3RoaXMkbWV0YWRhdGE2OwogICAgICAgIHZhciBvcHQsCiAgICAgICAgICBmb3JOZXcsCiAgICAgICAgICBlcnJvcnMsCiAgICAgICAgICBzY2hlbWEsCiAgICAgICAgICB1cmwsCiAgICAgICAgICBhcmdQYXJhbSwKICAgICAgICAgIHJlcywKICAgICAgICAgIF9hcmdzMiA9IGFyZ3VtZW50czsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIG9wdCA9IF9hcmdzMi5sZW5ndGggPiAwICYmIF9hcmdzMlswXSAhPT0gdW5kZWZpbmVkID8gX2FyZ3MyWzBdIDoge307CiAgICAgICAgICAgICAgZm9yTmV3ID0gIXRoaXMuaWQ7CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA0OwogICAgICAgICAgICAgIHJldHVybiB0aGlzLnZhbGlkYXRpb25FcnJvcnModGhpcywgb3B0Lmlnbm9yZUZpZWxkcyk7CiAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICBlcnJvcnMgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICBpZiAoaXNFbXB0eShlcnJvcnMpKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDc7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsIFByb21pc2UucmVqZWN0KGVycm9ycykpOwogICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgaWYgKChfdGhpcyRtZXRhZGF0YTYgPSB0aGlzLm1ldGFkYXRhKSAhPT0gbnVsbCAmJiBfdGhpcyRtZXRhZGF0YTYgIT09IHZvaWQgMCAmJiBfdGhpcyRtZXRhZGF0YTYucmVzb3VyY2VWZXJzaW9uKSB7CiAgICAgICAgICAgICAgICB0aGlzLm1ldGFkYXRhLnJlc291cmNlVmVyc2lvbiA9ICIiLmNvbmNhdCh0aGlzLm1ldGFkYXRhLnJlc291cmNlVmVyc2lvbik7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmICghb3B0LnVybCkgewogICAgICAgICAgICAgICAgaWYgKGZvck5ldykgewogICAgICAgICAgICAgICAgICBzY2hlbWEgPSB0aGlzLiRnZXR0ZXJzWydzY2hlbWFGb3InXSh0aGlzLnR5cGUpOwogICAgICAgICAgICAgICAgICB1cmwgPSBzY2hlbWEubGlua0ZvcignY29sbGVjdGlvbicpOwogICAgICAgICAgICAgICAgICBpZiAoc2NoZW1hLmF0dHJpYnV0ZXMgJiYgc2NoZW1hLmF0dHJpYnV0ZXMubmFtZXNwYWNlZCAmJiB0aGlzLm1ldGFkYXRhICYmIHRoaXMubWV0YWRhdGEubmFtZXNwYWNlKSB7CiAgICAgICAgICAgICAgICAgICAgdXJsICs9ICIvIi5jb25jYXQodGhpcy5tZXRhZGF0YS5uYW1lc3BhY2UpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIG9wdC51cmwgPSB1cmw7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBvcHQudXJsID0gdGhpcy5saW5rRm9yKCd1cGRhdGUnKSB8fCB0aGlzLmxpbmtGb3IoJ3NlbGYnKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKCFvcHQubWV0aG9kKSB7CiAgICAgICAgICAgICAgICBvcHQubWV0aG9kID0gZm9yTmV3ID8gJ3Bvc3QnIDogJ3B1dCc7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmICghb3B0LmhlYWRlcnMpIHsKICAgICAgICAgICAgICAgIG9wdC5oZWFkZXJzID0ge307CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmICghb3B0LmhlYWRlcnNbJ2NvbnRlbnQtdHlwZSddKSB7CiAgICAgICAgICAgICAgICBvcHQuaGVhZGVyc1snY29udGVudC10eXBlJ10gPSAnYXBwbGljYXRpb24vanNvbic7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmICghb3B0LmhlYWRlcnNbJ2FjY2VwdCddKSB7CiAgICAgICAgICAgICAgICBvcHQuaGVhZGVyc1snYWNjZXB0J10gPSAnYXBwbGljYXRpb24vanNvbic7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAvLyBAVE9ETyByZW1vdmUgdGhpcyBvbmNlIHRoZSBBUEkgbWFwcyBzdGV2ZSBfdHlwZSA8LT4gazhzIHR5cGUgaW4gYm90aCBkaXJlY3Rpb25zCiAgICAgICAgICAgICAgb3B0LmRhdGEgPSB0aGlzLnRvU2F2ZSgpIHx8IF9vYmplY3RTcHJlYWQoe30sIHRoaXMpOwogICAgICAgICAgICAgIGlmIChvcHQuZGF0YS5fdHlwZSkgewogICAgICAgICAgICAgICAgb3B0LmRhdGEudHlwZSA9IG9wdC5kYXRhLl90eXBlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAob3B0LmRhdGEuX25hbWUpIHsKICAgICAgICAgICAgICAgIG9wdC5kYXRhLm5hbWUgPSBvcHQuZGF0YS5fbmFtZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKG9wdC5kYXRhLl9sYWJlbHMpIHsKICAgICAgICAgICAgICAgIG9wdC5kYXRhLmxhYmVscyA9IG9wdC5kYXRhLl9sYWJlbHM7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmIChvcHQuZGF0YS5fYW5ub3RhdGlvbnMpIHsKICAgICAgICAgICAgICAgIG9wdC5kYXRhLmFubm90YXRpb25zID0gb3B0LmRhdGEuX2Fubm90YXRpb25zOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBvcHQuZGF0YSA9IHRoaXMuY2xlYW5Gb3JTYXZlKG9wdC5kYXRhLCBmb3JOZXcpOwoKICAgICAgICAgICAgICAvLyBoYW5kbGUgInJlcGxhY2UiIG9wdCBhcyBhIHF1ZXJ5IHBhcmFtIF9yZXBsYWNlPXRydWUgZm9yIG5vcm1hbiBQVVQgcmVxdWVzdHMKICAgICAgICAgICAgICBpZiAob3B0ICE9PSBudWxsICYmIG9wdCAhPT0gdm9pZCAwICYmIG9wdC5yZXBsYWNlICYmIG9wdC5tZXRob2QgPT09ICdwdXQnKSB7CiAgICAgICAgICAgICAgICBhcmdQYXJhbSA9IG9wdC51cmwuaW5jbHVkZXMoJz8nKSA/ICcmJyA6ICc/JzsKICAgICAgICAgICAgICAgIG9wdC51cmwgPSAiIi5jb25jYXQob3B0LnVybCkuY29uY2F0KGFyZ1BhcmFtLCAiX3JlcGxhY2U9dHJ1ZSIpOwogICAgICAgICAgICAgICAgZGVsZXRlIG9wdC5yZXBsYWNlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDIwOwogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjM7CiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJGRpc3BhdGNoKCdyZXF1ZXN0JywgewogICAgICAgICAgICAgICAgb3B0OiBvcHQsCiAgICAgICAgICAgICAgICB0eXBlOiB0aGlzLnR5cGUKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgY2FzZSAyMzoKICAgICAgICAgICAgICByZXMgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICAvLyBBbGxvdyB0byBwcm9jZXNzIHJlc3BvbnNlIGluZGVwZW5kZW50bHkgZnJvbSB0aGUgcmVsYXRlZCBtb2RlbHMKICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NTYXZlUmVzcG9uc2UocmVzKTsKCiAgICAgICAgICAgICAgLy8gU3RldmUgc29tZXRpbWVzIHJldHVybnMgVGFibGUgcmVzcG9uc2VzIGluc3RlYWQgb2YgdGhlIHJlc291cmNlIHlvdSBqdXN0IHNhdmVkLi4gaWdub3JlCiAgICAgICAgICAgICAgaWYgKCEocmVzICYmIHJlcy5raW5kICE9PSAnVGFibGUnKSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAyODsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDI4OwogICAgICAgICAgICAgIHJldHVybiB0aGlzLiRkaXNwYXRjaCgnbG9hZCcsIHsKICAgICAgICAgICAgICAgIGRhdGE6IHJlcywKICAgICAgICAgICAgICAgIGV4aXN0aW5nOiBmb3JOZXcgPyB0aGlzIDogdW5kZWZpbmVkCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNhc2UgMjg6CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAzNjsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAzMDoKICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDMwOwogICAgICAgICAgICAgIF9jb250ZXh0Mi50MCA9IF9jb250ZXh0MlsiY2F0Y2giXSgyMCk7CiAgICAgICAgICAgICAgaWYgKCEodGhpcy50eXBlICYmIHRoaXMuaWQgJiYgKF9jb250ZXh0Mi50MCA9PT0gbnVsbCB8fCBfY29udGV4dDIudDAgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jb250ZXh0Mi50MC5fc3RhdHVzKSA9PT0gNDA5KSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAzNTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDM1OwogICAgICAgICAgICAgIHJldHVybiB0aGlzLiRkaXNwYXRjaCgnZmluZCcsIHsKICAgICAgICAgICAgICAgIHR5cGU6IHRoaXMudHlwZSwKICAgICAgICAgICAgICAgIGlkOiB0aGlzLmlkLAogICAgICAgICAgICAgICAgb3B0OiB7CiAgICAgICAgICAgICAgICAgIGZvcmNlOiB0cnVlCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNhc2UgMzU6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsIFByb21pc2UucmVqZWN0KF9jb250ZXh0Mi50MCkpOwogICAgICAgICAgICBjYXNlIDM2OgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCB0aGlzKTsKICAgICAgICAgICAgY2FzZSAzNzoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMiwgdGhpcywgW1syMCwgMzBdXSk7CiAgICAgIH0pKTsKICAgICAgZnVuY3Rpb24gX3NhdmUoKSB7CiAgICAgICAgcmV0dXJuIF9zYXZlMi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CiAgICAgIHJldHVybiBfc2F2ZTsKICAgIH0oKQogIH0sIHsKICAgIGtleTogInJlbW92ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVtb3ZlKCkgewogICAgICByZXR1cm4gdGhpcy5fcmVtb3ZlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9CiAgfSwgewogICAga2V5OiAiX3JlbW92ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3JlbW92ZTIgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMygpIHsKICAgICAgICB2YXIgb3B0LAogICAgICAgICAgcmVzLAogICAgICAgICAgX2FyZ3MzID0gYXJndW1lbnRzOwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgb3B0ID0gX2FyZ3MzLmxlbmd0aCA+IDAgJiYgX2FyZ3MzWzBdICE9PSB1bmRlZmluZWQgPyBfYXJnczNbMF0gOiB7fTsKICAgICAgICAgICAgICBpZiAoIW9wdC51cmwpIHsKICAgICAgICAgICAgICAgIG9wdC51cmwgPSB0aGlzLmxpbmtGb3IoJ3NlbGYnKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgb3B0Lm1ldGhvZCA9ICdkZWxldGUnOwogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNTsKICAgICAgICAgICAgICByZXR1cm4gdGhpcy4kZGlzcGF0Y2goJ3JlcXVlc3QnLCB7CiAgICAgICAgICAgICAgICBvcHQ6IG9wdCwKICAgICAgICAgICAgICAgIHR5cGU6IHRoaXMudHlwZQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQzLnNlbnQ7CiAgICAgICAgICAgICAgaWYgKCEoKHJlcyA9PT0gbnVsbCB8fCByZXMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcy5fc3RhdHVzKSA9PT0gMjA0KSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA5OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gOTsKICAgICAgICAgICAgICByZXR1cm4gdGhpcy4kZGlzcGF0Y2goJ3dzLnJlc291cmNlLnJlbW92ZScsIHsKICAgICAgICAgICAgICAgIGRhdGE6IHRoaXMKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUzLCB0aGlzKTsKICAgICAgfSkpOwogICAgICBmdW5jdGlvbiBfcmVtb3ZlKCkgewogICAgICAgIHJldHVybiBfcmVtb3ZlMi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CiAgICAgIHJldHVybiBfcmVtb3ZlOwogICAgfSgpIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogIH0sIHsKICAgIGtleTogImN1cnJlbnRSb3V0ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY3VycmVudFJvdXRlKCkgewogICAgICByZXR1cm4gd2luZG93LiRudXh0LiRyb3V0ZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjdXJyZW50Um91dGVyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjdXJyZW50Um91dGVyKCkgewogICAgICByZXR1cm4gd2luZG93LiRudXh0LiRyb3V0ZXI7CiAgICB9CiAgfSwgewogICAga2V5OiAibGlzdExvY2F0aW9uIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gewogICAgICAgIG5hbWU6ICJjLWNsdXN0ZXItcHJvZHVjdC1yZXNvdXJjZSIsCiAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICBwcm9kdWN0OiB0aGlzLiRyb290R2V0dGVyc1sncHJvZHVjdElkJ10sCiAgICAgICAgICBjbHVzdGVyOiB0aGlzLiRyb290R2V0dGVyc1snY2x1c3RlcklkJ10sCiAgICAgICAgICByZXNvdXJjZTogdGhpcy50eXBlCiAgICAgICAgfQogICAgICB9OwogICAgfQogIH0sIHsKICAgIGtleTogIl9kZXRhaWxMb2NhdGlvbiIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgdmFyIF90aGlzJGlkLCBfc2NoZW1hJGF0dHJpYnV0ZXMsIF90aGlzJG1ldGFkYXRhNzsKICAgICAgdmFyIHNjaGVtYSA9IHRoaXMuJGdldHRlcnNbJ3NjaGVtYUZvciddKHRoaXMudHlwZSk7CiAgICAgIHZhciBpZCA9IChfdGhpcyRpZCA9IHRoaXMuaWQpID09PSBudWxsIHx8IF90aGlzJGlkID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRpZC5yZXBsYWNlKC8uKlwvLywgJycpOwogICAgICByZXR1cm4gewogICAgICAgIG5hbWU6ICJjLWNsdXN0ZXItcHJvZHVjdC1yZXNvdXJjZSIuY29uY2F0KHNjaGVtYSAhPT0gbnVsbCAmJiBzY2hlbWEgIT09IHZvaWQgMCAmJiAoX3NjaGVtYSRhdHRyaWJ1dGVzID0gc2NoZW1hLmF0dHJpYnV0ZXMpICE9PSBudWxsICYmIF9zY2hlbWEkYXR0cmlidXRlcyAhPT0gdm9pZCAwICYmIF9zY2hlbWEkYXR0cmlidXRlcy5uYW1lc3BhY2VkID8gJy1uYW1lc3BhY2UnIDogJycsICItaWQiKSwKICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgIHByb2R1Y3Q6IHRoaXMuJHJvb3RHZXR0ZXJzWydwcm9kdWN0SWQnXSwKICAgICAgICAgIGNsdXN0ZXI6IHRoaXMuJHJvb3RHZXR0ZXJzWydjbHVzdGVySWQnXSwKICAgICAgICAgIHJlc291cmNlOiB0aGlzLnR5cGUsCiAgICAgICAgICBuYW1lc3BhY2U6IChfdGhpcyRtZXRhZGF0YTcgPSB0aGlzLm1ldGFkYXRhKSA9PT0gbnVsbCB8fCBfdGhpcyRtZXRhZGF0YTcgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJG1ldGFkYXRhNy5uYW1lc3BhY2UsCiAgICAgICAgICBpZDogaWQKICAgICAgICB9CiAgICAgIH07CiAgICB9CiAgfSwgewogICAga2V5OiAiZGV0YWlsTG9jYXRpb24iLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLl9kZXRhaWxMb2NhdGlvbjsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnb1RvRGV0YWlsIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnb1RvRGV0YWlsKCkgewogICAgICB0aGlzLmN1cnJlbnRSb3V0ZXIoKS5wdXNoKHRoaXMuZGV0YWlsTG9jYXRpb24pOwogICAgfQogIH0sIHsKICAgIGtleTogImdvVG9DbG9uZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ29Ub0Nsb25lKCkgewogICAgICB2YXIgbW9yZVF1ZXJ5ID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTsKICAgICAgdmFyIGxvY2F0aW9uID0gdGhpcy5kZXRhaWxMb2NhdGlvbjsKICAgICAgbG9jYXRpb24ucXVlcnkgPSBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGxvY2F0aW9uLnF1ZXJ5KSwge30sIF9kZWZpbmVQcm9wZXJ0eShfZGVmaW5lUHJvcGVydHkoe30sIE1PREUsIF9DTE9ORSksIEFTLCBfVU5GTEFHKSwgbW9yZVF1ZXJ5KTsKICAgICAgdGhpcy5jdXJyZW50Um91dGVyKCkucHVzaChsb2NhdGlvbik7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ29Ub0VkaXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdvVG9FZGl0KCkgewogICAgICB2YXIgbW9yZVF1ZXJ5ID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTsKICAgICAgdmFyIGxvY2F0aW9uID0gdGhpcy5kZXRhaWxMb2NhdGlvbjsKICAgICAgbG9jYXRpb24ucXVlcnkgPSBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGxvY2F0aW9uLnF1ZXJ5KSwge30sIF9kZWZpbmVQcm9wZXJ0eShfZGVmaW5lUHJvcGVydHkoe30sIE1PREUsIF9FRElUKSwgQVMsIF9VTkZMQUcpLCBtb3JlUXVlcnkpOwogICAgICB0aGlzLmN1cnJlbnRSb3V0ZXIoKS5wdXNoKGxvY2F0aW9uKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnb1RvVmlld0NvbmZpZyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ29Ub1ZpZXdDb25maWcoKSB7CiAgICAgIHZhciBtb3JlUXVlcnkgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9OwogICAgICB2YXIgbG9jYXRpb24gPSB0aGlzLmRldGFpbExvY2F0aW9uOwogICAgICBsb2NhdGlvbi5xdWVyeSA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgbG9jYXRpb24ucXVlcnkpLCB7fSwgX2RlZmluZVByb3BlcnR5KF9kZWZpbmVQcm9wZXJ0eSh7fSwgTU9ERSwgX1ZJRVcpLCBBUywgX0NPTkZJRyksIG1vcmVRdWVyeSk7CiAgICAgIHRoaXMuY3VycmVudFJvdXRlcigpLnB1c2gobG9jYXRpb24pOwogICAgfQogIH0sIHsKICAgIGtleTogImdvVG9FZGl0WWFtbCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ29Ub0VkaXRZYW1sKCkgewogICAgICB2YXIgbG9jYXRpb24gPSB0aGlzLmRldGFpbExvY2F0aW9uOwogICAgICBsb2NhdGlvbi5xdWVyeSA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgbG9jYXRpb24ucXVlcnkpLCB7fSwgX2RlZmluZVByb3BlcnR5KF9kZWZpbmVQcm9wZXJ0eSh7fSwgTU9ERSwgX0VESVQpLCBBUywgX1lBTUwpKTsKICAgICAgdGhpcy5jdXJyZW50Um91dGVyKCkucHVzaChsb2NhdGlvbik7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ29Ub1ZpZXdZYW1sIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnb1RvVmlld1lhbWwoKSB7CiAgICAgIHZhciBsb2NhdGlvbiA9IHRoaXMuZGV0YWlsTG9jYXRpb247CiAgICAgIGxvY2F0aW9uLnF1ZXJ5ID0gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBsb2NhdGlvbi5xdWVyeSksIHt9LCBfZGVmaW5lUHJvcGVydHkoX2RlZmluZVByb3BlcnR5KHt9LCBNT0RFLCBfVklFVyksIEFTLCBfWUFNTCkpOwogICAgICB0aGlzLmN1cnJlbnRSb3V0ZXIoKS5wdXNoKGxvY2F0aW9uKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjbG9uZVlhbWwiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNsb25lWWFtbCgpIHsKICAgICAgdmFyIG1vcmVRdWVyeSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307CiAgICAgIHZhciBsb2NhdGlvbiA9IHRoaXMuZGV0YWlsTG9jYXRpb247CiAgICAgIGxvY2F0aW9uLnF1ZXJ5ID0gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBsb2NhdGlvbi5xdWVyeSksIHt9LCBfZGVmaW5lUHJvcGVydHkoX2RlZmluZVByb3BlcnR5KHt9LCBNT0RFLCBfQ0xPTkUpLCBBUywgX1lBTUwpLCBtb3JlUXVlcnkpOwogICAgICB0aGlzLmN1cnJlbnRSb3V0ZXIoKS5wdXNoKGxvY2F0aW9uKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJkb3dubG9hZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2Rvd25sb2FkID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQoKSB7CiAgICAgICAgdmFyIHZhbHVlLCBkYXRhOwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTQkKF9jb250ZXh0NCkgewogICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQ0LnByZXYgPSBfY29udGV4dDQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAyOwogICAgICAgICAgICAgIHJldHVybiB0aGlzLmZvbGxvd0xpbmsoJ3ZpZXcnLCB7CiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgIGFjY2VwdDogJ2FwcGxpY2F0aW9uL3lhbWwnCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICB2YWx1ZSA9IF9jb250ZXh0NC5zZW50OwogICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gNTsKICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jbGVhbkZvckRvd25sb2FkKHZhbHVlLmRhdGEpOwogICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgZGF0YSA9IF9jb250ZXh0NC5zZW50OwogICAgICAgICAgICAgIGRvd25sb2FkRmlsZSgiIi5jb25jYXQodGhpcy5uYW1lRGlzcGxheSwgIi55YW1sIiksIGRhdGEsICdhcHBsaWNhdGlvbi95YW1sJyk7CiAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNCwgdGhpcyk7CiAgICAgIH0pKTsKICAgICAgZnVuY3Rpb24gZG93bmxvYWQoKSB7CiAgICAgICAgcmV0dXJuIF9kb3dubG9hZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CiAgICAgIHJldHVybiBkb3dubG9hZDsKICAgIH0oKQogIH0sIHsKICAgIGtleTogImRvd25sb2FkQnVsayIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2Rvd25sb2FkQnVsayA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU2KGl0ZW1zKSB7CiAgICAgICAgdmFyIF90aGlzOSA9IHRoaXM7CiAgICAgICAgdmFyIGZpbGVzLCBuYW1lcywgX2l0ZXJhdG9yLCBfc3RlcCwgaXRlbSwgbmFtZSwgaSwgemlwOwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTYkKF9jb250ZXh0NikgewogICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQ2LnByZXYgPSBfY29udGV4dDYubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgZmlsZXMgPSB7fTsKICAgICAgICAgICAgICBuYW1lcyA9IFtdOwogICAgICAgICAgICAgIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKGl0ZW1zKTsKICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgZm9yIChfaXRlcmF0b3IucygpOyAhKF9zdGVwID0gX2l0ZXJhdG9yLm4oKSkuZG9uZTspIHsKICAgICAgICAgICAgICAgICAgaXRlbSA9IF9zdGVwLnZhbHVlOwogICAgICAgICAgICAgICAgICBuYW1lID0gIiIuY29uY2F0KGl0ZW0ubmFtZURpc3BsYXksICIueWFtbCIpOwogICAgICAgICAgICAgICAgICBpID0gMjsKICAgICAgICAgICAgICAgICAgd2hpbGUgKG5hbWVzLmluY2x1ZGVzKG5hbWUpKSB7CiAgICAgICAgICAgICAgICAgICAgbmFtZSA9ICIiLmNvbmNhdChpdGVtLm5hbWVEaXNwbGF5LCAiXyIpLmNvbmNhdChpKyssICIueWFtbCIpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIG5hbWVzLnB1c2gobmFtZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgICAgICBfaXRlcmF0b3IuZShlcnIpOwogICAgICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgICAgICBfaXRlcmF0b3IuZigpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDY7CiAgICAgICAgICAgICAgcmV0dXJuIGVhY2hMaW1pdChpdGVtcywgMTAsIGZ1bmN0aW9uIChpdGVtLCBpZHgpIHsKICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLmZvbGxvd0xpbmsoJ3ZpZXcnLCB7CiAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgICBhY2NlcHQ6ICdhcHBsaWNhdGlvbi95YW1sJwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KS50aGVuKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU1KGRhdGEpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgeWFtbCwgY2xlYW5lZFlhbWw7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNSQoX2NvbnRleHQ1KSB7CiAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDUucHJldiA9IF9jb250ZXh0NS5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICB5YW1sID0gZGF0YS5kYXRhIHx8IGRhdGE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczkuY2xlYW5Gb3JEb3dubG9hZCh5YW1sKTsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFuZWRZYW1sID0gX2NvbnRleHQ1LnNlbnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZXNbInJlc291cmNlcy8iLmNvbmNhdChuYW1lc1tpZHhdKV0gPSBjbGVhbmVkWWFtbDsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWU1KTsKICAgICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF94NCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9KCkpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSA4OwogICAgICAgICAgICAgIHJldHVybiBnZW5lcmF0ZVppcChmaWxlcyk7CiAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICB6aXAgPSBfY29udGV4dDYuc2VudDsKICAgICAgICAgICAgICBkb3dubG9hZEZpbGUoJ3Jlc291cmNlcy56aXAnLCB6aXAsICdhcHBsaWNhdGlvbi96aXAnKTsKICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNik7CiAgICAgIH0pKTsKICAgICAgZnVuY3Rpb24gZG93bmxvYWRCdWxrKF94MykgewogICAgICAgIHJldHVybiBfZG93bmxvYWRCdWxrLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KICAgICAgcmV0dXJuIGRvd25sb2FkQnVsazsKICAgIH0oKQogIH0sIHsKICAgIGtleTogInZpZXdJbkFwaSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdmlld0luQXBpKCkgewogICAgICB3aW5kb3cub3Blbih0aGlzLmxpbmtzLnNlbGYsICdfYmxhbmsnKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJwcm9tcHRSZW1vdmUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHByb21wdFJlbW92ZShyZXNvdXJjZXMpIHsKICAgICAgaWYgKCFyZXNvdXJjZXMpIHsKICAgICAgICByZXNvdXJjZXMgPSB0aGlzOwogICAgICB9CiAgICAgIHRoaXMuJGRpc3BhdGNoKCdwcm9tcHRSZW1vdmUnLCByZXNvdXJjZXMpOwogICAgfQogIH0sIHsKICAgIGtleTogImNvbmZpcm1SZW1vdmUiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJhcHBseURlZmF1bHRzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBhcHBseURlZmF1bHRzKCkge30KICB9LCB7CiAgICBrZXk6ICJ1cmxGcm9tQXR0cnMiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHZhciBzY2hlbWEgPSB0aGlzLiRnZXR0ZXJzWydzY2hlbWFGb3InXSh0aGlzLnR5cGUpOwogICAgICB2YXIgX3RoaXMkbWV0YWRhdGEkbmFtZXNwID0gdGhpcy5tZXRhZGF0YS5uYW1lc3BhY2UsCiAgICAgICAgbmFtZXNwYWNlID0gX3RoaXMkbWV0YWRhdGEkbmFtZXNwID09PSB2b2lkIDAgPyAnZGVmYXVsdCcgOiBfdGhpcyRtZXRhZGF0YSRuYW1lc3A7CiAgICAgIHZhciB1cmwgPSBzY2hlbWEubGlua3MuY29sbGVjdGlvbjsKICAgICAgdmFyIGF0dHJpYnV0ZXMgPSBzY2hlbWEgPT09IG51bGwgfHwgc2NoZW1hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzY2hlbWEuYXR0cmlidXRlczsKICAgICAgaWYgKCFhdHRyaWJ1dGVzKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdBdHRyaWJ1dGVzIG11c3QgYmUgcHJlc2VudCBvbiB0aGUgc2NoZW1hJyk7CiAgICAgIH0KICAgICAgdmFyIGdyb3VwID0gYXR0cmlidXRlcy5ncm91cCwKICAgICAgICByZXNvdXJjZSA9IGF0dHJpYnV0ZXMucmVzb3VyY2U7CiAgICAgIHVybCA9ICIiLmNvbmNhdCh1cmwuc2xpY2UoMCwgdXJsLmluZGV4T2YoJy92MScpKSwgIi9hcGlzLyIpLmNvbmNhdChncm91cCwgIi9uYW1lc3BhY2VzLyIpLmNvbmNhdChuYW1lc3BhY2UsICIvIikuY29uY2F0KHJlc291cmNlKTsKICAgICAgcmV0dXJuIHVybDsKICAgIH0KCiAgICAvLyBjb252ZXJ0IHlhbWwgdG8gb2JqZWN0LCBjbGVhbiBmb3IgbmV3IGlmIGNyZWF0aW5nL2Nsb25pbmcKICAgIC8vIG1hcCBfdHlwZSB0byB0eXBlCiAgfSwgewogICAga2V5OiAiY2xlYW5ZYW1sIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjbGVhbllhbWwoeWFtbCkgewogICAgICB2YXIgbW9kZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogJ2VkaXQnOwogICAgICB0cnkgewogICAgICAgIHZhciBvYmogPSBqc3lhbWwubG9hZCh5YW1sKTsKICAgICAgICBpZiAobW9kZSAhPT0gJ2VkaXQnKSB7CiAgICAgICAgICB0aGlzLiRkaXNwYXRjaCgiY2xlYW5Gb3JOZXciLCBvYmopOwogICAgICAgIH0KICAgICAgICBpZiAob2JqLl90eXBlKSB7CiAgICAgICAgICBvYmoudHlwZSA9IG9iai5fdHlwZTsKICAgICAgICAgIGRlbGV0ZSBvYmouX3R5cGU7CiAgICAgICAgfQogICAgICAgIHZhciBvdXQgPSBqc3lhbWwuZHVtcChvYmosIHsKICAgICAgICAgIHNraXBJbnZhbGlkOiB0cnVlCiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIG91dDsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAiY2xlYW5Gb3JOZXciLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNsZWFuRm9yTmV3KCkgewogICAgICB0aGlzLiRkaXNwYXRjaCgiY2xlYW5Gb3JOZXciLCB0aGlzKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjbGVhbkZvckRpZmYiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNsZWFuRm9yRGlmZigpIHsKICAgICAgdGhpcy4kZGlzcGF0Y2goImNsZWFuRm9yRGlmZiIsIHRoaXMudG9KU09OKCkpOwogICAgfQogIH0sIHsKICAgIGtleTogImNsZWFuRm9yRG93bmxvYWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9jbGVhbkZvckRvd25sb2FkID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTcoeWFtbCkgewogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTckKF9jb250ZXh0NykgewogICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQ3LnByZXYgPSBfY29udGV4dDcubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ny5hYnJ1cHQoInJldHVybiIsIHRoaXMuJGRpc3BhdGNoKCJjbGVhbkZvckRvd25sb2FkIiwgeWFtbCkpOwogICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ny5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTcsIHRoaXMpOwogICAgICB9KSk7CiAgICAgIGZ1bmN0aW9uIGNsZWFuRm9yRG93bmxvYWQoX3g1KSB7CiAgICAgICAgcmV0dXJuIF9jbGVhbkZvckRvd25sb2FkLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KICAgICAgcmV0dXJuIGNsZWFuRm9yRG93bmxvYWQ7CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJ5YW1sRm9yU2F2ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24geWFtbEZvclNhdmUoeWFtbCkgewogICAgICB0cnkgewogICAgICAgIHZhciBvYmogPSBqc3lhbWwubG9hZCh5YW1sKTsKICAgICAgICBpZiAob2JqKSB7CiAgICAgICAgICBpZiAodGhpcy5fdHlwZSkgewogICAgICAgICAgICBvYmouX3R5cGUgPSBvYmoudHlwZTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBqc3lhbWwuZHVtcChvYmopOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAic2F2ZVlhbWwiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9zYXZlWWFtbDIgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlOCh5YW1sKSB7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlOCQoX2NvbnRleHQ4KSB7CiAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDgucHJldiA9IF9jb250ZXh0OC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dDgubmV4dCA9IDI7CiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3NhdmVZYW1sKHlhbWwpOwogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTgsIHRoaXMpOwogICAgICB9KSk7CiAgICAgIGZ1bmN0aW9uIHNhdmVZYW1sKF94NikgewogICAgICAgIHJldHVybiBfc2F2ZVlhbWwyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KICAgICAgcmV0dXJuIHNhdmVZYW1sOwogICAgfSgpCiAgfSwgewogICAga2V5OiAiX3NhdmVZYW1sIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfc2F2ZVlhbWwzID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTkoeWFtbCkgewogICAgICAgIHZhciBfdGhpcyRzY2hlbWEzOwogICAgICAgIHZhciBwYXJzZWQsIGVyciwgcmVzLCBpc0NyZWF0ZSwgaGVhZGVyczsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU5JChfY29udGV4dDkpIHsKICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0OS5wcmV2ID0gX2NvbnRleHQ5Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIC8qIE11bHRpcGFydCBzdXBwb3J0LCBidXQgbmVlZCB0byBrbm93IHRoZSByaWdodCBjbHVzdGVyIGFuZCB3b3JrIGZvciBtYW5hZ2VtZW50IHN0b3JlCiAgICAgICAgICAgICAgICBhbmQgImFwcGx5IiBzZWVtcyB0byBvbmx5IHdvcmsgZm9yIGNyZWF0ZSwgbm90IHVwZGF0ZS4KICAgICAgICAgICAgICAgY29uc3QgYXJ5ID0ganN5YW1sLmxvYWRBbGwoeWFtbCk7IC8vIHdpbGwgdGhyb3cgb24gaW52YWxpZCB5YW1sLCBhbmQgcmV0dXJuIG9uZSBvciBtb3JlIGRvY3VtZW50cyAodXN1YWxseSBvbmUpCiAgICAgICAgICAgICAgIGlmICggYXJ5Lmxlbmd0aCA+IDEgKSB7CiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLiRyb290R2V0dGVyc1snY3VycmVudENsdXN0ZXInXS5kb0FjdGlvbignYXBwbHknLCB7CiAgICAgICAgICAgICAgICAgIHlhbWwsCiAgICAgICAgICAgICAgICAgIGRlZmF1bHROYW1lc3BhY2U6IHRoaXMubWV0YWRhdGEubmFtZXNwYWNlLAogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICBjb25zdCBwYXJzZWQgPSBhcnlbMF07CiAgICAgICAgICAgICAgKi8KICAgICAgICAgICAgICBwYXJzZWQgPSBqc3lhbWwubG9hZCh5YW1sKTsgLy8gd2lsbCB0aHJvdyBvbiBpbnZhbGlkIHlhbWwsIGFuZCByZXR1cm4gb25lIG9yIG1vcmUgZG9jdW1lbnRzICh1c3VhbGx5IG9uZSkKICAgICAgICAgICAgICBpZiAoISgoX3RoaXMkc2NoZW1hMyA9IHRoaXMuc2NoZW1hKSAhPT0gbnVsbCAmJiBfdGhpcyRzY2hlbWEzICE9PSB2b2lkIDAgJiYgKF90aGlzJHNjaGVtYTMgPSBfdGhpcyRzY2hlbWEzLmF0dHJpYnV0ZXMpICE9PSBudWxsICYmIF90aGlzJHNjaGVtYTMgIT09IHZvaWQgMCAmJiBfdGhpcyRzY2hlbWEzLm5hbWVzcGFjZWQgJiYgIXBhcnNlZC5tZXRhZGF0YS5uYW1lc3BhY2UpKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDkubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgZXJyID0gdGhpcy4kcm9vdEdldHRlcnNbJ2kxOG4vdCddKCdyZXNvdXJjZVlhbWwuZXJyb3JzLm5hbWVzcGFjZVJlcXVpcmVkJyk7CiAgICAgICAgICAgICAgdGhyb3cgZXJyOwogICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgaXNDcmVhdGUgPSAhdGhpcy5pZDsKICAgICAgICAgICAgICBoZWFkZXJzID0gewogICAgICAgICAgICAgICAgJ2NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi95YW1sJywKICAgICAgICAgICAgICAgIGFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nCiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICBpZiAoIWlzQ3JlYXRlKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDkubmV4dCA9IDEyOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIF9jb250ZXh0OS5uZXh0ID0gOTsKICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zY2hlbWEuZm9sbG93TGluaygnY29sbGVjdGlvbicsIHsKICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLAogICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycywKICAgICAgICAgICAgICAgIGRhdGE6IHlhbWwKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0OS5zZW50OwogICAgICAgICAgICAgIF9jb250ZXh0OS5uZXh0ID0gMTU7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgX2NvbnRleHQ5Lm5leHQgPSAxNDsKICAgICAgICAgICAgICByZXR1cm4gdGhpcy5mb2xsb3dMaW5rKCd1cGRhdGUnLCB7CiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQVVQnLAogICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycywKICAgICAgICAgICAgICAgIGRhdGE6IHlhbWwKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgICByZXMgPSBfY29udGV4dDkuc2VudDsKICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgICBfY29udGV4dDkubmV4dCA9IDE3OwogICAgICAgICAgICAgIHJldHVybiB0aGlzLiRkaXNwYXRjaCgibG9hZCIsIHsKICAgICAgICAgICAgICAgIGRhdGE6IHJlcywKICAgICAgICAgICAgICAgIGV4aXN0aW5nOiBpc0NyZWF0ZSA/IHRoaXMgOiB1bmRlZmluZWQKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgY2FzZSAxNzoKICAgICAgICAgICAgICBpZiAoIXRoaXMuaXNTcG9vZmVkKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDkubmV4dCA9IDIwOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIF9jb250ZXh0OS5uZXh0ID0gMjA7CiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJGRpc3BhdGNoKCdjbHVzdGVyL2ZpbmRBbGwnLCB7CiAgICAgICAgICAgICAgICB0eXBlOiB0aGlzLnR5cGUsCiAgICAgICAgICAgICAgICBvcHQ6IHsKICAgICAgICAgICAgICAgICAgZm9yY2U6IHRydWUKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICByb290OiB0cnVlCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNhc2UgMjA6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OS5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTksIHRoaXMpOwogICAgICB9KSk7CiAgICAgIGZ1bmN0aW9uIF9zYXZlWWFtbChfeDcpIHsKICAgICAgICByZXR1cm4gX3NhdmVZYW1sMy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CiAgICAgIHJldHVybiBfc2F2ZVlhbWw7CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJtb2RlbFZhbGlkYXRpb25SdWxlcyIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgdmFyIF90aGlzMTAgPSB0aGlzOwogICAgICB2YXIgcnVsZXMgPSBbXTsKICAgICAgdmFyIGN1c3RvbVZhbGlkYXRpb25SdWxlc2V0cyA9IHRoaXMgPT09IG51bGwgfHwgdGhpcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogdGhpcy5jdXN0b21WYWxpZGF0aW9uUnVsZXMuZmlsdGVyKGZ1bmN0aW9uIChydWxlKSB7CiAgICAgICAgcmV0dXJuICEhcnVsZS52YWxpZGF0b3JzIHx8ICEhcnVsZS5yZXF1aXJlZDsKICAgICAgfSkubWFwKGZ1bmN0aW9uIChydWxlKSB7CiAgICAgICAgdmFyIGZvcm1SdWxlcyA9IGZvcm1SdWxlc0dlbmVyYXRvcihfdGhpczEwLnQsIHsKICAgICAgICAgIGRpc3BsYXlLZXk6IHJ1bGUgIT09IG51bGwgJiYgcnVsZSAhPT0gdm9pZCAwICYmIHJ1bGUudHJhbnNsYXRpb25LZXkgPyBfdGhpczEwLnQocnVsZS50cmFuc2xhdGlvbktleSkgOiAnVmFsdWUnCiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHBhdGg6IHJ1bGUucGF0aCwKICAgICAgICAgIHJ1bGVzOiBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KHJ1bGUudmFsaWRhdG9ycyB8fCBbXSksIF90b0NvbnN1bWFibGVBcnJheShydWxlLnJlcXVpcmVkID8gWydyZXF1aXJlZCddIDogW10pLCBfdG9Db25zdW1hYmxlQXJyYXkoWydkbnNMYWJlbCcsICdkbnNMYWJlbFJlc3RyaWN0ZWQnLCAnaG9zdG5hbWUnXS5pbmNsdWRlcyhydWxlLnR5cGUpID8gW3J1bGUudHlwZV0gOiBbXSkpLm1hcChmdW5jdGlvbiAocnVsZSkgewogICAgICAgICAgICBpZiAocnVsZS5pbmNsdWRlcygnOicpKSB7CiAgICAgICAgICAgICAgdmFyIF9ydWxlJHNwbGl0ID0gcnVsZS5zcGxpdCgnOicpLAogICAgICAgICAgICAgICAgX3J1bGUkc3BsaXQyID0gX3NsaWNlZFRvQXJyYXkoX3J1bGUkc3BsaXQsIDIpLAogICAgICAgICAgICAgICAgcnVsZUtleSA9IF9ydWxlJHNwbGl0MlswXSwKICAgICAgICAgICAgICAgIHJ1bGVBcmcgPSBfcnVsZSRzcGxpdDJbMV07CiAgICAgICAgICAgICAgcmV0dXJuIGZvcm1SdWxlc1tydWxlS2V5XShydWxlQXJnKTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gZm9ybVJ1bGVzW3J1bGVdOwogICAgICAgICAgfSkuZmlsdGVyKGZ1bmN0aW9uIChydWxlKSB7CiAgICAgICAgICAgIHJldHVybiAhIXJ1bGU7CiAgICAgICAgICB9KQogICAgICAgIH07CiAgICAgIH0pLmZpbHRlcihmdW5jdGlvbiAocnVsZXNldCkgewogICAgICAgIHJldHVybiBydWxlc2V0LnJ1bGVzLmxlbmd0aCA+IDA7CiAgICAgIH0pOwogICAgICBydWxlcy5wdXNoLmFwcGx5KHJ1bGVzLCBfdG9Db25zdW1hYmxlQXJyYXkoY3VzdG9tVmFsaWRhdGlvblJ1bGVzZXRzKSk7CiAgICAgIHJldHVybiBydWxlczsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjdXN0b21WYWxpZGF0aW9uRXJyb3JzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjdXN0b21WYWxpZGF0aW9uRXJyb3JzKGRhdGEpIHsKICAgICAgdmFyIF90aGlzMTEgPSB0aGlzOwogICAgICB2YXIgaWdub3JlUGF0aHMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IFtdOwogICAgICB2YXIgZXJyb3JzID0gW107CiAgICAgIHZhciBjdXN0b21WYWxpZGF0aW9uUnVsZXMgPSB0aGlzLmN1c3RvbVZhbGlkYXRpb25SdWxlczsKICAgICAgaWYgKCFpc0VtcHR5KGN1c3RvbVZhbGlkYXRpb25SdWxlcykpIHsKICAgICAgICBpZiAoaXNGdW5jdGlvbihjdXN0b21WYWxpZGF0aW9uUnVsZXMpKSB7CiAgICAgICAgICBjdXN0b21WYWxpZGF0aW9uUnVsZXMgPSBjdXN0b21WYWxpZGF0aW9uUnVsZXMoKTsKICAgICAgICB9CiAgICAgICAgY3VzdG9tVmFsaWRhdGlvblJ1bGVzLmZpbHRlcihmdW5jdGlvbiAocnVsZSkgewogICAgICAgICAgcmV0dXJuICFpZ25vcmVQYXRocy5pbmNsdWRlcyhydWxlLnBhdGgpOwogICAgICAgIH0pLmZvckVhY2goZnVuY3Rpb24gKHJ1bGUpIHsKICAgICAgICAgIHZhciBwYXRoID0gcnVsZS5wYXRoLAogICAgICAgICAgICByZXF1aXJlZElmUGF0aCA9IHJ1bGUucmVxdWlyZWRJZiwKICAgICAgICAgICAgX3J1bGUkdmFsaWRhdG9ycyA9IHJ1bGUudmFsaWRhdG9ycywKICAgICAgICAgICAgdmFsaWRhdG9ycyA9IF9ydWxlJHZhbGlkYXRvcnMgPT09IHZvaWQgMCA/IFtdIDogX3J1bGUkdmFsaWRhdG9ycywKICAgICAgICAgICAgZmllbGRUeXBlID0gcnVsZS50eXBlOwogICAgICAgICAgdmFyIHBhdGhWYWx1ZSA9IF9nZXQoZGF0YSwgcGF0aCk7CiAgICAgICAgICB2YXIgcGFyc2VkUnVsZXMgPSBjb21wYWN0KHZhbGlkYXRvcnMgfHwgW10pOwogICAgICAgICAgdmFyIGRpc3BsYXlLZXkgPSBwYXRoOwogICAgICAgICAgaWYgKHJ1bGUudHJhbnNsYXRpb25LZXkgJiYgX3RoaXMxMS4kcm9vdEdldHRlcnNbJ2kxOG4vZXhpc3RzJ10ocnVsZS50cmFuc2xhdGlvbktleSkpIHsKICAgICAgICAgICAgZGlzcGxheUtleSA9IF90aGlzMTEudChydWxlLnRyYW5zbGF0aW9uS2V5KTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChpc1N0cmluZyhwYXRoVmFsdWUpKSB7CiAgICAgICAgICAgIHBhdGhWYWx1ZSA9IHBhdGhWYWx1ZS50cmltKCk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAocmVxdWlyZWRJZlBhdGgpIHsKICAgICAgICAgICAgdmFyIHJlcUlmVmFsID0gX2dldChkYXRhLCByZXF1aXJlZElmUGF0aCk7CiAgICAgICAgICAgIGlmICghaXNFbXB0eShyZXFJZlZhbCkgJiYgaXNFbXB0eShwYXRoVmFsdWUpICYmIHBhdGhWYWx1ZSAhPT0gMCkgewogICAgICAgICAgICAgIGVycm9ycy5wdXNoKF90aGlzMTEudCgndmFsaWRhdGlvbi5yZXF1aXJlZCcsIHsKICAgICAgICAgICAgICAgIGtleTogZGlzcGxheUtleQogICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgdmFsaWRhdGVMZW5ndGgocGF0aFZhbHVlLCBydWxlLCBkaXNwbGF5S2V5LCBfdGhpczExLiRyb290R2V0dGVycywgZXJyb3JzKTsKICAgICAgICAgIHZhbGlkYXRlQ2hhcnMocGF0aFZhbHVlLCBydWxlLCBkaXNwbGF5S2V5LCBfdGhpczExLiRyb290R2V0dGVycywgZXJyb3JzKTsKICAgICAgICAgIGlmICghaXNFbXB0eShwYXRoVmFsdWUpICYmIEROU19MSUtFX1RZUEVTLmluY2x1ZGVzKGZpZWxkVHlwZSkpIHsKICAgICAgICAgICAgLy8gRE5TIHR5cGVzIHNob3VsZCBiZSBsb3dlcmNhc2UKICAgICAgICAgICAgdmFyIHRvbG93ZXIgPSAocGF0aFZhbHVlIHx8ICcnKS50b0xvd2VyQ2FzZSgpOwogICAgICAgICAgICBpZiAodG9sb3dlciAhPT0gcGF0aFZhbHVlKSB7CiAgICAgICAgICAgICAgcGF0aFZhbHVlID0gdG9sb3dlcjsKICAgICAgICAgICAgICBWdWUuc2V0KGRhdGEsIHBhdGgsIHBhdGhWYWx1ZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZXJyb3JzLnB1c2guYXBwbHkoZXJyb3JzLCBfdG9Db25zdW1hYmxlQXJyYXkodmFsaWRhdGVEbnNMaWtlVHlwZXMocGF0aFZhbHVlLCBmaWVsZFR5cGUsIGRpc3BsYXlLZXksIF90aGlzMTEuJHJvb3RHZXR0ZXJzLCBlcnJvcnMpKSk7CiAgICAgICAgICB9CiAgICAgICAgICBwYXJzZWRSdWxlcy5mb3JFYWNoKGZ1bmN0aW9uICh2YWxpZGF0b3IpIHsKICAgICAgICAgICAgdmFyIHZhbGlkYXRvckFuZEFyZ3MgPSB2YWxpZGF0b3Iuc3BsaXQoJzonKTsKICAgICAgICAgICAgdmFyIHZhbGlkYXRvck5hbWUgPSB2YWxpZGF0b3JBbmRBcmdzLnNsaWNlKDAsIDEpOwogICAgICAgICAgICB2YXIgdmFsaWRhdG9yQXJncyA9IHZhbGlkYXRvckFuZEFyZ3Muc2xpY2UoMSkgfHwgbnVsbDsKICAgICAgICAgICAgdmFyIHZhbGlkYXRvckV4aXN0cyA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChDdXN0b21WYWxpZGF0b3JzLCB2YWxpZGF0b3JOYW1lKTsKICAgICAgICAgICAgaWYgKCFpc0VtcHR5KHZhbGlkYXRvck5hbWUpICYmIHZhbGlkYXRvckV4aXN0cykgewogICAgICAgICAgICAgIEN1c3RvbVZhbGlkYXRvcnNbdmFsaWRhdG9yTmFtZV0ocGF0aFZhbHVlLCBfdGhpczExLiRyb290R2V0dGVycywgZXJyb3JzLCB2YWxpZGF0b3JBcmdzLCBkaXNwbGF5S2V5LCBkYXRhKTsKICAgICAgICAgICAgfSBlbHNlIGlmICghaXNFbXB0eSh2YWxpZGF0b3JOYW1lKSAmJiAhdmFsaWRhdG9yRXhpc3RzKSB7CiAgICAgICAgICAgICAgdmFyIF90aGlzMTEkJHJvb3RTdGF0ZSQkcDsKICAgICAgICAgICAgICAvLyBDaGVjayBpZiB2YWxpZGF0b3IgaXMgaW1wb3J0ZWQgZnJvbSBwbHVnaW4KICAgICAgICAgICAgICB2YXIgcGx1Z2luVmFsaWRhdG9yID0gKF90aGlzMTEkJHJvb3RTdGF0ZSQkcCA9IF90aGlzMTEuJHJvb3RTdGF0ZS4kcGx1Z2luKSA9PT0gbnVsbCB8fCBfdGhpczExJCRyb290U3RhdGUkJHAgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzMTEkJHJvb3RTdGF0ZSQkcC5nZXRWYWxpZGF0b3IodmFsaWRhdG9yTmFtZSk7CiAgICAgICAgICAgICAgaWYgKHBsdWdpblZhbGlkYXRvcikgewogICAgICAgICAgICAgICAgcGx1Z2luVmFsaWRhdG9yKHBhdGhWYWx1ZSwgX3RoaXMxMS4kcm9vdEdldHRlcnMsIGVycm9ycywgdmFsaWRhdG9yQXJncywgZGlzcGxheUtleSwgZGF0YSk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZQogICAgICAgICAgICAgICAgY29uc29sZS53YXJuKF90aGlzMTEudCgndmFsaWRhdGlvbi5jdXN0b20ubWlzc2luZycsIHsKICAgICAgICAgICAgICAgICAgdmFsaWRhdG9yTmFtZTogdmFsaWRhdG9yTmFtZQogICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgcmV0dXJuIGVycm9yczsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJ2YWxpZGF0aW9uRXJyb3JzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiB2YWxpZGF0aW9uRXJyb3JzKCkgewogICAgICB2YXIgZGF0YSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogdGhpczsKICAgICAgdmFyIGlnbm9yZUZpZWxkcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxID8gYXJndW1lbnRzWzFdIDogdW5kZWZpbmVkOwogICAgICB2YXIgZXJyb3JzID0gW107CiAgICAgIHZhciBvcmlnaW5hbFR5cGUgPSBkYXRhLnR5cGUsCiAgICAgICAgc2NoZW1hID0gZGF0YS5zY2hlbWE7CiAgICAgIHZhciB0eXBlID0gbm9ybWFsaXplVHlwZShvcmlnaW5hbFR5cGUpOwogICAgICBpZiAoIW9yaWdpbmFsVHlwZSkgewogICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZQogICAgICAgIGNvbnNvbGUud2Fybih0aGlzLnQoJ3ZhbGlkYXRpb24ubm9UeXBlJyksIGRhdGEpOwogICAgICAgIHJldHVybiBlcnJvcnM7CiAgICAgIH0KICAgICAgaWYgKCFzY2hlbWEpIHsKICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUKICAgICAgICAvLyBjb25zb2xlLndhcm4odGhpcy50KCd2YWxpZGF0aW9uLm5vU2NoZW1hJyksIG9yaWdpbmFsVHlwZSwgZGF0YSk7CgogICAgICAgIHJldHVybiBlcnJvcnM7CiAgICAgIH0KICAgICAgdmFyIGZpZWxkcyA9IHNjaGVtYS5yZXNvdXJjZUZpZWxkcyB8fCB7fTsKICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhmaWVsZHMpOwogICAgICB2YXIgZmllbGQsIGtleSwgdmFsLCBkaXNwbGF5S2V5OwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHsKICAgICAgICB2YXIgX2ZpZWxkOwogICAgICAgIHZhciBmaWVsZEVycm9ycyA9IFtdOwogICAgICAgIGtleSA9IGtleXNbaV07CiAgICAgICAgZmllbGQgPSBmaWVsZHNba2V5XTsKICAgICAgICB2YWwgPSBfZ2V0KGRhdGEsIGtleSk7CiAgICAgICAgZGlzcGxheUtleSA9IGRpc3BsYXlLZXlGb3IodHlwZSwga2V5LCB0aGlzLiRyb290R2V0dGVycyk7CiAgICAgICAgdmFyIGZpZWxkVHlwZSA9IChfZmllbGQgPSBmaWVsZCkgIT09IG51bGwgJiYgX2ZpZWxkICE9PSB2b2lkIDAgJiYgX2ZpZWxkLnR5cGUgPyBub3JtYWxpemVUeXBlKGZpZWxkLnR5cGUpIDogbnVsbDsKICAgICAgICB2YXIgdmFsSXNTdHJpbmcgPSBpc1N0cmluZyh2YWwpOwogICAgICAgIGlmIChpZ25vcmVGaWVsZHMgJiYgaWdub3JlRmllbGRzLmluY2x1ZGVzKGtleSkpIHsKICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIH0KICAgICAgICBpZiAodmFsID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgIHZhbCA9IG51bGw7CiAgICAgICAgfQogICAgICAgIGlmICh2YWxJc1N0cmluZykgewogICAgICAgICAgaWYgKGZpZWxkVHlwZSkgewogICAgICAgICAgICBWdWUuc2V0KGRhdGEsIGtleSwgY29lcmNlU3RyaW5nVHlwZVRvU2NhbGFyVHlwZSh2YWwsIGZpZWxkVHlwZSkpOwogICAgICAgICAgfQoKICAgICAgICAgIC8vIEVtcHR5IHN0cmluZ3Mgb24gbnVsbGFibGUgc3RyaW5nIGZpZWxkcyAtPiBudWxsCiAgICAgICAgICBpZiAoZmllbGQubnVsbGFibGUgJiYgdmFsLmxlbmd0aCA9PT0gMCAmJiBTVFJJTkdfTElLRV9UWVBFUy5pbmNsdWRlcyhmaWVsZFR5cGUpKSB7CiAgICAgICAgICAgIHZhbCA9IG51bGw7CiAgICAgICAgICAgIFZ1ZS5zZXQoZGF0YSwga2V5LCB2YWwpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAoZmllbGRUeXBlID09PSAnYm9vbGVhbicpIHsKICAgICAgICAgIHZhbGlkYXRlQm9vbGVhbih2YWwsIGZpZWxkLCBkaXNwbGF5S2V5LCB0aGlzLiRyb290R2V0dGVycywgZmllbGRFcnJvcnMpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB2YWxpZGF0ZUxlbmd0aCh2YWwsIGZpZWxkLCBkaXNwbGF5S2V5LCB0aGlzLiRyb290R2V0dGVycywgZmllbGRFcnJvcnMpOwogICAgICAgICAgdmFsaWRhdGVDaGFycyh2YWwsIGZpZWxkLCBkaXNwbGF5S2V5LCB0aGlzLiRyb290R2V0dGVycywgZmllbGRFcnJvcnMpOwogICAgICAgIH0KICAgICAgICBpZiAoZmllbGRFcnJvcnMubGVuZ3RoID4gMCkgewogICAgICAgICAgZmllbGRFcnJvcnMucHVzaCh0aGlzLnQoJ3ZhbGlkYXRpb24ucmVxdWlyZWQnLCB7CiAgICAgICAgICAgIGtleTogZGlzcGxheUtleQogICAgICAgICAgfSkpOwogICAgICAgICAgZXJyb3JzLnB1c2guYXBwbHkoZXJyb3JzLCBmaWVsZEVycm9ycyk7CiAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9CgogICAgICAgIC8vIElEcyBjbGFpbSB0byBiZSB0aGVzZSBidXQgYXJlIGxpZXMuLi4KICAgICAgICBpZiAoa2V5ICE9PSAnaWQnICYmICFpc0VtcHR5KHZhbCkgJiYgRE5TX0xJS0VfVFlQRVMuaW5jbHVkZXMoZmllbGRUeXBlKSkgewogICAgICAgICAgLy8gRE5TIHR5cGVzIHNob3VsZCBiZSBsb3dlcmNhc2UKICAgICAgICAgIHZhciB0b2xvd2VyID0gKHZhbCB8fCAnJykudG9Mb3dlckNhc2UoKTsKICAgICAgICAgIGlmICh0b2xvd2VyICE9PSB2YWwpIHsKICAgICAgICAgICAgdmFsID0gdG9sb3dlcjsKICAgICAgICAgICAgVnVlLnNldChkYXRhLCBrZXksIHZhbCk7CiAgICAgICAgICB9CiAgICAgICAgICBmaWVsZEVycm9ycy5wdXNoLmFwcGx5KGZpZWxkRXJyb3JzLCBfdG9Db25zdW1hYmxlQXJyYXkodmFsaWRhdGVEbnNMaWtlVHlwZXModmFsLCBmaWVsZFR5cGUsIGRpc3BsYXlLZXksIHRoaXMuJHJvb3RHZXR0ZXJzLCBmaWVsZEVycm9ycykpKTsKICAgICAgICB9CiAgICAgICAgZXJyb3JzLnB1c2guYXBwbHkoZXJyb3JzLCBmaWVsZEVycm9ycyk7CiAgICAgIH0KICAgICAgcmV0dXJuIHVuaXEoW10uY29uY2F0KGVycm9ycywgX3RvQ29uc3VtYWJsZUFycmF5KHRoaXMuY3VzdG9tVmFsaWRhdGlvbkVycm9ycyhkYXRhKSkpKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJvd25lcnNCeVR5cGUiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHZhciBfdGhpcyRtZXRhZGF0YTg7CiAgICAgIHZhciBvd25lclJlZmVyZW5jZXMgPSAoKF90aGlzJG1ldGFkYXRhOCA9IHRoaXMubWV0YWRhdGEpID09PSBudWxsIHx8IF90aGlzJG1ldGFkYXRhOCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkbWV0YWRhdGE4Lm93bmVyUmVmZXJlbmNlcykgfHwgW107CiAgICAgIHZhciBvd25lcnNCeVR5cGUgPSB7fTsKICAgICAgb3duZXJSZWZlcmVuY2VzLmZvckVhY2goZnVuY3Rpb24gKG93bmVyKSB7CiAgICAgICAgaWYgKCFvd25lcnNCeVR5cGVbb3duZXIua2luZF0pIHsKICAgICAgICAgIG93bmVyc0J5VHlwZVtvd25lci5raW5kXSA9IFtvd25lcl07CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIG93bmVyc0J5VHlwZVtvd25lci5raW5kXS5wdXNoKG93bmVyKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICByZXR1cm4gb3duZXJzQnlUeXBlOwogICAgfQogIH0sIHsKICAgIGtleTogIm93bmVycyIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgdmFyIF90aGlzMTIgPSB0aGlzOwogICAgICB2YXIgb3duZXJzID0gW107CiAgICAgIHZhciBfbG9vcCA9IGZ1bmN0aW9uIF9sb29wKCkgewogICAgICAgIHZhciBzY2hlbWEgPSBfdGhpczEyLiRyb290R2V0dGVyc1snY2x1c3Rlci9zY2hlbWEnXShraW5kKTsKICAgICAgICBpZiAoc2NoZW1hKSB7CiAgICAgICAgICB2YXIgdHlwZSA9IHNjaGVtYS5pZDsKICAgICAgICAgIHZhciBhbGxPZlJlc291cmNlVHlwZSA9IF90aGlzMTIuJHJvb3RHZXR0ZXJzWydjbHVzdGVyL2FsbCddKHR5cGUpOwogICAgICAgICAgX3RoaXMxMi5vd25lcnNCeVR5cGVba2luZF0uZm9yRWFjaChmdW5jdGlvbiAocmVzb3VyY2UsIGlkeCkgewogICAgICAgICAgICB2YXIgcmVzb3VyY2VJbnN0YW5jZSA9IGFsbE9mUmVzb3VyY2VUeXBlLmZpbmQoZnVuY3Rpb24gKHJlc291cmNlQnlUeXBlKSB7CiAgICAgICAgICAgICAgdmFyIF9yZXNvdXJjZUJ5VHlwZSRtZXRhZDsKICAgICAgICAgICAgICByZXR1cm4gKHJlc291cmNlQnlUeXBlID09PSBudWxsIHx8IHJlc291cmNlQnlUeXBlID09PSB2b2lkIDAgfHwgKF9yZXNvdXJjZUJ5VHlwZSRtZXRhZCA9IHJlc291cmNlQnlUeXBlLm1ldGFkYXRhKSA9PT0gbnVsbCB8fCBfcmVzb3VyY2VCeVR5cGUkbWV0YWQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9yZXNvdXJjZUJ5VHlwZSRtZXRhZC51aWQpID09PSByZXNvdXJjZS51aWQ7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBpZiAocmVzb3VyY2VJbnN0YW5jZSkgewogICAgICAgICAgICAgIG93bmVycy5wdXNoKHJlc291cmNlSW5zdGFuY2UpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH07CiAgICAgIGZvciAodmFyIGtpbmQgaW4gdGhpcy5vd25lcnNCeVR5cGUpIHsKICAgICAgICBfbG9vcCgpOwogICAgICB9CiAgICAgIHJldHVybiBvd25lcnM7CiAgICB9CiAgfSwgewogICAga2V5OiAiZGV0YWlscyIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuX2RldGFpbHM7CiAgICB9CiAgfSwgewogICAga2V5OiAiX2RldGFpbHMiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHZhciBfdGhpcyRvd25lcnM7CiAgICAgIHZhciBkZXRhaWxzID0gW107CiAgICAgIGlmICgoKF90aGlzJG93bmVycyA9IHRoaXMub3duZXJzKSA9PT0gbnVsbCB8fCBfdGhpcyRvd25lcnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJG93bmVycy5sZW5ndGgpID4gMCkgewogICAgICAgIGRldGFpbHMucHVzaCh7CiAgICAgICAgICBsYWJlbDogdGhpcy50KCdyZXNvdXJjZURldGFpbC5kZXRhaWxUb3Aub3duZXJSZWZlcmVuY2VzJywgewogICAgICAgICAgICBjb3VudDogdGhpcy5vd25lcnMubGVuZ3RoCiAgICAgICAgICB9KSwKICAgICAgICAgIGZvcm1hdHRlcjogJ0xpc3RMaW5rRGV0YWlsJywKICAgICAgICAgIGNvbnRlbnQ6IHRoaXMub3duZXJzLm1hcChmdW5jdGlvbiAob3duZXIpIHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICBrZXk6IG93bmVyLmlkLAogICAgICAgICAgICAgIHJvdzogb3duZXIsCiAgICAgICAgICAgICAgY29sOiB7fSwKICAgICAgICAgICAgICB2YWx1ZTogb3duZXIubWV0YWRhdGEubmFtZQogICAgICAgICAgICB9OwogICAgICAgICAgfSkKICAgICAgICB9KTsKICAgICAgfQogICAgICBpZiAoX2dldCh0aGlzLCAnbWV0YWRhdGEuZGVsZXRpb25UaW1lc3RhbXAnKSkgewogICAgICAgIGRldGFpbHMucHVzaCh7CiAgICAgICAgICBsYWJlbDogdGhpcy50KCdyZXNvdXJjZURldGFpbC5kZXRhaWxUb3AuZGVsZXRlZCcpLAogICAgICAgICAgZm9ybWF0dGVyOiAnTGl2ZURhdGUnLAogICAgICAgICAgZm9ybWF0dGVyT3B0czogewogICAgICAgICAgICBhZGRTdWZmaXg6IHRydWUKICAgICAgICAgIH0sCiAgICAgICAgICBjb250ZW50OiBfZ2V0KHRoaXMsICdtZXRhZGF0YS5kZWxldGlvblRpbWVzdGFtcCcpCiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgcmV0dXJuIGRldGFpbHM7CiAgICB9CiAgfSwgewogICAga2V5OiAidCIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuJHJvb3RHZXR0ZXJzWydpMThuL3QnXTsKICAgIH0KCiAgICAvLyBSZXR1cm5zIGFycmF5IG9mIE1PREVMUyB0aGF0IG93biB0aGlzIHJlc291cmNlIChhc3luYywgbmV0d29yayBjYWxsKQogIH0sIHsKICAgIGtleTogImZpbmRPd25lcnMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGZpbmRPd25lcnMoKSB7CiAgICAgIHJldHVybiB0aGlzLl9nZXRSZWxhdGlvbnNoaXAoJ293bmVyJywgJ2Zyb20nKTsKICAgIH0KCiAgICAvLyBSZXR1cm5zIGFycmF5IG9mIHt0eXBlLCBuYW1lc3BhY2UsIGlkfSBvYmplY3RzIHRoYXQgb3duIHRoaXMgcmVzb3VyY2UgKHN5bmMpCiAgfSwgewogICAga2V5OiAiZ2V0T3duZXJzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRPd25lcnMoKSB7CiAgICAgIHJldHVybiB0aGlzLl9nZXRSZWxhdGlvbnNoaXAoJ293bmVyJywgJ2Zyb20nKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJmaW5kT3duZWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGZpbmRPd25lZCgpIHsKICAgICAgcmV0dXJuIHRoaXMuX2ZpbmRSZWxhdGlvbnNoaXAoJ293bmVyJywgJ3RvJyk7CiAgICB9CiAgfSwgewogICAga2V5OiAiX3JlbGF0aW9uc2hpcHNGb3IiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9yZWxhdGlvbnNoaXBzRm9yKHJlbCwgZGlyZWN0aW9uKSB7CiAgICAgIHZhciBfdGhpcyRtZXRhZGF0YTk7CiAgICAgIHZhciBvdXQgPSB7CiAgICAgICAgc2VsZWN0b3JzOiBbXSwKICAgICAgICBpZHM6IFtdCiAgICAgIH07CiAgICAgIGlmICghKChfdGhpcyRtZXRhZGF0YTkgPSB0aGlzLm1ldGFkYXRhKSAhPT0gbnVsbCAmJiBfdGhpcyRtZXRhZGF0YTkgIT09IHZvaWQgMCAmJiAoX3RoaXMkbWV0YWRhdGE5ID0gX3RoaXMkbWV0YWRhdGE5LnJlbGF0aW9uc2hpcHMpICE9PSBudWxsICYmIF90aGlzJG1ldGFkYXRhOSAhPT0gdm9pZCAwICYmIF90aGlzJG1ldGFkYXRhOS5sZW5ndGgpKSB7CiAgICAgICAgcmV0dXJuIG91dDsKICAgICAgfQogICAgICB2YXIgX2l0ZXJhdG9yMiA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHRoaXMubWV0YWRhdGEucmVsYXRpb25zaGlwcyksCiAgICAgICAgX3N0ZXAyOwogICAgICB0cnkgewogICAgICAgIGZvciAoX2l0ZXJhdG9yMi5zKCk7ICEoX3N0ZXAyID0gX2l0ZXJhdG9yMi5uKCkpLmRvbmU7KSB7CiAgICAgICAgICB2YXIgciA9IF9zdGVwMi52YWx1ZTsKICAgICAgICAgIGlmIChyZWwgIT09ICdhbnknICYmIHIucmVsICE9PSByZWwpIHsKICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoIXJbIiIuY29uY2F0KGRpcmVjdGlvbiwgIlR5cGUiKV0pIHsKICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoci5zZWxlY3RvcikgewogICAgICAgICAgICBhZGRPYmplY3RzKG91dC5zZWxlY3RvcnMsIHsKICAgICAgICAgICAgICB0eXBlOiByLnRvVHlwZSwKICAgICAgICAgICAgICBuYW1lc3BhY2U6IHIudG9OYW1lc3BhY2UsCiAgICAgICAgICAgICAgc2VsZWN0b3I6IHIuc2VsZWN0b3IKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB2YXIgdHlwZSA9IHJbIiIuY29uY2F0KGRpcmVjdGlvbiwgIlR5cGUiKV07CiAgICAgICAgICAgIHZhciBuYW1lc3BhY2UgPSByWyIiLmNvbmNhdChkaXJlY3Rpb24sICJOYW1lc3BhY2UiKV07CiAgICAgICAgICAgIHZhciBuYW1lID0gclsiIi5jb25jYXQoZGlyZWN0aW9uLCAiSWQiKV07CiAgICAgICAgICAgIGlmICghbmFtZXNwYWNlICYmIG5hbWUuaW5jbHVkZXMoJy8nKSkgewogICAgICAgICAgICAgIHZhciBpZHggPSBuYW1lLmluZGV4T2YoJy8nKTsKICAgICAgICAgICAgICBuYW1lc3BhY2UgPSBuYW1lLnN1YnN0cigwLCBpZHgpOwogICAgICAgICAgICAgIG5hbWUgPSBuYW1lLnN1YnN0cihpZHggKyAxKTsKICAgICAgICAgICAgfQogICAgICAgICAgICB2YXIgaWQgPSAobmFtZXNwYWNlID8gIiIuY29uY2F0KG5hbWVzcGFjZSwgIi8iKSA6ICcnKSArIG5hbWU7CiAgICAgICAgICAgIGFkZE9iamVjdChvdXQuaWRzLCB7CiAgICAgICAgICAgICAgdHlwZTogdHlwZSwKICAgICAgICAgICAgICBuYW1lc3BhY2U6IG5hbWVzcGFjZSwKICAgICAgICAgICAgICBuYW1lOiBuYW1lLAogICAgICAgICAgICAgIGlkOiBpZAogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIF9pdGVyYXRvcjIuZShlcnIpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIF9pdGVyYXRvcjIuZigpOwogICAgICB9CiAgICAgIHJldHVybiBvdXQ7CiAgICB9CiAgfSwgewogICAga2V5OiAiX2dldFJlbGF0aW9uc2hpcCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2dldFJlbGF0aW9uc2hpcChyZWwsIGRpcmVjdGlvbikgewogICAgICB2YXIgX3JlcyRzZWxlY3RvcnM7CiAgICAgIHZhciByZXMgPSB0aGlzLl9yZWxhdGlvbnNoaXBzRm9yKHJlbCwgZGlyZWN0aW9uKTsKICAgICAgaWYgKChfcmVzJHNlbGVjdG9ycyA9IHJlcy5zZWxlY3RvcnMpICE9PSBudWxsICYmIF9yZXMkc2VsZWN0b3JzICE9PSB2b2lkIDAgJiYgX3JlcyRzZWxlY3RvcnMubGVuZ3RoKSB7CiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGUKICAgICAgICBjb25zb2xlLndhcm4oJ1N5bmMgcmVxdWVzdCBmb3IgYSByZWxhdGlvbnNoaXAgdGhhdCBpcyBhIHNlbGVjdG9yJyk7CiAgICAgIH0KICAgICAgcmV0dXJuIHJlcy5pZHMgfHwgW107CiAgICB9CiAgfSwgewogICAga2V5OiAiX2ZpbmRSZWxhdGlvbnNoaXAiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9maW5kUmVsYXRpb25zaGlwMiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxMChyZWwsIGRpcmVjdGlvbikgewogICAgICAgIHZhciBfdGhpcyRfcmVsYXRpb25zaGlwc0YsIHNlbGVjdG9ycywgaWRzLCBvdXQsIF9pdGVyYXRvcjMsIF9zdGVwMywgc2VsLCBtYXRjaGluZywgX2l0ZXJhdG9yNCwgX3N0ZXA0LCBvYmosIHR5cGUsIGlkLCBfbWF0Y2hpbmc7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTAkKF9jb250ZXh0MTApIHsKICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0MTAucHJldiA9IF9jb250ZXh0MTAubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX3RoaXMkX3JlbGF0aW9uc2hpcHNGID0gdGhpcy5fcmVsYXRpb25zaGlwc0ZvcihyZWwsIGRpcmVjdGlvbiksIHNlbGVjdG9ycyA9IF90aGlzJF9yZWxhdGlvbnNoaXBzRi5zZWxlY3RvcnMsIGlkcyA9IF90aGlzJF9yZWxhdGlvbnNoaXBzRi5pZHM7CiAgICAgICAgICAgICAgb3V0ID0gW107CiAgICAgICAgICAgICAgX2l0ZXJhdG9yMyA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHNlbGVjdG9ycyk7CiAgICAgICAgICAgICAgX2NvbnRleHQxMC5wcmV2ID0gMzsKICAgICAgICAgICAgICBfaXRlcmF0b3IzLnMoKTsKICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIGlmICgoX3N0ZXAzID0gX2l0ZXJhdG9yMy5uKCkpLmRvbmUpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0MTAubmV4dCA9IDEzOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHNlbCA9IF9zdGVwMy52YWx1ZTsKICAgICAgICAgICAgICBfY29udGV4dDEwLm5leHQgPSA5OwogICAgICAgICAgICAgIHJldHVybiB0aGlzLiRkaXNwYXRjaCgnZmluZE1hdGNoaW5nJywgc2VsKTsKICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgIG1hdGNoaW5nID0gX2NvbnRleHQxMC5zZW50OwogICAgICAgICAgICAgIGFkZE9iamVjdHMob3V0LCBtYXRjaGluZy5kYXRhKTsKICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICBfY29udGV4dDEwLm5leHQgPSA1OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgIF9jb250ZXh0MTAubmV4dCA9IDE4OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICAgIF9jb250ZXh0MTAucHJldiA9IDE1OwogICAgICAgICAgICAgIF9jb250ZXh0MTAudDAgPSBfY29udGV4dDEwWyJjYXRjaCJdKDMpOwogICAgICAgICAgICAgIF9pdGVyYXRvcjMuZShfY29udGV4dDEwLnQwKTsKICAgICAgICAgICAgY2FzZSAxODoKICAgICAgICAgICAgICBfY29udGV4dDEwLnByZXYgPSAxODsKICAgICAgICAgICAgICBfaXRlcmF0b3IzLmYoKTsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMC5maW5pc2goMTgpOwogICAgICAgICAgICBjYXNlIDIxOgogICAgICAgICAgICAgIF9pdGVyYXRvcjQgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihpZHMpOwogICAgICAgICAgICAgIF9jb250ZXh0MTAucHJldiA9IDIyOwogICAgICAgICAgICAgIF9pdGVyYXRvcjQucygpOwogICAgICAgICAgICBjYXNlIDI0OgogICAgICAgICAgICAgIGlmICgoX3N0ZXA0ID0gX2l0ZXJhdG9yNC5uKCkpLmRvbmUpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0MTAubmV4dCA9IDQwOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIG9iaiA9IF9zdGVwNC52YWx1ZTsKICAgICAgICAgICAgICB0eXBlID0gb2JqLnR5cGUsIGlkID0gb2JqLmlkOwogICAgICAgICAgICAgIF9tYXRjaGluZyA9IHRoaXMuJGdldHRlcnNbJ2J5SWQnXSh0eXBlLCBpZCk7CiAgICAgICAgICAgICAgaWYgKF9tYXRjaGluZykgewogICAgICAgICAgICAgICAgX2NvbnRleHQxMC5uZXh0ID0gMzc7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgX2NvbnRleHQxMC5wcmV2ID0gMjk7CiAgICAgICAgICAgICAgX2NvbnRleHQxMC5uZXh0ID0gMzI7CiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJGRpc3BhdGNoKCdmaW5kJywgewogICAgICAgICAgICAgICAgdHlwZTogdHlwZSwKICAgICAgICAgICAgICAgIGlkOiBpZAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjYXNlIDMyOgogICAgICAgICAgICAgIF9tYXRjaGluZyA9IF9jb250ZXh0MTAuc2VudDsKICAgICAgICAgICAgICBfY29udGV4dDEwLm5leHQgPSAzNzsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAzNToKICAgICAgICAgICAgICBfY29udGV4dDEwLnByZXYgPSAzNTsKICAgICAgICAgICAgICBfY29udGV4dDEwLnQxID0gX2NvbnRleHQxMFsiY2F0Y2giXSgyOSk7CiAgICAgICAgICAgIGNhc2UgMzc6CiAgICAgICAgICAgICAgaWYgKF9tYXRjaGluZykgewogICAgICAgICAgICAgICAgYWRkT2JqZWN0KG91dCwgX21hdGNoaW5nKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIGNhc2UgMzg6CiAgICAgICAgICAgICAgX2NvbnRleHQxMC5uZXh0ID0gMjQ7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgNDA6CiAgICAgICAgICAgICAgX2NvbnRleHQxMC5uZXh0ID0gNDU7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgNDI6CiAgICAgICAgICAgICAgX2NvbnRleHQxMC5wcmV2ID0gNDI7CiAgICAgICAgICAgICAgX2NvbnRleHQxMC50MiA9IF9jb250ZXh0MTBbImNhdGNoIl0oMjIpOwogICAgICAgICAgICAgIF9pdGVyYXRvcjQuZShfY29udGV4dDEwLnQyKTsKICAgICAgICAgICAgY2FzZSA0NToKICAgICAgICAgICAgICBfY29udGV4dDEwLnByZXYgPSA0NTsKICAgICAgICAgICAgICBfaXRlcmF0b3I0LmYoKTsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMC5maW5pc2goNDUpOwogICAgICAgICAgICBjYXNlIDQ4OgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEwLmFicnVwdCgicmV0dXJuIiwgb3V0KTsKICAgICAgICAgICAgY2FzZSA0OToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTEwLCB0aGlzLCBbWzMsIDE1LCAxOCwgMjFdLCBbMjIsIDQyLCA0NSwgNDhdLCBbMjksIDM1XV0pOwogICAgICB9KSk7CiAgICAgIGZ1bmN0aW9uIF9maW5kUmVsYXRpb25zaGlwKF94OCwgX3g5KSB7CiAgICAgICAgcmV0dXJuIF9maW5kUmVsYXRpb25zaGlwMi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CiAgICAgIHJldHVybiBfZmluZFJlbGF0aW9uc2hpcDsKICAgIH0oKQogIH0sIHsKICAgIGtleTogInNob3J0SWQiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHZhciBzcGxpdElkID0gdGhpcy5pZC5zcGxpdCgnLycpOwogICAgICByZXR1cm4gc3BsaXRJZC5sZW5ndGggPiAxID8gc3BsaXRJZFsxXSA6IHNwbGl0SWRbMF07CiAgICB9CiAgfSwgewogICAga2V5OiAidG9KU09OIiwKICAgIHZhbHVlOiBmdW5jdGlvbiB0b0pTT04oKSB7CiAgICAgIHZhciBvdXQgPSB7fTsKICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyh0aGlzKTsKICAgICAgZm9yICh2YXIgX2kgPSAwLCBfa2V5cyA9IGtleXM7IF9pIDwgX2tleXMubGVuZ3RoOyBfaSsrKSB7CiAgICAgICAgdmFyIF90aGlzJGs7CiAgICAgICAgdmFyIGsgPSBfa2V5c1tfaV07CiAgICAgICAgaWYgKChfdGhpcyRrID0gdGhpc1trXSkgIT09IG51bGwgJiYgX3RoaXMkayAhPT0gdm9pZCAwICYmIF90aGlzJGsudG9KU09OKSB7CiAgICAgICAgICBvdXRba10gPSB0aGlzW2tdLnRvSlNPTigpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBvdXRba10gPSBjbG9uZSh0aGlzW2tdKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIG91dDsKICAgIH0KCiAgICAvKioKICAgICAqIEFsbG93IG1vZGVscyB0byBvdmVycmlkZSB0aGUgb2JqZWN0IHRoYXQgaXMgc2VudCB3aGVuIHNhdmluZyB0aGlzIHJlc291cmNlCiAgICAgKi8KICB9LCB7CiAgICBrZXk6ICJ0b1NhdmUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHRvU2F2ZSgpIHsKICAgICAgcmV0dXJuIHVuZGVmaW5lZDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjcmVhdGlvblRpbWVzdGFtcCIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgdmFyIF90aGlzJG1ldGFkYXRhMTA7CiAgICAgIHJldHVybiAoX3RoaXMkbWV0YWRhdGExMCA9IHRoaXMubWV0YWRhdGEpID09PSBudWxsIHx8IF90aGlzJG1ldGFkYXRhMTAgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJG1ldGFkYXRhMTAuY3JlYXRpb25UaW1lc3RhbXA7CiAgICB9CgogICAgLyoqCiAgICAgKiBBbGxvd3MgbW9kZWwgdG8gc3BlY2lmeSBKU09OIFBhdGhzIHRoYXQgc2hvdWxkIGJlIGZvbGRlZCBpbiB0aGUgWUFNTCBlZGl0b3IgYnkgZGVmYXVsdAogICAgICovCiAgfSwgewogICAga2V5OiAieWFtbEZvbGRpbmciLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiBbXTsKICAgIH0KICB9XSk7Cn0oKTsKZXhwb3J0IHsgUmVzb3VyY2UgYXMgZGVmYXVsdCB9Ow=="},{"version":3,"names":["NORMAN_NAME","_CLONE","_CONFIG","_EDIT","_UNFLAG","_VIEW","_YAML","AS","MODE","VIEW_IN_API","addObject","addObjects","findBy","removeAt","CustomValidators","downloadFile","generateZip","clone","get","eachLimit","sortableNumericSuffix","coerceStringTypeToScalarType","escapeHtml","ucFirst","displayKeyFor","validateBoolean","validateChars","validateDnsLikeTypes","validateLength","formRulesGenerator","waitFor","jsyaml","compact","forIn","isEmpty","isFunction","isString","uniq","Vue","normalizeType","ExtensionPoint","ActionLocation","getApplicableExtensionEnhancements","STRING_LIKE_TYPES","DNS_LIKE_TYPES","REMAP_STATE","disabled","notapplied","notready","waitapplied","outofsync","gitupdating","errapplied","waitcheckin","off","waitingforinfrastructure","waitingfornoderef","DEFAULT_COLOR","DEFAULT_ICON","DEFAULT_WAIT_INTERVAL","DEFAULT_WAIT_TMIMEOUT","STATES_ENUM","IN_USE","IN_PROGRESS","PENDING_ROLLBACK","PENDING_UPGRADE","ABORTED","ACTIVATING","ACTIVE","AVAILABLE","BACKED_UP","BOUND","BUILDING","COMPLETED","CORDONED","COUNT","CREATED","CREATING","DEACTIVATING","DEGRADED","DENIED","DEPLOYED","DEPLOYING","DISABLED","DISCONNECTED","DRAINED","DRAINING","ERR_APPLIED","ERROR","ERRORING","ERRORS","EXPIRED","EXPIRING","FAIL","FAILED","HEALTHY","INACTIVE","INFO","INITIALIZING","INPROGRESS","LOCKED","MIGRATING","MISSING","MODIFIED","NOT_APPLICABLE","NOT_APLLIED","NOT_READY","OFF","ORPHANED","OTHER","OUT_OF_SYNC","ON_GOING","PASS","PASSED","PAUSED","PENDING","PROVISIONING","PROVISIONED","PURGED","PURGING","READY","RECONNECTING","REGISTERING","REINITIALIZING","RELEASED","REMOVED","REMOVING","REQUESTED","RESTARTING","RESTORING","RESIZING","RUNNING","SKIP","SKIPPED","STARTING","STOPPED","STOPPING","SUCCEEDED","SUCCESS","SUCCESSFUL","SUPERSEDED","SUSPENDED","UNAVAILABLE","UNHEALTHY","UNINSTALLED","UNINSTALLING","UNKNOWN","UNTRIGGERED","UPDATING","WAIT_APPLIED","WAIT_CHECKIN","WAITING","WARNING","mapStateToEnum","statusString","Object","values","find","val","toLowerCase","toLocaleLowerCase","STATES","_STATES","_defineProperty","color","icon","label","compoundIcon","getStatesByType","type","arguments","length","undefined","out","info","error","success","warning","unknown","state","stateKey","push","SORT_ORDER","ready","other","getStateLabel","lowercaseState","colorForState","isError","isTransitioning","key","maybeFn","call","concat","stateDisplay","split","map","join","primaryDisplayStatusFromCount","status","statusOrder","existingStatuses","keys","filter","includes","sort","a","b","indexOf","stateSort","display","replace","isConditionReadyAndWaiting","condition","_condition$type","_condition$reason","reason","Resource","data","ctx","rehydrateNamespace","setClone","_classCallCheck","k","defineProperty","value","enumerable","configurable","writable","_createClass","$ctx","getters","rootGetters","dispatch","rootState","m","metadata","uid","namespace","name","id","Math","random","$getters","toString","schema","$rootGetters","_this$spec","_this$metadata","_this$metadata2","displayName","spec","annotations","nameDisplay","_this$metadata3","namespacedName","_this$metadata4","t","setLabels","Error","setLabel","setAnnotations","setAnnotation","_this$stateObj","_this$stateObj2","stateObj","transitioning","stateColor","trans","_this$stateObj3","_this$stateObj4","_this$stateObj5","message","_this$metadata5","waitForTestFn","fn","msg","timeoutMs","intervalMs","_this","apply","waitForState","timeout","interval","_this2","waitForTransition","_this3","waitForAction","_this4","hasAction","waitForLink","_this5","hasLink","hasCondition","isCondition","withStatus","conditions","entry","waitForCondition","_this6","all","_availableActions","last","item","enabled","cur","divider","ok","shift","pop","i","_this7","currentRoute","currentRouter","app","_route","extensionMenuActions","$rootState","ACTION","TABLE","action","canUpdate","canCustomEdit","canEditYaml","canYaml","canClone","canCreate","bulkable","bulkAction","weight","canViewInApi","altAction","canDelete","forEach","newActionInstance","_objectSpread","enabledFn","typeofEnabled","_typeof","console","warn","labelKey","_canDelete","isRemovable","isEditable","_this$schema","collectionMethods","x","isCreatable","_this$schema2","resourceMethods","linkName","linkFor","links","followLink","opt","url","urlSuffix","$dispatch","actionName","actionLinkFor","actions","actionLinks","doAction","body","resource","_doActionGrowl","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_args","wrap","_callee$","_context","prev","next","t0","title","err","root","stop","doActionGrowl","_x","_x2","patch","_this8","merge","alertOnError","method","headers","contentType","catch","e","save","_save","cleanForSave","forNew","__rehydrate","__clone","processSaveResponse","res","_save2","_callee2","_this$metadata6","errors","argParam","_args2","_callee2$","_context2","validationErrors","ignoreFields","sent","abrupt","Promise","reject","resourceVersion","attributes","namespaced","toSave","_type","_name","_labels","labels","_annotations","kind","existing","_status","force","remove","_remove","_remove2","_callee3","_args3","_callee3$","_context3","window","$nuxt","$route","$router","params","product","cluster","_this$id","_schema$attributes","_this$metadata7","_detailLocation","goToDetail","detailLocation","goToClone","moreQuery","location","query","goToEdit","goToViewConfig","goToEditYaml","goToViewYaml","cloneYaml","_download","_callee4","_callee4$","_context4","accept","cleanForDownload","download","_downloadBulk","_callee6","items","_this9","files","names","_iterator","_step","zip","_callee6$","_context6","_createForOfIteratorHelper","s","n","done","f","idx","then","_ref","_callee5","yaml","cleanedYaml","_callee5$","_context5","_x4","downloadBulk","_x3","viewInApi","open","self","promptRemove","resources","applyDefaults","_this$metadata$namesp","collection","group","slice","cleanYaml","mode","obj","load","dump","skipInvalid","cleanForNew","cleanForDiff","toJSON","_cleanForDownload","_callee7","_callee7$","_context7","_x5","yamlForSave","_saveYaml2","_callee8","_callee8$","_context8","_saveYaml","saveYaml","_x6","_saveYaml3","_callee9","_this$schema3","parsed","isCreate","_callee9$","_context9","isSpoofed","_x7","_this10","rules","customValidationRulesets","customValidationRules","rule","validators","required","formRules","displayKey","translationKey","path","_toConsumableArray","_rule$split","_rule$split2","_slicedToArray","ruleKey","ruleArg","ruleset","customValidationErrors","_this11","ignorePaths","requiredIfPath","requiredIf","_rule$validators","fieldType","pathValue","parsedRules","trim","reqIfVal","tolower","set","validator","validatorAndArgs","validatorName","validatorArgs","validatorExists","prototype","hasOwnProperty","_this11$$rootState$$p","pluginValidator","$plugin","getValidator","originalType","fields","resourceFields","field","_field","fieldErrors","valIsString","nullable","_this$metadata8","ownerReferences","ownersByType","owner","_this12","owners","_loop","allOfResourceType","resourceInstance","resourceByType","_resourceByType$metad","_details","_this$owners","details","count","formatter","content","row","col","formatterOpts","addSuffix","findOwners","_getRelationship","getOwners","findOwned","_findRelationship","_relationshipsFor","rel","direction","_this$metadata9","selectors","ids","relationships","_iterator2","_step2","r","selector","toType","toNamespace","substr","_res$selectors","_findRelationship2","_callee10","_this$_relationshipsF","_iterator3","_step3","sel","matching","_iterator4","_step4","_matching","_callee10$","_context10","finish","t1","t2","_x8","_x9","splitId","_i","_keys","_this$k","_this$metadata10","creationTimestamp","default"],"sources":["/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/plugins/dashboard-store/resource-class.js"],"sourcesContent":["import { NORMAN_NAME } from '@shell/config/labels-annotations';\nimport {\n  _CLONE,\n  _CONFIG,\n  _EDIT,\n  _UNFLAG,\n  _VIEW,\n  _YAML,\n  AS,\n  MODE\n} from '@shell/config/query-params';\nimport { VIEW_IN_API } from '@shell/store/prefs';\nimport { addObject, addObjects, findBy, removeAt } from '@shell/utils/array';\nimport CustomValidators from '@shell/utils/custom-validators';\nimport { downloadFile, generateZip } from '@shell/utils/download';\nimport { clone, get } from '@shell/utils/object';\nimport { eachLimit } from '@shell/utils/promise';\nimport { sortableNumericSuffix } from '@shell/utils/sort';\nimport { coerceStringTypeToScalarType, escapeHtml, ucFirst } from '@shell/utils/string';\nimport {\n  displayKeyFor,\n  validateBoolean,\n  validateChars,\n  validateDnsLikeTypes,\n  validateLength,\n} from '@shell/utils/validators';\nimport formRulesGenerator from '@shell/utils/validators/formRules/index';\nimport { waitFor } from '@shell/utils/async';\nimport jsyaml from 'js-yaml';\nimport compact from 'lodash/compact';\nimport forIn from 'lodash/forIn';\nimport isEmpty from 'lodash/isEmpty';\nimport isFunction from 'lodash/isFunction';\nimport isString from 'lodash/isString';\nimport uniq from 'lodash/uniq';\nimport Vue from 'vue';\n\nimport { normalizeType } from './normalize';\n\nimport { ExtensionPoint, ActionLocation } from '@shell/core/types';\nimport { getApplicableExtensionEnhancements } from '@shell/core/plugin-helpers';\n\nconst STRING_LIKE_TYPES = [\n  'string',\n  'date',\n  'blob',\n  'enum',\n  'multiline',\n  'masked',\n  'password',\n  'dnsLabel',\n  'hostname',\n];\nconst DNS_LIKE_TYPES = ['dnsLabel', 'dnsLabelRestricted', 'hostname'];\n\nconst REMAP_STATE = {\n  disabled:                 'inactive',\n  notapplied:               'Not Applied',\n  notready:                 'Not Ready',\n  waitapplied:              'Wait Applied',\n  outofsync:                'Out of Sync',\n  'in-progress':            'In Progress',\n  gitupdating:              'Git Updating',\n  errapplied:               'Err Applied',\n  waitcheckin:              'Wait Check-In',\n  off:                      'Disabled',\n  waitingforinfrastructure: 'Waiting for Infra',\n  waitingfornoderef:        'Waiting for Node Ref'\n};\n\nconst DEFAULT_COLOR = 'warning';\nconst DEFAULT_ICON = 'x';\n\nconst DEFAULT_WAIT_INTERVAL = 1000;\nconst DEFAULT_WAIT_TMIMEOUT = 30000;\n\nexport const STATES_ENUM = {\n  IN_USE:           'in-use',\n  IN_PROGRESS:      'in-progress',\n  PENDING_ROLLBACK: 'pending-rollback',\n  PENDING_UPGRADE:  'pending-upgrade',\n  ABORTED:          'aborted',\n  ACTIVATING:       'activating',\n  ACTIVE:           'active',\n  AVAILABLE:        'available',\n  BACKED_UP:        'backedup',\n  BOUND:            'bound',\n  BUILDING:         'building',\n  COMPLETED:        'completed',\n  CORDONED:         'cordoned',\n  COUNT:            'count',\n  CREATED:          'created',\n  CREATING:         'creating',\n  DEACTIVATING:     'deactivating',\n  DEGRADED:         'degraded',\n  DENIED:           'denied',\n  DEPLOYED:         'deployed',\n  DEPLOYING:        'deploying',\n  DISABLED:         'disabled',\n  DISCONNECTED:     'disconnected',\n  DRAINED:          'drained',\n  DRAINING:         'draining',\n  ERR_APPLIED:      'errapplied',\n  ERROR:            'error',\n  ERRORING:         'erroring',\n  ERRORS:           'errors',\n  EXPIRED:          'expired',\n  EXPIRING:         'expiring',\n  FAIL:             'fail',\n  FAILED:           'failed',\n  HEALTHY:          'healthy',\n  INACTIVE:         'inactive',\n  INFO:             'info',\n  INITIALIZING:     'initializing',\n  INPROGRESS:       'inprogress',\n  LOCKED:           'locked',\n  MIGRATING:        'migrating',\n  MISSING:          'missing',\n  MODIFIED:         'modified',\n  NOT_APPLICABLE:   'notApplicable',\n  NOT_APLLIED:      'notapplied',\n  NOT_READY:        'notready',\n  OFF:              'off',\n  ORPHANED:         'orphaned',\n  OTHER:            'other',\n  OUT_OF_SYNC:      'outofsync',\n  ON_GOING:         'on-going',\n  PASS:             'pass',\n  PASSED:           'passed',\n  PAUSED:           'paused',\n  PENDING:          'pending',\n  PROVISIONING:     'provisioning',\n  PROVISIONED:      'provisioned',\n  PURGED:           'purged',\n  PURGING:          'purging',\n  READY:            'ready',\n  RECONNECTING:     'reconnecting',\n  REGISTERING:      'registering',\n  REINITIALIZING:   'reinitializing',\n  RELEASED:         'released',\n  REMOVED:          'removed',\n  REMOVING:         'removing',\n  REQUESTED:        'requested',\n  RESTARTING:       'restarting',\n  RESTORING:        'restoring',\n  RESIZING:         'resizing',\n  RUNNING:          'running',\n  SKIP:             'skip',\n  SKIPPED:          'skipped',\n  STARTING:         'starting',\n  STOPPED:          'stopped',\n  STOPPING:         'stopping',\n  SUCCEEDED:        'succeeded',\n  SUCCESS:          'success',\n  SUCCESSFUL:       'successful',\n  SUPERSEDED:       'superseded',\n  SUSPENDED:        'suspended',\n  UNAVAILABLE:      'unavailable',\n  UNHEALTHY:        'unhealthy',\n  UNINSTALLED:      'uninstalled',\n  UNINSTALLING:     'uninstalling',\n  UNKNOWN:          'unknown',\n  UNTRIGGERED:      'untriggered',\n  UPDATING:         'updating',\n  WAIT_APPLIED:     'waitapplied',\n  WAIT_CHECKIN:     'waitcheckin',\n  WAITING:          'waiting',\n  WARNING:          'warning',\n};\n\nexport function mapStateToEnum(statusString) {\n  // e.g. in fleet Status is Capitalized. This function will map it to the enum\n  return Object.values(STATES_ENUM).find((val) => {\n    return val.toLowerCase() === statusString.toLocaleLowerCase();\n  });\n}\n\nexport const STATES = {\n  [STATES_ENUM.IN_USE]: {\n    color: 'success', icon: 'dot-open', label: 'In Use', compoundIcon: 'checkmark'\n  },\n  [STATES_ENUM.IN_PROGRESS]: {\n    color: 'info', icon: 'tag', label: 'In Progress', compoundIcon: 'info'\n  },\n  [STATES_ENUM.PENDING_ROLLBACK]: {\n    color: 'info', icon: 'dot-half', label: 'Pending Rollback', compoundIcon: 'info'\n  },\n  [STATES_ENUM.PENDING_UPGRADE]: {\n    color: 'info', icon: 'dot-half', label: 'Pending Update', compoundIcon: 'info'\n  },\n  [STATES_ENUM.ABORTED]: {\n    color: 'warning', icon: 'error', label: 'Aborted', compoundIcon: 'warning'\n  },\n  [STATES_ENUM.ACTIVATING]: {\n    color: 'info', icon: 'tag', label: 'Activating', compoundIcon: 'info'\n  },\n  [STATES_ENUM.ACTIVE]: {\n    color: 'success', icon: 'dot-open', label: 'Active', compoundIcon: 'checkmark'\n  },\n  [STATES_ENUM.AVAILABLE]: {\n    color: 'success', icon: 'dot-open', label: 'Available', compoundIcon: 'checkmark'\n  },\n  [STATES_ENUM.BACKED_UP]: {\n    color: 'success', icon: 'backup', label: 'Backed Up', compoundIcon: 'checkmark'\n  },\n  [STATES_ENUM.BOUND]: {\n    color: 'success', icon: 'dot', label: 'Bound', compoundIcon: 'checkmark'\n  },\n  [STATES_ENUM.BUILDING]: {\n    color: 'success', icon: 'dot-open', label: 'Building', compoundIcon: 'checkmark'\n  },\n  [STATES_ENUM.COMPLETED]: {\n    color: 'success', icon: 'dot', label: 'Completed', compoundIcon: 'checkmark'\n  },\n  [STATES_ENUM.CORDONED]: {\n    color: 'info', icon: 'tag', label: 'Cordoned', compoundIcon: 'info'\n  },\n  [STATES_ENUM.COUNT]: {\n    color: 'success', icon: 'dot-open', label: 'Count', compoundIcon: 'checkmark'\n  },\n  [STATES_ENUM.CREATED]: {\n    color: 'info', icon: 'tag', label: 'Created', compoundIcon: 'info'\n  },\n  [STATES_ENUM.CREATING]: {\n    color: 'info', icon: 'tag', label: 'Creating', compoundIcon: 'info'\n  },\n  [STATES_ENUM.DEACTIVATING]: {\n    color: 'info', icon: 'adjust', label: 'Deactivating', compoundIcon: 'info'\n  },\n  [STATES_ENUM.DEGRADED]: {\n    color: 'warning', icon: 'error', label: 'Degraded', compoundIcon: 'warning'\n  },\n  [STATES_ENUM.DENIED]: {\n    color: 'error', icon: 'adjust', label: 'Denied', compoundIcon: 'error'\n  },\n  [STATES_ENUM.DEPLOYED]: {\n    color: 'success', icon: 'dot-open', label: 'Deployed', compoundIcon: 'checkmark'\n  },\n  [STATES_ENUM.DISABLED]: {\n    color: 'warning', icon: 'error', label: 'Disabled', compoundIcon: 'warning'\n  },\n  [STATES_ENUM.DISCONNECTED]: {\n    color: 'warning', icon: 'error', label: 'Disconnected', compoundIcon: 'warning'\n  },\n  [STATES_ENUM.DRAINED]: {\n    color: 'info', icon: 'tag', label: 'Drained', compoundIcon: 'info'\n  },\n  [STATES_ENUM.DRAINING]: {\n    color: 'warning', icon: 'tag', label: 'Draining', compoundIcon: 'warning'\n  },\n  [STATES_ENUM.ERR_APPLIED]: {\n    color: 'error', icon: 'error', label: 'Error Applied', compoundIcon: 'error'\n  },\n  [STATES_ENUM.ERROR]: {\n    color: 'error', icon: 'error', label: 'Error', compoundIcon: 'error'\n  },\n  [STATES_ENUM.ERRORING]: {\n    color: 'error', icon: 'error', label: 'Erroring', compoundIcon: 'error'\n  },\n  [STATES_ENUM.ERRORS]: {\n    color: 'error', icon: 'error', label: 'Errors', compoundIcon: 'error'\n  },\n  [STATES_ENUM.EXPIRED]: {\n    color: 'error', icon: 'error', label: 'Expired', compoundIcon: 'warning'\n  },\n  [STATES_ENUM.EXPIRING]: {\n    color: 'warning', icon: 'error', label: 'Expiring', compoundIcon: 'error'\n  },\n  [STATES_ENUM.FAIL]: {\n    color: 'error', icon: 'error', label: 'Fail', compoundIcon: 'error'\n  },\n  [STATES_ENUM.FAILED]: {\n    color: 'error', icon: 'error', label: 'Failed', compoundIcon: 'error'\n  },\n  [STATES_ENUM.HEALTHY]: {\n    color: 'success', icon: 'dot-open', label: 'Healthy', compoundIcon: 'checkmark'\n  },\n  [STATES_ENUM.INACTIVE]: {\n    color: 'error', icon: 'dot', label: 'Inactive', compoundIcon: 'error'\n  },\n  [STATES_ENUM.INITIALIZING]: {\n    color: 'warning', icon: 'error', label: 'Initializing', compoundIcon: 'warning'\n  },\n  [STATES_ENUM.INPROGRESS]: {\n    color: 'info', icon: 'spinner', label: 'In Progress', compoundIcon: 'info'\n  },\n  [STATES_ENUM.INFO]: {\n    color: 'info', icon: 'info', label: 'Info', compoundIcon: 'info'\n  },\n  [STATES_ENUM.LOCKED]: {\n    color: 'warning', icon: 'adjust', label: 'Locked', compoundIcon: 'warning'\n  },\n  [STATES_ENUM.MIGRATING]: {\n    color: 'info', icon: 'info', label: 'Migrated', compoundIcon: 'info'\n  },\n  [STATES_ENUM.MISSING]: {\n    color: 'warning', icon: 'adjust', label: 'Missing', compoundIcon: 'warning'\n  },\n  [STATES_ENUM.MODIFIED]: {\n    color: 'warning', icon: 'edit', label: 'Modified', compoundIcon: 'warning'\n  },\n  [STATES_ENUM.NOT_APPLICABLE]: {\n    color: 'warning', icon: 'tag', label: 'Not Applicable', compoundIcon: 'warning'\n  },\n  [STATES_ENUM.NOT_APLLIED]: {\n    color: 'warning', icon: 'tag', label: 'Not Applied', compoundIcon: 'warning'\n  },\n  [STATES_ENUM.NOT_READY]: {\n    color: 'warning', icon: 'tag', label: 'Not Ready', compoundIcon: 'warning'\n  },\n  [STATES_ENUM.OFF]: {\n    color: 'darker', icon: 'error', label: 'Off'\n  },\n  [STATES_ENUM.ON_GOING]: {\n    color: 'info', icon: 'info', label: 'Info', compoundIcon: 'info'\n  },\n  [STATES_ENUM.ORPHANED]: {\n    color: 'warning', icon: 'tag', label: 'Orphaned', compoundIcon: 'warning'\n  },\n  [STATES_ENUM.OTHER]: {\n    color: 'info', icon: 'info', label: 'Other', compoundIcon: 'info'\n  },\n  [STATES_ENUM.OUT_OF_SYNC]: {\n    color: 'warning', icon: 'tag', label: 'Out Of Sync', compoundIcon: 'warning'\n  },\n  [STATES_ENUM.PASS]: {\n    color: 'success', icon: 'dot-dotfill', label: 'Pass', compoundIcon: 'checkmark'\n  },\n  [STATES_ENUM.PASSED]: {\n    color: 'success', icon: 'dot-dotfill', label: 'Passed', compoundIcon: 'checkmark'\n  },\n  [STATES_ENUM.PAUSED]: {\n    color: 'info', icon: 'info', label: 'Paused', compoundIcon: 'info'\n  },\n  [STATES_ENUM.PENDING]: {\n    color: 'info', icon: 'tag', label: 'Pending', compoundIcon: 'info'\n  },\n  [STATES_ENUM.PROVISIONING]: {\n    color: 'info', icon: 'dot', label: 'Provisioning', compoundIcon: 'info'\n  },\n  [STATES_ENUM.PROVISIONED]: {\n    color: 'success', icon: 'dot', label: 'Provisioned', compoundIcon: 'checkmark'\n  },\n  [STATES_ENUM.PURGED]: {\n    color: 'error', icon: 'purged', label: 'Purged', compoundIcon: 'error'\n  },\n  [STATES_ENUM.PURGING]: {\n    color: 'info', icon: 'purged', label: 'Purging', compoundIcon: 'info'\n  },\n  [STATES_ENUM.READY]: {\n    color: 'success', icon: 'dot-open', label: 'Ready', compoundIcon: 'checkmark'\n  },\n  [STATES_ENUM.RECONNECTING]: {\n    color: 'error', icon: 'error', label: 'Reconnecting', compoundIcon: 'error'\n  },\n  [STATES_ENUM.REGISTERING]: {\n    color: 'info', icon: 'tag', label: 'Registering', compoundIcon: 'info'\n  },\n  [STATES_ENUM.REINITIALIZING]: {\n    color: 'warning', icon: 'error', label: 'Reinitializing', compoundIcon: 'warning'\n  },\n  [STATES_ENUM.RELEASED]: {\n    color: 'warning', icon: 'error', label: 'Released', compoundIcon: 'warning'\n  },\n  [STATES_ENUM.REMOVED]: {\n    color: 'error', icon: 'trash', label: 'Removed', compoundIcon: 'error'\n  },\n  [STATES_ENUM.REMOVING]: {\n    color: 'info', icon: 'trash', label: 'Removing', compoundIcon: 'info'\n  },\n  [STATES_ENUM.REQUESTED]: {\n    color: 'info', icon: 'tag', label: 'Requested', compoundIcon: 'info'\n  },\n  [STATES_ENUM.RESTARTING]: {\n    color: 'info', icon: 'adjust', label: 'Restarting', compoundIcon: 'info'\n  },\n  [STATES_ENUM.RESTORING]: {\n    color: 'info', icon: 'medicalcross', label: 'Restoring', compoundIcon: 'info'\n  },\n  [STATES_ENUM.RESIZING]: {\n    color: 'warning', icon: 'dot', label: 'Resizing', compoundIcon: 'warning'\n  },\n  [STATES_ENUM.RUNNING]: {\n    color: 'success', icon: 'dot-open', label: 'Running', compoundIcon: 'checkmark'\n  },\n  [STATES_ENUM.SKIP]: {\n    color: 'info', icon: 'dot-open', label: 'Skip', compoundIcon: 'info'\n  },\n  [STATES_ENUM.SKIPPED]: {\n    color: 'info', icon: 'dot-open', label: 'Skipped', compoundIcon: 'info'\n  },\n  [STATES_ENUM.STARTING]: {\n    color: 'info', icon: 'adjust', label: 'Starting', compoundIcon: 'info'\n  },\n  [STATES_ENUM.STOPPED]: {\n    color: 'error', icon: 'dot', label: 'Stopped', compoundIcon: 'error'\n  },\n  [STATES_ENUM.STOPPING]: {\n    color: 'info', icon: 'adjust', label: 'Stopping', compoundIcon: 'info'\n  },\n  [STATES_ENUM.SUCCEEDED]: {\n    color: 'success', icon: 'dot-dotfill', label: 'Succeeded', compoundIcon: 'checkmark'\n  },\n  [STATES_ENUM.SUCCESS]: {\n    color: 'success', icon: 'dot-open', label: 'Success', compoundIcon: 'checkmark'\n  },\n  [STATES_ENUM.SUCCESSFUL]: {\n    color: 'success', icon: 'dot-open', label: 'Successful'\n  },\n  [STATES_ENUM.SUPERSEDED]: {\n    color: 'info', icon: 'dot-open', label: 'Superseded', compoundIcon: 'info'\n  },\n  [STATES_ENUM.SUSPENDED]: {\n    color: 'info', icon: 'pause', label: 'Suspended', compoundIcon: 'info'\n  },\n  [STATES_ENUM.UNAVAILABLE]: {\n    color: 'error', icon: 'error', label: 'Unavailable', compoundIcon: 'error'\n  },\n  [STATES_ENUM.UNHEALTHY]: {\n    color: 'error', icon: 'error', label: 'Unhealthy', compoundIcon: 'error'\n  },\n  [STATES_ENUM.UNINSTALLED]: {\n    color: 'info', icon: 'trash', label: 'Uninstalled', compoundIcon: 'info'\n  },\n  [STATES_ENUM.UNINSTALLING]: {\n    color: 'info', icon: 'trash', label: 'Uninstalling', compoundIcon: 'info'\n  },\n  [STATES_ENUM.UNKNOWN]: {\n    color: 'warning', icon: 'x', label: 'Unknown', compoundIcon: 'warning'\n  },\n  [STATES_ENUM.UNTRIGGERED]: {\n    color: 'success', icon: 'tag', label: 'Untriggered', compoundIcon: 'checkmark'\n  },\n  [STATES_ENUM.UPDATING]: {\n    color: 'warning', icon: 'tag', label: 'Updating', compoundIcon: 'warning'\n  },\n  [STATES_ENUM.WAIT_APPLIED]: {\n    color: 'info', icon: 'tag', label: 'Wait Applied', compoundIcon: 'info'\n  },\n  [STATES_ENUM.WAIT_CHECKIN]: {\n    color: 'warning', icon: 'tag', label: 'Wait Checkin', compoundIcon: 'warning'\n  },\n  [STATES_ENUM.WAITING]: {\n    color: 'info', icon: 'tag', label: 'Waiting', compoundIcon: 'info'\n  },\n  [STATES_ENUM.WARNING]: {\n    color: 'warning', icon: 'error', label: 'Warning', compoundIcon: 'warning'\n  },\n  [STATES_ENUM.DEPLOYING]: {\n    color: 'info', icon: 'info', label: 'Deploying', compoundIcon: 'info'\n  },\n};\n\nexport function getStatesByType(type = 'info') {\n  const out = {\n    info:    [],\n    error:   [],\n    success: [],\n    warning: [],\n    unknown: [],\n  };\n\n  forIn(STATES, (state, stateKey) => {\n    if (state.color) {\n      if (out[state.color]) {\n        out[state.color].push(stateKey);\n      } else {\n        out.unknown.push(stateKey);\n      }\n    }\n  });\n\n  return out;\n}\n\nconst SORT_ORDER = {\n  error:    1,\n  warning:  2,\n  info:     3,\n  success:  4,\n  ready:    5,\n  notready: 6,\n  other:    7,\n};\n\nexport function getStateLabel(state) {\n  const lowercaseState = state.toLowerCase();\n\n  return STATES[lowercaseState] ? STATES[lowercaseState].label : STATES[STATES_ENUM.UNKNOWN].label;\n}\n\nexport function colorForState(state, isError, isTransitioning) {\n  if ( isError ) {\n    return 'text-error';\n  }\n\n  if ( isTransitioning ) {\n    return 'text-info';\n  }\n\n  const key = (state || 'active').toLowerCase();\n  let color;\n\n  if ( STATES[key] && STATES[key].color ) {\n    color = maybeFn.call(this, STATES[key].color);\n  }\n\n  if ( !color ) {\n    color = DEFAULT_COLOR;\n  }\n\n  return `text-${ color }`;\n}\n\nexport function stateDisplay(state) {\n  // @TODO use translations\n  const key = (state || 'active').toLowerCase();\n\n  if ( REMAP_STATE[key] ) {\n    return REMAP_STATE[key];\n  }\n\n  return key.split(/-/).map(ucFirst).join('-');\n}\n\nexport function primaryDisplayStatusFromCount(status) {\n  const statusOrder = [\n    STATES_ENUM.ERROR,\n    STATES_ENUM.FAILED,\n    STATES_ENUM.WARNING,\n    STATES_ENUM.MODIFIED,\n    STATES_ENUM.WAIT_APPLIED,\n    STATES_ENUM.ORPHANED,\n    STATES_ENUM.MISSING,\n    STATES_ENUM.UNKNOWN,\n    STATES_ENUM.NOT_READY,\n    STATES_ENUM.READY,\n  ];\n\n  // sort status by order of statusOrder\n  const existingStatuses = Object.keys(status).filter((key) => {\n    return status[key] > 0 && statusOrder.includes(key.toLowerCase());\n  }).sort((a, b) => statusOrder.indexOf(a.toLowerCase()) - statusOrder.indexOf(b.toLowerCase()));\n\n  return existingStatuses[0] ? existingStatuses[0] : STATES_ENUM.UNKNOWN;\n}\n\nexport function stateSort(color, display) {\n  color = color.replace(/^(text|bg)-/, '');\n\n  return `${ SORT_ORDER[color] || SORT_ORDER['other'] } ${ display }`;\n}\n\nexport function isConditionReadyAndWaiting(condition) {\n  if (!condition) {\n    return false;\n  }\n\n  return condition?.type?.toLowerCase() === 'ready' && condition?.reason?.toLowerCase() === 'waiting';\n}\n\nfunction maybeFn(val) {\n  if ( isFunction(val) ) {\n    return val(this);\n  }\n\n  return val;\n}\n\nexport default class Resource {\n  constructor(data, ctx, rehydrateNamespace = null, setClone = false) {\n    for ( const k in data ) {\n      this[k] = data[k];\n    }\n\n    Object.defineProperty(this, '$ctx', {\n      value:      ctx,\n      enumerable: false,\n    });\n\n    if ( rehydrateNamespace ) {\n      Object.defineProperty(this, '__rehydrate', {\n        value:        rehydrateNamespace,\n        enumerable:   true,\n        configurable: true\n      });\n    }\n\n    if ( setClone ) {\n      Object.defineProperty(this, '__clone', {\n        value:        true,\n        enumerable:   true,\n        configurable: true,\n        writable:     true\n      });\n    }\n  }\n\n  get '$getters'() {\n    return this.$ctx.getters;\n  }\n\n  get '$rootGetters'() {\n    return this.$ctx.rootGetters;\n  }\n\n  get '$dispatch'() {\n    return this.$ctx.dispatch;\n  }\n\n  get '$state'() {\n    return this.$ctx.state;\n  }\n\n  get '$rootState'() {\n    return this.$ctx.rootState;\n  }\n\n  get customValidationRules() {\n    return [\n      /**\n       * Essentially a fake schema object with additional params to extend validation\n       *\n       * @param {nullable} Value is nullable\n       * @param {path} Path on the resource to the value to validate\n       * @param {required} Value required\n       * @param {requiredIf} Value required if value at path not empty\n       * @param {translationKey} Human readable display key for param in path e.g. metadata.name === Name\n       * @param {type} Type of field to validate\n       * @param {validators} array of strings where item is name of exported validator function in custom-validators, args can be passed by prepending args separated by colon. e.g maxLength:63\n       */\n      /* {\n        nullable:       false,\n        path:           'spec.ports',\n        required:       true,\n        type:           'array',\n        validators:     ['servicePort'],\n      } */\n    ];\n  }\n\n  get _key() {\n    const m = this.metadata;\n\n    if ( m ) {\n      if ( m.uid ) {\n        return m.uid;\n      }\n\n      if ( m.namespace ) {\n        return `${ this.type }/${ m.namespace }/${ m.name }`;\n      }\n    }\n\n    if ( this.id ) {\n      return `${ this.type }/${ this.id }`;\n    }\n\n    return `${ this.type }/${ Math.random() }`;\n  }\n\n  get schema() {\n    return this.$getters['schemaFor'](this.type);\n  }\n\n  toString() {\n    return `[${ this.type }: ${ this.id }]`;\n  }\n\n  get typeDisplay() {\n    const schema = this.schema;\n\n    if ( schema ) {\n      return this.$rootGetters['type-map/labelFor'](schema);\n    }\n\n    return '?';\n  }\n\n  get nameDisplay() {\n    return this.displayName || this.spec?.displayName || this.metadata?.annotations?.[NORMAN_NAME] || this.name || this.metadata?.name || this.id;\n  }\n\n  get nameSort() {\n    return sortableNumericSuffix(this.nameDisplay).toLowerCase();\n  }\n\n  get namespacedName() {\n    const namespace = this.metadata?.namespace;\n    const name = this.nameDisplay;\n\n    if ( namespace ) {\n      return `${ namespace }:${ name }`;\n    }\n\n    return name;\n  }\n\n  get namespacedNameSort() {\n    return sortableNumericSuffix(this.namespacedName).toLowerCase();\n  }\n\n  get groupByLabel() {\n    const name = this.metadata?.namespace;\n    let out;\n\n    if ( name ) {\n      out = this.t('resourceTable.groupLabel.namespace', { name: escapeHtml(name) });\n    } else {\n      out = this.t('resourceTable.groupLabel.notInANamespace');\n    }\n\n    return out;\n  }\n\n  setLabels(/* val */) {\n    throw new Error('Implement setLabels in subclass');\n  }\n\n  setLabel(/* key, val */) {\n    throw new Error('Implement setLabel in subclass');\n  }\n\n  setAnnotations(val) {\n    throw new Error('Implement setAnnotations in subclass');\n  }\n\n  setAnnotation(key, val) {\n    throw new Error('Implement setAnnotation in subclass');\n  }\n\n  // You can override the displayed by providing your own stateDisplay (and possibly using the function exported above)\n  get stateDisplay() {\n    return stateDisplay(this.state);\n  }\n\n  get stateColor() {\n    return colorForState.call(\n      this,\n      this.state,\n      this.stateObj?.error,\n      this.stateObj?.transitioning\n    );\n  }\n\n  get stateBackground() {\n    return this.stateColor.replace('text-', 'bg-');\n  }\n\n  get stateIcon() {\n    let trans = false;\n    let error = false;\n\n    if ( this.metadata && this.metadata.state ) {\n      trans = this.metadata.state.transitioning;\n      error = this.metadata.state.error;\n    }\n\n    if ( trans ) {\n      return 'icon icon-spinner icon-spin';\n    }\n\n    if ( error ) {\n      return 'icon icon-error';\n    }\n\n    const key = (this.state || '').toLowerCase();\n    let icon;\n\n    if ( STATES[key] && STATES[key].icon ) {\n      icon = maybeFn.call(this, STATES[key].icon);\n    }\n\n    if ( !icon ) {\n      icon = DEFAULT_ICON;\n    }\n\n    return `icon icon-${ icon }`;\n  }\n\n  get stateSort() {\n    return stateSort(this.stateColor, this.stateDisplay);\n  }\n\n  get stateDescription() {\n    const trans = this.stateObj?.transitioning || false;\n    const error = this.stateObj?.error || false;\n    const message = this.stateObj?.message;\n\n    return trans || error ? ucFirst(message) : '';\n  }\n\n  get stateObj() {\n    return this.metadata?.state;\n  }\n\n  // ------------------------------------------------------------------\n\n  waitForTestFn(fn, msg, timeoutMs, intervalMs) {\n    return waitFor(() => fn.apply(this), msg, timeoutMs || DEFAULT_WAIT_TMIMEOUT, intervalMs || DEFAULT_WAIT_INTERVAL, true);\n  }\n\n  waitForState(state, timeout, interval) {\n    return this.waitForTestFn(() => {\n      return (this.state || '').toLowerCase() === state.toLowerCase();\n    }, `state=${ state }`, timeout, interval);\n  }\n\n  waitForTransition() {\n    return this.waitForTestFn(() => {\n      return !this.transitioning;\n    }, 'transition completion', undefined, undefined);\n  }\n\n  waitForAction(name) {\n    return this.waitForTestFn(() => {\n      return this.hasAction(name);\n    }, `action=${ name }`, undefined, undefined);\n  }\n\n  waitForLink(name) {\n    return this.waitForTestFn(() => {\n      return this.hasLink(name);\n    }, `link=${ name }`, undefined, undefined);\n  }\n\n  hasCondition(condition) {\n    return this.isCondition(condition, null);\n  }\n\n  isCondition(condition, withStatus = 'True') {\n    if ( !this.status || !this.status.conditions ) {\n      return false;\n    }\n\n    const entry = findBy((this.status.conditions || []), 'type', condition);\n\n    if ( !entry ) {\n      return false;\n    }\n\n    if ( !withStatus ) {\n      return true;\n    }\n\n    return (entry.status || '').toLowerCase() === `${ withStatus }`.toLowerCase();\n  }\n\n  waitForCondition(name, withStatus = 'True', timeoutMs = DEFAULT_WAIT_TMIMEOUT, intervalMs = DEFAULT_WAIT_INTERVAL) {\n    return this.waitForTestFn(() => {\n      return this.isCondition(name, withStatus);\n    }, `condition ${ name }=${ withStatus }`, timeoutMs, intervalMs);\n  }\n\n  // ------------------------------------------------------------------\n\n  get availableActions() {\n    const all = this._availableActions;\n\n    // Remove disabled items and consecutive dividers\n    let last = null;\n    const out = all.filter((item) => {\n      if ( item.enabled === false ) {\n        return false;\n      }\n\n      const cur = item.divider;\n      const ok = !cur || (cur && !last);\n\n      last = cur;\n\n      return ok;\n    });\n\n    // Remove dividers at the beginning\n    while ( out.length && out[0].divider ) {\n      out.shift();\n    }\n\n    // Remove dividers at the end\n    while ( out.length && out[out.length - 1].divider ) {\n      out.pop();\n    }\n\n    // Remove consecutive dividers in the middle\n    for ( let i = 1 ; i < out.length ; i++ ) {\n      if ( out[i].divider && out[i - 1].divider ) {\n        removeAt(out, i, 1);\n        i--;\n      }\n    }\n\n    return out;\n  }\n\n  // You can add custom actions by overriding your own availableActions (and probably reading super._availableActions)\n  get _availableActions() {\n    // get menu actions available by plugins configuration\n    const currentRoute = this.currentRouter().app._route;\n    const extensionMenuActions = getApplicableExtensionEnhancements(this.$rootState, ExtensionPoint.ACTION, ActionLocation.TABLE, currentRoute, this);\n\n    const all = [\n      { divider: true },\n      {\n        action:  this.canUpdate ? 'goToEdit' : 'goToViewConfig',\n        label:   this.t(this.canUpdate ? 'action.edit' : 'action.view'),\n        icon:    'icon icon-edit',\n        enabled: this.canCustomEdit,\n      },\n      {\n        action:  this.canEditYaml ? 'goToEditYaml' : 'goToViewYaml',\n        label:   this.t(this.canEditYaml ? 'action.editYaml' : 'action.viewYaml'),\n        icon:    'icon icon-file',\n        enabled: this.canYaml,\n      },\n      {\n        action:  (this.canCustomEdit ? 'goToClone' : 'cloneYaml'),\n        label:   this.t('action.clone'),\n        icon:    'icon icon-copy',\n        enabled: this.canClone && this.canCreate && (this.canCustomEdit || this.canYaml),\n      },\n      { divider: true },\n      {\n        action:     'download',\n        label:      this.t('action.download'),\n        icon:       'icon icon-download',\n        bulkable:   true,\n        bulkAction: 'downloadBulk',\n        enabled:    this.canYaml,\n        weight:     -9,\n      },\n      {\n        action:  'viewInApi',\n        label:   this.t('action.viewInApi'),\n        icon:    'icon icon-external-link',\n        enabled: this.canViewInApi,\n      },\n      {\n        action:     'promptRemove',\n        altAction:  'remove',\n        label:      this.t('action.remove'),\n        icon:       'icon icon-trash',\n        bulkable:   true,\n        enabled:    this.canDelete,\n        bulkAction: 'promptRemove',\n        weight:     -10, // Delete always goes last\n      },\n    ];\n\n    // Extension actions get added to the end, so add a divider if there are any\n    if (extensionMenuActions.length) {\n      // Add a divider first\n      all.push({ divider: true });\n\n      extensionMenuActions.forEach((action) => {\n        const newActionInstance = { ...action };\n\n        const enabledFn = newActionInstance.enabled;\n        const typeofEnabled = typeof enabledFn;\n\n        switch (typeofEnabled) {\n        case 'undefined':\n          newActionInstance.enabled = true;\n          break;\n        case 'function':\n          Object.defineProperty(newActionInstance, 'enabled', { get: () => enabledFn(this) });\n          break;\n        case 'boolean':\n          // no op, just use it directly\n          break;\n        default:\n          // unsupported value\n          console.warn(`Unsupported 'enabled' property type for action: ${ action.label || action.labelKey }` ); // eslint-disable-line no-console\n          delete newActionInstance.enabled;\n          break;\n        }\n\n        all.push(newActionInstance);\n      });\n    }\n\n    return all;\n  }\n\n  // ------------------------------------------------------------------\n\n  get canDelete() {\n    return this._canDelete;\n  }\n\n  get _canDelete() {\n    return this.hasLink('remove') && this.$rootGetters['type-map/optionsFor'](this.type).isRemovable;\n  }\n\n  get canClone() {\n    return true;\n  }\n\n  get canUpdate() {\n    return this.hasLink('update') && this.$rootGetters['type-map/optionsFor'](this.type).isEditable;\n  }\n\n  get canCustomEdit() {\n    return this.$rootGetters['type-map/hasCustomEdit'](this.type, this.id);\n  }\n\n  get canCreate() {\n    if ( this.schema && !this.schema?.collectionMethods.find((x) => x.toLowerCase() === 'post') ) {\n      return false;\n    }\n\n    return this.$rootGetters['type-map/optionsFor'](this.type).isCreatable;\n  }\n\n  get canViewInApi() {\n    return this.hasLink('self') && this.$rootGetters['prefs/get'](VIEW_IN_API);\n  }\n\n  get canYaml() {\n    return this.hasLink('view');\n  }\n\n  get canEditYaml() {\n    return this.schema?.resourceMethods?.find((x) => x === 'blocked-PUT') ? false : this.canUpdate;\n  }\n\n  // ------------------------------------------------------------------\n\n  hasLink(linkName) {\n    return !!this.linkFor(linkName);\n  }\n\n  linkFor(linkName) {\n    return (this.links || {})[linkName];\n  }\n\n  followLink(linkName, opt = {}) {\n    if ( !opt.url ) {\n      opt.url = (this.links || {})[linkName];\n    }\n\n    if ( opt.urlSuffix ) {\n      opt.url += opt.urlSuffix;\n    }\n\n    if ( !opt.url ) {\n      throw new Error(`Unknown link ${ linkName } on ${ this.type } ${ this.id }`);\n    }\n\n    return this.$dispatch('request', { opt, type: this.type } );\n  }\n\n  // ------------------------------------------------------------------\n\n  hasAction(actionName) {\n    return !!this.actionLinkFor(actionName);\n  }\n\n  actionLinkFor(actionName) {\n    return (this.actions || this.actionLinks || {})[actionName];\n  }\n\n  doAction(actionName, body, opt = {}) {\n    return this.$dispatch('resourceAction', {\n      resource: this,\n      actionName,\n      body,\n      opt,\n    });\n  }\n\n  async doActionGrowl(actionName, body, opt = {}) {\n    try {\n      await this.$dispatch('resourceAction', {\n        resource: this,\n        actionName,\n        body,\n        opt,\n      });\n    } catch (err) {\n      this.$dispatch('growl/fromError', {\n        title: this.$rootGetters['i18n/t']('generic.notification.title.error'),\n        err:   err.data || err,\n      }, { root: true });\n    }\n  }\n\n  // ------------------------------------------------------------------\n\n  patch(data, opt = {}, merge = false, alertOnError = false) {\n    if ( !opt.url ) {\n      // Workaround for the links not being correct - view link is the only one that seems correct\n      opt.url = this.linkFor('view') || this.linkFor('self');\n    }\n\n    opt.method = 'patch';\n    opt.headers = opt.headers || {};\n\n    if (!opt.headers['content-type']) {\n      const contentType = merge ? 'application/strategic-merge-patch+json' : 'application/json-patch+json';\n\n      opt.headers['content-type'] = contentType;\n    }\n    opt.data = data;\n\n    const dispatch = this.$dispatch('request', { opt, type: this.type } );\n\n    return !alertOnError ? dispatch : dispatch.catch((e) => {\n      const title = this.t('resource.errors.update', { name: this.name });\n\n      console.error(title, e); // eslint-disable-line no-console\n\n      this.$dispatch('growl/error', {\n        title,\n        message: e?.message,\n        timeout: 5000\n      }, { root: true });\n    });\n  }\n\n  save() {\n    return this._save(...arguments);\n  }\n\n  /**\n   * Remove any unwanted properties from the object that will be saved\n   */\n  cleanForSave(data, forNew) {\n    delete data.__rehydrate;\n    delete data.__clone;\n\n    return data;\n  }\n\n  /**\n   * Allow to handle the response of the save request\n   * @param {*} res Full request response\n   */\n  processSaveResponse(res) { }\n\n  async _save(opt = {}) {\n    const forNew = !this.id;\n\n    const errors = await this.validationErrors(this, opt.ignoreFields);\n\n    if (!isEmpty(errors)) {\n      return Promise.reject(errors);\n    }\n\n    if ( this.metadata?.resourceVersion ) {\n      this.metadata.resourceVersion = `${ this.metadata.resourceVersion }`;\n    }\n\n    if ( !opt.url ) {\n      if ( forNew ) {\n        const schema = this.$getters['schemaFor'](this.type);\n        let url = schema.linkFor('collection');\n\n        if ( schema.attributes && schema.attributes.namespaced && this.metadata && this.metadata.namespace ) {\n          url += `/${ this.metadata.namespace }`;\n        }\n\n        opt.url = url;\n      } else {\n        opt.url = this.linkFor('update') || this.linkFor('self');\n      }\n    }\n\n    if ( !opt.method ) {\n      opt.method = ( forNew ? 'post' : 'put' );\n    }\n\n    if ( !opt.headers ) {\n      opt.headers = {};\n    }\n\n    if ( !opt.headers['content-type'] ) {\n      opt.headers['content-type'] = 'application/json';\n    }\n\n    if ( !opt.headers['accept'] ) {\n      opt.headers['accept'] = 'application/json';\n    }\n\n    // @TODO remove this once the API maps steve _type <-> k8s type in both directions\n    opt.data = this.toSave() || { ...this };\n\n    if (opt.data._type) {\n      opt.data.type = opt.data._type;\n    }\n\n    if (opt.data._name) {\n      opt.data.name = opt.data._name;\n    }\n\n    if (opt.data._labels) {\n      opt.data.labels = opt.data._labels;\n    }\n\n    if (opt.data._annotations) {\n      opt.data.annotations = opt.data._annotations;\n    }\n\n    opt.data = this.cleanForSave(opt.data, forNew);\n\n    // handle \"replace\" opt as a query param _replace=true for norman PUT requests\n    if (opt?.replace && opt.method === 'put') {\n      const argParam = opt.url.includes('?') ? '&' : '?';\n\n      opt.url = `${ opt.url }${ argParam }_replace=true`;\n      delete opt.replace;\n    }\n\n    try {\n      const res = await this.$dispatch('request', { opt, type: this.type } );\n\n      // Allow to process response independently from the related models\n      this.processSaveResponse(res);\n\n      // Steve sometimes returns Table responses instead of the resource you just saved.. ignore\n      if ( res && res.kind !== 'Table') {\n        await this.$dispatch('load', { data: res, existing: (forNew ? this : undefined ) });\n      }\n    } catch (e) {\n      if ( this.type && this.id && e?._status === 409) {\n        // If there's a conflict, try to load the new version\n        await this.$dispatch('find', {\n          type: this.type,\n          id:   this.id,\n          opt:  { force: true }\n        });\n      }\n\n      return Promise.reject(e);\n    }\n\n    return this;\n  }\n\n  remove() {\n    return this._remove(...arguments);\n  }\n\n  async _remove(opt = {}) {\n    if ( !opt.url ) {\n      opt.url = this.linkFor('self');\n    }\n\n    opt.method = 'delete';\n\n    const res = await this.$dispatch('request', { opt, type: this.type } );\n\n    if ( res?._status === 204 ) {\n      // If there's no body, assume the resource was immediately deleted\n      // and drop it from the store as if a remove event happened.\n      await this.$dispatch('ws.resource.remove', { data: this });\n    }\n  }\n\n  // ------------------------------------------------------------------\n\n  currentRoute() {\n    return window.$nuxt.$route;\n  }\n\n  currentRouter() {\n    return window.$nuxt.$router;\n  }\n\n  get listLocation() {\n    return {\n      name:   `c-cluster-product-resource`,\n      params: {\n        product:  this.$rootGetters['productId'],\n        cluster:  this.$rootGetters['clusterId'],\n        resource: this.type,\n      }\n    };\n  }\n\n  get _detailLocation() {\n    const schema = this.$getters['schemaFor'](this.type);\n\n    const id = this.id?.replace(/.*\\//, '');\n\n    return {\n      name:   `c-cluster-product-resource${ schema?.attributes?.namespaced ? '-namespace' : '' }-id`,\n      params: {\n        product:   this.$rootGetters['productId'],\n        cluster:   this.$rootGetters['clusterId'],\n        resource:  this.type,\n        namespace: this.metadata?.namespace,\n        id,\n      }\n    };\n  }\n\n  get detailLocation() {\n    return this._detailLocation;\n  }\n\n  goToDetail() {\n    this.currentRouter().push(this.detailLocation);\n  }\n\n  goToClone(moreQuery = {}) {\n    const location = this.detailLocation;\n\n    location.query = {\n      ...location.query,\n      [MODE]: _CLONE,\n      [AS]:   _UNFLAG,\n      ...moreQuery\n    };\n\n    this.currentRouter().push(location);\n  }\n\n  goToEdit(moreQuery = {}) {\n    const location = this.detailLocation;\n\n    location.query = {\n      ...location.query,\n      [MODE]: _EDIT,\n      [AS]:   _UNFLAG,\n      ...moreQuery\n    };\n\n    this.currentRouter().push(location);\n  }\n\n  goToViewConfig(moreQuery = {}) {\n    const location = this.detailLocation;\n\n    location.query = {\n      ...location.query,\n      [MODE]: _VIEW,\n      [AS]:   _CONFIG,\n      ...moreQuery\n    };\n\n    this.currentRouter().push(location);\n  }\n\n  goToEditYaml() {\n    const location = this.detailLocation;\n\n    location.query = {\n      ...location.query,\n      [MODE]: _EDIT,\n      [AS]:   _YAML\n    };\n\n    this.currentRouter().push(location);\n  }\n\n  goToViewYaml() {\n    const location = this.detailLocation;\n\n    location.query = {\n      ...location.query,\n      [MODE]: _VIEW,\n      [AS]:   _YAML\n    };\n\n    this.currentRouter().push(location);\n  }\n\n  cloneYaml(moreQuery = {}) {\n    const location = this.detailLocation;\n\n    location.query = {\n      ...location.query,\n      [MODE]: _CLONE,\n      [AS]:   _YAML,\n      ...moreQuery\n    };\n\n    this.currentRouter().push(location);\n  }\n\n  async download() {\n    const value = await this.followLink('view', { headers: { accept: 'application/yaml' } });\n    const data = await this.cleanForDownload(value.data);\n\n    downloadFile(`${ this.nameDisplay }.yaml`, data, 'application/yaml');\n  }\n\n  async downloadBulk(items) {\n    const files = {};\n    const names = [];\n\n    for ( const item of items ) {\n      let name = `${ item.nameDisplay }.yaml`;\n      let i = 2;\n\n      while ( names.includes(name) ) {\n        name = `${ item.nameDisplay }_${ i++ }.yaml`;\n      }\n\n      names.push(name);\n    }\n\n    await eachLimit(items, 10, (item, idx) => {\n      return item.followLink('view', { headers: { accept: 'application/yaml' } } ).then(async(data) => {\n        const yaml = data.data || data;\n        const cleanedYaml = await this.cleanForDownload(yaml);\n\n        files[`resources/${ names[idx] }`] = cleanedYaml;\n      });\n    });\n\n    const zip = await generateZip(files);\n\n    downloadFile('resources.zip', zip, 'application/zip');\n  }\n\n  viewInApi() {\n    window.open(this.links.self, '_blank');\n  }\n\n  promptRemove(resources) {\n    if ( !resources ) {\n      resources = this;\n    }\n\n    this.$dispatch('promptRemove', resources);\n  }\n\n  get confirmRemove() {\n    return false;\n  }\n\n  applyDefaults() {\n  }\n\n  get urlFromAttrs() {\n    const schema = this.$getters['schemaFor'](this.type);\n    const { metadata:{ namespace = 'default' } } = this;\n    let url = schema.links.collection;\n\n    const attributes = schema?.attributes;\n\n    if (!attributes) {\n      throw new Error('Attributes must be present on the schema');\n    }\n    const { group, resource } = attributes;\n\n    url = `${ url.slice(0, url.indexOf('/v1')) }/apis/${ group }/namespaces/${ namespace }/${ resource }`;\n\n    return url;\n  }\n\n  // convert yaml to object, clean for new if creating/cloning\n  // map _type to type\n  cleanYaml(yaml, mode = 'edit') {\n    try {\n      const obj = jsyaml.load(yaml);\n\n      if (mode !== 'edit') {\n        this.$dispatch(`cleanForNew`, obj);\n      }\n\n      if (obj._type) {\n        obj.type = obj._type;\n        delete obj._type;\n      }\n      const out = jsyaml.dump(obj, { skipInvalid: true });\n\n      return out;\n    } catch (e) {\n      return null;\n    }\n  }\n\n  cleanForNew() {\n    this.$dispatch(`cleanForNew`, this);\n  }\n\n  cleanForDiff() {\n    this.$dispatch(`cleanForDiff`, this.toJSON());\n  }\n\n  async cleanForDownload(yaml) {\n    return this.$dispatch(`cleanForDownload`, yaml);\n  }\n\n  yamlForSave(yaml) {\n    try {\n      const obj = jsyaml.load(yaml);\n\n      if (obj) {\n        if (this._type) {\n          obj._type = obj.type;\n        }\n\n        return jsyaml.dump(obj);\n      }\n    } catch (e) {\n      return null;\n    }\n  }\n\n  async saveYaml(yaml) {\n    await this._saveYaml(yaml);\n  }\n\n  async _saveYaml(yaml) {\n    /* Multipart support, but need to know the right cluster and work for management store\n      and \"apply\" seems to only work for create, not update.\n\n    const ary = jsyaml.loadAll(yaml); // will throw on invalid yaml, and return one or more documents (usually one)\n\n    if ( ary.length > 1 ) {\n      await this.$rootGetters['currentCluster'].doAction('apply', {\n        yaml,\n        defaultNamespace: this.metadata.namespace,\n      });\n    }\n\n    const parsed = ary[0];\n    */\n\n    const parsed = jsyaml.load(yaml); // will throw on invalid yaml, and return one or more documents (usually one)\n\n    if ( this.schema?.attributes?.namespaced && !parsed.metadata.namespace ) {\n      const err = this.$rootGetters['i18n/t']('resourceYaml.errors.namespaceRequired');\n\n      throw err;\n    }\n\n    let res;\n    const isCreate = !this.id;\n    const headers = {\n      'content-type': 'application/yaml',\n      accept:         'application/json',\n    };\n\n    if ( isCreate ) {\n      res = await this.schema.followLink('collection', {\n        method: 'POST',\n        headers,\n        data:   yaml\n      });\n    } else {\n      res = await this.followLink('update', {\n        method: 'PUT',\n        headers,\n        data:   yaml\n      });\n    }\n\n    await this.$dispatch(`load`, {\n      data:     res,\n      existing: (isCreate ? this : undefined)\n    });\n\n    if (this.isSpoofed) {\n      await this.$dispatch('cluster/findAll', { type: this.type, opt: { force: true } }, { root: true });\n    }\n  }\n\n  get modelValidationRules() {\n    const rules = [];\n\n    const customValidationRulesets = this?.customValidationRules\n      .filter((rule) => !!rule.validators || !!rule.required)\n      .map((rule) => {\n        const formRules = formRulesGenerator(this.t, { displayKey: rule?.translationKey ? this.t(rule.translationKey) : 'Value' });\n\n        return {\n          path:  rule.path,\n          rules: [\n            ...(rule.validators || []),\n            ...rule.required ? ['required'] : [],\n            ...['dnsLabel', 'dnsLabelRestricted', 'hostname'].includes(rule.type) ? [rule.type] : []\n          ]\n            .map((rule) => {\n              if (rule.includes(':')) {\n                const [ruleKey, ruleArg] = rule.split(':');\n\n                return formRules[ruleKey](ruleArg);\n              }\n\n              return formRules[rule];\n            }\n            )\n            .filter((rule) => !!rule)\n        };\n      })\n      .filter((ruleset) => ruleset.rules.length > 0);\n\n    rules.push(...customValidationRulesets);\n\n    return rules;\n  }\n\n  customValidationErrors(data, ignorePaths = []) {\n    const errors = [];\n\n    let { customValidationRules } = this;\n\n    if (!isEmpty(customValidationRules)) {\n      if (isFunction(customValidationRules)) {\n        customValidationRules = customValidationRules();\n      }\n\n      customValidationRules.filter((rule) => !ignorePaths.includes(rule.path)).forEach((rule) => {\n        const {\n          path,\n          requiredIf: requiredIfPath,\n          validators = [],\n          type: fieldType,\n        } = rule;\n        let pathValue = get(data, path);\n\n        const parsedRules = compact((validators || []));\n        let displayKey = path;\n\n        if (rule.translationKey && this.$rootGetters['i18n/exists'](rule.translationKey)) {\n          displayKey = this.t(rule.translationKey);\n        }\n\n        if (isString(pathValue)) {\n          pathValue = pathValue.trim();\n        }\n        if (requiredIfPath) {\n          const reqIfVal = get(data, requiredIfPath);\n\n          if (!isEmpty(reqIfVal) && (isEmpty(pathValue) && pathValue !== 0)) {\n            errors.push(this.t('validation.required', { key: displayKey }));\n          }\n        }\n\n        validateLength(pathValue, rule, displayKey, this.$rootGetters, errors);\n        validateChars(pathValue, rule, displayKey, this.$rootGetters, errors);\n\n        if ( !isEmpty(pathValue) && DNS_LIKE_TYPES.includes(fieldType) ) {\n          // DNS types should be lowercase\n          const tolower = (pathValue || '').toLowerCase();\n\n          if ( tolower !== pathValue ) {\n            pathValue = tolower;\n\n            Vue.set(data, path, pathValue);\n          }\n\n          errors.push(...validateDnsLikeTypes(pathValue, fieldType, displayKey, this.$rootGetters, errors));\n        }\n\n        parsedRules.forEach((validator) => {\n          const validatorAndArgs = validator.split(':');\n          const validatorName = validatorAndArgs.slice(0, 1);\n          const validatorArgs = validatorAndArgs.slice(1) || null;\n          const validatorExists = Object.prototype.hasOwnProperty.call(CustomValidators, validatorName);\n\n          if (!isEmpty(validatorName) && validatorExists) {\n            CustomValidators[validatorName](pathValue, this.$rootGetters, errors, validatorArgs, displayKey, data);\n          } else if (!isEmpty(validatorName) && !validatorExists) {\n            // Check if validator is imported from plugin\n            const pluginValidator = this.$rootState.$plugin?.getValidator(validatorName);\n\n            if (pluginValidator) {\n              pluginValidator(pathValue, this.$rootGetters, errors, validatorArgs, displayKey, data);\n            } else {\n              // eslint-disable-next-line\n              console.warn(this.t('validation.custom.missing', { validatorName }));\n            }\n          }\n        });\n      });\n    }\n\n    return errors;\n  }\n\n  validationErrors(data = this, ignoreFields) {\n    const errors = [];\n    const {\n      type: originalType,\n      schema\n    } = data;\n    const type = normalizeType(originalType);\n\n    if ( !originalType ) {\n      // eslint-disable-next-line\n      console.warn(this.t('validation.noType'), data);\n\n      return errors;\n    }\n\n    if ( !schema ) {\n      // eslint-disable-next-line\n      // console.warn(this.t('validation.noSchema'), originalType, data);\n\n      return errors;\n    }\n\n    const fields = schema.resourceFields || {};\n    const keys = Object.keys(fields);\n    let field, key, val, displayKey;\n\n    for ( let i = 0 ; i < keys.length ; i++ ) {\n      const fieldErrors = [];\n\n      key = keys[i];\n      field = fields[key];\n      val = get(data, key);\n      displayKey = displayKeyFor(type, key, this.$rootGetters);\n\n      const fieldType = field?.type ? normalizeType(field.type) : null;\n      const valIsString = isString(val);\n\n      if ( ignoreFields && ignoreFields.includes(key) ) {\n        continue;\n      }\n\n      if ( val === undefined ) {\n        val = null;\n      }\n\n      if (valIsString) {\n        if (fieldType) {\n          Vue.set(data, key, coerceStringTypeToScalarType(val, fieldType));\n        }\n\n        // Empty strings on nullable string fields -> null\n        if ( field.nullable && val.length === 0 && STRING_LIKE_TYPES.includes(fieldType)) {\n          val = null;\n\n          Vue.set(data, key, val);\n        }\n      }\n      if (fieldType === 'boolean') {\n        validateBoolean(val, field, displayKey, this.$rootGetters, fieldErrors);\n      } else {\n        validateLength(val, field, displayKey, this.$rootGetters, fieldErrors);\n        validateChars(val, field, displayKey, this.$rootGetters, fieldErrors);\n      }\n\n      if (fieldErrors.length > 0) {\n        fieldErrors.push(this.t('validation.required', { key: displayKey }));\n        errors.push(...fieldErrors);\n        continue;\n      }\n\n      // IDs claim to be these but are lies...\n      if ( key !== 'id' && !isEmpty(val) && DNS_LIKE_TYPES.includes(fieldType) ) {\n        // DNS types should be lowercase\n        const tolower = (val || '').toLowerCase();\n\n        if ( tolower !== val ) {\n          val = tolower;\n\n          Vue.set(data, key, val);\n        }\n\n        fieldErrors.push(...validateDnsLikeTypes(val, fieldType, displayKey, this.$rootGetters, fieldErrors));\n      }\n      errors.push(...fieldErrors);\n    }\n\n    return uniq([...errors, ...this.customValidationErrors(data)]);\n  }\n\n  get ownersByType() {\n    const ownerReferences = this.metadata?.ownerReferences || [];\n    const ownersByType = {};\n\n    ownerReferences.forEach((owner) => {\n      if (!ownersByType[owner.kind]) {\n        ownersByType[owner.kind] = [owner];\n      } else {\n        ownersByType[owner.kind].push(owner);\n      }\n    });\n\n    return ownersByType;\n  }\n\n  get owners() {\n    const owners = [];\n\n    for ( const kind in this.ownersByType) {\n      const schema = this.$rootGetters['cluster/schema'](kind);\n\n      if (schema) {\n        const type = schema.id;\n        const allOfResourceType = this.$rootGetters['cluster/all']( type );\n\n        this.ownersByType[kind].forEach((resource, idx) => {\n          const resourceInstance = allOfResourceType.find((resourceByType) => resourceByType?.metadata?.uid === resource.uid);\n\n          if (resourceInstance) {\n            owners.push(resourceInstance);\n          }\n        });\n      }\n    }\n\n    return owners;\n  }\n\n  get details() {\n    return this._details;\n  }\n\n  get _details() {\n    const details = [];\n\n    if (this.owners?.length > 0) {\n      details.push({\n        label:     this.t('resourceDetail.detailTop.ownerReferences', { count: this.owners.length }),\n        formatter: 'ListLinkDetail',\n        content:   this.owners.map((owner) => ({\n          key:   owner.id,\n          row:   owner,\n          col:   {},\n          value: owner.metadata.name\n        }))\n      });\n    }\n\n    if (get(this, 'metadata.deletionTimestamp')) {\n      details.push({\n        label:         this.t('resourceDetail.detailTop.deleted'),\n        formatter:     'LiveDate',\n        formatterOpts: { addSuffix: true },\n        content:       get(this, 'metadata.deletionTimestamp')\n      });\n    }\n\n    return details;\n  }\n\n  get t() {\n    return this.$rootGetters['i18n/t'];\n  }\n\n  // Returns array of MODELS that own this resource (async, network call)\n  findOwners() {\n    return this._getRelationship('owner', 'from');\n  }\n\n  // Returns array of {type, namespace, id} objects that own this resource (sync)\n  getOwners() {\n    return this._getRelationship('owner', 'from');\n  }\n\n  findOwned() {\n    return this._findRelationship('owner', 'to');\n  }\n\n  _relationshipsFor(rel, direction) {\n    const out = { selectors: [], ids: [] };\n\n    if ( !this.metadata?.relationships?.length ) {\n      return out;\n    }\n\n    for ( const r of this.metadata.relationships ) {\n      if ( rel !== 'any' && r.rel !== rel ) {\n        continue;\n      }\n\n      if ( !r[`${ direction }Type`] ) {\n        continue;\n      }\n\n      if ( r.selector ) {\n        addObjects(out.selectors, {\n          type:      r.toType,\n          namespace: r.toNamespace,\n          selector:  r.selector\n        });\n      } else {\n        const type = r[`${ direction }Type`];\n        let namespace = r[`${ direction }Namespace`];\n        let name = r[`${ direction }Id`];\n\n        if ( !namespace && name.includes('/') ) {\n          const idx = name.indexOf('/');\n\n          namespace = name.substr(0, idx);\n          name = name.substr(idx + 1);\n        }\n\n        const id = (namespace ? `${ namespace }/` : '') + name;\n\n        addObject(out.ids, {\n          type,\n          namespace,\n          name,\n          id,\n        });\n      }\n    }\n\n    return out;\n  }\n\n  _getRelationship(rel, direction) {\n    const res = this._relationshipsFor(rel, direction);\n\n    if ( res.selectors?.length ) {\n      // eslint-disable-next-line no-console\n      console.warn('Sync request for a relationship that is a selector');\n    }\n\n    return res.ids || [];\n  }\n\n  async _findRelationship(rel, direction) {\n    const { selectors, ids } = this._relationshipsFor(rel, direction);\n    const out = [];\n\n    for ( const sel of selectors ) {\n      const matching = await this.$dispatch('findMatching', sel);\n\n      addObjects(out, matching.data);\n    }\n\n    for ( const obj of ids ) {\n      const { type, id } = obj;\n      let matching = this.$getters['byId'](type, id);\n\n      if ( !matching ) {\n        try {\n          matching = await this.$dispatch('find', { type, id });\n        } catch {\n        }\n      }\n      if (matching) {\n        addObject(out, matching);\n      }\n    }\n\n    return out;\n  }\n\n  get shortId() {\n    const splitId = this.id.split('/');\n\n    return splitId.length > 1 ? splitId[1] : splitId[0];\n  }\n\n  toJSON() {\n    const out = {};\n    const keys = Object.keys(this);\n\n    for ( const k of keys ) {\n      if ( this[k]?.toJSON ) {\n        out[k] = this[k].toJSON();\n      } else {\n        out[k] = clone(this[k]);\n      }\n    }\n\n    return out;\n  }\n\n  /**\n   * Allow models to override the object that is sent when saving this resource\n   */\n  toSave() {\n    return undefined;\n  }\n\n  get creationTimestamp() {\n    return this.metadata?.creationTimestamp;\n  }\n\n  /**\n   * Allows model to specify JSON Paths that should be folded in the YAML editor by default\n   */\n  get yamlFolding() {\n    return [];\n  }\n}\n"],"mappings":"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","ignoreList":[]}]}