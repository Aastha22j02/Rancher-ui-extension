{"remainingRequest":"/home/ubuntu/susecon-2024-ext-demo/node_modules/babel-loader/lib/index.js??ref--16-1!/home/ubuntu/susecon-2024-ext-demo/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/ubuntu/susecon-2024-ext-demo/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/components/HarvesterServiceAddOnConfig.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/components/HarvesterServiceAddOnConfig.vue","mtime":1725271280091},{"path":"/home/ubuntu/susecon-2024-ext-demo/babel.config.js","mtime":1725268750245},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/babel-loader/lib/index.js","mtime":1725271298942},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1725271300920}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKZnVuY3Rpb24gb3duS2V5cyhlLCByKSB7IHZhciB0ID0gT2JqZWN0LmtleXMoZSk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBvID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKTsgciAmJiAobyA9IG8uZmlsdGVyKGZ1bmN0aW9uIChyKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsIHIpLmVudW1lcmFibGU7IH0pKSwgdC5wdXNoLmFwcGx5KHQsIG8pOyB9IHJldHVybiB0OyB9CmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQoZSkgeyBmb3IgKHZhciByID0gMTsgciA8IGFyZ3VtZW50cy5sZW5ndGg7IHIrKykgeyB2YXIgdCA9IG51bGwgIT0gYXJndW1lbnRzW3JdID8gYXJndW1lbnRzW3JdIDoge307IHIgJSAyID8gb3duS2V5cyhPYmplY3QodCksICEwKS5mb3JFYWNoKGZ1bmN0aW9uIChyKSB7IF9kZWZpbmVQcm9wZXJ0eShlLCByLCB0W3JdKTsgfSkgOiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGUsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHQpKSA6IG93bktleXMoT2JqZWN0KHQpKS5mb3JFYWNoKGZ1bmN0aW9uIChyKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCByLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsIHIpKTsgfSk7IH0gcmV0dXJuIGU7IH0KaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNsaWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3JzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucHJvbWlzZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5lbmRzLXdpdGguanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3RhcnRzLXdpdGguanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiL2hvbWUvdWJ1bnR1L3N1c2Vjb24tMjAyNC1leHQtZGVtby9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvcmVnZW5lcmF0b3IvaW5kZXguanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICd2dWV4JzsKaW1wb3J0IHNlbXZlciBmcm9tICdzZW12ZXInOwppbXBvcnQgTGFiZWxlZFNlbGVjdCBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9mb3JtL0xhYmVsZWRTZWxlY3QnOwppbXBvcnQgeyBfQ1JFQVRFIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy9xdWVyeS1wYXJhbXMnOwppbXBvcnQgeyBnZXQgfSBmcm9tICdAc2hlbGwvdXRpbHMvb2JqZWN0JzsKaW1wb3J0IHsgSENJIGFzIEhDSV9MQUJFTFNfQU5OT1RBVElPTlMgfSBmcm9tICdAc2hlbGwvY29uZmlnL2xhYmVscy1hbm5vdGF0aW9ucyc7CmltcG9ydCB7IFNFUlZJQ0UgfSBmcm9tICdAc2hlbGwvY29uZmlnL3R5cGVzJzsKaW1wb3J0IHsgYWxsSGFzaCB9IGZyb20gJ0BzaGVsbC91dGlscy9wcm9taXNlJzsKdmFyIEhBUlZFU1RFUl9BRERfT05fQ09ORklHID0gW3sKICB2YXJpYWJsZU5hbWU6ICdpcGFtJywKICBrZXk6IEhDSV9MQUJFTFNfQU5OT1RBVElPTlMuQ0xPVURfUFJPVklERVJfSVBBTSwKICBkZWZhdWx0OiAnZGhjcCcKfSwgewogIHZhcmlhYmxlTmFtZTogJ3NoYXJlZFNlcnZpY2UnLAogIGtleTogSENJX0xBQkVMU19BTk5PVEFUSU9OUy5QUklNQVJZX1NFUlZJQ0UsCiAgZGVmYXVsdDogJycKfV07CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBMYWJlbGVkU2VsZWN0OiBMYWJlbGVkU2VsZWN0CiAgfSwKICBwcm9wczogewogICAgbW9kZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6IF9DUkVBVEUKICAgIH0sCiAgICB2YWx1ZTogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIGRlZmF1bHQ6IGZ1bmN0aW9uIF9kZWZhdWx0KCkgewogICAgICAgIHJldHVybiB7fTsKICAgICAgfQogICAgfSwKICAgIHJlZ2lzdGVyQmVmb3JlSG9vazogewogICAgICB0eXBlOiBGdW5jdGlvbiwKICAgICAgZGVmYXVsdDogbnVsbAogICAgfQogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIGlmICh0aGlzLnJlZ2lzdGVyQmVmb3JlSG9vaykgewogICAgICB0aGlzLnJlZ2lzdGVyQmVmb3JlSG9vayh0aGlzLndpbGxTYXZlLCAnaGFydmVzdGVyV2lsbFNhdmUnKTsKICAgIH0KICB9LAogIGZldGNoOiBmdW5jdGlvbiBmZXRjaCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgdmFyIGluU3RvcmUsIGhhc2gsIHJlczsKICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIGluU3RvcmUgPSBfdGhpcy4kc3RvcmUuZ2V0dGVyc1snY3VycmVudFByb2R1Y3QnXS5pblN0b3JlOwogICAgICAgICAgICBoYXNoID0gewogICAgICAgICAgICAgIHJrZTJWZXJzaW9uczogX3RoaXMuJHN0b3JlLmRpc3BhdGNoKCdtYW5hZ2VtZW50L3JlcXVlc3QnLCB7CiAgICAgICAgICAgICAgICB1cmw6ICcvdjEtcmtlMi1yZWxlYXNlL3JlbGVhc2VzJwogICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgIHNlcnZpY2VzOiBfdGhpcy4kc3RvcmUuZGlzcGF0Y2goIiIuY29uY2F0KGluU3RvcmUsICIvZmluZEFsbCIpLCB7CiAgICAgICAgICAgICAgICB0eXBlOiBTRVJWSUNFCiAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfTsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ7CiAgICAgICAgICAgIHJldHVybiBhbGxIYXNoKGhhc2gpOwogICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICByZXMgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICBfdGhpcy5ya2UyVmVyc2lvbnMgPSByZXMucmtlMlZlcnNpb25zOwogICAgICAgICAgY2FzZSA2OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUpOwogICAgfSkpKCk7CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgdmFyIF90aGlzMiA9IHRoaXM7CiAgICB2YXIgaGFydmVzdGVyQWRkT25Db25maWcgPSB7fTsKICAgIEhBUlZFU1RFUl9BRERfT05fQ09ORklHLmZvckVhY2goZnVuY3Rpb24gKGMpIHsKICAgICAgaGFydmVzdGVyQWRkT25Db25maWdbYy52YXJpYWJsZU5hbWVdID0gX3RoaXMyLnZhbHVlLm1ldGFkYXRhLmFubm90YXRpb25zW2Mua2V5XSB8fCBjLmRlZmF1bHQ7CiAgICB9KTsKICAgIHZhciBzaG93U2hhcmVJUDsKICAgIGlmICh0aGlzLnZhbHVlLm1ldGFkYXRhLmFubm90YXRpb25zW0hDSV9MQUJFTFNfQU5OT1RBVElPTlMuUFJJTUFSWV9TRVJWSUNFXSkgewogICAgICBzaG93U2hhcmVJUCA9IHRydWU7CiAgICB9IGVsc2UgewogICAgICBzaG93U2hhcmVJUCA9IGZhbHNlOwogICAgfQogICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgaGFydmVzdGVyQWRkT25Db25maWcpLCB7fSwgewogICAgICBzaG93U2hhcmVJUDogc2hvd1NoYXJlSVAsCiAgICAgIHJrZTJWZXJzaW9uczoge30KICAgIH0pOwogIH0sCiAgY29tcHV0ZWQ6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgbWFwR2V0dGVycyhbJ2FsbG93ZWROYW1lc3BhY2VzJywgJ25hbWVzcGFjZXMnLCAnY3VycmVudENsdXN0ZXInXSkpLCB7fSwgewogICAgaXBhbU9wdGlvbnM6IGZ1bmN0aW9uIGlwYW1PcHRpb25zKCkgewogICAgICByZXR1cm4gW3sKICAgICAgICBsYWJlbDogJ0RIQ1AnLAogICAgICAgIHZhbHVlOiAnZGhjcCcKICAgICAgfSwgewogICAgICAgIGxhYmVsOiAnUG9vbCcsCiAgICAgICAgdmFsdWU6ICdwb29sJwogICAgICB9XTsKICAgIH0sCiAgICBwb3J0T3B0aW9uczogZnVuY3Rpb24gcG9ydE9wdGlvbnMoKSB7CiAgICAgIHZhciBfdGhpcyR2YWx1ZTsKICAgICAgdmFyIHBvcnRzID0gKChfdGhpcyR2YWx1ZSA9IHRoaXMudmFsdWUpID09PSBudWxsIHx8IF90aGlzJHZhbHVlID09PSB2b2lkIDAgfHwgKF90aGlzJHZhbHVlID0gX3RoaXMkdmFsdWUuc3BlYykgPT09IG51bGwgfHwgX3RoaXMkdmFsdWUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJHZhbHVlLnBvcnRzKSB8fCBbXTsKICAgICAgcmV0dXJuIHBvcnRzLmZpbHRlcihmdW5jdGlvbiAocCkgewogICAgICAgIHJldHVybiBwLnBvcnQgJiYgcC5wcm90b2NvbCA9PT0gJ1RDUCc7CiAgICAgIH0pLm1hcChmdW5jdGlvbiAocCkgewogICAgICAgIHJldHVybiBwLnBvcnQ7CiAgICAgIH0pIHx8IFtdOwogICAgfSwKICAgIHNlcnZpY2VPcHRpb25zOiBmdW5jdGlvbiBzZXJ2aWNlT3B0aW9ucygpIHsKICAgICAgdmFyIGluU3RvcmUgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzWydjdXJyZW50UHJvZHVjdCddLmluU3RvcmU7CiAgICAgIHZhciBzZXJ2aWNlcyA9IHRoaXMuJHN0b3JlLmdldHRlcnNbIiIuY29uY2F0KGluU3RvcmUsICIvYWxsIildKFNFUlZJQ0UpOwogICAgICB2YXIgbmFtZXNwYWNlcyA9IHRoaXMubmFtZXNwYWNlcygpOwogICAgICB2YXIgb3V0ID0gc2VydmljZXMuZmlsdGVyKGZ1bmN0aW9uIChzKSB7CiAgICAgICAgdmFyIF9zJHN0YXR1cywgX3MkbWV0YWRhdGEsIF9zJHNwZWM7CiAgICAgICAgdmFyIGluZ3Jlc3MgPSAocyA9PT0gbnVsbCB8fCBzID09PSB2b2lkIDAgfHwgKF9zJHN0YXR1cyA9IHMuc3RhdHVzKSA9PT0gbnVsbCB8fCBfcyRzdGF0dXMgPT09IHZvaWQgMCB8fCAoX3Mkc3RhdHVzID0gX3Mkc3RhdHVzLmxvYWRCYWxhbmNlcikgPT09IG51bGwgfHwgX3Mkc3RhdHVzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcyRzdGF0dXMuaW5ncmVzcykgfHwgW107CiAgICAgICAgcmV0dXJuIGluZ3Jlc3MubGVuZ3RoID4gMCAmJiAhKHMgIT09IG51bGwgJiYgcyAhPT0gdm9pZCAwICYmIChfcyRtZXRhZGF0YSA9IHMubWV0YWRhdGEpICE9PSBudWxsICYmIF9zJG1ldGFkYXRhICE9PSB2b2lkIDAgJiYgKF9zJG1ldGFkYXRhID0gX3MkbWV0YWRhdGEuYW5ub3RhdGlvbnMpICE9PSBudWxsICYmIF9zJG1ldGFkYXRhICE9PSB2b2lkIDAgJiYgX3MkbWV0YWRhdGFbJ2Nsb3VkcHJvdmlkZXIuaGFydmVzdGVyaGNpLmlvL3ByaW1hcnktc2VydmljZSddKSAmJiAoKF9zJHNwZWMgPSBzLnNwZWMpID09PSBudWxsIHx8IF9zJHNwZWMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9zJHNwZWMudHlwZSkgPT09ICdMb2FkQmFsYW5jZXInICYmIG5hbWVzcGFjZXNbcy5tZXRhZGF0YS5uYW1lc3BhY2VdOwogICAgICB9KTsKICAgICAgcmV0dXJuIG91dC5tYXAoZnVuY3Rpb24gKHMpIHsKICAgICAgICByZXR1cm4gcy5pZDsKICAgICAgfSk7CiAgICB9LAogICAgc2hhcmVJUEVuYWJsZWQ6IGZ1bmN0aW9uIHNoYXJlSVBFbmFibGVkKCkgewogICAgICB2YXIga3ViZXJuZXRlc1ZlcnNpb24gPSB0aGlzLmN1cnJlbnRDbHVzdGVyLmt1YmVybmV0ZXNWZXJzaW9uIHx8ICcnOwogICAgICB2YXIga3ViZXJuZXRlc1ZlcnNpb25FeHRlbnNpb24gPSB0aGlzLmN1cnJlbnRDbHVzdGVyLmt1YmVybmV0ZXNWZXJzaW9uRXh0ZW5zaW9uOwogICAgICBpZiAoa3ViZXJuZXRlc1ZlcnNpb25FeHRlbnNpb24uc3RhcnRzV2l0aCgnK3JrZTInKSkgewogICAgICAgIHZhciBfdGhpcyRya2UyVmVyc2lvbnMsIF9jaGFydHMkaGFydmVzdGVyQ2xvOwogICAgICAgIHZhciBjaGFydHMgPSAoKCgoX3RoaXMkcmtlMlZlcnNpb25zID0gdGhpcy5ya2UyVmVyc2lvbnMpID09PSBudWxsIHx8IF90aGlzJHJrZTJWZXJzaW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkcmtlMlZlcnNpb25zLmRhdGEpIHx8IFtdKS5maW5kKGZ1bmN0aW9uICh2KSB7CiAgICAgICAgICByZXR1cm4gdi5pZCA9PT0ga3ViZXJuZXRlc1ZlcnNpb247CiAgICAgICAgfSkgfHwge30pLmNoYXJ0czsKICAgICAgICB2YXIgY2NtVmVyc2lvbiA9IChjaGFydHMgPT09IG51bGwgfHwgY2hhcnRzID09PSB2b2lkIDAgfHwgKF9jaGFydHMkaGFydmVzdGVyQ2xvID0gY2hhcnRzWydoYXJ2ZXN0ZXItY2xvdWQtcHJvdmlkZXInXSkgPT09IG51bGwgfHwgX2NoYXJ0cyRoYXJ2ZXN0ZXJDbG8gPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jaGFydHMkaGFydmVzdGVyQ2xvLnZlcnNpb24pIHx8ICcnOwogICAgICAgIGlmIChjY21WZXJzaW9uLmVuZHNXaXRoKCcwMCcpKSB7CiAgICAgICAgICBjY21WZXJzaW9uID0gY2NtVmVyc2lvbi5zbGljZSgwLCAtMik7CiAgICAgICAgfQogICAgICAgIHJldHVybiBzZW12ZXIuc2F0aXNmaWVzKGNjbVZlcnNpb24sICc+PTAuMi4wJyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KICAgIH0KICB9KSwKICBtZXRob2RzOiB7CiAgICB3aWxsU2F2ZTogZnVuY3Rpb24gd2lsbFNhdmUoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwogICAgICB2YXIgZXJyb3JzID0gW107CiAgICAgIGlmICh0aGlzLnNob3dTaGFyZUlQKSB7CiAgICAgICAgaWYgKCF0aGlzLnNoYXJlZFNlcnZpY2UpIHsKICAgICAgICAgIGVycm9ycy5wdXNoKHRoaXMudCgndmFsaWRhdGlvbi5yZXF1aXJlZCcsIHsKICAgICAgICAgICAga2V5OiB0aGlzLnQoJ3NlcnZpY2VzUGFnZS5oYXJ2ZXN0ZXIuc2hhcmVJUC5sYWJlbCcpCiAgICAgICAgICB9LCB0cnVlKSk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmIChlcnJvcnMubGVuZ3RoID4gMCkgewogICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcnMpOwogICAgICB9CiAgICAgIEhBUlZFU1RFUl9BRERfT05fQ09ORklHLmZvckVhY2goZnVuY3Rpb24gKGMpIHsKICAgICAgICBfdGhpczMudmFsdWUubWV0YWRhdGEuYW5ub3RhdGlvbnNbYy5rZXldID0gU3RyaW5nKGdldChfdGhpczMsIGMudmFyaWFibGVOYW1lKSk7CiAgICAgIH0pOwogICAgICBpZiAodGhpcy5zaG93U2hhcmVJUCkgewogICAgICAgIGRlbGV0ZSB0aGlzLnZhbHVlLm1ldGFkYXRhLmFubm90YXRpb25zW0hDSV9MQUJFTFNfQU5OT1RBVElPTlMuQ0xPVURfUFJPVklERVJfSVBBTV07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZGVsZXRlIHRoaXMudmFsdWUubWV0YWRhdGEuYW5ub3RhdGlvbnNbSENJX0xBQkVMU19BTk5PVEFUSU9OUy5QUklNQVJZX1NFUlZJQ0VdOwogICAgICB9CiAgICB9LAogICAgdG9nZ2xlU2hhcmVJUDogZnVuY3Rpb24gdG9nZ2xlU2hhcmVJUCgpIHsKICAgICAgdGhpcy5zaG93U2hhcmVJUCA9ICF0aGlzLnNob3dTaGFyZUlQOwogICAgfQogIH0KfTs="},{"version":3,"names":["mapGetters","semver","LabeledSelect","_CREATE","get","HCI","HCI_LABELS_ANNOTATIONS","SERVICE","allHash","HARVESTER_ADD_ON_CONFIG","variableName","key","CLOUD_PROVIDER_IPAM","default","PRIMARY_SERVICE","components","props","mode","type","String","value","Object","_default","registerBeforeHook","Function","created","willSave","fetch","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","inStore","hash","res","wrap","_callee$","_context","prev","next","$store","getters","rke2Versions","dispatch","url","services","concat","sent","stop","data","_this2","harvesterAddOnConfig","forEach","c","metadata","annotations","showShareIP","_objectSpread","computed","ipamOptions","label","portOptions","_this$value","ports","spec","filter","p","port","protocol","map","serviceOptions","namespaces","out","s","_s$status","_s$metadata","_s$spec","ingress","status","loadBalancer","length","namespace","id","shareIPEnabled","kubernetesVersion","currentCluster","kubernetesVersionExtension","startsWith","_this$rke2Versions","_charts$harvesterClo","charts","find","v","ccmVersion","version","endsWith","slice","satisfies","methods","_this3","errors","sharedService","push","t","Promise","reject","toggleShareIP"],"sources":["node_modules/@rancher/shell/components/HarvesterServiceAddOnConfig.vue"],"sourcesContent":["<script>\nimport { mapGetters } from 'vuex';\nimport semver from 'semver';\n\nimport LabeledSelect from '@shell/components/form/LabeledSelect';\nimport { _CREATE } from '@shell/config/query-params';\nimport { get } from '@shell/utils/object';\nimport { HCI as HCI_LABELS_ANNOTATIONS } from '@shell/config/labels-annotations';\nimport { SERVICE } from '@shell/config/types';\nimport { allHash } from '@shell/utils/promise';\n\nconst HARVESTER_ADD_ON_CONFIG = [{\n  variableName: 'ipam',\n  key:          HCI_LABELS_ANNOTATIONS.CLOUD_PROVIDER_IPAM,\n  default:      'dhcp'\n}, {\n  variableName: 'sharedService',\n  key:          HCI_LABELS_ANNOTATIONS.PRIMARY_SERVICE,\n  default:      ''\n}];\n\nexport default {\n  components: { LabeledSelect },\n\n  props: {\n    mode: {\n      type:    String,\n      default: _CREATE,\n    },\n\n    value: {\n      type:    Object,\n      default: () => {\n        return {};\n      }\n    },\n\n    registerBeforeHook: {\n      type:    Function,\n      default: null\n    },\n  },\n\n  created() {\n    if (this.registerBeforeHook) {\n      this.registerBeforeHook(this.willSave, 'harvesterWillSave');\n    }\n  },\n\n  async fetch() {\n    const inStore = this.$store.getters['currentProduct'].inStore;\n\n    const hash = {\n      rke2Versions: this.$store.dispatch('management/request', { url: '/v1-rke2-release/releases' }),\n      services:     this.$store.dispatch(`${ inStore }/findAll`, { type: SERVICE }),\n    };\n\n    const res = await allHash(hash);\n\n    this.rke2Versions = res.rke2Versions;\n  },\n\n  data() {\n    const harvesterAddOnConfig = {};\n\n    HARVESTER_ADD_ON_CONFIG.forEach((c) => {\n      harvesterAddOnConfig[c.variableName] = this.value.metadata.annotations[c.key] || c.default;\n    });\n\n    let showShareIP;\n\n    if (this.value.metadata.annotations[HCI_LABELS_ANNOTATIONS.PRIMARY_SERVICE]) {\n      showShareIP = true;\n    } else {\n      showShareIP = false;\n    }\n\n    return {\n      ...harvesterAddOnConfig,\n      showShareIP,\n      rke2Versions: {},\n    };\n  },\n\n  computed: {\n    ...mapGetters(['allowedNamespaces', 'namespaces', 'currentCluster']),\n\n    ipamOptions() {\n      return [{\n        label: 'DHCP',\n        value: 'dhcp',\n      }, {\n        label: 'Pool',\n        value: 'pool',\n      }];\n    },\n\n    portOptions() {\n      const ports = this.value?.spec?.ports || [];\n\n      return ports.filter((p) => p.port && p.protocol === 'TCP').map((p) => p.port) || [];\n    },\n\n    serviceOptions() {\n      const inStore = this.$store.getters['currentProduct'].inStore;\n      const services = this.$store.getters[`${ inStore }/all`](SERVICE);\n\n      const namespaces = this.namespaces();\n\n      const out = services.filter((s) => {\n        const ingress = s?.status?.loadBalancer?.ingress || [];\n\n        return ingress.length > 0 &&\n                !s?.metadata?.annotations?.['cloudprovider.harvesterhci.io/primary-service'] &&\n                s.spec?.type === 'LoadBalancer' &&\n                namespaces[s.metadata.namespace];\n      });\n\n      return out.map((s) => s.id);\n    },\n\n    shareIPEnabled() {\n      const kubernetesVersion = this.currentCluster.kubernetesVersion || '';\n      const kubernetesVersionExtension = this.currentCluster.kubernetesVersionExtension;\n\n      if (kubernetesVersionExtension.startsWith('+rke2')) {\n        const charts = ((this.rke2Versions?.data || []).find((v) => v.id === kubernetesVersion) || {}).charts;\n        let ccmVersion = charts?.['harvester-cloud-provider']?.version || '';\n\n        if (ccmVersion.endsWith('00')) {\n          ccmVersion = ccmVersion.slice(0, -2);\n        }\n\n        return semver.satisfies(ccmVersion, '>=0.2.0');\n      } else {\n        return true;\n      }\n    },\n  },\n\n  methods: {\n    willSave() {\n      const errors = [];\n\n      if (this.showShareIP) {\n        if (!this.sharedService) {\n          errors.push(this.t('validation.required', { key: this.t('servicesPage.harvester.shareIP.label') }, true));\n        }\n      }\n\n      if (errors.length > 0) {\n        return Promise.reject(errors);\n      }\n\n      HARVESTER_ADD_ON_CONFIG.forEach((c) => {\n        this.value.metadata.annotations[c.key] = String(get(this, c.variableName));\n      });\n\n      if (this.showShareIP) {\n        delete this.value.metadata.annotations[HCI_LABELS_ANNOTATIONS.CLOUD_PROVIDER_IPAM];\n      } else {\n        delete this.value.metadata.annotations[HCI_LABELS_ANNOTATIONS.PRIMARY_SERVICE];\n      }\n    },\n\n    toggleShareIP() {\n      this.showShareIP = !this.showShareIP;\n    },\n  },\n};\n</script>\n\n<template>\n  <div>\n    <div class=\"row mt-30\">\n      <div class=\"col span-6\">\n        <LabeledSelect\n          v-if=\"showShareIP\"\n          v-model=\"sharedService\"\n          :mode=\"mode\"\n          :options=\"serviceOptions\"\n          :label=\"t('servicesPage.harvester.shareIP.label')\"\n          :disabled=\"mode === 'edit'\"\n        />\n        <LabeledSelect\n          v-else\n          v-model=\"ipam\"\n          :mode=\"mode\"\n          :options=\"ipamOptions\"\n          :label=\"t('servicesPage.harvester.ipam.label')\"\n          :disabled=\"mode === 'edit'\"\n        />\n        <div\n          v-if=\"mode === 'create'\"\n          class=\"mt-10\"\n        >\n          <a\n            role=\"button\"\n            @click=\"toggleShareIP\"\n          >\n            {{ showShareIP ? t('servicesPage.harvester.useIpam.label') : t('servicesPage.harvester.useShareIP.label') }}\n          </a>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n"],"mappings":"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","ignoreList":[]}]}