{"remainingRequest":"/home/ubuntu/susecon-2024-ext-demo/node_modules/babel-loader/lib/index.js??ref--16-1!/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/utils/socket.js","dependencies":[{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/utils/socket.js","mtime":1725271280091},{"path":"/home/ubuntu/susecon-2024-ext-demo/babel.config.js","mtime":1725268750245},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/babel-loader/lib/index.js","mtime":1725271298942}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3JzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWZsZWN0LmNvbnN0cnVjdC5qcyI7CmltcG9ydCBfc2xpY2VkVG9BcnJheSBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9zbGljZWRUb0FycmF5IjsKaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eSI7CmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2siOwppbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzIjsKaW1wb3J0IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4iOwppbXBvcnQgX2dldFByb3RvdHlwZU9mIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2dldFByb3RvdHlwZU9mIjsKaW1wb3J0IF9pbmhlcml0cyBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9pbmhlcml0cyI7CmZ1bmN0aW9uIG93bktleXMoZSwgcikgeyB2YXIgdCA9IE9iamVjdC5rZXlzKGUpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgbyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7IHIgJiYgKG8gPSBvLmZpbHRlcihmdW5jdGlvbiAocikgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLCByKS5lbnVtZXJhYmxlOyB9KSksIHQucHVzaC5hcHBseSh0LCBvKTsgfSByZXR1cm4gdDsgfQpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKGUpIHsgZm9yICh2YXIgciA9IDE7IHIgPCBhcmd1bWVudHMubGVuZ3RoOyByKyspIHsgdmFyIHQgPSBudWxsICE9IGFyZ3VtZW50c1tyXSA/IGFyZ3VtZW50c1tyXSA6IHt9OyByICUgMiA/IG93bktleXMoT2JqZWN0KHQpLCAhMCkuZm9yRWFjaChmdW5jdGlvbiAocikgeyBfZGVmaW5lUHJvcGVydHkoZSwgciwgdFtyXSk7IH0pIDogT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMgPyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyh0KSkgOiBvd25LZXlzKE9iamVjdCh0KSkuZm9yRWFjaChmdW5jdGlvbiAocikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgciwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LCByKSk7IH0pOyB9IHJldHVybiBlOyB9CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuam9pbi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5hc3NpZ24uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZW50cmllcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5wcm9taXNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLm1hdGNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3RhcnRzLXdpdGguanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKZnVuY3Rpb24gX2NhbGxTdXBlcih0LCBvLCBlKSB7IHJldHVybiBvID0gX2dldFByb3RvdHlwZU9mKG8pLCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0LCBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCkgPyBSZWZsZWN0LmNvbnN0cnVjdChvLCBlIHx8IFtdLCBfZ2V0UHJvdG90eXBlT2YodCkuY29uc3RydWN0b3IpIDogby5hcHBseSh0LCBlKSk7IH0KZnVuY3Rpb24gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpIHsgdHJ5IHsgdmFyIHQgPSAhQm9vbGVhbi5wcm90b3R5cGUudmFsdWVPZi5jYWxsKFJlZmxlY3QuY29uc3RydWN0KEJvb2xlYW4sIFtdLCBmdW5jdGlvbiAoKSB7fSkpOyB9IGNhdGNoICh0KSB7fSByZXR1cm4gKF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QgPSBmdW5jdGlvbiBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCkgeyByZXR1cm4gISF0OyB9KSgpOyB9CmltcG9ydCB7IEV2ZW50VGFyZ2V0IH0gZnJvbSAnZXZlbnQtdGFyZ2V0LXNoaW0nOwppbXBvcnQgeyBpc1NhZmFyaSB9IGZyb20gJ0BzaGVsbC91dGlscy9wbGF0Zm9ybSc7CmltcG9ydCB7IGFkZFBhcmFtIH0gZnJvbSAnQHNoZWxsL3V0aWxzL3VybCc7CnZhciBzb2NrSWQgPSAxOwp2YXIgd2FybmluZ1Nob3duID0gZmFsc2U7CnZhciB3YXNDb25uZWN0ZWQgPSBmYWxzZTsKdmFyIElOU0VDVVJFID0gJ3dzOi8vJzsKdmFyIFNFQ1VSRSA9ICd3c3M6Ly8nOwp2YXIgU1RBVEVfRElTQ09OTkVDVEVEID0gJ2Rpc2Nvbm5lY3RlZCc7CmV4cG9ydCB2YXIgYWRkRXZlbnRMaXN0ZW5lciA9IEV2ZW50VGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXI7CmV4cG9ydCB2YXIgU1RBVEVfQ09OTkVDVElORyA9ICdjb25uZWN0aW5nJzsKZXhwb3J0IHZhciBTVEFURV9DT05ORUNURUQgPSAnY29ubmVjdGVkJzsKdmFyIFNUQVRFX0NMT1NJTkcgPSAnY2xvc2luZyc7CnZhciBTVEFURV9SRUNPTk5FQ1RJTkcgPSAncmVjb25uZWN0aW5nJzsKZXhwb3J0IHZhciBFVkVOVF9DT05ORUNUSU5HID0gU1RBVEVfQ09OTkVDVElORzsKZXhwb3J0IHZhciBFVkVOVF9DT05ORUNURUQgPSBTVEFURV9DT05ORUNURUQ7CmV4cG9ydCB2YXIgRVZFTlRfRElTQ09OTkVDVEVEID0gU1RBVEVfRElTQ09OTkVDVEVEOwpleHBvcnQgdmFyIEVWRU5UX01FU1NBR0UgPSAnbWVzc2FnZSc7CmV4cG9ydCB2YXIgRVZFTlRfRlJBTUVfVElNRU9VVCA9ICdmcmFtZV90aW1lb3V0JzsKZXhwb3J0IHZhciBFVkVOVF9DT05ORUNUX0VSUk9SID0gJ2Nvbm5lY3RfZXJyb3InOwpleHBvcnQgdmFyIEVWRU5UX0RJU0NPTk5FQ1RfRVJST1IgPSAnZGlzY29ubmVjdF9lcnJvcic7CmV4cG9ydCB2YXIgTk9fV0FUQ0ggPSAnTk9fV0FUQ0gnOwpleHBvcnQgdmFyIE5PX1NDSEVNQSA9ICdOT19TQ0hFTUEnOwpleHBvcnQgdmFyIFJFVklTSU9OX1RPT19PTEQgPSAnVE9PX09MRCc7CnZhciBTb2NrZXQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9FdmVudFRhcmdldCkgewogIGZ1bmN0aW9uIFNvY2tldCh1cmwpIHsKICAgIHZhciBfdGhpczsKICAgIHZhciBhdXRvUmVjb25uZWN0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB0cnVlOwogICAgdmFyIGZyYW1lVGltZW91dCA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogbnVsbDsKICAgIHZhciBwcm90b2NvbCA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDogbnVsbDsKICAgIHZhciBtYXhUcmllcyA9IGFyZ3VtZW50cy5sZW5ndGggPiA0ICYmIGFyZ3VtZW50c1s0XSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzRdIDogbnVsbDsKICAgIHZhciBpZEFzVGltZXN0YW1wID0gYXJndW1lbnRzLmxlbmd0aCA+IDUgJiYgYXJndW1lbnRzWzVdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbNV0gOiBmYWxzZTsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTb2NrZXQpOwogICAgX3RoaXMgPSBfY2FsbFN1cGVyKHRoaXMsIFNvY2tldCk7CiAgICBfdGhpcy51cmwgPSB2b2lkIDA7CiAgICBfdGhpcy5hdXRvUmVjb25uZWN0ID0gdHJ1ZTsKICAgIF90aGlzLmZyYW1lVGltZW91dCA9IDM1MDAwOwogICAgX3RoaXMubWV0YWRhdGEgPSB7fTsKICAgIF90aGlzLmhhc0JlZW5PcGVuID0gZmFsc2U7CiAgICBfdGhpcy5oYXNSZWNvbm5lY3RlZCA9IGZhbHNlOwogICAgX3RoaXMucHJvdG9jb2wgPSBudWxsOwogICAgX3RoaXMubWF4VHJpZXMgPSBudWxsOwogICAgX3RoaXMudHJpZXMgPSAwOwogICAgX3RoaXMuaWRBc1RpbWVzdGFtcCA9IGZhbHNlOwogICAgLy8gIlByaXZhdGUiCiAgICBfdGhpcy5zb2NrZXQgPSBudWxsOwogICAgX3RoaXMuc3RhdGUgPSBTVEFURV9ESVNDT05ORUNURUQ7CiAgICBfdGhpcy5mcmFtZXNSZWNlaXZlZCA9IDA7CiAgICBfdGhpcy5mcmFtZVRpbWVyID0gdm9pZCAwOwogICAgX3RoaXMucmVjb25uZWN0VGltZXIgPSB2b2lkIDA7CiAgICBfdGhpcy5kaXNjb25uZWN0Q2FsbEJhY2tzID0gW107CiAgICBfdGhpcy5kaXNjb25uZWN0ZWRBdCA9IDA7CiAgICBfdGhpcy5jbG9zaW5nSWQgPSAwOwogICAgX3RoaXMuYXV0b1JlY29ubmVjdFVybCA9IG51bGw7CiAgICBfdGhpcy5zZXRVcmwodXJsKTsKICAgIF90aGlzLmF1dG9SZWNvbm5lY3QgPSBhdXRvUmVjb25uZWN0OwogICAgX3RoaXMucHJvdG9jb2wgPSBwcm90b2NvbDsKICAgIC8vIG1heFRyaWVzID0gbnVsbCA9PT0gbmV2ZXIgc3RvcCB0cnlpbmcgdG8gcmVjb25uZWN0CiAgICAvLyBhbGxvdyBtYXhUcmllcyB0byBiZSBkZWZpbmVkIG9uIGluZGl2aWR1YWwgc29ja2V0cyBiYyBub3QgYWxsIHdpbGwgY2xlYXJseSB3YXJuIHRoZSB1c2VyIHRoYXQgd2UndmUgc3RvcHBlZCB0cnlpbmcKICAgIF90aGlzLm1heFRyaWVzID0gbWF4VHJpZXM7CiAgICBfdGhpcy5pZEFzVGltZXN0YW1wID0gaWRBc1RpbWVzdGFtcDsKICAgIGlmIChmcmFtZVRpbWVvdXQgIT09IG51bGwpIHsKICAgICAgX3RoaXMuZnJhbWVUaW1lb3V0ID0gZnJhbWVUaW1lb3V0OwogICAgfQogICAgcmV0dXJuIF90aGlzOwogIH0KICBfaW5oZXJpdHMoU29ja2V0LCBfRXZlbnRUYXJnZXQpOwogIHJldHVybiBfY3JlYXRlQ2xhc3MoU29ja2V0LCBbewogICAga2V5OiAic2V0VXJsIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRVcmwodXJsKSB7CiAgICAgIGlmICghdXJsLm1hdGNoKC93c3M/OlwvXC8vKSkgewogICAgICAgIHVybCA9IHNlbGYubG9jYXRpb24ub3JpZ2luLnJlcGxhY2UoL15odHRwLywgJ3dzJykgKyB1cmw7CiAgICAgIH0KICAgICAgaWYgKHNlbGYubG9jYXRpb24ucHJvdG9jb2wgPT09ICdodHRwczonICYmIHVybC5zdGFydHNXaXRoKElOU0VDVVJFKSkgewogICAgICAgIHVybCA9IFNFQ1VSRSArIHVybC5zdWJzdHIoSU5TRUNVUkUubGVuZ3RoKTsKICAgICAgfQogICAgICB0aGlzLnVybCA9IHVybDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjb25uZWN0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjb25uZWN0KCkgewogICAgICB2YXIgbWV0YWRhdGEgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9OwogICAgICBpZiAodGhpcy5zb2NrZXQpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCdTb2NrZXQgcmVmdXNpbmcgdG8gY29ubmVjdCB3aGlsZSBhbm90aGVyIHNvY2tldCBleGlzdHMnKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1jb25zb2xlCgogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBpZiAodGhpcy5zdGF0ZSAhPT0gU1RBVEVfUkVDT05ORUNUSU5HKSB7CiAgICAgICAgdGhpcy5zdGF0ZSA9IFNUQVRFX0NPTk5FQ1RJTkc7CiAgICAgIH0KICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLm1ldGFkYXRhLCBtZXRhZGF0YSk7CiAgICAgIHZhciBpZCA9IHRoaXMuaWRBc1RpbWVzdGFtcCA/IG5ldyBEYXRlKCkuZ2V0VGltZSgpIDogc29ja0lkKys7CiAgICAgIHZhciB1cmwgPSBhZGRQYXJhbSh0aGlzLnVybCwgJ3NvY2tJZCcsIGlkKTsKICAgICAgdGhpcy5fYmFzZUxvZygnY29ubmVjdGluZycsIHsKICAgICAgICBpZDogaWQsCiAgICAgICAgdXJsOiB1cmwucmVwbGFjZSgvXD8uKi8sICcnKQogICAgICB9KTsKICAgICAgdmFyIHNvY2tldDsKICAgICAgdGhpcy50cmllcysrOwogICAgICBpZiAodGhpcy5wcm90b2NvbCkgewogICAgICAgIHNvY2tldCA9IG5ldyBXZWJTb2NrZXQodXJsLCB0aGlzLnByb3RvY29sKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBzb2NrZXQgPSBuZXcgV2ViU29ja2V0KHVybCk7CiAgICAgIH0KICAgICAgc29ja2V0LnNvY2tJZCA9IGlkOwogICAgICBzb2NrZXQubWV0YWRhdGEgPSB0aGlzLm1ldGFkYXRhOwogICAgICBzb2NrZXQub25tZXNzYWdlID0gdGhpcy5fb25tZXNzYWdlLmJpbmQodGhpcyk7CiAgICAgIHNvY2tldC5vbm9wZW4gPSB0aGlzLl9vcGVuZWQuYmluZCh0aGlzKTsKICAgICAgc29ja2V0Lm9uZXJyb3IgPSB0aGlzLl9lcnJvci5iaW5kKHRoaXMpOwogICAgICBzb2NrZXQub25jbG9zZSA9IHRoaXMuX2Nsb3NlZC5iaW5kKHRoaXMpOwogICAgICB0aGlzLnNvY2tldCA9IHNvY2tldDsKICAgICAgdGhpcy5zdGF0ZSA9IFNUQVRFX0NPTk5FQ1RJTkc7CiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoRVZFTlRfQ09OTkVDVElORykpOwogICAgfQogIH0sIHsKICAgIGtleTogInNlbmQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNlbmQoZGF0YSkgewogICAgICBpZiAodGhpcy5zb2NrZXQgJiYgdGhpcy5zdGF0ZSA9PT0gU1RBVEVfQ09OTkVDVEVEKSB7CiAgICAgICAgdGhpcy5zb2NrZXQuc2VuZChkYXRhKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgfSwgewogICAga2V5OiAiZGlzY29ubmVjdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZGlzY29ubmVjdChjYWxsQmFjaykgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKICAgICAgaWYgKGNhbGxCYWNrKSB7CiAgICAgICAgdGhpcy5kaXNjb25uZWN0Q2FsbEJhY2tzLnB1c2goY2FsbEJhY2spOwogICAgICB9CiAgICAgIHZhciBzZWxmID0gdGhpczsKICAgICAgdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgaWYgKF90aGlzMi5zdGF0ZSA9PT0gU1RBVEVfRElTQ09OTkVDVEVEKSB7CiAgICAgICAgICByZXNvbHZlKCk7CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIG9uRXJyb3IoZSkgewogICAgICAgICAgcmVqZWN0KGUpOwogICAgICAgICAgc2VsZi5yZW1vdmVFdmVudExpc3RlbmVyKEVWRU5UX0NPTk5FQ1RfRVJST1IsIG9uRXJyb3IpOwogICAgICAgIH0KICAgICAgICBfdGhpczIuYWRkRXZlbnRMaXN0ZW5lcihFVkVOVF9DT05ORUNUX0VSUk9SLCBvbkVycm9yKTsKICAgICAgICBfdGhpczIuZGlzY29ubmVjdENhbGxCYWNrcy5wdXNoKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIF90aGlzMi5yZW1vdmVFdmVudExpc3RlbmVyKEVWRU5UX0NPTk5FQ1RfRVJST1IsIG9uRXJyb3IpOwogICAgICAgICAgcmVzb2x2ZSgpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgICAgdGhpcy5hdXRvUmVjb25uZWN0ID0gZmFsc2U7CiAgICAgIHRoaXMuX2Nsb3NlKCk7CiAgICAgIHJldHVybiBwcm9taXNlOwogICAgfQogIH0sIHsKICAgIGtleTogInJlY29ubmVjdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVjb25uZWN0KCkgewogICAgICB2YXIgbWV0YWRhdGEgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9OwogICAgICBPYmplY3QuYXNzaWduKHRoaXMubWV0YWRhdGEsIG1ldGFkYXRhKTsKICAgICAgaWYgKHRoaXMuc3RhdGUgPT09IFNUQVRFX0NPTk5FQ1RJTkcpIHsKICAgICAgICB0aGlzLl9sb2coJ0lnbm9yaW5nIHJlY29ubmVjdCBmb3Igc29ja2V0IGluIGNvbm5lY3RpbmcnKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgaWYgKHRoaXMuc29ja2V0KSB7CiAgICAgICAgdGhpcy5fY2xvc2UoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmNvbm5lY3QobWV0YWRhdGEpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0TWV0YWRhdGEiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldE1ldGFkYXRhKCkgewogICAgICBpZiAodGhpcy5zb2NrZXQpIHsKICAgICAgICByZXR1cm4gdGhpcy5zb2NrZXQubWV0YWRhdGE7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHt9OwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0SWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldElkKCkgewogICAgICBpZiAodGhpcy5zb2NrZXQpIHsKICAgICAgICByZXR1cm4gdGhpcy5zb2NrZXQuc29ja0lkOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiAwOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAiaXNDb25uZWN0ZWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGlzQ29ubmVjdGVkKCkgewogICAgICByZXR1cm4gdGhpcy5zdGF0ZSA9PT0gU1RBVEVfQ09OTkVDVEVEOwogICAgfQogIH0sIHsKICAgIGtleTogInNldEF1dG9SZWNvbm5lY3QiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNldEF1dG9SZWNvbm5lY3QoYXV0b1JlY29ubmVjdCkgewogICAgICB0aGlzLmF1dG9SZWNvbm5lY3QgPSBhdXRvUmVjb25uZWN0OwogICAgfQoKICAgIC8qKgogICAgICogU3VwcGx5IGFuIGFzeW5jIGZuIHRoYXQgd2lsbCBwcm92aWRlIGEgbmV3IHVybCB0byByZWNvbm5lY3QgdG8KICAgICAqLwogIH0sIHsKICAgIGtleTogInNldEF1dG9SZWNvbm5lY3RVcmwiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNldEF1dG9SZWNvbm5lY3RVcmwoYXV0b1JlY29ubmVjdFVybCkgewogICAgICB0aGlzLmF1dG9SZWNvbm5lY3RVcmwgPSBhdXRvUmVjb25uZWN0VXJsOwogICAgfQoKICAgIC8vICJQcml2YXRlIgogIH0sIHsKICAgIGtleTogIl9jbG9zZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2Nsb3NlKCkgewogICAgICB2YXIgc29ja2V0ID0gdGhpcy5zb2NrZXQ7CiAgICAgIGlmICghc29ja2V0KSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHRyeSB7CiAgICAgICAgdGhpcy5fbG9nKCdjbG9zaW5nJyk7CiAgICAgICAgdGhpcy5jbG9zaW5nSWQgPSBzb2NrZXQuc29ja0lkOwogICAgICAgIHNvY2tldC5vbm9wZW4gPSBudWxsOwogICAgICAgIHNvY2tldC5vbmVycm9yID0gbnVsbDsKICAgICAgICBzb2NrZXQub25tZXNzYWdlID0gbnVsbDsKICAgICAgICBzb2NrZXQuY2xvc2UoKTsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIHRoaXMuX2xvZygnZXhjZXB0aW9uJywgewogICAgICAgICAgZTogZS50b1N0cmluZygpCiAgICAgICAgfSk7CiAgICAgICAgLy8gQ29udGludWUgYW55d2F5Li4uCiAgICAgIH0KICAgICAgdGhpcy5zdGF0ZSA9IFNUQVRFX0NMT1NJTkc7CiAgICB9CiAgfSwgewogICAga2V5OiAiX29wZW5lZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX29wZW5lZCgpIHsKICAgICAgdGhpcy5fbG9nKCdvcGVuZWQnKTsKICAgICAgdmFyIG5vdyA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpOwogICAgICB2YXIgYXRUaW1lID0gdGhpcy5kaXNjb25uZWN0ZWRBdDsKICAgICAgdmFyIGFmdGVyTWlsbGlzZWNvbmRzID0gMDsKICAgICAgaWYgKGF0VGltZSkgewogICAgICAgIGFmdGVyTWlsbGlzZWNvbmRzID0gbm93IC0gYXRUaW1lOwogICAgICB9CiAgICAgIGlmICh0aGlzLmhhc0JlZW5PcGVuKSB7CiAgICAgICAgdGhpcy5oYXNSZWNvbm5lY3RlZCA9IHRydWU7CiAgICAgIH0KICAgICAgdGhpcy5oYXNCZWVuT3BlbiA9IHRydWU7CiAgICAgIHRoaXMuc3RhdGUgPSBTVEFURV9DT05ORUNURUQ7CiAgICAgIHRoaXMuZnJhbWVzUmVjZWl2ZWQgPSAwOwogICAgICB0aGlzLmRpc2Nvbm5lY3RlZEF0ID0gMDsKICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudChFVkVOVF9DT05ORUNURUQsIHsKICAgICAgICBkZXRhaWw6IHsKICAgICAgICAgIHRyaWVzOiB0aGlzLnRyaWVzLAogICAgICAgICAgYWZ0ZXJNaWxsaXNlY29uZHM6IGFmdGVyTWlsbGlzZWNvbmRzCiAgICAgICAgfQogICAgICB9KSk7CiAgICAgIHRoaXMudHJpZXMgPSAwOwogICAgICB0aGlzLl9yZXNldFdhdGNoZG9nKCk7CiAgICAgIGNsZWFyVGltZW91dCh0aGlzLnJlY29ubmVjdFRpbWVyKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJfb25tZXNzYWdlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfb25tZXNzYWdlKGV2ZW50KSB7CiAgICAgIHRoaXMuX3Jlc2V0V2F0Y2hkb2coKTsKICAgICAgdGhpcy50cmllcyA9IDA7CiAgICAgIHRoaXMuZnJhbWVzUmVjZWl2ZWQrKzsKICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudChFVkVOVF9NRVNTQUdFLCB7CiAgICAgICAgZGV0YWlsOiBldmVudAogICAgICB9KSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiX3Jlc2V0V2F0Y2hkb2ciLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9yZXNldFdhdGNoZG9nKCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuZnJhbWVUaW1lcik7CiAgICAgIHZhciB0aW1lb3V0ID0gdGhpcy5mcmFtZVRpbWVvdXQ7CiAgICAgIGlmICh0aW1lb3V0ICYmIHRoaXMuc3RhdGUgPT09IFNUQVRFX0NPTk5FQ1RFRCkgewogICAgICAgIHRoaXMuZnJhbWVUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgX3RoaXMzLl9sb2coIndhdGNoZG9nIGV4cGlyZWQgYWZ0ZXIiLmNvbmNhdCh0aW1lb3V0LCAiLiBDbG9zaW5nIikpOwogICAgICAgICAgX3RoaXMzLl9jbG9zZSgpOwogICAgICAgICAgX3RoaXMzLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KEVWRU5UX0ZSQU1FX1RJTUVPVVQpKTsKICAgICAgICB9LCB0aW1lb3V0KTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogIl9lcnJvciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2Vycm9yKCkgewogICAgICB0aGlzLmNsb3NpbmdJZCA9IHRoaXMuc29ja2V0ID8gdGhpcy5zb2NrZXQuc29ja0lkIDogMDsKICAgICAgdGhpcy5fbG9nKCdlcnJvcicpOwogICAgfQogIH0sIHsKICAgIGtleTogIl9jbG9zZWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9jbG9zZWQoZXZlbnQpIHsKICAgICAgdmFyIF90aGlzJHNvY2tldCwKICAgICAgICBfdGhpczQgPSB0aGlzOwogICAgICB2YXIgY29kZSA9IGV2ZW50LmNvZGUsCiAgICAgICAgcmVhc29uID0gZXZlbnQucmVhc29uLAogICAgICAgIHdhc0NsZWFuID0gZXZlbnQud2FzQ2xlYW47CiAgICAgIHRoaXMuX2Jhc2VMb2coJ2Nsb3NlZCcsIHsKICAgICAgICBpZDogdGhpcy5jbG9zaW5nSWQgfHwgKChfdGhpcyRzb2NrZXQgPSB0aGlzLnNvY2tldCkgPT09IG51bGwgfHwgX3RoaXMkc29ja2V0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRzb2NrZXQuc29ja0lkKSB8fCAndW5rbm93bicsCiAgICAgICAgY29kZTogY29kZSwKICAgICAgICByZWFzb246IHJlYXNvbiwKICAgICAgICBjbGVhbjogd2FzQ2xlYW4KICAgICAgfSk7CiAgICAgIHRoaXMuY2xvc2luZ0lkID0gMDsKICAgICAgdGhpcy5zb2NrZXQgPSBudWxsOwogICAgICBjbGVhclRpbWVvdXQodGhpcy5yZWNvbm5lY3RUaW1lcik7CiAgICAgIGNsZWFyVGltZW91dCh0aGlzLmZyYW1lVGltZXIpOwogICAgICB2YXIgY2FsbEJhY2tzID0gdGhpcy5kaXNjb25uZWN0Q2FsbEJhY2tzOwogICAgICB3aGlsZSAoY2FsbEJhY2tzLmxlbmd0aCkgewogICAgICAgIHZhciBmbiA9IGNhbGxCYWNrcy5wb3AoKTsKICAgICAgICBpZiAoZm4pIHsKICAgICAgICAgIGZuLmFwcGx5KHRoaXMpOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAoW1NUQVRFX0NPTk5FQ1RFRCwgU1RBVEVfQ0xPU0lOR10uaW5jbHVkZXModGhpcy5zdGF0ZSkpIHsKICAgICAgICB3YXNDb25uZWN0ZWQgPSB0cnVlOwogICAgICB9CiAgICAgIGlmICghdGhpcy5kaXNjb25uZWN0ZWRBdCkgewogICAgICAgIHRoaXMuZGlzY29ubmVjdGVkQXQgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTsKICAgICAgfQogICAgICBpZiAoIXdhcm5pbmdTaG93biAmJiAhd2FzQ29ubmVjdGVkKSB7CiAgICAgICAgdGhpcy5hdXRvUmVjb25uZWN0ID0gZmFsc2U7CiAgICAgICAgdGhpcy5zdGF0ZSA9IFNUQVRFX0RJU0NPTk5FQ1RFRDsKICAgICAgICB2YXIgZSA9IG5ldyBDdXN0b21FdmVudChFVkVOVF9DT05ORUNUX0VSUk9SLCB7CiAgICAgICAgICBkZXRhaWw6IHsKICAgICAgICAgICAgaXNTYWZhcmk6IGlzU2FmYXJpCiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KGUpOwogICAgICAgIHdhcm5pbmdTaG93biA9IHRydWU7CiAgICAgIH0gZWxzZSBpZiAodGhpcy5hdXRvUmVjb25uZWN0KSB7CiAgICAgICAgdGhpcy5zdGF0ZSA9IFNUQVRFX1JFQ09OTkVDVElORzsKICAgICAgICBpZiAodGhpcy5tYXhUcmllcyAmJiB0aGlzLnRyaWVzID4gMSAmJiB0aGlzLnRyaWVzIDw9IHRoaXMubWF4VHJpZXMpIHsKICAgICAgICAgIC8vIGRpc3BhdGNoIGFuIGV2ZW50IHdoaWNoIHdpbGwgdHJpZ2dlciBhIGdyb3dsIGZyb20gc3RldmUtcGx1Z2luIHNvY2tldHMgd2FybmluZyB1c2VycyB0aGF0IHdlJ3ZlIGxvc3QgY29ubmVjdGlvbiBhbmQgYXJlIGF0dGVtcHRpbmcgdG8gcmVjb25uZWN0CiAgICAgICAgICB2YXIgX2UgPSBuZXcgQ3VzdG9tRXZlbnQoRVZFTlRfQ09OTkVDVF9FUlJPUik7CiAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoX2UpOwogICAgICAgIH0KICAgICAgICBpZiAodGhpcy5tYXhUcmllcyAmJiB0aGlzLnRyaWVzID4gdGhpcy5tYXhUcmllcykgewogICAgICAgICAgdGhpcy5fbG9nKCdjbG9zZWQuIFdpbGwgbm90IHJlY29ubmVjdCAoaGl0IG1heCBhdHRlbXB0cyknKTsKICAgICAgICAgIHRoaXMuc3RhdGUgPSBTVEFURV9ESVNDT05ORUNURUQ7CiAgICAgICAgICAvLyBkaXNwYXRjaCBhbiBldmVudCB3aGljaCB3aWxsIHRyaWdnZXIgYSBncm93bCBmcm9tIHN0ZXZlLXBsdWdpbiBzb2NrZXRzIHdhcm5pbmcgdXNlcnMgdGhhdCB3ZSd2ZSBnaXZlbiB1cCB0cnlpbmcgdG8gcmVjb25uZWN0CiAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KEVWRU5UX0RJU0NPTk5FQ1RfRVJST1IpKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdmFyIHJlY29ubmVjdCA9IGZ1bmN0aW9uIHJlY29ubmVjdCgpIHsKICAgICAgICAgICAgX3RoaXM0Ll9sb2coJ2Nsb3NlZC4gQXR0ZW1wdGluZyB0byByZWNvbm5lY3QnKTsKICAgICAgICAgICAgdmFyIGRlbGF5ID0gTWF0aC5tYXgoMTAwMCwgTWF0aC5taW4oMTAwMCAqIF90aGlzNC50cmllcywgMzAwMDApKTsKICAgICAgICAgICAgX3RoaXM0LnJlY29ubmVjdFRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgX3RoaXM0LmNvbm5lY3QoKTsKICAgICAgICAgICAgfSwgZGVsYXkpOwogICAgICAgICAgfTsKICAgICAgICAgIGlmICh0aGlzLmF1dG9SZWNvbm5lY3RVcmwpIHsKICAgICAgICAgICAgdGhpcy5hdXRvUmVjb25uZWN0VXJsKCkudGhlbihmdW5jdGlvbiAodXJsKSB7CiAgICAgICAgICAgICAgX3RoaXM0LnNldFVybCh1cmwpOwogICAgICAgICAgICAgIHJlY29ubmVjdCgpOwogICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBmZXRjaCBzb2NrZXQgYXV0byByZWNvbm5lY3QgdXJsJywgZSk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc29sZQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlY29ubmVjdCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnN0YXRlID0gU1RBVEVfRElTQ09OTkVDVEVEOwogICAgICB9CiAgICAgIGlmICh0aGlzLnN0YXRlID09PSBTVEFURV9ESVNDT05ORUNURUQpIHsKICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KEVWRU5UX0RJU0NPTk5FQ1RFRCkpOwogICAgICB9IGVsc2UgaWYgKHRoaXMuc3RhdGUgPT09IFNUQVRFX1JFQ09OTkVDVElORykgewogICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoRVZFTlRfQ09OTkVDVElORykpOwogICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBgY29uc29sZS5sb2dgIHRoZSBwcm92aWRlZCBzdW1tYXJ5IHN0YXRlbWVudCwgd2l0aCBkZWZhdWx0IGluZm9ybWF0aW9uIHRvIGlkZW50aWZ5IHRoZSBzb2NrZXQgYW5kIHRoZSBwcm92aWRlZCBwcm9wcwogICAgICovCiAgfSwgewogICAga2V5OiAiX2xvZyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2xvZyhzdW1tYXJ5LCBwcm9wcykgewogICAgICB2YXIgX3RoaXMkc29ja2V0MjsKICAgICAgdGhpcy5fYmFzZUxvZyhzdW1tYXJ5LCBfb2JqZWN0U3ByZWFkKHsKICAgICAgICBzdGF0ZTogdGhpcy5zdGF0ZSwKICAgICAgICBpZDogKChfdGhpcyRzb2NrZXQyID0gdGhpcy5zb2NrZXQpID09PSBudWxsIHx8IF90aGlzJHNvY2tldDIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJHNvY2tldDIuc29ja0lkKSB8fCAwCiAgICAgIH0sIHByb3BzKSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBgY29uc29sZS5sb2dgIHRoZSBwcm92aWRlZCBzdW1tYXJ5IHN0YXRlbWVudCBhbmQgcHJvcHMKICAgICAqCiAgICAgKiBUaGlzIGRvZXMgbm90IGNvbnRhaW4gaW5mb3JtYXRpb24gdG8gaWRlbnRpZnkgdGhlIHNvY2tldCBhbmQgY2FuIGJlIHVzZWQgaW4gc2NlbmFyaW9zIHdoZXJlIGl0J3Mgbm90IGtub3duIG9yIGRlZmF1bHQKICAgICAqLwogIH0sIHsKICAgIGtleTogIl9iYXNlTG9nIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfYmFzZUxvZyhzdW1tYXJ5LCBwcm9wcykgewogICAgICB2YXIgbWVzc2FnZSA9IFtzdW1tYXJ5XTsKICAgICAgdmFyIHZhbHVlcyA9IE9iamVjdC5lbnRyaWVzKHByb3BzIHx8IHt9KTsKICAgICAgbWVzc2FnZS51bnNoaWZ0KCdTb2NrZXQgJyk7CiAgICAgIGlmICh2YWx1ZXMubGVuZ3RoKSB7CiAgICAgICAgbWVzc2FnZS5wdXNoKCcgKCcpOwogICAgICAgIHZhbHVlcy5mb3JFYWNoKGZ1bmN0aW9uIChfcmVmLCBpbmRleCkgewogICAgICAgICAgdmFyIF9yZWYyID0gX3NsaWNlZFRvQXJyYXkoX3JlZiwgMiksCiAgICAgICAgICAgIGtleSA9IF9yZWYyWzBdLAogICAgICAgICAgICB2YWx1ZSA9IF9yZWYyWzFdOwogICAgICAgICAgaWYgKGluZGV4ICE9PSAwKSB7CiAgICAgICAgICAgIG1lc3NhZ2UucHVzaCgiLCAiKTsKICAgICAgICAgIH0KICAgICAgICAgIG1lc3NhZ2UucHVzaCgiIi5jb25jYXQoa2V5LCAiPSIpLmNvbmNhdCh2YWx1ZSkpOwogICAgICAgIH0pOwogICAgICAgIG1lc3NhZ2UucHVzaCgnKScpOwogICAgICB9CiAgICAgIGNvbnNvbGUubG9nKG1lc3NhZ2Uuam9pbignJykpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnNvbGUKICAgIH0KICB9XSk7Cn0oRXZlbnRUYXJnZXQpOwpleHBvcnQgeyBTb2NrZXQgYXMgZGVmYXVsdCB9Ow=="},{"version":3,"names":["EventTarget","isSafari","addParam","sockId","warningShown","wasConnected","INSECURE","SECURE","STATE_DISCONNECTED","addEventListener","STATE_CONNECTING","STATE_CONNECTED","STATE_CLOSING","STATE_RECONNECTING","EVENT_CONNECTING","EVENT_CONNECTED","EVENT_DISCONNECTED","EVENT_MESSAGE","EVENT_FRAME_TIMEOUT","EVENT_CONNECT_ERROR","EVENT_DISCONNECT_ERROR","NO_WATCH","NO_SCHEMA","REVISION_TOO_OLD","Socket","_EventTarget","url","_this","autoReconnect","arguments","length","undefined","frameTimeout","protocol","maxTries","idAsTimestamp","_classCallCheck","_callSuper","metadata","hasBeenOpen","hasReconnected","tries","socket","state","framesReceived","frameTimer","reconnectTimer","disconnectCallBacks","disconnectedAt","closingId","autoReconnectUrl","setUrl","_inherits","_createClass","key","value","match","self","location","origin","replace","startsWith","substr","connect","console","error","Object","assign","id","Date","getTime","_baseLog","WebSocket","onmessage","_onmessage","bind","onopen","_opened","onerror","_error","onclose","_closed","dispatchEvent","CustomEvent","send","data","disconnect","callBack","_this2","push","promise","Promise","resolve","reject","onError","e","removeEventListener","_close","reconnect","_log","getMetadata","getId","isConnected","setAutoReconnect","setAutoReconnectUrl","close","toString","now","atTime","afterMilliseconds","detail","_resetWatchdog","clearTimeout","event","_this3","timeout","setTimeout","concat","_this$socket","_this4","code","reason","wasClean","clean","callBacks","fn","pop","apply","includes","delay","Math","max","min","then","catch","summary","props","_this$socket2","_objectSpread","message","values","entries","unshift","forEach","_ref","index","_ref2","_slicedToArray","log","join","default"],"sources":["/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/utils/socket.js"],"sourcesContent":["import { EventTarget } from 'event-target-shim';\nimport { isSafari } from '@shell/utils/platform';\nimport { addParam } from '@shell/utils/url';\n\nlet sockId = 1;\nlet warningShown = false;\nlet wasConnected = false;\n\nconst INSECURE = 'ws://';\nconst SECURE = 'wss://';\n\nconst STATE_DISCONNECTED = 'disconnected';\n\nexport const addEventListener = EventTarget.addEventListener;\nexport const STATE_CONNECTING = 'connecting';\nexport const STATE_CONNECTED = 'connected';\nconst STATE_CLOSING = 'closing';\nconst STATE_RECONNECTING = 'reconnecting';\n\nexport const EVENT_CONNECTING = STATE_CONNECTING;\nexport const EVENT_CONNECTED = STATE_CONNECTED;\nexport const EVENT_DISCONNECTED = STATE_DISCONNECTED;\nexport const EVENT_MESSAGE = 'message';\nexport const EVENT_FRAME_TIMEOUT = 'frame_timeout';\nexport const EVENT_CONNECT_ERROR = 'connect_error';\nexport const EVENT_DISCONNECT_ERROR = 'disconnect_error';\n\nexport const NO_WATCH = 'NO_WATCH';\nexport const NO_SCHEMA = 'NO_SCHEMA';\nexport const REVISION_TOO_OLD = 'TOO_OLD';\n\nexport default class Socket extends EventTarget {\n  url;\n  autoReconnect = true;\n  frameTimeout = 35000;\n  metadata = {};\n  hasBeenOpen = false;\n  hasReconnected = false;\n  protocol = null;\n  maxTries = null;\n  tries = 0;\n  idAsTimestamp = false;\n\n  // \"Private\"\n  socket = null;\n  state = STATE_DISCONNECTED;\n  framesReceived = 0;\n  frameTimer;\n  reconnectTimer;\n  disconnectCallBacks = [];\n  disconnectedAt = 0;\n  closingId = 0;\n  autoReconnectUrl = null;\n\n  constructor(url, autoReconnect = true, frameTimeout = null, protocol = null, maxTries = null, idAsTimestamp = false) {\n    super();\n\n    this.setUrl(url);\n    this.autoReconnect = autoReconnect;\n    this.protocol = protocol;\n    // maxTries = null === never stop trying to reconnect\n    // allow maxTries to be defined on individual sockets bc not all will clearly warn the user that we've stopped trying\n    this.maxTries = maxTries;\n    this.idAsTimestamp = idAsTimestamp;\n\n    if ( frameTimeout !== null ) {\n      this.frameTimeout = frameTimeout;\n    }\n  }\n\n  setUrl(url) {\n    if ( !url.match(/wss?:\\/\\//) ) {\n      url = self.location.origin.replace(/^http/, 'ws') + url;\n    }\n\n    if ( self.location.protocol === 'https:' && url.startsWith(INSECURE) ) {\n      url = SECURE + url.substr(INSECURE.length);\n    }\n\n    this.url = url;\n  }\n\n  connect(metadata = {}) {\n    if ( this.socket ) {\n      console.error('Socket refusing to connect while another socket exists'); // eslint-disable-line no-console\n\n      return;\n    }\n\n    if (this.state !== STATE_RECONNECTING) {\n      this.state = STATE_CONNECTING;\n    }\n\n    Object.assign(this.metadata, metadata);\n\n    const id = this.idAsTimestamp ? new Date().getTime() : sockId++;\n    const url = addParam(this.url, 'sockId', id);\n\n    this._baseLog('connecting', { id, url: url.replace(/\\?.*/, '') });\n\n    let socket;\n\n    this.tries++;\n\n    if ( this.protocol ) {\n      socket = new WebSocket(url, this.protocol);\n    } else {\n      socket = new WebSocket(url);\n    }\n\n    socket.sockId = id;\n    socket.metadata = this.metadata;\n    socket.onmessage = this._onmessage.bind(this);\n    socket.onopen = this._opened.bind(this);\n    socket.onerror = this._error.bind(this);\n    socket.onclose = this._closed.bind(this);\n\n    this.socket = socket;\n    this.state = STATE_CONNECTING;\n\n    this.dispatchEvent(new CustomEvent(EVENT_CONNECTING));\n  }\n\n  send(data) {\n    if ( this.socket && this.state === STATE_CONNECTED ) {\n      this.socket.send(data);\n\n      return true;\n    }\n\n    return false;\n  }\n\n  disconnect(callBack) {\n    if ( callBack ) {\n      this.disconnectCallBacks.push(callBack);\n    }\n\n    const self = this;\n    const promise = new Promise((resolve, reject) => {\n      if ( this.state === STATE_DISCONNECTED ) {\n        resolve();\n      }\n\n      function onError(e) {\n        reject(e);\n        self.removeEventListener(EVENT_CONNECT_ERROR, onError);\n      }\n\n      this.addEventListener(EVENT_CONNECT_ERROR, onError);\n\n      this.disconnectCallBacks.push(() => {\n        this.removeEventListener(EVENT_CONNECT_ERROR, onError);\n        resolve();\n      });\n    });\n\n    this.autoReconnect = false;\n    this._close();\n\n    return promise;\n  }\n\n  reconnect(metadata = {}) {\n    Object.assign(this.metadata, metadata);\n\n    if ( this.state === STATE_CONNECTING ) {\n      this._log('Ignoring reconnect for socket in connecting');\n\n      return;\n    }\n\n    if ( this.socket ) {\n      this._close();\n    } else {\n      this.connect(metadata);\n    }\n  }\n\n  getMetadata() {\n    if ( this.socket ) {\n      return this.socket.metadata;\n    } else {\n      return {};\n    }\n  }\n\n  getId() {\n    if ( this.socket ) {\n      return this.socket.sockId;\n    } else {\n      return 0;\n    }\n  }\n\n  isConnected() {\n    return this.state === STATE_CONNECTED;\n  }\n\n  setAutoReconnect(autoReconnect) {\n    this.autoReconnect = autoReconnect;\n  }\n\n  /**\n   * Supply an async fn that will provide a new url to reconnect to\n   */\n  setAutoReconnectUrl(autoReconnectUrl) {\n    this.autoReconnectUrl = autoReconnectUrl;\n  }\n\n  // \"Private\"\n  _close() {\n    const socket = this.socket;\n\n    if ( !socket ) {\n      return;\n    }\n\n    try {\n      this._log('closing');\n      this.closingId = socket.sockId;\n      socket.onopen = null;\n      socket.onerror = null;\n      socket.onmessage = null;\n      socket.close();\n    } catch (e) {\n      this._log('exception', { e: e.toString() });\n      // Continue anyway...\n    }\n\n    this.state = STATE_CLOSING;\n  }\n\n  _opened() {\n    this._log('opened');\n    const now = (new Date()).getTime();\n\n    const atTime = this.disconnectedAt;\n    let afterMilliseconds = 0;\n\n    if ( atTime ) {\n      afterMilliseconds = now - atTime;\n    }\n\n    if ( this.hasBeenOpen ) {\n      this.hasReconnected = true;\n    }\n\n    this.hasBeenOpen = true;\n    this.state = STATE_CONNECTED;\n    this.framesReceived = 0;\n    this.disconnectedAt = 0;\n\n    this.dispatchEvent(new CustomEvent(EVENT_CONNECTED, { detail: { tries: this.tries, afterMilliseconds } }));\n    this.tries = 0;\n    this._resetWatchdog();\n    clearTimeout(this.reconnectTimer);\n  }\n\n  _onmessage(event) {\n    this._resetWatchdog();\n    this.tries = 0;\n    this.framesReceived++;\n\n    this.dispatchEvent(new CustomEvent(EVENT_MESSAGE, { detail: event }));\n  }\n\n  _resetWatchdog() {\n    clearTimeout(this.frameTimer);\n\n    const timeout = this.frameTimeout;\n\n    if ( timeout && this.state === STATE_CONNECTED) {\n      this.frameTimer = setTimeout(() => {\n        this._log(`watchdog expired after${ timeout }. Closing`);\n        this._close();\n        this.dispatchEvent(new CustomEvent(EVENT_FRAME_TIMEOUT));\n      }, timeout);\n    }\n  }\n\n  _error() {\n    this.closingId = (this.socket ? this.socket.sockId : 0);\n    this._log('error');\n  }\n\n  _closed(event) {\n    const { code, reason, wasClean } = event;\n\n    this._baseLog('closed', {\n      id: this.closingId || this.socket?.sockId || 'unknown', code, reason, clean: wasClean\n    });\n\n    this.closingId = 0;\n    this.socket = null;\n    clearTimeout(this.reconnectTimer);\n    clearTimeout(this.frameTimer);\n\n    const callBacks = this.disconnectCallBacks;\n\n    while ( callBacks.length ) {\n      const fn = callBacks.pop();\n\n      if ( fn ) {\n        fn.apply(this);\n      }\n    }\n\n    if ( [STATE_CONNECTED, STATE_CLOSING].includes(this.state) ) {\n      wasConnected = true;\n    }\n\n    if ( !this.disconnectedAt ) {\n      this.disconnectedAt = (new Date()).getTime();\n    }\n\n    if ( !warningShown && !wasConnected ) {\n      this.autoReconnect = false;\n      this.state = STATE_DISCONNECTED;\n\n      const e = new CustomEvent(EVENT_CONNECT_ERROR, { detail: { isSafari } });\n\n      this.dispatchEvent(e);\n      warningShown = true;\n    } else if ( this.autoReconnect ) {\n      this.state = STATE_RECONNECTING;\n\n      if (this.maxTries && this.tries > 1 && this.tries <= this.maxTries) {\n        // dispatch an event which will trigger a growl from steve-plugin sockets warning users that we've lost connection and are attempting to reconnect\n        const e = new CustomEvent(EVENT_CONNECT_ERROR);\n\n        this.dispatchEvent(e);\n      }\n\n      if (this.maxTries && this.tries > this.maxTries) {\n        this._log('closed. Will not reconnect (hit max attempts)');\n        this.state = STATE_DISCONNECTED;\n        // dispatch an event which will trigger a growl from steve-plugin sockets warning users that we've given up trying to reconnect\n        this.dispatchEvent(new CustomEvent(EVENT_DISCONNECT_ERROR));\n      } else {\n        const reconnect = () => {\n          this._log('closed. Attempting to reconnect');\n          const delay = Math.max(1000, Math.min(1000 * this.tries, 30000));\n\n          this.reconnectTimer = setTimeout(() => {\n            this.connect();\n          }, delay);\n        };\n\n        if (this.autoReconnectUrl) {\n          this.autoReconnectUrl()\n            .then((url) => {\n              this.setUrl(url);\n\n              reconnect();\n            })\n            .catch((e) => {\n              console.error('Failed to fetch socket auto reconnect url', e); // eslint-disable-line no-console\n            });\n        } else {\n          reconnect();\n        }\n      }\n    } else {\n      this.state = STATE_DISCONNECTED;\n    }\n\n    if ( this.state === STATE_DISCONNECTED ) {\n      this.dispatchEvent(new CustomEvent(EVENT_DISCONNECTED));\n    } else if ( this.state === STATE_RECONNECTING ) {\n      this.dispatchEvent(new CustomEvent(EVENT_CONNECTING));\n    }\n  }\n\n  /**\n   * `console.log` the provided summary statement, with default information to identify the socket and the provided props\n   */\n  _log(summary, props) {\n    this._baseLog(summary, {\n      state: this.state, id: this.socket?.sockId || 0, ...props\n    });\n  }\n\n  /**\n   * `console.log` the provided summary statement and props\n   *\n   * This does not contain information to identify the socket and can be used in scenarios where it's not known or default\n   */\n  _baseLog(summary, props) {\n    const message = [summary];\n    const values = Object.entries(props || {});\n\n    message.unshift('Socket ');\n\n    if (values.length) {\n      message.push(' (');\n      values.forEach(([key, value], index) => {\n        if (index !== 0) {\n          message.push(`, `);\n        }\n        message.push(`${ key }=${ value }`);\n      });\n      message.push(')');\n    }\n\n    console.log(message.join('')); // eslint-disable-line no-console\n  }\n}\n"],"mappings":"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","ignoreList":[]}]}