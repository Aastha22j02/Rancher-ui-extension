{"remainingRequest":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js??ref--16-1!/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js??ref--17-0!/home/ubuntu/suseconf/node_modules/ts-loader/index.js??ref--17-1!/home/ubuntu/suseconf/node_modules/@rancher/shell/utils/settings.ts","dependencies":[{"path":"/home/ubuntu/suseconf/node_modules/@rancher/shell/utils/settings.ts","mtime":1725338146566},{"path":"/home/ubuntu/suseconf/babel.config.js","mtime":1725343995893},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js","mtime":1725271298942},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/ts-loader/index.js","mtime":1725271299135}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maW5kLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmFzc2lnbi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5rZXlzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCBfcmVnZW5lcmF0b3JSdW50aW1lIGZyb20gIi9ob21lL3VidW50dS9zdXNlY29uZi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvcmVnZW5lcmF0b3IvaW5kZXguanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCB7IE1BTkFHRU1FTlQgfSBmcm9tICdAc2hlbGwvY29uZmlnL3R5cGVzJzsKaW1wb3J0IHsgREVGQVVMVF9QRVJGX1NFVFRJTkcsIFNFVFRJTkcgfSBmcm9tICdAc2hlbGwvY29uZmlnL3NldHRpbmdzJzsKaW1wb3J0IHsgcGx1cmFsaXplIH0gZnJvbSAnQHNoZWxsL3V0aWxzL3N0cmluZyc7CmltcG9ydCB7IF9NVUxUSSB9IGZyb20gJ0BzaGVsbC9wbHVnaW5zL2Rhc2hib2FyZC1zdG9yZS9hY3Rpb25zJzsKZXhwb3J0IHZhciBmZXRjaE9yQ3JlYXRlU2V0dGluZyA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvcigvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoc3RvcmUsIGlkLCB2YWwpIHsKICAgIHZhciBzYXZlLAogICAgICBzZXR0aW5nLAogICAgICBzY2hlbWEsCiAgICAgIHVybCwKICAgICAgX2FyZ3MgPSBhcmd1bWVudHM7CiAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgY2FzZSAwOgogICAgICAgICAgc2F2ZSA9IF9hcmdzLmxlbmd0aCA+IDMgJiYgX2FyZ3NbM10gIT09IHVuZGVmaW5lZCA/IF9hcmdzWzNdIDogdHJ1ZTsKICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxOwogICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ7CiAgICAgICAgICByZXR1cm4gc3RvcmUuZGlzcGF0Y2goJ21hbmFnZW1lbnQvZmluZCcsIHsKICAgICAgICAgICAgdHlwZTogTUFOQUdFTUVOVC5TRVRUSU5HLAogICAgICAgICAgICBpZDogaWQKICAgICAgICAgIH0pOwogICAgICAgIGNhc2UgNDoKICAgICAgICAgIHNldHRpbmcgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE3OwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSA3OgogICAgICAgICAgX2NvbnRleHQucHJldiA9IDc7CiAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDEpOwogICAgICAgICAgc2NoZW1hID0gc3RvcmUuZ2V0dGVyc1snbWFuYWdlbWVudC9zY2hlbWFGb3InXShNQU5BR0VNRU5ULlNFVFRJTkcpOwogICAgICAgICAgdXJsID0gc2NoZW1hLmxpbmtGb3IoJ2NvbGxlY3Rpb24nKTsKICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMzsKICAgICAgICAgIHJldHVybiBzdG9yZS5kaXNwYXRjaCgnbWFuYWdlbWVudC9jcmVhdGUnLCB7CiAgICAgICAgICAgIHR5cGU6IE1BTkFHRU1FTlQuU0VUVElORywKICAgICAgICAgICAgbWV0YWRhdGE6IHsKICAgICAgICAgICAgICBuYW1lOiBpZAogICAgICAgICAgICB9LAogICAgICAgICAgICB2YWx1ZTogdmFsLAogICAgICAgICAgICBkZWZhdWx0OiB2YWwgfHwgJycKICAgICAgICAgIH0pOwogICAgICAgIGNhc2UgMTM6CiAgICAgICAgICBzZXR0aW5nID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgIGlmICghc2F2ZSkgewogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTc7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE3OwogICAgICAgICAgcmV0dXJuIHNldHRpbmcuc2F2ZSh7CiAgICAgICAgICAgIHVybDogdXJsCiAgICAgICAgICB9KTsKICAgICAgICBjYXNlIDE3OgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgc2V0dGluZyk7CiAgICAgICAgY2FzZSAxODoKICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgfQogICAgfSwgX2NhbGxlZSwgbnVsbCwgW1sxLCA3XV0pOwogIH0pKTsKICByZXR1cm4gZnVuY3Rpb24gZmV0Y2hPckNyZWF0ZVNldHRpbmcoX3gsIF94MiwgX3gzKSB7CiAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH07Cn0oKTsKLyoqCiAgKiBGZXRjaCBhIHNwZWNpZmljIHNldHRpbmcgdGhhdCBtaWdodCBub3QgZXhpc3QKICAqIFdlIGZldGNoIGFsbCBzZXR0aW5ncyAtIHJlYWxpdHkgaXMgUmFuY2hlciB3aWxsIGhhdmUgZG9uZSB0aGlzIGFscmVhZHksIHNvIHRoZXJlJ3Mgbm8gb3ZlcmhlYWQgaW4gZG9pbmcKICAqIHRoaXMgLSBidXQgaWYgd2UgZmV0Y2ggYSBzcGVjaWZpYyBzZXR0aW5nIHRoYXQgZG9lcyBub3QgZXhpc3QsIHdlIHdpbGwgZ2V0IGEgNDA0LCB3aGljaCB3ZSBkb24ndCB3YW50CiAgKi8KZXhwb3J0IHZhciBmZXRjaFNldHRpbmcgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIHZhciBfcmVmMiA9IF9hc3luY1RvR2VuZXJhdG9yKC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoc3RvcmUsIGlkKSB7CiAgICB2YXIgYWxsLCBzZXR0aW5nOwogICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICBjYXNlIDA6CiAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDI7CiAgICAgICAgICByZXR1cm4gc3RvcmUuZGlzcGF0Y2goJ21hbmFnZW1lbnQvZmluZEFsbCcsIHsKICAgICAgICAgICAgdHlwZTogTUFOQUdFTUVOVC5TRVRUSU5HCiAgICAgICAgICB9KTsKICAgICAgICBjYXNlIDI6CiAgICAgICAgICBhbGwgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgIHNldHRpbmcgPSAoYWxsIHx8IFtdKS5maW5kKGZ1bmN0aW9uIChzZXR0aW5nKSB7CiAgICAgICAgICAgIHJldHVybiBzZXR0aW5nLmlkID09PSBpZDsKICAgICAgICAgIH0pOwogICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsIHNldHRpbmcpOwogICAgICAgIGNhc2UgNToKICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgIH0KICAgIH0sIF9jYWxsZWUyKTsKICB9KSk7CiAgcmV0dXJuIGZ1bmN0aW9uIGZldGNoU2V0dGluZyhfeDQsIF94NSkgewogICAgcmV0dXJuIF9yZWYyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfTsKfSgpOwovKioKICogQ2FyZWZ1bGx5IGZldGNoIG1nbXQgc2V0dGluZ3MKICoKICogRW5zdXJlcyB0aGF0CiAqIC0gQ29uY3VycmVudCBjYWxscyB0byB0aGlzIGZ1bmN0aW9uIHdpbGwgb25seSByZXN1bHQgaW4gYSBzaW5nbGUgaHR0cCByZXF1ZXN0CiAqIC0gU3Vic2VxdWVudCBjYWxscywgd2hlbiBlaXRoZXIgbG9nZ2VkIGluIG9yIGxvZ2dlZCBvdXQsIHdpbGwgb25seSByZXN1bHQgaW4gYSBzaW5nbGUgaHR0cCByZXF1ZXN0CiAqIC0gTG9nZ2VkIG91dCBjYWxsIHdpbGwgZmV0Y2ggcGFydGlhbCBzZXR0aW5ncywgYWZ0ZXIgbG9nZ2luZyBpbiBhbm90aGVyIGNhbGwgd2lsbCBmZXRjaCBhbGwgc2V0dGluZ3MKICoKICogV2lsbCBiZSB1c2VkIGluIG1hbnkgcGxhY2VzLCBwYXJ0aWN1bGFybHkgbXVsdGlwbGUgdGltZXMgd2hlbiBsb2FkaW5nIHRoZSBkYXNoYm9hcmQKICoKICogTm90ZSAtIFdlIG5lZWQgdG8gc3BlY2lmeSB0aGUgdXJsIGZvciBjYXNlcyB3aGVyZSBpdCBjYW4ndCBiZSBkZXRlcm1pbmVkIChpLmUuIHdlIGhhdmVuJ3QgZmV0Y2hlZCBzY2hlbWFzKQogKi8KZXhwb3J0IHZhciBmZXRjaEluaXRpYWxTZXR0aW5ncyA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgdmFyIF9yZWYzID0gX2FzeW5jVG9HZW5lcmF0b3IoLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMyhzdG9yZSkgewogICAgdmFyIGdlbmVyYXRpb24sIGhlYWRlciwgYXV0aGVkOwogICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICBjYXNlIDA6CiAgICAgICAgICBnZW5lcmF0aW9uID0gc3RvcmUuZ2V0dGVyc1snbWFuYWdlbWVudC9nZW5lcmF0aW9uJ10oTUFOQUdFTUVOVC5TRVRUSU5HKTsgLy8gV2UgdXNlIHRoaXMgYXMgaXQgY29waWVzIHRoZSBwcmV2aW91cyBtZWNoYW5pc20gdGhpcyB3YXMgYmFzZWQgb24gKGluIGZpbmRBbGwpCiAgICAgICAgICAvLyBUaGVyZSBpcyB0aGUgZ2V0dGVyIGBhdXRoL2xvZ2dlZEluQXNgICh3aGljaCBpcyBzZXQgZ2l2ZW4gYGZyb21IZWFkZXJgKSwgYnV0IHRoYXQncyBpbml0aWFsaXNlZCBhZnRlciB0aGUgZmlyc3QgY2FsbCB0byBoZXJlIChzZWUgYGF1dGhlbnRpY2F0ZWRgKQogICAgICAgICAgaGVhZGVyID0gc3RvcmUuZ2V0dGVyc1snYXV0aC9mcm9tSGVhZGVyJ107CiAgICAgICAgICBhdXRoZWQgPSAiIi5jb25jYXQoaGVhZGVyKSA9PT0gJ3RydWUnIHx8ICIiLmNvbmNhdChoZWFkZXIpID09PSAnbm9uZSc7CiAgICAgICAgICBpZiAoIWF1dGhlZCkgewogICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDc7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA2OwogICAgICAgICAgcmV0dXJuIHN0b3JlLmRpc3BhdGNoKCdtYW5hZ2VtZW50L2ZpbmRBbGwnLCB7CiAgICAgICAgICAgIHR5cGU6IE1BTkFHRU1FTlQuU0VUVElORywKICAgICAgICAgICAgb3B0OiB7CiAgICAgICAgICAgICAgdXJsOiAiL3YxLyIuY29uY2F0KHBsdXJhbGl6ZShNQU5BR0VNRU5ULlNFVFRJTkcpKQogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICBjYXNlIDY6CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQzLnNlbnQpOwogICAgICAgIGNhc2UgNzoKICAgICAgICAgIGlmIChnZW5lcmF0aW9uKSB7CiAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMTE7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAxMDsKICAgICAgICAgIHJldHVybiBzdG9yZS5kaXNwYXRjaCgnbWFuYWdlbWVudC9maW5kQWxsJywgewogICAgICAgICAgICB0eXBlOiBNQU5BR0VNRU5ULlNFVFRJTkcsCiAgICAgICAgICAgIG9wdDogewogICAgICAgICAgICAgIHVybDogIi92MS8iLmNvbmNhdChwbHVyYWxpemUoTUFOQUdFTUVOVC5TRVRUSU5HKSksCiAgICAgICAgICAgICAgbG9hZDogX01VTFRJLAogICAgICAgICAgICAgIHJlZGlyZWN0VW5hdXRob3JpemVkOiBmYWxzZQogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICBjYXNlIDEwOgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0My5zZW50KTsKICAgICAgICBjYXNlIDExOgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoInJldHVybiIsIHN0b3JlLmdldHRlcnNbJ21hbmFnZW1lbnQvYWxsJ10oTUFOQUdFTUVOVC5TRVRUSU5HKSk7CiAgICAgICAgY2FzZSAxMjoKICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgIH0KICAgIH0sIF9jYWxsZWUzKTsKICB9KSk7CiAgcmV0dXJuIGZ1bmN0aW9uIGZldGNoSW5pdGlhbFNldHRpbmdzKF94NikgewogICAgcmV0dXJuIF9yZWYzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfTsKfSgpOwpleHBvcnQgdmFyIHNldFNldHRpbmcgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIHZhciBfcmVmNCA9IF9hc3luY1RvR2VuZXJhdG9yKC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQoc3RvcmUsIGlkLCB2YWwpIHsKICAgIHZhciBzZXR0aW5nOwogICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNCQoX2NvbnRleHQ0KSB7CiAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICBjYXNlIDA6CiAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDI7CiAgICAgICAgICByZXR1cm4gZmV0Y2hPckNyZWF0ZVNldHRpbmcoc3RvcmUsIGlkLCB2YWwsIGZhbHNlKTsKICAgICAgICBjYXNlIDI6CiAgICAgICAgICBzZXR0aW5nID0gX2NvbnRleHQ0LnNlbnQ7CiAgICAgICAgICBzZXR0aW5nLnZhbHVlID0gdmFsOwogICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSA2OwogICAgICAgICAgcmV0dXJuIHNldHRpbmcuc2F2ZSgpOwogICAgICAgIGNhc2UgNjoKICAgICAgICAgIHJldHVybiBfY29udGV4dDQuYWJydXB0KCJyZXR1cm4iLCBzZXR0aW5nKTsKICAgICAgICBjYXNlIDc6CiAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgIHJldHVybiBfY29udGV4dDQuc3RvcCgpOwogICAgICB9CiAgICB9LCBfY2FsbGVlNCk7CiAgfSkpOwogIHJldHVybiBmdW5jdGlvbiBzZXRTZXR0aW5nKF94NywgX3g4LCBfeDkpIHsKICAgIHJldHVybiBfcmVmNC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH07Cn0oKTsKZXhwb3J0IHZhciBnZXRQZXJmb3JtYW5jZVNldHRpbmcgPSBmdW5jdGlvbiBnZXRQZXJmb3JtYW5jZVNldHRpbmcocm9vdEdldHRlcnMpIHsKICB2YXIgcGVyZlNldHRpbmdSZXNvdXJjZSA9IHJvb3RHZXR0ZXJzWydtYW5hZ2VtZW50L2J5SWQnXShNQU5BR0VNRU5ULlNFVFRJTkcsIFNFVFRJTkcuVUlfUEVSRk9STUFOQ0UpOwogIHZhciBwZXJmU2V0dGluZyA9IHt9OwogIGlmIChwZXJmU2V0dGluZ1Jlc291cmNlID09PSBudWxsIHx8IHBlcmZTZXR0aW5nUmVzb3VyY2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBlcmZTZXR0aW5nUmVzb3VyY2UudmFsdWUpIHsKICAgIHRyeSB7CiAgICAgIHBlcmZTZXR0aW5nID0gSlNPTi5wYXJzZShwZXJmU2V0dGluZ1Jlc291cmNlLnZhbHVlKTsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgY29uc29sZS53YXJuKCd1aS1wZXJmb3JtYW5jZSBzZXR0aW5nIGNvbnRhaW5zIGludmFsaWQgZGF0YScpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnNvbGUKICAgIH0KICB9CiAgLy8gU3RhcnQgd2l0aCB0aGUgZGVmYXVsdCBhbmQgb3ZlcndyaXRlIHRoZSB2YWx1ZXMgZnJvbSB0aGUgc2V0dGluZyAtIGVuc3VyZXMgd2UgaGF2ZSBkZWZhdWx0cyBmb3IgbmV3bHkgYWRkZWQgb3B0aW9ucwogIHJldHVybiBPYmplY3QuYXNzaWduKERFRkFVTFRfUEVSRl9TRVRUSU5HLCBwZXJmU2V0dGluZyB8fCB7fSk7Cn07"},{"version":3,"names":["MANAGEMENT","DEFAULT_PERF_SETTING","SETTING","pluralize","_MULTI","fetchOrCreateSetting","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","store","id","val","save","setting","schema","url","_args","arguments","wrap","_callee$","_context","prev","next","length","undefined","dispatch","type","sent","t0","getters","linkFor","metadata","name","value","default","abrupt","stop","_x","_x2","_x3","apply","fetchSetting","_ref2","_callee2","all","_callee2$","_context2","find","_x4","_x5","fetchInitialSettings","_ref3","_callee3","generation","header","authed","_callee3$","_context3","concat","opt","load","redirectUnauthorized","_x6","setSetting","_ref4","_callee4","_callee4$","_context4","_x7","_x8","_x9","getPerformanceSetting","rootGetters","perfSettingResource","UI_PERFORMANCE","perfSetting","JSON","parse","e","console","warn","Object","assign"],"sources":["/home/ubuntu/suseconf/node_modules/@rancher/shell/utils/settings.ts"],"sourcesContent":["import { MANAGEMENT } from '@shell/config/types';\nimport { Store } from 'vuex';\nimport { DEFAULT_PERF_SETTING, PerfSettings, SETTING } from '@shell/config/settings';\nimport { pluralize } from '@shell/utils/string';\nimport { _MULTI } from '@shell/plugins/dashboard-store/actions';\n\nexport const fetchOrCreateSetting = async(store: Store<any>, id: string, val: string, save = true): Promise<any> => {\n  let setting;\n\n  try {\n    setting = await store.dispatch('management/find', { type: MANAGEMENT.SETTING, id });\n  } catch {\n    const schema = store.getters['management/schemaFor'](MANAGEMENT.SETTING);\n    const url = schema.linkFor('collection');\n\n    setting = await store.dispatch('management/create', {\n      type: MANAGEMENT.SETTING, metadata: { name: id }, value: val, default: val || ''\n    });\n    if ( save ) {\n      await setting.save({ url });\n    }\n  }\n\n  return setting;\n};\n\n/**\n  * Fetch a specific setting that might not exist\n  * We fetch all settings - reality is Rancher will have done this already, so there's no overhead in doing\n  * this - but if we fetch a specific setting that does not exist, we will get a 404, which we don't want\n  */\nexport const fetchSetting = async(store: Store<any>, id: string): Promise<any> => {\n  const all = await store.dispatch('management/findAll', { type: MANAGEMENT.SETTING });\n  const setting = (all || []).find((setting: any) => setting.id === id);\n\n  return setting;\n};\n\n/**\n * Carefully fetch mgmt settings\n *\n * Ensures that\n * - Concurrent calls to this function will only result in a single http request\n * - Subsequent calls, when either logged in or logged out, will only result in a single http request\n * - Logged out call will fetch partial settings, after logging in another call will fetch all settings\n *\n * Will be used in many places, particularly multiple times when loading the dashboard\n *\n * Note - We need to specify the url for cases where it can't be determined (i.e. we haven't fetched schemas)\n */\nexport const fetchInitialSettings = async(store: Store<any>): Promise<any> => {\n  const generation = store.getters['management/generation'](MANAGEMENT.SETTING);\n  // We use this as it copies the previous mechanism this was based on (in findAll)\n  // There is the getter `auth/loggedInAs` (which is set given `fromHeader`), but that's initialised after the first call to here (see `authenticated`)\n  const header = store.getters['auth/fromHeader'];\n  const authed = `${ header }` === 'true' || `${ header }` === 'none';\n\n  if (authed) {\n    // We're authed, we will always get the full list\n    return await store.dispatch('management/findAll', {\n      type: MANAGEMENT.SETTING,\n      opt:  { url: `/v1/${ pluralize(MANAGEMENT.SETTING) }` }\n    } );\n  }\n\n  if (!generation) {\n    // We're not authed, and haven't previously fetched settings (no generation)\n    // Fetch settings, put them in the store, but don't say we've got all yet (so subsequent calls will run)\n    return await store.dispatch('management/findAll', {\n      type: MANAGEMENT.SETTING,\n      opt:  {\n        url:                  `/v1/${ pluralize(MANAGEMENT.SETTING) }`,\n        load:                 _MULTI,\n        redirectUnauthorized: false\n      }\n    });\n  }\n\n  // We're not authed, but have a previous value, no need to make a http request to fetch again\n  return store.getters['management/all'](MANAGEMENT.SETTING);\n};\n\nexport const setSetting = async(store: Store<any>, id: string, val: string): Promise<any> => {\n  const setting = await fetchOrCreateSetting(store, id, val, false);\n\n  setting.value = val;\n  await setting.save();\n\n  return setting;\n};\n\nexport const getPerformanceSetting = (rootGetters: Record<string, (arg0: string, arg1: string) => any>): PerfSettings => {\n  const perfSettingResource = rootGetters['management/byId'](MANAGEMENT.SETTING, SETTING.UI_PERFORMANCE);\n  let perfSetting = {};\n\n  if (perfSettingResource?.value) {\n    try {\n      perfSetting = JSON.parse(perfSettingResource.value);\n    } catch (e) {\n      console.warn('ui-performance setting contains invalid data'); // eslint-disable-line no-console\n    }\n  }\n\n  // Start with the default and overwrite the values from the setting - ensures we have defaults for newly added options\n  return Object.assign(DEFAULT_PERF_SETTING, perfSetting || {});\n};\n"],"mappings":"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","ignoreList":[]}]}