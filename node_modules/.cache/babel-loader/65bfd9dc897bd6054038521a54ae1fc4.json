{"remainingRequest":"/home/ubuntu/susecon-2024-ext-demo/node_modules/babel-loader/lib/index.js??ref--16-1!/home/ubuntu/susecon-2024-ext-demo/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/ubuntu/susecon-2024-ext-demo/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/pages/c/_cluster/uiplugins/index.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/pages/c/_cluster/uiplugins/index.vue","mtime":1725271280091},{"path":"/home/ubuntu/susecon-2024-ext-demo/babel.config.js","mtime":1725268750245},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/babel-loader/lib/index.js","mtime":1725271298942},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1725271300920}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90eXBlb2YgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdHlwZW9mIjsKaW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90b0NvbnN1bWFibGVBcnJheSI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHkiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmZ1bmN0aW9uIG93bktleXMoZSwgcikgeyB2YXIgdCA9IE9iamVjdC5rZXlzKGUpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgbyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7IHIgJiYgKG8gPSBvLmZpbHRlcihmdW5jdGlvbiAocikgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLCByKS5lbnVtZXJhYmxlOyB9KSksIHQucHVzaC5hcHBseSh0LCBvKTsgfSByZXR1cm4gdDsgfQpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKGUpIHsgZm9yICh2YXIgciA9IDE7IHIgPCBhcmd1bWVudHMubGVuZ3RoOyByKyspIHsgdmFyIHQgPSBudWxsICE9IGFyZ3VtZW50c1tyXSA/IGFyZ3VtZW50c1tyXSA6IHt9OyByICUgMiA/IG93bktleXMoT2JqZWN0KHQpLCAhMCkuZm9yRWFjaChmdW5jdGlvbiAocikgeyBfZGVmaW5lUHJvcGVydHkoZSwgciwgdFtyXSk7IH0pIDogT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMgPyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyh0KSkgOiBvd25LZXlzKE9iamVjdCh0KSkuZm9yRWFjaChmdW5jdGlvbiAocikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgciwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LCByKSk7IH0pOyB9IHJldHVybiBlOyB9CmltcG9ydCBfcmVnZW5lcmF0b3JSdW50aW1lIGZyb20gIi9ob21lL3VidW50dS9zdXNlY29uLTIwMjQtZXh0LWRlbW8vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL3JlZ2VuZXJhdG9yL2luZGV4LmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wuZGVzY3JpcHRpb24uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maW5kLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5rZXlzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9ycy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC52YWx1ZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0IFZ1ZSBmcm9tICd2dWUnOwppbXBvcnQgeyBtYXBHZXR0ZXJzIH0gZnJvbSAndnVleCc7CmltcG9ydCB7IG1hcFByZWYsIFBMVUdJTl9ERVZFTE9QRVIgfSBmcm9tICdAc2hlbGwvc3RvcmUvcHJlZnMnOwppbXBvcnQgeyBzb3J0QnkgfSBmcm9tICdAc2hlbGwvdXRpbHMvc29ydCc7CmltcG9ydCB7IGFsbEhhc2ggfSBmcm9tICdAc2hlbGwvdXRpbHMvcHJvbWlzZSc7CmltcG9ydCB7IENBVEFMT0csIFVJX1BMVUdJTiwgU0VSVklDRSwgTUFOQUdFTUVOVCB9IGZyb20gJ0BzaGVsbC9jb25maWcvdHlwZXMnOwppbXBvcnQgeyBTRVRUSU5HIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy9zZXR0aW5ncyc7CmltcG9ydCB7IGZldGNoT3JDcmVhdGVTZXR0aW5nIH0gZnJvbSAnQHNoZWxsL3V0aWxzL3NldHRpbmdzJzsKaW1wb3J0IHsgZ2V0VmVyc2lvbkRhdGEgfSBmcm9tICdAc2hlbGwvY29uZmlnL3ZlcnNpb24nOwppbXBvcnQgeyBDQVRBTE9HIGFzIENBVEFMT0dfQU5OT1RBVElPTlMgfSBmcm9tICdAc2hlbGwvY29uZmlnL2xhYmVscy1hbm5vdGF0aW9ucyc7CmltcG9ydCB7IE5BTUUgYXMgQVBQX1BST0RVQ1QgfSBmcm9tICdAc2hlbGwvY29uZmlnL3Byb2R1Y3QvYXBwcyc7CmltcG9ydCBBY3Rpb25NZW51IGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL0FjdGlvbk1lbnUnOwppbXBvcnQgVGFiYmVkIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL1RhYmJlZC9pbmRleC52dWUnOwppbXBvcnQgVGFiIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL1RhYmJlZC9UYWIudnVlJzsKaW1wb3J0IEljb25NZXNzYWdlIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL0ljb25NZXNzYWdlLnZ1ZSc7CmltcG9ydCBMYXp5SW1hZ2UgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvTGF6eUltYWdlJzsKaW1wb3J0IHsgQmFkZ2VTdGF0ZSB9IGZyb20gJ0Bjb21wb25lbnRzL0JhZGdlU3RhdGUnOwppbXBvcnQgVW5pbnN0YWxsRGlhbG9nIGZyb20gJy4vVW5pbnN0YWxsRGlhbG9nLnZ1ZSc7CmltcG9ydCBJbnN0YWxsRGlhbG9nIGZyb20gJy4vSW5zdGFsbERpYWxvZy52dWUnOwppbXBvcnQgQ2F0YWxvZ0xvYWREaWFsb2cgZnJvbSAnLi9DYXRhbG9nTGlzdC9DYXRhbG9nTG9hZERpYWxvZy52dWUnOwppbXBvcnQgQ2F0YWxvZ1VuaW5zdGFsbERpYWxvZyBmcm9tICcuL0NhdGFsb2dMaXN0L0NhdGFsb2dVbmluc3RhbGxEaWFsb2cudnVlJzsKaW1wb3J0IERldmVsb3Blckluc3RhbGxEaWFsb2cgZnJvbSAnLi9EZXZlbG9wZXJJbnN0YWxsRGlhbG9nLnZ1ZSc7CmltcG9ydCBQbHVnaW5JbmZvUGFuZWwgZnJvbSAnLi9QbHVnaW5JbmZvUGFuZWwudnVlJzsKaW1wb3J0IFNldHVwVUlQbHVnaW5zIGZyb20gJy4vU2V0dXBVSVBsdWdpbnMnOwppbXBvcnQgUmVtb3ZlVUlQbHVnaW5zIGZyb20gJy4vUmVtb3ZlVUlQbHVnaW5zJzsKaW1wb3J0IEFkZEV4dGVuc2lvblJlcG9zIGZyb20gJy4vQWRkRXh0ZW5zaW9uUmVwb3MnOwppbXBvcnQgQ2F0YWxvZ0xpc3QgZnJvbSAnLi9DYXRhbG9nTGlzdC9pbmRleC52dWUnOwppbXBvcnQgQmFubmVyIGZyb20gJ0Bjb21wb25lbnRzL0Jhbm5lci9CYW5uZXIudnVlJzsKaW1wb3J0IHsgaXNVSVBsdWdpbiwgdWlQbHVnaW5Bbm5vdGF0aW9uLCB1aVBsdWdpbkhhc0Fubm90YXRpb24sIGlzU3VwcG9ydGVkQ2hhcnRWZXJzaW9uLCBpc0NoYXJ0VmVyc2lvbkF2YWlsYWJsZUZvckluc3RhbGwsIGlzQ2hhcnRWZXJzaW9uSGlnaGVyLCBVSV9QTFVHSU5fTkFNRVNQQUNFLCBVSV9QTFVHSU5fQ0hBUlRfQU5OT1RBVElPTlMsIFVJX1BMVUdJTlNfUkVQT19VUkwsIFVJX1BMVUdJTlNfUEFSVE5FUlNfUkVQT19VUkwgfSBmcm9tICdAc2hlbGwvY29uZmlnL3VpcGx1Z2lucyc7CnZhciBNQVhfREVTQ1JJUFRJT05fTEVOR1RIID0gMjAwOwp2YXIgVEFCU19WQUxVRVMgPSB7CiAgSU5TVEFMTEVEOiAnaW5zdGFsbGVkJywKICBVUERBVEVTOiAndXBkYXRlcycsCiAgQVZBSUxBQkxFOiAnYXZhaWxhYmxlJywKICBBTEw6ICdhbGwnCn07CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBBY3Rpb25NZW51OiBBY3Rpb25NZW51LAogICAgQmFkZ2VTdGF0ZTogQmFkZ2VTdGF0ZSwKICAgIERldmVsb3Blckluc3RhbGxEaWFsb2c6IERldmVsb3Blckluc3RhbGxEaWFsb2csCiAgICBJY29uTWVzc2FnZTogSWNvbk1lc3NhZ2UsCiAgICBDYXRhbG9nTGlzdDogQ2F0YWxvZ0xpc3QsCiAgICBCYW5uZXI6IEJhbm5lciwKICAgIENhdGFsb2dMb2FkRGlhbG9nOiBDYXRhbG9nTG9hZERpYWxvZywKICAgIENhdGFsb2dVbmluc3RhbGxEaWFsb2c6IENhdGFsb2dVbmluc3RhbGxEaWFsb2csCiAgICBJbnN0YWxsRGlhbG9nOiBJbnN0YWxsRGlhbG9nLAogICAgTGF6eUltYWdlOiBMYXp5SW1hZ2UsCiAgICBQbHVnaW5JbmZvUGFuZWw6IFBsdWdpbkluZm9QYW5lbCwKICAgIFRhYjogVGFiLAogICAgVGFiYmVkOiBUYWJiZWQsCiAgICBVbmluc3RhbGxEaWFsb2c6IFVuaW5zdGFsbERpYWxvZywKICAgIFNldHVwVUlQbHVnaW5zOiBTZXR1cFVJUGx1Z2lucywKICAgIFJlbW92ZVVJUGx1Z2luczogUmVtb3ZlVUlQbHVnaW5zLAogICAgQWRkRXh0ZW5zaW9uUmVwb3M6IEFkZEV4dGVuc2lvblJlcG9zCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgdmFyIF9nZXRWZXJzaW9uRGF0YTsKICAgIHJldHVybiB7CiAgICAgIFRBQlNfVkFMVUVTOiBUQUJTX1ZBTFVFUywKICAgICAga3ViZVZlcnNpb246IG51bGwsCiAgICAgIHZpZXc6ICcnLAogICAgICBjaGFydHM6IFtdLAogICAgICBpbnN0YWxsaW5nOiB7fSwKICAgICAgZXJyb3JzOiB7fSwKICAgICAgcGx1Z2luczogW10sCiAgICAgIC8vIFRoZSBpbnN0YWxsZWQgcGx1Z2lucwogICAgICBoZWxtT3BzOiBbXSwKICAgICAgLy8gSGVsbSBvcGVyYXRpb25zCiAgICAgIGFkZEV4dGVuc2lvblJlcG9zQmFubmVyU2V0dGluZzogdW5kZWZpbmVkLAogICAgICBsb2FkaW5nOiB0cnVlLAogICAgICBtZW51VGFyZ2V0RWxlbWVudDogbnVsbCwKICAgICAgbWVudVRhcmdldEV2ZW50OiBudWxsLAogICAgICBtZW51T3BlbjogZmFsc2UsCiAgICAgIGhhc1NlcnZpY2U6IGZhbHNlLAogICAgICBkZWZhdWx0SWNvbjogcmVxdWlyZSgnfnNoZWxsL2Fzc2V0cy9pbWFnZXMvZ2VuZXJpYy1wbHVnaW4uc3ZnJyksCiAgICAgIHJlbG9hZFJlcXVpcmVkOiBmYWxzZSwKICAgICAgcmFuY2hlclZlcnNpb246IChfZ2V0VmVyc2lvbkRhdGEgPSBnZXRWZXJzaW9uRGF0YSgpKSA9PT0gbnVsbCB8fCBfZ2V0VmVyc2lvbkRhdGEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9nZXRWZXJzaW9uRGF0YS5WZXJzaW9uLAogICAgICBzaG93Q2F0YWxvZ0xpc3Q6IGZhbHNlCiAgICB9OwogIH0sCiAgZmV0Y2g6IGZ1bmN0aW9uIGZldGNoKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICB2YXIgX3JlcyRsb2NhbENsdXN0ZXI7CiAgICAgIHZhciBoYXNoLCBpc1NldHVwLCByZXMsIGMsIF90aGlzJCRyZWZzJHRhYnM7CiAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBoYXNoID0ge307CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICByZXR1cm4gX3RoaXMudXBkYXRlSW5zdGFsbFN0YXR1cyh0cnVlKTsKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgaXNTZXR1cCA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgIGlmIChpc1NldHVwKSB7CiAgICAgICAgICAgICAgaWYgKF90aGlzLiRzdG9yZS5nZXR0ZXJzWydtYW5hZ2VtZW50L3NjaGVtYUZvciddKFVJX1BMVUdJTikpIHsKICAgICAgICAgICAgICAgIGhhc2gucGx1Z2lucyA9IF90aGlzLiRzdG9yZS5kaXNwYXRjaCgnbWFuYWdlbWVudC9maW5kQWxsJywgewogICAgICAgICAgICAgICAgICB0eXBlOiBVSV9QTFVHSU4KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNzsKICAgICAgICAgICAgcmV0dXJuIF90aGlzLiRzdG9yZS5kaXNwYXRjaCgnY2F0YWxvZy9sb2FkJywgewogICAgICAgICAgICAgIHJlc2V0OiB0cnVlCiAgICAgICAgICAgIH0pOwogICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICBoYXNoLmxvYWQgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICBpZiAoIV90aGlzLiRzdG9yZS5nZXR0ZXJzWydtYW5hZ2VtZW50L3NjaGVtYUZvciddKE1BTkFHRU1FTlQuQ0xVU1RFUikpIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDExOwogICAgICAgICAgICByZXR1cm4gX3RoaXMuJHN0b3JlLmRpc3BhdGNoKCdtYW5hZ2VtZW50L2ZpbmQnLCB7CiAgICAgICAgICAgICAgdHlwZTogTUFOQUdFTUVOVC5DTFVTVEVSLAogICAgICAgICAgICAgIGlkOiAnbG9jYWwnCiAgICAgICAgICAgIH0pOwogICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgaGFzaC5sb2NhbENsdXN0ZXIgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgaWYgKCFfdGhpcy4kc3RvcmUuZ2V0dGVyc1snbWFuYWdlbWVudC9zY2hlbWFGb3InXShDQVRBTE9HLk9QRVJBVElPTikpIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTY7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE1OwogICAgICAgICAgICByZXR1cm4gX3RoaXMuJHN0b3JlLmRpc3BhdGNoKCdtYW5hZ2VtZW50L2ZpbmRBbGwnLCB7CiAgICAgICAgICAgICAgdHlwZTogQ0FUQUxPRy5PUEVSQVRJT04KICAgICAgICAgICAgfSk7CiAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICBoYXNoLmhlbG1PcHMgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgICAgaWYgKCFfdGhpcy4kc3RvcmUuZ2V0dGVyc1snbWFuYWdlbWVudC9zY2hlbWFGb3InXShDQVRBTE9HLkNMVVNURVJfUkVQTykpIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjA7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE5OwogICAgICAgICAgICByZXR1cm4gX3RoaXMuJHN0b3JlLmRpc3BhdGNoKCdtYW5hZ2VtZW50L2ZpbmRBbGwnLCB7CiAgICAgICAgICAgICAgdHlwZTogQ0FUQUxPRy5DTFVTVEVSX1JFUE8KICAgICAgICAgICAgfSk7CiAgICAgICAgICBjYXNlIDE5OgogICAgICAgICAgICBoYXNoLnJlcG9zID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgIGNhc2UgMjA6CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyMjsKICAgICAgICAgICAgcmV0dXJuIGFsbEhhc2goaGFzaCk7CiAgICAgICAgICBjYXNlIDIyOgogICAgICAgICAgICByZXMgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICBfdGhpcy5wbHVnaW5zID0gcmVzLnBsdWdpbnMgfHwgW107CiAgICAgICAgICAgIF90aGlzLnJlcG9zID0gcmVzLnJlcG9zIHx8IFtdOwogICAgICAgICAgICBfdGhpcy5oZWxtT3BzID0gcmVzLmhlbG1PcHMgfHwgW107CiAgICAgICAgICAgIF90aGlzLmt1YmVWZXJzaW9uID0gKChfcmVzJGxvY2FsQ2x1c3RlciA9IHJlcy5sb2NhbENsdXN0ZXIpID09PSBudWxsIHx8IF9yZXMkbG9jYWxDbHVzdGVyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcmVzJGxvY2FsQ2x1c3Rlci5rdWJlcm5ldGVzVmVyc2lvbkJhc2UpIHx8IFtdOwogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjk7CiAgICAgICAgICAgIHJldHVybiBmZXRjaE9yQ3JlYXRlU2V0dGluZyhfdGhpcy4kc3RvcmUsIFNFVFRJTkcuQUREX0VYVEVOU0lPTl9SRVBPU19CQU5ORVJfRElTUExBWSwgJ3RydWUnLCB0cnVlKTsKICAgICAgICAgIGNhc2UgMjk6CiAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgaWYgKF9jb250ZXh0LnQwKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDMyOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIF9jb250ZXh0LnQwID0ge307CiAgICAgICAgICBjYXNlIDMyOgogICAgICAgICAgICBfdGhpcy5hZGRFeHRlbnNpb25SZXBvc0Jhbm5lclNldHRpbmcgPSBfY29udGV4dC50MDsKICAgICAgICAgICAgYyA9IF90aGlzLiRzdG9yZS5nZXR0ZXJzWydjYXRhbG9nL3Jhd0NoYXJ0cyddOwogICAgICAgICAgICBfdGhpcy5jaGFydHMgPSBPYmplY3QudmFsdWVzKGMpOwoKICAgICAgICAgICAgLy8gSWYgdGhlcmUgYXJlIG5vIHBsdWdpbnMgaW5zdGFsbGVkLCBkZWZhdWx0IHRvIHRoZSBjYXRhbG9nIHZpZXcKICAgICAgICAgICAgaWYgKF90aGlzLnBsdWdpbnMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgICAgKF90aGlzJCRyZWZzJHRhYnMgPSBfdGhpcy4kcmVmcy50YWJzKSA9PT0gbnVsbCB8fCBfdGhpcyQkcmVmcyR0YWJzID09PSB2b2lkIDAgfHwgX3RoaXMkJHJlZnMkdGFicy5zZWxlY3QoVEFCU19WQUxVRVMuQVZBSUxBQkxFKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBfdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICBjYXNlIDM3OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUpOwogICAgfSkpKCk7CiAgfSwKICBjb21wdXRlZDogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7CiAgICBwbHVnaW5EZXZlbG9wZXI6IG1hcFByZWYoUExVR0lOX0RFVkVMT1BFUikKICB9LCBtYXBHZXR0ZXJzKHsKICAgIHVpcGx1Z2luczogJ3VpcGx1Z2lucy9wbHVnaW5zJwogIH0pKSwgbWFwR2V0dGVycyh7CiAgICB1aUVycm9yczogJ3VpcGx1Z2lucy9lcnJvcnMnCiAgfSkpLCBtYXBHZXR0ZXJzKHsKICAgIHRoZW1lOiAncHJlZnMvdGhlbWUnCiAgfSkpLCB7fSwgewogICAgc2hvd0FkZFJlcG9zQmFubmVyOiBmdW5jdGlvbiBzaG93QWRkUmVwb3NCYW5uZXIoKSB7CiAgICAgIHZhciBfdGhpcyRhZGRFeHRlbnNpb25SZXA7CiAgICAgIHJldHVybiAoKF90aGlzJGFkZEV4dGVuc2lvblJlcCA9IHRoaXMuYWRkRXh0ZW5zaW9uUmVwb3NCYW5uZXJTZXR0aW5nKSA9PT0gbnVsbCB8fCBfdGhpcyRhZGRFeHRlbnNpb25SZXAgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJGFkZEV4dGVuc2lvblJlcC52YWx1ZSkgPT09ICd0cnVlJyAmJiAoIXRoaXMucmVwb3MuZmluZChmdW5jdGlvbiAocikgewogICAgICAgIHJldHVybiByLnVybERpc3BsYXkgPT09IFVJX1BMVUdJTlNfUkVQT19VUkw7CiAgICAgIH0pIHx8ICF0aGlzLnJlcG9zLmZpbmQoZnVuY3Rpb24gKHIpIHsKICAgICAgICByZXR1cm4gci51cmxEaXNwbGF5ID09PSBVSV9QTFVHSU5TX1BBUlRORVJTX1JFUE9fVVJMOwogICAgICB9KSk7CiAgICB9LAogICAgYXBwbHlEYXJrTW9kZUJnOiBmdW5jdGlvbiBhcHBseURhcmtNb2RlQmcoKSB7CiAgICAgIGlmICh0aGlzLnRoZW1lID09PSAnZGFyaycpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgJ2RhcmstbW9kZSc6IHRydWUKICAgICAgICB9OwogICAgICB9CiAgICAgIHJldHVybiB7fTsKICAgIH0sCiAgICBtZW51QWN0aW9uczogZnVuY3Rpb24gbWVudUFjdGlvbnMoKSB7CiAgICAgIHZhciBtZW51QWN0aW9ucyA9IFtdOwoKICAgICAgLy8gQWRkIGxpbmsgdG8gZ28gdG8gdGhlIFJlcG9zIHZpZXcgb2YgdGhlIGxvY2FsIGNsdXN0ZXIKICAgICAgbWVudUFjdGlvbnMucHVzaCh7CiAgICAgICAgYWN0aW9uOiAnbWFuYWdlUmVwb3MnLAogICAgICAgIGxhYmVsOiB0aGlzLnQoJ3BsdWdpbnMubWFuYWdlUmVwb3MnKSwKICAgICAgICBlbmFibGVkOiB0cnVlCiAgICAgIH0pOwoKICAgICAgLy8gQWRkIGxpbmsgdG8gYWRkIGV4dGVuc2lvbnMgcmVwb3NpdG9yaWVzIChPZmZpY2lhbCwgUGFydG5lcnMsIGV0YykKICAgICAgbWVudUFjdGlvbnMucHVzaCh7CiAgICAgICAgYWN0aW9uOiAnYWRkUmFuY2hlclJlcG9zJywKICAgICAgICBsYWJlbDogdGhpcy50KCdwbHVnaW5zLmFkZFJhbmNoZXJSZXBvcycpLAogICAgICAgIGVuYWJsZWQ6IHRydWUKICAgICAgfSk7CgogICAgICAvLyBPbmx5IHNob3cgTWFuYWdlIEV4dGVuc2lvbiBDYXRhbG9ncyB3aGVuIG9uIG1haW4gY2hhcnRzIHZpZXcKICAgICAgaWYgKCF0aGlzLnNob3dDYXRhbG9nTGlzdCkgewogICAgICAgIG1lbnVBY3Rpb25zLnB1c2goewogICAgICAgICAgYWN0aW9uOiAnbWFuYWdlRXh0ZW5zaW9uVmlldycsCiAgICAgICAgICBsYWJlbDogdGhpcy50KCdwbHVnaW5zLm1hbmFnZUNhdGFsb2cubGFiZWwnKSwKICAgICAgICAgIGVuYWJsZWQ6IHRydWUKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgLy8gT25seSBzaG93IERldmVsb3BlciBMb2FkIGFjdGlvbiBpZiB0aGUgdXNlciBoYXMgdGhpcyBlbmFibGVkIGluIHByZWZlcmVuY2VzCiAgICAgIGlmICh0aGlzLnBsdWdpbkRldmVsb3BlcikgewogICAgICAgIG1lbnVBY3Rpb25zLnB1c2goewogICAgICAgICAgZGl2aWRlcjogdHJ1ZQogICAgICAgIH0pOwogICAgICAgIG1lbnVBY3Rpb25zLnB1c2goewogICAgICAgICAgYWN0aW9uOiAnZGV2TG9hZCcsCiAgICAgICAgICBsYWJlbDogdGhpcy50KCdwbHVnaW5zLmRldmVsb3Blci5sYWJlbCcpLAogICAgICAgICAgZW5hYmxlZDogdHJ1ZQogICAgICAgIH0pOwogICAgICB9CiAgICAgIGlmICh0aGlzLmhhc1NlcnZpY2UpIHsKICAgICAgICBtZW51QWN0aW9ucy5wdXNoKHsKICAgICAgICAgIGRpdmlkZXI6IHRydWUKICAgICAgICB9KTsKICAgICAgICBtZW51QWN0aW9ucy5wdXNoKHsKICAgICAgICAgIGFjdGlvbjogJ3JlbW92ZVBsdWdpblN1cHBvcnQnLAogICAgICAgICAgbGFiZWw6IHRoaXMudCgncGx1Z2lucy5zZXR1cC5yZW1vdmUubGFiZWwnKSwKICAgICAgICAgIGVuYWJsZWQ6IHRydWUKICAgICAgICB9KTsKICAgICAgfQogICAgICByZXR1cm4gbWVudUFjdGlvbnM7CiAgICB9LAogICAgbGlzdDogZnVuY3Rpb24gbGlzdCgpIHsKICAgICAgdmFyIGFsbCA9IHRoaXMuYXZhaWxhYmxlOwogICAgICBzd2l0Y2ggKHRoaXMudmlldykgewogICAgICAgIGNhc2UgVEFCU19WQUxVRVMuSU5TVEFMTEVEOgogICAgICAgICAgcmV0dXJuIGFsbC5maWx0ZXIoZnVuY3Rpb24gKHApIHsKICAgICAgICAgICAgcmV0dXJuICEhcC5pbnN0YWxsZWQgfHwgISFwLmluc3RhbGxpbmc7CiAgICAgICAgICB9KTsKICAgICAgICBjYXNlIFRBQlNfVkFMVUVTLlVQREFURVM6CiAgICAgICAgICByZXR1cm4gdGhpcy51cGRhdGVzOwogICAgICAgIGNhc2UgVEFCU19WQUxVRVMuQVZBSUxBQkxFOgogICAgICAgICAgcmV0dXJuIGFsbC5maWx0ZXIoZnVuY3Rpb24gKHApIHsKICAgICAgICAgICAgcmV0dXJuICFwLmluc3RhbGxlZDsKICAgICAgICAgIH0pOwogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICByZXR1cm4gYWxsOwogICAgICB9CiAgICB9LAogICAgaGFzTWVudUFjdGlvbnM6IGZ1bmN0aW9uIGhhc01lbnVBY3Rpb25zKCkgewogICAgICB2YXIgX3RoaXMkbWVudUFjdGlvbnM7CiAgICAgIHJldHVybiAoKF90aGlzJG1lbnVBY3Rpb25zID0gdGhpcy5tZW51QWN0aW9ucykgPT09IG51bGwgfHwgX3RoaXMkbWVudUFjdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJG1lbnVBY3Rpb25zLmxlbmd0aCkgPiAwOwogICAgfSwKICAgIC8vIE1lc3NhZ2UgdG8gZGlzcGxheSB3aGVuIHRoZSB0YWIgdmlldyBpcyBlbXB0eSAoZGVwZW5kcyBvbiB0aGUgdGFiKQogICAgZW1wdHlNZXNzYWdlOiBmdW5jdGlvbiBlbXB0eU1lc3NhZ2UoKSB7CiAgICAgIHJldHVybiB0aGlzLnQoInBsdWdpbnMuZW1wdHkuIi5jb25jYXQodGhpcy52aWV3KSk7CiAgICB9LAogICAgdXBkYXRlczogZnVuY3Rpb24gdXBkYXRlcygpIHsKICAgICAgcmV0dXJuIHRoaXMuYXZhaWxhYmxlLmZpbHRlcihmdW5jdGlvbiAocGx1Z2luKSB7CiAgICAgICAgcmV0dXJuICEhcGx1Z2luLnVwZ3JhZGU7CiAgICAgIH0pOwogICAgfSwKICAgIGF2YWlsYWJsZTogZnVuY3Rpb24gYXZhaWxhYmxlKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKICAgICAgdmFyIGFsbCA9IHRoaXMuY2hhcnRzLmZpbHRlcihmdW5jdGlvbiAoYykgewogICAgICAgIHJldHVybiBpc1VJUGx1Z2luKGMpOwogICAgICB9KTsKCiAgICAgIC8vIEZpbHRlciBvdXQgaGlkZGVuIGNoYXJ0cwogICAgICBhbGwgPSBhbGwuZmlsdGVyKGZ1bmN0aW9uIChjKSB7CiAgICAgICAgcmV0dXJuICF1aVBsdWdpbkhhc0Fubm90YXRpb24oYywgQ0FUQUxPR19BTk5PVEFUSU9OUy5ISURERU4sICd0cnVlJyk7CiAgICAgIH0pOwogICAgICBhbGwgPSBhbGwubWFwKGZ1bmN0aW9uIChjaGFydCkgewogICAgICAgIHZhciBfaXRlbSRpbnN0YWxsYWJsZVZlcnMsIF9pdGVtJGluc3RhbGxhYmxlVmVyczI7CiAgICAgICAgLy8gTGFiZWwgY2FuIGJlIG92ZXJyaWRkZW4gYnkgY2hhcnQgYW5ub3RhdGlvbgogICAgICAgIHZhciBsYWJlbCA9IHVpUGx1Z2luQW5ub3RhdGlvbihjaGFydCwgVUlfUExVR0lOX0NIQVJUX0FOTk9UQVRJT05TLkRJU1BMQVlfTkFNRSkgfHwgY2hhcnQuY2hhcnROYW1lRGlzcGxheTsKICAgICAgICB2YXIgaXRlbSA9IHsKICAgICAgICAgIG5hbWU6IGNoYXJ0LmNoYXJ0TmFtZSwKICAgICAgICAgIGxhYmVsOiBsYWJlbCwKICAgICAgICAgIGRlc2NyaXB0aW9uOiBjaGFydC5jaGFydERlc2NyaXB0aW9uLAogICAgICAgICAgaWQ6IGNoYXJ0LmlkLAogICAgICAgICAgdmVyc2lvbnM6IFtdLAogICAgICAgICAgaW5zdGFsbGVkOiBmYWxzZSwKICAgICAgICAgIGJ1aWx0aW46IGZhbHNlLAogICAgICAgICAgZXhwZXJpbWVudGFsOiB1aVBsdWdpbkhhc0Fubm90YXRpb24oY2hhcnQsIENBVEFMT0dfQU5OT1RBVElPTlMuRVhQRVJJTUVOVEFMLCAndHJ1ZScpLAogICAgICAgICAgY2VydGlmaWVkOiB1aVBsdWdpbkhhc0Fubm90YXRpb24oY2hhcnQsIENBVEFMT0dfQU5OT1RBVElPTlMuQ0VSVElGSUVELCBDQVRBTE9HX0FOTk9UQVRJT05TLl9SQU5DSEVSKQogICAgICAgIH07CiAgICAgICAgaXRlbS52ZXJzaW9ucyA9IF90b0NvbnN1bWFibGVBcnJheShjaGFydC52ZXJzaW9ucyk7CiAgICAgICAgaXRlbS5jaGFydCA9IGNoYXJ0OwoKICAgICAgICAvLyBGaWx0ZXIgdGhlIHZlcnNpb25zIGF2YWlsYWJsZSB0byBpbnN0YWxsIChwbHVnaW5zLWFwaSB2ZXJzaW9uIGFuZCBjdXJyZW50IGRhc2hib2FyZCB2ZXJzaW9uKQogICAgICAgIGl0ZW0uaW5zdGFsbGFibGVWZXJzaW9ucyA9IGl0ZW0udmVyc2lvbnMuZmlsdGVyKGZ1bmN0aW9uICh2ZXJzaW9uKSB7CiAgICAgICAgICByZXR1cm4gaXNTdXBwb3J0ZWRDaGFydFZlcnNpb24oewogICAgICAgICAgICB2ZXJzaW9uOiB2ZXJzaW9uLAogICAgICAgICAgICBrdWJlVmVyc2lvbjogX3RoaXMyLmt1YmVWZXJzaW9uCiAgICAgICAgICB9KSAmJiBpc0NoYXJ0VmVyc2lvbkF2YWlsYWJsZUZvckluc3RhbGwoewogICAgICAgICAgICB2ZXJzaW9uOiB2ZXJzaW9uLAogICAgICAgICAgICByYW5jaGVyVmVyc2lvbjogX3RoaXMyLnJhbmNoZXJWZXJzaW9uLAogICAgICAgICAgICBrdWJlVmVyc2lvbjogX3RoaXMyLmt1YmVWZXJzaW9uCiAgICAgICAgICB9KTsKICAgICAgICB9KTsKCiAgICAgICAgLy8gYWRkIHByb3AgdG8gdmVyc2lvbiBvYmplY3QgaWYgdmVyc2lvbiBpcyBjb21wYXRpYmxlIHdpdGggdGhlIGN1cnJlbnQgZGFzaGJvYXJkIHZlcnNpb24KICAgICAgICBpdGVtLnZlcnNpb25zID0gaXRlbS52ZXJzaW9ucy5tYXAoZnVuY3Rpb24gKHZlcnNpb24pIHsKICAgICAgICAgIHJldHVybiBpc0NoYXJ0VmVyc2lvbkF2YWlsYWJsZUZvckluc3RhbGwoewogICAgICAgICAgICB2ZXJzaW9uOiB2ZXJzaW9uLAogICAgICAgICAgICByYW5jaGVyVmVyc2lvbjogX3RoaXMyLnJhbmNoZXJWZXJzaW9uLAogICAgICAgICAgICBrdWJlVmVyc2lvbjogX3RoaXMyLmt1YmVWZXJzaW9uCiAgICAgICAgICB9LCB0cnVlKTsKICAgICAgICB9KTsKICAgICAgICB2YXIgbGF0ZXN0Q29tcGF0aWJsZSA9IChfaXRlbSRpbnN0YWxsYWJsZVZlcnMgPSBpdGVtLmluc3RhbGxhYmxlVmVyc2lvbnMpID09PSBudWxsIHx8IF9pdGVtJGluc3RhbGxhYmxlVmVycyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2l0ZW0kaW5zdGFsbGFibGVWZXJzWzBdOwogICAgICAgIHZhciBsYXRlc3ROb3RDb21wYXRpYmxlID0gaXRlbS52ZXJzaW9ucy5maW5kKGZ1bmN0aW9uICh2ZXJzaW9uKSB7CiAgICAgICAgICByZXR1cm4gIXZlcnNpb24uaXNDb21wYXRpYmxlV2l0aFVpIHx8ICF2ZXJzaW9uLmlzQ29tcGF0aWJsZVdpdGhLdWJlVmVyc2lvbjsKICAgICAgICB9KTsKICAgICAgICBpZiAobGF0ZXN0Q29tcGF0aWJsZSkgewogICAgICAgICAgaXRlbS5kaXNwbGF5VmVyc2lvbiA9IGxhdGVzdENvbXBhdGlibGUudmVyc2lvbjsKICAgICAgICAgIGl0ZW0uaWNvbiA9IGxhdGVzdENvbXBhdGlibGUuaWNvbjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdmFyIF9pdGVtJHZlcnNpb25zLCBfbGF0ZXN0Q29tcGF0aWJsZSRhbm47CiAgICAgICAgICBpdGVtLmRpc3BsYXlWZXJzaW9uID0gKF9pdGVtJHZlcnNpb25zID0gaXRlbS52ZXJzaW9ucykgPT09IG51bGwgfHwgX2l0ZW0kdmVyc2lvbnMgPT09IHZvaWQgMCB8fCAoX2l0ZW0kdmVyc2lvbnMgPSBfaXRlbSR2ZXJzaW9uc1swXSkgPT09IG51bGwgfHwgX2l0ZW0kdmVyc2lvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9pdGVtJHZlcnNpb25zLnZlcnNpb247CiAgICAgICAgICBpdGVtLmljb24gPSBjaGFydC5pY29uIHx8IChsYXRlc3RDb21wYXRpYmxlID09PSBudWxsIHx8IGxhdGVzdENvbXBhdGlibGUgPT09IHZvaWQgMCB8fCAoX2xhdGVzdENvbXBhdGlibGUkYW5uID0gbGF0ZXN0Q29tcGF0aWJsZS5hbm5vdGF0aW9ucykgPT09IG51bGwgfHwgX2xhdGVzdENvbXBhdGlibGUkYW5uID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfbGF0ZXN0Q29tcGF0aWJsZSRhbm5bJ2NhdGFsb2cuY2F0dGxlLmlvL3VpLWljb24nXSk7CiAgICAgICAgfQogICAgICAgIGlmIChsYXRlc3ROb3RDb21wYXRpYmxlICYmIGl0ZW0uaW5zdGFsbGFibGVWZXJzaW9ucy5sZW5ndGggJiYgaXNDaGFydFZlcnNpb25IaWdoZXIobGF0ZXN0Tm90Q29tcGF0aWJsZS52ZXJzaW9uLCAoX2l0ZW0kaW5zdGFsbGFibGVWZXJzMiA9IGl0ZW0uaW5zdGFsbGFibGVWZXJzaW9ucykgPT09IG51bGwgfHwgX2l0ZW0kaW5zdGFsbGFibGVWZXJzMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2l0ZW0kaW5zdGFsbGFibGVWZXJzMlswXS52ZXJzaW9uKSkgewogICAgICAgICAgaWYgKCFpdGVtLmlzQ29tcGF0aWJsZVdpdGhVaSkgewogICAgICAgICAgICBpdGVtLmluY29tcGF0aWJsZVJhbmNoZXJWZXJzaW9uID0gX3RoaXMyLnQoJ3BsdWdpbnMuaW5jb21wYXRpYmxlUmFuY2hlclZlcnNpb24nLCB7CiAgICAgICAgICAgICAgdmVyc2lvbjogbGF0ZXN0Tm90Q29tcGF0aWJsZS52ZXJzaW9uLAogICAgICAgICAgICAgIHJhbmNoZXJWZXJzaW9uOiBsYXRlc3ROb3RDb21wYXRpYmxlLnJlcXVpcmVkVWlWZXJzaW9uCiAgICAgICAgICAgIH0sIHRydWUpOwogICAgICAgICAgfSBlbHNlIGlmICghaXRlbS5pc0NvbXBhdGlibGVXaXRoS3ViZVZlcnNpb24pIHsKICAgICAgICAgICAgaXRlbS5pbmNvbXBhdGlibGVLdWJlVmVyc2lvbiA9IF90aGlzMi50KCdwbHVnaW5zLmluY29tcGF0aWJsZUt1YmVWZXJzaW9uJywgewogICAgICAgICAgICAgIHZlcnNpb246IGxhdGVzdE5vdENvbXBhdGlibGUudmVyc2lvbiwKICAgICAgICAgICAgICBrdWJlVmVyc2lvbjogbGF0ZXN0Tm90Q29tcGF0aWJsZS5yZXF1aXJlZEt1YmVWZXJzaW9uCiAgICAgICAgICAgIH0sIHRydWUpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAoX3RoaXMyLmluc3RhbGxpbmdbaXRlbS5uYW1lXSkgewogICAgICAgICAgaXRlbS5pbnN0YWxsaW5nID0gX3RoaXMyLmluc3RhbGxpbmdbaXRlbS5uYW1lXTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGl0ZW07CiAgICAgIH0pOwoKICAgICAgLy8gUmVtb3ZlIGNoYXJ0cyB3aXRoIG5vIGluc3RhbGxhYmxlIHZlcnNpb25zCiAgICAgIGFsbCA9IGFsbC5maWx0ZXIoZnVuY3Rpb24gKGMpIHsKICAgICAgICByZXR1cm4gYy52ZXJzaW9ucy5sZW5ndGggPiAwOwogICAgICB9KTsKCiAgICAgIC8vIENoZWNrIHRoYXQgYWxsIG9mIHRoZSBsb2FkZWQgcGx1Z2lucyBhcmUgcmVwcmVzZW50ZWQKICAgICAgdGhpcy51aXBsdWdpbnMuZm9yRWFjaChmdW5jdGlvbiAocCkgewogICAgICAgIHZhciBjaGFydCA9IGFsbC5maW5kKGZ1bmN0aW9uIChjKSB7CiAgICAgICAgICByZXR1cm4gYy5uYW1lID09PSBwLm5hbWU7CiAgICAgICAgfSk7CiAgICAgICAgaWYgKCFjaGFydCkgewogICAgICAgICAgdmFyIF9wJG1ldGFkYXRhLCBfcmFuY2hlciRhbm5vdGF0aW9ucywgX3AkbWV0YWRhdGEyLCBfcCRtZXRhZGF0YTMsIF9wJG1ldGFkYXRhNDsKICAgICAgICAgIC8vIEEgcGx1Z2luIGlzIGxvYWRlZCwgYnV0IHRoZXJlIGlzIG5vIGNoYXJ0LCBzbyBhZGQgYW4gaXRlbSBzbyB0aGF0IGl0IHNob3dzIHVwCiAgICAgICAgICB2YXIgcmFuY2hlciA9IF90eXBlb2YoKF9wJG1ldGFkYXRhID0gcC5tZXRhZGF0YSkgPT09IG51bGwgfHwgX3AkbWV0YWRhdGEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9wJG1ldGFkYXRhLnJhbmNoZXIpID09PSAnb2JqZWN0JyA/IHAubWV0YWRhdGEucmFuY2hlciA6IHt9OwogICAgICAgICAgdmFyIGxhYmVsID0gKChfcmFuY2hlciRhbm5vdGF0aW9ucyA9IHJhbmNoZXIuYW5ub3RhdGlvbnMpID09PSBudWxsIHx8IF9yYW5jaGVyJGFubm90YXRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcmFuY2hlciRhbm5vdGF0aW9uc1tVSV9QTFVHSU5fQ0hBUlRfQU5OT1RBVElPTlMuRElTUExBWV9OQU1FXSkgfHwgcC5uYW1lOwogICAgICAgICAgdmFyIGl0ZW0gPSB7CiAgICAgICAgICAgIG5hbWU6IHAubmFtZSwKICAgICAgICAgICAgbGFiZWw6IGxhYmVsLAogICAgICAgICAgICBkZXNjcmlwdGlvbjogKF9wJG1ldGFkYXRhMiA9IHAubWV0YWRhdGEpID09PSBudWxsIHx8IF9wJG1ldGFkYXRhMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3AkbWV0YWRhdGEyLmRlc2NyaXB0aW9uLAogICAgICAgICAgICBpY29uOiAoX3AkbWV0YWRhdGEzID0gcC5tZXRhZGF0YSkgPT09IG51bGwgfHwgX3AkbWV0YWRhdGEzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcCRtZXRhZGF0YTMuaWNvbiwKICAgICAgICAgICAgaWQ6IHAuaWQsCiAgICAgICAgICAgIHZlcnNpb25zOiBbXSwKICAgICAgICAgICAgZGlzcGxheVZlcnNpb246ICgoX3AkbWV0YWRhdGE0ID0gcC5tZXRhZGF0YSkgPT09IG51bGwgfHwgX3AkbWV0YWRhdGE0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcCRtZXRhZGF0YTQudmVyc2lvbikgfHwgJy0nLAogICAgICAgICAgICBpbnN0YWxsZWQ6IHRydWUsCiAgICAgICAgICAgIGJ1aWx0aW46ICEhcC5idWlsdGluCiAgICAgICAgICB9OwoKICAgICAgICAgIC8vIEJ1aWx0LWluIHBsdWdpbnMgY2FuIGNob3NlIHRvIGJlIGhpZGRlbiAtIHVzZWQgd2hlcmUgd2UgaW1wbGVtZW50IGFzIGV4dGVuc2lvbnMKICAgICAgICAgIC8vIGJ1dCBkb24ndCB3YW50IHRvIHNob3dzIHRoZW0gaW5kaXZpZHVhbGx5IG9uIHRoZSBleHRlbnNpb25zIHBhZ2UKICAgICAgICAgIGlmICghKGl0ZW0uYnVpbHRpbiAmJiByYW5jaGVyW1VJX1BMVUdJTl9DSEFSVF9BTk5PVEFUSU9OUy5ISURERU5fQlVJTFRJTl0pKSB7CiAgICAgICAgICAgIGFsbC5wdXNoKGl0ZW0pOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CgogICAgICAvLyBHbyB0aHJvdWdoIHRoZSBDUnMgZm9yIHRoZSBwbHVnaW5zIGFuZCB3aXJlIHRoZW0gaW50byB0aGUgY2F0YWxvZwogICAgICB0aGlzLnBsdWdpbnMuZm9yRWFjaChmdW5jdGlvbiAocCkgewogICAgICAgIHZhciBjaGFydCA9IGFsbC5maW5kKGZ1bmN0aW9uIChjKSB7CiAgICAgICAgICByZXR1cm4gYy5uYW1lID09PSBwLm5hbWU7CiAgICAgICAgfSk7CiAgICAgICAgaWYgKGNoYXJ0KSB7CiAgICAgICAgICB2YXIgX2NoYXJ0JGluc3RhbGxhYmxlVmVyLCBfY2hhcnQkaW5zdGFsbGFibGVWZXIyOwogICAgICAgICAgY2hhcnQuaW5zdGFsbGVkID0gdHJ1ZTsKICAgICAgICAgIGNoYXJ0LnVpcGx1Z2luID0gcDsKICAgICAgICAgIGNoYXJ0LmRpc3BsYXlWZXJzaW9uID0gcC52ZXJzaW9uOwoKICAgICAgICAgIC8vIENhbid0IGRvIHRoaXMgaGVyZQogICAgICAgICAgY2hhcnQuaW5zdGFsbGluZyA9IF90aGlzMi5pbnN0YWxsaW5nW2NoYXJ0Lm5hbWVdOwoKICAgICAgICAgIC8vIENoZWNrIGZvciB1cGdyYWRlCiAgICAgICAgICBpZiAoKF9jaGFydCRpbnN0YWxsYWJsZVZlciA9IGNoYXJ0Lmluc3RhbGxhYmxlVmVyc2lvbnMpICE9PSBudWxsICYmIF9jaGFydCRpbnN0YWxsYWJsZVZlciAhPT0gdm9pZCAwICYmIF9jaGFydCRpbnN0YWxsYWJsZVZlci5sZW5ndGggJiYgcC52ZXJzaW9uICE9PSAoKF9jaGFydCRpbnN0YWxsYWJsZVZlcjIgPSBjaGFydC5pbnN0YWxsYWJsZVZlcnNpb25zKSA9PT0gbnVsbCB8fCBfY2hhcnQkaW5zdGFsbGFibGVWZXIyID09PSB2b2lkIDAgfHwgKF9jaGFydCRpbnN0YWxsYWJsZVZlcjIgPSBfY2hhcnQkaW5zdGFsbGFibGVWZXIyWzBdKSA9PT0gbnVsbCB8fCBfY2hhcnQkaW5zdGFsbGFibGVWZXIyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfY2hhcnQkaW5zdGFsbGFibGVWZXIyLnZlcnNpb24pKSB7CiAgICAgICAgICAgIGNoYXJ0LnVwZ3JhZGUgPSBjaGFydC5pbnN0YWxsYWJsZVZlcnNpb25zWzBdLnZlcnNpb247CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIC8vIE5vIGNoYXJ0LCBzbyBhZGQgYSBjYXJkIGZvciB0aGUgcGx1Z2luIGJhc2VkIG9uIGl0cyBDdXN0b20gcmVzb3VyY2UgYmVpbmcgcHJlc2VudAogICAgICAgICAgdmFyIGl0ZW0gPSB7CiAgICAgICAgICAgIG5hbWU6IHAubmFtZSwKICAgICAgICAgICAgbGFiZWw6IHAubmFtZSwKICAgICAgICAgICAgZGVzY3JpcHRpb246IHAuZGVzY3JpcHRpb24gfHwgJy0nLAogICAgICAgICAgICBpZDogIiIuY29uY2F0KHAubmFtZSwgIi0iKS5jb25jYXQocC52ZXJzaW9uKSwKICAgICAgICAgICAgdmVyc2lvbnM6IFtdLAogICAgICAgICAgICBkaXNwbGF5VmVyc2lvbjogcC52ZXJzaW9uIHx8ICctJywKICAgICAgICAgICAgaW5zdGFsbGVkOiB0cnVlLAogICAgICAgICAgICBpbnN0YWxsaW5nOiBmYWxzZSwKICAgICAgICAgICAgYnVpbHRpbjogZmFsc2UsCiAgICAgICAgICAgIHVpcGx1Z2luOiBwCiAgICAgICAgICB9OwogICAgICAgICAgYWxsLnB1c2goaXRlbSk7CiAgICAgICAgfQogICAgICB9KTsKCiAgICAgIC8vIE1lcmdlIGluIHRoZSBwbHVnaW4gbG9hZCBlcnJvcnMKICAgICAgT2JqZWN0LmtleXModGhpcy51aUVycm9ycykuZm9yRWFjaChmdW5jdGlvbiAoZSkgewogICAgICAgIHZhciBjaGFydCA9IGFsbC5maW5kKGZ1bmN0aW9uIChjKSB7CiAgICAgICAgICByZXR1cm4gYy5uYW1lID09PSBlOwogICAgICAgIH0pOwogICAgICAgIGlmIChjaGFydCkgewogICAgICAgICAgdmFyIGVycm9yID0gX3RoaXMyLnVpRXJyb3JzW2VdOwogICAgICAgICAgaWYgKGVycm9yICYmIHR5cGVvZiBlcnJvciA9PT0gJ3N0cmluZycpIHsKICAgICAgICAgICAgY2hhcnQuZXJyb3IgPSBfdGhpczIudChfdGhpczIudWlFcnJvcnNbZV0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY2hhcnQuZXJyb3IgPSBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwoKICAgICAgLy8gTWVyZ2UgaW4gdGhlIHBsdWdpbiBsb2FkIGVycm9ycyBmcm9tIGhlbHAgb3BzCiAgICAgIE9iamVjdC5rZXlzKHRoaXMuZXJyb3JzKS5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgdmFyIGNoYXJ0ID0gYWxsLmZpbmQoZnVuY3Rpb24gKGMpIHsKICAgICAgICAgIHJldHVybiBjLm5hbWUgPT09IGU7CiAgICAgICAgfSk7CiAgICAgICAgaWYgKGNoYXJ0KSB7CiAgICAgICAgICBjaGFydC5oZWxtRXJyb3IgPSAhIV90aGlzMi5lcnJvcnNbZV07CiAgICAgICAgfQogICAgICB9KTsKICAgICAgYWxsLmZvckVhY2goZnVuY3Rpb24gKHBsdWdpbikgewogICAgICAgIC8vIENsYW1wIHRoZSBsZW5ndGhzIG9mIHRoZSBkZXNjcmlwdGlvbnMKICAgICAgICBpZiAocGx1Z2luLmRlc2NyaXB0aW9uICYmIHBsdWdpbi5kZXNjcmlwdGlvbi5sZW5ndGggPiBNQVhfREVTQ1JJUFRJT05fTEVOR1RIKSB7CiAgICAgICAgICBwbHVnaW4uZGVzY3JpcHRpb24gPSAiIi5jb25jYXQocGx1Z2luLmRlc2NyaXB0aW9uLnN1YnN0cigwLCBNQVhfREVTQ1JJUFRJT05fTEVOR1RIKSwgIiAuLi4iKTsKICAgICAgICB9CgogICAgICAgIC8vIGNoZWNrIGlmIGt1YmUgdmVyc2lvbiBjb21wYXRpYmlsaXR5IGlzIG1ldCBmb3IgaW5zdGFsbGVkIGV4dGVuc2lvbgogICAgICAgIGlmIChwbHVnaW4udWlwbHVnaW4pIHsKICAgICAgICAgIHZhciBfcGx1Z2luJHVpcGx1Z2luJHNwZWM7CiAgICAgICAgICB2YXIgdmVyc2lvbkluc3RhbGxlZCA9IChfcGx1Z2luJHVpcGx1Z2luJHNwZWMgPSBwbHVnaW4udWlwbHVnaW4uc3BlYykgPT09IG51bGwgfHwgX3BsdWdpbiR1aXBsdWdpbiRzcGVjID09PSB2b2lkIDAgfHwgKF9wbHVnaW4kdWlwbHVnaW4kc3BlYyA9IF9wbHVnaW4kdWlwbHVnaW4kc3BlYy5wbHVnaW4pID09PSBudWxsIHx8IF9wbHVnaW4kdWlwbHVnaW4kc3BlYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3BsdWdpbiR1aXBsdWdpbiRzcGVjLnZlcnNpb247CiAgICAgICAgICB2YXIgdmVyc2lvbkluc3RhbGxlZERhdGEgPSBwbHVnaW4udmVyc2lvbnMuZmluZChmdW5jdGlvbiAodikgewogICAgICAgICAgICByZXR1cm4gdi52ZXJzaW9uID09PSB2ZXJzaW9uSW5zdGFsbGVkOwogICAgICAgICAgfSk7CiAgICAgICAgICBpZiAodmVyc2lvbkluc3RhbGxlZERhdGEpIHsKICAgICAgICAgICAgdmFyIF92ZXJzaW9uSW5zdGFsbGVkRGF0YTsKICAgICAgICAgICAgdmFyIGt1YmVWZXJzaW9uVG9DaGVjayA9IChfdmVyc2lvbkluc3RhbGxlZERhdGEgPSB2ZXJzaW9uSW5zdGFsbGVkRGF0YS5hbm5vdGF0aW9ucykgPT09IG51bGwgfHwgX3ZlcnNpb25JbnN0YWxsZWREYXRhID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdmVyc2lvbkluc3RhbGxlZERhdGFbVUlfUExVR0lOX0NIQVJUX0FOTk9UQVRJT05TLktVQkVfVkVSU0lPTl07CiAgICAgICAgICAgIGlmIChfdGhpczIua3ViZVZlcnNpb24gJiYgIWlzU3VwcG9ydGVkQ2hhcnRWZXJzaW9uKHsKICAgICAgICAgICAgICB2ZXJzaW9uOiB2ZXJzaW9uSW5zdGFsbGVkRGF0YSwKICAgICAgICAgICAgICBrdWJlVmVyc2lvbjogX3RoaXMyLmt1YmVWZXJzaW9uCiAgICAgICAgICAgIH0pKSB7CiAgICAgICAgICAgICAgcGx1Z2luLmluc3RhbGxlZEVycm9yID0gX3RoaXMyLnQoJ3BsdWdpbnMuY3VycmVudEluc3RhbGxlZFZlcnNpb25CbG9ja2VkQnlLdWJlVmVyc2lvbicsIHsKICAgICAgICAgICAgICAgIGt1YmVWZXJzaW9uOiBfdGhpczIua3ViZVZlcnNpb24sCiAgICAgICAgICAgICAgICBrdWJlVmVyc2lvblRvQ2hlY2s6IGt1YmVWZXJzaW9uVG9DaGVjawogICAgICAgICAgICAgIH0sIHRydWUpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKCiAgICAgIC8vIFNvcnQgYnkgbmFtZQogICAgICByZXR1cm4gc29ydEJ5KGFsbCwgJ25hbWUnLCBmYWxzZSk7CiAgICB9CiAgfSksCiAgd2F0Y2g6IHsKICAgIGhlbG1PcHM6IGZ1bmN0aW9uIGhlbG1PcHMobmV1KSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwogICAgICAvLyBHZXQgSGVsbSBvcGVyYXRpb25zIGZvciBVSSBwbHVnaW5zIGFuZCBvcmRlciBieSBkYXRlCiAgICAgIHZhciBwbHVnaW5PcHMgPSBuZXUuZmlsdGVyKGZ1bmN0aW9uIChvcCkgewogICAgICAgIHJldHVybiBvcC5uYW1lc3BhY2UgPT09IFVJX1BMVUdJTl9OQU1FU1BBQ0U7CiAgICAgIH0pOwogICAgICBwbHVnaW5PcHMgPSBzb3J0QnkocGx1Z2luT3BzLCAnbWV0YWRhdGEuY3JlYXRpb25UaW1lc3RhbXAnLCB0cnVlKTsKCiAgICAgIC8vIEdvIHRocm91Z2ggdGhlIGluc3RhbGxlZCBwbHVnaW5zCiAgICAgICh0aGlzLmF2YWlsYWJsZSB8fCBbXSkuZm9yRWFjaChmdW5jdGlvbiAocGx1Z2luKSB7CiAgICAgICAgdmFyIG9wID0gcGx1Z2luT3BzLmZpbmQoZnVuY3Rpb24gKG8pIHsKICAgICAgICAgIHZhciBfbyRzdGF0dXM7CiAgICAgICAgICByZXR1cm4gKChfbyRzdGF0dXMgPSBvLnN0YXR1cykgPT09IG51bGwgfHwgX28kc3RhdHVzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfbyRzdGF0dXMucmVsZWFzZU5hbWUpID09PSBwbHVnaW4ubmFtZTsKICAgICAgICB9KTsKICAgICAgICBpZiAob3ApIHsKICAgICAgICAgIHZhciBfb3AkbWV0YWRhdGEkc3RhdGUsIF9vcCRtZXRhZGF0YSRzdGF0ZTI7CiAgICAgICAgICB2YXIgYWN0aXZlID0gKF9vcCRtZXRhZGF0YSRzdGF0ZSA9IG9wLm1ldGFkYXRhLnN0YXRlKSA9PT0gbnVsbCB8fCBfb3AkbWV0YWRhdGEkc3RhdGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9vcCRtZXRhZGF0YSRzdGF0ZS50cmFuc2l0aW9uaW5nOwogICAgICAgICAgdmFyIGVycm9yID0gKF9vcCRtZXRhZGF0YSRzdGF0ZTIgPSBvcC5tZXRhZGF0YS5zdGF0ZSkgPT09IG51bGwgfHwgX29wJG1ldGFkYXRhJHN0YXRlMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX29wJG1ldGFkYXRhJHN0YXRlMi5lcnJvcjsKICAgICAgICAgIFZ1ZS5zZXQoX3RoaXMzLmVycm9ycywgcGx1Z2luLm5hbWUsIGVycm9yKTsKICAgICAgICAgIGlmIChhY3RpdmUpIHsKICAgICAgICAgICAgLy8gQ2FuIHVzZSB0aGUgc3RhdHVzIGRpcmVjdGx5LCBhcGFydCBmcm9tIHVwZ3JhZGUsIHdoaWNoIG1hcHMgdG8gaW5zdGFsbAogICAgICAgICAgICB2YXIgc3RhdHVzID0gb3Auc3RhdHVzLmFjdGlvbiA9PT0gJ3VwZ3JhZGUnID8gJ2luc3RhbGwnIDogb3Auc3RhdHVzLmFjdGlvbjsKICAgICAgICAgICAgX3RoaXMzLnVwZGF0ZVBsdWdpbkluc3RhbGxTdGF0dXMocGx1Z2luLm5hbWUsIHN0YXR1cyk7CiAgICAgICAgICB9IGVsc2UgaWYgKG9wLnN0YXR1cy5hY3Rpb24gPT09ICd1bmluc3RhbGwnKSB7CiAgICAgICAgICAgIC8vIFVuaW5zdGFsbCBoYXMgZmluaXNoZWQKICAgICAgICAgICAgX3RoaXMzLnVwZGF0ZVBsdWdpbkluc3RhbGxTdGF0dXMocGx1Z2luLm5hbWUsIGZhbHNlKTsKICAgICAgICAgIH0gZWxzZSBpZiAoZXJyb3IpIHsKICAgICAgICAgICAgX3RoaXMzLnVwZGF0ZVBsdWdpbkluc3RhbGxTdGF0dXMocGx1Z2luLm5hbWUsIGZhbHNlKTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3RoaXMzLnVwZGF0ZVBsdWdpbkluc3RhbGxTdGF0dXMocGx1Z2luLm5hbWUsIGZhbHNlKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIHBsdWdpbnM6IGZ1bmN0aW9uIHBsdWdpbnMobmV1LCBvbGQpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CiAgICAgIHZhciBpbnN0YWxsZWQgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzWyd1aXBsdWdpbnMvcGx1Z2lucyddOwogICAgICB2YXIgc2hvdWxkSGF2ZUxvYWRlZCA9IChpbnN0YWxsZWQgfHwgW10pLmZpbHRlcihmdW5jdGlvbiAocCkgewogICAgICAgIHJldHVybiAhX3RoaXM0LnVpRXJyb3JzW3AubmFtZV0gJiYgIXAuYnVpbHRpbjsKICAgICAgfSk7CiAgICAgIHZhciBjaGFuZ2VzID0gMDsKCiAgICAgIC8vIERpZCB0aGUgdXNlciByZW1vdmUgYW4gZXh0ZW5zaW9uCiAgICAgIGlmICgobmV1ID09PSBudWxsIHx8IG5ldSA9PT0gdm9pZCAwID8gdm9pZCAwIDogbmV1Lmxlbmd0aCkgPCBzaG91bGRIYXZlTG9hZGVkLmxlbmd0aCkgewogICAgICAgIGNoYW5nZXMrKzsKICAgICAgfQogICAgICBuZXUuZm9yRWFjaChmdW5jdGlvbiAocGx1Z2luKSB7CiAgICAgICAgdmFyIGV4aXN0aW5nID0gaW5zdGFsbGVkLmZpbmQoZnVuY3Rpb24gKHApIHsKICAgICAgICAgIHJldHVybiAhcC5yZW1vdmVkICYmIHAubmFtZSA9PT0gcGx1Z2luLm5hbWUgJiYgcC52ZXJzaW9uID09PSBwbHVnaW4udmVyc2lvbjsKICAgICAgICB9KTsKICAgICAgICBpZiAoIWV4aXN0aW5nICYmIHBsdWdpbi5pc0NhY2hlZCkgewogICAgICAgICAgaWYgKCFfdGhpczQudWlFcnJvcnNbcGx1Z2luLm5hbWVdKSB7CiAgICAgICAgICAgIGNoYW5nZXMrKzsKICAgICAgICAgIH0KICAgICAgICAgIF90aGlzNC51cGRhdGVQbHVnaW5JbnN0YWxsU3RhdHVzKHBsdWdpbi5uYW1lLCBmYWxzZSk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgaWYgKGNoYW5nZXMgPiAwKSB7CiAgICAgICAgVnVlLnNldCh0aGlzLCAncmVsb2FkUmVxdWlyZWQnLCB0cnVlKTsKICAgICAgfQogICAgfQogIH0sCiAgLy8gRm9yZ2V0IHRoZSB0eXBlcyB3aGVuIHdlIGxlYXZlIHRoZSBwYWdlCiAgYmVmb3JlRGVzdHJveTogZnVuY3Rpb24gYmVmb3JlRGVzdHJveSgpIHsKICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdtYW5hZ2VtZW50L2ZvcmdldFR5cGUnLCBVSV9QTFVHSU4pOwogICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ21hbmFnZW1lbnQvZm9yZ2V0VHlwZScsIENBVEFMT0cuT1BFUkFUSU9OKTsKICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdtYW5hZ2VtZW50L2ZvcmdldFR5cGUnLCBDQVRBTE9HLkFQUCk7CiAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnbWFuYWdlbWVudC9mb3JnZXRUeXBlJywgQ0FUQUxPRy5DTFVTVEVSX1JFUE8pOwogIH0sCiAgbWV0aG9kczogewogICAgcmVmcmVzaENoYXJ0czogZnVuY3Rpb24gcmVmcmVzaENoYXJ0cygpIHsKICAgICAgdmFyIF9hcmd1bWVudHMgPSBhcmd1bWVudHMsCiAgICAgICAgX3RoaXM1ID0gdGhpczsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHZhciBmb3JjZUNoYXJ0c1VwZGF0ZSwgYzsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGZvcmNlQ2hhcnRzVXBkYXRlID0gX2FyZ3VtZW50cy5sZW5ndGggPiAwICYmIF9hcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IF9hcmd1bWVudHNbMF0gOiBmYWxzZTsKICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDM7CiAgICAgICAgICAgICAgcmV0dXJuIF90aGlzNS4kc3RvcmUuZGlzcGF0Y2goJ2NhdGFsb2cvbG9hZCcsIHsKICAgICAgICAgICAgICAgIHJlc2V0OiB0cnVlLAogICAgICAgICAgICAgICAgZm9yY2U6IGZvcmNlQ2hhcnRzVXBkYXRlCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICBjID0gX3RoaXM1LiRzdG9yZS5nZXR0ZXJzWydjYXRhbG9nL3Jhd0NoYXJ0cyddOwogICAgICAgICAgICAgIF90aGlzNS5jaGFydHMgPSBPYmplY3QudmFsdWVzKGMpOwogICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICB1cGRhdGVJbnN0YWxsU3RhdHVzOiBmdW5jdGlvbiB1cGRhdGVJbnN0YWxsU3RhdHVzKCkgewogICAgICB2YXIgX2FyZ3VtZW50czIgPSBhcmd1bWVudHMsCiAgICAgICAgX3RoaXM2ID0gdGhpczsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkgewogICAgICAgIHZhciBmb3JjZUNoYXJ0c1VwZGF0ZSwgaGFzU2VydmljZSwgc2VydmljZTsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGZvcmNlQ2hhcnRzVXBkYXRlID0gX2FyZ3VtZW50czIubGVuZ3RoID4gMCAmJiBfYXJndW1lbnRzMlswXSAhPT0gdW5kZWZpbmVkID8gX2FyZ3VtZW50czJbMF0gOiBmYWxzZTsKICAgICAgICAgICAgICBfY29udGV4dDMucHJldiA9IDE7CiAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA0OwogICAgICAgICAgICAgIHJldHVybiBfdGhpczYuJHN0b3JlLmRpc3BhdGNoKCdtYW5hZ2VtZW50L2ZpbmQnLCB7CiAgICAgICAgICAgICAgICB0eXBlOiBTRVJWSUNFLAogICAgICAgICAgICAgICAgaWQ6ICIiLmNvbmNhdChVSV9QTFVHSU5fTkFNRVNQQUNFLCAiL3VpLXBsdWdpbi1vcGVyYXRvciIpLAogICAgICAgICAgICAgICAgb3B0OiB7CiAgICAgICAgICAgICAgICAgIGZvcmNlOiB0cnVlCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICBzZXJ2aWNlID0gX2NvbnRleHQzLnNlbnQ7CiAgICAgICAgICAgICAgaGFzU2VydmljZSA9ICEhc2VydmljZTsKICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDExOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgX2NvbnRleHQzLnByZXYgPSA4OwogICAgICAgICAgICAgIF9jb250ZXh0My50MCA9IF9jb250ZXh0M1siY2F0Y2giXSgxKTsKICAgICAgICAgICAgICBoYXNTZXJ2aWNlID0gZmFsc2U7CiAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgaWYgKGhhc1NlcnZpY2UgfHwgZm9yY2VDaGFydHNVcGRhdGUpIHsKICAgICAgICAgICAgICAgIF90aGlzNi5yZWZyZXNoQ2hhcnRzKGZvcmNlQ2hhcnRzVXBkYXRlKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgVnVlLnNldChfdGhpczYsICdoYXNTZXJ2aWNlJywgaGFzU2VydmljZSk7CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoInJldHVybiIsIGhhc1NlcnZpY2UpOwogICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUzLCBudWxsLCBbWzEsIDhdXSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGZpbHRlckNoYW5nZWQ6IGZ1bmN0aW9uIGZpbHRlckNoYW5nZWQoZikgewogICAgICB0aGlzLnZpZXcgPSBmLnNlbGVjdGVkTmFtZTsKICAgIH0sCiAgICByZW1vdmVQbHVnaW5TdXBwb3J0OiBmdW5jdGlvbiByZW1vdmVQbHVnaW5TdXBwb3J0KCkgewogICAgICB0aGlzLnJlZnJlc2hDaGFydHModHJ1ZSk7CiAgICAgIHRoaXMuJHJlZnMucmVtb3ZlVUlQbHVnaW5zLnNob3dEaWFsb2coKTsKICAgIH0sCiAgICAvLyBEZXZlbG9wZXIgTG9hZCBpcyBpbiB0aGUgYWN0aW9uIG1lbnUKICAgIHNob3dEZXZlbG9wZXJMb2FkRGlhbG9nOiBmdW5jdGlvbiBzaG93RGV2ZWxvcGVyTG9hZERpYWxvZygpIHsKICAgICAgdGhpcy4kcmVmcy5kZXZlbG9wZXJJbnN0YWxsRGlhbG9nLnNob3dEaWFsb2coKTsKICAgIH0sCiAgICBzaG93QWRkRXh0ZW5zaW9uUmVwb3NEaWFsb2c6IGZ1bmN0aW9uIHNob3dBZGRFeHRlbnNpb25SZXBvc0RpYWxvZygpIHsKICAgICAgdGhpcy51cGRhdGVBZGRSZXBvc1NldHRpbmcoKTsKICAgICAgdGhpcy5yZWZyZXNoQ2hhcnRzKHRydWUpOwogICAgICB0aGlzLiRyZWZzLmFkZEV4dGVuc2lvblJlcG9zRGlhbG9nLnNob3dEaWFsb2coKTsKICAgIH0sCiAgICBzaG93Q2F0YWxvZ0xvYWREaWFsb2c6IGZ1bmN0aW9uIHNob3dDYXRhbG9nTG9hZERpYWxvZygpIHsKICAgICAgdGhpcy4kcmVmcy5jYXRhbG9nTG9hZERpYWxvZy5zaG93RGlhbG9nKCk7CiAgICB9LAogICAgc2hvd0NhdGFsb2dVbmluc3RhbGxEaWFsb2c6IGZ1bmN0aW9uIHNob3dDYXRhbG9nVW5pbnN0YWxsRGlhbG9nKGV2KSB7CiAgICAgIHRoaXMuJHJlZnMuY2F0YWxvZ1VuaW5zdGFsbERpYWxvZy5zaG93RGlhbG9nKGV2KTsKICAgIH0sCiAgICBzaG93SW5zdGFsbERpYWxvZzogZnVuY3Rpb24gc2hvd0luc3RhbGxEaWFsb2cocGx1Z2luLCBtb2RlLCBldikgewogICAgICB2YXIgX2V2JHRhcmdldDsKICAgICAgKF9ldiR0YXJnZXQgPSBldi50YXJnZXQpID09PSBudWxsIHx8IF9ldiR0YXJnZXQgPT09IHZvaWQgMCB8fCBfZXYkdGFyZ2V0LmJsdXIoKTsKICAgICAgZXYucHJldmVudERlZmF1bHQoKTsKICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgIHRoaXMuJHJlZnMuaW5zdGFsbERpYWxvZy5zaG93RGlhbG9nKHBsdWdpbiwgbW9kZSk7CiAgICB9LAogICAgc2hvd1VuaW5zdGFsbERpYWxvZzogZnVuY3Rpb24gc2hvd1VuaW5zdGFsbERpYWxvZyhwbHVnaW4sIGV2KSB7CiAgICAgIHZhciBfZXYkdGFyZ2V0MjsKICAgICAgKF9ldiR0YXJnZXQyID0gZXYudGFyZ2V0KSA9PT0gbnVsbCB8fCBfZXYkdGFyZ2V0MiA9PT0gdm9pZCAwIHx8IF9ldiR0YXJnZXQyLmJsdXIoKTsKICAgICAgZXYucHJldmVudERlZmF1bHQoKTsKICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgIHRoaXMuJHJlZnMudW5pbnN0YWxsRGlhbG9nLnNob3dEaWFsb2cocGx1Z2luKTsKICAgIH0sCiAgICBkaWRVbmluc3RhbGw6IGZ1bmN0aW9uIGRpZFVuaW5zdGFsbChwbHVnaW4pIHsKICAgICAgaWYgKHBsdWdpbikgewogICAgICAgIHRoaXMudXBkYXRlUGx1Z2luSW5zdGFsbFN0YXR1cyhwbHVnaW4ubmFtZSwgJ3VuaW5zdGFsbCcpOwogICAgICAgIGlmIChwbHVnaW4uY2F0YWxvZykgewogICAgICAgICAgdGhpcy5yZWZyZXNoQ2hhcnRzKCk7CiAgICAgICAgfQoKICAgICAgICAvLyBDbGVhciB0aGUgbG9hZCBlcnJvciwgaWYgdGhlcmUgd2FzIG9uZQogICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCd1aXBsdWdpbnMvc2V0RXJyb3InLCB7CiAgICAgICAgICBuYW1lOiBwbHVnaW4ubmFtZSwKICAgICAgICAgIGVycm9yOiBmYWxzZQogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgZGlkSW5zdGFsbDogZnVuY3Rpb24gZGlkSW5zdGFsbChwbHVnaW4pIHsKICAgICAgaWYgKHBsdWdpbikgewogICAgICAgIHZhciBfdGhpcyQkcmVmcyR0YWJzMjsKICAgICAgICAvLyBDaGFuZ2UgdGhlIHZpZXcgdG8gaW5zdGFsbGVkIGlmIHdlIHN0YXJ0ZWQgaW5zdGFsbGluZyBhIHBsdWdpbgogICAgICAgIChfdGhpcyQkcmVmcyR0YWJzMiA9IHRoaXMuJHJlZnMudGFicykgPT09IG51bGwgfHwgX3RoaXMkJHJlZnMkdGFiczIgPT09IHZvaWQgMCB8fCBfdGhpcyQkcmVmcyR0YWJzMi5zZWxlY3QoVEFCU19WQUxVRVMuSU5TVEFMTEVEKTsKCiAgICAgICAgLy8gQ2xlYXIgdGhlIGxvYWQgZXJyb3IsIGlmIHRoZXJlIHdhcyBvbmUgcHJldmlvdXNseQogICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCd1aXBsdWdpbnMvc2V0RXJyb3InLCB7CiAgICAgICAgICBuYW1lOiBwbHVnaW4ubmFtZSwKICAgICAgICAgIGVycm9yOiBmYWxzZQogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgc2hvd1BsdWdpbkRldGFpbDogZnVuY3Rpb24gc2hvd1BsdWdpbkRldGFpbChwbHVnaW4pIHsKICAgICAgdGhpcy4kcmVmcy5pbmZvUGFuZWwuc2hvdyhwbHVnaW4pOwogICAgfSwKICAgIHVwZGF0ZVBsdWdpbkluc3RhbGxTdGF0dXM6IGZ1bmN0aW9uIHVwZGF0ZVBsdWdpbkluc3RhbGxTdGF0dXMobmFtZSwgc3RhdHVzKSB7CiAgICAgIFZ1ZS5zZXQodGhpcy5pbnN0YWxsaW5nLCBuYW1lLCBzdGF0dXMpOwogICAgfSwKICAgIHNldE1lbnU6IGZ1bmN0aW9uIHNldE1lbnUoZXZlbnQpIHsKICAgICAgdGhpcy5tZW51T3BlbiA9ICEhZXZlbnQ7CiAgICAgIGlmIChldmVudCkgewogICAgICAgIHRoaXMubWVudVRhcmdldEVsZW1lbnQgPSB0aGlzLiRyZWZzLmFjdGlvbnM7CiAgICAgICAgdGhpcy5tZW51VGFyZ2V0RXZlbnQgPSBldmVudDsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLm1lbnVUYXJnZXRFbGVtZW50ID0gdW5kZWZpbmVkOwogICAgICAgIHRoaXMubWVudVRhcmdldEV2ZW50ID0gdW5kZWZpbmVkOwogICAgICB9CiAgICB9LAogICAgcmVsb2FkOiBmdW5jdGlvbiByZWxvYWQoKSB7CiAgICAgIHRoaXMuJHJvdXRlci5nbygpOwogICAgfSwKICAgIG1hbmFnZVJlcG9zOiBmdW5jdGlvbiBtYW5hZ2VSZXBvcygpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIG5hbWU6ICdjLWNsdXN0ZXItcHJvZHVjdC1yZXNvdXJjZScsCiAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICBjbHVzdGVyOiAnbG9jYWwnLAogICAgICAgICAgcHJvZHVjdDogQVBQX1BST0RVQ1QsCiAgICAgICAgICByZXNvdXJjZTogQ0FUQUxPRy5DTFVTVEVSX1JFUE8KICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIG1hbmFnZUV4dGVuc2lvblZpZXc6IGZ1bmN0aW9uIG1hbmFnZUV4dGVuc2lvblZpZXcoKSB7CiAgICAgIHRoaXMuc2hvd0NhdGFsb2dMaXN0ID0gIXRoaXMuc2hvd0NhdGFsb2dMaXN0OwogICAgfSwKICAgIHVwZGF0ZUFkZFJlcG9zU2V0dGluZzogZnVuY3Rpb24gdXBkYXRlQWRkUmVwb3NTZXR0aW5nKCkgewogICAgICB2YXIgX3RoaXMkYWRkRXh0ZW5zaW9uUmVwMjsKICAgICAgaWYgKCgoX3RoaXMkYWRkRXh0ZW5zaW9uUmVwMiA9IHRoaXMuYWRkRXh0ZW5zaW9uUmVwb3NCYW5uZXJTZXR0aW5nKSA9PT0gbnVsbCB8fCBfdGhpcyRhZGRFeHRlbnNpb25SZXAyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRhZGRFeHRlbnNpb25SZXAyLnZhbHVlKSA9PT0gJ3RydWUnKSB7CiAgICAgICAgdGhpcy5hZGRFeHRlbnNpb25SZXBvc0Jhbm5lclNldHRpbmcudmFsdWUgPSAnZmFsc2UnOwogICAgICAgIHRoaXMuYWRkRXh0ZW5zaW9uUmVwb3NCYW5uZXJTZXR0aW5nLnNhdmUoKTsKICAgICAgfQogICAgfQogIH0KfTs="},{"version":3,"names":["Vue","mapGetters","mapPref","PLUGIN_DEVELOPER","sortBy","allHash","CATALOG","UI_PLUGIN","SERVICE","MANAGEMENT","SETTING","fetchOrCreateSetting","getVersionData","CATALOG_ANNOTATIONS","NAME","APP_PRODUCT","ActionMenu","Tabbed","Tab","IconMessage","LazyImage","BadgeState","UninstallDialog","InstallDialog","CatalogLoadDialog","CatalogUninstallDialog","DeveloperInstallDialog","PluginInfoPanel","SetupUIPlugins","RemoveUIPlugins","AddExtensionRepos","CatalogList","Banner","isUIPlugin","uiPluginAnnotation","uiPluginHasAnnotation","isSupportedChartVersion","isChartVersionAvailableForInstall","isChartVersionHigher","UI_PLUGIN_NAMESPACE","UI_PLUGIN_CHART_ANNOTATIONS","UI_PLUGINS_REPO_URL","UI_PLUGINS_PARTNERS_REPO_URL","MAX_DESCRIPTION_LENGTH","TABS_VALUES","INSTALLED","UPDATES","AVAILABLE","ALL","components","data","_getVersionData","kubeVersion","view","charts","installing","errors","plugins","helmOps","addExtensionReposBannerSetting","undefined","loading","menuTargetElement","menuTargetEvent","menuOpen","hasService","defaultIcon","require","reloadRequired","rancherVersion","Version","showCatalogList","fetch","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_res$localCluster","hash","isSetup","res","c","_this$$refs$tabs","wrap","_callee$","_context","prev","next","updateInstallStatus","sent","$store","getters","dispatch","type","reset","load","CLUSTER","id","localCluster","OPERATION","CLUSTER_REPO","repos","kubernetesVersionBase","ADD_EXTENSION_REPOS_BANNER_DISPLAY","t0","Object","values","length","$refs","tabs","select","stop","computed","_objectSpread","pluginDeveloper","uiplugins","uiErrors","theme","showAddReposBanner","_this$addExtensionRep","value","find","r","urlDisplay","applyDarkModeBg","menuActions","push","action","label","t","enabled","divider","list","all","available","filter","p","installed","updates","hasMenuActions","_this$menuActions","emptyMessage","concat","plugin","upgrade","_this2","HIDDEN","map","chart","_item$installableVers","_item$installableVers2","DISPLAY_NAME","chartNameDisplay","item","name","chartName","description","chartDescription","versions","builtin","experimental","EXPERIMENTAL","certified","CERTIFIED","_RANCHER","_toConsumableArray","installableVersions","version","latestCompatible","latestNotCompatible","isCompatibleWithUi","isCompatibleWithKubeVersion","displayVersion","icon","_item$versions","_latestCompatible$ann","annotations","incompatibleRancherVersion","requiredUiVersion","incompatibleKubeVersion","requiredKubeVersion","forEach","_p$metadata","_rancher$annotations","_p$metadata2","_p$metadata3","_p$metadata4","rancher","_typeof","metadata","HIDDEN_BUILTIN","_chart$installableVer","_chart$installableVer2","uiplugin","keys","e","error","helmError","substr","_plugin$uiplugin$spec","versionInstalled","spec","versionInstalledData","v","_versionInstalledData","kubeVersionToCheck","KUBE_VERSION","installedError","watch","neu","_this3","pluginOps","op","namespace","o","_o$status","status","releaseName","_op$metadata$state","_op$metadata$state2","active","state","transitioning","set","updatePluginInstallStatus","old","_this4","shouldHaveLoaded","changes","existing","removed","isCached","beforeDestroy","APP","methods","refreshCharts","_arguments","arguments","_this5","_callee2","forceChartsUpdate","_callee2$","_context2","force","_arguments2","_this6","_callee3","service","_callee3$","_context3","opt","abrupt","filterChanged","f","selectedName","removePluginSupport","removeUIPlugins","showDialog","showDeveloperLoadDialog","developerInstallDialog","showAddExtensionReposDialog","updateAddReposSetting","addExtensionReposDialog","showCatalogLoadDialog","catalogLoadDialog","showCatalogUninstallDialog","ev","catalogUninstallDialog","showInstallDialog","mode","_ev$target","target","blur","preventDefault","stopPropagation","installDialog","showUninstallDialog","_ev$target2","uninstallDialog","didUninstall","catalog","didInstall","_this$$refs$tabs2","showPluginDetail","infoPanel","show","setMenu","event","actions","reload","$router","go","manageRepos","params","cluster","product","resource","manageExtensionView","_this$addExtensionRep2","save"],"sources":["node_modules/@rancher/shell/pages/c/_cluster/uiplugins/index.vue"],"sourcesContent":["<script>\nimport Vue from 'vue';\nimport { mapGetters } from 'vuex';\nimport { mapPref, PLUGIN_DEVELOPER } from '@shell/store/prefs';\nimport { sortBy } from '@shell/utils/sort';\nimport { allHash } from '@shell/utils/promise';\nimport { CATALOG, UI_PLUGIN, SERVICE, MANAGEMENT } from '@shell/config/types';\nimport { SETTING } from '@shell/config/settings';\nimport { fetchOrCreateSetting } from '@shell/utils/settings';\nimport { getVersionData } from '@shell/config/version';\nimport { CATALOG as CATALOG_ANNOTATIONS } from '@shell/config/labels-annotations';\nimport { NAME as APP_PRODUCT } from '@shell/config/product/apps';\nimport ActionMenu from '@shell/components/ActionMenu';\nimport Tabbed from '@shell/components/Tabbed/index.vue';\nimport Tab from '@shell/components/Tabbed/Tab.vue';\nimport IconMessage from '@shell/components/IconMessage.vue';\nimport LazyImage from '@shell/components/LazyImage';\nimport { BadgeState } from '@components/BadgeState';\nimport UninstallDialog from './UninstallDialog.vue';\nimport InstallDialog from './InstallDialog.vue';\nimport CatalogLoadDialog from './CatalogList/CatalogLoadDialog.vue';\nimport CatalogUninstallDialog from './CatalogList/CatalogUninstallDialog.vue';\nimport DeveloperInstallDialog from './DeveloperInstallDialog.vue';\nimport PluginInfoPanel from './PluginInfoPanel.vue';\nimport SetupUIPlugins from './SetupUIPlugins';\nimport RemoveUIPlugins from './RemoveUIPlugins';\nimport AddExtensionRepos from './AddExtensionRepos';\nimport CatalogList from './CatalogList/index.vue';\nimport Banner from '@components/Banner/Banner.vue';\nimport {\n  isUIPlugin,\n  uiPluginAnnotation,\n  uiPluginHasAnnotation,\n  isSupportedChartVersion,\n  isChartVersionAvailableForInstall,\n  isChartVersionHigher,\n  UI_PLUGIN_NAMESPACE,\n  UI_PLUGIN_CHART_ANNOTATIONS,\n  UI_PLUGINS_REPO_URL,\n  UI_PLUGINS_PARTNERS_REPO_URL\n} from '@shell/config/uiplugins';\n\nconst MAX_DESCRIPTION_LENGTH = 200;\n\nconst TABS_VALUES = {\n  INSTALLED: 'installed',\n  UPDATES:   'updates',\n  AVAILABLE: 'available',\n  ALL:       'all'\n};\n\nexport default {\n  components: {\n    ActionMenu,\n    BadgeState,\n    DeveloperInstallDialog,\n    IconMessage,\n    CatalogList,\n    Banner,\n    CatalogLoadDialog,\n    CatalogUninstallDialog,\n    InstallDialog,\n    LazyImage,\n    PluginInfoPanel,\n    Tab,\n    Tabbed,\n    UninstallDialog,\n    SetupUIPlugins,\n    RemoveUIPlugins,\n    AddExtensionRepos,\n  },\n\n  data() {\n    return {\n      TABS_VALUES,\n      kubeVersion:                    null,\n      view:                           '',\n      charts:                         [],\n      installing:                     {},\n      errors:                         {},\n      plugins:                        [], // The installed plugins\n      helmOps:                        [], // Helm operations\n      addExtensionReposBannerSetting: undefined,\n      loading:                        true,\n      menuTargetElement:              null,\n      menuTargetEvent:                null,\n      menuOpen:                       false,\n      hasService:                     false,\n      defaultIcon:                    require('~shell/assets/images/generic-plugin.svg'),\n      reloadRequired:                 false,\n      rancherVersion:                 getVersionData()?.Version,\n      showCatalogList:                false\n    };\n  },\n\n  async fetch() {\n    const hash = {};\n\n    const isSetup = await this.updateInstallStatus(true);\n\n    if (isSetup) {\n      if (this.$store.getters['management/schemaFor'](UI_PLUGIN)) {\n        hash.plugins = this.$store.dispatch('management/findAll', { type: UI_PLUGIN });\n      }\n    }\n\n    hash.load = await this.$store.dispatch('catalog/load', { reset: true });\n\n    if (this.$store.getters['management/schemaFor'](MANAGEMENT.CLUSTER)) {\n      hash.localCluster = await this.$store.dispatch('management/find', { type: MANAGEMENT.CLUSTER, id: 'local' });\n    }\n\n    if (this.$store.getters['management/schemaFor'](CATALOG.OPERATION)) {\n      hash.helmOps = await this.$store.dispatch('management/findAll', { type: CATALOG.OPERATION });\n    }\n\n    if (this.$store.getters['management/schemaFor'](CATALOG.CLUSTER_REPO)) {\n      hash.repos = await this.$store.dispatch('management/findAll', { type: CATALOG.CLUSTER_REPO });\n    }\n\n    const res = await allHash(hash);\n\n    this.plugins = res.plugins || [];\n    this.repos = res.repos || [];\n    this.helmOps = res.helmOps || [];\n    this.kubeVersion = res.localCluster?.kubernetesVersionBase || [];\n\n    this.addExtensionReposBannerSetting = await fetchOrCreateSetting(this.$store, SETTING.ADD_EXTENSION_REPOS_BANNER_DISPLAY, 'true', true) || {};\n\n    const c = this.$store.getters['catalog/rawCharts'];\n\n    this.charts = Object.values(c);\n\n    // If there are no plugins installed, default to the catalog view\n    if (this.plugins.length === 0) {\n      this.$refs.tabs?.select(TABS_VALUES.AVAILABLE);\n    }\n\n    this.loading = false;\n  },\n\n  computed: {\n    pluginDeveloper: mapPref(PLUGIN_DEVELOPER),\n\n    ...mapGetters({ uiplugins: 'uiplugins/plugins' }),\n    ...mapGetters({ uiErrors: 'uiplugins/errors' }),\n    ...mapGetters({ theme: 'prefs/theme' }),\n\n    showAddReposBanner() {\n      return this.addExtensionReposBannerSetting?.value === 'true' && (!this.repos.find((r) => r.urlDisplay === UI_PLUGINS_REPO_URL) || !this.repos.find((r) => r.urlDisplay === UI_PLUGINS_PARTNERS_REPO_URL));\n    },\n\n    applyDarkModeBg() {\n      if (this.theme === 'dark') {\n        return { 'dark-mode': true };\n      }\n\n      return {};\n    },\n\n    menuActions() {\n      const menuActions = [];\n\n      // Add link to go to the Repos view of the local cluster\n      menuActions.push({\n        action:  'manageRepos',\n        label:   this.t('plugins.manageRepos'),\n        enabled: true\n      });\n\n      // Add link to add extensions repositories (Official, Partners, etc)\n      menuActions.push({\n        action:  'addRancherRepos',\n        label:   this.t('plugins.addRancherRepos'),\n        enabled: true\n      });\n\n      // Only show Manage Extension Catalogs when on main charts view\n      if (!this.showCatalogList) {\n        menuActions.push({\n          action:  'manageExtensionView',\n          label:   this.t('plugins.manageCatalog.label'),\n          enabled: true\n        });\n      }\n\n      // Only show Developer Load action if the user has this enabled in preferences\n      if (this.pluginDeveloper) {\n        menuActions.push( { divider: true });\n        menuActions.push({\n          action:  'devLoad',\n          label:   this.t('plugins.developer.label'),\n          enabled: true\n        });\n      }\n\n      if (this.hasService) {\n        menuActions.push( { divider: true });\n        menuActions.push({\n          action:  'removePluginSupport',\n          label:   this.t('plugins.setup.remove.label'),\n          enabled: true\n        });\n      }\n\n      return menuActions;\n    },\n\n    list() {\n      const all = this.available;\n\n      switch (this.view) {\n      case TABS_VALUES.INSTALLED:\n        return all.filter((p) => !!p.installed || !!p.installing);\n      case TABS_VALUES.UPDATES:\n        return this.updates;\n      case TABS_VALUES.AVAILABLE:\n        return all.filter((p) => !p.installed);\n      default:\n        return all;\n      }\n    },\n\n    hasMenuActions() {\n      return this.menuActions?.length > 0;\n    },\n\n    // Message to display when the tab view is empty (depends on the tab)\n    emptyMessage() {\n      return this.t(`plugins.empty.${ this.view }`);\n    },\n\n    updates() {\n      return this.available.filter((plugin) => !!plugin.upgrade);\n    },\n\n    available() {\n      let all = this.charts.filter((c) => isUIPlugin(c));\n\n      // Filter out hidden charts\n      all = all.filter((c) => !uiPluginHasAnnotation(c, CATALOG_ANNOTATIONS.HIDDEN, 'true'));\n\n      all = all.map((chart) => {\n        // Label can be overridden by chart annotation\n        const label = uiPluginAnnotation(chart, UI_PLUGIN_CHART_ANNOTATIONS.DISPLAY_NAME) || chart.chartNameDisplay;\n        const item = {\n          name:         chart.chartName,\n          label,\n          description:  chart.chartDescription,\n          id:           chart.id,\n          versions:     [],\n          installed:    false,\n          builtin:      false,\n          experimental: uiPluginHasAnnotation(chart, CATALOG_ANNOTATIONS.EXPERIMENTAL, 'true'),\n          certified:    uiPluginHasAnnotation(chart, CATALOG_ANNOTATIONS.CERTIFIED, CATALOG_ANNOTATIONS._RANCHER)\n        };\n\n        item.versions = [...chart.versions];\n        item.chart = chart;\n\n        // Filter the versions available to install (plugins-api version and current dashboard version)\n        item.installableVersions = item.versions.filter((version) => isSupportedChartVersion({ version, kubeVersion: this.kubeVersion }) && isChartVersionAvailableForInstall({\n          version, rancherVersion: this.rancherVersion, kubeVersion: this.kubeVersion\n        }));\n\n        // add prop to version object if version is compatible with the current dashboard version\n        item.versions = item.versions.map((version) => isChartVersionAvailableForInstall({\n          version, rancherVersion: this.rancherVersion, kubeVersion: this.kubeVersion\n        }, true));\n\n        const latestCompatible = item.installableVersions?.[0];\n        const latestNotCompatible = item.versions.find((version) => !version.isCompatibleWithUi || !version.isCompatibleWithKubeVersion);\n\n        if (latestCompatible) {\n          item.displayVersion = latestCompatible.version;\n          item.icon = latestCompatible.icon;\n        } else {\n          item.displayVersion = item.versions?.[0]?.version;\n          item.icon = chart.icon || latestCompatible?.annotations?.['catalog.cattle.io/ui-icon'];\n        }\n\n        if (latestNotCompatible && item.installableVersions.length && isChartVersionHigher(latestNotCompatible.version, item.installableVersions?.[0].version)) {\n          if (!item.isCompatibleWithUi) {\n            item.incompatibleRancherVersion = this.t('plugins.incompatibleRancherVersion', { version: latestNotCompatible.version, rancherVersion: latestNotCompatible.requiredUiVersion }, true);\n          } else if (!item.isCompatibleWithKubeVersion) {\n            item.incompatibleKubeVersion = this.t('plugins.incompatibleKubeVersion', { version: latestNotCompatible.version, kubeVersion: latestNotCompatible.requiredKubeVersion }, true);\n          }\n        }\n\n        if (this.installing[item.name]) {\n          item.installing = this.installing[item.name];\n        }\n\n        return item;\n      });\n\n      // Remove charts with no installable versions\n      all = all.filter((c) => c.versions.length > 0);\n\n      // Check that all of the loaded plugins are represented\n      this.uiplugins.forEach((p) => {\n        const chart = all.find((c) => c.name === p.name);\n\n        if (!chart) {\n          // A plugin is loaded, but there is no chart, so add an item so that it shows up\n          const rancher = typeof p.metadata?.rancher === 'object' ? p.metadata.rancher : {};\n          const label = rancher.annotations?.[UI_PLUGIN_CHART_ANNOTATIONS.DISPLAY_NAME] || p.name;\n          const item = {\n            name:           p.name,\n            label,\n            description:    p.metadata?.description,\n            icon:           p.metadata?.icon,\n            id:             p.id,\n            versions:       [],\n            displayVersion: p.metadata?.version || '-',\n            installed:      true,\n            builtin:        !!p.builtin,\n          };\n\n          // Built-in plugins can chose to be hidden - used where we implement as extensions\n          // but don't want to shows them individually on the extensions page\n          if (!(item.builtin && rancher[UI_PLUGIN_CHART_ANNOTATIONS.HIDDEN_BUILTIN])) {\n            all.push(item);\n          }\n        }\n      });\n\n      // Go through the CRs for the plugins and wire them into the catalog\n      this.plugins.forEach((p) => {\n        const chart = all.find((c) => c.name === p.name);\n\n        if (chart) {\n          chart.installed = true;\n          chart.uiplugin = p;\n          chart.displayVersion = p.version;\n\n          // Can't do this here\n          chart.installing = this.installing[chart.name];\n\n          // Check for upgrade\n          if (chart.installableVersions?.length && p.version !== chart.installableVersions?.[0]?.version) {\n            chart.upgrade = chart.installableVersions[0].version;\n          }\n        } else {\n          // No chart, so add a card for the plugin based on its Custom resource being present\n          const item = {\n            name:           p.name,\n            label:          p.name,\n            description:    p.description || '-',\n            id:             `${ p.name }-${ p.version }`,\n            versions:       [],\n            displayVersion: p.version || '-',\n            installed:      true,\n            installing:     false,\n            builtin:        false,\n            uiplugin:       p,\n          };\n\n          all.push(item);\n        }\n      });\n\n      // Merge in the plugin load errors\n      Object.keys(this.uiErrors).forEach((e) => {\n        const chart = all.find((c) => c.name === e);\n\n        if (chart) {\n          const error = this.uiErrors[e];\n\n          if (error && typeof error === 'string') {\n            chart.error = this.t(this.uiErrors[e]);\n          } else {\n            chart.error = false;\n          }\n        }\n      });\n\n      // Merge in the plugin load errors from help ops\n      Object.keys(this.errors).forEach((e) => {\n        const chart = all.find((c) => c.name === e);\n\n        if (chart) {\n          chart.helmError = !!this.errors[e];\n        }\n      });\n\n      all.forEach((plugin) => {\n        // Clamp the lengths of the descriptions\n        if (plugin.description && plugin.description.length > MAX_DESCRIPTION_LENGTH) {\n          plugin.description = `${ plugin.description.substr(0, MAX_DESCRIPTION_LENGTH) } ...`;\n        }\n\n        // check if kube version compatibility is met for installed extension\n        if (plugin.uiplugin) {\n          const versionInstalled = plugin.uiplugin.spec?.plugin?.version;\n          const versionInstalledData = plugin.versions.find((v) => v.version === versionInstalled);\n\n          if (versionInstalledData) {\n            const kubeVersionToCheck = versionInstalledData.annotations?.[UI_PLUGIN_CHART_ANNOTATIONS.KUBE_VERSION];\n\n            if (this.kubeVersion && !isSupportedChartVersion({ version: versionInstalledData, kubeVersion: this.kubeVersion })) {\n              plugin.installedError = this.t('plugins.currentInstalledVersionBlockedByKubeVersion', { kubeVersion: this.kubeVersion, kubeVersionToCheck }, true);\n            }\n          }\n        }\n      });\n\n      // Sort by name\n      return sortBy(all, 'name', false);\n    }\n  },\n\n  watch: {\n    helmOps(neu) {\n      // Get Helm operations for UI plugins and order by date\n      let pluginOps = neu.filter((op) => {\n        return op.namespace === UI_PLUGIN_NAMESPACE;\n      });\n\n      pluginOps = sortBy(pluginOps, 'metadata.creationTimestamp', true);\n\n      // Go through the installed plugins\n      (this.available || []).forEach((plugin) => {\n        const op = pluginOps.find((o) => o.status?.releaseName === plugin.name);\n\n        if (op) {\n          const active = op.metadata.state?.transitioning;\n          const error = op.metadata.state?.error;\n\n          Vue.set(this.errors, plugin.name, error);\n\n          if (active) {\n            // Can use the status directly, apart from upgrade, which maps to install\n            const status = op.status.action === 'upgrade' ? 'install' : op.status.action;\n\n            this.updatePluginInstallStatus(plugin.name, status);\n          } else if (op.status.action === 'uninstall') {\n            // Uninstall has finished\n            this.updatePluginInstallStatus(plugin.name, false);\n          } else if (error) {\n            this.updatePluginInstallStatus(plugin.name, false);\n          }\n        } else {\n          this.updatePluginInstallStatus(plugin.name, false);\n        }\n      });\n    },\n\n    plugins(neu, old) {\n      const installed = this.$store.getters['uiplugins/plugins'];\n      const shouldHaveLoaded = (installed || []).filter((p) => !this.uiErrors[p.name] && !p.builtin);\n      let changes = 0;\n\n      // Did the user remove an extension\n      if (neu?.length < shouldHaveLoaded.length) {\n        changes++;\n      }\n\n      neu.forEach((plugin) => {\n        const existing = installed.find((p) => !p.removed && p.name === plugin.name && p.version === plugin.version);\n\n        if (!existing && plugin.isCached) {\n          if (!this.uiErrors[plugin.name]) {\n            changes++;\n          }\n\n          this.updatePluginInstallStatus(plugin.name, false);\n        }\n      });\n\n      if (changes > 0) {\n        Vue.set(this, 'reloadRequired', true);\n      }\n    }\n  },\n\n  // Forget the types when we leave the page\n  beforeDestroy() {\n    this.$store.dispatch('management/forgetType', UI_PLUGIN);\n    this.$store.dispatch('management/forgetType', CATALOG.OPERATION);\n    this.$store.dispatch('management/forgetType', CATALOG.APP);\n    this.$store.dispatch('management/forgetType', CATALOG.CLUSTER_REPO);\n  },\n\n  methods: {\n    async refreshCharts(forceChartsUpdate = false) {\n      // we might need to force the request, so that we know at all times if what's the status of the offical and partners repos (installed or not)\n      // tied to the SetupUIPlugins, AddExtensionRepos and RemoveUIPlugins checkboxes\n      await this.$store.dispatch('catalog/load', { reset: true, force: forceChartsUpdate });\n      const c = this.$store.getters['catalog/rawCharts'];\n\n      this.charts = Object.values(c);\n    },\n\n    async updateInstallStatus(forceChartsUpdate = false) {\n      let hasService;\n\n      try {\n        const service = await this.$store.dispatch('management/find', {\n          type: SERVICE,\n          id:   `${ UI_PLUGIN_NAMESPACE }/ui-plugin-operator`,\n          opt:  { force: true },\n        });\n\n        hasService = !!service;\n      } catch (e) {\n        hasService = false;\n      }\n\n      if (hasService || forceChartsUpdate) {\n        this.refreshCharts(forceChartsUpdate);\n      }\n\n      Vue.set(this, 'hasService', hasService);\n\n      return hasService;\n    },\n\n    filterChanged(f) {\n      this.view = f.selectedName;\n    },\n\n    removePluginSupport() {\n      this.refreshCharts(true);\n      this.$refs.removeUIPlugins.showDialog();\n    },\n\n    // Developer Load is in the action menu\n    showDeveloperLoadDialog() {\n      this.$refs.developerInstallDialog.showDialog();\n    },\n\n    showAddExtensionReposDialog() {\n      this.updateAddReposSetting();\n      this.refreshCharts(true);\n      this.$refs.addExtensionReposDialog.showDialog();\n    },\n\n    showCatalogLoadDialog() {\n      this.$refs.catalogLoadDialog.showDialog();\n    },\n\n    showCatalogUninstallDialog(ev) {\n      this.$refs.catalogUninstallDialog.showDialog(ev);\n    },\n\n    showInstallDialog(plugin, mode, ev) {\n      ev.target?.blur();\n      ev.preventDefault();\n      ev.stopPropagation();\n\n      this.$refs.installDialog.showDialog(plugin, mode);\n    },\n\n    showUninstallDialog(plugin, ev) {\n      ev.target?.blur();\n      ev.preventDefault();\n      ev.stopPropagation();\n\n      this.$refs.uninstallDialog.showDialog(plugin);\n    },\n\n    didUninstall(plugin) {\n      if (plugin) {\n        this.updatePluginInstallStatus(plugin.name, 'uninstall');\n\n        if (plugin.catalog) {\n          this.refreshCharts();\n        }\n\n        // Clear the load error, if there was one\n        this.$store.dispatch('uiplugins/setError', { name: plugin.name, error: false });\n      }\n    },\n\n    didInstall(plugin) {\n      if (plugin) {\n        // Change the view to installed if we started installing a plugin\n        this.$refs.tabs?.select(TABS_VALUES.INSTALLED);\n\n        // Clear the load error, if there was one previously\n        this.$store.dispatch('uiplugins/setError', { name: plugin.name, error: false });\n      }\n    },\n\n    showPluginDetail(plugin) {\n      this.$refs.infoPanel.show(plugin);\n    },\n\n    updatePluginInstallStatus(name, status) {\n      Vue.set(this.installing, name, status);\n    },\n\n    setMenu(event) {\n      this.menuOpen = !!event;\n\n      if (event) {\n        this.menuTargetElement = this.$refs.actions;\n        this.menuTargetEvent = event;\n      } else {\n        this.menuTargetElement = undefined;\n        this.menuTargetEvent = undefined;\n      }\n    },\n\n    reload() {\n      this.$router.go();\n    },\n\n    manageRepos() {\n      this.$router.push({\n        name:   'c-cluster-product-resource',\n        params: {\n          cluster:  'local',\n          product:  APP_PRODUCT,\n          resource: CATALOG.CLUSTER_REPO\n        }\n      });\n    },\n\n    manageExtensionView() {\n      this.showCatalogList = !this.showCatalogList;\n    },\n\n    updateAddReposSetting() {\n      if (this.addExtensionReposBannerSetting?.value === 'true') {\n        this.addExtensionReposBannerSetting.value = 'false';\n        this.addExtensionReposBannerSetting.save();\n      }\n    }\n  }\n};\n</script>\n\n<template>\n  <div class=\"plugins\">\n    <div class=\"plugin-header\">\n      <template v-if=\"showCatalogList\">\n        <div class=\"catalog-title\">\n          <h2\n            class=\"mb-0 mr-10\"\n            data-testid=\"extensions-catalog-title\"\n          >\n            <a\n              class=\"link\"\n              @click=\"manageExtensionView()\"\n            >\n              {{ t('plugins.manageCatalog.title') }}:\n            </a>\n            <t k=\"plugins.manageCatalog.subtitle\" />\n          </h2>\n          <BadgeState\n            color=\"bg-warning\"\n            :label=\"t('generic.experimental')\"\n            class=\"badge\"\n          />\n        </div>\n      </template>\n      <template v-else>\n        <h2 data-testid=\"extensions-page-title\">\n          {{ t('plugins.title') }}\n        </h2>\n      </template>\n      <div class=\"actions-container\">\n        <div\n          v-if=\"reloadRequired\"\n          class=\"plugin-reload-banner mr-20\"\n          data-testid=\"extension-reload-banner\"\n        >\n          <i class=\"icon icon-checkmark mr-10\" />\n          <span>\n            {{ t('plugins.reload') }}\n          </span>\n          <button\n            class=\"ml-10 btn btn-sm role-primary\"\n            data-testid=\"extension-reload-banner-reload-btn\"\n            @click=\"reload()\"\n          >\n            {{ t('generic.reload') }}\n          </button>\n        </div>\n        <div v-if=\"hasService && hasMenuActions\">\n          <button\n            ref=\"actions\"\n            aria-haspopup=\"true\"\n            type=\"button\"\n            class=\"btn role-multi-action actions\"\n            data-testid=\"extensions-page-menu\"\n            @click=\"setMenu\"\n          >\n            <i class=\"icon icon-actions\" />\n          </button>\n          <ActionMenu\n            :custom-actions=\"menuActions\"\n            :open=\"menuOpen\"\n            :use-custom-target-element=\"true\"\n            :custom-target-element=\"menuTargetElement\"\n            :custom-target-event=\"menuTargetEvent\"\n            @close=\"setMenu(false)\"\n            @devLoad=\"showDeveloperLoadDialog\"\n            @removePluginSupport=\"removePluginSupport\"\n            @manageRepos=\"manageRepos\"\n            @addRancherRepos=\"showAddExtensionReposDialog\"\n            @manageExtensionView=\"manageExtensionView\"\n          />\n        </div>\n      </div>\n    </div>\n\n    <PluginInfoPanel ref=\"infoPanel\" />\n\n    <div v-if=\"!hasService\">\n      <div\n        v-if=\"loading\"\n        class=\"data-loading\"\n      >\n        <i class=\"icon-spin icon icon-spinner\" />\n        <t\n          k=\"generic.loading\"\n          :raw=\"true\"\n        />\n      </div>\n      <SetupUIPlugins\n        v-else\n        class=\"setup-message\"\n        @done=\"updateInstallStatus(true)\"\n        @refreshCharts=\"refreshCharts(true)\"\n      />\n    </div>\n    <div v-else>\n      <template v-if=\"showCatalogList\">\n        <CatalogList\n          @showCatalogLoadDialog=\"showCatalogLoadDialog\"\n          @showCatalogUninstallDialog=\"showCatalogUninstallDialog($event)\"\n        />\n      </template>\n      <template v-else>\n        <Banner\n          v-if=\"showAddReposBanner\"\n          color=\"warning\"\n          class=\"add-repos-banner mb-20\"\n          data-testid=\"extensions-new-repos-banner\"\n        >\n          <span>{{ t('plugins.addRepos.banner', {}, true) }}</span>\n          <button\n            class=\"ml-10 btn btn-sm role-primary\"\n            data-testid=\"extensions-new-repos-banner-action-btn\"\n            @click=\"showAddExtensionReposDialog()\"\n          >\n            {{ t('plugins.addRepos.bannerBtn') }}\n          </button>\n        </Banner>\n\n        <Tabbed\n          ref=\"tabs\"\n          :tabs-only=\"true\"\n          data-testid=\"extension-tabs\"\n          @changed=\"filterChanged\"\n        >\n          <Tab\n            :name=\"TABS_VALUES.INSTALLED\"\n            data-testid=\"extension-tab-installed\"\n            label-key=\"plugins.tabs.installed\"\n            :weight=\"20\"\n          />\n          <Tab\n            :name=\"TABS_VALUES.AVAILABLE\"\n            data-testid=\"extension-tab-available\"\n            label-key=\"plugins.tabs.available\"\n            :weight=\"19\"\n          />\n          <Tab\n            :name=\"TABS_VALUES.UPDATES\"\n            label-key=\"plugins.tabs.updates\"\n            :weight=\"18\"\n            :badge=\"updates.length\"\n          />\n          <Tab\n            :name=\"TABS_VALUES.ALL\"\n            label-key=\"plugins.tabs.all\"\n            :weight=\"17\"\n          />\n        </Tabbed>\n        <template>\n          <div\n            v-if=\"loading\"\n            class=\"data-loading\"\n          >\n            <i class=\"icon-spin icon icon-spinner\" />\n            <t\n              k=\"generic.loading\"\n              :raw=\"true\"\n            />\n          </div>\n          <div\n            v-else\n            class=\"plugin-list\"\n            :class=\"{'v-margin': !list.length}\"\n          >\n            <IconMessage\n              v-if=\"list.length === 0\"\n              :vertical=\"true\"\n              :subtle=\"true\"\n              icon=\"icon-extension\"\n              :message=\"emptyMessage\"\n            />\n            <template v-else>\n              <div\n                v-for=\"(plugin, i) in list\"\n                :key=\"plugin.name + i\"\n                class=\"plugin\"\n                :data-testid=\"`extension-card-${plugin.name}`\"\n                @click=\"showPluginDetail(plugin)\"\n              >\n                <!-- plugin icon -->\n                <div\n                  class=\"plugin-icon\"\n                  :class=\"applyDarkModeBg\"\n                >\n                  <LazyImage\n                    v-if=\"plugin.icon\"\n                    :initial-src=\"defaultIcon\"\n                    :error-src=\"defaultIcon\"\n                    :src=\"plugin.icon\"\n                    class=\"icon plugin-icon-img\"\n                  />\n                  <img\n                    v-else\n                    :src=\"defaultIcon\"\n                    class=\"icon plugin-icon-img\"\n                  >\n                </div>\n                <!-- plugin card -->\n                <div class=\"plugin-metadata\">\n                  <!-- plugin basic info -->\n                  <div class=\"plugin-name\">\n                    {{ plugin.label }}\n                  </div>\n                  <div>{{ plugin.description }}</div>\n                  <div class=\"plugin-version\">\n                    <span\n                      v-if=\"plugin.installing\"\n                      class=\"plugin-installing\"\n                    >\n                      -\n                    </span>\n                    <span v-else>\n                      <span>{{ plugin.displayVersion }}</span>\n                      <span\n                        v-if=\"plugin.upgrade\"\n                        v-clean-tooltip=\"t('plugins.upgradeAvailable')\"\n                      > -> {{ plugin.upgrade }}</span>\n                      <p\n                        v-if=\"plugin.installedError\"\n                        class=\"incompatible\"\n                      >\n                        <i class=\"icon icon-warning icon-lg text-warning\" />\n                        <span>{{ plugin.installedError }}</span>\n                      </p>\n                      <p\n                        v-else-if=\"plugin.incompatibleRancherVersion\"\n                        class=\"incompatible\"\n                      >{{ plugin.incompatibleRancherVersion }}</p>\n                      <p\n                        v-else-if=\"plugin.incompatibleKubeVersion\"\n                        class=\"incompatible\"\n                      >{{ plugin.incompatibleKubeVersion }}</p>\n                    </span>\n                  </div>\n                  <!-- plugin badges -->\n                  <div\n                    v-if=\"plugin.builtin\"\n                    class=\"plugin-badges\"\n                  >\n                    <div class=\"plugin-builtin\">\n                      {{ t('plugins.labels.builtin') }}\n                    </div>\n                  </div>\n                  <div\n                    v-else\n                    class=\"plugin-badges\"\n                  >\n                    <div\n                      v-if=\"!plugin.certified\"\n                      v-clean-tooltip=\"t('plugins.descriptions.third-party')\"\n                    >\n                      {{ t('plugins.labels.third-party') }}\n                    </div>\n                    <div\n                      v-if=\"plugin.experimental\"\n                      v-clean-tooltip=\"t('plugins.descriptions.experimental')\"\n                    >\n                      {{ t('plugins.labels.experimental') }}\n                    </div>\n                  </div>\n                  <div class=\"plugin-spacer\" />\n                  <!-- plugin badges -->\n                  <div class=\"plugin-actions\">\n                    <template v-if=\"plugin.error\">\n                      <div\n                        v-clean-tooltip=\"plugin.error\"\n                        class=\"plugin-error\"\n                      >\n                        <i class=\"icon icon-warning\" />\n                      </div>\n                    </template>\n                    <!-- plugin status -->\n                    <div\n                      v-if=\"plugin.helmError\"\n                      v-clean-tooltip=\"t('plugins.helmError')\"\n                      class=\"plugin-error\"\n                    >\n                      <i class=\"icon icon-warning\" />\n                    </div>\n\n                    <div class=\"plugin-spacer\" />\n\n                    <div\n                      v-if=\"plugin.installing\"\n                      class=\"plugin-installing\"\n                    >\n                      <i class=\"version-busy icon icon-spin icon-spinner\" />\n                      <div v-if=\"plugin.installing ==='install'\">\n                        {{ t('plugins.labels.installing') }}\n                      </div>\n                      <div v-else>\n                        {{ t('plugins.labels.uninstalling') }}\n                      </div>\n                    </div>\n                    <!-- plugin buttons -->\n                    <div\n                      v-else-if=\"plugin.installed\"\n                      class=\"plugin-buttons\"\n                    >\n                      <button\n                        v-if=\"!plugin.builtin\"\n                        class=\"btn role-secondary\"\n                        :data-testid=\"`extension-card-uninstall-btn-${plugin.name}`\"\n                        @click=\"showUninstallDialog(plugin, $event)\"\n                      >\n                        {{ t('plugins.uninstall.label') }}\n                      </button>\n                      <button\n                        v-if=\"plugin.upgrade\"\n                        class=\"btn role-secondary\"\n                        :data-testid=\"`extension-card-update-btn-${plugin.name}`\"\n                        @click=\"showInstallDialog(plugin, 'update', $event)\"\n                      >\n                        {{ t('plugins.update.label') }}\n                      </button>\n                      <button\n                        v-if=\"!plugin.upgrade && plugin.installableVersions && plugin.installableVersions.length > 1\"\n                        class=\"btn role-secondary\"\n                        :data-testid=\"`extension-card-rollback-btn-${plugin.name}`\"\n                        @click=\"showInstallDialog(plugin, 'rollback', $event)\"\n                      >\n                        {{ t('plugins.rollback.label') }}\n                      </button>\n                    </div>\n                    <div\n                      v-else-if=\"plugin.installableVersions && plugin.installableVersions.length\"\n                      class=\"plugin-buttons\"\n                    >\n                      <button\n                        class=\"btn role-secondary\"\n                        :data-testid=\"`extension-card-install-btn-${plugin.name}`\"\n                        @click=\"showInstallDialog(plugin, 'install', $event)\"\n                      >\n                        {{ t('plugins.install.label') }}\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </template>\n          </div>\n        </template>\n      </template>\n    </div>\n\n    <InstallDialog\n      ref=\"installDialog\"\n      @closed=\"didInstall\"\n      @update=\"updatePluginInstallStatus\"\n    />\n    <UninstallDialog\n      ref=\"uninstallDialog\"\n      @closed=\"didUninstall\"\n      @update=\"updatePluginInstallStatus\"\n    />\n    <CatalogLoadDialog\n      ref=\"catalogLoadDialog\"\n      @closed=\"didInstall\"\n      @refresh=\"() => reloadRequired = true\"\n    />\n    <CatalogUninstallDialog\n      ref=\"catalogUninstallDialog\"\n      @closed=\"didUninstall\"\n      @refresh=\"() => reloadRequired = true\"\n    />\n    <DeveloperInstallDialog\n      ref=\"developerInstallDialog\"\n      @closed=\"didInstall\"\n    />\n    <RemoveUIPlugins\n      ref=\"removeUIPlugins\"\n      @done=\"updateInstallStatus\"\n    />\n    <AddExtensionRepos\n      ref=\"addExtensionReposDialog\"\n      @done=\"updateInstallStatus(true)\"\n    />\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n\n  .setup-message {\n    margin-top: 100px;\n  }\n\n  .data-loading {\n    align-items: center;\n    display: flex;\n    justify-content: center;\n\n    > I {\n      margin-right: 5px;\n    }\n  }\n\n  .plugin-reload-banner {\n    align-items: center;\n    background-color: var(--success-banner-bg);\n    display: flex;\n    padding: 0 10px;\n    border-radius: 5px;\n    min-height: 36px;\n\n    > i {\n      color: var(--success);\n      font-size: 14px;\n      font-weight: bold;\n    }\n\n    > button {\n      line-height: 30px;\n      min-height: 30px;\n    }\n  }\n\n  .plugin-complete {\n    font-size: 18px;\n  }\n\n  .plugin-list {\n    display: flex;\n    flex-wrap: wrap;\n\n    > .plugin:not(:last-child) {\n      margin-right: 20px;\n    }\n\n    &.v-margin {\n      margin-top: 40px;\n    }\n  }\n  .plugins {\n    display: inherit;\n  }\n\n  .plugin-header {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    margin-bottom: 10px;\n\n    .catalog-title {\n      display: flex;\n      flex-direction: row;\n      align-items: center;\n    }\n\n    > h2 {\n      flex: 1;\n      margin-bottom: 0;\n    }\n\n    .link {\n      cursor: pointer;\n    }\n\n    .actions-container {\n      display: flex;\n      flex-direction: row;\n      justify-content: flex-end;\n    }\n\n    .btn.actions {\n      line-height: 36px;\n      min-height: 36px;\n      padding: 0 10px;\n    }\n  }\n\n  .plugin {\n    display: flex;\n    border: 1px solid var(--border);\n    padding: 10px;\n    width: calc(33% - 20px);\n    max-width: 540px;\n    margin-bottom: 20px;\n    cursor: pointer;\n\n    .plugin-icon {\n      font-size: 40px;\n      margin-right:10px;\n      color: #888;\n      width: 44px;\n      height: 44px;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n\n      &.dark-mode {\n        border-radius: calc(2 * var(--border-radius));\n        overflow: hidden;\n        background-color: white;\n      }\n\n      .plugin-icon-img {\n        height: 40px;\n        width: 40px;\n        -o-object-fit: contain;\n        object-fit: contain;\n        top: 2px;\n        left: 2px;\n      }\n    }\n\n    .plugin-spacer {\n      flex: 1;\n    }\n\n    .plugin-metadata {\n      display: flex;\n      flex: 1;\n      flex-direction: column;\n\n      .plugin-buttons {\n        > button:not(:first-child) {\n          margin-left: 5px;\n        }\n      }\n    }\n\n    .plugin-builtin {\n      color: var(--primary);\n      display: block;\n      padding: 2px 0;\n      text-transform: uppercase;\n    }\n\n    .plugin-name {\n      font-size: 16px;\n      font-weight: bold;\n      margin-bottom: 5px;\n      text-transform: capitalize;\n    }\n\n    .plugin-badges {\n      display: flex;\n\n      > div {\n        border: 1px solid var(--border);\n        border-radius: 4px;\n        padding: 2px 8px;\n        margin-right: 10px;\n        font-size: 12px;\n      }\n    }\n\n    .plugin-version {\n      align-items: center;\n      display: inline-flex;\n      font-size: 12px;\n      border-radius: 4px;\n      margin: 5px 0;\n\n      i.icon-spinner {\n        padding-right: 5px;\n        font-size: 16px;\n        height: 16px;\n        width: 16px;\n      }\n\n      .incompatible {\n        margin: 10px 0;\n        font-weight: bold;\n      }\n    }\n\n    .plugin-installing {\n      align-items: center;\n      display: flex;\n\n      > div {\n        font-size: 14px;\n        margin-left: 5px;\n      }\n    }\n\n    .plugin-actions {\n      align-items:center;\n      display: flex;\n\n      $error-icon-size: 22px;\n\n      .plugin-error {\n        display: inline;\n        cursor: help;\n\n        > i {\n          color: var(--error);\n          height: $error-icon-size;\n          font-size: $error-icon-size;\n          width: $error-icon-size;\n        }\n      }\n\n      .btn {\n        line-height: 20px;\n        min-height: 20px;\n        padding: 0 5px;\n      }\n    }\n  }\n  ::v-deep .checkbox-label {\n    font-weight: normal !important;\n  }\n\n  ::v-deep .add-repos-banner .banner__content {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n  }\n\n  @media screen and (max-width: 1200px) {\n    .plugin-list {\n      .plugin {\n        width: calc(50% - 20px);\n      }\n    }\n  }\n\n  @media screen and (max-width: 960px) {\n    .plugin-list {\n      .plugin {\n        margin-right: 0 !important;\n        width: 100%;\n      }\n    }\n  }\n\n</style>\n"],"mappings":"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","ignoreList":[]}]}