{"remainingRequest":"/home/ubuntu/susecon-2024-ext-demo/node_modules/babel-loader/lib/index.js??ref--16-1!/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/middleware/authenticated.js","dependencies":[{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/middleware/authenticated.js","mtime":1725271280091},{"path":"/home/ubuntu/susecon-2024-ext-demo/babel.config.js","mtime":1725268750245},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/babel-loader/lib/index.js","mtime":1725271298942}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiL2hvbWUvdWJ1bnR1L3N1c2Vjb24tMjAyNC1leHQtZGVtby9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvcmVnZW5lcmF0b3IvaW5kZXguanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmZ1bmN0aW9uIG93bktleXMoZSwgcikgeyB2YXIgdCA9IE9iamVjdC5rZXlzKGUpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgbyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7IHIgJiYgKG8gPSBvLmZpbHRlcihmdW5jdGlvbiAocikgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLCByKS5lbnVtZXJhYmxlOyB9KSksIHQucHVzaC5hcHBseSh0LCBvKTsgfSByZXR1cm4gdDsgfQpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKGUpIHsgZm9yICh2YXIgciA9IDE7IHIgPCBhcmd1bWVudHMubGVuZ3RoOyByKyspIHsgdmFyIHQgPSBudWxsICE9IGFyZ3VtZW50c1tyXSA/IGFyZ3VtZW50c1tyXSA6IHt9OyByICUgMiA/IG93bktleXMoT2JqZWN0KHQpLCAhMCkuZm9yRWFjaChmdW5jdGlvbiAocikgeyBfZGVmaW5lUHJvcGVydHkoZSwgciwgdFtyXSk7IH0pIDogT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMgPyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyh0KSkgOiBvd25LZXlzKE9iamVjdCh0KSkuZm9yRWFjaChmdW5jdGlvbiAocikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgciwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LCByKSk7IH0pOyB9IHJldHVybiBlOyB9CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvcnMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudmFsdWVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucHJvbWlzZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLm1hdGNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnN0YXJ0cy13aXRoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgeyBSRURJUkVDVEVEIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy9jb29raWVzJzsKaW1wb3J0IHsgTkFNRSBhcyBFWFBMT1JFUiB9IGZyb20gJ0BzaGVsbC9jb25maWcvcHJvZHVjdC9leHBsb3Jlcic7CmltcG9ydCB7IFNFVFVQLCBUSU1FRF9PVVQsIFVQR1JBREVELCBfRkxBR0dFRCwgX1VORkxBRyB9IGZyb20gJ0BzaGVsbC9jb25maWcvcXVlcnktcGFyYW1zJzsKaW1wb3J0IHsgU0VUVElORyB9IGZyb20gJ0BzaGVsbC9jb25maWcvc2V0dGluZ3MnOwppbXBvcnQgeyBNQU5BR0VNRU5ULCBOT1JNQU4sIERFRkFVTFRfV09SS1NQQUNFIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy90eXBlcyc7CmltcG9ydCB7IF9BTExfSUZfQVVUSEVEIH0gZnJvbSAnQHNoZWxsL3BsdWdpbnMvZGFzaGJvYXJkLXN0b3JlL2FjdGlvbnMnOwppbXBvcnQgeyBhcHBseVByb2R1Y3RzIH0gZnJvbSAnQHNoZWxsL3N0b3JlL3R5cGUtbWFwJzsKaW1wb3J0IHsgZmluZEJ5IH0gZnJvbSAnQHNoZWxsL3V0aWxzL2FycmF5JzsKaW1wb3J0IHsgQ2x1c3Rlck5vdEZvdW5kRXJyb3IsIFJlZGlyZWN0VG9FcnJvciB9IGZyb20gJ0BzaGVsbC91dGlscy9lcnJvcic7CmltcG9ydCB7IGdldCB9IGZyb20gJ0BzaGVsbC91dGlscy9vYmplY3QnOwppbXBvcnQgeyBzZXRGYXZJY29uLCBoYXZlU2V0RmF2SWNvbiB9IGZyb20gJ0BzaGVsbC91dGlscy9mYXZpY29uJzsKaW1wb3J0IGR5bmFtaWNQbHVnaW5Mb2FkZXIgZnJvbSAnQHNoZWxsL3BrZy9keW5hbWljLXBsdWdpbi1sb2FkZXInOwppbXBvcnQgeyBBRlRFUl9MT0dJTl9ST1VURSwgV09SS1NQQUNFIH0gZnJvbSAnQHNoZWxsL3N0b3JlL3ByZWZzJzsKaW1wb3J0IHsgQkFDS19UTyB9IGZyb20gJ0BzaGVsbC9jb25maWcvbG9jYWwtc3RvcmFnZSc7CmltcG9ydCB7IE5BTUUgYXMgRkxFRVRfTkFNRSB9IGZyb20gJ0BzaGVsbC9jb25maWcvcHJvZHVjdC9mbGVldC5qcyc7CmltcG9ydCB7IGNhblZpZXdSZXNvdXJjZSB9IGZyb20gJ0BzaGVsbC91dGlscy9hdXRoJzsKdmFyIGdldFBhY2thZ2VGcm9tUm91dGUgPSBmdW5jdGlvbiBnZXRQYWNrYWdlRnJvbVJvdXRlKHJvdXRlKSB7CiAgdmFyIF9hcnJheVNhZmUkZmluZDsKICBpZiAoIShyb3V0ZSAhPT0gbnVsbCAmJiByb3V0ZSAhPT0gdm9pZCAwICYmIHJvdXRlLm1ldGEpKSB7CiAgICByZXR1cm47CiAgfQogIC8vIFNvbWV0aW1lcyBtZXRhIGlzIGFuIGFycmF5Li4uIHNvbWV0aW1lcyBub3QKICB2YXIgYXJyYXlTYWZlID0gQXJyYXkuaXNBcnJheShyb3V0ZS5tZXRhKSA/IHJvdXRlLm1ldGEgOiBbcm91dGUubWV0YV07CiAgcmV0dXJuIChfYXJyYXlTYWZlJGZpbmQgPSBhcnJheVNhZmUuZmluZChmdW5jdGlvbiAobSkgewogICAgcmV0dXJuICEhbS5wa2c7CiAgfSkpID09PSBudWxsIHx8IF9hcnJheVNhZmUkZmluZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2FycmF5U2FmZSRmaW5kLnBrZzsKfTsKdmFyIGdldFJlc291cmNlRnJvbVJvdXRlID0gZnVuY3Rpb24gZ2V0UmVzb3VyY2VGcm9tUm91dGUodG8pIHsKICB2YXIgX3RvJHBhcmFtczsKICB2YXIgcmVzb3VyY2UgPSAoX3RvJHBhcmFtcyA9IHRvLnBhcmFtcykgPT09IG51bGwgfHwgX3RvJHBhcmFtcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RvJHBhcmFtcy5yZXNvdXJjZTsKICBpZiAoIXJlc291cmNlKSB7CiAgICByZXNvdXJjZSA9IGZpbmRNZXRhKHRvLCAncmVzb3VyY2UnKTsKICB9CiAgcmV0dXJuIHJlc291cmNlOwp9Owp2YXIgYmVmb3JlRWFjaFNldHVwID0gZmFsc2U7CmZ1bmN0aW9uIGZpbmRNZXRhKHJvdXRlLCBrZXkpIHsKICBpZiAocm91dGUgIT09IG51bGwgJiYgcm91dGUgIT09IHZvaWQgMCAmJiByb3V0ZS5tZXRhKSB7CiAgICB2YXIgbWV0YSA9IEFycmF5LmlzQXJyYXkocm91dGUubWV0YSkgPyByb3V0ZS5tZXRhIDogW3JvdXRlLm1ldGFdOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtZXRhLmxlbmd0aDsgaSsrKSB7CiAgICAgIGlmIChtZXRhW2ldW2tleV0pIHsKICAgICAgICByZXR1cm4gbWV0YVtpXVtrZXldOwogICAgICB9CiAgICB9CiAgfQogIHJldHVybiB1bmRlZmluZWQ7Cn0KZXhwb3J0IGZ1bmN0aW9uIGdldENsdXN0ZXJGcm9tUm91dGUodG8pIHsKICB2YXIgX3RvJHBhcmFtczI7CiAgdmFyIGNsdXN0ZXIgPSAoX3RvJHBhcmFtczIgPSB0by5wYXJhbXMpID09PSBudWxsIHx8IF90byRwYXJhbXMyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdG8kcGFyYW1zMi5jbHVzdGVyOwogIGlmICghY2x1c3RlcikgewogICAgY2x1c3RlciA9IGZpbmRNZXRhKHRvLCAnY2x1c3RlcicpOwogIH0KICByZXR1cm4gY2x1c3RlcjsKfQpleHBvcnQgZnVuY3Rpb24gZ2V0UHJvZHVjdEZyb21Sb3V0ZSh0bykgewogIHZhciBfdG8kcGFyYW1zMzsKICB2YXIgcHJvZHVjdCA9IChfdG8kcGFyYW1zMyA9IHRvLnBhcmFtcykgPT09IG51bGwgfHwgX3RvJHBhcmFtczMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90byRwYXJhbXMzLnByb2R1Y3Q7CiAgaWYgKCFwcm9kdWN0KSB7CiAgICB2YXIgX3RvJG5hbWU7CiAgICB2YXIgbWF0Y2ggPSAoX3RvJG5hbWUgPSB0by5uYW1lKSA9PT0gbnVsbCB8fCBfdG8kbmFtZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RvJG5hbWUubWF0Y2goL15jLWNsdXN0ZXItKFteLV0rKS8pOwogICAgaWYgKG1hdGNoKSB7CiAgICAgIHByb2R1Y3QgPSBtYXRjaFsxXTsKICAgIH0KICB9CgogIC8vIElmIHN0aWxsIG5vIHByb2R1Y3QsIHNlZSBpZiB0aGUgcm91dGUgaW5kaWNhdGVzIHRoZSBwcm9kdWN0IHZpYSByb3V0ZSBtZXRhZGF0YQogIGlmICghcHJvZHVjdCkgewogICAgcHJvZHVjdCA9IGZpbmRNZXRhKHRvLCAncHJvZHVjdCcpOwogIH0KICByZXR1cm4gcHJvZHVjdDsKfQpmdW5jdGlvbiBzZXRQcm9kdWN0KHN0b3JlLCB0bywgcmVkaXJlY3QpIHsKICB2YXIgX3N0b3JlJGdldHRlcnMkY3VycmVuLCBfc3RvcmUkZ2V0dGVycyRjdXJyZW4yOwogIHZhciBwcm9kdWN0ID0gZ2V0UHJvZHVjdEZyb21Sb3V0ZSh0byk7CgogIC8vIHNpbmNlIGFsbCBwcm9kdWN0cyBhcmUgaGFyZGNvZGVkIGFzIHJvdXRlcyAoZXg6IGMtbG9jYWwtZXhwbG9yZXIpLCBpZiB3ZSBtYXRjaCB0aGUgd2lsZGNhcmQgcm91dGUgaXQgbWVhbnMgdGhhdCB0aGUgcHJvZHVjdCBkb2VzIG5vdCBleGlzdAogIGlmIChwcm9kdWN0ICYmICghdG8ubWF0Y2hlZC5sZW5ndGggfHwgdG8ubWF0Y2hlZC5sZW5ndGggJiYgdG8ubWF0Y2hlZFswXS5wYXRoID09PSAnL2MvOmNsdXN0ZXIvOnByb2R1Y3QnKSB8fAogIC8vIGlmIHRoZSBwcm9kdWN0IGdyYWJiZWQgZnJvbSB0aGUgcm91dGUgaXMgbm90IHJlZ2lzdGVyZWQsIHRoZW4gd2UgZG9uJ3QgaGF2ZSBpdCEKICBwcm9kdWN0ICYmICFzdG9yZS5nZXR0ZXJzWyd0eXBlLW1hcC9pc1Byb2R1Y3RSZWdpc3RlcmVkJ10ocHJvZHVjdCkpIHsKICAgIHN0b3JlLmRpc3BhdGNoKCdsb2FkaW5nRXJyb3InLCBuZXcgRXJyb3Ioc3RvcmUuZ2V0dGVyc1snaTE4bi90J10oJ25hdi5mYWlsV2hhbGUucHJvZHVjdE5vdEZvdW5kJywgewogICAgICBwcm9kdWN0Tm90Rm91bmQ6IHByb2R1Y3QKICAgIH0sIHRydWUpKSk7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gcmVkaXJlY3QoMzAyLCAnL2ZhaWwtd2hhbGUnKTsKICAgIH07CiAgfQogIGlmICghcHJvZHVjdCkgewogICAgcHJvZHVjdCA9IEVYUExPUkVSOwogIH0KICB2YXIgb2xkUHJvZHVjdCA9IHN0b3JlLmdldHRlcnNbJ3Byb2R1Y3RJZCddOwogIHZhciBvbGRTdG9yZSA9IChfc3RvcmUkZ2V0dGVycyRjdXJyZW4gPSBzdG9yZS5nZXR0ZXJzWydjdXJyZW50UHJvZHVjdCddKSA9PT0gbnVsbCB8fCBfc3RvcmUkZ2V0dGVycyRjdXJyZW4gPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9zdG9yZSRnZXR0ZXJzJGN1cnJlbi5pblN0b3JlOwogIGlmIChwcm9kdWN0ICE9PSBvbGRQcm9kdWN0KSB7CiAgICBzdG9yZS5jb21taXQoJ3NldFByb2R1Y3QnLCBwcm9kdWN0KTsKICB9CiAgdmFyIG5ldVN0b3JlID0gKF9zdG9yZSRnZXR0ZXJzJGN1cnJlbjIgPSBzdG9yZS5nZXR0ZXJzWydjdXJyZW50UHJvZHVjdCddKSA9PT0gbnVsbCB8fCBfc3RvcmUkZ2V0dGVycyRjdXJyZW4yID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfc3RvcmUkZ2V0dGVycyRjdXJyZW4yLmluU3RvcmU7CiAgaWYgKG5ldVN0b3JlICE9PSBvbGRTdG9yZSkgewogICAgLy8gSWYgdGhlIHByb2R1Y3Qgc3RvcmUgY2hhbmdlcywgY2xlYXIgdGhlIGNhdGFsb2cuCiAgICAvLyBUaGVyZSBtaWdodCBiZSBtYW5hZ2VtZW50IGNhdGFsb2cgaXRlbXMgaW4gaXQgdnMgY2x1c3Rlci4KICAgIHN0b3JlLmNvbW1pdCgnY2F0YWxvZy9yZXNldCcpOwogIH0KICByZXR1cm4gZmFsc2U7Cn0KCi8qKgogKiBDaGVjayB0aGF0IHRoZSByZXNvdXJjZSBpcyB2YWxpZCwgaWYgbm90IHJlZGlyZWN0IHRvIGZhaWwgd2hhbGUKICoKICogVGhpcyByZXF1aXJlcyB0aGF0CiAqIC0gcHJvZHVjdCBpcyBzZXQKICogLSBwcm9kdWN0J3Mgc3RvcmUgaXMgc2V0IGFuZCBzZXR1cCAoc28gd2UgY2FuIGNoZWNrIHNjaGVtYSdzIHdpdGhpbiBpdCkKICogLSBwcm9kdWN0J3Mgc3RvcmUgaGFzIHRoZSBzY2hlbWFGb3IgZ2V0dGVyIChleHRlbnNpb24gc3RvcmVzIG1pZ2h0IG5vdCBoYXZlIGl0KQogKiAtIHRoZXJlJ3MgYSByZXNvdXJjZSBhc3NvY2lhdGVkIHdpdGggcm91dGUgKG1ldGEgb3IgcGFyYW0pCiAqLwpmdW5jdGlvbiBpbnZhbGlkUmVzb3VyY2Uoc3RvcmUsIHRvLCByZWRpcmVjdCkgewogIHZhciBwcm9kdWN0ID0gc3RvcmUuZ2V0dGVyc1snY3VycmVudFByb2R1Y3QnXTsKICB2YXIgcmVzb3VyY2UgPSBnZXRSZXNvdXJjZUZyb21Sb3V0ZSh0byk7CgogIC8vIEluIG9yZGVyIHRvIGNoZWNrIGEgcmVzb3VyY2UgaXMgdmFsaWQgd2UgbmVlZCB0aGVzZQogIGlmICghcHJvZHVjdCB8fCAhcmVzb3VyY2UpIHsKICAgIHJldHVybiBmYWxzZTsKICB9CiAgaWYgKGNhblZpZXdSZXNvdXJjZShzdG9yZSwgcmVzb3VyY2UpKSB7CiAgICByZXR1cm4gZmFsc2U7CiAgfQoKICAvLyBVbmtub3duIHJlc291cmNlLCByZWRpcmVjdCB0byBmYWlsIHdoYWxlCgogIHN0b3JlLmRpc3BhdGNoKCdsb2FkaW5nRXJyb3InLCBuZXcgRXJyb3Ioc3RvcmUuZ2V0dGVyc1snaTE4bi90J10oJ25hdi5mYWlsV2hhbGUucmVzb3VyY2VOb3RGb3VuZCcsIHsKICAgIHJlc291cmNlOiByZXNvdXJjZQogIH0sIHRydWUpKSk7CiAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiByZWRpcmVjdCgzMDIsICcvZmFpbC13aGFsZScpOwogIH07Cn0KZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKF94KSB7CiAgcmV0dXJuIF9yZWYyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KZnVuY3Rpb24gX3JlZjIoKSB7CiAgX3JlZjIgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKF9yZWYpIHsKICAgIHZhciByb3V0ZSwgYXBwLCBzdG9yZSwgcmVkaXJlY3QsICRjb29raWVzLCByZXEsIGlzRGV2LCBmcm9tLCAkcGx1Z2luLCBuZXh0LCB1cGdyYWRlZCwgaW5pdGlhbFBhc3MsIGZpcnN0TG9naW4sIHJlcywgcGxTZXR0aW5nLCBfcmVzLCBfcGxTZXR0aW5nLCBvaywgaXNMb2dnZWRJbiwgbm90TG9nZ2VkSW4sIG5vQXV0aCwgdjNVc2VyLCBmcm9tSGVhZGVyLCBtZSwgX21lLCBzdGF0dXMsIGJhY2tUbywgbG9jYWxDaGVja1Jlc291cmNlLCByZWRpcmVjdGVkLCBfcm91dGUkbWF0Y2hlZCwgY2x1c3RlcklkLCBwa2csIHByb2R1Y3QsIG9sZFBrZywgb2xkUHJvZHVjdCwgb2xkUGtnUGx1Z2luLCBhbHdheXMsIG5ld1BrZ1BsdWdpbiwgbmV3TG9jYXRpb24sIHJlc29sdmVkUm91dGUsIF9yZWRpcmVjdGVkLCBfcmVkaXJlY3RlZDIsIGlzU2luZ2xlUHJvZHVjdCwgX2lzU2luZ2xlUHJvZHVjdCRhZnRlLCB2YWx1ZTsKICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICBjYXNlIDA6CiAgICAgICAgICBub0F1dGggPSBmdW5jdGlvbiBfbm9BdXRoKCkgewogICAgICAgICAgICBzdG9yZS5jb21taXQoJ2F1dGgvaGFzQXV0aCcsIGZhbHNlKTsKICAgICAgICAgIH07CiAgICAgICAgICBub3RMb2dnZWRJbiA9IGZ1bmN0aW9uIF9ub3RMb2dnZWRJbigpIHsKICAgICAgICAgICAgc3RvcmUuY29tbWl0KCdhdXRoL2hhc0F1dGgnLCB0cnVlKTsKICAgICAgICAgICAgaWYgKHJvdXRlLm5hbWUgPT09ICdpbmRleCcpIHsKICAgICAgICAgICAgICByZXR1cm4gcmVkaXJlY3QoMzAyLCAnL2F1dGgvbG9naW4nKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICByZXR1cm4gcmVkaXJlY3QoMzAyLCAiL2F1dGgvbG9naW4/Ii5jb25jYXQoVElNRURfT1VUKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH07CiAgICAgICAgICBpc0xvZ2dlZEluID0gZnVuY3Rpb24gX2lzTG9nZ2VkSW4obWUpIHsKICAgICAgICAgICAgc3RvcmUuY29tbWl0KCdhdXRoL2hhc0F1dGgnLCB0cnVlKTsKICAgICAgICAgICAgc3RvcmUuY29tbWl0KCdhdXRoL2xvZ2dlZEluQXMnLCBtZS5pZCk7CiAgICAgICAgICB9OwogICAgICAgICAgcm91dGUgPSBfcmVmLnJvdXRlLCBhcHAgPSBfcmVmLmFwcCwgc3RvcmUgPSBfcmVmLnN0b3JlLCByZWRpcmVjdCA9IF9yZWYucmVkaXJlY3QsICRjb29raWVzID0gX3JlZi4kY29va2llcywgcmVxID0gX3JlZi5yZXEsIGlzRGV2ID0gX3JlZi5pc0RldiwgZnJvbSA9IF9yZWYuZnJvbSwgJHBsdWdpbiA9IF9yZWYuJHBsdWdpbiwgbmV4dCA9IF9yZWYubmV4dDsKICAgICAgICAgIGlmICghKHJvdXRlLnBhdGggJiYgdHlwZW9mIHJvdXRlLnBhdGggPT09ICdzdHJpbmcnKSkgewogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gOTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoIXJvdXRlLnBhdGguc3RhcnRzV2l0aCgnL19fd2VicGFja19obXIvJykpIHsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDc7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CiAgICAgICAgY2FzZSA3OgogICAgICAgICAgaWYgKCFyb3V0ZS5wYXRoLnN0YXJ0c1dpdGgoJy9mYWlsLXdoYWxlJykpIHsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CiAgICAgICAgY2FzZSA5OgogICAgICAgICAgLy8gVGhpcyB0ZWxscyBFbWJlciBub3QgdG8gcmVkaXJlY3QgYmFjayB0byB1cyBvbmNlIHlvdSd2ZSBhbHJlYWR5IGJlZW4gdG8gZGFzaGJvYXJkIG9uY2UuCiAgICAgICAgICBpZiAoISRjb29raWVzLmdldChSRURJUkVDVEVEKSkgewogICAgICAgICAgICAkY29va2llcy5zZXQoUkVESVJFQ1RFRCwgJ3RydWUnLCB7CiAgICAgICAgICAgICAgcGF0aDogJy8nLAogICAgICAgICAgICAgIHNhbWVTaXRlOiB0cnVlLAogICAgICAgICAgICAgIHNlY3VyZTogdHJ1ZQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICAgIHVwZ3JhZGVkID0gcm91dGUucXVlcnlbVVBHUkFERURdID09PSBfRkxBR0dFRDsKICAgICAgICAgIGlmICh1cGdyYWRlZCkgewogICAgICAgICAgICBhcHAucm91dGVyLmFwcGx5UXVlcnkoX2RlZmluZVByb3BlcnR5KHt9LCBVUEdSQURFRCwgX1VORkxBRykpOwogICAgICAgICAgICBzdG9yZS5kaXNwYXRjaCgnZ3Jvd2wvc3VjY2VzcycsIHsKICAgICAgICAgICAgICB0aXRsZTogc3RvcmUuZ2V0dGVyc1snaTE4bi90J10oJ3NlcnZlclVwZ3JhZGUudGl0bGUnKSwKICAgICAgICAgICAgICBtZXNzYWdlOiBzdG9yZS5nZXR0ZXJzWydpMThuL3QnXSgnc2VydmVyVXBncmFkZS5tZXNzYWdlJyksCiAgICAgICAgICAgICAgdGltZW91dDogMAogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KCiAgICAgICAgICAvLyBJbml0aWFsID9zZXR1cD1hZG1pbi1wYXNzd29yZCBjYW4gdGVjaG5pY2FsbHkgYmUgb24gYW55IHJvdXRlCiAgICAgICAgICBpbml0aWFsUGFzcyA9IHJvdXRlLnF1ZXJ5W1NFVFVQXTsKICAgICAgICAgIGZpcnN0TG9naW4gPSBudWxsOwogICAgICAgICAgX2NvbnRleHQucHJldiA9IDE0OwogICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE3OwogICAgICAgICAgcmV0dXJuIHN0b3JlLmRpc3BhdGNoKCdtYW5hZ2VtZW50L2ZpbmRBbGwnLCB7CiAgICAgICAgICAgIHR5cGU6IE1BTkFHRU1FTlQuU0VUVElORywKICAgICAgICAgICAgb3B0OiB7CiAgICAgICAgICAgICAgbG9hZDogX0FMTF9JRl9BVVRIRUQsCiAgICAgICAgICAgICAgdXJsOiAiL3YxLyIuY29uY2F0KE1BTkFHRU1FTlQuU0VUVElORyksCiAgICAgICAgICAgICAgcmVkaXJlY3RVbmF1dGhvcml6ZWQ6IGZhbHNlCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIGNhc2UgMTc6CiAgICAgICAgICAvLyBTZXQgdGhlIGZhdmljb24gLSB1c2UgY3VzdG9tIG9uZSBmcm9tIHN0b3JlIGlmIHNldAogICAgICAgICAgaWYgKCFoYXZlU2V0RmF2SWNvbigpKSB7CiAgICAgICAgICAgIHNldEZhdkljb24oc3RvcmUpOwogICAgICAgICAgfQogICAgICAgICAgcmVzID0gc3RvcmUuZ2V0dGVyc1snbWFuYWdlbWVudC9ieUlkJ10oTUFOQUdFTUVOVC5TRVRUSU5HLCBTRVRUSU5HLkZJUlNUX0xPR0lOKTsKICAgICAgICAgIHBsU2V0dGluZyA9IHN0b3JlLmdldHRlcnNbJ21hbmFnZW1lbnQvYnlJZCddKE1BTkFHRU1FTlQuU0VUVElORywgU0VUVElORy5QTCk7CiAgICAgICAgICBmaXJzdExvZ2luID0gKHJlcyA9PT0gbnVsbCB8fCByZXMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcy52YWx1ZSkgPT09ICd0cnVlJzsKICAgICAgICAgIGlmICghaW5pdGlhbFBhc3MgJiYgKHBsU2V0dGluZyA9PT0gbnVsbCB8fCBwbFNldHRpbmcgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBsU2V0dGluZy52YWx1ZSkgPT09ICdIYXJ2ZXN0ZXInKSB7CiAgICAgICAgICAgIGluaXRpYWxQYXNzID0gJ2FkbWluJzsKICAgICAgICAgIH0KICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyNjsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgMjQ6CiAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMjQ7CiAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDE0KTsKICAgICAgICBjYXNlIDI2OgogICAgICAgICAgaWYgKCEoZmlyc3RMb2dpbiA9PT0gbnVsbCkpIHsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQwOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAyNzsKICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzMDsKICAgICAgICAgIHJldHVybiBzdG9yZS5kaXNwYXRjaCgncmFuY2hlci9maW5kJywgewogICAgICAgICAgICB0eXBlOiAnc2V0dGluZycsCiAgICAgICAgICAgIGlkOiBTRVRUSU5HLkZJUlNUX0xPR0lOLAogICAgICAgICAgICBvcHQ6IHsKICAgICAgICAgICAgICB1cmw6ICIvdjMvc2V0dGluZ3MvIi5jb25jYXQoU0VUVElORy5GSVJTVF9MT0dJTikKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgY2FzZSAzMDoKICAgICAgICAgIF9yZXMgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgZmlyc3RMb2dpbiA9IChfcmVzID09PSBudWxsIHx8IF9yZXMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9yZXMudmFsdWUpID09PSAndHJ1ZSc7CiAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzQ7CiAgICAgICAgICByZXR1cm4gc3RvcmUuZGlzcGF0Y2goJ3JhbmNoZXIvZmluZCcsIHsKICAgICAgICAgICAgdHlwZTogJ3NldHRpbmcnLAogICAgICAgICAgICBpZDogU0VUVElORy5QTCwKICAgICAgICAgICAgb3B0OiB7CiAgICAgICAgICAgICAgdXJsOiAiL3YzL3NldHRpbmdzLyIuY29uY2F0KFNFVFRJTkcuUEwpCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIGNhc2UgMzQ6CiAgICAgICAgICBfcGxTZXR0aW5nID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgIGlmICghaW5pdGlhbFBhc3MgJiYgKF9wbFNldHRpbmcgPT09IG51bGwgfHwgX3BsU2V0dGluZyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3BsU2V0dGluZy52YWx1ZSkgPT09ICdIYXJ2ZXN0ZXInKSB7CiAgICAgICAgICAgIGluaXRpYWxQYXNzID0gJ2FkbWluJzsKICAgICAgICAgIH0KICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0MDsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgMzg6CiAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMzg7CiAgICAgICAgICBfY29udGV4dC50MSA9IF9jb250ZXh0WyJjYXRjaCJdKDI3KTsKICAgICAgICBjYXNlIDQwOgogICAgICAgICAgaWYgKCFmaXJzdExvZ2luKSB7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA1MDsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDM7CiAgICAgICAgICByZXR1cm4gdHJ5SW5pdGlhbFNldHVwKHN0b3JlLCBpbml0aWFsUGFzcyk7CiAgICAgICAgY2FzZSA0MzoKICAgICAgICAgIG9rID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgIGlmICghb2spIHsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ5OwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChpbml0aWFsUGFzcykgewogICAgICAgICAgICBzdG9yZS5kaXNwYXRjaCgnYXV0aC9zZXRJbml0aWFsUGFzcycsIGluaXRpYWxQYXNzKTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIHJlZGlyZWN0KHsKICAgICAgICAgICAgbmFtZTogJ2F1dGgtc2V0dXAnCiAgICAgICAgICB9KSk7CiAgICAgICAgY2FzZSA0OToKICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIHJlZGlyZWN0KHsKICAgICAgICAgICAgbmFtZTogJ2F1dGgtbG9naW4nCiAgICAgICAgICB9KSk7CiAgICAgICAgY2FzZSA1MDoKICAgICAgICAgIGlmICghKHN0b3JlLmdldHRlcnNbJ2F1dGgvZW5hYmxlZCddICE9PSBmYWxzZSAmJiAhc3RvcmUuZ2V0dGVyc1snYXV0aC9sb2dnZWRJbiddKSkgewogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gODk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgICAgX2NvbnRleHQubmV4dCA9IDUzOwogICAgICAgICAgcmV0dXJuIHN0b3JlLmRpc3BhdGNoKCdhdXRoL2dldFVzZXInKTsKICAgICAgICBjYXNlIDUzOgogICAgICAgICAgdjNVc2VyID0gc3RvcmUuZ2V0dGVyc1snYXV0aC92M1VzZXInXSB8fCB7fTsKICAgICAgICAgIGlmICghKHYzVXNlciAhPT0gbnVsbCAmJiB2M1VzZXIgIT09IHZvaWQgMCAmJiB2M1VzZXIubXVzdENoYW5nZVBhc3N3b3JkKSkgewogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNTY7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgcmVkaXJlY3QoewogICAgICAgICAgICBuYW1lOiAnYXV0aC1zZXR1cCcKICAgICAgICAgIH0pKTsKICAgICAgICBjYXNlIDU2OgogICAgICAgICAgLy8gSW4gbmV3ZXIgdmVyc2lvbnMgdGhlIEFQSSBjYWxscyByZXR1cm4gdGhlIGF1dGggc3RhdGUgaW5zdGVhZCBvZiBoYXZpbmcgdG8gbWFrZSBhIG5ldyBjYWxsIGFsbCB0aGUgdGltZS4KICAgICAgICAgIGZyb21IZWFkZXIgPSBzdG9yZS5nZXR0ZXJzWydhdXRoL2Zyb21IZWFkZXInXTsKICAgICAgICAgIGlmICghKGZyb21IZWFkZXIgPT09ICdub25lJykpIHsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDYxOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAgIG5vQXV0aCgpOwogICAgICAgICAgX2NvbnRleHQubmV4dCA9IDg4OwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSA2MToKICAgICAgICAgIGlmICghKGZyb21IZWFkZXIgPT09ICd0cnVlJykpIHsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDY4OwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA2NDsKICAgICAgICAgIHJldHVybiBmaW5kTWUoc3RvcmUpOwogICAgICAgIGNhc2UgNjQ6CiAgICAgICAgICBtZSA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICBpc0xvZ2dlZEluKG1lKTsKICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA4ODsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgNjg6CiAgICAgICAgICBpZiAoIShmcm9tSGVhZGVyID09PSAnZmFsc2UnKSkgewogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNzI7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgICAgbm90TG9nZ2VkSW4oKTsKICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA4ODsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgNzI6CiAgICAgICAgICBfY29udGV4dC5wcmV2ID0gNzI7CiAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNzU7CiAgICAgICAgICByZXR1cm4gZmluZE1lKHN0b3JlKTsKICAgICAgICBjYXNlIDc1OgogICAgICAgICAgX21lID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgIGlzTG9nZ2VkSW4oX21lKTsKICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA4ODsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgNzk6CiAgICAgICAgICBfY29udGV4dC5wcmV2ID0gNzk7CiAgICAgICAgICBfY29udGV4dC50MiA9IF9jb250ZXh0WyJjYXRjaCJdKDcyKTsKICAgICAgICAgIHN0YXR1cyA9IF9jb250ZXh0LnQyID09PSBudWxsIHx8IF9jb250ZXh0LnQyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfY29udGV4dC50Mi5fc3RhdHVzOwogICAgICAgICAgaWYgKCEoc3RhdHVzID09PSA0MDQpKSB7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA4NjsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgICBub0F1dGgoKTsKICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA4ODsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgODY6CiAgICAgICAgICBpZiAoc3RhdHVzID09PSA0MDEpIHsKICAgICAgICAgICAgbm90TG9nZ2VkSW4oKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHN0b3JlLmNvbW1pdCgnc2V0RXJyb3InLCB7CiAgICAgICAgICAgICAgZXJyb3I6IF9jb250ZXh0LnQyLAogICAgICAgICAgICAgIGxvY2F0aW9uRXJyb3I6IG5ldyBFcnJvcignQXV0aCBNaWRkbGV3YXJlJykKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKICAgICAgICBjYXNlIDg4OgogICAgICAgICAgc3RvcmUuZGlzcGF0Y2goJ2djU3RhcnRJbnRlcnZhbHMnKTsKICAgICAgICBjYXNlIDg5OgogICAgICAgICAgYmFja1RvID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKEJBQ0tfVE8pOwogICAgICAgICAgaWYgKGJhY2tUbykgewogICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oQkFDS19UTyk7CiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gYmFja1RvOwogICAgICAgICAgfQoKICAgICAgICAgIC8vIEdDIHNob3VsZCBiZSBub3RpZmllZCBvZiByb3V0ZSBjaGFuZ2UgYmVmb3JlIGFueSBmaW5kL2dldCByZXF1ZXN0IGlzIG1hZGUgdGhhdCBtaWdodCBiZSB1c2VkIGZvciB0aGF0IHBhZ2UKICAgICAgICAgIHN0b3JlLmRpc3BhdGNoKCdnY1JvdXRlQ2hhbmdlZCcsIHJvdXRlKTsKCiAgICAgICAgICAvLyBMb2FkIHN0dWZmCiAgICAgICAgICBsb2NhbENoZWNrUmVzb3VyY2UgPSBmYWxzZTsKICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA5NTsKICAgICAgICAgIHJldHVybiBhcHBseVByb2R1Y3RzKHN0b3JlLCAkcGx1Z2luKTsKICAgICAgICBjYXNlIDk1OgogICAgICAgICAgaWYgKGJlZm9yZUVhY2hTZXR1cCkgewogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTAzOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAgIGJlZm9yZUVhY2hTZXR1cCA9IHRydWU7CiAgICAgICAgICAvLyBUaGlzIG9ubHkgbmVlZHMgdG8gaGFwcGVuIHdoZW4gYmVmb3JlRWFjaCBob29rIGhhc24ndCBydW4gKHRoZSBpbml0aWFsIGxvYWQpCiAgICAgICAgICBsb2NhbENoZWNrUmVzb3VyY2UgPSB0cnVlOwogICAgICAgICAgc3RvcmUuYXBwLnJvdXRlci5iZWZvcmVFYWNoKGZ1bmN0aW9uICh0bywgZnJvbSwgbmV4dCkgewogICAgICAgICAgICAvLyBOT1RFIC0gVGhpcyBiZWZvcmVFYWNoIHJ1bnMgQUZURVIgdGhpcyBtaWRkbGV3YXJlLiBTbyBhbnl0aGluZyBpbiB0aGlzIG1pZGRsZXdhcmUgdGhhdCByZXF1aXJlcyBpdCBtdXN0IHNldCBpdCBtYW51YWxseQogICAgICAgICAgICB2YXIgcmVkaXJlY3RlZCA9IHNldFByb2R1Y3Qoc3RvcmUsIHRvLCByZWRpcmVjdCk7CiAgICAgICAgICAgIGlmIChyZWRpcmVjdGVkKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHJlZGlyZWN0ZWQoKTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZWRpcmVjdGVkID0gaW52YWxpZFJlc291cmNlKHN0b3JlLCB0bywgcmVkaXJlY3QpOwogICAgICAgICAgICBpZiAocmVkaXJlY3RlZCkgewogICAgICAgICAgICAgIHJldHVybiByZWRpcmVjdGVkKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgbmV4dCgpOwogICAgICAgICAgfSk7CgogICAgICAgICAgLy8gQ2FsbCBpdCBmb3IgdGhlIGluaXRpYWwgcGFnZWxvYWQKICAgICAgICAgIHJlZGlyZWN0ZWQgPSBzZXRQcm9kdWN0KHN0b3JlLCByb3V0ZSwgcmVkaXJlY3QpOwogICAgICAgICAgaWYgKCFyZWRpcmVjdGVkKSB7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMDI7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgcmVkaXJlY3RlZCgpKTsKICAgICAgICBjYXNlIDEwMjoKICAgICAgICAgIHN0b3JlLmFwcC5yb3V0ZXIuYWZ0ZXJFYWNoKGZ1bmN0aW9uICh0bywgZnJvbSkgewogICAgICAgICAgICAvLyBDbGVhciBzdGF0ZSB1c2VkIHRvIHJlY29yZCBpZiBiYWNrIGJ1dHRvbiB3YXMgdXNlZCBmb3IgbmF2aWdhdGlvbgogICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICB3aW5kb3cuX3BvcFN0YXRlRGV0ZWN0ZWQgPSBmYWxzZTsKICAgICAgICAgICAgfSwgMSk7CiAgICAgICAgICB9KTsKICAgICAgICBjYXNlIDEwMzoKICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxMDM7CiAgICAgICAgICBjbHVzdGVySWQgPSBnZXQocm91dGUsICdwYXJhbXMuY2x1c3RlcicpOyAvLyBSb3V0ZSBjYW4gcHJvdmlkZSBjbHVzdGVyIElEIHZpYSBtZXRhZGF0YQogICAgICAgICAgaWYgKCFjbHVzdGVySWQgJiYgcm91dGUpIHsKICAgICAgICAgICAgY2x1c3RlcklkID0gZ2V0Q2x1c3RlckZyb21Sb3V0ZShyb3V0ZSk7CiAgICAgICAgICB9CiAgICAgICAgICBwa2cgPSBnZXRQYWNrYWdlRnJvbVJvdXRlKHJvdXRlKTsKICAgICAgICAgIHByb2R1Y3QgPSBnZXRQcm9kdWN0RnJvbVJvdXRlKHJvdXRlKTsKICAgICAgICAgIG9sZFBrZyA9IGdldFBhY2thZ2VGcm9tUm91dGUoZnJvbSk7CiAgICAgICAgICBvbGRQcm9kdWN0ID0gZ2V0UHJvZHVjdEZyb21Sb3V0ZShmcm9tKTsgLy8gTGVhdmUgYW4gb2xkIHBrZyB3aGVyZSB3ZSB3ZXJlbid0IGJlZm9yZT8KICAgICAgICAgIG9sZFBrZ1BsdWdpbiA9IG9sZFBrZyA/IE9iamVjdC52YWx1ZXMoJHBsdWdpbi5nZXRQbHVnaW5zKCkpLmZpbmQoZnVuY3Rpb24gKHApIHsKICAgICAgICAgICAgcmV0dXJuIHAubmFtZSA9PT0gb2xkUGtnOwogICAgICAgICAgfSkgOiBudWxsOwogICAgICAgICAgaWYgKCEob2xkUGtnICYmIG9sZFBrZyAhPT0gcGtnKSkgewogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTE0OwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMTQ7CiAgICAgICAgICByZXR1cm4gb2xkUGtnUGx1Z2luLm9uTGVhdmUoc3RvcmUsIHsKICAgICAgICAgICAgY2x1c3RlcklkOiBjbHVzdGVySWQsCiAgICAgICAgICAgIHByb2R1Y3Q6IHByb2R1Y3QsCiAgICAgICAgICAgIG9sZFByb2R1Y3Q6IG9sZFByb2R1Y3QsCiAgICAgICAgICAgIG9sZElzRXh0OiAhIW9sZFBrZwogICAgICAgICAgfSk7CiAgICAgICAgY2FzZSAxMTQ6CiAgICAgICAgICAvLyBTb21ldGltZXMgdGhpcyBuZWVkcyB0byBoYXBwZW4gYmVmb3JlIG9yIGFsb25nc2lkZSBvdGhlciB0aGluZ3MuLi4gYnV0IGlzIGFsd2F5cyBuZWVkZWQKICAgICAgICAgIGFsd2F5cyA9IFtzdG9yZS5kaXNwYXRjaCgnbG9hZE1hbmFnZW1lbnQnKV07IC8vIEVudGVyaW5nIGEgbmV3IHBhY2thZ2Ugd2hlcmUgd2Ugd2VyZW4ndCBiZWZvcmU/CiAgICAgICAgICBuZXdQa2dQbHVnaW4gPSBwa2cgPyBPYmplY3QudmFsdWVzKCRwbHVnaW4uZ2V0UGx1Z2lucygpKS5maW5kKGZ1bmN0aW9uIChwKSB7CiAgICAgICAgICAgIHJldHVybiBwLm5hbWUgPT09IHBrZzsKICAgICAgICAgIH0pIDogbnVsbDsgLy8gTm90ZSAtIFdlIGNhbid0IGJsb2NrIG9uIG9sZFBrZyAhPT0gbmV3UGtnIGJlY2F1c2Ugb24gYSBmcmVzaCBsb2FkIHRoZSBgZnJvbWAgcm91dGUgZXF1YWxzIHRoZSBgdG9gIHJvdXRlCiAgICAgICAgICBpZiAoIShwa2cgJiYgKG9sZFBrZyAhPT0gcGtnIHx8IGZyb20uZnVsbFBhdGggPT09IHJvdXRlLmZ1bGxQYXRoKSkpIHsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEyMTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTE5OwogICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKGFsd2F5cyk7CiAgICAgICAgY2FzZSAxMTk6CiAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTIxOwogICAgICAgICAgcmV0dXJuIG5ld1BrZ1BsdWdpbi5vbkVudGVyKHN0b3JlLCB7CiAgICAgICAgICAgIGNsdXN0ZXJJZDogY2x1c3RlcklkLAogICAgICAgICAgICBwcm9kdWN0OiBwcm9kdWN0LAogICAgICAgICAgICBvbGRQcm9kdWN0OiBvbGRQcm9kdWN0LAogICAgICAgICAgICBvbGRJc0V4dDogISFvbGRQa2cKICAgICAgICAgIH0pOwogICAgICAgIGNhc2UgMTIxOgogICAgICAgICAgaWYgKChfcm91dGUkbWF0Y2hlZCA9IHJvdXRlLm1hdGNoZWQpICE9PSBudWxsICYmIF9yb3V0ZSRtYXRjaGVkICE9PSB2b2lkIDAgJiYgX3JvdXRlJG1hdGNoZWQubGVuZ3RoKSB7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMzA7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEyNDsKICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChbXS5jb25jYXQoYWx3YXlzKSk7CiAgICAgICAgY2FzZSAxMjQ6CiAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTI2OwogICAgICAgICAgcmV0dXJuIGR5bmFtaWNQbHVnaW5Mb2FkZXIuY2hlY2soewogICAgICAgICAgICByb3V0ZTogcm91dGUsCiAgICAgICAgICAgIHN0b3JlOiBzdG9yZQogICAgICAgICAgfSk7CiAgICAgICAgY2FzZSAxMjY6CiAgICAgICAgICBuZXdMb2NhdGlvbiA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAvLyBJZiB3ZSBoYXZlIGEgbmV3IGxvY2F0aW9uLCBkb3VibGUgY2hlY2sgdGhhdCBpdCdzIGFjdHVhbGx5IHZhbGlkCiAgICAgICAgICByZXNvbHZlZFJvdXRlID0gbmV3TG9jYXRpb24gPyBzdG9yZS5hcHAucm91dGVyLnJlc29sdmUobmV3TG9jYXRpb24pIDogbnVsbDsKICAgICAgICAgIGlmICghKHJlc29sdmVkUm91dGUgIT09IG51bGwgJiYgcmVzb2x2ZWRSb3V0ZSAhPT0gdm9pZCAwICYmIHJlc29sdmVkUm91dGUucm91dGUubWF0Y2hlZC5sZW5ndGgpKSB7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMzA7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgbmV4dChuZXdMb2NhdGlvbikpOwogICAgICAgIGNhc2UgMTMwOgogICAgICAgICAgaWYgKCEoKG9sZFByb2R1Y3QgPT09IEZMRUVUX05BTUUgfHwgcHJvZHVjdCA9PT0gRkxFRVRfTkFNRSkgJiYgb2xkUHJvZHVjdCAhPT0gcHJvZHVjdCkpIHsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEzNTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgICAvLyBTZWUgbm90ZSBhYm92ZSBmb3Igc3RvcmUuYXBwLnJvdXRlci5iZWZvcmVFYWNoLCBuZWVkIHRvIHNldFByb2R1Y3QgbWFudWFsbHksIGZvciB0aGUgbW9tZW50IGRvIHRoaXMgaW4gYSB0YXJnZXRlZCB3YXkKICAgICAgICAgIF9yZWRpcmVjdGVkID0gc2V0UHJvZHVjdChzdG9yZSwgcm91dGUsIHJlZGlyZWN0KTsKICAgICAgICAgIGlmICghX3JlZGlyZWN0ZWQpIHsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEzNDsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBfcmVkaXJlY3RlZCgpKTsKICAgICAgICBjYXNlIDEzNDoKICAgICAgICAgIHN0b3JlLmNvbW1pdCgndXBkYXRlV29ya3NwYWNlJywgewogICAgICAgICAgICB2YWx1ZTogc3RvcmUuZ2V0dGVyc1sncHJlZnMvZ2V0J10oV09SS1NQQUNFKSB8fCBERUZBVUxUX1dPUktTUEFDRSwKICAgICAgICAgICAgZ2V0dGVyczogc3RvcmUuZ2V0dGVycwogICAgICAgICAgfSk7CiAgICAgICAgY2FzZSAxMzU6CiAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTM3OwogICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKFtdLmNvbmNhdChhbHdheXMsIFtzdG9yZS5kaXNwYXRjaCgnbG9hZENsdXN0ZXInLCB7CiAgICAgICAgICAgIGlkOiBjbHVzdGVySWQsCiAgICAgICAgICAgIG9sZFBrZzogb2xkUGtnUGx1Z2luLAogICAgICAgICAgICBuZXdQa2c6IG5ld1BrZ1BsdWdpbiwKICAgICAgICAgICAgcHJvZHVjdDogcHJvZHVjdCwKICAgICAgICAgICAgb2xkUHJvZHVjdDogb2xkUHJvZHVjdCwKICAgICAgICAgICAgdGFyZ2V0Um91dGU6IHJvdXRlCiAgICAgICAgICB9KV0pKTsKICAgICAgICBjYXNlIDEzNzoKICAgICAgICAgIGlmICghbG9jYWxDaGVja1Jlc291cmNlKSB7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNDE7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgICAgX3JlZGlyZWN0ZWQyID0gaW52YWxpZFJlc291cmNlKHN0b3JlLCByb3V0ZSwgcmVkaXJlY3QpOwogICAgICAgICAgaWYgKCFfcmVkaXJlY3RlZDIpIHsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE0MTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBfcmVkaXJlY3RlZDIoKSk7CiAgICAgICAgY2FzZSAxNDE6CiAgICAgICAgICBpZiAoY2x1c3RlcklkKSB7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNDg7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgICAgY2x1c3RlcklkID0gc3RvcmUuZ2V0dGVyc1snZGVmYXVsdENsdXN0ZXJJZCddOyAvLyBUaGlzIG5lZWRzIHRoZSBjbHVzdGVyIGxpc3QsIHNvIG5vIHBhcmFsbGVsCiAgICAgICAgICBpc1NpbmdsZVByb2R1Y3QgPSBzdG9yZS5nZXR0ZXJzWydpc1NpbmdsZVByb2R1Y3QnXTsKICAgICAgICAgIGlmICghKGlzU2luZ2xlUHJvZHVjdCAhPT0gbnVsbCAmJiBpc1NpbmdsZVByb2R1Y3QgIT09IHZvaWQgMCAmJiBpc1NpbmdsZVByb2R1Y3QuYWZ0ZXJMb2dpblJvdXRlKSkgewogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTQ4OwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAgIHZhbHVlID0gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHsKICAgICAgICAgICAgbmFtZTogJ2MtY2x1c3Rlci1wcm9kdWN0JwogICAgICAgICAgfSwgaXNTaW5nbGVQcm9kdWN0LmFmdGVyTG9naW5Sb3V0ZSksIHt9LCB7CiAgICAgICAgICAgIHBhcmFtczogX29iamVjdFNwcmVhZCh7CiAgICAgICAgICAgICAgY2x1c3RlcjogY2x1c3RlcklkCiAgICAgICAgICAgIH0sIChfaXNTaW5nbGVQcm9kdWN0JGFmdGUgPSBpc1NpbmdsZVByb2R1Y3QuYWZ0ZXJMb2dpblJvdXRlKSA9PT0gbnVsbCB8fCBfaXNTaW5nbGVQcm9kdWN0JGFmdGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9pc1NpbmdsZVByb2R1Y3QkYWZ0ZS5wYXJhbXMpCiAgICAgICAgICB9KTsKICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNDg7CiAgICAgICAgICByZXR1cm4gc3RvcmUuZGlzcGF0Y2goJ3ByZWZzL3NldCcsIHsKICAgICAgICAgICAga2V5OiBBRlRFUl9MT0dJTl9ST1VURSwKICAgICAgICAgICAgdmFsdWU6IHZhbHVlCiAgICAgICAgICB9KTsKICAgICAgICBjYXNlIDE0ODoKICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNjA7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlIDE1MDoKICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxNTA7CiAgICAgICAgICBfY29udGV4dC50MyA9IF9jb250ZXh0WyJjYXRjaCJdKDEwMyk7CiAgICAgICAgICBpZiAoIShfY29udGV4dC50My5uYW1lID09PSBDbHVzdGVyTm90Rm91bmRFcnJvci5uYW1lKSkgewogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTU0OwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIHJlZGlyZWN0KDMwMiwgJy9ob21lJykpOwogICAgICAgIGNhc2UgMTU0OgogICAgICAgICAgaWYgKCEoX2NvbnRleHQudDMubmFtZSA9PT0gUmVkaXJlY3RUb0Vycm9yLm5hbWUpKSB7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNTg7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgcmVkaXJlY3QoMzAyLCBfY29udGV4dC50My51cmwpKTsKICAgICAgICBjYXNlIDE1ODoKICAgICAgICAgIC8vIFNldHMgZXJyb3IgNTAwIGlmIGxvc3QgY29ubmVjdGlvbiB0byBBUEkKICAgICAgICAgIHN0b3JlLmNvbW1pdCgnc2V0RXJyb3InLCB7CiAgICAgICAgICAgIGVycm9yOiBfY29udGV4dC50MywKICAgICAgICAgICAgbG9jYXRpb25FcnJvcjogbmV3IEVycm9yKHN0b3JlLmdldHRlcnNbJ2kxOG4vdCddKCduYXYuZmFpbFdoYWxlLmF1dGhNaWRkbGV3YXJlJykpCiAgICAgICAgICB9KTsKICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIHJlZGlyZWN0KDMwMiwgJy9mYWlsLXdoYWxlJykpOwogICAgICAgIGNhc2UgMTYwOgogICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICB9CiAgICB9LCBfY2FsbGVlLCBudWxsLCBbWzE0LCAyNF0sIFsyNywgMzhdLCBbNzIsIDc5XSwgWzEwMywgMTUwXV0pOwogIH0pKTsKICByZXR1cm4gX3JlZjIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQpmdW5jdGlvbiBmaW5kTWUoX3gyKSB7CiAgcmV0dXJuIF9maW5kTWUuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQpmdW5jdGlvbiBfZmluZE1lKCkgewogIF9maW5kTWUgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMihzdG9yZSkgewogICAgdmFyIHByaW5jaXBhbHMsIG1lOwogICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICBjYXNlIDA6CiAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDI7CiAgICAgICAgICByZXR1cm4gc3RvcmUuZGlzcGF0Y2goJ3JhbmNoZXIvZmluZEFsbCcsIHsKICAgICAgICAgICAgdHlwZTogTk9STUFOLlBSSU5DSVBBTCwKICAgICAgICAgICAgb3B0OiB7CiAgICAgICAgICAgICAgdXJsOiAnL3YzL3ByaW5jaXBhbHMnLAogICAgICAgICAgICAgIHJlZGlyZWN0VW5hdXRob3JpemVkOiBmYWxzZQogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICBjYXNlIDI6CiAgICAgICAgICBwcmluY2lwYWxzID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICBtZSA9IGZpbmRCeShwcmluY2lwYWxzLCAnbWUnLCB0cnVlKTsKICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCBtZSk7CiAgICAgICAgY2FzZSA1OgogICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgfQogICAgfSwgX2NhbGxlZTIpOwogIH0pKTsKICByZXR1cm4gX2ZpbmRNZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CmZ1bmN0aW9uIHRyeUluaXRpYWxTZXR1cChfeDMpIHsKICByZXR1cm4gX3RyeUluaXRpYWxTZXR1cC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CmZ1bmN0aW9uIF90cnlJbml0aWFsU2V0dXAoKSB7CiAgX3RyeUluaXRpYWxTZXR1cCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKHN0b3JlKSB7CiAgICB2YXIgcGFzc3dvcmQsCiAgICAgIHJlcywKICAgICAgX2FyZ3MzID0gYXJndW1lbnRzOwogICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICBjYXNlIDA6CiAgICAgICAgICBwYXNzd29yZCA9IF9hcmdzMy5sZW5ndGggPiAxICYmIF9hcmdzM1sxXSAhPT0gdW5kZWZpbmVkID8gX2FyZ3MzWzFdIDogJ2FkbWluJzsKICAgICAgICAgIF9jb250ZXh0My5wcmV2ID0gMTsKICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNDsKICAgICAgICAgIHJldHVybiBzdG9yZS5kaXNwYXRjaCgnYXV0aC9sb2dpbicsIHsKICAgICAgICAgICAgcHJvdmlkZXI6ICdsb2NhbCcsCiAgICAgICAgICAgIGJvZHk6IHsKICAgICAgICAgICAgICB1c2VybmFtZTogJ2FkbWluJywKICAgICAgICAgICAgICBwYXNzd29yZDogcGFzc3dvcmQKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgY2FzZSA0OgogICAgICAgICAgcmVzID0gX2NvbnRleHQzLnNlbnQ7CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIiwgcmVzLl9zdGF0dXMgPT09IDIwMCk7CiAgICAgICAgY2FzZSA4OgogICAgICAgICAgX2NvbnRleHQzLnByZXYgPSA4OwogICAgICAgICAgX2NvbnRleHQzLnQwID0gX2NvbnRleHQzWyJjYXRjaCJdKDEpOwogICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdHJ5aW5nIGluaXRpYWwgc2V0dXAnLCBfY29udGV4dDMudDApOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnNvbGUKICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iLCBmYWxzZSk7CiAgICAgICAgY2FzZSAxMjoKICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgIH0KICAgIH0sIF9jYWxsZWUzLCBudWxsLCBbWzEsIDhdXSk7CiAgfSkpOwogIHJldHVybiBfdHJ5SW5pdGlhbFNldHVwLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0="},{"version":3,"names":["REDIRECTED","NAME","EXPLORER","SETUP","TIMED_OUT","UPGRADED","_FLAGGED","_UNFLAG","SETTING","MANAGEMENT","NORMAN","DEFAULT_WORKSPACE","_ALL_IF_AUTHED","applyProducts","findBy","ClusterNotFoundError","RedirectToError","get","setFavIcon","haveSetFavIcon","dynamicPluginLoader","AFTER_LOGIN_ROUTE","WORKSPACE","BACK_TO","FLEET_NAME","canViewResource","getPackageFromRoute","route","_arraySafe$find","meta","arraySafe","Array","isArray","find","m","pkg","getResourceFromRoute","to","_to$params","resource","params","findMeta","beforeEachSetup","key","i","length","undefined","getClusterFromRoute","_to$params2","cluster","getProductFromRoute","_to$params3","product","_to$name","match","name","setProduct","store","redirect","_store$getters$curren","_store$getters$curren2","matched","path","getters","dispatch","Error","productNotFound","oldProduct","oldStore","inStore","commit","neuStore","invalidResource","_x","_ref2","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_ref","app","$cookies","req","isDev","from","$plugin","next","upgraded","initialPass","firstLogin","res","plSetting","_res","_plSetting","ok","isLoggedIn","notLoggedIn","noAuth","v3User","fromHeader","me","_me","status","backTo","localCheckResource","redirected","_route$matched","clusterId","oldPkg","oldPkgPlugin","always","newPkgPlugin","newLocation","resolvedRoute","_redirected","_redirected2","isSingleProduct","_isSingleProduct$afte","value","wrap","_callee$","_context","prev","_noAuth","_notLoggedIn","concat","_isLoggedIn","id","startsWith","abrupt","set","sameSite","secure","query","router","applyQuery","_defineProperty","title","message","timeout","type","opt","load","url","redirectUnauthorized","FIRST_LOGIN","PL","t0","sent","t1","tryInitialSetup","mustChangePassword","findMe","t2","_status","error","locationError","window","localStorage","getItem","removeItem","location","href","beforeEach","afterEach","setTimeout","_popStateDetected","Object","values","getPlugins","p","onLeave","oldIsExt","fullPath","Promise","all","onEnter","check","resolve","newPkg","targetRoute","afterLoginRoute","_objectSpread","t3","stop","_x2","_findMe","_callee2","principals","_callee2$","_context2","PRINCIPAL","_x3","_tryInitialSetup","_callee3","password","_args3","_callee3$","_context3","provider","body","username","console"],"sources":["/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/middleware/authenticated.js"],"sourcesContent":["import { REDIRECTED } from '@shell/config/cookies';\nimport { NAME as EXPLORER } from '@shell/config/product/explorer';\nimport {\n  SETUP, TIMED_OUT, UPGRADED, _FLAGGED, _UNFLAG\n} from '@shell/config/query-params';\nimport { SETTING } from '@shell/config/settings';\nimport { MANAGEMENT, NORMAN, DEFAULT_WORKSPACE } from '@shell/config/types';\nimport { _ALL_IF_AUTHED } from '@shell/plugins/dashboard-store/actions';\nimport { applyProducts } from '@shell/store/type-map';\nimport { findBy } from '@shell/utils/array';\nimport { ClusterNotFoundError, RedirectToError } from '@shell/utils/error';\nimport { get } from '@shell/utils/object';\nimport { setFavIcon, haveSetFavIcon } from '@shell/utils/favicon';\nimport dynamicPluginLoader from '@shell/pkg/dynamic-plugin-loader';\nimport { AFTER_LOGIN_ROUTE, WORKSPACE } from '@shell/store/prefs';\nimport { BACK_TO } from '@shell/config/local-storage';\nimport { NAME as FLEET_NAME } from '@shell/config/product/fleet.js';\nimport { canViewResource } from '@shell/utils/auth';\n\nconst getPackageFromRoute = (route) => {\n  if (!route?.meta) {\n    return;\n  }\n  // Sometimes meta is an array... sometimes not\n  const arraySafe = Array.isArray(route.meta) ? route.meta : [route.meta];\n\n  return arraySafe.find((m) => !!m.pkg)?.pkg;\n};\n\nconst getResourceFromRoute = (to) => {\n  let resource = to.params?.resource;\n\n  if (!resource) {\n    resource = findMeta(to, 'resource');\n  }\n\n  return resource;\n};\n\nlet beforeEachSetup = false;\n\nfunction findMeta(route, key) {\n  if (route?.meta) {\n    const meta = Array.isArray(route.meta) ? route.meta : [route.meta];\n\n    for (let i = 0; i < meta.length; i++) {\n      if (meta[i][key]) {\n        return meta[i][key];\n      }\n    }\n  }\n\n  return undefined;\n}\n\nexport function getClusterFromRoute(to) {\n  let cluster = to.params?.cluster;\n\n  if (!cluster) {\n    cluster = findMeta(to, 'cluster');\n  }\n\n  return cluster;\n}\n\nexport function getProductFromRoute(to) {\n  let product = to.params?.product;\n\n  if ( !product ) {\n    const match = to.name?.match(/^c-cluster-([^-]+)/);\n\n    if ( match ) {\n      product = match[1];\n    }\n  }\n\n  // If still no product, see if the route indicates the product via route metadata\n  if (!product) {\n    product = findMeta(to, 'product');\n  }\n\n  return product;\n}\n\nfunction setProduct(store, to, redirect) {\n  let product = getProductFromRoute(to);\n\n  // since all products are hardcoded as routes (ex: c-local-explorer), if we match the wildcard route it means that the product does not exist\n  if ((product && (!to.matched.length || (to.matched.length && to.matched[0].path === '/c/:cluster/:product'))) ||\n  // if the product grabbed from the route is not registered, then we don't have it!\n  (product && !store.getters['type-map/isProductRegistered'](product))) {\n    store.dispatch('loadingError', new Error(store.getters['i18n/t']('nav.failWhale.productNotFound', { productNotFound: product }, true)));\n\n    return () => redirect(302, '/fail-whale');\n  }\n\n  if ( !product ) {\n    product = EXPLORER;\n  }\n\n  const oldProduct = store.getters['productId'];\n  const oldStore = store.getters['currentProduct']?.inStore;\n\n  if ( product !== oldProduct ) {\n    store.commit('setProduct', product);\n  }\n\n  const neuStore = store.getters['currentProduct']?.inStore;\n\n  if ( neuStore !== oldStore ) {\n    // If the product store changes, clear the catalog.\n    // There might be management catalog items in it vs cluster.\n    store.commit('catalog/reset');\n  }\n\n  return false;\n}\n\n/**\n * Check that the resource is valid, if not redirect to fail whale\n *\n * This requires that\n * - product is set\n * - product's store is set and setup (so we can check schema's within it)\n * - product's store has the schemaFor getter (extension stores might not have it)\n * - there's a resource associated with route (meta or param)\n */\nfunction invalidResource(store, to, redirect) {\n  const product = store.getters['currentProduct'];\n  const resource = getResourceFromRoute(to);\n\n  // In order to check a resource is valid we need these\n  if (!product || !resource) {\n    return false;\n  }\n\n  if (canViewResource(store, resource)) {\n    return false;\n  }\n\n  // Unknown resource, redirect to fail whale\n\n  store.dispatch('loadingError', new Error(store.getters['i18n/t']('nav.failWhale.resourceNotFound', { resource }, true)));\n\n  return () => redirect(302, '/fail-whale');\n}\n\nexport default async function({\n  route, app, store, redirect, $cookies, req, isDev, from, $plugin, next\n}) {\n  if ( route.path && typeof route.path === 'string') {\n    // Ignore webpack hot module reload requests\n    if ( route.path.startsWith('/__webpack_hmr/') ) {\n      return;\n    }\n\n    // Ignore the error page\n    if ( route.path.startsWith('/fail-whale') ) {\n      return;\n    }\n  }\n\n  // This tells Ember not to redirect back to us once you've already been to dashboard once.\n  if ( !$cookies.get(REDIRECTED) ) {\n    $cookies.set(REDIRECTED, 'true', {\n      path:     '/',\n      sameSite: true,\n      secure:   true,\n    });\n  }\n\n  const upgraded = route.query[UPGRADED] === _FLAGGED;\n\n  if ( upgraded ) {\n    app.router.applyQuery({ [UPGRADED]: _UNFLAG });\n\n    store.dispatch('growl/success', {\n      title:   store.getters['i18n/t']('serverUpgrade.title'),\n      message: store.getters['i18n/t']('serverUpgrade.message'),\n      timeout: 0,\n    });\n  }\n\n  // Initial ?setup=admin-password can technically be on any route\n  let initialPass = route.query[SETUP];\n  let firstLogin = null;\n\n  try {\n    // Load settings, which will either be just the public ones if not logged in, or all if you are\n    await store.dispatch('management/findAll', {\n      type: MANAGEMENT.SETTING,\n      opt:  {\n        load: _ALL_IF_AUTHED, url: `/v1/${ MANAGEMENT.SETTING }`, redirectUnauthorized: false\n      }\n    });\n\n    // Set the favicon - use custom one from store if set\n    if (!haveSetFavIcon()) {\n      setFavIcon(store);\n    }\n\n    const res = store.getters['management/byId'](MANAGEMENT.SETTING, SETTING.FIRST_LOGIN);\n    const plSetting = store.getters['management/byId'](MANAGEMENT.SETTING, SETTING.PL);\n\n    firstLogin = res?.value === 'true';\n\n    if (!initialPass && plSetting?.value === 'Harvester') {\n      initialPass = 'admin';\n    }\n  } catch (e) {\n  }\n\n  if ( firstLogin === null ) {\n    try {\n      const res = await store.dispatch('rancher/find', {\n        type: 'setting',\n        id:   SETTING.FIRST_LOGIN,\n        opt:  { url: `/v3/settings/${ SETTING.FIRST_LOGIN }` }\n      });\n\n      firstLogin = res?.value === 'true';\n\n      const plSetting = await store.dispatch('rancher/find', {\n        type: 'setting',\n        id:   SETTING.PL,\n        opt:  { url: `/v3/settings/${ SETTING.PL }` }\n      });\n\n      if (!initialPass && plSetting?.value === 'Harvester') {\n        initialPass = 'admin';\n      }\n    } catch (e) {\n    }\n  }\n\n  // TODO show error if firstLogin and default pass doesn't work\n  if ( firstLogin ) {\n    const ok = await tryInitialSetup(store, initialPass);\n\n    if (ok) {\n      if (initialPass) {\n        store.dispatch('auth/setInitialPass', initialPass);\n      }\n\n      return redirect({ name: 'auth-setup' });\n    } else {\n      return redirect({ name: 'auth-login' });\n    }\n  }\n\n  // Make sure you're actually logged in\n  function isLoggedIn(me) {\n    store.commit('auth/hasAuth', true);\n    store.commit('auth/loggedInAs', me.id);\n  }\n\n  function notLoggedIn() {\n    store.commit('auth/hasAuth', true);\n\n    if ( route.name === 'index' ) {\n      return redirect(302, '/auth/login');\n    } else {\n      return redirect(302, `/auth/login?${ TIMED_OUT }`);\n    }\n  }\n\n  function noAuth() {\n    store.commit('auth/hasAuth', false);\n  }\n\n  if ( store.getters['auth/enabled'] !== false && !store.getters['auth/loggedIn'] ) {\n    // `await` so we have one successfully request whilst possibly logged in (ensures fromHeader is populated from `x-api-cattle-auth`)\n    await store.dispatch('auth/getUser');\n\n    const v3User = store.getters['auth/v3User'] || {};\n\n    if (v3User?.mustChangePassword) {\n      return redirect({ name: 'auth-setup' });\n    }\n\n    // In newer versions the API calls return the auth state instead of having to make a new call all the time.\n    const fromHeader = store.getters['auth/fromHeader'];\n\n    if ( fromHeader === 'none' ) {\n      noAuth();\n    } else if ( fromHeader === 'true' ) {\n      const me = await findMe(store);\n\n      isLoggedIn(me);\n    } else if ( fromHeader === 'false' ) {\n      notLoggedIn();\n    } else {\n      // Older versions look at principals and see what happens\n      try {\n        const me = await findMe(store);\n\n        isLoggedIn(me);\n      } catch (e) {\n        const status = e?._status;\n\n        if ( status === 404 ) {\n          noAuth();\n        } else {\n          if ( status === 401 ) {\n            notLoggedIn();\n          } else {\n            store.commit('setError', { error: e, locationError: new Error('Auth Middleware') });\n          }\n\n          return;\n        }\n      }\n    }\n\n    store.dispatch('gcStartIntervals');\n  }\n\n  const backTo = window.localStorage.getItem(BACK_TO);\n\n  if (backTo) {\n    window.localStorage.removeItem(BACK_TO);\n\n    window.location.href = backTo;\n  }\n\n  // GC should be notified of route change before any find/get request is made that might be used for that page\n  store.dispatch('gcRouteChanged', route);\n\n  // Load stuff\n  let localCheckResource = false;\n\n  await applyProducts(store, $plugin);\n\n  // Setup a beforeEach hook once to keep track of the current product\n  if ( !beforeEachSetup ) {\n    beforeEachSetup = true;\n    // This only needs to happen when beforeEach hook hasn't run (the initial load)\n    localCheckResource = true;\n\n    store.app.router.beforeEach((to, from, next) => {\n      // NOTE - This beforeEach runs AFTER this middleware. So anything in this middleware that requires it must set it manually\n      let redirected = setProduct(store, to, redirect);\n\n      if (redirected) {\n        return redirected();\n      }\n\n      redirected = invalidResource(store, to, redirect);\n\n      if (redirected) {\n        return redirected();\n      }\n\n      next();\n    });\n\n    // Call it for the initial pageload\n    const redirected = setProduct(store, route, redirect);\n\n    if (redirected) {\n      return redirected();\n    }\n\n    store.app.router.afterEach((to, from) => {\n      // Clear state used to record if back button was used for navigation\n      setTimeout(() => {\n        window._popStateDetected = false;\n      }, 1);\n    });\n  }\n\n  try {\n    let clusterId = get(route, 'params.cluster');\n\n    // Route can provide cluster ID via metadata\n    if (!clusterId && route) {\n      clusterId = getClusterFromRoute(route);\n    }\n\n    const pkg = getPackageFromRoute(route);\n    const product = getProductFromRoute(route);\n\n    const oldPkg = getPackageFromRoute(from);\n    const oldProduct = getProductFromRoute(from);\n\n    // Leave an old pkg where we weren't before?\n    const oldPkgPlugin = oldPkg ? Object.values($plugin.getPlugins()).find((p) => p.name === oldPkg) : null;\n\n    if (oldPkg && oldPkg !== pkg ) {\n      // Execute anything optional the plugin wants to. For example resetting it's store to remove data\n      await oldPkgPlugin.onLeave(store, {\n        clusterId,\n        product,\n        oldProduct,\n        oldIsExt: !!oldPkg\n      });\n    }\n\n    // Sometimes this needs to happen before or alongside other things... but is always needed\n    const always = [\n      store.dispatch('loadManagement')\n    ];\n\n    // Entering a new package where we weren't before?\n    const newPkgPlugin = pkg ? Object.values($plugin.getPlugins()).find((p) => p.name === pkg) : null;\n\n    // Note - We can't block on oldPkg !== newPkg because on a fresh load the `from` route equals the `to` route\n    if (pkg && (oldPkg !== pkg || from.fullPath === route.fullPath)) {\n      // Execute mandatory store actions\n      await Promise.all(always);\n\n      // Execute anything optional the plugin wants to\n      await newPkgPlugin.onEnter(store, {\n        clusterId,\n        product,\n        oldProduct,\n        oldIsExt: !!oldPkg\n      });\n    }\n\n    if (!route.matched?.length) {\n      // If there are no matching routes we could be trying to nav to a page belonging to a dynamic plugin which needs loading\n      await Promise.all([\n        ...always,\n      ]);\n\n      // If a plugin claims the route and is loaded correctly we'll get a route back\n      const newLocation = await dynamicPluginLoader.check({ route, store });\n\n      // If we have a new location, double check that it's actually valid\n      const resolvedRoute = newLocation ? store.app.router.resolve(newLocation) : null;\n\n      if (resolvedRoute?.route.matched.length) {\n        // Note - don't use `redirect` or `store.app.route` (breaks feature by failing to run middleware in default layout)\n        return next(newLocation);\n      }\n    }\n\n    // Ensure that the activeNamespaceCache is updated given the change of context either from or to a place where it uses workspaces\n    // When fleet moves to it's own package this should be moved to pkg onEnter/onLeave\n    if ((oldProduct === FLEET_NAME || product === FLEET_NAME) && oldProduct !== product) {\n      // See note above for store.app.router.beforeEach, need to setProduct manually, for the moment do this in a targeted way\n      const redirected = setProduct(store, route, redirect);\n\n      if (redirected) {\n        return redirected();\n      }\n\n      store.commit('updateWorkspace', {\n        value:   store.getters['prefs/get'](WORKSPACE) || DEFAULT_WORKSPACE,\n        getters: store.getters\n      });\n    }\n\n    // Always run loadCluster, it handles 'unload' as well\n    // Run them in parallel\n    await Promise.all([\n      ...always,\n      store.dispatch('loadCluster', {\n        id:          clusterId,\n        oldPkg:      oldPkgPlugin,\n        newPkg:      newPkgPlugin,\n        product,\n        oldProduct,\n        targetRoute: route\n      })\n    ]);\n\n    if (localCheckResource) {\n      const redirected = invalidResource(store, route, redirect);\n\n      if (redirected) {\n        return redirected();\n      }\n    }\n\n    if (!clusterId) {\n      clusterId = store.getters['defaultClusterId']; // This needs the cluster list, so no parallel\n      const isSingleProduct = store.getters['isSingleProduct'];\n\n      if (isSingleProduct?.afterLoginRoute) {\n        const value = {\n          name:   'c-cluster-product',\n          ...isSingleProduct.afterLoginRoute,\n          params: {\n            cluster: clusterId,\n            ...isSingleProduct.afterLoginRoute?.params\n          },\n        };\n\n        await store.dispatch('prefs/set', {\n          key: AFTER_LOGIN_ROUTE,\n          value,\n        });\n      }\n    }\n  } catch (e) {\n    if ( e.name === ClusterNotFoundError.name ) {\n      return redirect(302, '/home');\n    } if ( e.name === RedirectToError.name ) {\n      return redirect(302, e.url);\n    } else {\n      // Sets error 500 if lost connection to API\n      store.commit('setError', { error: e, locationError: new Error(store.getters['i18n/t']('nav.failWhale.authMiddleware')) });\n\n      return redirect(302, '/fail-whale');\n    }\n  }\n}\n\nasync function findMe(store) {\n  // First thing we do in loadManagement is fetch principals anyway.... so don't ?me=true here\n  const principals = await store.dispatch('rancher/findAll', {\n    type: NORMAN.PRINCIPAL,\n    opt:  {\n      url:                  '/v3/principals',\n      redirectUnauthorized: false,\n    }\n  });\n\n  const me = findBy(principals, 'me', true);\n\n  return me;\n}\n\nasync function tryInitialSetup(store, password = 'admin') {\n  try {\n    const res = await store.dispatch('auth/login', {\n      provider: 'local',\n      body:     {\n        username: 'admin',\n        password\n      },\n    });\n\n    return res._status === 200;\n  } catch (e) {\n    console.error('Error trying initial setup', e); // eslint-disable-line no-console\n\n    return false;\n  }\n}\n"],"mappings":"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","ignoreList":[]}]}