{"remainingRequest":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js??ref--16-1!/home/ubuntu/suseconf/node_modules/@rancher/shell/models/provisioning.cattle.io.cluster.js","dependencies":[{"path":"/home/ubuntu/suseconf/node_modules/@rancher/shell/models/provisioning.cattle.io.cluster.js","mtime":1725338146566},{"path":"/home/ubuntu/suseconf/babel.config.js","mtime":1725343995893},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js","mtime":1725271298942}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3JzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVmbGVjdC5jb25zdHJ1Y3QuanMiOwppbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5IjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcyI7CmltcG9ydCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIjsKaW1wb3J0IF9nZXRQcm90b3R5cGVPZiBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9nZXRQcm90b3R5cGVPZiI7CmltcG9ydCBfZ2V0IGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2dldCI7CmltcG9ydCBfaW5oZXJpdHMgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vaW5oZXJpdHMiOwpmdW5jdGlvbiBvd25LZXlzKGUsIHIpIHsgdmFyIHQgPSBPYmplY3Qua2V5cyhlKTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIG8gPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGUpOyByICYmIChvID0gby5maWx0ZXIoZnVuY3Rpb24gKHIpIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSwgcikuZW51bWVyYWJsZTsgfSkpLCB0LnB1c2guYXBwbHkodCwgbyk7IH0gcmV0dXJuIHQ7IH0KZnVuY3Rpb24gX29iamVjdFNwcmVhZChlKSB7IGZvciAodmFyIHIgPSAxOyByIDwgYXJndW1lbnRzLmxlbmd0aDsgcisrKSB7IHZhciB0ID0gbnVsbCAhPSBhcmd1bWVudHNbcl0gPyBhcmd1bWVudHNbcl0gOiB7fTsgciAlIDIgPyBvd25LZXlzKE9iamVjdCh0KSwgITApLmZvckVhY2goZnVuY3Rpb24gKHIpIHsgX2RlZmluZVByb3BlcnR5KGUsIHIsIHRbcl0pOyB9KSA6IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzID8gT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnModCkpIDogb3duS2V5cyhPYmplY3QodCkpLmZvckVhY2goZnVuY3Rpb24gKHIpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIHIsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCwgcikpOyB9KTsgfSByZXR1cm4gZTsgfQppbXBvcnQgX3JlZ2VuZXJhdG9yUnVudGltZSBmcm9tICIvaG9tZS91YnVudHUvc3VzZWNvbmYvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL3JlZ2VuZXJhdG9yL2luZGV4LmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maW5kLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC1pbmRleC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5qb2luLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc29ydC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5wcm9taXNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuZW5kcy13aXRoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3RhcnRzLXdpdGguanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lc25leHQucHJvbWlzZS5hbGwtc2V0dGxlZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yLmpzIjsKZnVuY3Rpb24gX2NhbGxTdXBlcih0LCBvLCBlKSB7IHJldHVybiBvID0gX2dldFByb3RvdHlwZU9mKG8pLCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0LCBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCkgPyBSZWZsZWN0LmNvbnN0cnVjdChvLCBlIHx8IFtdLCBfZ2V0UHJvdG90eXBlT2YodCkuY29uc3RydWN0b3IpIDogby5hcHBseSh0LCBlKSk7IH0KZnVuY3Rpb24gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpIHsgdHJ5IHsgdmFyIHQgPSAhQm9vbGVhbi5wcm90b3R5cGUudmFsdWVPZi5jYWxsKFJlZmxlY3QuY29uc3RydWN0KEJvb2xlYW4sIFtdLCBmdW5jdGlvbiAoKSB7fSkpOyB9IGNhdGNoICh0KSB7fSByZXR1cm4gKF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QgPSBmdW5jdGlvbiBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCkgeyByZXR1cm4gISF0OyB9KSgpOyB9CmZ1bmN0aW9uIF9zdXBlclByb3BHZXQodCwgZSwgbywgcikgeyB2YXIgcCA9IF9nZXQoX2dldFByb3RvdHlwZU9mKDEgJiByID8gdC5wcm90b3R5cGUgOiB0KSwgZSwgbyk7IHJldHVybiAyICYgciAmJiAiZnVuY3Rpb24iID09IHR5cGVvZiBwID8gZnVuY3Rpb24gKHQpIHsgcmV0dXJuIHAuYXBwbHkobywgdCk7IH0gOiBwOyB9CmltcG9ydCB7IENBUEksIE1BTkFHRU1FTlQsIE5BTUVTUEFDRSwgTk9STUFOLCBTTkFQU0hPVCwgSENJLCBMT0NBTF9DTFVTVEVSIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy90eXBlcyc7CmltcG9ydCBTdGV2ZU1vZGVsIGZyb20gJ0BzaGVsbC9wbHVnaW5zL3N0ZXZlL3N0ZXZlLWNsYXNzJzsKaW1wb3J0IHsgZmluZEJ5IH0gZnJvbSAnQHNoZWxsL3V0aWxzL2FycmF5JzsKaW1wb3J0IHsgZ2V0LCBzZXQgfSBmcm9tICdAc2hlbGwvdXRpbHMvb2JqZWN0JzsKaW1wb3J0IHsgc29ydEJ5IH0gZnJvbSAnQHNoZWxsL3V0aWxzL3NvcnQnOwppbXBvcnQgeyB1Y0ZpcnN0IH0gZnJvbSAnQHNoZWxsL3V0aWxzL3N0cmluZyc7CmltcG9ydCB7IGNvbXBhcmUgfSBmcm9tICdAc2hlbGwvdXRpbHMvdmVyc2lvbic7CmltcG9ydCB7IEFTLCBNT0RFLCBfVklFVywgX1lBTUwgfSBmcm9tICdAc2hlbGwvY29uZmlnL3F1ZXJ5LXBhcmFtcyc7CmltcG9ydCB7IEhBUlZFU1RFUl9OQU1FIGFzIEhBUlZFU1RFUiB9IGZyb20gJ0BzaGVsbC9jb25maWcvZmVhdHVyZXMnOwppbXBvcnQgeyBDQVBJIGFzIENBUElfQU5OT1RBVElPTlMsIE5PREVfQVJDSElURUNUVVJFIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy9sYWJlbHMtYW5ub3RhdGlvbnMnOwppbXBvcnQgY2FwaXRhbGl6ZSBmcm9tICdsb2Rhc2gvY2FwaXRhbGl6ZSc7CgovKioKICogQ2xhc3MgcmVwcmVzZW50aW5nIENsdXN0ZXIgcmVzb3VyY2UuCiAqIEBleHRlbmRzIFN0ZXZlTW9kZWwKICovCnZhciBQcm92Q2x1c3RlciA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX1N0ZXZlTW9kZWwpIHsKICBmdW5jdGlvbiBQcm92Q2x1c3RlcigpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBQcm92Q2x1c3Rlcik7CiAgICByZXR1cm4gX2NhbGxTdXBlcih0aGlzLCBQcm92Q2x1c3RlciwgYXJndW1lbnRzKTsKICB9CiAgX2luaGVyaXRzKFByb3ZDbHVzdGVyLCBfU3RldmVNb2RlbCk7CiAgcmV0dXJuIF9jcmVhdGVDbGFzcyhQcm92Q2x1c3RlciwgW3sKICAgIGtleTogImRldGFpbHMiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHZhciBvdXQgPSBbewogICAgICAgIGxhYmVsOiB0aGlzLnQoJ2NsdXN0ZXIuZGV0YWlsLnByb3Zpc2lvbmVyJyksCiAgICAgICAgY29udGVudDogdGhpcy5wcm92aXNpb25lckRpc3BsYXkgfHwgdGhpcy50KCdnZW5lcmljLm5vbmUnKQogICAgICB9LCB7CiAgICAgICAgbGFiZWw6IHRoaXMudCgnY2x1c3Rlci5kZXRhaWwubWFjaGluZVByb3ZpZGVyJyksCiAgICAgICAgY29udGVudDogdGhpcy5tYWNoaW5lUHJvdmlkZXIgPyB0aGlzLm1hY2hpbmVQcm92aWRlckRpc3BsYXkgOiBudWxsCiAgICAgIH0sIHsKICAgICAgICBsYWJlbDogdGhpcy50KCdjbHVzdGVyLmRldGFpbC5rdWJlcm5ldGVzVmVyc2lvbicpLAogICAgICAgIGNvbnRlbnQ6IHRoaXMua3ViZXJuZXRlc1ZlcnNpb24KICAgICAgfSwgewogICAgICAgIGxhYmVsOiB0aGlzLnQoJ2NsdXN0ZXIuZGV0YWlsLm1hY2hpbmVQb29scycpLAogICAgICAgIGNvbnRlbnQ6IHRoaXMucG9vbHMubGVuZ3RoCiAgICAgIH0sIHsKICAgICAgICBsYWJlbDogdGhpcy50KCdjbHVzdGVyLmRldGFpbC5tYWNoaW5lcycpLAogICAgICAgIGNvbnRlbnQ6IHRoaXMuZGVzaXJlZAogICAgICB9XS5maWx0ZXIoZnVuY3Rpb24gKHgpIHsKICAgICAgICByZXR1cm4gISF4LmNvbnRlbnQ7CiAgICAgIH0pOwoKICAgICAgLy8gUktFIFRlbXBsYXRlIGRldGFpbHMKICAgICAgdmFyIHJrZVRlbXBsYXRlID0gdGhpcy5ya2VUZW1wbGF0ZTsKICAgICAgaWYgKHJrZVRlbXBsYXRlKSB7CiAgICAgICAgb3V0LnB1c2goewogICAgICAgICAgbGFiZWw6IHRoaXMudCgnY2x1c3Rlci5kZXRhaWwucmtlVGVtcGxhdGUnKSwKICAgICAgICAgIGZvcm1hdHRlcjogJ1JLRVRlbXBsYXRlTmFtZScsCiAgICAgICAgICBjb250ZW50OiBya2VUZW1wbGF0ZQogICAgICAgIH0pOwogICAgICB9CiAgICAgIGlmICghdGhpcy5tYWNoaW5lUHJvdmlkZXIpIHsKICAgICAgICBvdXQuc3BsaWNlKDEsIDEpOwogICAgICAgIHJldHVybiBvdXQ7CiAgICAgIH0KICAgICAgcmV0dXJuIG91dDsKICAgIH0KCiAgICAvLyB1c2luZyB0aGlzIGNvbXB1dGVkIGJlY2F1c2Ugb24gdGhlIHByb3Zpc2lvbmluZyBjbHVzdGVyIHdlIGFyZQogICAgLy8gZGlzcGxheWluZyB0aGUgb2xkZXN0IGFnZSBiZXR3ZWVuIHByb3Zpc2lvbmluZy5jbHVzdGVyIGFuZCBtYW5hZ2VtZW50LmNsdXN0ZXIKICAgIC8vIHNvIHRoYXQgb24gYSB2ZXJzaW9uIHVwZ3JhZGUgb2YgUmFuY2hlciAoZXg6IDIuNS54IHRvIDIuNi54KQogICAgLy8gd2UgY2FuIGhhdmUgdGhlIGNvcnJlY3QgYWdlIG9mIHRoZSBjbHVzdGVyIGRpc3BsYXllZCBvbiB0aGUgVUkgc2lkZQogIH0sIHsKICAgIGtleTogImNyZWF0aW9uVGltZXN0YW1wIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgX3RoaXMkbWV0YWRhdGEsIF90aGlzJG1nbXQ7CiAgICAgIHZhciBwcm92Q3JlYXRpb25UaW1lc3RhbXAgPSBEYXRlLnBhcnNlKChfdGhpcyRtZXRhZGF0YSA9IHRoaXMubWV0YWRhdGEpID09PSBudWxsIHx8IF90aGlzJG1ldGFkYXRhID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRtZXRhZGF0YS5jcmVhdGlvblRpbWVzdGFtcCk7CiAgICAgIHZhciBtZ210Q3JlYXRpb25UaW1lc3RhbXAgPSBEYXRlLnBhcnNlKChfdGhpcyRtZ210ID0gdGhpcy5tZ210KSA9PT0gbnVsbCB8fCBfdGhpcyRtZ210ID09PSB2b2lkIDAgfHwgKF90aGlzJG1nbXQgPSBfdGhpcyRtZ210Lm1ldGFkYXRhKSA9PT0gbnVsbCB8fCBfdGhpcyRtZ210ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRtZ210LmNyZWF0aW9uVGltZXN0YW1wKTsKICAgICAgaWYgKG1nbXRDcmVhdGlvblRpbWVzdGFtcCAmJiBtZ210Q3JlYXRpb25UaW1lc3RhbXAgPCBwcm92Q3JlYXRpb25UaW1lc3RhbXApIHsKICAgICAgICB2YXIgX3RoaXMkbWdtdDI7CiAgICAgICAgcmV0dXJuIChfdGhpcyRtZ210MiA9IHRoaXMubWdtdCkgPT09IG51bGwgfHwgX3RoaXMkbWdtdDIgPT09IHZvaWQgMCB8fCAoX3RoaXMkbWdtdDIgPSBfdGhpcyRtZ210Mi5tZXRhZGF0YSkgPT09IG51bGwgfHwgX3RoaXMkbWdtdDIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJG1nbXQyLmNyZWF0aW9uVGltZXN0YW1wOwogICAgICB9CiAgICAgIHJldHVybiBfc3VwZXJQcm9wR2V0KFByb3ZDbHVzdGVyLCAiY3JlYXRpb25UaW1lc3RhbXAiLCB0aGlzLCAxKTsKICAgIH0KCiAgICAvLyBNb2RlbHMgY2FuIHNwZWNpZnkgYSBzaW5nbGUgYWN0aW9uIHRoYXQgd2lsbCBiZSBzaG93biBhcyBhIGJ1dHRvbiBpbiB0aGUgZGV0YWlscyBtYXN0aGVhZAogIH0sIHsKICAgIGtleTogImRldGFpbHNBY3Rpb24iLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHZhciBfdGhpcyRtZ210MzsKICAgICAgdmFyIGNhbkV4cGxvcmUgPSAoKF90aGlzJG1nbXQzID0gdGhpcy5tZ210KSA9PT0gbnVsbCB8fCBfdGhpcyRtZ210MyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkbWdtdDMuaXNSZWFkeSkgJiYgIXRoaXMuaGFzRXJyb3I7CiAgICAgIHJldHVybiB7CiAgICAgICAgYWN0aW9uOiAnZXhwbG9yZScsCiAgICAgICAgbGFiZWw6IHRoaXMuJHJvb3RHZXR0ZXJzWydpMThuL3QnXSgnY2x1c3Rlci5leHBsb3JlJyksCiAgICAgICAgZW5hYmxlZDogY2FuRXhwbG9yZQogICAgICB9OwogICAgfQogIH0sIHsKICAgIGtleTogIl9hdmFpbGFibGVBY3Rpb25zIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgX3RoaXMkbWdtdDQsIF90aGlzJG1nbXQ1LCBfdGhpcyRtZ210NiwgX2NsdXN0ZXJUZW1wbGF0ZXNTY2hlLCBfY2x1c3RlclRlbXBsYXRlc1NjaGUyLCBfdGhpcyRub3JtYW5DbHVzdGVyLCBfdGhpcyRtZ210NywgX3RoaXMkbWdtdDgsIF90aGlzJG1nbXQ5LCBfdGhpcyRtZ210MTAsIF90aGlzJG1nbXQxMSwgX3RoaXMkbWdtdDEyLCBfdGhpcyRtZ210MTM7CiAgICAgIHZhciBvdXQgPSBfc3VwZXJQcm9wR2V0KFByb3ZDbHVzdGVyLCAiX2F2YWlsYWJsZUFjdGlvbnMiLCB0aGlzLCAxKTsKICAgICAgdmFyIGlzTG9jYWwgPSAoX3RoaXMkbWdtdDQgPSB0aGlzLm1nbXQpID09PSBudWxsIHx8IF90aGlzJG1nbXQ0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRtZ210NC5pc0xvY2FsOwoKICAgICAgLy8gRG9uJ3QgbGV0IHRoZSB1c2VyIGRlbGV0ZSB0aGUgbG9jYWwgY2x1c3RlciBmcm9tIHRoZSBVSQogICAgICBpZiAoaXNMb2NhbCkgewogICAgICAgIHZhciByZW1vdmUgPSBvdXQuZmluZEluZGV4KGZ1bmN0aW9uIChhKSB7CiAgICAgICAgICByZXR1cm4gYS5hY3Rpb24gPT09ICdwcm9tcHRSZW1vdmUnOwogICAgICAgIH0pOwogICAgICAgIGlmIChyZW1vdmUgPiAtMSkgewogICAgICAgICAgb3V0LnNwbGljZShyZW1vdmUsIDEpOwogICAgICAgIH0KICAgICAgfQogICAgICB2YXIgcmVhZHkgPSAoX3RoaXMkbWdtdDUgPSB0aGlzLm1nbXQpID09PSBudWxsIHx8IF90aGlzJG1nbXQ1ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRtZ210NS5pc1JlYWR5OwogICAgICB2YXIgY2FuRWRpdFJLRTJjbHVzdGVyID0gdGhpcy5pc1JrZTIgJiYgcmVhZHkgJiYgdGhpcy5jYW5VcGRhdGU7CiAgICAgIHZhciBjYW5TbmFwc2hvdCA9IHJlYWR5ICYmICh0aGlzLmlzUmtlMiAmJiB0aGlzLmNhblVwZGF0ZSB8fCB0aGlzLmlzUmtlMSAmJiAoKF90aGlzJG1nbXQ2ID0gdGhpcy5tZ210KSA9PT0gbnVsbCB8fCBfdGhpcyRtZ210NiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkbWdtdDYuaGFzQWN0aW9uKCdiYWNrdXBFdGNkJykpKTsKICAgICAgdmFyIGNsdXN0ZXJUZW1wbGF0ZXNTY2hlbWEgPSB0aGlzLiRnZXR0ZXJzWydzY2hlbWFGb3InXSgnbWFuYWdlbWVudC5jYXR0bGUuaW8uY2x1c3RlcnRlbXBsYXRlJyk7CiAgICAgIHZhciBjYW5VcGRhdGVDbHVzdGVyVGVtcGxhdGUgPSBmYWxzZTsKICAgICAgaWYgKGNsdXN0ZXJUZW1wbGF0ZXNTY2hlbWEgJiYgKChfY2x1c3RlclRlbXBsYXRlc1NjaGUgPSBjbHVzdGVyVGVtcGxhdGVzU2NoZW1hLnJlc291cmNlTWV0aG9kcykgIT09IG51bGwgJiYgX2NsdXN0ZXJUZW1wbGF0ZXNTY2hlICE9PSB2b2lkIDAgJiYgX2NsdXN0ZXJUZW1wbGF0ZXNTY2hlLmluY2x1ZGVzKCdibG9ja2VkLVBVVCcpIHx8IChfY2x1c3RlclRlbXBsYXRlc1NjaGUyID0gY2x1c3RlclRlbXBsYXRlc1NjaGVtYS5yZXNvdXJjZU1ldGhvZHMpICE9PSBudWxsICYmIF9jbHVzdGVyVGVtcGxhdGVzU2NoZTIgIT09IHZvaWQgMCAmJiBfY2x1c3RlclRlbXBsYXRlc1NjaGUyLmluY2x1ZGVzKCdQVVQnKSkpIHsKICAgICAgICBjYW5VcGRhdGVDbHVzdGVyVGVtcGxhdGUgPSB0cnVlOwogICAgICB9CiAgICAgIHZhciBub3JtYW5DbHVzdGVyU2F2ZVRlbXBsYXRlQWN0aW9uID0gISEoKF90aGlzJG5vcm1hbkNsdXN0ZXIgPSB0aGlzLm5vcm1hbkNsdXN0ZXIpICE9PSBudWxsICYmIF90aGlzJG5vcm1hbkNsdXN0ZXIgIT09IHZvaWQgMCAmJiAoX3RoaXMkbm9ybWFuQ2x1c3RlciA9IF90aGlzJG5vcm1hbkNsdXN0ZXIuYWN0aW9ucykgIT09IG51bGwgJiYgX3RoaXMkbm9ybWFuQ2x1c3RlciAhPT0gdm9pZCAwICYmIF90aGlzJG5vcm1hbkNsdXN0ZXIuc2F2ZUFzVGVtcGxhdGUpOwogICAgICB2YXIgY2FuU2F2ZVJLRVRlbXBsYXRlID0gdGhpcy5pc1JrZTEgJiYgKChfdGhpcyRtZ210NyA9IHRoaXMubWdtdCkgPT09IG51bGwgfHwgX3RoaXMkbWdtdDcgPT09IHZvaWQgMCB8fCAoX3RoaXMkbWdtdDcgPSBfdGhpcyRtZ210Ny5zdGF0dXMpID09PSBudWxsIHx8IF90aGlzJG1nbXQ3ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRtZ210Ny5kcml2ZXIpID09PSAncmFuY2hlckt1YmVybmV0ZXNFbmdpbmUnICYmICEoKF90aGlzJG1nbXQ4ID0gdGhpcy5tZ210KSAhPT0gbnVsbCAmJiBfdGhpcyRtZ210OCAhPT0gdm9pZCAwICYmIChfdGhpcyRtZ210OCA9IF90aGlzJG1nbXQ4LnNwZWMpICE9PSBudWxsICYmIF90aGlzJG1nbXQ4ICE9PSB2b2lkIDAgJiYgX3RoaXMkbWdtdDguY2x1c3RlclRlbXBsYXRlTmFtZSkgJiYgdGhpcy5oYXNMaW5rKCd1cGRhdGUnKSAmJiBjYW5VcGRhdGVDbHVzdGVyVGVtcGxhdGUgJiYgbm9ybWFuQ2x1c3RlclNhdmVUZW1wbGF0ZUFjdGlvbjsKICAgICAgdmFyIGFjdGlvbnMgPSBbCiAgICAgIC8vIE5vdGU6IEFjdGlvbnMgYXJlIG5vdCBzdXBwb3J0ZWQgaW4gdGhlIFN0ZXZlIEFQSSwgc28gd2UgY2hlY2sKICAgICAgLy8gYXZhaWxhYmxlIGFjdGlvbnMgZm9yIFJLRTEgY2x1c3RlcnMsIGJ1dCBub3QgUktFMiBjbHVzdGVycy4KICAgICAgewogICAgICAgIGFjdGlvbjogJ29wZW5TaGVsbCcsCiAgICAgICAgbGFiZWw6IHRoaXMuJHJvb3RHZXR0ZXJzWydpMThuL3QnXSgnbmF2LnNoZWxsJyksCiAgICAgICAgaWNvbjogJ2ljb24gaWNvbi10ZXJtaW5hbCcsCiAgICAgICAgZW5hYmxlZDogISEoKF90aGlzJG1nbXQ5ID0gdGhpcy5tZ210KSAhPT0gbnVsbCAmJiBfdGhpcyRtZ210OSAhPT0gdm9pZCAwICYmIF90aGlzJG1nbXQ5LmxpbmtzLnNoZWxsKSAmJiByZWFkeQogICAgICB9LCB7CiAgICAgICAgYWN0aW9uOiAnZG93bmxvYWRLdWJlQ29uZmlnJywKICAgICAgICBidWxrQWN0aW9uOiAnZG93bmxvYWRLdWJlQ29uZmlnQnVsaycsCiAgICAgICAgbGFiZWw6IHRoaXMuJHJvb3RHZXR0ZXJzWydpMThuL3QnXSgnbmF2Lmt1YmVjb25maWcuZG93bmxvYWQnKSwKICAgICAgICBpY29uOiAnaWNvbiBpY29uLWRvd25sb2FkJywKICAgICAgICBidWxrYWJsZTogdHJ1ZSwKICAgICAgICBlbmFibGVkOiAoX3RoaXMkbWdtdDEwID0gdGhpcy5tZ210KSA9PT0gbnVsbCB8fCBfdGhpcyRtZ210MTAgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJG1nbXQxMC5oYXNBY3Rpb24oJ2dlbmVyYXRlS3ViZWNvbmZpZycpCiAgICAgIH0sIHsKICAgICAgICBhY3Rpb246ICdjb3B5S3ViZUNvbmZpZycsCiAgICAgICAgbGFiZWw6IHRoaXMudCgnY2x1c3Rlci5jb3B5Q29uZmlnJyksCiAgICAgICAgYnVsa2FibGU6IGZhbHNlLAogICAgICAgIGVuYWJsZWQ6IChfdGhpcyRtZ210MTEgPSB0aGlzLm1nbXQpID09PSBudWxsIHx8IF90aGlzJG1nbXQxMSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkbWdtdDExLmhhc0FjdGlvbignZ2VuZXJhdGVLdWJlY29uZmlnJyksCiAgICAgICAgaWNvbjogJ2ljb24gaWNvbi1jb3B5JwogICAgICB9LCB7CiAgICAgICAgYWN0aW9uOiAnc25hcHNob3RBY3Rpb24nLAogICAgICAgIGxhYmVsOiB0aGlzLiRyb290R2V0dGVyc1snaTE4bi90J10oJ25hdi50YWtlU25hcHNob3QnKSwKICAgICAgICBpY29uOiAnaWNvbiBpY29uLXNuYXBzaG90JywKICAgICAgICBidWxrQWN0aW9uOiAnc25hcHNob3RCdWxrJywKICAgICAgICBidWxrYWJsZTogdHJ1ZSwKICAgICAgICBlbmFibGVkOiBjYW5TbmFwc2hvdAogICAgICB9LCB7CiAgICAgICAgYWN0aW9uOiAncmVzdG9yZVNuYXBzaG90QWN0aW9uJywKICAgICAgICBsYWJlbDogdGhpcy4kcm9vdEdldHRlcnNbJ2kxOG4vdCddKCduYXYucmVzdG9yZVNuYXBzaG90JyksCiAgICAgICAgaWNvbjogJ2ljb24gaWNvbi1mdyBpY29uLWJhY2t1cC1yZXN0b3JlJywKICAgICAgICBlbmFibGVkOiBjYW5TbmFwc2hvdAogICAgICB9LCB7CiAgICAgICAgYWN0aW9uOiAncm90YXRlQ2VydGlmaWNhdGVzJywKICAgICAgICBsYWJlbDogdGhpcy4kcm9vdEdldHRlcnNbJ2kxOG4vdCddKCduYXYucm90YXRlQ2VydGlmaWNhdGVzJyksCiAgICAgICAgaWNvbjogJ2ljb24gaWNvbi1iYWNrdXAnLAogICAgICAgIGVuYWJsZWQ6IGNhbkVkaXRSS0UyY2x1c3RlciB8fCAoKF90aGlzJG1nbXQxMiA9IHRoaXMubWdtdCkgPT09IG51bGwgfHwgX3RoaXMkbWdtdDEyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRtZ210MTIuaGFzQWN0aW9uKCdyb3RhdGVDZXJ0aWZpY2F0ZXMnKSkgJiYgcmVhZHkKICAgICAgfSwgewogICAgICAgIGFjdGlvbjogJ3JvdGF0ZUVuY3J5cHRpb25LZXknLAogICAgICAgIGxhYmVsOiB0aGlzLiRyb290R2V0dGVyc1snaTE4bi90J10oJ25hdi5yb3RhdGVFbmNyeXB0aW9uS2V5cycpLAogICAgICAgIGljb246ICdpY29uIGljb24tcmVmcmVzaCcsCiAgICAgICAgZW5hYmxlZDogY2FuRWRpdFJLRTJjbHVzdGVyIHx8IHRoaXMuaXNSa2UxICYmICgoX3RoaXMkbWdtdDEzID0gdGhpcy5tZ210KSA9PT0gbnVsbCB8fCBfdGhpcyRtZ210MTMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJG1nbXQxMy5oYXNBY3Rpb24oJ3JvdGF0ZUVuY3J5cHRpb25LZXknKSkgJiYgcmVhZHkKICAgICAgfSwgewogICAgICAgIGFjdGlvbjogJ3NhdmVBc1JLRVRlbXBsYXRlJywKICAgICAgICBsYWJlbDogdGhpcy4kcm9vdEdldHRlcnNbJ2kxOG4vdCddKCduYXYuc2F2ZUFzUktFVGVtcGxhdGUnKSwKICAgICAgICBpY29uOiAnaWNvbiBpY29uLWZvbGRlcicsCiAgICAgICAgZW5hYmxlZDogY2FuU2F2ZVJLRVRlbXBsYXRlCiAgICAgIH0sIHsKICAgICAgICBkaXZpZGVyOiB0cnVlCiAgICAgIH1dOwogICAgICByZXR1cm4gYWN0aW9ucy5jb25jYXQob3V0KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJub3JtYW5DbHVzdGVyIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgX3RoaXMkc3RhdHVzOwogICAgICB2YXIgbmFtZSA9IChfdGhpcyRzdGF0dXMgPSB0aGlzLnN0YXR1cykgPT09IG51bGwgfHwgX3RoaXMkc3RhdHVzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRzdGF0dXMuY2x1c3Rlck5hbWU7CiAgICAgIGlmICghbmFtZSkgewogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CiAgICAgIHZhciBvdXQgPSB0aGlzLiRyb290R2V0dGVyc1sncmFuY2hlci9ieUlkJ10oTk9STUFOLkNMVVNURVIsIG5hbWUpOwogICAgICByZXR1cm4gb3V0OwogICAgfQogIH0sIHsKICAgIGtleTogImZpbmROb3JtYW5DbHVzdGVyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfZmluZE5vcm1hbkNsdXN0ZXIgPSBfYXN5bmNUb0dlbmVyYXRvcigvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIF90aGlzJHN0YXR1czI7CiAgICAgICAgdmFyIG5hbWU7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIG5hbWUgPSAoX3RoaXMkc3RhdHVzMiA9IHRoaXMuc3RhdHVzKSA9PT0gbnVsbCB8fCBfdGhpcyRzdGF0dXMyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRzdGF0dXMyLmNsdXN0ZXJOYW1lOwogICAgICAgICAgICAgIGlmIChuYW1lKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBudWxsKTsKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA1OwogICAgICAgICAgICAgIHJldHVybiB0aGlzLiRkaXNwYXRjaCgncmFuY2hlci9maW5kJywgewogICAgICAgICAgICAgICAgdHlwZTogTk9STUFOLkNMVVNURVIsCiAgICAgICAgICAgICAgICBpZDogbmFtZQogICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0LnNlbnQpOwogICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlLCB0aGlzKTsKICAgICAgfSkpOwogICAgICBmdW5jdGlvbiBmaW5kTm9ybWFuQ2x1c3RlcigpIHsKICAgICAgICByZXR1cm4gX2ZpbmROb3JtYW5DbHVzdGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KICAgICAgcmV0dXJuIGZpbmROb3JtYW5DbHVzdGVyOwogICAgfSgpCiAgfSwgewogICAga2V5OiAiZXhwbG9yZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZXhwbG9yZSgpIHsKICAgICAgdmFyIGxvY2F0aW9uID0gewogICAgICAgIG5hbWU6ICdjLWNsdXN0ZXInLAogICAgICAgIHBhcmFtczogewogICAgICAgICAgY2x1c3RlcjogdGhpcy5tZ210LmlkCiAgICAgICAgfQogICAgICB9OwogICAgICB0aGlzLmN1cnJlbnRSb3V0ZXIoKS5wdXNoKGxvY2F0aW9uKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnb1RvSGFydmVzdGVyQ2x1c3RlciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2dvVG9IYXJ2ZXN0ZXJDbHVzdGVyID0gX2FzeW5jVG9HZW5lcmF0b3IoLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgaGFydmVzdGVyQ2x1c3RlcjsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjsKICAgICAgICAgICAgICByZXR1cm4gdGhpcy4kZGlzcGF0Y2goJ2NyZWF0ZScsIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgdGhpcyksIHt9LCB7CiAgICAgICAgICAgICAgICB0eXBlOiBIQ0kuQ0xVU1RFUgogICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIGhhcnZlc3RlckNsdXN0ZXIgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDM7CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA2OwogICAgICAgICAgICAgIHJldHVybiBoYXJ2ZXN0ZXJDbHVzdGVyLmdvVG9DbHVzdGVyKCk7CiAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDEwOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSA4OwogICAgICAgICAgICAgIF9jb250ZXh0Mi50MCA9IF9jb250ZXh0MlsiY2F0Y2giXSgzKTsKICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMiwgdGhpcywgW1szLCA4XV0pOwogICAgICB9KSk7CiAgICAgIGZ1bmN0aW9uIGdvVG9IYXJ2ZXN0ZXJDbHVzdGVyKCkgewogICAgICAgIHJldHVybiBfZ29Ub0hhcnZlc3RlckNsdXN0ZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQogICAgICByZXR1cm4gZ29Ub0hhcnZlc3RlckNsdXN0ZXI7CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJnb1RvVmlld1lhbWwiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdvVG9WaWV3WWFtbCgpIHsKICAgICAgdmFyIGxvY2F0aW9uOwogICAgICBpZiAoIXRoaXMuaXNSa2UyKSB7CiAgICAgICAgdmFyIF90aGlzJG1nbXQxNDsKICAgICAgICBsb2NhdGlvbiA9IChfdGhpcyRtZ210MTQgPSB0aGlzLm1nbXQpID09PSBudWxsIHx8IF90aGlzJG1nbXQxNCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkbWdtdDE0LmRldGFpbExvY2F0aW9uOwogICAgICB9CiAgICAgIGlmICghbG9jYXRpb24pIHsKICAgICAgICBsb2NhdGlvbiA9IHRoaXMuZGV0YWlsTG9jYXRpb247CiAgICAgIH0KICAgICAgbG9jYXRpb24ucXVlcnkgPSBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGxvY2F0aW9uLnF1ZXJ5KSwge30sIF9kZWZpbmVQcm9wZXJ0eShfZGVmaW5lUHJvcGVydHkoe30sIE1PREUsIF9WSUVXKSwgQVMsIF9ZQU1MKSk7CiAgICAgIHRoaXMuY3VycmVudFJvdXRlcigpLnB1c2gobG9jYXRpb24pOwogICAgfQogIH0sIHsKICAgIGtleTogImNhbkRlbGV0ZSIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIF9zdXBlclByb3BHZXQoUHJvdkNsdXN0ZXIsICJjYW5EZWxldGUiLCB0aGlzLCAxKSAmJiB0aGlzLnN0YXRlT2JqLm5hbWUgIT09ICdyZW1vdmluZyc7CiAgICB9CiAgfSwgewogICAga2V5OiAiY2FuRWRpdFlhbWwiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIGlmICghdGhpcy5pc1JrZTIpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgcmV0dXJuIF9zdXBlclByb3BHZXQoUHJvdkNsdXN0ZXIsICJjYW5FZGl0WWFtbCIsIHRoaXMsIDEpOwogICAgfQogIH0sIHsKICAgIGtleTogImlzSG9zdGVkS3ViZXJuZXRlc1Byb3ZpZGVyIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgcHJvdmlkZXJzID0gWydBS1MnLCAnRUtTJywgJ0dLRSddOwogICAgICByZXR1cm4gcHJvdmlkZXJzLmluY2x1ZGVzKHRoaXMucHJvdmlzaW9uZXIpOwogICAgfQogIH0sIHsKICAgIGtleTogImlzUHJpdmF0ZUhvc3RlZFByb3ZpZGVyIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgX3RoaXMkbWdtdCRzcGVjLCBfdGhpcyRtZ210JHNwZWMyLCBfdGhpcyRtZ210JHNwZWMzOwogICAgICBpZiAodGhpcy5pc0hvc3RlZEt1YmVybmV0ZXNQcm92aWRlciAmJiB0aGlzLm1nbXQgJiYgdGhpcy5wcm92aXNpb25lcikgewogICAgICAgIHN3aXRjaCAodGhpcy5wcm92aXNpb25lci50b0xvd2VyQ2FzZSgpKSB7CiAgICAgICAgICBjYXNlICdna2UnOgogICAgICAgICAgICByZXR1cm4gKF90aGlzJG1nbXQkc3BlYyA9IHRoaXMubWdtdC5zcGVjKSA9PT0gbnVsbCB8fCBfdGhpcyRtZ210JHNwZWMgPT09IHZvaWQgMCB8fCAoX3RoaXMkbWdtdCRzcGVjID0gX3RoaXMkbWdtdCRzcGVjLmdrZUNvbmZpZykgPT09IG51bGwgfHwgX3RoaXMkbWdtdCRzcGVjID09PSB2b2lkIDAgfHwgKF90aGlzJG1nbXQkc3BlYyA9IF90aGlzJG1nbXQkc3BlYy5wcml2YXRlQ2x1c3RlckNvbmZpZykgPT09IG51bGwgfHwgX3RoaXMkbWdtdCRzcGVjID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRtZ210JHNwZWMuZW5hYmxlUHJpdmF0ZUVuZHBvaW50OwogICAgICAgICAgY2FzZSAnZWtzJzoKICAgICAgICAgICAgcmV0dXJuIChfdGhpcyRtZ210JHNwZWMyID0gdGhpcy5tZ210LnNwZWMpID09PSBudWxsIHx8IF90aGlzJG1nbXQkc3BlYzIgPT09IHZvaWQgMCB8fCAoX3RoaXMkbWdtdCRzcGVjMiA9IF90aGlzJG1nbXQkc3BlYzIuZWtzQ29uZmlnKSA9PT0gbnVsbCB8fCBfdGhpcyRtZ210JHNwZWMyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRtZ210JHNwZWMyLnByaXZhdGVBY2Nlc3M7CiAgICAgICAgICBjYXNlICdha3MnOgogICAgICAgICAgICByZXR1cm4gKF90aGlzJG1nbXQkc3BlYzMgPSB0aGlzLm1nbXQuc3BlYykgPT09IG51bGwgfHwgX3RoaXMkbWdtdCRzcGVjMyA9PT0gdm9pZCAwIHx8IChfdGhpcyRtZ210JHNwZWMzID0gX3RoaXMkbWdtdCRzcGVjMy5ha3NDb25maWcpID09PSBudWxsIHx8IF90aGlzJG1nbXQkc3BlYzMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJG1nbXQkc3BlYzMucHJpdmF0ZUNsdXN0ZXI7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJpc0xvY2FsIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgX3RoaXMkbWdtdDE1OwogICAgICByZXR1cm4gKF90aGlzJG1nbXQxNSA9IHRoaXMubWdtdCkgPT09IG51bGwgfHwgX3RoaXMkbWdtdDE1ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRtZ210MTUuaXNMb2NhbDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJpc0ltcG9ydGVkIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgX3RoaXMkbWdtdDE2LCBfdGhpcyRtZ210MTcsIF90aGlzJG1nbXQxOCwgX3RoaXMkbWdtdDE5LCBfdGhpcyRtZ210MjA7CiAgICAgIC8vIEFzIG9mIFJhbmNoZXIgdjIuNi43LCB0aGlzIHJldHVybnMgZmFsc2UgZm9yIGltcG9ydGVkIEszcyBjbHVzdGVycywKICAgICAgLy8gaW4gd2hpY2ggdGhpcy5wcm92aXNpb25lciBpcyBgazNzYC4KCiAgICAgIHZhciBpc0ltcG9ydGVkUHJvdmlzaW9uZXIgPSB0aGlzLnByb3Zpc2lvbmVyID09PSAnaW1wb3J0ZWQnOwogICAgICB2YXIgaXNJbXBvcnRlZFNwZWNpYWxDYXNlcyA9ICgoX3RoaXMkbWdtdDE2ID0gdGhpcy5tZ210KSA9PT0gbnVsbCB8fCBfdGhpcyRtZ210MTYgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJG1nbXQxNi5wcm92aWRlckZvckVtYmVyUGFyYW0pID09PSAnaW1wb3J0JyB8fAogICAgICAvLyB3aGVuIGltcG9ydGVkIGNsdXN0ZXIgaXMgR0tFCiAgICAgICEhKChfdGhpcyRtZ210MTcgPSB0aGlzLm1nbXQpICE9PSBudWxsICYmIF90aGlzJG1nbXQxNyAhPT0gdm9pZCAwICYmIChfdGhpcyRtZ210MTcgPSBfdGhpcyRtZ210MTcuc3BlYykgIT09IG51bGwgJiYgX3RoaXMkbWdtdDE3ICE9PSB2b2lkIDAgJiYgKF90aGlzJG1nbXQxNyA9IF90aGlzJG1nbXQxNy5na2VDb25maWcpICE9PSBudWxsICYmIF90aGlzJG1nbXQxNyAhPT0gdm9pZCAwICYmIF90aGlzJG1nbXQxNy5pbXBvcnRlZCkgfHwKICAgICAgLy8gb3IgQUtTCiAgICAgICEhKChfdGhpcyRtZ210MTggPSB0aGlzLm1nbXQpICE9PSBudWxsICYmIF90aGlzJG1nbXQxOCAhPT0gdm9pZCAwICYmIChfdGhpcyRtZ210MTggPSBfdGhpcyRtZ210MTguc3BlYykgIT09IG51bGwgJiYgX3RoaXMkbWdtdDE4ICE9PSB2b2lkIDAgJiYgKF90aGlzJG1nbXQxOCA9IF90aGlzJG1nbXQxOC5ha3NDb25maWcpICE9PSBudWxsICYmIF90aGlzJG1nbXQxOCAhPT0gdm9pZCAwICYmIF90aGlzJG1nbXQxOC5pbXBvcnRlZCkgfHwKICAgICAgLy8gb3IgRUtTCiAgICAgICEhKChfdGhpcyRtZ210MTkgPSB0aGlzLm1nbXQpICE9PSBudWxsICYmIF90aGlzJG1nbXQxOSAhPT0gdm9pZCAwICYmIChfdGhpcyRtZ210MTkgPSBfdGhpcyRtZ210MTkuc3BlYykgIT09IG51bGwgJiYgX3RoaXMkbWdtdDE5ICE9PSB2b2lkIDAgJiYgKF90aGlzJG1nbXQxOSA9IF90aGlzJG1nbXQxOS5la3NDb25maWcpICE9PSBudWxsICYmIF90aGlzJG1nbXQxOSAhPT0gdm9pZCAwICYmIF90aGlzJG1nbXQxOS5pbXBvcnRlZCk7CiAgICAgIHJldHVybiAhdGhpcy5pc0xvY2FsICYmIChpc0ltcG9ydGVkUHJvdmlzaW9uZXIgfHwgIXRoaXMuaXNSa2UyICYmICEoKF90aGlzJG1nbXQyMCA9IHRoaXMubWdtdCkgIT09IG51bGwgJiYgX3RoaXMkbWdtdDIwICE9PSB2b2lkIDAgJiYgX3RoaXMkbWdtdDIwLm1hY2hpbmVQcm92aWRlcikgJiYgaXNJbXBvcnRlZFNwZWNpYWxDYXNlcyk7CiAgICB9CiAgfSwgewogICAga2V5OiAiaXNDdXN0b20iLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIGlmICh0aGlzLmlzUmtlMikgewogICAgICAgIHZhciBfdGhpcyRzcGVjOwogICAgICAgIHJldHVybiAhKChfdGhpcyRzcGVjID0gdGhpcy5zcGVjKSAhPT0gbnVsbCAmJiBfdGhpcyRzcGVjICE9PSB2b2lkIDAgJiYgKF90aGlzJHNwZWMgPSBfdGhpcyRzcGVjLnJrZUNvbmZpZykgIT09IG51bGwgJiYgX3RoaXMkc3BlYyAhPT0gdm9pZCAwICYmIChfdGhpcyRzcGVjID0gX3RoaXMkc3BlYy5tYWNoaW5lUG9vbHMpICE9PSBudWxsICYmIF90aGlzJHNwZWMgIT09IHZvaWQgMCAmJiBfdGhpcyRzcGVjLmxlbmd0aCk7CiAgICAgIH0KICAgICAgaWYgKHRoaXMuaXNSa2UxKSB7CiAgICAgICAgdmFyIF90aGlzJHBvb2xzOwogICAgICAgIHJldHVybiAhKChfdGhpcyRwb29scyA9IHRoaXMucG9vbHMpICE9PSBudWxsICYmIF90aGlzJHBvb2xzICE9PSB2b2lkIDAgJiYgX3RoaXMkcG9vbHMubGVuZ3RoKTsKICAgICAgfQogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgfSwgewogICAga2V5OiAiY29uZmlybVJlbW92ZSIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgfSwgewogICAga2V5OiAiaXNJbXBvcnRlZEszcyIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuaXNJbXBvcnRlZCAmJiB0aGlzLmlzSzNzOwogICAgfQogIH0sIHsKICAgIGtleTogImlzSW1wb3J0ZWRSa2UyIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgX3RoaXMkbWdtdDIxOwogICAgICByZXR1cm4gdGhpcy5pc0ltcG9ydGVkICYmICgoX3RoaXMkbWdtdDIxID0gdGhpcy5tZ210KSA9PT0gbnVsbCB8fCBfdGhpcyRtZ210MjEgPT09IHZvaWQgMCB8fCAoX3RoaXMkbWdtdDIxID0gX3RoaXMkbWdtdDIxLnN0YXR1cykgPT09IG51bGwgfHwgX3RoaXMkbWdtdDIxID09PSB2b2lkIDAgfHwgKF90aGlzJG1nbXQyMSA9IF90aGlzJG1nbXQyMS5wcm92aWRlcikgPT09IG51bGwgfHwgX3RoaXMkbWdtdDIxID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRtZ210MjEuc3RhcnRzV2l0aCgncmtlMicpKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJpc0szcyIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgdmFyIF90aGlzJG1nbXQyMiwgX3RoaXMkbWdtdDIzLCBfdGhpcyRzcGVjMjsKICAgICAgcmV0dXJuIChfdGhpcyRtZ210MjIgPSB0aGlzLm1nbXQpICE9PSBudWxsICYmIF90aGlzJG1nbXQyMiAhPT0gdm9pZCAwICYmIF90aGlzJG1nbXQyMi5zdGF0dXMgPyAoKF90aGlzJG1nbXQyMyA9IHRoaXMubWdtdCkgPT09IG51bGwgfHwgX3RoaXMkbWdtdDIzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRtZ210MjMuc3RhdHVzLnByb3ZpZGVyKSA9PT0gJ2szcycgOiAoKChfdGhpcyRzcGVjMiA9IHRoaXMuc3BlYykgPT09IG51bGwgfHwgX3RoaXMkc3BlYzIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJHNwZWMyLmt1YmVybmV0ZXNWZXJzaW9uKSB8fCAnJykuaW5jbHVkZXMoJ2szcycpOwogICAgfQogIH0sIHsKICAgIGtleTogImlzUmtlMiIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgdmFyIF90aGlzJHNwZWMzOwogICAgICByZXR1cm4gISEoKF90aGlzJHNwZWMzID0gdGhpcy5zcGVjKSAhPT0gbnVsbCAmJiBfdGhpcyRzcGVjMyAhPT0gdm9pZCAwICYmIF90aGlzJHNwZWMzLnJrZUNvbmZpZyk7CiAgICB9CiAgfSwgewogICAga2V5OiAiaXNSa2UxIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgX3RoaXMkbWdtdDI0OwogICAgICByZXR1cm4gISEoKF90aGlzJG1nbXQyNCA9IHRoaXMubWdtdCkgIT09IG51bGwgJiYgX3RoaXMkbWdtdDI0ICE9PSB2b2lkIDAgJiYgKF90aGlzJG1nbXQyNCA9IF90aGlzJG1nbXQyNC5zcGVjKSAhPT0gbnVsbCAmJiBfdGhpcyRtZ210MjQgIT09IHZvaWQgMCAmJiBfdGhpcyRtZ210MjQucmFuY2hlckt1YmVybmV0ZXNFbmdpbmVDb25maWcpIHx8IHRoaXMubGFiZWxzWydwcm92aWRlci5jYXR0bGUuaW8nXSA9PT0gJ3JrZSc7CiAgICB9CiAgfSwgewogICAga2V5OiAiaXNIYXJ2ZXN0ZXIiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHZhciBfdGhpcyRtZ210MjU7CiAgICAgIHJldHVybiAhISgoX3RoaXMkbWdtdDI1ID0gdGhpcy5tZ210KSAhPT0gbnVsbCAmJiBfdGhpcyRtZ210MjUgIT09IHZvaWQgMCAmJiBfdGhpcyRtZ210MjUuaXNIYXJ2ZXN0ZXIpOwogICAgfQogIH0sIHsKICAgIGtleTogIm1nbXRDbHVzdGVySWQiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHZhciBfdGhpcyRtZ210MjYsIF90aGlzJGlkOwogICAgICByZXR1cm4gKChfdGhpcyRtZ210MjYgPSB0aGlzLm1nbXQpID09PSBudWxsIHx8IF90aGlzJG1nbXQyNiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkbWdtdDI2LmlkKSB8fCAoKF90aGlzJGlkID0gdGhpcy5pZCkgPT09IG51bGwgfHwgX3RoaXMkaWQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJGlkLnJlcGxhY2UoIiIuY29uY2F0KHRoaXMubWV0YWRhdGEubmFtZXNwYWNlLCAiLyIpLCAnJykpOwogICAgfQogIH0sIHsKICAgIGtleTogIm1nbXQiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHZhciBfdGhpcyRzdGF0dXMzOwogICAgICB2YXIgbmFtZSA9IChfdGhpcyRzdGF0dXMzID0gdGhpcy5zdGF0dXMpID09PSBudWxsIHx8IF90aGlzJHN0YXR1czMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJHN0YXR1czMuY2x1c3Rlck5hbWU7CiAgICAgIGlmICghbmFtZSkgewogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CiAgICAgIHZhciBvdXQgPSB0aGlzLiRyb290R2V0dGVyc1snbWFuYWdlbWVudC9ieUlkJ10oTUFOQUdFTUVOVC5DTFVTVEVSLCBuYW1lKTsKICAgICAgcmV0dXJuIG91dDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJpc1JlYWR5IiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgX3RoaXMkbWdtdDI3OwogICAgICByZXR1cm4gISEoKF90aGlzJG1nbXQyNyA9IHRoaXMubWdtdCkgIT09IG51bGwgJiYgX3RoaXMkbWdtdDI3ICE9PSB2b2lkIDAgJiYgX3RoaXMkbWdtdDI3LmlzUmVhZHkpOwogICAgfQoKICAgIC8vIG5vZGVHcm91cHMgY2FuIGJlIHVuZGVmaW5lZCBmb3IgYW4gRUtTIGNsdXN0ZXIgdGhhdCBoYXMganVzdCBiZWVuIGNyZWF0ZWQgYW5kIGhhcyBub3QKICAgIC8vIGhhZCBhbnkgbm9kZSBncm91cHMgYWRkZWQgdG8gaXQKICB9LCB7CiAgICBrZXk6ICJla3NOb2RlR3JvdXBzIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgX3RoaXMkbWdtdDI4OwogICAgICByZXR1cm4gKChfdGhpcyRtZ210MjggPSB0aGlzLm1nbXQpID09PSBudWxsIHx8IF90aGlzJG1nbXQyOCA9PT0gdm9pZCAwIHx8IChfdGhpcyRtZ210MjggPSBfdGhpcyRtZ210Mjguc3BlYykgPT09IG51bGwgfHwgX3RoaXMkbWdtdDI4ID09PSB2b2lkIDAgfHwgKF90aGlzJG1nbXQyOCA9IF90aGlzJG1nbXQyOC5la3NDb25maWcpID09PSBudWxsIHx8IF90aGlzJG1nbXQyOCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkbWdtdDI4Lm5vZGVHcm91cHMpIHx8IFtdOwogICAgfQogIH0sIHsKICAgIGtleTogIndhaXRGb3JQcm92aXNpb25lciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gd2FpdEZvclByb3Zpc2lvbmVyKHRpbWVvdXQsIGludGVydmFsKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHJldHVybiB0aGlzLndhaXRGb3JUZXN0Rm4oZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiAhIV90aGlzLnByb3Zpc2lvbmVyOwogICAgICB9LCAic2V0IHByb3Zpc2lvbmVyIiwgdGltZW91dCwgaW50ZXJ2YWwpOwogICAgfQogIH0sIHsKICAgIGtleTogIndhaXRGb3JNZ210IiwKICAgIHZhbHVlOiBmdW5jdGlvbiB3YWl0Rm9yTWdtdCgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CiAgICAgIHZhciB0aW1lb3V0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiA2MDAwMDsKICAgICAgdmFyIGludGVydmFsID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBhcmd1bWVudHNbMV0gOiB1bmRlZmluZWQ7CiAgICAgIHJldHVybiB0aGlzLndhaXRGb3JUZXN0Rm4oZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBfdGhpczIkc3RhdHVzLCBfcENsdXN0ZXIkc3RhdHVzOwogICAgICAgIC8vIGB0aGlzYCBpbnN0YW5jZSBpc24ndCBnZXR0aW5nIHVwZGF0ZWQgd2l0aCBgc3RhdHVzLmNsdXN0ZXJOYW1lYAogICAgICAgIC8vIFdvcmthcm91bmQgLSBHZXQgZnJlc2ggY29weSBmcm9tIHRoZSBzdG9yZQogICAgICAgIHZhciBwQ2x1c3RlciA9IF90aGlzMi4kcm9vdEdldHRlcnNbJ21hbmFnZW1lbnQvYnlJZCddKENBUEkuUkFOQ0hFUl9DTFVTVEVSLCBfdGhpczIuaWQpOwogICAgICAgIHZhciBuYW1lID0gKChfdGhpczIkc3RhdHVzID0gX3RoaXMyLnN0YXR1cykgPT09IG51bGwgfHwgX3RoaXMyJHN0YXR1cyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMyJHN0YXR1cy5jbHVzdGVyTmFtZSkgfHwgKHBDbHVzdGVyID09PSBudWxsIHx8IHBDbHVzdGVyID09PSB2b2lkIDAgfHwgKF9wQ2x1c3RlciRzdGF0dXMgPSBwQ2x1c3Rlci5zdGF0dXMpID09PSBudWxsIHx8IF9wQ2x1c3RlciRzdGF0dXMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9wQ2x1c3RlciRzdGF0dXMuY2x1c3Rlck5hbWUpOwogICAgICAgIHJldHVybiBuYW1lICYmICEhX3RoaXMyLiRyb290R2V0dGVyc1snbWFuYWdlbWVudC9ieUlkJ10oTUFOQUdFTUVOVC5DTFVTVEVSLCBuYW1lKTsKICAgICAgfSwgdGhpcy4kcm9vdEdldHRlcnNbJ2kxOG4vdCddKCdjbHVzdGVyLm1hbmFnZW1lbnRUaW1lb3V0JyksIHRpbWVvdXQsIGludGVydmFsKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJwcm92aXNpb25lciIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgaWYgKHRoaXMuaXNSa2UyKSB7CiAgICAgICAgdmFyIGFsbEtleXMgPSBPYmplY3Qua2V5cyh0aGlzLnNwZWMpOwogICAgICAgIHZhciBjb25maWdLZXkgPSBhbGxLZXlzLmZpbmQoZnVuY3Rpb24gKGspIHsKICAgICAgICAgIHJldHVybiBrLmVuZHNXaXRoKCdDb25maWcnKTsKICAgICAgICB9KTsKICAgICAgICBpZiAoY29uZmlnS2V5ID09PSAncmtlQ29uZmlnJykgewogICAgICAgICAgcmV0dXJuICdya2UyJzsKICAgICAgICB9IGVsc2UgaWYgKGNvbmZpZ0tleSkgewogICAgICAgICAgcmV0dXJuIGNvbmZpZ0tleS5yZXBsYWNlKC9jb25maWckL2ksICcnKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAodGhpcy5tZ210KSB7CiAgICAgICAgcmV0dXJuIHRoaXMubWdtdC5wcm92aXNpb25lcjsKICAgICAgfQogICAgICByZXR1cm4gbnVsbDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJwcm92aXNpb25lckRpc3BsYXkiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHZhciBfdGhpcyRzcGVjNDsKICAgICAgdmFyIHByb3Zpc2lvbmVyID0gKHRoaXMucHJvdmlzaW9uZXIgfHwgJycpLnRvTG93ZXJDYXNlKCk7CgogICAgICAvLyBSS0UgcHJvdmlzaW9uZXIgY2FuIGFjdHVhbGx5IGRvIEszcyB0b28uLi4KICAgICAgaWYgKHByb3Zpc2lvbmVyID09PSAncmtlMicgJiYgKF90aGlzJHNwZWM0ID0gdGhpcy5zcGVjKSAhPT0gbnVsbCAmJiBfdGhpcyRzcGVjNCAhPT0gdm9pZCAwICYmIChfdGhpcyRzcGVjNCA9IF90aGlzJHNwZWM0Lmt1YmVybmV0ZXNWZXJzaW9uKSAhPT0gbnVsbCAmJiBfdGhpcyRzcGVjNCAhPT0gdm9pZCAwICYmIF90aGlzJHNwZWM0LmluY2x1ZGVzKCdrM3MnKSkgewogICAgICAgIHByb3Zpc2lvbmVyID0gJ2szcyc7CiAgICAgIH0gZWxzZSBpZiAodGhpcy5pc0ltcG9ydGVkSzNzKSB7CiAgICAgICAgcHJvdmlzaW9uZXIgPSAnazNzJzsKICAgICAgfSBlbHNlIGlmICh0aGlzLmlzSW1wb3J0ZWRSa2UyKSB7CiAgICAgICAgcHJvdmlzaW9uZXIgPSAncmtlMic7CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXMuJHJvb3RHZXR0ZXJzWydpMThuL3dpdGhGYWxsYmFjayddKCJjbHVzdGVyLnByb3ZpZGVyLlwiIi5jb25jYXQocHJvdmlzaW9uZXIsICJcIiIpLCBudWxsLCB1Y0ZpcnN0KHByb3Zpc2lvbmVyKSk7CiAgICB9CiAgfSwgewogICAga2V5OiAicHJvdmlkZXJMb2dvIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgX3RoaXMkbWdtdDI5OwogICAgICByZXR1cm4gKF90aGlzJG1nbXQyOSA9IHRoaXMubWdtdCkgPT09IG51bGwgfHwgX3RoaXMkbWdtdDI5ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRtZ210MjkucHJvdmlkZXJMb2dvOwogICAgfQogIH0sIHsKICAgIGtleTogIm5vZGVzQXJjaGl0ZWN0dXJlIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgX3RoaXMkbm9kZXMsCiAgICAgICAgX3RoaXMzID0gdGhpczsKICAgICAgdmFyIG9iaiA9IHt9OwogICAgICAoX3RoaXMkbm9kZXMgPSB0aGlzLm5vZGVzKSA9PT0gbnVsbCB8fCBfdGhpcyRub2RlcyA9PT0gdm9pZCAwIHx8IF90aGlzJG5vZGVzLmZvckVhY2goZnVuY3Rpb24gKG5vZGUpIHsKICAgICAgICB2YXIgX25vZGUkbWV0YWRhdGE7CiAgICAgICAgaWYgKCEoKF9ub2RlJG1ldGFkYXRhID0gbm9kZS5tZXRhZGF0YSkgIT09IG51bGwgJiYgX25vZGUkbWV0YWRhdGEgIT09IHZvaWQgMCAmJiAoX25vZGUkbWV0YWRhdGEgPSBfbm9kZSRtZXRhZGF0YS5zdGF0ZSkgIT09IG51bGwgJiYgX25vZGUkbWV0YWRhdGEgIT09IHZvaWQgMCAmJiBfbm9kZSRtZXRhZGF0YS50cmFuc2l0aW9uaW5nKSkgewogICAgICAgICAgdmFyIF9ub2RlJHN0YXR1czsKICAgICAgICAgIHZhciBhcmNoaXRlY3R1cmUgPSAoX25vZGUkc3RhdHVzID0gbm9kZS5zdGF0dXMpID09PSBudWxsIHx8IF9ub2RlJHN0YXR1cyA9PT0gdm9pZCAwIHx8IChfbm9kZSRzdGF0dXMgPSBfbm9kZSRzdGF0dXMubm9kZUxhYmVscykgPT09IG51bGwgfHwgX25vZGUkc3RhdHVzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfbm9kZSRzdGF0dXNbTk9ERV9BUkNISVRFQ1RVUkVdOwogICAgICAgICAgdmFyIGtleSA9IGFyY2hpdGVjdHVyZSA/IGNhcGl0YWxpemUoYXJjaGl0ZWN0dXJlKSA6IF90aGlzMy50KCdjbHVzdGVyLmFyY2hpdGVjdHVyZS5sYWJlbC51bmtub3duJyk7CiAgICAgICAgICBvYmpba2V5XSA9IChvYmpba2V5XSB8fCAwKSArIDE7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgcmV0dXJuIG9iajsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJhcmNoaXRlY3R1cmUiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwogICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHRoaXMubm9kZXNBcmNoaXRlY3R1cmUpOwogICAgICBzd2l0Y2ggKGtleXMubGVuZ3RoKSB7CiAgICAgICAgY2FzZSAwOgogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgbGFiZWw6IHRoaXMudCgnZ2VuZXJpYy5wcm92aXNpb25pbmcnKQogICAgICAgICAgfTsKICAgICAgICBjYXNlIDE6CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICBsYWJlbDoga2V5c1swXQogICAgICAgICAgfTsKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgbGFiZWw6IHRoaXMudCgnY2x1c3Rlci5hcmNoaXRlY3R1cmUubGFiZWwubWl4ZWQnKSwKICAgICAgICAgICAgdG9vbHRpcDoga2V5cy5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgaykgewogICAgICAgICAgICAgIHJldHVybiAiIi5jb25jYXQoYWNjKS5jb25jYXQoaywgIjogIikuY29uY2F0KF90aGlzNC5ub2Rlc0FyY2hpdGVjdHVyZVtrXSwgIjxicj4iKTsKICAgICAgICAgICAgfSwgJycpCiAgICAgICAgICB9OwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAia3ViZXJuZXRlc1ZlcnNpb24iLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHZhciB1bmtub3duID0gdGhpcy4kcm9vdEdldHRlcnNbJ2kxOG4vdCddKCdnZW5lcmljLnVua25vd24nKTsKICAgICAgaWYgKHRoaXMuaXNSa2UyKSB7CiAgICAgICAgdmFyIF90aGlzJHN0YXR1czQsIF90aGlzJHNwZWM1OwogICAgICAgIHZhciBmcm9tU3RhdHVzID0gKF90aGlzJHN0YXR1czQgPSB0aGlzLnN0YXR1cykgPT09IG51bGwgfHwgX3RoaXMkc3RhdHVzNCA9PT0gdm9pZCAwIHx8IChfdGhpcyRzdGF0dXM0ID0gX3RoaXMkc3RhdHVzNC52ZXJzaW9uKSA9PT0gbnVsbCB8fCBfdGhpcyRzdGF0dXM0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRzdGF0dXM0LmdpdFZlcnNpb247CiAgICAgICAgdmFyIGZyb21TcGVjID0gKF90aGlzJHNwZWM1ID0gdGhpcy5zcGVjKSA9PT0gbnVsbCB8fCBfdGhpcyRzcGVjNSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkc3BlYzUua3ViZXJuZXRlc1ZlcnNpb247CiAgICAgICAgcmV0dXJuIGZyb21TdGF0dXMgfHwgZnJvbVNwZWMgfHwgdW5rbm93bjsKICAgICAgfSBlbHNlIGlmICh0aGlzLm1nbXQpIHsKICAgICAgICByZXR1cm4gdGhpcy5tZ210Lmt1YmVybmV0ZXNWZXJzaW9uIHx8IHVua25vd247CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHVua25vd247CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJtYWNoaW5lUHJvdmlkZXIiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHZhciBfdGhpcyRhbm5vdGF0aW9ucywgX3RoaXMkbWdtdDMwOwogICAgICAvLyBGaXJzdCBjaGVjayBhbm5vdGF0aW9uIC0gdXNlZnVsIGZvciBjbHVzdGVycyBjcmVhdGVkIGJ5IGV4dGVuc2lvbiBwcm92aWRlcnMKICAgICAgdmFyIGZyb21Bbm5vdGF0aW9uID0gKF90aGlzJGFubm90YXRpb25zID0gdGhpcy5hbm5vdGF0aW9ucykgPT09IG51bGwgfHwgX3RoaXMkYW5ub3RhdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJGFubm90YXRpb25zW0NBUElfQU5OT1RBVElPTlMuVUlfQ1VTVE9NX1BST1ZJREVSXTsKICAgICAgaWYgKGZyb21Bbm5vdGF0aW9uKSB7CiAgICAgICAgcmV0dXJuIGZyb21Bbm5vdGF0aW9uOwogICAgICB9CiAgICAgIGlmICh0aGlzLmlzSGFydmVzdGVyKSB7CiAgICAgICAgcmV0dXJuIEhBUlZFU1RFUjsKICAgICAgfSBlbHNlIGlmICh0aGlzLmlzSW1wb3J0ZWQpIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfSBlbHNlIGlmICh0aGlzLmlzUmtlMikgewogICAgICAgIHZhciBfdGhpcyRzcGVjNjsKICAgICAgICB2YXIga2luZCA9IChfdGhpcyRzcGVjNiA9IHRoaXMuc3BlYykgPT09IG51bGwgfHwgX3RoaXMkc3BlYzYgPT09IHZvaWQgMCB8fCAoX3RoaXMkc3BlYzYgPSBfdGhpcyRzcGVjNi5ya2VDb25maWcpID09PSBudWxsIHx8IF90aGlzJHNwZWM2ID09PSB2b2lkIDAgfHwgKF90aGlzJHNwZWM2ID0gX3RoaXMkc3BlYzYubWFjaGluZVBvb2xzKSA9PT0gbnVsbCB8fCBfdGhpcyRzcGVjNiA9PT0gdm9pZCAwIHx8IChfdGhpcyRzcGVjNiA9IF90aGlzJHNwZWM2WzBdKSA9PT0gbnVsbCB8fCBfdGhpcyRzcGVjNiA9PT0gdm9pZCAwIHx8IChfdGhpcyRzcGVjNiA9IF90aGlzJHNwZWM2Lm1hY2hpbmVDb25maWdSZWYpID09PSBudWxsIHx8IF90aGlzJHNwZWM2ID09PSB2b2lkIDAgfHwgKF90aGlzJHNwZWM2ID0gX3RoaXMkc3BlYzYua2luZCkgPT09IG51bGwgfHwgX3RoaXMkc3BlYzYgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJHNwZWM2LnRvTG93ZXJDYXNlKCk7CiAgICAgICAgaWYgKGtpbmQpIHsKICAgICAgICAgIHJldHVybiBraW5kLnJlcGxhY2UoL2NvbmZpZyQvaSwgJycpLnRvTG93ZXJDYXNlKCk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBudWxsOwogICAgICB9IGVsc2UgaWYgKChfdGhpcyRtZ210MzAgPSB0aGlzLm1nbXQpICE9PSBudWxsICYmIF90aGlzJG1nbXQzMCAhPT0gdm9pZCAwICYmIF90aGlzJG1nbXQzMC5tYWNoaW5lUHJvdmlkZXIpIHsKICAgICAgICByZXR1cm4gdGhpcy5tZ210Lm1hY2hpbmVQcm92aWRlci50b0xvd2VyQ2FzZSgpOwogICAgICB9CiAgICAgIHJldHVybiBudWxsOwogICAgfQogIH0sIHsKICAgIGtleTogIm1hY2hpbmVQcm92aWRlckRpc3BsYXkiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIGlmICh0aGlzLmlzSW1wb3J0ZWQpIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQogICAgICB2YXIgcHJvdmlkZXIgPSAodGhpcy5tYWNoaW5lUHJvdmlkZXIgfHwgJycpLnRvTG93ZXJDYXNlKCk7CiAgICAgIGlmIChwcm92aWRlcikgewogICAgICAgIHJldHVybiB0aGlzLiRyb290R2V0dGVyc1snaTE4bi93aXRoRmFsbGJhY2snXSgiY2x1c3Rlci5wcm92aWRlci5cIiIuY29uY2F0KHByb3ZpZGVyLCAiXCIiKSwgbnVsbCwgcHJvdmlkZXIpOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiB0aGlzLiRyb290R2V0dGVyc1snaTE4bi90J10oJ2dlbmVyaWMudW5rbm93bicpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAibWFjaGluZVBvb2xEZWZhdWx0cyIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgdmFyIF90aGlzJHNwZWMkcmtlQ29uZmlnOwogICAgICByZXR1cm4gKF90aGlzJHNwZWMkcmtlQ29uZmlnID0gdGhpcy5zcGVjLnJrZUNvbmZpZykgPT09IG51bGwgfHwgX3RoaXMkc3BlYyRya2VDb25maWcgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJHNwZWMkcmtlQ29uZmlnLm1hY2hpbmVQb29sRGVmYXVsdHM7CiAgICB9CiAgfSwgewogICAga2V5OiAiZGVmYXVsdEhvc3RuYW1lTGVuZ3RoTGltaXQiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHZhciBfdGhpcyRzcGVjJHJrZUNvbmZpZzI7CiAgICAgIHJldHVybiAoX3RoaXMkc3BlYyRya2VDb25maWcyID0gdGhpcy5zcGVjLnJrZUNvbmZpZykgPT09IG51bGwgfHwgX3RoaXMkc3BlYyRya2VDb25maWcyID09PSB2b2lkIDAgfHwgKF90aGlzJHNwZWMkcmtlQ29uZmlnMiA9IF90aGlzJHNwZWMkcmtlQ29uZmlnMi5tYWNoaW5lUG9vbERlZmF1bHRzKSA9PT0gbnVsbCB8fCBfdGhpcyRzcGVjJHJrZUNvbmZpZzIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJHNwZWMkcmtlQ29uZmlnMi5ob3N0bmFtZUxlbmd0aExpbWl0OwogICAgfSwKICAgIHNldDogZnVuY3Rpb24gc2V0KHZhbHVlKSB7CiAgICAgIHRoaXMuc3BlYy5ya2VDb25maWcgPSB0aGlzLnNwZWMucmtlQ29uZmlnIHx8IHt9OwogICAgICB0aGlzLnNwZWMucmtlQ29uZmlnLm1hY2hpbmVQb29sRGVmYXVsdHMgPSB0aGlzLnNwZWMucmtlQ29uZmlnLm1hY2hpbmVQb29sRGVmYXVsdHMgfHwge307CiAgICAgIHRoaXMuc3BlYy5ya2VDb25maWcubWFjaGluZVBvb2xEZWZhdWx0cy5ob3N0bmFtZUxlbmd0aExpbWl0ID0gdmFsdWU7CiAgICB9CiAgfSwgewogICAga2V5OiAicmVtb3ZlRGVmYXVsdEhvc3RuYW1lTGVuZ3RoTGltaXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbW92ZURlZmF1bHRIb3N0bmFtZUxlbmd0aExpbWl0KCkgewogICAgICB2YXIgX3RoaXMkbWFjaGluZVBvb2xEZWZhOwogICAgICBpZiAoKF90aGlzJG1hY2hpbmVQb29sRGVmYSA9IHRoaXMubWFjaGluZVBvb2xEZWZhdWx0cykgIT09IG51bGwgJiYgX3RoaXMkbWFjaGluZVBvb2xEZWZhICE9PSB2b2lkIDAgJiYgX3RoaXMkbWFjaGluZVBvb2xEZWZhLmhvc3RuYW1lTGVuZ3RoTGltaXQpIHsKICAgICAgICB2YXIgX3RoaXMkc3BlYzc7CiAgICAgICAgZGVsZXRlIHRoaXMuc3BlYy5ya2VDb25maWcubWFjaGluZVBvb2xEZWZhdWx0cy5ob3N0bmFtZUxlbmd0aExpbWl0OwogICAgICAgIGlmIChPYmplY3Qua2V5cygoX3RoaXMkc3BlYzcgPSB0aGlzLnNwZWMpID09PSBudWxsIHx8IF90aGlzJHNwZWM3ID09PSB2b2lkIDAgfHwgKF90aGlzJHNwZWM3ID0gX3RoaXMkc3BlYzcucmtlQ29uZmlnKSA9PT0gbnVsbCB8fCBfdGhpcyRzcGVjNyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkc3BlYzcubWFjaGluZVBvb2xEZWZhdWx0cykubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICBkZWxldGUgdGhpcy5zcGVjLnJrZUNvbmZpZy5tYWNoaW5lUG9vbERlZmF1bHRzOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogIm5vZGVzIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgX3RoaXM1ID0gdGhpczsKICAgICAgcmV0dXJuIHRoaXMuJHJvb3RHZXR0ZXJzWydtYW5hZ2VtZW50L2FsbCddKE1BTkFHRU1FTlQuTk9ERSkuZmlsdGVyKGZ1bmN0aW9uIChub2RlKSB7CiAgICAgICAgcmV0dXJuIG5vZGUuaWQuc3RhcnRzV2l0aChfdGhpczUubWdtdENsdXN0ZXJJZCk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogIm1hY2hpbmVzIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgX3RoaXM2ID0gdGhpczsKICAgICAgcmV0dXJuIHRoaXMuJHJvb3RHZXR0ZXJzWydtYW5hZ2VtZW50L2FsbCddKENBUEkuTUFDSElORSkuZmlsdGVyKGZ1bmN0aW9uIChtYWNoaW5lKSB7CiAgICAgICAgdmFyIF9tYWNoaW5lJG1ldGFkYXRhLCBfbWFjaGluZSRzcGVjOwogICAgICAgIGlmICgoKF9tYWNoaW5lJG1ldGFkYXRhID0gbWFjaGluZS5tZXRhZGF0YSkgPT09IG51bGwgfHwgX21hY2hpbmUkbWV0YWRhdGEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9tYWNoaW5lJG1ldGFkYXRhLm5hbWVzcGFjZSkgIT09IF90aGlzNi5tZXRhZGF0YS5uYW1lc3BhY2UpIHsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuICgoX21hY2hpbmUkc3BlYyA9IG1hY2hpbmUuc3BlYykgPT09IG51bGwgfHwgX21hY2hpbmUkc3BlYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX21hY2hpbmUkc3BlYy5jbHVzdGVyTmFtZSkgPT09IF90aGlzNi5tZXRhZGF0YS5uYW1lOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJkaXNwbGF5TmFtZSIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgaWYgKHRoaXMubWdtdCAmJiAhdGhpcy5pc1JrZTIpIHsKICAgICAgICByZXR1cm4gdGhpcy5tZ210LnNwZWMuZGlzcGxheU5hbWU7CiAgICAgIH0KICAgICAgcmV0dXJuIG51bGw7CiAgICB9CiAgfSwgewogICAga2V5OiAicG9vbHMiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHZhciBfdGhpczcgPSB0aGlzOwogICAgICB2YXIgZGVwbG95bWVudHMgPSB0aGlzLiRyb290R2V0dGVyc1snbWFuYWdlbWVudC9hbGwnXShDQVBJLk1BQ0hJTkVfREVQTE9ZTUVOVCkuZmlsdGVyKGZ1bmN0aW9uIChwb29sKSB7CiAgICAgICAgdmFyIF9wb29sJHNwZWM7CiAgICAgICAgcmV0dXJuICgoX3Bvb2wkc3BlYyA9IHBvb2wuc3BlYykgPT09IG51bGwgfHwgX3Bvb2wkc3BlYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3Bvb2wkc3BlYy5jbHVzdGVyTmFtZSkgPT09IF90aGlzNy5tZXRhZGF0YS5uYW1lOwogICAgICB9KTsKICAgICAgaWYgKCEhZGVwbG95bWVudHMubGVuZ3RoKSB7CiAgICAgICAgcmV0dXJuIGRlcGxveW1lbnRzOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzLiRyb290R2V0dGVyc1snbWFuYWdlbWVudC9hbGwnXShNQU5BR0VNRU5ULk5PREVfUE9PTCkuZmlsdGVyKGZ1bmN0aW9uIChwb29sKSB7CiAgICAgICAgdmFyIF90aGlzNyRzdGF0dXM7CiAgICAgICAgcmV0dXJuIHBvb2wuc3BlYy5jbHVzdGVyTmFtZSA9PT0gKChfdGhpczckc3RhdHVzID0gX3RoaXM3LnN0YXR1cykgPT09IG51bGwgfHwgX3RoaXM3JHN0YXR1cyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXM3JHN0YXR1cy5jbHVzdGVyTmFtZSk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogImRlc2lyZWQiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLnBvb2xzLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBwb29sKSB7CiAgICAgICAgcmV0dXJuIGFjYyArIChwb29sLmRlc2lyZWQgfHwgMCk7CiAgICAgIH0sIDApOwogICAgfQogIH0sIHsKICAgIGtleTogInBlbmRpbmciLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLnBvb2xzLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBwb29sKSB7CiAgICAgICAgcmV0dXJuIGFjYyArIChwb29sLnBlbmRpbmcgfHwgMCk7CiAgICAgIH0sIDApOwogICAgfQogIH0sIHsKICAgIGtleTogIm91dGRhdGVkIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5wb29scy5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgcG9vbCkgewogICAgICAgIHJldHVybiBhY2MgKyAocG9vbC5vdXRkYXRlZCB8fCAwKTsKICAgICAgfSwgMCk7CiAgICB9CiAgfSwgewogICAga2V5OiAicmVhZHkiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLnBvb2xzLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBwb29sKSB7CiAgICAgICAgcmV0dXJuIGFjYyArIChwb29sLnJlYWR5IHx8IDApOwogICAgICB9LCAwKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJ1bmF2YWlsYWJsZSIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMucG9vbHMucmVkdWNlKGZ1bmN0aW9uIChhY2MsIHBvb2wpIHsKICAgICAgICByZXR1cm4gYWNjICsgKHBvb2wudW5hdmFpbGFibGUgfHwgMCk7CiAgICAgIH0sIDApOwogICAgfQogIH0sIHsKICAgIGtleTogInVuYXZhaWxhYmxlTWFjaGluZXMiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHZhciBfdGhpczggPSB0aGlzOwogICAgICBpZiAodGhpcy5pc1JlYWR5KSB7CiAgICAgICAgaWYgKHRoaXMuaXNSa2UxKSB7CiAgICAgICAgICB2YXIgbmFtZXMgPSB0aGlzLm5vZGVzLmZpbHRlcihmdW5jdGlvbiAobm9kZSkgewogICAgICAgICAgICByZXR1cm4gbm9kZS5zdGF0dXMuY29uZGl0aW9ucy5maW5kKGZ1bmN0aW9uIChjKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGMuZXJyb3IgJiYgYy50eXBlID09PSAnUmVhZHknOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pLm1hcChmdW5jdGlvbiAobm9kZSkgewogICAgICAgICAgICB2YXIgbmFtZSA9IG5vZGUuc3RhdHVzLm5vZGVOYW1lIHx8IG5vZGUubWV0YWRhdGEubmFtZTsKICAgICAgICAgICAgcmV0dXJuIF90aGlzOC50KCdjbHVzdGVyLmF2YWlsYWJpbGl0eVdhcm5pbmdzLm5vZGUnLCB7CiAgICAgICAgICAgICAgbmFtZTogbmFtZQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgICAgcmV0dXJuIG5hbWVzLmpvaW4oJzxicj4nKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdmFyIF9uYW1lcyA9IHRoaXMubWFjaGluZXMuZmlsdGVyKGZ1bmN0aW9uIChtYWNoaW5lKSB7CiAgICAgICAgICAgIHZhciBfbWFjaGluZSRzdGF0dXM7CiAgICAgICAgICAgIHJldHVybiAoX21hY2hpbmUkc3RhdHVzID0gbWFjaGluZS5zdGF0dXMpID09PSBudWxsIHx8IF9tYWNoaW5lJHN0YXR1cyA9PT0gdm9pZCAwIHx8IChfbWFjaGluZSRzdGF0dXMgPSBfbWFjaGluZSRzdGF0dXMuY29uZGl0aW9ucykgPT09IG51bGwgfHwgX21hY2hpbmUkc3RhdHVzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfbWFjaGluZSRzdGF0dXMuZmluZChmdW5jdGlvbiAoYykgewogICAgICAgICAgICAgIHJldHVybiBjLmVycm9yICYmIGMudHlwZSA9PT0gJ05vZGVIZWFsdGh5JzsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KS5tYXAoZnVuY3Rpb24gKG1hY2hpbmUpIHsKICAgICAgICAgICAgdmFyIF9tYWNoaW5lJHN0YXR1czI7CiAgICAgICAgICAgIGlmICgoX21hY2hpbmUkc3RhdHVzMiA9IG1hY2hpbmUuc3RhdHVzKSAhPT0gbnVsbCAmJiBfbWFjaGluZSRzdGF0dXMyICE9PSB2b2lkIDAgJiYgKF9tYWNoaW5lJHN0YXR1czIgPSBfbWFjaGluZSRzdGF0dXMyLm5vZGVSZWYpICE9PSBudWxsICYmIF9tYWNoaW5lJHN0YXR1czIgIT09IHZvaWQgMCAmJiBfbWFjaGluZSRzdGF0dXMyLm5hbWUpIHsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXM4LnQoJ2NsdXN0ZXIuYXZhaWxhYmlsaXR5V2FybmluZ3Mubm9kZScsIHsKICAgICAgICAgICAgICAgIG5hbWU6IG1hY2hpbmUuc3RhdHVzLm5vZGVSZWYubmFtZQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBfdGhpczgudCgnY2x1c3Rlci5hdmFpbGFiaWxpdHlXYXJuaW5ncy5tYWNoaW5lJywgewogICAgICAgICAgICAgIG5hbWU6IG1hY2hpbmUubWV0YWRhdGEubmFtZQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgICAgcmV0dXJuIF9uYW1lcy5qb2luKCc8YnI+Jyk7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiAnJzsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzdGF0ZVBhcnRzIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgb3V0ID0gW3sKICAgICAgICBsYWJlbDogJ1BlbmRpbmcnLAogICAgICAgIGNvbG9yOiAnYmctaW5mbycsCiAgICAgICAgdGV4dENvbG9yOiAndGV4dC1pbmZvJywKICAgICAgICB2YWx1ZTogdGhpcy5wZW5kaW5nLAogICAgICAgIHNvcnQ6IDEKICAgICAgfSwgewogICAgICAgIGxhYmVsOiAnT3V0ZGF0ZWQnLAogICAgICAgIGNvbG9yOiAnYmctd2FybmluZycsCiAgICAgICAgdGV4dENvbG9yOiAndGV4dC13YXJuaW5nJywKICAgICAgICB2YWx1ZTogdGhpcy5vdXRkYXRlZCwKICAgICAgICBzb3J0OiAyCiAgICAgIH0sIHsKICAgICAgICBsYWJlbDogJ1VuYXZhaWxhYmxlJywKICAgICAgICBjb2xvcjogJ2JnLWVycm9yJywKICAgICAgICB0ZXh0Q29sb3I6ICd0ZXh0LWVycm9yJywKICAgICAgICB2YWx1ZTogdGhpcy51bmF2YWlsYWJsZSwKICAgICAgICBzb3J0OiAzCiAgICAgIH0sIHsKICAgICAgICBsYWJlbDogJ1JlYWR5JywKICAgICAgICBjb2xvcjogJ2JnLXN1Y2Nlc3MnLAogICAgICAgIHRleHRDb2xvcjogJ3RleHQtc3VjY2VzcycsCiAgICAgICAgdmFsdWU6IHRoaXMucmVhZHksCiAgICAgICAgc29ydDogNAogICAgICB9XS5maWx0ZXIoZnVuY3Rpb24gKHgpIHsKICAgICAgICByZXR1cm4geC52YWx1ZSA+IDA7CiAgICAgIH0pOwogICAgICByZXR1cm4gc29ydEJ5KG91dCwgJ3NvcnQ6ZGVzYycpOwogICAgfQogIH0sIHsKICAgIGtleTogImdldE9yQ3JlYXRlVG9rZW4iLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9nZXRPckNyZWF0ZVRva2VuID0gX2FzeW5jVG9HZW5lcmF0b3IoLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMygpIHsKICAgICAgICB2YXIgdG9rZW5zLCB0b2tlbjsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjsKICAgICAgICAgICAgICByZXR1cm4gdGhpcy53YWl0Rm9yTWdtdCgpOwogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgaWYgKHRoaXMubWdtdCkgewogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA0OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iKTsKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNjsKICAgICAgICAgICAgICByZXR1cm4gdGhpcy4kZGlzcGF0Y2goJ3JhbmNoZXIvZmluZEFsbCcsIHsKICAgICAgICAgICAgICAgIHR5cGU6IE5PUk1BTi5DTFVTVEVSX1RPS0VOLAogICAgICAgICAgICAgICAgZm9yY2U6IHRydWUKICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICByb290OiB0cnVlCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICB0b2tlbnMgPSBfY29udGV4dDMuc2VudDsKICAgICAgICAgICAgICB0b2tlbiA9IGZpbmRCeSh0b2tlbnMsICdjbHVzdGVySWQnLCB0aGlzLm1nbXQuaWQpOwogICAgICAgICAgICAgIGlmICghdG9rZW4pIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoInJldHVybiIsIHRva2VuKTsKICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICBpZiAodGhpcy5saW5rcy51cGRhdGUpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoInJldHVybiIpOwogICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMTQ7CiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJGRpc3BhdGNoKCdyYW5jaGVyL2NyZWF0ZScsIHsKICAgICAgICAgICAgICAgIHR5cGU6IE5PUk1BTi5DTFVTVEVSX1RPS0VOLAogICAgICAgICAgICAgICAgY2x1c3RlcklkOiB0aGlzLm1nbXQuaWQKICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICByb290OiB0cnVlCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgICAgdG9rZW4gPSBfY29udGV4dDMuc2VudDsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIiwgdG9rZW4uc2F2ZSgpKTsKICAgICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMywgdGhpcyk7CiAgICAgIH0pKTsKICAgICAgZnVuY3Rpb24gZ2V0T3JDcmVhdGVUb2tlbigpIHsKICAgICAgICByZXR1cm4gX2dldE9yQ3JlYXRlVG9rZW4uYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQogICAgICByZXR1cm4gZ2V0T3JDcmVhdGVUb2tlbjsKICAgIH0oKQogIH0sIHsKICAgIGtleTogIm9wZW5TaGVsbCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gb3BlblNoZWxsKCkgewogICAgICB2YXIgX3RoaXMkbWdtdDMxOwogICAgICByZXR1cm4gKF90aGlzJG1nbXQzMSA9IHRoaXMubWdtdCkgPT09IG51bGwgfHwgX3RoaXMkbWdtdDMxID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRtZ210MzEub3BlblNoZWxsKCk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2VuZXJhdGVLdWJlQ29uZmlnIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZW5lcmF0ZUt1YmVDb25maWcoKSB7CiAgICAgIHZhciBfdGhpcyRtZ210MzI7CiAgICAgIHJldHVybiAoX3RoaXMkbWdtdDMyID0gdGhpcy5tZ210KSA9PT0gbnVsbCB8fCBfdGhpcyRtZ210MzIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJG1nbXQzMi5nZW5lcmF0ZUt1YmVDb25maWcoKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjb3B5S3ViZUNvbmZpZyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2NvcHlLdWJlQ29uZmlnID0gX2FzeW5jVG9HZW5lcmF0b3IoLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNCgpIHsKICAgICAgICB2YXIgX3RoaXMkbWdtdDMzOwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTQkKF9jb250ZXh0NCkgewogICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQ0LnByZXYgPSBfY29udGV4dDQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAyOwogICAgICAgICAgICAgIHJldHVybiAoX3RoaXMkbWdtdDMzID0gdGhpcy5tZ210KSA9PT0gbnVsbCB8fCBfdGhpcyRtZ210MzMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJG1nbXQzMy5jb3B5S3ViZUNvbmZpZygpOwogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgdGhpcy4kZGlzcGF0Y2goJ2dyb3dsL3N1Y2Nlc3MnLCB7CiAgICAgICAgICAgICAgICB0aXRsZTogdGhpcy50KCdjbHVzdGVyLmNvcGllZENvbmZpZycpLAogICAgICAgICAgICAgICAgdGltZW91dDogMzAwMAogICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU0LCB0aGlzKTsKICAgICAgfSkpOwogICAgICBmdW5jdGlvbiBjb3B5S3ViZUNvbmZpZygpIHsKICAgICAgICByZXR1cm4gX2NvcHlLdWJlQ29uZmlnLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KICAgICAgcmV0dXJuIGNvcHlLdWJlQ29uZmlnOwogICAgfSgpCiAgfSwgewogICAga2V5OiAiZG93bmxvYWRLdWJlQ29uZmlnIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBkb3dubG9hZEt1YmVDb25maWcoKSB7CiAgICAgIHZhciBfdGhpcyRtZ210MzQ7CiAgICAgIHJldHVybiAoX3RoaXMkbWdtdDM0ID0gdGhpcy5tZ210KSA9PT0gbnVsbCB8fCBfdGhpcyRtZ210MzQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJG1nbXQzNC5kb3dubG9hZEt1YmVDb25maWcoKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJkb3dubG9hZEt1YmVDb25maWdCdWxrIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBkb3dubG9hZEt1YmVDb25maWdCdWxrKGl0ZW1zKSB7CiAgICAgIHZhciBfdGhpcyRtZ210MzU7CiAgICAgIHJldHVybiAoX3RoaXMkbWdtdDM1ID0gdGhpcy5tZ210KSA9PT0gbnVsbCB8fCBfdGhpcyRtZ210MzUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJG1nbXQzNS5kb3dubG9hZEt1YmVDb25maWdCdWxrKGl0ZW1zKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzbmFwc2hvdEFjdGlvbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3NuYXBzaG90QWN0aW9uID0gX2FzeW5jVG9HZW5lcmF0b3IoLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNSgpIHsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU1JChfY29udGV4dDUpIHsKICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0NS5wcmV2ID0gX2NvbnRleHQ1Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF9jb250ZXh0NS5wcmV2ID0gMDsKICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDM7CiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudGFrZVNuYXBzaG90KCk7CiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICB0aGlzLiRkaXNwYXRjaCgnZ3Jvd2wvc3VjY2VzcycsIHsKICAgICAgICAgICAgICAgIHRpdGxlOiB0aGlzLiRyb290R2V0dGVyc1snaTE4bi90J10oJ2NsdXN0ZXIuc25hcHNob3Quc3VjY2Vzc1RpdGxlJywgewogICAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLm5hbWVEaXNwbGF5CiAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHRoaXMuJHJvb3RHZXR0ZXJzWydpMThuL3QnXSgnY2x1c3Rlci5zbmFwc2hvdC5zdWNjZXNzTWVzc2FnZScsIHsKICAgICAgICAgICAgICAgICAgbmFtZTogdGhpcy5uYW1lRGlzcGxheQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICByb290OiB0cnVlCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSA5OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgX2NvbnRleHQ1LnByZXYgPSA2OwogICAgICAgICAgICAgIF9jb250ZXh0NS50MCA9IF9jb250ZXh0NVsiY2F0Y2giXSgwKTsKICAgICAgICAgICAgICB0aGlzLiRkaXNwYXRjaCgnZ3Jvd2wvZnJvbUVycm9yJywgewogICAgICAgICAgICAgICAgdGl0bGU6IHRoaXMuJHJvb3RHZXR0ZXJzWydpMThuL3QnXSgnY2x1c3Rlci5zbmFwc2hvdC5lcnJvclRpdGxlJywgewogICAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLm5hbWVEaXNwbGF5CiAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgIGVycjogX2NvbnRleHQ1LnQwCiAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgcm9vdDogdHJ1ZQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTUsIHRoaXMsIFtbMCwgNl1dKTsKICAgICAgfSkpOwogICAgICBmdW5jdGlvbiBzbmFwc2hvdEFjdGlvbigpIHsKICAgICAgICByZXR1cm4gX3NuYXBzaG90QWN0aW9uLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KICAgICAgcmV0dXJuIHNuYXBzaG90QWN0aW9uOwogICAgfSgpCiAgfSwgewogICAga2V5OiAic25hcHNob3RCdWxrIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfc25hcHNob3RCdWxrID0gX2FzeW5jVG9HZW5lcmF0b3IoLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNihpdGVtcykgewogICAgICAgIHZhciByZXMsIHN1Y2Nlc3NmdWwsIGk7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNiQoX2NvbnRleHQ2KSB7CiAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDYucHJldiA9IF9jb250ZXh0Ni5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDI7CiAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsU2V0dGxlZChpdGVtcy5tYXAoZnVuY3Rpb24gKHJvdykgewogICAgICAgICAgICAgICAgcmV0dXJuIHJvdy50YWtlU25hcHNob3QoKTsKICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICByZXMgPSBfY29udGV4dDYuc2VudDsKICAgICAgICAgICAgICBzdWNjZXNzZnVsID0gcmVzLmZpbHRlcihmdW5jdGlvbiAoeCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHguc3RhdHVzID09PSAnZnVsZmlsbGVkJzsKICAgICAgICAgICAgICB9KS5sZW5ndGg7CiAgICAgICAgICAgICAgaWYgKHN1Y2Nlc3NmdWwpIHsKICAgICAgICAgICAgICAgIHRoaXMuJGRpc3BhdGNoKCdncm93bC9zdWNjZXNzJywgewogICAgICAgICAgICAgICAgICB0aXRsZTogdGhpcy4kcm9vdEdldHRlcnNbJ2kxOG4vdCddKCdjbHVzdGVyLnNuYXBzaG90LmJ1bGtTdWNjZXNzVGl0bGUnKSwKICAgICAgICAgICAgICAgICAgbWVzc2FnZTogdGhpcy4kcm9vdEdldHRlcnNbJ2kxOG4vdCddKCdjbHVzdGVyLnNuYXBzaG90LmJ1bGtTdWNjZXNzTWVzc2FnZScsIHsKICAgICAgICAgICAgICAgICAgICBjb3VudDogc3VjY2Vzc2Z1bAogICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICByb290OiB0cnVlCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IHJlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgaWYgKHJlc1tpXS5zdGF0dXMgIT09ICdmdWxmaWxsZWQnKSB7CiAgICAgICAgICAgICAgICAgIHRoaXMuJGRpc3BhdGNoKCdncm93bC9mcm9tRXJyb3InLCB7CiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHRoaXMuJHJvb3RHZXR0ZXJzWydpMThuL3QnXSgnY2x1c3Rlci5zbmFwc2hvdC5lcnJvclRpdGxlJywgewogICAgICAgICAgICAgICAgICAgICAgbmFtZTogaXRlbXNbaV0ubmFtZURpc3BsYXkKICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICBlcnI6IHJlc1tpXS52YWx1ZQogICAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgcm9vdDogdHJ1ZQogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNiwgdGhpcyk7CiAgICAgIH0pKTsKICAgICAgZnVuY3Rpb24gc25hcHNob3RCdWxrKF94KSB7CiAgICAgICAgcmV0dXJuIF9zbmFwc2hvdEJ1bGsuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQogICAgICByZXR1cm4gc25hcHNob3RCdWxrOwogICAgfSgpCiAgfSwgewogICAga2V5OiAidGFrZVNuYXBzaG90IiwKICAgIHZhbHVlOiBmdW5jdGlvbiB0YWtlU25hcHNob3QoKSB7CiAgICAgIGlmICh0aGlzLmlzUmtlMSkgewogICAgICAgIHJldHVybiB0aGlzLiRkaXNwYXRjaCgncmFuY2hlci9yZXF1ZXN0JywgewogICAgICAgICAgdXJsOiAiL3YzL2NsdXN0ZXJzLyIuY29uY2F0KGVzY2FwZSh0aGlzLm1nbXQuaWQpLCAiP2FjdGlvbj1iYWNrdXBFdGNkIiksCiAgICAgICAgICBtZXRob2Q6ICdwb3N0JwogICAgICAgIH0sIHsKICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgX3RoaXMkc3BlYzgsIF90aGlzJHNwZWM5OwogICAgICAgIHZhciBub3cgPSAoKF90aGlzJHNwZWM4ID0gdGhpcy5zcGVjKSA9PT0gbnVsbCB8fCBfdGhpcyRzcGVjOCA9PT0gdm9pZCAwIHx8IChfdGhpcyRzcGVjOCA9IF90aGlzJHNwZWM4LnJrZUNvbmZpZykgPT09IG51bGwgfHwgX3RoaXMkc3BlYzggPT09IHZvaWQgMCB8fCAoX3RoaXMkc3BlYzggPSBfdGhpcyRzcGVjOC5ldGNkU25hcHNob3RDcmVhdGUpID09PSBudWxsIHx8IF90aGlzJHNwZWM4ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRzcGVjOC5nZW5lcmF0aW9uKSB8fCAwOwogICAgICAgIHZhciBhcmdzID0gewogICAgICAgICAgZ2VuZXJhdGlvbjogbm93ICsgMQogICAgICAgIH07CiAgICAgICAgaWYgKChfdGhpcyRzcGVjOSA9IHRoaXMuc3BlYykgIT09IG51bGwgJiYgX3RoaXMkc3BlYzkgIT09IHZvaWQgMCAmJiAoX3RoaXMkc3BlYzkgPSBfdGhpcyRzcGVjOS5ya2VDb25maWcpICE9PSBudWxsICYmIF90aGlzJHNwZWM5ICE9PSB2b2lkIDAgJiYgKF90aGlzJHNwZWM5ID0gX3RoaXMkc3BlYzkuZXRjZCkgIT09IG51bGwgJiYgX3RoaXMkc3BlYzkgIT09IHZvaWQgMCAmJiBfdGhpcyRzcGVjOS5zMykgewogICAgICAgICAgYXJncy5zMyA9IHRoaXMuc3BlYy5ya2VDb25maWcuZXRjZC5zMzsKICAgICAgICB9CiAgICAgICAgc2V0KHRoaXMuc3BlYy5ya2VDb25maWcsICdldGNkU25hcHNob3RDcmVhdGUnLCBhcmdzKTsKICAgICAgICByZXR1cm4gdGhpcy5zYXZlKCk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJldGNkU25hcHNob3RzIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgX3RoaXM5ID0gdGhpczsKICAgICAgdmFyIGFsbFNuYXBzaG90cyA9IHRoaXMuJHJvb3RHZXR0ZXJzWydtYW5hZ2VtZW50L2FsbCddKHsKICAgICAgICB0eXBlOiBTTkFQU0hPVAogICAgICB9KTsKICAgICAgcmV0dXJuIGFsbFNuYXBzaG90cy5maWx0ZXIoZnVuY3Rpb24gKHMpIHsKICAgICAgICByZXR1cm4gcy5tZXRhZGF0YS5uYW1lc3BhY2UgPT09IF90aGlzOS5uYW1lc3BhY2UgJiYgcy5jbHVzdGVyTmFtZSA9PT0gX3RoaXM5Lm5hbWU7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogInJlc3RvcmVTbmFwc2hvdEFjdGlvbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVzdG9yZVNuYXBzaG90QWN0aW9uKCkgewogICAgICB2YXIgcmVzb3VyY2UgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHRoaXM7CiAgICAgIHRoaXMuJGRpc3BhdGNoKCdwcm9tcHRSZXN0b3JlJywgW3Jlc291cmNlXSk7CiAgICB9CiAgfSwgewogICAga2V5OiAic2F2ZUFzUktFVGVtcGxhdGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNhdmVBc1JLRVRlbXBsYXRlKCkgewogICAgICB2YXIgY2x1c3RlciA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogdGhpczsKICAgICAgdGhpcy4kZGlzcGF0Y2goJ3Byb21wdE1vZGFsJywgewogICAgICAgIGNvbXBvbmVudFByb3BzOiB7CiAgICAgICAgICBjbHVzdGVyOiBjbHVzdGVyCiAgICAgICAgfSwKICAgICAgICBjb21wb25lbnQ6ICdTYXZlQXNSS0VUZW1wbGF0ZURpYWxvZycKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAicm90YXRlQ2VydGlmaWNhdGVzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByb3RhdGVDZXJ0aWZpY2F0ZXMoKSB7CiAgICAgIHZhciBjbHVzdGVyID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB0aGlzOwogICAgICB0aGlzLiRkaXNwYXRjaCgncHJvbXB0TW9kYWwnLCB7CiAgICAgICAgY29tcG9uZW50UHJvcHM6IHsKICAgICAgICAgIGNsdXN0ZXI6IGNsdXN0ZXIKICAgICAgICB9LAogICAgICAgIGNvbXBvbmVudDogJ1JvdGF0ZUNlcnRpZmljYXRlc0RpYWxvZycKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAicm90YXRlRW5jcnlwdGlvbktleSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcm90YXRlRW5jcnlwdGlvbktleSgpIHsKICAgICAgdmFyIGNsdXN0ZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHRoaXM7CiAgICAgIHRoaXMuJGRpc3BhdGNoKCdwcm9tcHRNb2RhbCcsIHsKICAgICAgICBjb21wb25lbnRQcm9wczogewogICAgICAgICAgY2x1c3RlcjogY2x1c3RlcgogICAgICAgIH0sCiAgICAgICAgY29tcG9uZW50OiAnUm90YXRlRW5jcnlwdGlvbktleURpYWxvZycKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAic3RhdGVPYmoiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLl9zdGF0ZU9iajsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJya2VUZW1wbGF0ZSIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgdmFyIF90aGlzJG1nbXQkc3BlYzQsIF90ZW1wbGF0ZSRzcGVjLCBfcmV2aXNpb24kc3BlYzsKICAgICAgaWYgKCF0aGlzLmlzUmtlMSB8fCAhdGhpcy5tZ210KSB7CiAgICAgICAgLy8gTm90IGFuIFJLRSEgY2x1c3RlciBvciBubyBtYW5hZ2VtZW50IGNsdXN0ZXIgYXZhaWxhYmxlCiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIGlmICghKChfdGhpcyRtZ210JHNwZWM0ID0gdGhpcy5tZ210LnNwZWMpICE9PSBudWxsICYmIF90aGlzJG1nbXQkc3BlYzQgIT09IHZvaWQgMCAmJiBfdGhpcyRtZ210JHNwZWM0LmNsdXN0ZXJUZW1wbGF0ZVJldmlzaW9uTmFtZSkpIHsKICAgICAgICAvLyBDbHVzdGVyIGRvZXMgbm90IHVzZSBhbiBSS0UgdGVtcGxhdGUKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgdmFyIGNsdXN0ZXJUZW1wbGF0ZU5hbWUgPSB0aGlzLm1nbXQuc3BlYy5jbHVzdGVyVGVtcGxhdGVOYW1lLnJlcGxhY2UoJzonLCAnLycpOwogICAgICB2YXIgY2x1c3RlclRlbXBsYXRlUmV2aXNpb25OYW1lID0gdGhpcy5tZ210LnNwZWMuY2x1c3RlclRlbXBsYXRlUmV2aXNpb25OYW1lLnJlcGxhY2UoJzonLCAnLycpOwogICAgICB2YXIgdGVtcGxhdGUgPSB0aGlzLiRyb290R2V0dGVyc1snbWFuYWdlbWVudC9hbGwnXShNQU5BR0VNRU5ULlJLRV9URU1QTEFURSkuZmluZChmdW5jdGlvbiAodCkgewogICAgICAgIHJldHVybiB0LmlkID09PSBjbHVzdGVyVGVtcGxhdGVOYW1lOwogICAgICB9KTsKICAgICAgdmFyIHJldmlzaW9uID0gdGhpcy4kcm9vdEdldHRlcnNbJ21hbmFnZW1lbnQvYWxsJ10oTUFOQUdFTUVOVC5SS0VfVEVNUExBVEVfUkVWSVNJT04pLmZpbmQoZnVuY3Rpb24gKHQpIHsKICAgICAgICByZXR1cm4gdC5zcGVjLmVuYWJsZWQgJiYgdC5pZCA9PT0gY2x1c3RlclRlbXBsYXRlUmV2aXNpb25OYW1lOwogICAgICB9KTsKICAgICAgaWYgKCF0ZW1wbGF0ZSB8fCAhcmV2aXNpb24pIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgcmV0dXJuIHsKICAgICAgICBkaXNwbGF5TmFtZTogIiIuY29uY2F0KChfdGVtcGxhdGUkc3BlYyA9IHRlbXBsYXRlLnNwZWMpID09PSBudWxsIHx8IF90ZW1wbGF0ZSRzcGVjID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGVtcGxhdGUkc3BlYy5kaXNwbGF5TmFtZSwgIi8iKS5jb25jYXQoKF9yZXZpc2lvbiRzcGVjID0gcmV2aXNpb24uc3BlYykgPT09IG51bGwgfHwgX3JldmlzaW9uJHNwZWMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9yZXZpc2lvbiRzcGVjLmRpc3BsYXlOYW1lKSwKICAgICAgICB1cGdyYWRlOiB0aGlzLnJrZVRlbXBsYXRlVXBncmFkZSwKICAgICAgICB0ZW1wbGF0ZTogdGVtcGxhdGUsCiAgICAgICAgcmV2aXNpb246IHJldmlzaW9uCiAgICAgIH07CiAgICB9CiAgfSwgewogICAga2V5OiAicmtlVGVtcGxhdGVVcGdyYWRlIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgX3RoaXMkbWdtdCRzcGVjNSwKICAgICAgICBfdGhpczEwID0gdGhpcywKICAgICAgICBfcmV2aXNpb25zJDAkc3BlYzsKICAgICAgaWYgKCF0aGlzLmlzUmtlMSB8fCAhdGhpcy5tZ210KSB7CiAgICAgICAgLy8gTm90IGFuIFJLRSEgY2x1c3RlciBvciBubyBtYW5hZ2VtZW50IGNsdXN0ZXIgYXZhaWxhYmxlCiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIGlmICghKChfdGhpcyRtZ210JHNwZWM1ID0gdGhpcy5tZ210LnNwZWMpICE9PSBudWxsICYmIF90aGlzJG1nbXQkc3BlYzUgIT09IHZvaWQgMCAmJiBfdGhpcyRtZ210JHNwZWM1LmNsdXN0ZXJUZW1wbGF0ZVJldmlzaW9uTmFtZSkpIHsKICAgICAgICAvLyBDbHVzdGVyIGRvZXMgbm90IHVzZSBhbiBSS0UgdGVtcGxhdGUKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgdmFyIGNsdXN0ZXJUZW1wbGF0ZVJldmlzaW9uTmFtZSA9IHRoaXMubWdtdC5zcGVjLmNsdXN0ZXJUZW1wbGF0ZVJldmlzaW9uTmFtZS5yZXBsYWNlKCc6JywgJy8nKTsKCiAgICAgIC8vIEdldCBhbGwgb2YgdGhlIHRlbXBsYXRlIHJldmlzaW9ucyBmb3IgdGhpcyB0ZW1wbGF0ZQogICAgICB2YXIgcmV2aXNpb25zID0gdGhpcy4kcm9vdEdldHRlcnNbJ21hbmFnZW1lbnQvYWxsJ10oTUFOQUdFTUVOVC5SS0VfVEVNUExBVEVfUkVWSVNJT04pLmZpbHRlcihmdW5jdGlvbiAodCkgewogICAgICAgIHJldHVybiB0LnNwZWMuZW5hYmxlZCAmJiB0LnNwZWMuY2x1c3RlclRlbXBsYXRlTmFtZSA9PT0gX3RoaXMxMC5tZ210LnNwZWMuY2x1c3RlclRlbXBsYXRlTmFtZTsKICAgICAgfSk7CiAgICAgIGlmIChyZXZpc2lvbnMubGVuZ3RoIDw9IDEpIHsKICAgICAgICAvLyBPbmx5IG9uZSB0ZW1wbGF0ZSByZXZpc2lvbgogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICByZXZpc2lvbnMuc29ydChmdW5jdGlvbiAoYSwgYikgewogICAgICAgIHJldHVybiBwYXJzZUludChhLm1ldGFkYXRhLnJlc291cmNlVmVyc2lvbiwgMTApIC0gcGFyc2VJbnQoYi5tZXRhZGF0YS5yZXNvdXJjZVZlcnNpb24sIDEwKTsKICAgICAgfSkucmV2ZXJzZSgpOwogICAgICByZXR1cm4gcmV2aXNpb25zWzBdLmlkICE9PSBjbHVzdGVyVGVtcGxhdGVSZXZpc2lvbk5hbWUgPyAoX3JldmlzaW9ucyQwJHNwZWMgPSByZXZpc2lvbnNbMF0uc3BlYykgPT09IG51bGwgfHwgX3JldmlzaW9ucyQwJHNwZWMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9yZXZpc2lvbnMkMCRzcGVjLmRpc3BsYXlOYW1lIDogZmFsc2U7CiAgICB9CiAgfSwgewogICAga2V5OiAiX3N0YXRlT2JqIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgX3RoaXMkbWV0YWRhdGEzOwogICAgICBpZiAoIXRoaXMuaXNSa2UyKSB7CiAgICAgICAgdmFyIF90aGlzJG1nbXQzNiwgX3RoaXMkbWV0YWRhdGEyOwogICAgICAgIHJldHVybiAoKF90aGlzJG1nbXQzNiA9IHRoaXMubWdtdCkgPT09IG51bGwgfHwgX3RoaXMkbWdtdDM2ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRtZ210MzYuc3RhdGVPYmopIHx8ICgoX3RoaXMkbWV0YWRhdGEyID0gdGhpcy5tZXRhZGF0YSkgPT09IG51bGwgfHwgX3RoaXMkbWV0YWRhdGEyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRtZXRhZGF0YTIuc3RhdGUpOwogICAgICB9CiAgICAgIHJldHVybiAoX3RoaXMkbWV0YWRhdGEzID0gdGhpcy5tZXRhZGF0YSkgPT09IG51bGwgfHwgX3RoaXMkbWV0YWRhdGEzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRtZXRhZGF0YTMuc3RhdGU7CiAgICB9CiAgfSwgewogICAga2V5OiAic3VwcG9ydHNXaW5kb3dzIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgX3RoaXMkc3BlYzEwOwogICAgICBpZiAodGhpcy5pc0szcyB8fCB0aGlzLmlzSW1wb3J0ZWRLM3MpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgaWYgKHRoaXMuaXNSa2UxKSB7CiAgICAgICAgdmFyIF90aGlzJG1nbXQzNzsKICAgICAgICByZXR1cm4gKChfdGhpcyRtZ210MzcgPSB0aGlzLm1nbXQpID09PSBudWxsIHx8IF90aGlzJG1nbXQzNyA9PT0gdm9pZCAwIHx8IChfdGhpcyRtZ210MzcgPSBfdGhpcyRtZ210Mzcuc3BlYykgPT09IG51bGwgfHwgX3RoaXMkbWdtdDM3ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRtZ210Mzcud2luZG93c1ByZWZlcmVkQ2x1c3RlcikgfHwgZmFsc2U7CiAgICAgIH0KICAgICAgaWYgKCF0aGlzLmlzUmtlMikgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICBpZiAoIXRoaXMua3ViZXJuZXRlc1ZlcnNpb24gfHwgY29tcGFyZSh0aGlzLmt1YmVybmV0ZXNWZXJzaW9uLCAndjEuMjEuMCcpIDwgMCkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICB2YXIgY25pID0gKF90aGlzJHNwZWMxMCA9IHRoaXMuc3BlYykgPT09IG51bGwgfHwgX3RoaXMkc3BlYzEwID09PSB2b2lkIDAgfHwgKF90aGlzJHNwZWMxMCA9IF90aGlzJHNwZWMxMC5ya2VDb25maWcpID09PSBudWxsIHx8IF90aGlzJHNwZWMxMCA9PT0gdm9pZCAwIHx8IChfdGhpcyRzcGVjMTAgPSBfdGhpcyRzcGVjMTAubWFjaGluZUdsb2JhbENvbmZpZykgPT09IG51bGwgfHwgX3RoaXMkc3BlYzEwID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRzcGVjMTAuY25pOwogICAgICBpZiAoY25pICYmIGNuaSAhPT0gJ2NhbGljbycpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgfSwgewogICAga2V5OiAiY3VzdG9tVmFsaWRhdGlvblJ1bGVzIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gW3sKICAgICAgICBwYXRoOiAnbWV0YWRhdGEubmFtZScsCiAgICAgICAgdHJhbnNsYXRpb25LZXk6ICdjbHVzdGVyLm5hbWUubGFiZWwnLAogICAgICAgIHZhbGlkYXRvcnM6IFsiY2x1c3Rlck5hbWU6Ii5jb25jYXQodGhpcy5pc1JrZTIpXSwKICAgICAgICBtYXhMZW5ndGg6IDYzCiAgICAgIH1dOwogICAgfQogIH0sIHsKICAgIGtleTogImFnZW50Q29uZmlnIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgX3RoaXMkc3BlYyRya2VDb25maWckOwogICAgICAvLyBUaGUgb25lIHdlIHdhbnQgaXMgdGhlIGZpcnN0IG9uZSB3aXRoIG5vIHNlbGVjdG9yLgogICAgICAvLyBJZiB0aGVyZSBhcmUgbXVsdGlwbGUgd2l0aCBubyBzZWxlY3RvciwgdGhhdCB3aWxsIGZhbGwgdW5kZXIgdGhlIHVuc3VwcG9ydGVkIG1lc3NhZ2UgYmVsb3cuCiAgICAgIHJldHVybiAoX3RoaXMkc3BlYyRya2VDb25maWckID0gdGhpcy5zcGVjLnJrZUNvbmZpZy5tYWNoaW5lU2VsZWN0b3JDb25maWcuZmluZChmdW5jdGlvbiAoeCkgewogICAgICAgIHJldHVybiAheC5tYWNoaW5lTGFiZWxTZWxlY3RvcjsKICAgICAgfSkpID09PSBudWxsIHx8IF90aGlzJHNwZWMkcmtlQ29uZmlnJCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkc3BlYyRya2VDb25maWckLmNvbmZpZzsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjbG91ZFByb3ZpZGVyIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgX3RoaXMkYWdlbnRDb25maWc7CiAgICAgIHJldHVybiAoX3RoaXMkYWdlbnRDb25maWcgPSB0aGlzLmFnZW50Q29uZmlnKSA9PT0gbnVsbCB8fCBfdGhpcyRhZ2VudENvbmZpZyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkYWdlbnRDb25maWdbJ2Nsb3VkLXByb3ZpZGVyLW5hbWUnXTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjYW5DbG9uZSIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogIH0sIHsKICAgIGtleTogInJlbW92ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3JlbW92ZSA9IF9hc3luY1RvR2VuZXJhdG9yKC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTcoKSB7CiAgICAgICAgdmFyIF90aGlzJHNwZWMxMSwgX3Bvb2wkbWFjaGluZUNvbmZpZ1JlOwogICAgICAgIHZhciBvcHQsCiAgICAgICAgICByZXMsCiAgICAgICAgICBwb29sLAogICAgICAgICAgY2xvdWRDcmVkZW50aWFsU2VjcmV0TmFtZSwKICAgICAgICAgIGNyZWRlbnRpYWwsCiAgICAgICAgICBoYXJ2ZXN0ZXJDbHVzdGVySWQsCiAgICAgICAgICBfcG9vbCRtYWNoaW5lQ29uZmlnUmUyLAogICAgICAgICAgX3Bvb2wkbWFjaGluZUNvbmZpZ1JlMywKICAgICAgICAgIHBvb2xDb25maWcsCiAgICAgICAgICBfYXJnczcgPSBhcmd1bWVudHM7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNyQoX2NvbnRleHQ3KSB7CiAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDcucHJldiA9IF9jb250ZXh0Ny5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBvcHQgPSBfYXJnczcubGVuZ3RoID4gMCAmJiBfYXJnczdbMF0gIT09IHVuZGVmaW5lZCA/IF9hcmdzN1swXSA6IHt9OwogICAgICAgICAgICAgIGlmICghb3B0LnVybCkgewogICAgICAgICAgICAgICAgb3B0LnVybCA9ICh0aGlzLmxpbmtzIHx8IHt9KVsnc2VsZiddOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBvcHQubWV0aG9kID0gJ2RlbGV0ZSc7CiAgICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSA1OwogICAgICAgICAgICAgIHJldHVybiB0aGlzLiRkaXNwYXRjaCgncmVxdWVzdCcsIG9wdCk7CiAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICByZXMgPSBfY29udGV4dDcuc2VudDsKICAgICAgICAgICAgICBwb29sID0gKCgoX3RoaXMkc3BlYzExID0gdGhpcy5zcGVjKSA9PT0gbnVsbCB8fCBfdGhpcyRzcGVjMTEgPT09IHZvaWQgMCB8fCAoX3RoaXMkc3BlYzExID0gX3RoaXMkc3BlYzExLnJrZUNvbmZpZykgPT09IG51bGwgfHwgX3RoaXMkc3BlYzExID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRzcGVjMTEubWFjaGluZVBvb2xzKSB8fCBbXSlbMF07CiAgICAgICAgICAgICAgaWYgKCEoKHBvb2wgPT09IG51bGwgfHwgcG9vbCA9PT0gdm9pZCAwIHx8IChfcG9vbCRtYWNoaW5lQ29uZmlnUmUgPSBwb29sLm1hY2hpbmVDb25maWdSZWYpID09PSBudWxsIHx8IF9wb29sJG1hY2hpbmVDb25maWdSZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3Bvb2wkbWFjaGluZUNvbmZpZ1JlLmtpbmQpID09PSAnSGFydmVzdGVyQ29uZmlnJykpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gMjU7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgY2xvdWRDcmVkZW50aWFsU2VjcmV0TmFtZSA9IHRoaXMuc3BlYy5jbG91ZENyZWRlbnRpYWxTZWNyZXROYW1lOwogICAgICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJGRpc3BhdGNoKCdyYW5jaGVyL2ZpbmRBbGwnLCB7CiAgICAgICAgICAgICAgICB0eXBlOiBOT1JNQU4uQ0xPVURfQ1JFREVOVElBTAogICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICBjcmVkZW50aWFsID0gdGhpcy4kcm9vdEdldHRlcnNbJ3JhbmNoZXIvYnlJZCddKE5PUk1BTi5DTE9VRF9DUkVERU5USUFMLCBjbG91ZENyZWRlbnRpYWxTZWNyZXROYW1lKTsKICAgICAgICAgICAgICBpZiAoIWNyZWRlbnRpYWwpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gMjU7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaGFydmVzdGVyQ2x1c3RlcklkID0gZ2V0KGNyZWRlbnRpYWwsICdkZWNvZGVkRGF0YS5jbHVzdGVySWQnKTsKICAgICAgICAgICAgICBfY29udGV4dDcucHJldiA9IDE0OwogICAgICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gMTc7CiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJGRpc3BhdGNoKCdtYW5hZ2VtZW50L2ZpbmQnLCB7CiAgICAgICAgICAgICAgICB0eXBlOiAiIi5jb25jYXQoQ0FQSS5NQUNISU5FX0NPTkZJR19HUk9VUCwgIi4iKS5jb25jYXQoKChwb29sID09PSBudWxsIHx8IHBvb2wgPT09IHZvaWQgMCB8fCAoX3Bvb2wkbWFjaGluZUNvbmZpZ1JlMiA9IHBvb2wubWFjaGluZUNvbmZpZ1JlZikgPT09IG51bGwgfHwgX3Bvb2wkbWFjaGluZUNvbmZpZ1JlMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3Bvb2wkbWFjaGluZUNvbmZpZ1JlMi5raW5kKSB8fCAnJykudG9Mb3dlckNhc2UoKSksCiAgICAgICAgICAgICAgICBpZDogIiIuY29uY2F0KHRoaXMubWV0YWRhdGEubmFtZXNwYWNlLCAiLyIpLmNvbmNhdChwb29sID09PSBudWxsIHx8IHBvb2wgPT09IHZvaWQgMCB8fCAoX3Bvb2wkbWFjaGluZUNvbmZpZ1JlMyA9IHBvb2wubWFjaGluZUNvbmZpZ1JlZikgPT09IG51bGwgfHwgX3Bvb2wkbWFjaGluZUNvbmZpZ1JlMyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3Bvb2wkbWFjaGluZUNvbmZpZ1JlMy5uYW1lKQogICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgY2FzZSAxNzoKICAgICAgICAgICAgICBwb29sQ29uZmlnID0gX2NvbnRleHQ3LnNlbnQ7CiAgICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSAyMDsKICAgICAgICAgICAgICByZXR1cm4gdGhpcy4kZGlzcGF0Y2goJ21hbmFnZW1lbnQvcmVxdWVzdCcsIHsKICAgICAgICAgICAgICAgIHVybDogIi9rOHMvY2x1c3RlcnMvIi5jb25jYXQoaGFydmVzdGVyQ2x1c3RlcklkLCAiL3YxL2hhcnZlc3Rlci9zZXJ2aWNlYWNjb3VudHMvIikuY29uY2F0KHBvb2xDb25maWcudm1OYW1lc3BhY2UsICIvIikuY29uY2F0KHRoaXMubWV0YWRhdGEubmFtZSksCiAgICAgICAgICAgICAgICBtZXRob2Q6ICdERUxFVEUnCiAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgcm9vdDogdHJ1ZQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjYXNlIDIwOgogICAgICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gMjU7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMjI6CiAgICAgICAgICAgICAgX2NvbnRleHQ3LnByZXYgPSAyMjsKICAgICAgICAgICAgICBfY29udGV4dDcudDAgPSBfY29udGV4dDdbImNhdGNoIl0oMTQpOwogICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoX2NvbnRleHQ3LnQwKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1jb25zb2xlCiAgICAgICAgICAgIGNhc2UgMjU6CiAgICAgICAgICAgICAgaWYgKCEoKHJlcyA9PT0gbnVsbCB8fCByZXMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcy5fc3RhdHVzKSA9PT0gMjA0KSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSAyODsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDI4OwogICAgICAgICAgICAgIHJldHVybiB0aGlzLiRkaXNwYXRjaCgnd3MucmVzb3VyY2UucmVtb3ZlJywgewogICAgICAgICAgICAgICAgZGF0YTogdGhpcwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjYXNlIDI4OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDcuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU3LCB0aGlzLCBbWzE0LCAyMl1dKTsKICAgICAgfSkpOwogICAgICBmdW5jdGlvbiByZW1vdmUoKSB7CiAgICAgICAgcmV0dXJuIF9yZW1vdmUuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQogICAgICByZXR1cm4gcmVtb3ZlOwogICAgfSgpCiAgfSwgewogICAga2V5OiAiaGFzRXJyb3IiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHZhciBfdGhpcyRzdGF0dXM1LCBfdGhpcyRzdGF0dXM2OwogICAgICAvLyBCZWZvcmUgd2Ugd2VyZSBqdXN0IGNoZWNraW5nIGZvciB0aGlzLnN0YXR1cz8uY29uZGl0aW9ucz8uc29tZSgoY29uZGl0aW9uKSA9PiBjb25kaXRpb24uZXJyb3IgPT09IHRydWUpCiAgICAgIC8vIGJ1dCB0aGlzIGlzIHdyb25nIGFzIGFuIGVycm9yIG1pZ2h0IGV4aXN0IGJ1dCBpdCBtaWdodCBub3QgYmUgbWVhbmluZ2Z1bCBpbiB0aGUgY29udGV4dCBvZiByZWFkaW5lc3Mgb2YgYSBjbHVzdGVyCiAgICAgIC8vIHdoaWNoIGlzIHdoYXQgdGhpcyAnaGFzRXJyb3InIGlzIHVzZWQgZm9yLgogICAgICAvLyBXZSBub3cgY2hlY2sgaWYgdGhlcmUncyBhIHJlYWR5IGNvbmRpdGlvbiBhZnRlciBhbiBlcnJvciwgd2hpY2ggaGVscHMgZGljdGF0ZSB0aGUgcmVhZGluZXNzIG9mIGEgY2x1c3RlcgogICAgICAvLyBCYXNlZCBvbiB0aGUgZmluZGluZ3MgaW4gaHR0cHM6Ly9naXRodWIuY29tL3JhbmNoZXIvZGFzaGJvYXJkL2lzc3Vlcy8xMDA0MwogICAgICBpZiAoKF90aGlzJHN0YXR1czUgPSB0aGlzLnN0YXR1cykgIT09IG51bGwgJiYgX3RoaXMkc3RhdHVzNSAhPT0gdm9pZCAwICYmIF90aGlzJHN0YXR1czUuY29uZGl0aW9ucyAmJiAoX3RoaXMkc3RhdHVzNiA9IHRoaXMuc3RhdHVzKSAhPT0gbnVsbCAmJiBfdGhpcyRzdGF0dXM2ICE9PSB2b2lkIDAgJiYgX3RoaXMkc3RhdHVzNi5jb25kaXRpb25zLmxlbmd0aCkgewogICAgICAgIHZhciBfdGhpcyRzdGF0dXM3OwogICAgICAgIC8vIGlmIHRoZXJlIGFyZSBlcnJvcnMsIHdlIGNvbXBhcmUgd2l0aCBob3cgcmVjZW50IHRoZSAiUmVhZHkiIGNvbmRpdGlvbiBpcyBjb21wYXJlZCB0byB0aGF0IGVycm9yLCBvdGhlcndpc2Ugd2UganVzdCBtb3ZlIG9uCiAgICAgICAgaWYgKChfdGhpcyRzdGF0dXM3ID0gdGhpcy5zdGF0dXMpICE9PSBudWxsICYmIF90aGlzJHN0YXR1czcgIT09IHZvaWQgMCAmJiBfdGhpcyRzdGF0dXM3LmNvbmRpdGlvbnMuc29tZShmdW5jdGlvbiAoYykgewogICAgICAgICAgcmV0dXJuIGMuZXJyb3IgPT09IHRydWU7CiAgICAgICAgfSkpIHsKICAgICAgICAgIHZhciBfdGhpcyRzdGF0dXM4LCBfdGhpcyRzdGF0dXM5OwogICAgICAgICAgLy8gdGhlcmUncyBubyByZWFkeSBjb25kaXRpb24gYW5kIGhhcyBhbiBlcnJvciwgbWFyayBpdAogICAgICAgICAgaWYgKCEoKF90aGlzJHN0YXR1czggPSB0aGlzLnN0YXR1cykgIT09IG51bGwgJiYgX3RoaXMkc3RhdHVzOCAhPT0gdm9pZCAwICYmIF90aGlzJHN0YXR1czguY29uZGl0aW9ucy5zb21lKGZ1bmN0aW9uIChjKSB7CiAgICAgICAgICAgIHJldHVybiBjLnR5cGUgPT09ICdSZWFkeSc7CiAgICAgICAgICB9KSkpIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICB9CiAgICAgICAgICB2YXIgZmlsdGVyZWRDb25kaXRpb25zID0gKF90aGlzJHN0YXR1czkgPSB0aGlzLnN0YXR1cykgPT09IG51bGwgfHwgX3RoaXMkc3RhdHVzOSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkc3RhdHVzOS5jb25kaXRpb25zLmZpbHRlcihmdW5jdGlvbiAoYykgewogICAgICAgICAgICByZXR1cm4gYy5lcnJvciA9PT0gdHJ1ZSB8fCBjLnR5cGUgPT09ICdSZWFkeSc7CiAgICAgICAgICB9KTsKICAgICAgICAgIHZhciBtb3N0UmVjZW50Q29uZGl0aW9uID0gZmlsdGVyZWRDb25kaXRpb25zLnJlZHVjZShmdW5jdGlvbiAoYSwgYikgewogICAgICAgICAgICByZXR1cm4gYS5sYXN0VXBkYXRlVGltZSA+IGIubGFzdFVwZGF0ZVRpbWUgPyBhIDogYjsKICAgICAgICAgIH0pOwogICAgICAgICAgcmV0dXJuIG1vc3RSZWNlbnRDb25kaXRpb24uZXJyb3I7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJuYW1lc3BhY2VMb2NhdGlvbiIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgdmFyIGxvY2FsQ2x1c3RlciA9IHRoaXMuJHJvb3RHZXR0ZXJzWydtYW5hZ2VtZW50L2J5SWQnXShNQU5BR0VNRU5ULkNMVVNURVIsIExPQ0FMX0NMVVNURVIpOwogICAgICBpZiAobG9jYWxDbHVzdGVyKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIG5hbWU6ICdjLWNsdXN0ZXItcHJvZHVjdC1yZXNvdXJjZS1pZCcsCiAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgY2x1c3RlcjogbG9jYWxDbHVzdGVyLmlkLAogICAgICAgICAgICBwcm9kdWN0OiB0aGlzLiRyb290R2V0dGVyc1sncHJvZHVjdElkJ10sCiAgICAgICAgICAgIHJlc291cmNlOiBOQU1FU1BBQ0UsCiAgICAgICAgICAgIGlkOiB0aGlzLm5hbWVzcGFjZQogICAgICAgICAgfQogICAgICAgIH07CiAgICAgIH0KICAgICAgcmV0dXJuIG51bGw7CiAgICB9CgogICAgLy8gSlNPTiBQYXRocyB0aGF0IHNob3VsZCBiZSBmb2xkZWQgaW4gdGhlIFlBTUwgZWRpdG9yIGJ5IGRlZmF1bHQKICB9LCB7CiAgICBrZXk6ICJ5YW1sRm9sZGluZyIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIFsnc3BlYy5ya2VDb25maWcubWFjaGluZVBvb2xzLmR5bmFtaWNTY2hlbWFTcGVjJ107CiAgICB9CiAgfV0pOwp9KFN0ZXZlTW9kZWwpOwpleHBvcnQgeyBQcm92Q2x1c3RlciBhcyBkZWZhdWx0IH07"},{"version":3,"names":["CAPI","MANAGEMENT","NAMESPACE","NORMAN","SNAPSHOT","HCI","LOCAL_CLUSTER","SteveModel","findBy","get","set","sortBy","ucFirst","compare","AS","MODE","_VIEW","_YAML","HARVESTER_NAME","HARVESTER","CAPI_ANNOTATIONS","NODE_ARCHITECTURE","capitalize","ProvCluster","_SteveModel","_classCallCheck","_callSuper","arguments","_inherits","_createClass","key","out","label","t","content","provisionerDisplay","machineProvider","machineProviderDisplay","kubernetesVersion","pools","length","desired","filter","x","rkeTemplate","push","formatter","splice","_this$metadata","_this$mgmt","provCreationTimestamp","Date","parse","metadata","creationTimestamp","mgmtCreationTimestamp","mgmt","_this$mgmt2","_superPropGet","_this$mgmt3","canExplore","isReady","hasError","action","$rootGetters","enabled","_this$mgmt4","_this$mgmt5","_this$mgmt6","_clusterTemplatesSche","_clusterTemplatesSche2","_this$normanCluster","_this$mgmt7","_this$mgmt8","_this$mgmt9","_this$mgmt10","_this$mgmt11","_this$mgmt12","_this$mgmt13","isLocal","remove","findIndex","a","ready","canEditRKE2cluster","isRke2","canUpdate","canSnapshot","isRke1","hasAction","clusterTemplatesSchema","$getters","canUpdateClusterTemplate","resourceMethods","includes","normanClusterSaveTemplateAction","normanCluster","actions","saveAsTemplate","canSaveRKETemplate","status","driver","spec","clusterTemplateName","hasLink","icon","links","shell","bulkAction","bulkable","divider","concat","_this$status","name","clusterName","CLUSTER","value","_findNormanCluster","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_this$status2","wrap","_callee$","_context","prev","next","abrupt","$dispatch","type","id","root","sent","stop","findNormanCluster","apply","explore","location","params","cluster","currentRouter","_goToHarvesterCluster","_callee2","harvesterCluster","_callee2$","_context2","_objectSpread","goToCluster","t0","goToHarvesterCluster","goToViewYaml","_this$mgmt14","detailLocation","query","_defineProperty","stateObj","providers","provisioner","_this$mgmt$spec","_this$mgmt$spec2","_this$mgmt$spec3","isHostedKubernetesProvider","toLowerCase","gkeConfig","privateClusterConfig","enablePrivateEndpoint","eksConfig","privateAccess","aksConfig","privateCluster","_this$mgmt15","_this$mgmt16","_this$mgmt17","_this$mgmt18","_this$mgmt19","_this$mgmt20","isImportedProvisioner","isImportedSpecialCases","providerForEmberParam","imported","_this$spec","rkeConfig","machinePools","_this$pools","isImported","isK3s","_this$mgmt21","provider","startsWith","_this$mgmt22","_this$mgmt23","_this$spec2","_this$spec3","_this$mgmt24","rancherKubernetesEngineConfig","labels","_this$mgmt25","isHarvester","_this$mgmt26","_this$id","replace","namespace","_this$status3","_this$mgmt27","_this$mgmt28","nodeGroups","waitForProvisioner","timeout","interval","_this","waitForTestFn","waitForMgmt","_this2","undefined","_this2$status","_pCluster$status","pCluster","RANCHER_CLUSTER","allKeys","Object","keys","configKey","find","k","endsWith","_this$spec4","isImportedK3s","isImportedRke2","_this$mgmt29","providerLogo","_this$nodes","_this3","obj","nodes","forEach","node","_node$metadata","state","transitioning","_node$status","architecture","nodeLabels","_this4","nodesArchitecture","tooltip","reduce","acc","unknown","_this$status4","_this$spec5","fromStatus","version","gitVersion","fromSpec","_this$annotations","_this$mgmt30","fromAnnotation","annotations","UI_CUSTOM_PROVIDER","_this$spec6","kind","machineConfigRef","_this$spec$rkeConfig","machinePoolDefaults","_this$spec$rkeConfig2","hostnameLengthLimit","removeDefaultHostnameLengthLimit","_this$machinePoolDefa","_this$spec7","_this5","NODE","mgmtClusterId","_this6","MACHINE","machine","_machine$metadata","_machine$spec","displayName","_this7","deployments","MACHINE_DEPLOYMENT","pool","_pool$spec","NODE_POOL","_this7$status","pending","outdated","unavailable","_this8","names","conditions","c","error","map","nodeName","join","machines","_machine$status","_machine$status2","nodeRef","color","textColor","sort","_getOrCreateToken","_callee3","tokens","token","_callee3$","_context3","CLUSTER_TOKEN","force","update","clusterId","save","getOrCreateToken","openShell","_this$mgmt31","generateKubeConfig","_this$mgmt32","_copyKubeConfig","_callee4","_this$mgmt33","_callee4$","_context4","copyKubeConfig","title","downloadKubeConfig","_this$mgmt34","downloadKubeConfigBulk","items","_this$mgmt35","_snapshotAction","_callee5","_callee5$","_context5","takeSnapshot","nameDisplay","message","err","snapshotAction","_snapshotBulk","_callee6","res","successful","i","_callee6$","_context6","Promise","allSettled","row","count","snapshotBulk","_x","url","escape","method","_this$spec8","_this$spec9","now","etcdSnapshotCreate","generation","args","etcd","s3","_this9","allSnapshots","s","restoreSnapshotAction","resource","saveAsRKETemplate","componentProps","component","rotateCertificates","rotateEncryptionKey","_stateObj","_this$mgmt$spec4","_template$spec","_revision$spec","clusterTemplateRevisionName","template","RKE_TEMPLATE","revision","RKE_TEMPLATE_REVISION","upgrade","rkeTemplateUpgrade","_this$mgmt$spec5","_this10","_revisions$0$spec","revisions","b","parseInt","resourceVersion","reverse","_this$metadata3","_this$mgmt36","_this$metadata2","_this$spec10","_this$mgmt37","windowsPreferedCluster","cni","machineGlobalConfig","path","translationKey","validators","maxLength","_this$spec$rkeConfig$","machineSelectorConfig","machineLabelSelector","config","_this$agentConfig","agentConfig","_remove","_callee7","_this$spec11","_pool$machineConfigRe","opt","cloudCredentialSecretName","credential","harvesterClusterId","_pool$machineConfigRe2","_pool$machineConfigRe3","poolConfig","_args7","_callee7$","_context7","CLOUD_CREDENTIAL","MACHINE_CONFIG_GROUP","vmNamespace","console","_status","data","_this$status5","_this$status6","_this$status7","some","_this$status8","_this$status9","filteredConditions","mostRecentCondition","lastUpdateTime","localCluster","product","default"],"sources":["/home/ubuntu/suseconf/node_modules/@rancher/shell/models/provisioning.cattle.io.cluster.js"],"sourcesContent":["import {\n  CAPI, MANAGEMENT, NAMESPACE, NORMAN, SNAPSHOT, HCI, LOCAL_CLUSTER\n} from '@shell/config/types';\nimport SteveModel from '@shell/plugins/steve/steve-class';\nimport { findBy } from '@shell/utils/array';\nimport { get, set } from '@shell/utils/object';\nimport { sortBy } from '@shell/utils/sort';\nimport { ucFirst } from '@shell/utils/string';\nimport { compare } from '@shell/utils/version';\nimport { AS, MODE, _VIEW, _YAML } from '@shell/config/query-params';\nimport { HARVESTER_NAME as HARVESTER } from '@shell/config/features';\nimport { CAPI as CAPI_ANNOTATIONS, NODE_ARCHITECTURE } from '@shell/config/labels-annotations';\nimport capitalize from 'lodash/capitalize';\n\n/**\n * Class representing Cluster resource.\n * @extends SteveModel\n */\nexport default class ProvCluster extends SteveModel {\n  get details() {\n    const out = [\n      {\n        label:   this.t('cluster.detail.provisioner'),\n        content: this.provisionerDisplay || this.t('generic.none'),\n      },\n      {\n        label:   this.t('cluster.detail.machineProvider'),\n        content: this.machineProvider ? this.machineProviderDisplay : null,\n      },\n      {\n        label:   this.t('cluster.detail.kubernetesVersion'),\n        content: this.kubernetesVersion,\n      },\n      {\n        label:   this.t('cluster.detail.machinePools'),\n        content: this.pools.length,\n      },\n      {\n        label:   this.t('cluster.detail.machines'),\n        content: this.desired,\n      },\n    ].filter((x) => !!x.content);\n\n    // RKE Template details\n    const rkeTemplate = this.rkeTemplate;\n\n    if (rkeTemplate) {\n      out.push({\n        label:     this.t('cluster.detail.rkeTemplate'),\n        formatter: 'RKETemplateName',\n        content:   rkeTemplate,\n      });\n    }\n\n    if (!this.machineProvider) {\n      out.splice(1, 1);\n\n      return out;\n    }\n\n    return out;\n  }\n\n  // using this computed because on the provisioning cluster we are\n  // displaying the oldest age between provisioning.cluster and management.cluster\n  // so that on a version upgrade of Rancher (ex: 2.5.x to 2.6.x)\n  // we can have the correct age of the cluster displayed on the UI side\n  get creationTimestamp() {\n    const provCreationTimestamp = Date.parse(this.metadata?.creationTimestamp);\n    const mgmtCreationTimestamp = Date.parse(this.mgmt?.metadata?.creationTimestamp);\n\n    if (mgmtCreationTimestamp && mgmtCreationTimestamp < provCreationTimestamp) {\n      return this.mgmt?.metadata?.creationTimestamp;\n    }\n\n    return super.creationTimestamp;\n  }\n\n  // Models can specify a single action that will be shown as a button in the details masthead\n  get detailsAction() {\n    const canExplore = this.mgmt?.isReady && !this.hasError;\n\n    return {\n      action:  'explore',\n      label:   this.$rootGetters['i18n/t']('cluster.explore'),\n      enabled: canExplore,\n    };\n  }\n\n  get _availableActions() {\n    const out = super._availableActions;\n    const isLocal = this.mgmt?.isLocal;\n\n    // Don't let the user delete the local cluster from the UI\n    if (isLocal) {\n      const remove = out.findIndex((a) => a.action === 'promptRemove');\n\n      if (remove > -1) {\n        out.splice(remove, 1);\n      }\n    }\n    const ready = this.mgmt?.isReady;\n\n    const canEditRKE2cluster = this.isRke2 && ready && this.canUpdate;\n\n    const canSnapshot = ready && ((this.isRke2 && this.canUpdate) || (this.isRke1 && this.mgmt?.hasAction('backupEtcd')));\n\n    const clusterTemplatesSchema = this.$getters['schemaFor']('management.cattle.io.clustertemplate');\n    let canUpdateClusterTemplate = false;\n\n    if (clusterTemplatesSchema && (clusterTemplatesSchema.resourceMethods?.includes('blocked-PUT') || clusterTemplatesSchema.resourceMethods?.includes('PUT'))) {\n      canUpdateClusterTemplate = true;\n    }\n\n    const normanClusterSaveTemplateAction = !!this.normanCluster?.actions?.saveAsTemplate;\n\n    const canSaveRKETemplate = this.isRke1 && this.mgmt?.status?.driver === 'rancherKubernetesEngine' && !this.mgmt?.spec?.clusterTemplateName && this.hasLink('update') && canUpdateClusterTemplate && normanClusterSaveTemplateAction;\n\n    const actions = [\n      // Note: Actions are not supported in the Steve API, so we check\n      // available actions for RKE1 clusters, but not RKE2 clusters.\n      {\n        action:  'openShell',\n        label:   this.$rootGetters['i18n/t']('nav.shell'),\n        icon:    'icon icon-terminal',\n        enabled: !!this.mgmt?.links.shell && ready,\n      }, {\n        action:     'downloadKubeConfig',\n        bulkAction: 'downloadKubeConfigBulk',\n        label:      this.$rootGetters['i18n/t']('nav.kubeconfig.download'),\n        icon:       'icon icon-download',\n        bulkable:   true,\n        enabled:    this.mgmt?.hasAction('generateKubeconfig'),\n      }, {\n        action:   'copyKubeConfig',\n        label:    this.t('cluster.copyConfig'),\n        bulkable: false,\n        enabled:  this.mgmt?.hasAction('generateKubeconfig'),\n        icon:     'icon icon-copy',\n      }, {\n        action:     'snapshotAction',\n        label:      this.$rootGetters['i18n/t']('nav.takeSnapshot'),\n        icon:       'icon icon-snapshot',\n        bulkAction: 'snapshotBulk',\n        bulkable:   true,\n        enabled:    canSnapshot,\n      }, {\n        action:  'restoreSnapshotAction',\n        label:   this.$rootGetters['i18n/t']('nav.restoreSnapshot'),\n        icon:    'icon icon-fw icon-backup-restore',\n        enabled: canSnapshot,\n      }, {\n        action:  'rotateCertificates',\n        label:   this.$rootGetters['i18n/t']('nav.rotateCertificates'),\n        icon:    'icon icon-backup',\n        enabled: canEditRKE2cluster || (this.mgmt?.hasAction('rotateCertificates') && ready),\n      }, {\n        action:  'rotateEncryptionKey',\n        label:   this.$rootGetters['i18n/t']('nav.rotateEncryptionKeys'),\n        icon:    'icon icon-refresh',\n        enabled: canEditRKE2cluster || (this.isRke1 && this.mgmt?.hasAction('rotateEncryptionKey') && ready)\n      }, {\n        action:  'saveAsRKETemplate',\n        label:   this.$rootGetters['i18n/t']('nav.saveAsRKETemplate'),\n        icon:    'icon icon-folder',\n        enabled: canSaveRKETemplate,\n      }, { divider: true }];\n\n    return actions.concat(out);\n  }\n\n  get normanCluster() {\n    const name = this.status?.clusterName;\n\n    if ( !name ) {\n      return null;\n    }\n\n    const out = this.$rootGetters['rancher/byId'](NORMAN.CLUSTER, name);\n\n    return out;\n  }\n\n  async findNormanCluster() {\n    const name = this.status?.clusterName;\n\n    if ( !name ) {\n      return null;\n    }\n\n    return await this.$dispatch('rancher/find', { type: NORMAN.CLUSTER, id: name }, { root: true });\n  }\n\n  explore() {\n    const location = {\n      name:   'c-cluster',\n      params: { cluster: this.mgmt.id }\n    };\n\n    this.currentRouter().push(location);\n  }\n\n  async goToHarvesterCluster() {\n    const harvesterCluster = await this.$dispatch('create', {\n      ...this,\n      type: HCI.CLUSTER\n    });\n\n    try {\n      await harvesterCluster.goToCluster();\n    } catch {\n    }\n  }\n\n  goToViewYaml() {\n    let location;\n\n    if ( !this.isRke2 ) {\n      location = this.mgmt?.detailLocation;\n    }\n\n    if ( !location ) {\n      location = this.detailLocation;\n    }\n\n    location.query = {\n      ...location.query,\n      [MODE]: _VIEW,\n      [AS]:   _YAML\n    };\n\n    this.currentRouter().push(location);\n  }\n\n  get canDelete() {\n    return super.canDelete && this.stateObj.name !== 'removing';\n  }\n\n  get canEditYaml() {\n    if (!this.isRke2) {\n      return false;\n    }\n\n    return super.canEditYaml;\n  }\n\n  get isHostedKubernetesProvider() {\n    const providers = ['AKS', 'EKS', 'GKE'];\n\n    return providers.includes(this.provisioner);\n  }\n\n  get isPrivateHostedProvider() {\n    if (this.isHostedKubernetesProvider && this.mgmt && this.provisioner) {\n      switch (this.provisioner.toLowerCase()) {\n      case 'gke':\n        return this.mgmt.spec?.gkeConfig?.privateClusterConfig?.enablePrivateEndpoint;\n      case 'eks':\n        return this.mgmt.spec?.eksConfig?.privateAccess;\n      case 'aks':\n        return this.mgmt.spec?.aksConfig?.privateCluster;\n      }\n    }\n\n    return false;\n  }\n\n  get isLocal() {\n    return this.mgmt?.isLocal;\n  }\n\n  get isImported() {\n    // As of Rancher v2.6.7, this returns false for imported K3s clusters,\n    // in which this.provisioner is `k3s`.\n\n    const isImportedProvisioner = this.provisioner === 'imported';\n    const isImportedSpecialCases = this.mgmt?.providerForEmberParam === 'import' ||\n      // when imported cluster is GKE\n      !!this.mgmt?.spec?.gkeConfig?.imported ||\n      // or AKS\n      !!this.mgmt?.spec?.aksConfig?.imported ||\n      // or EKS\n      !!this.mgmt?.spec?.eksConfig?.imported;\n\n    return !this.isLocal && (isImportedProvisioner || (!this.isRke2 && !this.mgmt?.machineProvider && isImportedSpecialCases));\n  }\n\n  get isCustom() {\n    if ( this.isRke2 ) {\n      return !(this.spec?.rkeConfig?.machinePools?.length);\n    }\n\n    if ( this.isRke1 ) {\n      return !this.pools?.length;\n    }\n\n    return false;\n  }\n\n  get confirmRemove() {\n    return true;\n  }\n\n  get isImportedK3s() {\n    return this.isImported && this.isK3s;\n  }\n\n  get isImportedRke2() {\n    return this.isImported && this.mgmt?.status?.provider?.startsWith('rke2');\n  }\n\n  get isK3s() {\n    return this.mgmt?.status ? this.mgmt?.status.provider === 'k3s' : (this.spec?.kubernetesVersion || '').includes('k3s') ;\n  }\n\n  get isRke2() {\n    return !!this.spec?.rkeConfig;\n  }\n\n  get isRke1() {\n    return !!this.mgmt?.spec?.rancherKubernetesEngineConfig || this.labels['provider.cattle.io'] === 'rke';\n  }\n\n  get isHarvester() {\n    return !!this.mgmt?.isHarvester;\n  }\n\n  get mgmtClusterId() {\n    return this.mgmt?.id || this.id?.replace(`${ this.metadata.namespace }/`, '');\n  }\n\n  get mgmt() {\n    const name = this.status?.clusterName;\n\n    if ( !name ) {\n      return null;\n    }\n\n    const out = this.$rootGetters['management/byId'](MANAGEMENT.CLUSTER, name);\n\n    return out;\n  }\n\n  get isReady() {\n    return !!this.mgmt?.isReady;\n  }\n\n  // nodeGroups can be undefined for an EKS cluster that has just been created and has not\n  // had any node groups added to it\n  get eksNodeGroups() {\n    return this.mgmt?.spec?.eksConfig?.nodeGroups || [];\n  }\n\n  waitForProvisioner(timeout, interval) {\n    return this.waitForTestFn(() => {\n      return !!this.provisioner;\n    }, `set provisioner`, timeout, interval);\n  }\n\n  waitForMgmt(timeout = 60000, interval) {\n    return this.waitForTestFn(() => {\n      // `this` instance isn't getting updated with `status.clusterName`\n      // Workaround - Get fresh copy from the store\n      const pCluster = this.$rootGetters['management/byId'](CAPI.RANCHER_CLUSTER, this.id);\n      const name = this.status?.clusterName || pCluster?.status?.clusterName;\n\n      return name && !!this.$rootGetters['management/byId'](MANAGEMENT.CLUSTER, name);\n    }, this.$rootGetters['i18n/t']('cluster.managementTimeout'), timeout, interval);\n  }\n\n  get provisioner() {\n    if ( this.isRke2 ) {\n      const allKeys = Object.keys(this.spec);\n      const configKey = allKeys.find( (k) => k.endsWith('Config'));\n\n      if ( configKey === 'rkeConfig') {\n        return 'rke2';\n      } else if ( configKey ) {\n        return configKey.replace(/config$/i, '');\n      }\n    } else if ( this.mgmt ) {\n      return this.mgmt.provisioner;\n    }\n\n    return null;\n  }\n\n  get provisionerDisplay() {\n    let provisioner = (this.provisioner || '').toLowerCase();\n\n    // RKE provisioner can actually do K3s too...\n    if ( provisioner === 'rke2' && this.spec?.kubernetesVersion?.includes('k3s') ) {\n      provisioner = 'k3s';\n    } else if ( this.isImportedK3s ) {\n      provisioner = 'k3s';\n    } else if ( this.isImportedRke2 ) {\n      provisioner = 'rke2';\n    }\n\n    return this.$rootGetters['i18n/withFallback'](`cluster.provider.\"${ provisioner }\"`, null, ucFirst(provisioner));\n  }\n\n  get providerLogo() {\n    return this.mgmt?.providerLogo;\n  }\n\n  get nodesArchitecture() {\n    const obj = {};\n\n    this.nodes?.forEach((node) => {\n      if (!node.metadata?.state?.transitioning) {\n        const architecture = node.status?.nodeLabels?.[NODE_ARCHITECTURE];\n\n        const key = architecture ? capitalize(architecture) : this.t('cluster.architecture.label.unknown');\n\n        obj[key] = (obj[key] || 0) + 1;\n      }\n    });\n\n    return obj;\n  }\n\n  get architecture() {\n    const keys = Object.keys(this.nodesArchitecture);\n\n    switch (keys.length) {\n    case 0:\n      return { label: this.t('generic.provisioning') };\n    case 1:\n      return { label: keys[0] };\n    default:\n      return {\n        label:   this.t('cluster.architecture.label.mixed'),\n        tooltip: keys.reduce((acc, k) => `${ acc }${ k }: ${ this.nodesArchitecture[k] }<br>`, '')\n      };\n    }\n  }\n\n  get kubernetesVersion() {\n    const unknown = this.$rootGetters['i18n/t']('generic.unknown');\n\n    if ( this.isRke2 ) {\n      const fromStatus = this.status?.version?.gitVersion;\n      const fromSpec = this.spec?.kubernetesVersion;\n\n      return fromStatus || fromSpec || unknown;\n    } else if ( this.mgmt ) {\n      return this.mgmt.kubernetesVersion || unknown;\n    } else {\n      return unknown;\n    }\n  }\n\n  get machineProvider() {\n    // First check annotation - useful for clusters created by extension providers\n    const fromAnnotation = this.annotations?.[CAPI_ANNOTATIONS.UI_CUSTOM_PROVIDER];\n\n    if (fromAnnotation) {\n      return fromAnnotation;\n    }\n\n    if (this.isHarvester) {\n      return HARVESTER;\n    } else if ( this.isImported ) {\n      return null;\n    } else if ( this.isRke2 ) {\n      const kind = this.spec?.rkeConfig?.machinePools?.[0]?.machineConfigRef?.kind?.toLowerCase();\n\n      if ( kind ) {\n        return kind.replace(/config$/i, '').toLowerCase();\n      }\n\n      return null;\n    } else if ( this.mgmt?.machineProvider ) {\n      return this.mgmt.machineProvider.toLowerCase();\n    }\n\n    return null;\n  }\n\n  get machineProviderDisplay() {\n    if ( this.isImported ) {\n      return null;\n    }\n\n    const provider = (this.machineProvider || '').toLowerCase();\n\n    if ( provider ) {\n      return this.$rootGetters['i18n/withFallback'](`cluster.provider.\"${ provider }\"`, null, provider);\n    } else {\n      return this.$rootGetters['i18n/t']('generic.unknown');\n    }\n  }\n\n  get machinePoolDefaults() {\n    return this.spec.rkeConfig?.machinePoolDefaults;\n  }\n\n  set defaultHostnameLengthLimit(value) {\n    this.spec.rkeConfig = this.spec.rkeConfig || {};\n    this.spec.rkeConfig.machinePoolDefaults = this.spec.rkeConfig.machinePoolDefaults || {};\n    this.spec.rkeConfig.machinePoolDefaults.hostnameLengthLimit = value;\n  }\n\n  get defaultHostnameLengthLimit() {\n    return this.spec.rkeConfig?.machinePoolDefaults?.hostnameLengthLimit;\n  }\n\n  removeDefaultHostnameLengthLimit() {\n    if (this.machinePoolDefaults?.hostnameLengthLimit) {\n      delete this.spec.rkeConfig.machinePoolDefaults.hostnameLengthLimit;\n\n      if (Object.keys(this.spec?.rkeConfig?.machinePoolDefaults).length === 0) {\n        delete this.spec.rkeConfig.machinePoolDefaults;\n      }\n    }\n  }\n\n  get nodes() {\n    return this.$rootGetters['management/all'](MANAGEMENT.NODE).filter((node) => node.id.startsWith(this.mgmtClusterId));\n  }\n\n  get machines() {\n    return this.$rootGetters['management/all'](CAPI.MACHINE).filter((machine) => {\n      if ( machine.metadata?.namespace !== this.metadata.namespace ) {\n        return false;\n      }\n\n      return machine.spec?.clusterName === this.metadata.name;\n    });\n  }\n\n  get displayName() {\n    if ( this.mgmt && !this.isRke2 ) {\n      return this.mgmt.spec.displayName;\n    }\n\n    return null;\n  }\n\n  get pools() {\n    const deployments = this.$rootGetters['management/all'](CAPI.MACHINE_DEPLOYMENT).filter((pool) => pool.spec?.clusterName === this.metadata.name);\n\n    if (!!deployments.length) {\n      return deployments;\n    }\n\n    return this.$rootGetters['management/all'](MANAGEMENT.NODE_POOL).filter((pool) => pool.spec.clusterName === this.status?.clusterName);\n  }\n\n  get desired() {\n    return this.pools.reduce((acc, pool) => acc + (pool.desired || 0), 0);\n  }\n\n  get pending() {\n    return this.pools.reduce((acc, pool) => acc + (pool.pending || 0), 0);\n  }\n\n  get outdated() {\n    return this.pools.reduce((acc, pool) => acc + (pool.outdated || 0), 0);\n  }\n\n  get ready() {\n    return this.pools.reduce((acc, pool) => acc + (pool.ready || 0), 0);\n  }\n\n  get unavailable() {\n    return this.pools.reduce((acc, pool) => acc + (pool.unavailable || 0), 0);\n  }\n\n  get unavailableMachines() {\n    if (this.isReady) {\n      if (this.isRke1) {\n        const names = this.nodes.filter((node) => {\n          return node.status.conditions.find((c) => c.error && c.type === 'Ready');\n        }).map((node) => {\n          const name = node.status.nodeName || node.metadata.name;\n\n          return this.t('cluster.availabilityWarnings.node', { name });\n        });\n\n        return names.join('<br>');\n      } else {\n        const names = this.machines.filter((machine) => {\n          return machine.status?.conditions?.find((c) => c.error && c.type === 'NodeHealthy');\n        }).map((machine) => {\n          if (machine.status?.nodeRef?.name) {\n            return this.t('cluster.availabilityWarnings.node', { name: machine.status.nodeRef.name });\n          }\n\n          return this.t('cluster.availabilityWarnings.machine', { name: machine.metadata.name });\n        });\n\n        return names.join('<br>');\n      }\n    }\n\n    return '';\n  }\n\n  get stateParts() {\n    const out = [\n      {\n        label:     'Pending',\n        color:     'bg-info',\n        textColor: 'text-info',\n        value:     this.pending,\n        sort:      1,\n      },\n      {\n        label:     'Outdated',\n        color:     'bg-warning',\n        textColor: 'text-warning',\n        value:     this.outdated,\n        sort:      2,\n      },\n      {\n        label:     'Unavailable',\n        color:     'bg-error',\n        textColor: 'text-error',\n        value:     this.unavailable,\n        sort:      3,\n      },\n      {\n        label:     'Ready',\n        color:     'bg-success',\n        textColor: 'text-success',\n        value:     this.ready,\n        sort:      4,\n      },\n    ].filter((x) => x.value > 0);\n\n    return sortBy(out, 'sort:desc');\n  }\n\n  async getOrCreateToken() {\n    await this.waitForMgmt();\n\n    if ( !this.mgmt ) {\n      return;\n    }\n\n    const tokens = await this.$dispatch('rancher/findAll', { type: NORMAN.CLUSTER_TOKEN, force: true }, { root: true });\n\n    let token = findBy(tokens, 'clusterId', this.mgmt.id);\n\n    if ( token ) {\n      return token;\n    }\n\n    if ( !this.links.update ) {\n      return;\n    }\n\n    token = await this.$dispatch('rancher/create', {\n      type:      NORMAN.CLUSTER_TOKEN,\n      clusterId: this.mgmt.id\n    }, { root: true });\n\n    return token.save();\n  }\n\n  openShell() {\n    return this.mgmt?.openShell();\n  }\n\n  generateKubeConfig() {\n    return this.mgmt?.generateKubeConfig();\n  }\n\n  async copyKubeConfig() {\n    await this.mgmt?.copyKubeConfig();\n\n    this.$dispatch('growl/success', {\n      title:   this.t('cluster.copiedConfig'),\n      timeout: 3000,\n    }, { root: true });\n  }\n\n  downloadKubeConfig() {\n    return this.mgmt?.downloadKubeConfig();\n  }\n\n  downloadKubeConfigBulk(items) {\n    return this.mgmt?.downloadKubeConfigBulk(items);\n  }\n\n  async snapshotAction() {\n    try {\n      await this.takeSnapshot();\n      this.$dispatch('growl/success', {\n        title:   this.$rootGetters['i18n/t']('cluster.snapshot.successTitle', { name: this.nameDisplay }),\n        message: this.$rootGetters['i18n/t']('cluster.snapshot.successMessage', { name: this.nameDisplay })\n      }, { root: true });\n    } catch (err) {\n      this.$dispatch('growl/fromError', {\n        title: this.$rootGetters['i18n/t']('cluster.snapshot.errorTitle', { name: this.nameDisplay }),\n        err,\n      }, { root: true });\n    }\n  }\n\n  async snapshotBulk(items) {\n    const res = await Promise.allSettled(items.map((row) => {\n      return row.takeSnapshot();\n    }));\n\n    const successful = res.filter( (x) => x.status === 'fulfilled').length;\n\n    if ( successful ) {\n      this.$dispatch('growl/success', {\n        title:   this.$rootGetters['i18n/t']('cluster.snapshot.bulkSuccessTitle'),\n        message: this.$rootGetters['i18n/t']('cluster.snapshot.bulkSuccessMessage', { count: successful })\n      }, { root: true });\n    }\n\n    for ( let i = 0 ; i < res.length ; i++ ) {\n      if ( res[i].status !== 'fulfilled' ) {\n        this.$dispatch('growl/fromError', {\n          title: this.$rootGetters['i18n/t']('cluster.snapshot.errorTitle', { name: items[i].nameDisplay }),\n          err:   res[i].value,\n        }, { root: true });\n      }\n    }\n  }\n\n  takeSnapshot() {\n    if ( this.isRke1 ) {\n      return this.$dispatch('rancher/request', {\n        url:    `/v3/clusters/${ escape(this.mgmt.id) }?action=backupEtcd`,\n        method: 'post',\n      }, { root: true });\n    } else {\n      const now = this.spec?.rkeConfig?.etcdSnapshotCreate?.generation || 0;\n      const args = { generation: now + 1 };\n\n      if ( this.spec?.rkeConfig?.etcd?.s3 ) {\n        args.s3 = this.spec.rkeConfig.etcd.s3;\n      }\n\n      set(this.spec.rkeConfig, 'etcdSnapshotCreate', args);\n\n      return this.save();\n    }\n  }\n\n  get etcdSnapshots() {\n    const allSnapshots = this.$rootGetters['management/all']({ type: SNAPSHOT });\n\n    return allSnapshots\n      .filter((s) => s.metadata.namespace === this.namespace && s.clusterName === this.name );\n  }\n\n  restoreSnapshotAction(resource = this) {\n    this.$dispatch('promptRestore', [resource]);\n  }\n\n  saveAsRKETemplate(cluster = this) {\n    this.$dispatch('promptModal', {\n      componentProps: { cluster },\n      component:      'SaveAsRKETemplateDialog'\n    });\n  }\n\n  rotateCertificates(cluster = this) {\n    this.$dispatch('promptModal', {\n      componentProps: { cluster },\n\n      component: 'RotateCertificatesDialog'\n    });\n  }\n\n  rotateEncryptionKey(cluster = this) {\n    this.$dispatch('promptModal', {\n      componentProps: { cluster },\n      component:      'RotateEncryptionKeyDialog'\n    });\n  }\n\n  get stateObj() {\n    return this._stateObj;\n  }\n\n  get rkeTemplate() {\n    if (!this.isRke1 || !this.mgmt) {\n      // Not an RKE! cluster or no management cluster available\n      return false;\n    }\n\n    if (!this.mgmt.spec?.clusterTemplateRevisionName) {\n      // Cluster does not use an RKE template\n      return false;\n    }\n\n    const clusterTemplateName = this.mgmt.spec.clusterTemplateName.replace(':', '/');\n    const clusterTemplateRevisionName = this.mgmt.spec.clusterTemplateRevisionName.replace(':', '/');\n    const template = this.$rootGetters['management/all'](MANAGEMENT.RKE_TEMPLATE).find((t) => t.id === clusterTemplateName);\n    const revision = this.$rootGetters['management/all'](MANAGEMENT.RKE_TEMPLATE_REVISION).find((t) => t.spec.enabled && t.id === clusterTemplateRevisionName);\n\n    if (!template || !revision) {\n      return false;\n    }\n\n    return {\n      displayName: `${ template.spec?.displayName }/${ revision.spec?.displayName }`,\n      upgrade:     this.rkeTemplateUpgrade,\n      template,\n      revision,\n    };\n  }\n\n  get rkeTemplateUpgrade() {\n    if (!this.isRke1 || !this.mgmt) {\n      // Not an RKE! cluster or no management cluster available\n      return false;\n    }\n\n    if (!this.mgmt.spec?.clusterTemplateRevisionName) {\n      // Cluster does not use an RKE template\n      return false;\n    }\n\n    const clusterTemplateRevisionName = this.mgmt.spec.clusterTemplateRevisionName.replace(':', '/');\n\n    // Get all of the template revisions for this template\n    const revisions = this.$rootGetters['management/all'](MANAGEMENT.RKE_TEMPLATE_REVISION).filter((t) => t.spec.enabled && t.spec.clusterTemplateName === this.mgmt.spec.clusterTemplateName);\n\n    if (revisions.length <= 1) {\n      // Only one template revision\n      return false;\n    }\n\n    revisions.sort((a, b) => {\n      return parseInt(a.metadata.resourceVersion, 10) - parseInt(b.metadata.resourceVersion, 10);\n    }).reverse();\n\n    return revisions[0].id !== clusterTemplateRevisionName ? revisions[0].spec?.displayName : false;\n  }\n\n  get _stateObj() {\n    if (!this.isRke2) {\n      return this.mgmt?.stateObj || this.metadata?.state;\n    }\n\n    return this.metadata?.state;\n  }\n\n  get supportsWindows() {\n    if (this.isK3s || this.isImportedK3s) {\n      return false;\n    }\n\n    if ( this.isRke1 ) {\n      return this.mgmt?.spec?.windowsPreferedCluster || false;\n    }\n\n    if ( !this.isRke2 ) {\n      return false;\n    }\n\n    if ( !this.kubernetesVersion || compare(this.kubernetesVersion, 'v1.21.0') < 0 ) {\n      return false;\n    }\n\n    const cni = this.spec?.rkeConfig?.machineGlobalConfig?.cni;\n\n    if ( cni && cni !== 'calico' ) {\n      return false;\n    }\n\n    return true;\n  }\n\n  get customValidationRules() {\n    return [\n      {\n        path:           'metadata.name',\n        translationKey: 'cluster.name.label',\n        validators:     [`clusterName:${ this.isRke2 }`],\n        maxLength:      63,\n      },\n    ];\n  }\n\n  get agentConfig() {\n    // The one we want is the first one with no selector.\n    // If there are multiple with no selector, that will fall under the unsupported message below.\n    return this.spec.rkeConfig.machineSelectorConfig.find((x) => !x.machineLabelSelector)?.config;\n  }\n\n  get cloudProvider() {\n    return this.agentConfig?.['cloud-provider-name'];\n  }\n\n  get canClone() {\n    return false;\n  }\n\n  async remove(opt = {}) {\n    if ( !opt.url ) {\n      opt.url = (this.links || {})['self'];\n    }\n\n    opt.method = 'delete';\n\n    const res = await this.$dispatch('request', opt);\n\n    const pool = (this.spec?.rkeConfig?.machinePools || [])[0];\n\n    if (pool?.machineConfigRef?.kind === 'HarvesterConfig') {\n      const cloudCredentialSecretName = this.spec.cloudCredentialSecretName;\n\n      await this.$dispatch('rancher/findAll', { type: NORMAN.CLOUD_CREDENTIAL }, { root: true });\n\n      const credential = this.$rootGetters['rancher/byId'](NORMAN.CLOUD_CREDENTIAL, cloudCredentialSecretName);\n\n      if (credential) {\n        const harvesterClusterId = get(credential, 'decodedData.clusterId');\n\n        try {\n          const poolConfig = await this.$dispatch('management/find', {\n            type: `${ CAPI.MACHINE_CONFIG_GROUP }.${ (pool?.machineConfigRef?.kind || '').toLowerCase() }`,\n            id:   `${ this.metadata.namespace }/${ pool?.machineConfigRef?.name }`,\n          }, { root: true });\n\n          await this.$dispatch('management/request', {\n            url:    `/k8s/clusters/${ harvesterClusterId }/v1/harvester/serviceaccounts/${ poolConfig.vmNamespace }/${ this.metadata.name }`,\n            method: 'DELETE',\n          }, { root: true });\n        } catch (e) {\n          console.error(e); // eslint-disable-line no-console\n        }\n      }\n    }\n\n    if ( res?._status === 204 ) {\n      await this.$dispatch('ws.resource.remove', { data: this });\n    }\n  }\n\n  get hasError() {\n    // Before we were just checking for this.status?.conditions?.some((condition) => condition.error === true)\n    // but this is wrong as an error might exist but it might not be meaningful in the context of readiness of a cluster\n    // which is what this 'hasError' is used for.\n    // We now check if there's a ready condition after an error, which helps dictate the readiness of a cluster\n    // Based on the findings in https://github.com/rancher/dashboard/issues/10043\n    if (this.status?.conditions && this.status?.conditions.length) {\n      // if there are errors, we compare with how recent the \"Ready\" condition is compared to that error, otherwise we just move on\n      if (this.status?.conditions.some((c) => c.error === true)) {\n        // there's no ready condition and has an error, mark it\n        if (!this.status?.conditions.some((c) => c.type === 'Ready')) {\n          return true;\n        }\n\n        const filteredConditions = this.status?.conditions.filter((c) => c.error === true || c.type === 'Ready');\n        const mostRecentCondition = filteredConditions.reduce((a, b) => ((a.lastUpdateTime > b.lastUpdateTime) ? a : b));\n\n        return mostRecentCondition.error;\n      }\n    }\n\n    return false;\n  }\n\n  get namespaceLocation() {\n    const localCluster = this.$rootGetters['management/byId'](MANAGEMENT.CLUSTER, LOCAL_CLUSTER);\n\n    if (localCluster) {\n      return {\n        name:   'c-cluster-product-resource-id',\n        params: {\n          cluster:  localCluster.id,\n          product:  this.$rootGetters['productId'],\n          resource: NAMESPACE,\n          id:       this.namespace\n        }\n      };\n    }\n\n    return null;\n  }\n\n  // JSON Paths that should be folded in the YAML editor by default\n  get yamlFolding() {\n    return [\n      'spec.rkeConfig.machinePools.dynamicSchemaSpec',\n    ];\n  }\n}\n"],"mappings":"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","ignoreList":[]}]}