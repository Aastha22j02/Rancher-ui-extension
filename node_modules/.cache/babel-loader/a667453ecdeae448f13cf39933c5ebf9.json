{"remainingRequest":"/home/ubuntu/susecon-2024-ext-demo/node_modules/babel-loader/lib/index.js??ref--16-1!/home/ubuntu/susecon-2024-ext-demo/node_modules/cache-loader/dist/cjs.js??ref--17-0!/home/ubuntu/susecon-2024-ext-demo/node_modules/ts-loader/index.js??ref--17-1!/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/models/__tests__/management.cattle.io.nodepool.ts","dependencies":[{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/models/__tests__/management.cattle.io.nodepool.ts","mtime":1725271280091},{"path":"/home/ubuntu/susecon-2024-ext-demo/babel.config.js","mtime":1725268750245},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/babel-loader/lib/index.js","mtime":1725271298942},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/ts-loader/index.js","mtime":1725271299135}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3JzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHkiOwpmdW5jdGlvbiBvd25LZXlzKGUsIHIpIHsgdmFyIHQgPSBPYmplY3Qua2V5cyhlKTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIG8gPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGUpOyByICYmIChvID0gby5maWx0ZXIoZnVuY3Rpb24gKHIpIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSwgcikuZW51bWVyYWJsZTsgfSkpLCB0LnB1c2guYXBwbHkodCwgbyk7IH0gcmV0dXJuIHQ7IH0KZnVuY3Rpb24gX29iamVjdFNwcmVhZChlKSB7IGZvciAodmFyIHIgPSAxOyByIDwgYXJndW1lbnRzLmxlbmd0aDsgcisrKSB7IHZhciB0ID0gbnVsbCAhPSBhcmd1bWVudHNbcl0gPyBhcmd1bWVudHNbcl0gOiB7fTsgciAlIDIgPyBvd25LZXlzKE9iamVjdCh0KSwgITApLmZvckVhY2goZnVuY3Rpb24gKHIpIHsgX2RlZmluZVByb3BlcnR5KGUsIHIsIHRbcl0pOyB9KSA6IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzID8gT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnModCkpIDogb3duS2V5cyhPYmplY3QodCkpLmZvckVhY2goZnVuY3Rpb24gKHIpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIHIsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCwgcikpOyB9KTsgfSByZXR1cm4gZTsgfQppbXBvcnQgTWdtdE5vZGVQb29sIGZyb20gJ0BzaGVsbC9tb2RlbHMvbWFuYWdlbWVudC5jYXR0bGUuaW8ubm9kZXBvb2wnOwpkZXNjcmliZSgnY2xhc3MgTWdtdE5vZGVQb29sJywgZnVuY3Rpb24gKCkgewogIGRlc2NyaWJlKCdjYW5TY2FsZURvd25Qb29sJywgZnVuY3Rpb24gKCkgewogICAgdmFyIG1nbXRDbHVzdGVySWQgPSAndGVzdCc7CiAgICB2YXIgbm9kZUlkID0gJ3Rlc3QvaWQnOwogICAgdmFyIHNwZWNzID0gewogICAgICB3b3JrZXI6IHsKICAgICAgICB3b3JrZXI6IHRydWUsCiAgICAgICAgZXRjZDogZmFsc2UsCiAgICAgICAgY29udHJvbFBsYW5lOiBmYWxzZQogICAgICB9LAogICAgICBldGNkOiB7CiAgICAgICAgd29ya2VyOiBmYWxzZSwKICAgICAgICBldGNkOiB0cnVlLAogICAgICAgIGNvbnRyb2xQbGFuZTogZmFsc2UKICAgICAgfSwKICAgICAgY29udHJvbFBsYW5lOiB7CiAgICAgICAgd29ya2VyOiBmYWxzZSwKICAgICAgICBldGNkOiBmYWxzZSwKICAgICAgICBjb250cm9sUGxhbmU6IHRydWUKICAgICAgfSwKICAgICAgZXRjZEFuZENvbnRyb2xQbGFuZTogewogICAgICAgIHdvcmtlcjogZmFsc2UsCiAgICAgICAgZXRjZDogdHJ1ZSwKICAgICAgICBjb250cm9sUGxhbmU6IHRydWUKICAgICAgfSwKICAgICAgYWxsOiB7CiAgICAgICAgd29ya2VyOiB0cnVlLAogICAgICAgIGV0Y2Q6IHRydWUsCiAgICAgICAgY29udHJvbFBsYW5lOiB0cnVlCiAgICAgIH0KICAgIH07CiAgICB2YXIgd29ya2VyTm9kZSA9IHsKICAgICAgaWQ6ICcwMScsCiAgICAgIGlzV29ya2VyOiB0cnVlLAogICAgICBpc0NvbnRyb2xQbGFuZTogZmFsc2UsCiAgICAgIGlzRXRjZDogZmFsc2UKICAgIH07CiAgICB2YXIgZXRjZE5vZGUgPSB7CiAgICAgIGlkOiAnMDInLAogICAgICBpc1dvcmtlcjogZmFsc2UsCiAgICAgIGlzQ29udHJvbFBsYW5lOiBmYWxzZSwKICAgICAgaXNFdGNkOiB0cnVlCiAgICB9OwogICAgdmFyIGNvbnRyb2xQbGFuZU5vZGUgPSB7CiAgICAgIGlkOiAnMDMnLAogICAgICBpc1dvcmtlcjogZmFsc2UsCiAgICAgIGlzQ29udHJvbFBsYW5lOiB0cnVlLAogICAgICBpc0V0Y2Q6IGZhbHNlCiAgICB9OwogICAgdmFyIGV0Y2RBbmRDb250cm9sUGxhbmVOb2RlID0gewogICAgICBpZDogJzAzJywKICAgICAgaXNXb3JrZXI6IGZhbHNlLAogICAgICBpc0NvbnRyb2xQbGFuZTogdHJ1ZSwKICAgICAgaXNFdGNkOiB0cnVlCiAgICB9OwogICAgdmFyIGFsbE5vZGUgPSB7CiAgICAgIGlkOiAnMDQnLAogICAgICBpc1dvcmtlcjogdHJ1ZSwKICAgICAgaXNDb250cm9sUGxhbmU6IHRydWUsCiAgICAgIGlzRXRjZDogdHJ1ZQogICAgfTsKICAgIHZhciBiYXNlQ3R4ID0gewogICAgICByb290R2V0dGVyczogewogICAgICAgICdyYW5jaGVyL2J5SWQnOiBmdW5jdGlvbiByYW5jaGVyQnlJZCgpIHsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGFjdGlvbnM6IHsKICAgICAgICAgICAgICBzY2FsZWRvd246ICdzY2FsZWRvd24nCiAgICAgICAgICAgIH0KICAgICAgICAgIH07CiAgICAgICAgfQogICAgICB9CiAgICB9OwogICAgaXQuZWFjaChbW3sKICAgICAgc3BlYzogc3BlY3Mud29ya2VyLAogICAgICBub2RlczogW3dvcmtlck5vZGVdCiAgICB9LCB0cnVlXSwgW3sKICAgICAgc3BlYzogc3BlY3MuZXRjZCwKICAgICAgbm9kZXM6IFtldGNkTm9kZSwgZXRjZE5vZGUsIGNvbnRyb2xQbGFuZU5vZGVdCiAgICB9LCB0cnVlXSwgW3sKICAgICAgc3BlYzogc3BlY3MuZXRjZEFuZENvbnRyb2xQbGFuZSwKICAgICAgbm9kZXM6IFtldGNkQW5kQ29udHJvbFBsYW5lTm9kZSwgZXRjZEFuZENvbnRyb2xQbGFuZU5vZGVdCiAgICB9LCB0cnVlXSwgW3sKICAgICAgc3BlYzogc3BlY3MuZXRjZEFuZENvbnRyb2xQbGFuZSwKICAgICAgbm9kZXM6IFtldGNkQW5kQ29udHJvbFBsYW5lTm9kZV0KICAgIH0sIGZhbHNlXSwgW3sKICAgICAgc3BlYzogc3BlY3MuYWxsLAogICAgICBub2RlczogW2FsbE5vZGVdCiAgICB9LCBmYWxzZV0sIFt7CiAgICAgIHNwZWM6IHNwZWNzLmFsbCwKICAgICAgbm9kZXM6IFthbGxOb2RlLCBhbGxOb2RlXQogICAgfSwgdHJ1ZV1dKSgnc2hvdWxkIHJldHVybiBjYW5TY2FsZURvd25Qb29sIHByb3Blcmx5JywgZnVuY3Rpb24gKGRhdGEsIGV4cGVjdGVkKSB7CiAgICAgIHZhciBzcGVjID0gZGF0YS5zcGVjLAogICAgICAgIG5vZGVzID0gZGF0YS5ub2RlczsKICAgICAgdmFyIG1nbXROb2RlID0gbmV3IE1nbXROb2RlUG9vbCh7CiAgICAgICAgc3BlYzogc3BlYywKICAgICAgICBpZDogbm9kZUlkCiAgICAgIH0sIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgYmFzZUN0eCksIHt9LCB7CiAgICAgICAgZ2V0dGVyczogewogICAgICAgICAgYWxsOiBmdW5jdGlvbiBhbGwoKSB7CiAgICAgICAgICAgIHJldHVybiBbewogICAgICAgICAgICAgIG1nbXRDbHVzdGVySWQ6IG1nbXRDbHVzdGVySWQsCiAgICAgICAgICAgICAgbm9kZXM6IG5vZGVzCiAgICAgICAgICAgIH1dOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSkpOwogICAgICBleHBlY3QobWdtdE5vZGUuY2FuU2NhbGVEb3duUG9vbCgpKS50b1N0cmljdEVxdWFsKGV4cGVjdGVkKTsKICAgIH0pOwogIH0pOwp9KTs="},{"version":3,"names":["MgmtNodePool","describe","mgmtClusterId","nodeId","specs","worker","etcd","controlPlane","etcdAndControlPlane","all","workerNode","id","isWorker","isControlPlane","isEtcd","etcdNode","controlPlaneNode","etcdAndControlPlaneNode","allNode","baseCtx","rootGetters","rancherById","actions","scaledown","it","each","spec","nodes","data","expected","mgmtNode","_objectSpread","getters","expect","canScaleDownPool","toStrictEqual"],"sources":["/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/models/__tests__/management.cattle.io.nodepool.ts"],"sourcesContent":["import MgmtNodePool from '@shell/models/management.cattle.io.nodepool';\n\ndescribe('class MgmtNodePool', () => {\n  describe('canScaleDownPool', () => {\n    const mgmtClusterId = 'test';\n    const nodeId = 'test/id';\n    const specs = {\n      worker: {\n        worker: true, etcd: false, controlPlane: false\n      },\n      etcd: {\n        worker: false, etcd: true, controlPlane: false\n      },\n      controlPlane: {\n        worker: false, etcd: false, controlPlane: true\n      },\n      etcdAndControlPlane: {\n        worker: false, etcd: true, controlPlane: true\n      },\n      all: {\n        worker: true, etcd: true, controlPlane: true\n      }\n    };\n\n    const workerNode = {\n      id:             '01',\n      isWorker:       true,\n      isControlPlane: false,\n      isEtcd:         false\n    };\n    const etcdNode = {\n      id:             '02',\n      isWorker:       false,\n      isControlPlane: false,\n      isEtcd:         true\n    };\n    const controlPlaneNode = {\n      id:             '03',\n      isWorker:       false,\n      isControlPlane: true,\n      isEtcd:         false\n    };\n    const etcdAndControlPlaneNode = {\n      id:             '03',\n      isWorker:       false,\n      isControlPlane: true,\n      isEtcd:         true\n    };\n    const allNode = {\n      id:             '04',\n      isWorker:       true,\n      isControlPlane: true,\n      isEtcd:         true\n    };\n\n    const baseCtx = { rootGetters: { 'rancher/byId': () => ({ actions: { scaledown: 'scaledown' } }) } };\n\n    it.each([\n      [{ spec: specs.worker, nodes: [workerNode] }, true],\n      [{ spec: specs.etcd, nodes: [etcdNode, etcdNode, controlPlaneNode] }, true],\n      [{ spec: specs.etcdAndControlPlane, nodes: [etcdAndControlPlaneNode, etcdAndControlPlaneNode] }, true],\n      [{ spec: specs.etcdAndControlPlane, nodes: [etcdAndControlPlaneNode] }, false],\n      [{ spec: specs.all, nodes: [allNode] }, false],\n      [{ spec: specs.all, nodes: [allNode, allNode] }, true],\n    ])('should return canScaleDownPool properly', (data, expected) => {\n      const { spec, nodes } = data;\n      const mgmtNode = new MgmtNodePool({\n        spec,\n        id: nodeId\n      }, {\n        ...baseCtx,\n        getters: {\n          all: () => [{\n            mgmtClusterId,\n            nodes\n          }]\n        }\n      });\n\n      expect(mgmtNode.canScaleDownPool()).toStrictEqual(expected);\n    });\n  });\n});\n"],"mappings":"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","ignoreList":[]}]}