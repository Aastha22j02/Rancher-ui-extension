{"remainingRequest":"/home/ubuntu/susecon-2024-ext-demo/node_modules/babel-loader/lib/index.js??ref--16-1!/home/ubuntu/susecon-2024-ext-demo/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/ubuntu/susecon-2024-ext-demo/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/cloud-credential/harvester.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/cloud-credential/harvester.vue","mtime":1725271280091},{"path":"/home/ubuntu/susecon-2024-ext-demo/babel.config.js","mtime":1725268750245},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/babel-loader/lib/index.js","mtime":1725271298942},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1725271300920}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maW5kLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiL2hvbWUvdWJ1bnR1L3N1c2Vjb24tMjAyNC1leHQtZGVtby9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvcmVnZW5lcmF0b3IvaW5kZXguanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCBDcmVhdGVFZGl0VmlldyBmcm9tICdAc2hlbGwvbWl4aW5zL2NyZWF0ZS1lZGl0LXZpZXcnOwppbXBvcnQgTGFiZWxlZFNlbGVjdCBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9mb3JtL0xhYmVsZWRTZWxlY3QnOwppbXBvcnQgeyBnZXQsIHNldCB9IGZyb20gJ0BzaGVsbC91dGlscy9vYmplY3QnOwppbXBvcnQgeyBNQU5BR0VNRU5ULCBWSVJUVUFMX0hBUlZFU1RFUl9QUk9WSURFUiB9IGZyb20gJ0BzaGVsbC9jb25maWcvdHlwZXMnOwpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgTGFiZWxlZFNlbGVjdDogTGFiZWxlZFNlbGVjdAogIH0sCiAgbWl4aW5zOiBbQ3JlYXRlRWRpdFZpZXddLAogIGZldGNoOiBmdW5jdGlvbiBmZXRjaCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICByZXR1cm4gX3RoaXMuJHN0b3JlLmRpc3BhdGNoKCdtYW5hZ2VtZW50L2ZpbmRBbGwnLCB7CiAgICAgICAgICAgICAgdHlwZTogTUFOQUdFTUVOVC5DTFVTVEVSCiAgICAgICAgICAgIH0pOwogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICBfdGhpcy5jbHVzdGVycyA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSk7CiAgICB9KSkoKTsKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICB0aGlzLiRlbWl0KCd2YWxpZGF0aW9uQ2hhbmdlZCcsIHRydWUpOwogICAgdmFyIGNsdXN0ZXIgPSBnZXQodGhpcy52YWx1ZSwgJ2hhcnZlc3RlcmNyZWRlbnRpYWxDb25maWcuY2x1c3RlcklkJykgfHwgJyc7CiAgICByZXR1cm4gewogICAgICBjbHVzdGVyczogW10sCiAgICAgIGNsdXN0ZXI6IGNsdXN0ZXIKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgY2x1c3Rlck9wdGlvbnM6IGZ1bmN0aW9uIGNsdXN0ZXJPcHRpb25zKCkgewogICAgICByZXR1cm4gdGhpcy5jbHVzdGVycy5maWx0ZXIoZnVuY3Rpb24gKGMpIHsKICAgICAgICB2YXIgX2Mkc3RhdHVzOwogICAgICAgIHJldHVybiAoKF9jJHN0YXR1cyA9IGMuc3RhdHVzKSA9PT0gbnVsbCB8fCBfYyRzdGF0dXMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jJHN0YXR1cy5wcm92aWRlcikgPT09IFZJUlRVQUxfSEFSVkVTVEVSX1BST1ZJREVSOwogICAgICB9KS5tYXAoZnVuY3Rpb24gKGNsdXN0ZXIpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgdmFsdWU6IGNsdXN0ZXIuaWQsCiAgICAgICAgICBsYWJlbDogY2x1c3Rlci5uYW1lRGlzcGxheQogICAgICAgIH07CiAgICAgIH0pOwogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIGNsdXN0ZXI6IGZ1bmN0aW9uIGNsdXN0ZXIobmV1KSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgdmFyIGN1cnJlbnRDbHVzdGVyLCBrdWJlY29uZmlnQ29udGVudDsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGlmIChuZXUpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIik7CiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICBpZiAoX3RoaXMyLmlzQ3JlYXRlKSB7CiAgICAgICAgICAgICAgICBzZXQoX3RoaXMyLnZhbHVlLCAnaGFydmVzdGVyY3JlZGVudGlhbENvbmZpZy5jbHVzdGVySWQnLCBuZXUpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBjdXJyZW50Q2x1c3RlciA9IF90aGlzMi4kc3RvcmUuZ2V0dGVyc1snbWFuYWdlbWVudC9hbGwnXShNQU5BR0VNRU5ULkNMVVNURVIpLmZpbmQoZnVuY3Rpb24gKHgpIHsKICAgICAgICAgICAgICAgIHJldHVybiB4LmlkID09PSBuZXU7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgX3RoaXMyLiRudXh0LiRsb2FkaW5nLnN0YXJ0KCk7CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA3OwogICAgICAgICAgICAgIHJldHVybiBjdXJyZW50Q2x1c3Rlci5nZW5lcmF0ZUt1YmVDb25maWcoKTsKICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgIGt1YmVjb25maWdDb250ZW50ID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgX3RoaXMyLiRudXh0LiRsb2FkaW5nLmZpbmlzaCgpOwogICAgICAgICAgICAgIF90aGlzMi52YWx1ZS5zZXREYXRhKCdrdWJlY29uZmlnQ29udGVudCcsIGt1YmVjb25maWdDb250ZW50KTsKICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgIH0pKSgpOwogICAgfSwKICAgICd2YWx1ZS5kZWNvZGVkRGF0YS5jbHVzdGVySWQnOiB7CiAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uIGhhbmRsZXIoKSB7CiAgICAgICAgdGhpcy5lbWl0VmFsaWRhdGlvbigpOwogICAgICB9LAogICAgICBpbW1lZGlhdGU6IHRydWUKICAgIH0sCiAgICAndmFsdWUuZGVjb2RlZERhdGEua3ViZWNvbmZpZ0NvbnRlbnQnOiB7CiAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uIGhhbmRsZXIoKSB7CiAgICAgICAgdGhpcy5lbWl0VmFsaWRhdGlvbigpOwogICAgICB9LAogICAgICBpbW1lZGlhdGU6IHRydWUKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIHRlc3Q6IGZ1bmN0aW9uIHRlc3QoKSB7CiAgICAgIHZhciB0ID0gdGhpcy4kc3RvcmUuZ2V0dGVyc1snaTE4bi90J107CiAgICAgIGlmICghdGhpcy5jbHVzdGVyKSB7CiAgICAgICAgdmFyIGNsdXN0ZXIgPSB0KCdjbHVzdGVyLmNyZWRlbnRpYWwuaGFydmVzdGVyLmNsdXN0ZXInKTsKICAgICAgICB2YXIgZXJyb3JzID0gW3QoJ3ZhbGlkYXRpb24ucmVxdWlyZWQnLCB7CiAgICAgICAgICBrZXk6IGNsdXN0ZXIKICAgICAgICB9KV07CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGVycm9yczogZXJyb3JzCiAgICAgICAgfTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQogICAgfSwKICAgIGVtaXRWYWxpZGF0aW9uOiBmdW5jdGlvbiBlbWl0VmFsaWRhdGlvbigpIHsKICAgICAgaWYgKHRoaXMudGVzdCgpID09PSB0cnVlKSB7CiAgICAgICAgdGhpcy4kZW1pdCgndmFsaWRhdGlvbkNoYW5nZWQnLCB0cnVlKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRlbWl0KCd2YWxpZGF0aW9uQ2hhbmdlZCcsIGZhbHNlKTsKICAgICAgfQogICAgfQogIH0KfTs="},{"version":3,"names":["CreateEditView","LabeledSelect","get","set","MANAGEMENT","VIRTUAL_HARVESTER_PROVIDER","components","mixins","fetch","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","$store","dispatch","type","CLUSTER","clusters","sent","stop","data","$emit","cluster","value","computed","clusterOptions","filter","c","_c$status","status","provider","map","id","label","nameDisplay","watch","neu","_this2","_callee2","currentCluster","kubeconfigContent","_callee2$","_context2","abrupt","isCreate","getters","find","x","$nuxt","$loading","start","generateKubeConfig","finish","setData","handler","emitValidation","immediate","methods","test","t","errors","key"],"sources":["node_modules/@rancher/shell/cloud-credential/harvester.vue"],"sourcesContent":["<script>\nimport CreateEditView from '@shell/mixins/create-edit-view';\nimport LabeledSelect from '@shell/components/form/LabeledSelect';\n\nimport { get, set } from '@shell/utils/object';\nimport { MANAGEMENT, VIRTUAL_HARVESTER_PROVIDER } from '@shell/config/types';\n\nexport default {\n  components: { LabeledSelect },\n  mixins:     [CreateEditView],\n\n  async fetch() {\n    this.clusters = await this.$store.dispatch('management/findAll', { type: MANAGEMENT.CLUSTER });\n  },\n\n  data() {\n    this.$emit('validationChanged', true);\n\n    const cluster = get(this.value, 'harvestercredentialConfig.clusterId') || '';\n\n    return {\n      clusters: [],\n      cluster,\n    };\n  },\n\n  computed: {\n    clusterOptions() {\n      return this.clusters.filter((c) => c.status?.provider === VIRTUAL_HARVESTER_PROVIDER).map( (cluster) => {\n        return {\n          value: cluster.id,\n          label: cluster.nameDisplay\n        };\n      });\n    },\n  },\n\n  watch: {\n    async cluster(neu) {\n      if (!neu) {\n        return;\n      }\n\n      if (this.isCreate) {\n        set(this.value, 'harvestercredentialConfig.clusterId', neu);\n      }\n\n      const currentCluster = this.$store.getters['management/all'](MANAGEMENT.CLUSTER).find((x) => x.id === neu);\n\n      this.$nuxt.$loading.start();\n\n      const kubeconfigContent = await currentCluster.generateKubeConfig();\n\n      this.$nuxt.$loading.finish();\n\n      this.value.setData('kubeconfigContent', kubeconfigContent);\n    },\n\n    'value.decodedData.clusterId': {\n      handler() {\n        this.emitValidation();\n      },\n      immediate: true,\n    },\n    'value.decodedData.kubeconfigContent': {\n      handler() {\n        this.emitValidation();\n      },\n      immediate: true,\n    },\n  },\n\n  methods: {\n    test() {\n      const t = this.$store.getters['i18n/t'];\n\n      if (!this.cluster) {\n        const cluster = t('cluster.credential.harvester.cluster');\n        const errors = [t('validation.required', { key: cluster })];\n\n        return { errors };\n      } else {\n        return true;\n      }\n    },\n\n    emitValidation() {\n      if (this.test() === true) {\n        this.$emit('validationChanged', true);\n      } else {\n        this.$emit('validationChanged', false);\n      }\n    },\n  },\n};\n</script>\n\n<template>\n  <div>\n    <div class=\"row mb-10\">\n      <div\n        class=\"col span-6\"\n      >\n        <LabeledSelect\n          v-model=\"cluster\"\n          :mode=\"mode\"\n          :disabled=\"isEdit\"\n          :options=\"clusterOptions\"\n          :required=\"true\"\n          :label=\"t('cluster.credential.harvester.cluster')\"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n"],"mappings":"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","ignoreList":[]}]}