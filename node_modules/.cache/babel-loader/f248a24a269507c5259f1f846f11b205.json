{"remainingRequest":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js??ref--16-1!/home/ubuntu/suseconf/node_modules/@rancher/shell/utils/create-yaml.js","dependencies":[{"path":"/home/ubuntu/suseconf/node_modules/@rancher/shell/utils/create-yaml.js","mtime":1725338146566},{"path":"/home/ubuntu/suseconf/babel.config.js","mtime":1725343995893},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js","mtime":1725271298942}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3NsaWNlZFRvQXJyYXkiOwppbXBvcnQgX3R5cGVvZiBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90eXBlb2YiOwppbXBvcnQgX3RvQ29uc3VtYWJsZUFycmF5IGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvQ29uc3VtYWJsZUFycmF5IjsKZnVuY3Rpb24gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIociwgZSkgeyB2YXIgdCA9ICJ1bmRlZmluZWQiICE9IHR5cGVvZiBTeW1ib2wgJiYgcltTeW1ib2wuaXRlcmF0b3JdIHx8IHJbIkBAaXRlcmF0b3IiXTsgaWYgKCF0KSB7IGlmIChBcnJheS5pc0FycmF5KHIpIHx8ICh0ID0gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KHIpKSB8fCBlICYmIHIgJiYgIm51bWJlciIgPT0gdHlwZW9mIHIubGVuZ3RoKSB7IHQgJiYgKHIgPSB0KTsgdmFyIF9uID0gMCwgRiA9IGZ1bmN0aW9uIEYoKSB7fTsgcmV0dXJuIHsgczogRiwgbjogZnVuY3Rpb24gbigpIHsgcmV0dXJuIF9uID49IHIubGVuZ3RoID8geyBkb25lOiAhMCB9IDogeyBkb25lOiAhMSwgdmFsdWU6IHJbX24rK10gfTsgfSwgZTogZnVuY3Rpb24gZShyKSB7IHRocm93IHI7IH0sIGY6IEYgfTsgfSB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gaXRlcmF0ZSBub24taXRlcmFibGUgaW5zdGFuY2UuXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuIik7IH0gdmFyIG8sIGEgPSAhMCwgdSA9ICExOyByZXR1cm4geyBzOiBmdW5jdGlvbiBzKCkgeyB0ID0gdC5jYWxsKHIpOyB9LCBuOiBmdW5jdGlvbiBuKCkgeyB2YXIgciA9IHQubmV4dCgpOyByZXR1cm4gYSA9IHIuZG9uZSwgcjsgfSwgZTogZnVuY3Rpb24gZShyKSB7IHUgPSAhMCwgbyA9IHI7IH0sIGY6IGZ1bmN0aW9uIGYoKSB7IHRyeSB7IGEgfHwgbnVsbCA9PSB0LnJldHVybiB8fCB0LnJldHVybigpOyB9IGZpbmFsbHkgeyBpZiAodSkgdGhyb3cgbzsgfSB9IH07IH0KZnVuY3Rpb24gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KHIsIGEpIHsgaWYgKHIpIHsgaWYgKCJzdHJpbmciID09IHR5cGVvZiByKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkociwgYSk7IHZhciB0ID0ge30udG9TdHJpbmcuY2FsbChyKS5zbGljZSg4LCAtMSk7IHJldHVybiAiT2JqZWN0IiA9PT0gdCAmJiByLmNvbnN0cnVjdG9yICYmICh0ID0gci5jb25zdHJ1Y3Rvci5uYW1lKSwgIk1hcCIgPT09IHQgfHwgIlNldCIgPT09IHQgPyBBcnJheS5mcm9tKHIpIDogIkFyZ3VtZW50cyIgPT09IHQgfHwgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QodCkgPyBfYXJyYXlMaWtlVG9BcnJheShyLCBhKSA6IHZvaWQgMDsgfSB9CmZ1bmN0aW9uIF9hcnJheUxpa2VUb0FycmF5KHIsIGEpIHsgKG51bGwgPT0gYSB8fCBhID4gci5sZW5ndGgpICYmIChhID0gci5sZW5ndGgpOyBmb3IgKHZhciBlID0gMCwgbiA9IEFycmF5KGEpOyBlIDwgYTsgZSsrKSBuW2VdID0gcltlXTsgcmV0dXJuIG47IH0KaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmRlc2NyaXB0aW9uLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZnJvbS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5qb2luLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc2xpY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLm1hdGNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcudHJpbS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yLmpzIjsKaW1wb3J0IHsgaW5kZW50IGFzIF9pbmRlbnQgfSBmcm9tICdAc2hlbGwvdXRpbHMvc3RyaW5nJzsKaW1wb3J0IHsgYWRkT2JqZWN0LCBmaW5kQnksIHJlbW92ZU9iamVjdCwgcmVtb3ZlT2JqZWN0cyB9IGZyb20gJ0BzaGVsbC91dGlscy9hcnJheSc7CmltcG9ydCBqc3lhbWwgZnJvbSAnanMteWFtbCc7CmltcG9ydCB7IGNsZWFuVXAsIGlzRW1wdHkgfSBmcm9tICdAc2hlbGwvdXRpbHMvb2JqZWN0JzsKaW1wb3J0IHsgcGFyc2VUeXBlIH0gZnJvbSAnQHNoZWxsL21vZGVscy9zY2hlbWEnOwpleHBvcnQgdmFyIFNJTVBMRV9UWVBFUyA9IFsnc3RyaW5nJywgJ211bHRpbGluZScsICdtYXNrZWQnLCAncGFzc3dvcmQnLCAnZmxvYXQnLCAnaW50JywgJ2RhdGUnLCAnYmxvYicsICdib29sZWFuJywgJ3ZlcnNpb24nXTsKdmFyIEFMV0FZU19BREQgPSBbJ2FwaVZlcnNpb24nLCAna2luZCcsICdtZXRhZGF0YScsICdtZXRhZGF0YS5uYW1lJywgJ3NwZWMnLCAnc3BlYy5zZWxlY3RvcicsICdzcGVjLnNlbGVjdG9yLm1hdGNoTGFiZWxzJywgJ3NwZWMudGVtcGxhdGUnLCAnc3BlYy50ZW1wbGF0ZS5tZXRhZGF0YScsICdzcGVjLnRlbXBsYXRlLm1ldGFkYXRhLmxhYmVscycsICdzcGVjLnRlbXBsYXRlLnNwZWMuY29udGFpbmVycy5uYW1lJywgJ3NwZWMudGVtcGxhdGUuc3BlYy5jb250YWluZXJzLmltYWdlJ107CmV4cG9ydCB2YXIgTkVWRVJfQUREID0gWydtZXRhZGF0YS5jbHVzdGVyTmFtZScsICdtZXRhZGF0YS5jcmVhdGlvblRpbWVzdGFtcCcsICdtZXRhZGF0YS5kZWxldGlvbkdyYWNlUGVyaW9kU2Vjb25kcycsICdtZXRhZGF0YS5kZWxldGlvblRpbWVzdGFtcCcsICdtZXRhZGF0YS5maW5hbGl6ZXJzJywgJ21ldGFkYXRhLmdlbmVyYXRlTmFtZScsICdtZXRhZGF0YS5nZW5lcmF0aW9uJywgJ21ldGFkYXRhLmluaXRpYWxpemVycycsICdtZXRhZGF0YS5tYW5hZ2VkRmllbGRzJywgJ21ldGFkYXRhLm93bmVyUmVmZXJlbmNlcycsICdtZXRhZGF0YS5yZXNvdXJjZVZlcnNpb24nLCAnbWV0YWRhdGEucmVsYXRpb25zaGlwcycsICdtZXRhZGF0YS5zZWxmTGluaycsICdtZXRhZGF0YS5zdGF0ZScsICdtZXRhZGF0YS51aWQnLAovLyBDUkQgLT4gU2NoZW1hIGRlc2NyaWJlcyB0aGUgc2NoZW1hIHVzZWQgZm9yIHZhbGlkYXRpb24sIHBydW5pbmcsIGFuZCBkZWZhdWx0aW5nIG9mIHRoaXMgdmVyc2lvbiBvZiB0aGUgY3VzdG9tIHJlc291cmNlLiBJZiB3ZSBhbGxvdyBwcm9jZXNzaW5nIHdlIGZhbGwgaW50byBpbmYgbG9vcCBvbiBvcGVuQVBJVjNTY2hlbWEuYWxsT2Ygd2hpY2ggY29udGFpbnMgYSBjeWNsaWNhbCByZWYgb2YgYWxsT2YgcHJvcHMuCidzcGVjLnZlcnNpb25zLnNjaGVtYScsICdzdGF0dXMnLCAnc3RyaW5nRGF0YScsICdsaW5rcycsICdfbmFtZScsICdfbGFiZWxzJywgJ19hbm5vdGF0aW9ucyddOwpleHBvcnQgdmFyIEFDVElWRUxZX1JFTU9WRSA9IFsnbWV0YWRhdGEubWFuYWdlZEZpZWxkcycsICdtZXRhZGF0YS5yZWxhdGlvbnNoaXBzJywgJ21ldGFkYXRhLnN0YXRlJywgJ3N0YXR1cycsICdsaW5rcycsICd0eXBlJywgJ2lkJ107CnZhciBJTkRFTlQgPSAyOwpleHBvcnQgZnVuY3Rpb24gY3JlYXRlWWFtbFdpdGhPcHRpb25zKHNjaGVtYXMsIHR5cGUsIGRhdGEsIG9wdGlvbnMpIHsKICByZXR1cm4gY3JlYXRlWWFtbChzY2hlbWFzLCB0eXBlLCBkYXRhLCB0cnVlLCAwLCAnJywgbnVsbCwgb3B0aW9ucyk7Cn0KZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVlhbWwoc2NoZW1hcywgdHlwZSwgZGF0YSkgewogIHZhciBwcm9jZXNzQWx3YXlzQWRkID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiB0cnVlOwogIHZhciBkZXB0aCA9IGFyZ3VtZW50cy5sZW5ndGggPiA0ICYmIGFyZ3VtZW50c1s0XSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzRdIDogMDsKICB2YXIgcGF0aCA9IGFyZ3VtZW50cy5sZW5ndGggPiA1ICYmIGFyZ3VtZW50c1s1XSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzVdIDogJyc7CiAgdmFyIHJvb3RUeXBlID0gYXJndW1lbnRzLmxlbmd0aCA+IDYgJiYgYXJndW1lbnRzWzZdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbNl0gOiBudWxsOwogIHZhciBkYXRhT3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiA3ICYmIGFyZ3VtZW50c1s3XSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzddIDoge307CiAgZGF0YSA9IGRhdGEgfHwge307CiAgdmFyIHNjaGVtYSwgcm9vdFNjaGVtYSwgc2NoZW1hRGVmaW5pdGlvbnMsIHNjaGVtYVJlc291cmNlRmllbGRzOwogIGlmIChkZXB0aCA9PT0gMCkgewogICAgLy8gYHR5cGVgIGlzIGEgc2NoZW1hIGlkCiAgICBzY2hlbWEgPSBmaW5kQnkoc2NoZW1hcywgJ2lkJywgdHlwZSk7CiAgICBpZiAoIXNjaGVtYSkgewogICAgICAvLyBzY2hlbWEgaXMgb25seSBuZWVkZWQgYXQgdGhlIHJvb3QgbGV2ZWwuCiAgICAgIHJldHVybiAiRXJyb3IgbG9hZGluZyBzY2hlbWEgZm9yICIuY29uY2F0KHR5cGUpOwogICAgfQogICAgcm9vdFNjaGVtYSA9IHNjaGVtYTsKICAgIHNjaGVtYURlZmluaXRpb25zID0gcm9vdFNjaGVtYS5zY2hlbWFEZWZpbml0aW9uczsKICAgIHNjaGVtYVJlc291cmNlRmllbGRzID0gcm9vdFNjaGVtYS5yZXNvdXJjZUZpZWxkczsKICAgIHZhciBhdHRyID0gc2NoZW1hLmF0dHJpYnV0ZXMgfHwge307CgogICAgLy8gRGVmYXVsdCB0byBkYXRhLmFwaVZlcnNpb24va2luZCB0byBhY2NvbW1vZGF0ZSBzcG9vZmVkIHR5cGVzIHRoYXQgYWdncmVnYXRlIG11bHRpcGxlIHR5cGVzCiAgICBkYXRhLmFwaVZlcnNpb24gPSAoYXR0ci5ncm91cCA/ICIiLmNvbmNhdChhdHRyLmdyb3VwLCAiLyIpLmNvbmNhdChhdHRyLnZlcnNpb24pIDogYXR0ci52ZXJzaW9uKSB8fCBkYXRhLmFwaVZlcnNpb247CiAgICBkYXRhLmtpbmQgPSBhdHRyLmtpbmQgfHwgZGF0YS5raW5kOwogIH0gZWxzZSB7CiAgICByb290U2NoZW1hID0gZmluZEJ5KHNjaGVtYXMsICdpZCcsIHJvb3RUeXBlKTsKICAgIGlmIChyb290U2NoZW1hLnJlcXVpcmVzUmVzb3VyY2VGaWVsZHMpIHsKICAgICAgdmFyIF9zY2hlbWFEZWZpbml0aW9ucyR0eTsKICAgICAgLy8gU2VlIGByZXF1aXJlc1Jlc291cmNlRmllbGRzYCBkZWZpbml0aW9uCiAgICAgIHNjaGVtYURlZmluaXRpb25zID0gcm9vdFNjaGVtYS5zY2hlbWFEZWZpbml0aW9uczsKICAgICAgc2NoZW1hUmVzb3VyY2VGaWVsZHMgPSAoX3NjaGVtYURlZmluaXRpb25zJHR5ID0gc2NoZW1hRGVmaW5pdGlvbnNbdHlwZV0pID09PSBudWxsIHx8IF9zY2hlbWFEZWZpbml0aW9ucyR0eSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3NjaGVtYURlZmluaXRpb25zJHR5LnJlc291cmNlRmllbGRzOwogICAgfSBlbHNlIHsKICAgICAgc2NoZW1hID0gZmluZEJ5KHNjaGVtYXMsICdpZCcsIHR5cGUpOwogICAgICBpZiAoIXNjaGVtYSkgewogICAgICAgIC8vIHNjaGVtYSBpcyBvbmx5IG5lZWRlZCBhdCB0aGUgcm9vdCBsZXZlbC4KICAgICAgICByZXR1cm4gIkVycm9yIGxvYWRpbmcgc2NoZW1hIGZvciAiLmNvbmNhdCh0eXBlKTsKICAgICAgfQogICAgICBzY2hlbWFSZXNvdXJjZUZpZWxkcyA9IHNjaGVtYS5yZXNvdXJjZUZpZWxkczsKICAgIH0KICB9CiAgaWYgKCFyb290VHlwZSkgewogICAgcm9vdFR5cGUgPSB0eXBlOwogIH0KICB2YXIgcmVndWxhckZpZWxkcyA9IFtdOwogIGlmIChwcm9jZXNzQWx3YXlzQWRkKSB7CiAgICAvLyBBZGQgYWxsIHRoZSBwYXJlbnRzIG9mIGVhY2gga2V5IHNvIHRoYXQgc3BlYy50ZW1wbGF0ZS5mb28uYmxhaAogICAgLy8gY2F1c2VzICdzcGVjJywgJ3RlbXBsYXRlJyBhbmQgJ2Zvbycga2V5cyB0byBiZSBjcmVhdGVkCiAgICB2YXIgYWx3YXlzID0gQUxXQVlTX0FERC5zbGljZSgpOwogICAgZm9yICh2YXIgaSA9IGFsd2F5cy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgewogICAgICB2YXIgZW50cnkgPSBhbHdheXNbaV0uc3BsaXQoL1wuLyk7CiAgICAgIHdoaWxlIChlbnRyeS5sZW5ndGgpIHsKICAgICAgICBhZGRPYmplY3QoYWx3YXlzLCBlbnRyeS5qb2luKCcuJykpOwogICAgICAgIGVudHJ5ID0gZW50cnkuc2xpY2UoMCwgLTEpOwogICAgICB9CiAgICB9CgogICAgLy8gTWFyayBhbHdheXMgZmllbGRzIGFzIHJlZ3VsYXIgc28gdGhleSdyZSBub3QgY29tbWVudGVkIG91dAogICAgdmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKGFsd2F5cyksCiAgICAgIF9zdGVwOwogICAgdHJ5IHsKICAgICAgZm9yIChfaXRlcmF0b3IucygpOyAhKF9zdGVwID0gX2l0ZXJhdG9yLm4oKSkuZG9uZTspIHsKICAgICAgICB2YXIgX2VudHJ5ID0gX3N0ZXAudmFsdWU7CiAgICAgICAgdmFyIHBhcnRzID0gX2VudHJ5LnNwbGl0KC9cLi8pOwogICAgICAgIHZhciBrZXkgPSBwYXJ0c1twYXJ0cy5sZW5ndGggLSAxXTsKICAgICAgICB2YXIgcHJlZml4ID0gcGFydHMuc2xpY2UoMCwgLTEpLmpvaW4oJy4nKTsKICAgICAgICBpZiAocHJlZml4ID09PSBwYXRoICYmIHNjaGVtYVJlc291cmNlRmllbGRzICYmIHNjaGVtYVJlc291cmNlRmllbGRzW2tleV0pIHsKICAgICAgICAgIGFkZE9iamVjdChyZWd1bGFyRmllbGRzLCBrZXkpOwogICAgICAgIH0KICAgICAgfQogICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgIF9pdGVyYXRvci5lKGVycik7CiAgICB9IGZpbmFsbHkgewogICAgICBfaXRlcmF0b3IuZigpOwogICAgfQogIH0KCiAgLy8gSW5jbHVkZSBhbGwgZmllbGRzIGluIHNjaGVtYSdzIHJlc291cmNlRmllbGRzIGFzIGNvbW1lbnRzCiAgdmFyIGNvbW1lbnRGaWVsZHMgPSBPYmplY3Qua2V5cyhzY2hlbWFSZXNvdXJjZUZpZWxkcyB8fCB7fSk7CiAgY29tbWVudEZpZWxkcy5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgIGlmICh0eXBlb2YgZGF0YVtrZXldICE9PSAndW5kZWZpbmVkJyB8fCBkZXB0aCA9PT0gMCAmJiBrZXkgPT09ICdfdHlwZScpIHsKICAgICAgYWRkT2JqZWN0KHJlZ3VsYXJGaWVsZHMsIGtleSk7CiAgICB9CiAgfSk7CgogIC8vIGFkZCBhbnkgZmllbGRzIGRlZmluZWQgaW4gZGF0YSBhcyB1bmNvbW1lbnRlZCBmaWVsZHMgaW4geWFtbAogIGZvciAodmFyIF9rZXkgaW4gZGF0YSkgewogICAgaWYgKHR5cGVvZiBkYXRhW19rZXldICE9PSAndW5kZWZpbmVkJykgewogICAgICBhZGRPYmplY3QocmVndWxhckZpZWxkcywgX2tleSk7CiAgICB9CiAgfQoKICAvLyBBQ1RJVkVMWV9SRU1PVkUgYXJlIGZpZWxkcyB0aGF0IHNob3VsZCBiZSByZW1vdmVkIGV2ZW4gaWYgdGhleSBhcmUgZGVmaW5lZCBpbiBkYXRhCiAgdmFyIF9pdGVyYXRvcjIgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihBQ1RJVkVMWV9SRU1PVkUpLAogICAgX3N0ZXAyOwogIHRyeSB7CiAgICBmb3IgKF9pdGVyYXRvcjIucygpOyAhKF9zdGVwMiA9IF9pdGVyYXRvcjIubigpKS5kb25lOykgewogICAgICB2YXIgX2VudHJ5MiA9IF9zdGVwMi52YWx1ZTsKICAgICAgdmFyIF9wYXJ0cyA9IF9lbnRyeTIuc3BsaXQoL1wuLyk7CiAgICAgIHZhciBfa2V5MiA9IF9wYXJ0c1tfcGFydHMubGVuZ3RoIC0gMV07CiAgICAgIHZhciBfcHJlZml4ID0gX3BhcnRzLnNsaWNlKDAsIC0xKS5qb2luKCcuJyk7CiAgICAgIGlmIChfcHJlZml4ID09PSBwYXRoKSB7CiAgICAgICAgcmVtb3ZlT2JqZWN0KHJlZ3VsYXJGaWVsZHMsIF9rZXkyKTsKICAgICAgfQogICAgfQoKICAgIC8vIE5FVkVSX0FERCBhcmUgZmllbGRzIHRoYXQgc2hvdWxkIG5vdCBiZSBhZGRlZCBhcyBjb21tZW50cywgYnV0IG1heSBhZGRlZCBhcyByZWd1bGFyIGZpZWxkcyBpZiBhbHJlYWR5IGRlZmluZWQgaW4gZGF0YQogIH0gY2F0Y2ggKGVycikgewogICAgX2l0ZXJhdG9yMi5lKGVycik7CiAgfSBmaW5hbGx5IHsKICAgIF9pdGVyYXRvcjIuZigpOwogIH0KICB2YXIgX2l0ZXJhdG9yMyA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKE5FVkVSX0FERCksCiAgICBfc3RlcDM7CiAgdHJ5IHsKICAgIGZvciAoX2l0ZXJhdG9yMy5zKCk7ICEoX3N0ZXAzID0gX2l0ZXJhdG9yMy5uKCkpLmRvbmU7KSB7CiAgICAgIHZhciBfZW50cnkzID0gX3N0ZXAzLnZhbHVlOwogICAgICB2YXIgX3BhcnRzMiA9IF9lbnRyeTMuc3BsaXQoL1wuLyk7CiAgICAgIHZhciBfa2V5MyA9IF9wYXJ0czJbX3BhcnRzMi5sZW5ndGggLSAxXTsKICAgICAgdmFyIF9wcmVmaXgyID0gX3BhcnRzMi5zbGljZSgwLCAtMSkuam9pbignLicpOwogICAgICBpZiAoX3ByZWZpeDIgPT09IHBhdGggJiYgc2NoZW1hUmVzb3VyY2VGaWVsZHMgJiYgc2NoZW1hUmVzb3VyY2VGaWVsZHNbX2tleTNdKSB7CiAgICAgICAgcmVtb3ZlT2JqZWN0KGNvbW1lbnRGaWVsZHMsIF9rZXkzKTsKICAgICAgfQogICAgfQoKICAgIC8vIGRvIG5vdCBpbmNsdWRlIGNvbW1lbnRlZCBmaWVsZHMgaWYgYWxyZWFkeSBkZWZpbmVkIGluIGRhdGEKICB9IGNhdGNoIChlcnIpIHsKICAgIF9pdGVyYXRvcjMuZShlcnIpOwogIH0gZmluYWxseSB7CiAgICBfaXRlcmF0b3IzLmYoKTsKICB9CiAgcmVtb3ZlT2JqZWN0cyhjb21tZW50RmllbGRzLCByZWd1bGFyRmllbGRzKTsKICB2YXIgcmVndWxhciA9IHJlZ3VsYXJGaWVsZHMubWFwKGZ1bmN0aW9uIChrKSB7CiAgICByZXR1cm4gc3RyaW5naWZ5RmllbGQoayk7CiAgfSk7CiAgdmFyIGNvbW1lbnRzID0gY29tbWVudEZpZWxkcy5tYXAoZnVuY3Rpb24gKGspIHsKICAgIC8vIERvbid0IGFkZCBhIG5hbWVzcGFjZSBjb21tZW50IGZvciB0eXBlcyB0aGF0IGFyZW4ndCBuYW1lc3BhY2VkLgogICAgaWYgKHBhdGggPT09ICdtZXRhZGF0YScgJiYgayA9PT0gJ25hbWVzcGFjZScpIHsKICAgICAgdmFyIF9yb290U2NoZW1hJGF0dHJpYnV0ZTsKICAgICAgaWYgKHJvb3RTY2hlbWEgJiYgISgoX3Jvb3RTY2hlbWEkYXR0cmlidXRlID0gcm9vdFNjaGVtYS5hdHRyaWJ1dGVzKSAhPT0gbnVsbCAmJiBfcm9vdFNjaGVtYSRhdHRyaWJ1dGUgIT09IHZvaWQgMCAmJiBfcm9vdFNjaGVtYSRhdHRyaWJ1dGUubmFtZXNwYWNlZCkpIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQogICAgfQogICAgcmV0dXJuIGNvbW1lbnQoc3RyaW5naWZ5RmllbGQoaykpOwogIH0pOwogIHZhciBvdXQgPSBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KHJlZ3VsYXIpLCBfdG9Db25zdW1hYmxlQXJyYXkoY29tbWVudHMpKS5maWx0ZXIoZnVuY3Rpb24gKHgpIHsKICAgIHJldHVybiB4ICE9PSBudWxsOwogIH0pLmpvaW4oJ1xuJykudHJpbSgpOwogIHJldHVybiBvdXQ7CgogIC8vIC0tLS0tLS0tLS0tLS0tLQoKICBmdW5jdGlvbiBzdHJpbmdpZnlGaWVsZChrZXkpIHsKICAgIHZhciBfc2NoZW1hUmVzb3VyY2VGaWVsZHMsIF9zY2hlbWFEZWZpbml0aW9uczsKICAgIHZhciBmaWVsZCA9IChfc2NoZW1hUmVzb3VyY2VGaWVsZHMgPSBzY2hlbWFSZXNvdXJjZUZpZWxkcykgPT09IG51bGwgfHwgX3NjaGVtYVJlc291cmNlRmllbGRzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfc2NoZW1hUmVzb3VyY2VGaWVsZHNba2V5XTsKICAgIHZhciBvdXQgPSAiIi5jb25jYXQoa2V5LCAiOiIpOwoKICAgIC8vICdfdHlwZScgaW4gc3RldmUgbWFwcyB0byBrdWJlcm5ldGVzICd0eXBlJyBmaWVsZDsgc2hvdyAndHlwZScgZmllbGQgaW4geWFtbAogICAgaWYgKGtleSA9PT0gJ190eXBlJykgewogICAgICBvdXQgPSAndHlwZTonOwogICAgfQoKICAgIC8vIGlmIGEga2V5IG9uIGRhdGEgaXMgbm90IGxpc3RlZCBpbiB0aGUgc2NoZW1hJ3MgcmVzb3VyY2VGaWVsZHMsIGp1c3QgY29udmVydCBpdCB0byB5YW1sLCBhZGQgaW5kZW50cyB3aGVyZSBuZWVkZWQsIGFuZCByZXR1cm4KICAgIGlmICghZmllbGQpIHsKICAgICAgaWYgKGRhdGFba2V5XSkgewogICAgICAgIHRyeSB7CiAgICAgICAgICB2YXIgY2xlYW5lZCA9IGNsZWFuVXAoZGF0YSk7CiAgICAgICAgICB2YXIgcGFyc2VkRGF0YSA9IGpzeWFtbC5kdW1wKGNsZWFuZWRba2V5XSk7CiAgICAgICAgICBpZiAoX3R5cGVvZihkYXRhW2tleV0pID09PSAnb2JqZWN0JyB8fCBBcnJheS5pc0FycmF5KGRhdGFba2V5XSkpIHsKICAgICAgICAgICAgb3V0ICs9ICJcbiIuY29uY2F0KGluZGVudChwYXJzZWREYXRhLnRyaW0oKSkpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgb3V0ICs9ICIgIi5jb25jYXQocGFyc2VkRGF0YS50cmltKCkpOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIG91dDsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICBjb25zb2xlLmVycm9yKCJFcnJvcjogVW5hYmxlIHRvIHBhcnNlIG1hcCBkYXRhIGZvciB5YW1sIGtleTogIi5jb25jYXQoa2V5KSwgZSk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc29sZQogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gbnVsbDsKICAgIH0KICAgIHZhciB0eXBlID0gdHlwZU11bmdlKGZpZWxkLnR5cGUpOwogICAgdmFyIG1hcE9mID0gdHlwZVJlZignbWFwJywgdHlwZSwgZmllbGQpOwogICAgdmFyIGFycmF5T2YgPSB0eXBlUmVmKCdhcnJheScsIHR5cGUsIGZpZWxkKTsKICAgIHZhciByZWZlcmVuY2VUbyA9IHR5cGVSZWYoJ3JlZmVyZW5jZScsIHR5cGUpOwoKICAgIC8vIHR5cGUgPT0gbWFwW21hcE9mXQogICAgaWYgKG1hcE9mKSB7CiAgICAgIC8vIGlmIGtleSBpcyBkZWZpbmVkIGluIGRhdGEsIGNvbnZlcnQgdGhlIHZhbHVlIHRvIHlhbWwsIGFkZCBuZXdsaW5lK2luZGVudCBhbmQgYWRkIHRvIG91dHB1dCB5YW1sIHN0cmluZwogICAgICBpZiAoZGF0YVtrZXldKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIHZhciBfY2xlYW5lZCA9IGNsZWFuVXAoZGF0YSk7CiAgICAgICAgICB2YXIgX3BhcnNlZERhdGEgPSBkdW1wQmxvY2soX2NsZWFuZWRba2V5XSwgZGF0YU9wdGlvbnNba2V5XSk7CiAgICAgICAgICBvdXQgKz0gIlxuIi5jb25jYXQoaW5kZW50KF9wYXJzZWREYXRhKSk7CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgY29uc29sZS5lcnJvcigiRXJyb3I6IFVuYWJsZSB0byBwYXJzZSBtYXAgZGF0YSBmb3IgeWFtbCBvZiB0eXBlOiAiLmNvbmNhdCh0eXBlKSwgZSk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc29sZQogICAgICAgIH0KICAgICAgfQogICAgICBpZiAoU0lNUExFX1RZUEVTLmluY2x1ZGVzKG1hcE9mKSkgewogICAgICAgIG91dCArPSAiIyAga2V5OiAiLmNvbmNhdChtYXBPZik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gSWYgbm90IGEgc2ltcGxlIHR5cGUgaWUgc29tZSBzb3J0IG9mIG9iamVjdC9hcnJheSwgcmVjdXJzaXZlbHkgYnVpbGQgb3V0IGNvbW1lbnRlZCBmaWVsZHMgKG5vdGUgZGF0YSA9IG51bGwgaGVyZSkgcGVyIHRoZSB0eXBlJ3MgKG1hcE9mJ3MpIHNjaGVtYQogICAgICAgIHZhciBjaHVuayA9IGNyZWF0ZVlhbWwoc2NoZW1hcywgbWFwT2YsIG51bGwsIHByb2Nlc3NBbHdheXNBZGQsIGRlcHRoICsgMSwgcGF0aCA/ICIiLmNvbmNhdChwYXRoLCAiLiIpLmNvbmNhdChrZXkpIDoga2V5LCByb290VHlwZSwgZGF0YU9wdGlvbnMpOwogICAgICAgIHZhciBpbmRlbnRlZCA9IGluZGVudChjaHVuayk7CgogICAgICAgIC8vIGNvbnZlcnQgIiMgICAgZm9vIiB0byAiI2ZvbyIKICAgICAgICBpbmRlbnRlZCA9IGluZGVudGVkLnJlcGxhY2UoL14oIyk/XHNcc1xzXHMvLCAnJDEnKTsKICAgICAgICBvdXQgKz0gIiIuY29uY2F0KGluZGVudGVkKTsKICAgICAgfQogICAgICByZXR1cm4gb3V0OwogICAgfQoKICAgIC8vIHR5cGUgPT0gYXJyYXlbYXJyYXlPZl0KICAgIGlmIChhcnJheU9mKSB7CiAgICAgIGlmIChkYXRhW2tleV0pIHsKICAgICAgICB0cnkgewogICAgICAgICAgdmFyIF9jbGVhbmVkMiA9IGNsZWFuVXAoZGF0YSk7CiAgICAgICAgICBpZiAoX2NsZWFuZWQyICE9PSBudWxsICYmIF9jbGVhbmVkMiAhPT0gdm9pZCAwICYmIF9jbGVhbmVkMltrZXldKSB7CiAgICAgICAgICAgIHZhciBfcGFyc2VkRGF0YTIgPSBqc3lhbWwuZHVtcChfY2xlYW5lZDJba2V5XSk7CiAgICAgICAgICAgIG91dCArPSAiXG4iLmNvbmNhdChpbmRlbnQoX3BhcnNlZERhdGEyLnRyaW0oKSkpOwogICAgICAgICAgfQogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIkVycm9yOiBVbmFibGUgdG8gcGFyc2UgYXJyYXkgZGF0YSBmb3IgeWFtbCBvZiB0eXBlOiAiLmNvbmNhdCh0eXBlKSwgZSk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc29sZQogICAgICAgIH0KICAgICAgfQogICAgICBpZiAoU0lNUExFX1RZUEVTLmluY2x1ZGVzKGFycmF5T2YpKSB7CiAgICAgICAgb3V0ICs9ICJcbiMgIC0gIi5jb25jYXQoYXJyYXlPZik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIF9jaHVuayA9IGNyZWF0ZVlhbWwoc2NoZW1hcywgYXJyYXlPZiwgbnVsbCwgZmFsc2UsIGRlcHRoICsgMSwgcGF0aCA/ICIiLmNvbmNhdChwYXRoLCAiLiIpLmNvbmNhdChrZXkpIDoga2V5LCByb290VHlwZSwgZGF0YU9wdGlvbnMpOwogICAgICAgIHZhciBfaW5kZW50ZWQgPSBpbmRlbnQoX2NodW5rLCAyKTsKCiAgICAgICAgLy8gdHVybiAiIyAgICAgICAgZm9vIiBpbnRvICIjICAtIGZvbyIKICAgICAgICBfaW5kZW50ZWQgPSBfaW5kZW50ZWQucmVwbGFjZSgvXigjKT9ccypcc1xzKFteXHNdKS8sICckMSAgLSAkMicpOwogICAgICAgIG91dCArPSAiXG4iLmNvbmNhdChfaW5kZW50ZWQpOwogICAgICB9CiAgICAgIHJldHVybiBvdXQ7CiAgICB9CiAgICBpZiAocmVmZXJlbmNlVG8pIHsKICAgICAgb3V0ICs9ICIgIyIuY29uY2F0KHJlZmVyZW5jZVRvKTsKICAgICAgcmV0dXJuIG91dDsKICAgIH0KICAgIGlmIChTSU1QTEVfVFlQRVMuaW5jbHVkZXModHlwZSkpIHsKICAgICAgaWYgKGtleSA9PT0gJ190eXBlJyAmJiB0eXBlb2YgZGF0YVtrZXldID09PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgZGF0YVsndHlwZSddICE9PSAndW5kZWZpbmVkJykgewogICAgICAgIG91dCArPSAiICIuY29uY2F0KHNlcmlhbGl6ZVNpbXBsZVZhbHVlKGRhdGFbJ3R5cGUnXSkpOwogICAgICB9IGVsc2UgaWYgKHR5cGVvZiBkYXRhW2tleV0gPT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgb3V0ICs9ICIgIyIuY29uY2F0KHNlcmlhbGl6ZVNpbXBsZVZhbHVlKHR5cGUpKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBvdXQgKz0gIiAiLmNvbmNhdChzZXJpYWxpemVTaW1wbGVWYWx1ZShkYXRhW2tleV0pKTsKICAgICAgfQogICAgICByZXR1cm4gb3V0OwogICAgfQoKICAgIC8qKgogICAgICogLnNwZWMgaXMgdGhlIHR5cGUgdXNlZCBmb3IgdGhlIExvZ2dpbmcgY2hhcnQgT3V0cHV0IGFuZCBDbHVzdGVyT3V0cHV0IHJlc291cmNlIHNwZWMuCiAgICAgKiBXaXRob3V0IHRoaXMgT3V0cHV0IGFuZCBDbHVzdGVyT3V0cHV0IHNwZWNzIGFyZSBlbXB0eS4KICAgICAqLwogICAgaWYgKHR5cGUgPT09ICdqc29uJyB8fCB0eXBlID09PSAnLnNwZWMnKSB7CiAgICAgIHRyeSB7CiAgICAgICAgdmFyIF9wYXJzZWREYXRhMyA9IGpzeWFtbC5kdW1wKGRhdGFba2V5XSk7CiAgICAgICAgaWYgKF9wYXJzZWREYXRhMykgewogICAgICAgICAgb3V0ICs9ICJcbiIuY29uY2F0KGluZGVudChfcGFyc2VkRGF0YTMudHJpbSgpKSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIG91dCArPSAiICMiLmNvbmNhdCh0eXBlKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIG91dDsKICAgICAgfSBjYXRjaCAoZSkge30KICAgIH0KICAgIHZhciBzdWJEZWYgPSAoKF9zY2hlbWFEZWZpbml0aW9ucyA9IHNjaGVtYURlZmluaXRpb25zKSA9PT0gbnVsbCB8fCBfc2NoZW1hRGVmaW5pdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9zY2hlbWFEZWZpbml0aW9uc1t0eXBlXSkgfHwgZmluZEJ5KHNjaGVtYXMsICdpZCcsIHR5cGUpOwogICAgaWYgKHN1YkRlZikgewogICAgICB2YXIgX2NodW5rMjsKICAgICAgaWYgKHN1YkRlZiAhPT0gbnVsbCAmJiBzdWJEZWYgIT09IHZvaWQgMCAmJiBzdWJEZWYucmVzb3VyY2VGaWVsZHMgJiYgIWlzRW1wdHkoc3ViRGVmID09PSBudWxsIHx8IHN1YkRlZiA9PT0gdm9pZCAwID8gdm9pZCAwIDogc3ViRGVmLnJlc291cmNlRmllbGRzKSkgewogICAgICAgIF9jaHVuazIgPSBjcmVhdGVZYW1sKHNjaGVtYXMsIHR5cGUsIGRhdGFba2V5XSwgcHJvY2Vzc0Fsd2F5c0FkZCwgZGVwdGggKyAxLCBwYXRoID8gIiIuY29uY2F0KHBhdGgsICIuIikuY29uY2F0KGtleSkgOiBrZXksIHJvb3RUeXBlLCBkYXRhT3B0aW9ucyk7CiAgICAgIH0gZWxzZSBpZiAoZGF0YVtrZXldKSB7CiAgICAgICAgLy8gaWYgdGhlcmUgYXJlIG5vIGZpZWxkcyBkZWZpbmVkIG9uIHRoZSBzY2hlbWEgYnV0IHRoZXJlIGFyZSBpbiB0aGUgZGF0YSwganVzdCBmb3JtYXQgZGF0YSBhcyB5YW1sIGFuZCBhZGQgdG8gb3V0cHV0IHlhbWwKICAgICAgICB0cnkgewogICAgICAgICAgdmFyIHBhcnNlZCA9IGpzeWFtbC5kdW1wKGRhdGFba2V5XSk7CiAgICAgICAgICBfY2h1bmsyID0gcGFyc2VkLnRyaW0oKTsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICBjb25zb2xlLmVycm9yKCJFcnJvcjogVW5hbGUgdG8gcGFyc2UgZGF0YSBmb3IgeWFtbCBvZiB0eXBlOiAiLmNvbmNhdCh0eXBlKSwgZSk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc29sZQogICAgICAgIH0KICAgICAgfQogICAgICBvdXQgKz0gIlxuIi5jb25jYXQoaW5kZW50KF9jaHVuazIpKTsKICAgIH0gZWxzZSB7CiAgICAgIG91dCArPSAiICMiLmNvbmNhdCh0eXBlKTsKICAgIH0KICAgIHJldHVybiBvdXQ7CiAgfQp9CmZ1bmN0aW9uIGNvbW1lbnQobGluZXMpIHsKICByZXR1cm4gKGxpbmVzIHx8ICcnKS5zcGxpdCgnXG4nKS5tYXAoZnVuY3Rpb24gKHgpIHsKICAgIHJldHVybiAiIyIuY29uY2F0KHgucmVwbGFjZSgvIy9nLCAnJykpOwogIH0pLmpvaW4oJ1xuJyk7Cn0KZnVuY3Rpb24gaW5kZW50KGxpbmVzKSB7CiAgdmFyIGRlcHRoID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiAxOwogIHJldHVybiBfaW5kZW50KGxpbmVzLCBkZXB0aCAqIElOREVOVCwgJyAnLCAvXiMvKTsKfQpmdW5jdGlvbiBzZXJpYWxpemVTaW1wbGVWYWx1ZShkYXRhKSB7CiAgcmV0dXJuIGpzeWFtbC5kdW1wKGRhdGEpLnRyaW0oKTsKfQpleHBvcnQgZnVuY3Rpb24gZ2V0QmxvY2tEZXNjcmlwdG9yKHZhbHVlLCBrZXkpIHsKICB2YXIgaGVhZGVyID0gZ2V0QmxvY2tIZWFkZXIodmFsdWUsIGtleSk7CiAgcmV0dXJuIHsKICAgIGhlYWRlcjogaGVhZGVyLAogICAgaW5kZW50YXRpb246IGdldEJsb2NrSW5kZW50YXRpb24oaGVhZGVyKQogIH07Cn0KCi8qKgogKgogKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUgdGhlIGJsb2NrIG9mIHRleHQgdG8gYmUgcGFyc2VkCiAqIEBwYXJhbSB7Kn0gYmxvY2tLZXkgdGhlIGtleSBvZiB0aGUgYmxvY2sKICogQHJldHVybnMgdGhlIGtleSArIHRoZSBibG9jayBzY2FsYXIgaW5kaWNhdG9ycywgc2VlIGh0dHBzOi8veWFtbC1tdWx0aWxpbmUuaW5mbyAtIEJsb2NrIFNjYWxhcnMKICovCmZ1bmN0aW9uIGdldEJsb2NrSGVhZGVyKHZhbHVlLCBibG9ja0tleSkgewogIHZhciBjYXJkID0gIigiLmNvbmNhdChibG9ja0tleSwgIilbXFw6XVtcXHN8XFx0XStbXFx8XFw+XVtcXGRdKltcXC1cXCtdPyIpOwogIHZhciByZSA9IG5ldyBSZWdFeHAoY2FyZCwgJ2dpJyk7CiAgdmFyIGZvdW5kID0gdmFsdWUubWF0Y2gocmUpOwogIHJldHVybiAoZm91bmQgPT09IG51bGwgfHwgZm91bmQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGZvdW5kWzBdKSB8fCAnJzsKfQoKLyoqCiAqCiAqIEBwYXJhbSB7c3RyaW5nfSBibG9ja0hlYWRlciB0aGUga2V5ICsgdGhlIGJsb2NrIHNjYWxhciBpbmRpY2F0b3JzCiAqIEByZXR1cm5zIHRoZSBpbmRlbnRhdGlvbiBpbmRpY2F0b3IgZnJvbSB0aGUgYmxvY2sgaGVhZGVyLCBzZWUgaHR0cHM6Ly95YW1sLW11bHRpbGluZS5pbmZvIC0gSW5kZW50YXRpb24KICovCmZ1bmN0aW9uIGdldEJsb2NrSW5kZW50YXRpb24oYmxvY2tIZWFkZXIpIHsKICB2YXIgYmxvY2tTY2FsYXJzID0gYmxvY2tIZWFkZXIuc3Vic3RyKGJsb2NrSGVhZGVyLmluZGV4T2YoJzonKSArIDEpOwogIHZhciBpbmRlbnRhdGlvbiA9IGJsb2NrU2NhbGFycy5tYXRjaCgvXGQrLyk7CiAgcmV0dXJuIChpbmRlbnRhdGlvbiA9PT0gbnVsbCB8fCBpbmRlbnRhdGlvbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogaW5kZW50YXRpb25bMF0pIHx8ICcnOwp9CgovKioKICogQ2hlY2sgZm9yIGEgc3BlY2lmaWMgdHlwZSBhbmQgaWYgdmFsaWQgcmV0dXJuIGl0J3Mgc3ViIHR5cGUgb3Igc2VsZgogKiBAcGFyYW0ge3N0cmluZ30gdHlwZSByZXF1aXJlZCB0eXBlCiAqIEBwYXJhbSB7c3RyaW5nfSBzdHIgYWN0dWFsIHR5cGUKICogQHBhcmFtIHtSZXNvdXJjZUZpZWxkfSBmaWVsZCByZXNvdXJjZUZpZWxkIGVudHJ5IHRvIHRoZSBhY3R1YWwgdHlwZQogKgogKiBAcmV0dXJucyB0aGUgc3ViIHR5cGUsIG9yIGlmIG5vdCBmb3VuZCB0aGUgdHlwZQogKi8KZXhwb3J0IGZ1bmN0aW9uIHR5cGVSZWYodHlwZSwgc3RyKSB7CiAgdmFyIGZpZWxkID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiBudWxsOwogIHZhciBfcGFyc2VUeXBlID0gcGFyc2VUeXBlKHN0ciwgZmllbGQpLAogICAgX3BhcnNlVHlwZTIgPSBfc2xpY2VkVG9BcnJheShfcGFyc2VUeXBlLCAyKSwKICAgIGZvdW5kVHlwZSA9IF9wYXJzZVR5cGUyWzBdLAogICAgZm91bmRTdWJUeXBlID0gX3BhcnNlVHlwZTJbMV07CiAgaWYgKHR5cGUgPT09IGZvdW5kVHlwZSkgewogICAgcmV0dXJuIHR5cGVNdW5nZShmb3VuZFN1YlR5cGUgfHwgZm91bmRUeXBlKTsKICB9Cn0KZXhwb3J0IGZ1bmN0aW9uIHR5cGVNdW5nZSh0eXBlKSB7CiAgaWYgKHR5cGUgPT09ICdpbnRlZ2VyJykgewogICAgcmV0dXJuICdpbnQnOwogIH0KICBpZiAodHlwZSA9PT0gJ2lvLms4cy5hcGltYWNoaW5lcnkucGtnLmFwaS5yZXNvdXJjZS5RdWFudGl0eScpIHsKICAgIHJldHVybiAnc3RyaW5nJzsKICB9CiAgcmV0dXJuIHR5cGU7Cn0KZXhwb3J0IGZ1bmN0aW9uIHNhZmVyRHVtcChvYmopIHsKICB2YXIgb3V0ID0ganN5YW1sLmR1bXAob2JqIHx8IHt9KTsKICBpZiAob3V0ID09PSAne31cbicpIHsKICAgIHJldHVybiAnJzsKICB9CiAgcmV0dXJuIG91dDsKfQoKLyoqCiAqIEhhbmRsZXMgbmV3bGluZXMgaW5kaWNhdG9ycyBpbiB0aGUgbXVsdGlsaW5lIGJsb2Nrcy4KICoKICogdGhpcyBpcyByZXF1aXJlZCBzaW5jZSBqc3lhbWwuZHVtcCBkb2Vzbid0IHN1cHBvcnQgY2hvbXBpbmcgYW5kIHNjYWxhciBzdHlsZSBhdCB0aGUgbW9tZW50LgogKiBzZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9ub2RlY2EvanMteWFtbC9pc3N1ZXMvMTcxCgogKiBAdHlwZWRlZiB7T2JqZWN0fSBEdW1wQmxvY2tPcHRpb25zCiAqIEBwcm9wZXJ0eSB7KCc+JyB8ICd8Jyl9IFtzY2FsYXJTdHlsZV0gLSBUaGUgc2NhbGFyIHN0eWxlLgogKiBAcHJvcGVydHkgeygnLScgfCAnKycgfCAnJyB8IG51bGwpfSBbY2hvbXBpbmddIC0gVGhlIGNob21waW5nIHN0eWxlLgogKgogKiBAcGFyYW0geyp9IGRhdGEgdGhlIG11bHRpbGluZSBibG9jawogKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIFNlcmlhbGl6YXRpb24gb3B0aW9ucyBmb3IganN5YW1sLmR1bXAuCiAqIEBwYXJhbSB7bnVtYmVyfSBvcHRpb25zLmxpbmVXaWR0aCAtIFNldCBtYXggbGluZSB3aWR0aC4gU2V0IC0xIGZvciB1bmxpbWl0ZWQgd2lkdGguCiAqIEBwYXJhbSB7RHVtcEJsb2NrT3B0aW9uc30gW29wdGlvbnMuZHluYW1pY1Byb3BlcnRpZXNdIC0gT3B0aW9ucyBmb3IgZHluYW1pYyBwcm9wZXJ0aWVzLgogKiAgIERldmVsb3BlcnMgY2FuIHByb3ZpZGUgdGhlaXIgb3duIHByb3BlcnR5IG5hbWVzIHVuZGVyIGBvcHRpb25zYC4KICoKICogQHJldHVybnMgdGhlIHJlc3VsdCBvZiBqc3lhbWwuZHVtcCB3aXRoIHRoZSBhZGRpdGlvbiBvZiBtdWx0aWxpbmUgaW5kaWNhdG9ycwogKi8KZXhwb3J0IGZ1bmN0aW9uIGR1bXBCbG9jayhkYXRhKSB7CiAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHsKICAgIGxpbmVXaWR0aDogLTEKICB9OwogIHZhciBwYXJzZWQgPSBqc3lhbWwuZHVtcChkYXRhLCBvcHRpb25zKTsKICB2YXIgb3V0ID0gcGFyc2VkOwogIHZhciBibG9ja0ZpZWxkcyA9IE9iamVjdC5rZXlzKGRhdGEpLmZpbHRlcihmdW5jdGlvbiAoaykgewogICAgaWYgKHR5cGVvZiBkYXRhW2tdID09PSAnc3RyaW5nJykgewogICAgICByZXR1cm4gZGF0YVtrXS5pbmNsdWRlcygnXG4nKTsKICAgIH0KICB9KTsKICBpZiAoYmxvY2tGaWVsZHMubGVuZ3RoKSB7CiAgICB2YXIgX2l0ZXJhdG9yNCA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKGJsb2NrRmllbGRzKSwKICAgICAgX3N0ZXA0OwogICAgdHJ5IHsKICAgICAgZm9yIChfaXRlcmF0b3I0LnMoKTsgIShfc3RlcDQgPSBfaXRlcmF0b3I0Lm4oKSkuZG9uZTspIHsKICAgICAgICB2YXIgX29wdGlvbnMka2V5JHNjYWxhclN0LCBfb3B0aW9ucyRrZXksIF9vcHRpb25zJGtleSRjaG9tcGluZywgX29wdGlvbnMka2V5MjsKICAgICAgICB2YXIga2V5ID0gX3N0ZXA0LnZhbHVlOwogICAgICAgIHZhciBfZ2V0QmxvY2tEZXNjcmlwdG9yID0gZ2V0QmxvY2tEZXNjcmlwdG9yKG91dCwga2V5KSwKICAgICAgICAgIGhlYWRlciA9IF9nZXRCbG9ja0Rlc2NyaXB0b3IuaGVhZGVyLAogICAgICAgICAgaW5kZW50YXRpb24gPSBfZ2V0QmxvY2tEZXNjcmlwdG9yLmluZGVudGF0aW9uOwogICAgICAgIHZhciBzY2FsYXJTdHlsZSA9IChfb3B0aW9ucyRrZXkkc2NhbGFyU3QgPSAoX29wdGlvbnMka2V5ID0gb3B0aW9uc1trZXldKSA9PT0gbnVsbCB8fCBfb3B0aW9ucyRrZXkgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9vcHRpb25zJGtleS5zY2FsYXJTdHlsZSkgIT09IG51bGwgJiYgX29wdGlvbnMka2V5JHNjYWxhclN0ICE9PSB2b2lkIDAgPyBfb3B0aW9ucyRrZXkkc2NhbGFyU3QgOiAnfCc7CiAgICAgICAgdmFyIGNob21waW5nID0gKF9vcHRpb25zJGtleSRjaG9tcGluZyA9IChfb3B0aW9ucyRrZXkyID0gb3B0aW9uc1trZXldKSA9PT0gbnVsbCB8fCBfb3B0aW9ucyRrZXkyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfb3B0aW9ucyRrZXkyLmNob21waW5nKSAhPT0gbnVsbCAmJiBfb3B0aW9ucyRrZXkkY2hvbXBpbmcgIT09IHZvaWQgMCA/IF9vcHRpb25zJGtleSRjaG9tcGluZyA6ICcnOwoKICAgICAgICAvKioKICAgICAgICAgKiBSZXBsYWNlIHRoZSBvcmlnaW5hbCBibG9jayBpbmRpY2F0b3JzIHdpdGggdGhlIG9uZXMgcHJvdmlkZWQgaW4gdGhlIG9wdGlvbnMgcGFyYW0KICAgICAgICAgKi8KICAgICAgICBpZiAoaGVhZGVyKSB7CiAgICAgICAgICBvdXQgPSBvdXQucmVwbGFjZShoZWFkZXIsICIiLmNvbmNhdChrZXksICI6ICIpLmNvbmNhdChzY2FsYXJTdHlsZSkuY29uY2F0KGNob21waW5nKS5jb25jYXQoaW5kZW50YXRpb24pKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0gY2F0Y2ggKGVycikgewogICAgICBfaXRlcmF0b3I0LmUoZXJyKTsKICAgIH0gZmluYWxseSB7CiAgICAgIF9pdGVyYXRvcjQuZigpOwogICAgfQogIH0KICByZXR1cm4gb3V0Owp9"},{"version":3,"names":["indent","_indent","addObject","findBy","removeObject","removeObjects","jsyaml","cleanUp","isEmpty","parseType","SIMPLE_TYPES","ALWAYS_ADD","NEVER_ADD","ACTIVELY_REMOVE","INDENT","createYamlWithOptions","schemas","type","data","options","createYaml","processAlwaysAdd","arguments","length","undefined","depth","path","rootType","dataOptions","schema","rootSchema","schemaDefinitions","schemaResourceFields","concat","resourceFields","attr","attributes","apiVersion","group","version","kind","requiresResourceFields","_schemaDefinitions$ty","regularFields","always","slice","i","entry","split","join","_iterator","_createForOfIteratorHelper","_step","s","n","done","value","parts","key","prefix","err","e","f","commentFields","Object","keys","forEach","_iterator2","_step2","_iterator3","_step3","regular","map","k","stringifyField","comments","_rootSchema$attribute","namespaced","comment","out","_toConsumableArray","filter","x","trim","_schemaResourceFields","_schemaDefinitions","field","cleaned","parsedData","dump","_typeof","Array","isArray","console","error","typeMunge","mapOf","typeRef","arrayOf","referenceTo","dumpBlock","includes","chunk","indented","replace","serializeSimpleValue","subDef","parsed","lines","getBlockDescriptor","header","getBlockHeader","indentation","getBlockIndentation","blockKey","card","re","RegExp","found","match","blockHeader","blockScalars","substr","indexOf","str","_parseType","_parseType2","_slicedToArray","foundType","foundSubType","saferDump","obj","lineWidth","blockFields","_iterator4","_step4","_options$key$scalarSt","_options$key","_options$key$chomping","_options$key2","_getBlockDescriptor","scalarStyle","chomping"],"sources":["/home/ubuntu/suseconf/node_modules/@rancher/shell/utils/create-yaml.js"],"sourcesContent":["import { indent as _indent } from '@shell/utils/string';\nimport { addObject, findBy, removeObject, removeObjects } from '@shell/utils/array';\nimport jsyaml from 'js-yaml';\nimport { cleanUp, isEmpty } from '@shell/utils/object';\nimport { parseType } from '@shell/models/schema';\n\nexport const SIMPLE_TYPES = [\n  'string',\n  'multiline',\n  'masked',\n  'password',\n  'float',\n  'int',\n  'date',\n  'blob',\n  'boolean',\n  'version'\n];\n\nconst ALWAYS_ADD = [\n  'apiVersion',\n  'kind',\n  'metadata',\n  'metadata.name',\n  'spec',\n  'spec.selector',\n  'spec.selector.matchLabels',\n  'spec.template',\n  'spec.template.metadata',\n  'spec.template.metadata.labels',\n  'spec.template.spec.containers.name',\n  'spec.template.spec.containers.image',\n];\n\nexport const NEVER_ADD = [\n  'metadata.clusterName',\n  'metadata.creationTimestamp',\n  'metadata.deletionGracePeriodSeconds',\n  'metadata.deletionTimestamp',\n  'metadata.finalizers',\n  'metadata.generateName',\n  'metadata.generation',\n  'metadata.initializers',\n  'metadata.managedFields',\n  'metadata.ownerReferences',\n  'metadata.resourceVersion',\n  'metadata.relationships',\n  'metadata.selfLink',\n  'metadata.state',\n  'metadata.uid',\n  // CRD -> Schema describes the schema used for validation, pruning, and defaulting of this version of the custom resource. If we allow processing we fall into inf loop on openAPIV3Schema.allOf which contains a cyclical ref of allOf props.\n  'spec.versions.schema',\n  'status',\n  'stringData',\n  'links',\n  '_name',\n  '_labels',\n  '_annotations',\n];\n\nexport const ACTIVELY_REMOVE = [\n  'metadata.managedFields',\n  'metadata.relationships',\n  'metadata.state',\n  'status',\n  'links',\n  'type',\n  'id'\n];\n\nconst INDENT = 2;\n\nexport function createYamlWithOptions(schemas, type, data, options) {\n  return createYaml(\n    schemas,\n    type,\n    data,\n    true, 0, '', null,\n    options\n  );\n}\n\nexport function createYaml(\n  schemas,\n  type,\n  data,\n  processAlwaysAdd = true,\n  depth = 0,\n  path = '',\n  rootType = null,\n  dataOptions = {},\n) {\n  data = data || {};\n\n  let schema, rootSchema, schemaDefinitions, schemaResourceFields;\n\n  if (depth === 0) {\n    // `type` is a schema id\n    schema = findBy(schemas, 'id', type);\n\n    if ( !schema ) { // schema is only needed at the root level.\n      return `Error loading schema for ${ type }`;\n    }\n\n    rootSchema = schema;\n\n    schemaDefinitions = rootSchema.schemaDefinitions;\n    schemaResourceFields = rootSchema.resourceFields;\n\n    const attr = schema.attributes || {};\n\n    // Default to data.apiVersion/kind to accommodate spoofed types that aggregate multiple types\n    data.apiVersion = (attr.group ? `${ attr.group }/${ attr.version }` : attr.version) || data.apiVersion;\n    data.kind = attr.kind || data.kind;\n  } else {\n    rootSchema = findBy(schemas, 'id', rootType);\n\n    if (rootSchema.requiresResourceFields) { // See `requiresResourceFields` definition\n      schemaDefinitions = rootSchema.schemaDefinitions;\n      schemaResourceFields = schemaDefinitions[type]?.resourceFields;\n    } else {\n      schema = findBy(schemas, 'id', type);\n      if ( !schema ) { // schema is only needed at the root level.\n        return `Error loading schema for ${ type }`;\n      }\n      schemaResourceFields = schema.resourceFields;\n    }\n  }\n\n  if ( !rootType ) {\n    rootType = type;\n  }\n\n  const regularFields = [];\n\n  if (processAlwaysAdd) {\n    // Add all the parents of each key so that spec.template.foo.blah\n    // causes 'spec', 'template' and 'foo' keys to be created\n    const always = ALWAYS_ADD.slice();\n\n    for ( let i = always.length - 1 ; i >= 0 ; i-- ) {\n      let entry = always[i].split(/\\./);\n\n      while ( entry.length ) {\n        addObject(always, entry.join('.'));\n        entry = entry.slice(0, -1);\n      }\n    }\n\n    // Mark always fields as regular so they're not commented out\n    for ( const entry of always ) {\n      const parts = entry.split(/\\./);\n      const key = parts[parts.length - 1];\n      const prefix = parts.slice(0, -1).join('.');\n\n      if ( prefix === path && schemaResourceFields && schemaResourceFields[key] ) {\n        addObject(regularFields, key);\n      }\n    }\n  }\n\n  // Include all fields in schema's resourceFields as comments\n  const commentFields = Object.keys(schemaResourceFields || {});\n\n  commentFields.forEach((key) => {\n    if ( typeof data[key] !== 'undefined' || (depth === 0 && key === '_type') ) {\n      addObject(regularFields, key);\n    }\n  });\n\n  // add any fields defined in data as uncommented fields in yaml\n  for ( const key in data ) {\n    if ( typeof data[key] !== 'undefined' ) {\n      addObject(regularFields, key);\n    }\n  }\n\n  // ACTIVELY_REMOVE are fields that should be removed even if they are defined in data\n  for ( const entry of ACTIVELY_REMOVE ) {\n    const parts = entry.split(/\\./);\n    const key = parts[parts.length - 1];\n    const prefix = parts.slice(0, -1).join('.');\n\n    if ( prefix === path) {\n      removeObject(regularFields, key);\n    }\n  }\n\n  // NEVER_ADD are fields that should not be added as comments, but may added as regular fields if already defined in data\n  for ( const entry of NEVER_ADD ) {\n    const parts = entry.split(/\\./);\n    const key = parts[parts.length - 1];\n    const prefix = parts.slice(0, -1).join('.');\n\n    if ( prefix === path && schemaResourceFields && schemaResourceFields[key] ) {\n      removeObject(commentFields, key);\n    }\n  }\n\n  // do not include commented fields if already defined in data\n  removeObjects(commentFields, regularFields);\n\n  const regular = regularFields.map((k) => stringifyField(k));\n  const comments = commentFields.map((k) => {\n    // Don't add a namespace comment for types that aren't namespaced.\n    if ( path === 'metadata' && k === 'namespace' ) {\n      if ( rootSchema && !rootSchema.attributes?.namespaced ) {\n        return null;\n      }\n    }\n\n    return comment(stringifyField(k));\n  });\n\n  const out = [...regular, ...comments]\n    .filter((x) => x !== null)\n    .join('\\n')\n    .trim();\n\n  return out;\n\n  // ---------------\n\n  function stringifyField(key) {\n    const field = schemaResourceFields?.[key];\n    let out = `${ key }:`;\n\n    // '_type' in steve maps to kubernetes 'type' field; show 'type' field in yaml\n    if (key === '_type') {\n      out = 'type:';\n    }\n\n    // if a key on data is not listed in the schema's resourceFields, just convert it to yaml, add indents where needed, and return\n    if ( !field ) {\n      if (data[key]) {\n        try {\n          const cleaned = cleanUp(data);\n          const parsedData = jsyaml.dump(cleaned[key]);\n\n          if ( typeof data[key] === 'object' || Array.isArray(data[key]) ) {\n            out += `\\n${ indent(parsedData.trim()) }`;\n          } else {\n            out += ` ${ parsedData.trim() }`;\n          }\n\n          return out;\n        } catch (e) {\n          console.error(`Error: Unable to parse map data for yaml key: ${ key }`, e); // eslint-disable-line no-console\n        }\n      }\n\n      return null;\n    }\n\n    const type = typeMunge(field.type);\n    const mapOf = typeRef('map', type, field);\n    const arrayOf = typeRef('array', type, field);\n    const referenceTo = typeRef('reference', type);\n\n    // type == map[mapOf]\n    if ( mapOf ) {\n      // if key is defined in data, convert the value to yaml, add newline+indent and add to output yaml string\n      if (data[key]) {\n        try {\n          const cleaned = cleanUp(data);\n          const parsedData = dumpBlock(cleaned[key], dataOptions[key]);\n\n          out += `\\n${ indent(parsedData) }`;\n        } catch (e) {\n          console.error(`Error: Unable to parse map data for yaml of type: ${ type }`, e); // eslint-disable-line no-console\n        }\n      }\n\n      if ( SIMPLE_TYPES.includes(mapOf) ) {\n        out += `#  key: ${ mapOf }`;\n      } else {\n        // If not a simple type ie some sort of object/array, recursively build out commented fields (note data = null here) per the type's (mapOf's) schema\n        const chunk = createYaml(schemas, mapOf, null, processAlwaysAdd, depth + 1, (path ? `${ path }.${ key }` : key), rootType, dataOptions);\n        let indented = indent(chunk);\n\n        // convert \"#    foo\" to \"#foo\"\n        indented = indented.replace(/^(#)?\\s\\s\\s\\s/, '$1');\n\n        out += `${ indented }`;\n      }\n\n      return out;\n    }\n\n    // type == array[arrayOf]\n    if ( arrayOf ) {\n      if (data[key]) {\n        try {\n          const cleaned = cleanUp(data);\n\n          if ( cleaned?.[key] ) {\n            const parsedData = jsyaml.dump(cleaned[key]);\n\n            out += `\\n${ indent(parsedData.trim()) }`;\n          }\n        } catch (e) {\n          console.error(`Error: Unable to parse array data for yaml of type: ${ type }`, e); // eslint-disable-line no-console\n        }\n      }\n\n      if ( SIMPLE_TYPES.includes(arrayOf) ) {\n        out += `\\n#  - ${ arrayOf }`;\n      } else {\n        const chunk = createYaml(schemas, arrayOf, null, false, depth + 1, (path ? `${ path }.${ key }` : key), rootType, dataOptions);\n        let indented = indent(chunk, 2);\n\n        // turn \"#        foo\" into \"#  - foo\"\n        indented = indented.replace(/^(#)?\\s*\\s\\s([^\\s])/, '$1  - $2');\n\n        out += `\\n${ indented }`;\n      }\n\n      return out;\n    }\n\n    if ( referenceTo ) {\n      out += ` #${ referenceTo }`;\n\n      return out;\n    }\n\n    if ( SIMPLE_TYPES.includes(type) ) {\n      if (key === '_type' && typeof data[key] === 'undefined' && typeof data['type'] !== 'undefined') {\n        out += ` ${ serializeSimpleValue(data['type']) }`;\n      } else if ( typeof data[key] === 'undefined' ) {\n        out += ` #${ serializeSimpleValue(type) }`;\n      } else {\n        out += ` ${ serializeSimpleValue(data[key]) }`;\n      }\n\n      return out;\n    }\n\n    /**\n     * .spec is the type used for the Logging chart Output and ClusterOutput resource spec.\n     * Without this Output and ClusterOutput specs are empty.\n     */\n    if ( type === 'json' || type === '.spec') {\n      try {\n        const parsedData = jsyaml.dump(data[key]);\n\n        if (parsedData) {\n          out += `\\n${ indent(parsedData.trim()) }`;\n        } else {\n          out += ` #${ type }`;\n        }\n\n        return out;\n      } catch (e) {\n      }\n    }\n\n    const subDef = schemaDefinitions?.[type] || findBy(schemas, 'id', type);\n\n    if ( subDef) {\n      let chunk;\n\n      if (subDef?.resourceFields && !isEmpty(subDef?.resourceFields)) {\n        chunk = createYaml(schemas, type, data[key], processAlwaysAdd, depth + 1, (path ? `${ path }.${ key }` : key), rootType, dataOptions);\n      } else if (data[key]) {\n        // if there are no fields defined on the schema but there are in the data, just format data as yaml and add to output yaml\n        try {\n          const parsed = jsyaml.dump(data[key]);\n\n          chunk = parsed.trim();\n        } catch (e) {\n          console.error(`Error: Unale to parse data for yaml of type: ${ type }`, e); // eslint-disable-line no-console\n        }\n      }\n\n      out += `\\n${ indent(chunk) }`;\n    } else {\n      out += ` #${ type }`;\n    }\n\n    return out;\n  }\n}\n\nfunction comment(lines) {\n  return (lines || '').split('\\n').map((x) => `#${ x.replace(/#/g, '') }`).join('\\n');\n}\n\nfunction indent(lines, depth = 1) {\n  return _indent(lines, depth * INDENT, ' ', /^#/);\n}\n\nfunction serializeSimpleValue(data) {\n  return jsyaml.dump(data).trim();\n}\n\nexport function getBlockDescriptor(value, key) {\n  const header = getBlockHeader(value, key);\n\n  return {\n    header,\n    indentation: getBlockIndentation(header),\n  };\n}\n\n/**\n *\n * @param {string} value the block of text to be parsed\n * @param {*} blockKey the key of the block\n * @returns the key + the block scalar indicators, see https://yaml-multiline.info - Block Scalars\n */\nfunction getBlockHeader(value, blockKey) {\n  const card = `(${ blockKey })[\\\\:][\\\\s|\\\\t]+[\\\\|\\\\>][\\\\d]*[\\\\-\\\\+]?`;\n  const re = new RegExp(card, 'gi');\n\n  const found = value.match(re);\n\n  return found?.[0] || '';\n}\n\n/**\n *\n * @param {string} blockHeader the key + the block scalar indicators\n * @returns the indentation indicator from the block header, see https://yaml-multiline.info - Indentation\n */\nfunction getBlockIndentation(blockHeader) {\n  const blockScalars = blockHeader.substr(blockHeader.indexOf(':') + 1);\n\n  const indentation = blockScalars.match(/\\d+/);\n\n  return indentation?.[0] || '';\n}\n\n/**\n * Check for a specific type and if valid return it's sub type or self\n * @param {string} type required type\n * @param {string} str actual type\n * @param {ResourceField} field resourceField entry to the actual type\n *\n * @returns the sub type, or if not found the type\n */\nexport function typeRef(type, str, field = null) {\n  const [foundType, foundSubType] = parseType(str, field);\n\n  if (type === foundType) {\n    return typeMunge(foundSubType || foundType);\n  }\n}\n\nexport function typeMunge(type) {\n  if ( type === 'integer' ) {\n    return 'int';\n  }\n\n  if ( type === 'io.k8s.apimachinery.pkg.api.resource.Quantity' ) {\n    return 'string';\n  }\n\n  return type;\n}\n\nexport function saferDump(obj) {\n  const out = jsyaml.dump(obj || {});\n\n  if ( out === '{}\\n' ) {\n    return '';\n  }\n\n  return out;\n}\n\n/**\n * Handles newlines indicators in the multiline blocks.\n *\n * this is required since jsyaml.dump doesn't support chomping and scalar style at the moment.\n * see: https://github.com/nodeca/js-yaml/issues/171\n\n * @typedef {Object} DumpBlockOptions\n * @property {('>' | '|')} [scalarStyle] - The scalar style.\n * @property {('-' | '+' | '' | null)} [chomping] - The chomping style.\n *\n * @param {*} data the multiline block\n * @param {Object} options - Serialization options for jsyaml.dump.\n * @param {number} options.lineWidth - Set max line width. Set -1 for unlimited width.\n * @param {DumpBlockOptions} [options.dynamicProperties] - Options for dynamic properties.\n *   Developers can provide their own property names under `options`.\n *\n * @returns the result of jsyaml.dump with the addition of multiline indicators\n */\nexport function dumpBlock(data, options = { lineWidth: -1 }) {\n  const parsed = jsyaml.dump(data, options);\n\n  let out = parsed;\n\n  const blockFields = Object.keys(data).filter((k) => {\n    if (typeof data[k] === 'string') {\n      return data[k].includes('\\n');\n    }\n  });\n\n  if (blockFields.length) {\n    for (const key of blockFields) {\n      const { header, indentation } = getBlockDescriptor(out, key);\n\n      const scalarStyle = options[key]?.scalarStyle ?? '|';\n      const chomping = options[key]?.chomping ?? '';\n\n      /**\n       * Replace the original block indicators with the ones provided in the options param\n       */\n      if (header) {\n        out = out.replace(header, `${ key }: ${ scalarStyle }${ chomping }${ indentation }`);\n      }\n    }\n  }\n\n  return out;\n}\n"],"mappings":"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","ignoreList":[]}]}