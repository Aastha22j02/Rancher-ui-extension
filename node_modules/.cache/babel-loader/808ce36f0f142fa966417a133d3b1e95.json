{"remainingRequest":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js??ref--16-1!/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js??ref--17-0!/home/ubuntu/suseconf/node_modules/ts-loader/index.js??ref--17-1!/home/ubuntu/suseconf/node_modules/@rancher/shell/utils/gc/gc.ts","dependencies":[{"path":"/home/ubuntu/suseconf/node_modules/@rancher/shell/utils/gc/gc.ts","mtime":1725338146566},{"path":"/home/ubuntu/suseconf/babel.config.js","mtime":1725343995893},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js","mtime":1725271298942},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/ts-loader/index.js","mtime":1725271299135}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3NsaWNlZFRvQXJyYXkiOwppbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZW50cmllcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5rZXlzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgeyBTRVRUSU5HIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy9zZXR0aW5ncyc7CmltcG9ydCB7IENPVU5ULCBNQU5BR0VNRU5UIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy90eXBlcyc7CmltcG9ydCB7IEdDX0RFRkFVTFRTIH0gZnJvbSAnLi9nYy10eXBlcyc7CnZhciBHYXJiYWdlQ29sbGVjdCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gR2FyYmFnZUNvbGxlY3QoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEdhcmJhZ2VDb2xsZWN0KTsKICAgIHRoaXMuY2FjaGVkR2NQcmVmcyA9IEdDX0RFRkFVTFRTOwogICAgdGhpcy5jYWNoZWRHY1ByZWZzU3RhbXAgPSAnJzsKICAgIHRoaXMuZGVidWdMb2cgPSBmdW5jdGlvbiAoKSB7CiAgICAgIGlmIChHYXJiYWdlQ29sbGVjdC5FTkFCTEVfREVCVUdfTE9HR0lORykgewogICAgICAgIHZhciBfY29uc29sZTsKICAgICAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHsKICAgICAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07CiAgICAgICAgfQogICAgICAgIChfY29uc29sZSA9IGNvbnNvbGUpLmRlYnVnLmFwcGx5KF9jb25zb2xlLCBbJ0dDJ10uY29uY2F0KGFyZ3MpKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1jb25zb2xlCiAgICAgIH0KICAgIH07CiAgICAvKioKICAgICAqIFRpbWUgdGhlIEdDIGxhc3QgcmFuCiAgICAgKi8KICAgIHRoaXMuZ2NMYXN0UnVuID0gMDsKICAgIC8qKgogICAgICogVG8gYXZvaWQgSlNPTi5wYXJzZSBvbiB0aGUgYHVpLXBlcmZvcm1hbmNlYCBzZXR0aW5nIGtlZXAgYSBsb2NhbCBjYWNoZQogICAgICovCiAgICB0aGlzLmdldFVpUGVyZkdhcmJhZ2VDb2xsZWN0aW9uID0gZnVuY3Rpb24gKHJvb3RTdGF0ZSkgewogICAgICB2YXIgX2E7CiAgICAgIHZhciB1aVBlcmZTZXR0aW5nID0gKF9hID0gcm9vdFN0YXRlLm1hbmFnZW1lbnQudHlwZXNbTUFOQUdFTUVOVC5TRVRUSU5HXSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmxpc3QuZmluZChmdW5jdGlvbiAocykgewogICAgICAgIHJldHVybiBzLmlkID09PSBTRVRUSU5HLlVJX1BFUkZPUk1BTkNFOwogICAgICB9KTsKICAgICAgaWYgKCF1aVBlcmZTZXR0aW5nIHx8ICF1aVBlcmZTZXR0aW5nLnZhbHVlKSB7CiAgICAgICAgLy8gQ291bGQgYmUgaW4gdGhlIHByb2Nlc3Mgb2YgbG9nZ2luZyBvdXQKICAgICAgICByZXR1cm4gdW5kZWZpbmVkOwogICAgICB9CiAgICAgIHZhciBzdGFtcCA9ICIiLmNvbmNhdCh1aVBlcmZTZXR0aW5nLm1ldGFkYXRhLmdlbmVyYXRpb24sICItIikuY29uY2F0KHVpUGVyZlNldHRpbmcubWV0YWRhdGEucmVzb3VyY2VWZXJzaW9uKTsKICAgICAgaWYgKF90aGlzLmNhY2hlZEdjUHJlZnNTdGFtcCAhPT0gc3RhbXApIHsKICAgICAgICBfdGhpcy5kZWJ1Z0xvZygiVXBkYXRpbmcgIi5jb25jYXQoU0VUVElORy5VSV9QRVJGT1JNQU5DRSwgIiBjYWNoZSIpKTsKICAgICAgICBfdGhpcy5jYWNoZWRHY1ByZWZzU3RhbXAgPSBzdGFtcDsKICAgICAgICB2YXIgdWlQZXJmU2V0dGluZ1BhcnNlZCA9IEpTT04ucGFyc2UodWlQZXJmU2V0dGluZy52YWx1ZSk7CiAgICAgICAgX3RoaXMuY2FjaGVkR2NQcmVmcyA9IHVpUGVyZlNldHRpbmdQYXJzZWQuZ2FyYmFnZUNvbGxlY3Rpb247CiAgICAgIH0KICAgICAgcmV0dXJuIF90aGlzLmNhY2hlZEdjUHJlZnM7CiAgICB9OwogICAgLyoqCiAgICAgKiBUaGUgbGFzdCB0aW1lIGEgcmVzb3VyY2Ugd2FzIGFjY2Vzc2VkIGJ5IGVpdGhlciBmaW5kIG9yIGdldHRlcnMgc3R5bGUgZnVuY3Rpb25zCiAgICAgKi8KICAgIHRoaXMubGFzdEFjY2Vzc2VkQ2FjaGUgPSB7fTsKICAgIC8qKgogICAgICogVHJhY2sgd2hlbiBhIGxvZ2dlZCBpbiByb3V0ZSBjaGFuZ2VzLgogICAgICovCiAgICB0aGlzLmxhc3RSb3V0ZUNoYW5nZSA9IDA7CiAgfQogIC8vIC0tLS0tLS0tLS0tLS0gR0MgRW5hYmxlZCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0KICByZXR1cm4gX2NyZWF0ZUNsYXNzKEdhcmJhZ2VDb2xsZWN0LCBbewogICAga2V5OiAiZ2NFbmFibGVkQWxsIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnY0VuYWJsZWRBbGwocHNldWRvQ3R4LCB0eXBlKSB7CiAgICAgIHJldHVybiB0aGlzLmdjRW5hYmxlZEZvclN0b3JlKHBzZXVkb0N0eC5zdGF0ZSkgJiYgdGhpcy5nY0VuYWJsZWRTZXR0aW5nKHBzZXVkb0N0eCkgJiYgdGhpcy5nY0VuYWJsZWRGb3JUeXBlKHBzZXVkb0N0eCwgdHlwZSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2NFbmFibGVkU2V0dGluZyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2NFbmFibGVkU2V0dGluZyhwc2V1ZG9DdHgpIHsKICAgICAgdmFyIHJvb3RTdGF0ZSA9IHBzZXVkb0N0eC5yb290U3RhdGU7CiAgICAgIC8vIERvbid0IHVzZSBhIGdldHRlci4uLiBhcyB3ZSdsbCBlbmQgdXAgdHJpZ2dlcmluZyBvdXJzZWx2ZXMgYWdhaW4KICAgICAgdmFyIHVpUGVyZkdhcmJhZ2VDb2xsZWN0aW9uID0gdGhpcy5nZXRVaVBlcmZHYXJiYWdlQ29sbGVjdGlvbihyb290U3RhdGUpOwogICAgICByZXR1cm4gdWlQZXJmR2FyYmFnZUNvbGxlY3Rpb24gPT09IG51bGwgfHwgdWlQZXJmR2FyYmFnZUNvbGxlY3Rpb24gPT09IHZvaWQgMCA/IHZvaWQgMCA6IHVpUGVyZkdhcmJhZ2VDb2xsZWN0aW9uLmVuYWJsZWQ7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2NFbmFibGVkRm9yU3RvcmUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdjRW5hYmxlZEZvclN0b3JlKHN0YXRlKSB7CiAgICAgIHZhciBfYTsKICAgICAgcmV0dXJuIChfYSA9IHN0YXRlID09PSBudWxsIHx8IHN0YXRlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzdGF0ZS5jb25maWcpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5zdXBwb3J0c0djOwogICAgfQogICAgLyoqCiAgICAgKiBTdG9yZSBjYW4gcmVxdWlyZSBjZXJ0YWluIHR5cGVzIGFyZSBub3QgR0MnZCAoZm9yIGV4YW1wbGUgYGNsdXN0ZXJgIGFuZCBgc2NoZW1hYHMsIGBjb3VudHNgLCBldGMpCiAgICAgKi8KICB9LCB7CiAgICBrZXk6ICJnY0VuYWJsZWRGb3JUeXBlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnY0VuYWJsZWRGb3JUeXBlKHBzZXVkb0N0eCwgdHlwZSkgewogICAgICB2YXIgZ2V0dGVycyA9IHBzZXVkb0N0eC5nZXR0ZXJzOwogICAgICBpZiAoIXR5cGUgfHwgZ2V0dGVycy5nY0lnbm9yZVR5cGVzW3R5cGVdKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIHJldHVybiB0cnVlOwogICAgfQogIH0sIHsKICAgIGtleTogImdjRW5hYmxlZEludGVydmFsIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnY0VuYWJsZWRJbnRlcnZhbChwc2V1ZG9DdHgpIHsKICAgICAgdmFyIHJvb3RTdGF0ZSA9IHBzZXVkb0N0eC5yb290U3RhdGU7CiAgICAgIC8vIERvbid0IHVzZSBhIGdldHRlci4uLiBhcyB3ZSdsbCBlbmQgdXAgdHJpZ2dlcmluZyBvdXJzZWx2ZXMgYWdhaW4KICAgICAgdmFyIHVpUGVyZkdhcmJhZ2VDb2xsZWN0aW9uID0gdGhpcy5nZXRVaVBlcmZHYXJiYWdlQ29sbGVjdGlvbihyb290U3RhdGUpOwogICAgICByZXR1cm4gewogICAgICAgIGVuYWJsZWQ6IHVpUGVyZkdhcmJhZ2VDb2xsZWN0aW9uID09PSBudWxsIHx8IHVpUGVyZkdhcmJhZ2VDb2xsZWN0aW9uID09PSB2b2lkIDAgPyB2b2lkIDAgOiB1aVBlcmZHYXJiYWdlQ29sbGVjdGlvbi5lbmFibGVkSW50ZXJ2YWwsCiAgICAgICAgaW50ZXJ2YWw6ICh1aVBlcmZHYXJiYWdlQ29sbGVjdGlvbiA9PT0gbnVsbCB8fCB1aVBlcmZHYXJiYWdlQ29sbGVjdGlvbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogdWlQZXJmR2FyYmFnZUNvbGxlY3Rpb24uaW50ZXJ2YWwpIHx8IDAKICAgICAgfTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnY0VuYWJsZWRSb3V0ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2NFbmFibGVkUm91dGUocHNldWRvQ3R4KSB7CiAgICAgIHZhciByb290U3RhdGUgPSBwc2V1ZG9DdHgucm9vdFN0YXRlOwogICAgICAvLyBEb24ndCB1c2UgYSBnZXR0ZXIuLi4gYXMgd2UnbGwgZW5kIHVwIHRyaWdnZXJpbmcgb3Vyc2VsdmVzIGFnYWluCiAgICAgIHZhciB1aVBlcmZHYXJiYWdlQ29sbGVjdGlvbiA9IHRoaXMuZ2V0VWlQZXJmR2FyYmFnZUNvbGxlY3Rpb24ocm9vdFN0YXRlKTsKICAgICAgcmV0dXJuIHVpUGVyZkdhcmJhZ2VDb2xsZWN0aW9uID09PSBudWxsIHx8IHVpUGVyZkdhcmJhZ2VDb2xsZWN0aW9uID09PSB2b2lkIDAgPyB2b2lkIDAgOiB1aVBlcmZHYXJiYWdlQ29sbGVjdGlvbi5lbmFibGVkT25OYXZpZ2F0ZTsKICAgIH0KICAgIC8vIC0tLS0tLS0tLS0tLS0gR0MgKGFjdHVhbCkgLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAvKioKICAgICAqIFJlbW92ZSBzdGFsZSByZXNvdXJjZSB0eXBlcyBmcm9tIHRoZSBzdG9yZSBhbmQgc3RvcCB3YXRjaGluZyB0aGVtIGZvciBjaGFuZ2VzCiAgICAgKi8KICB9LCB7CiAgICBrZXk6ICJnYXJiYWdlQ29sbGVjdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2FyYmFnZUNvbGxlY3QoY3R4KSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwogICAgICB2YXIgaWdub3JlVHlwZXMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9OwogICAgICB2YXIgbm93ID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7CiAgICAgIC8vIElzIGdjIGN1cnJlbnRseSBydW5uaW5nIE9SIGhhcyBydW4gaW4gdGhlIHBhc3QgR0NfUkVfUlVOX0dBUCByZXR1cm4gZWFybHkKICAgICAgaWYgKHRoaXMuZ2NMYXN0UnVuID09PSBudWxsIHx8IG5vdyAtIHRoaXMuZ2NMYXN0UnVuIDwgR2FyYmFnZUNvbGxlY3QuR0NfUkVfUlVOX0dBUCkgewogICAgICAgIHRoaXMuZGVidWdMb2coJ1NraXBwaW5nIChydW5uaW5nIG9yIHJlY2VudGx5IHJ1biknLCB0aGlzLmdjTGFzdFJ1biA/IG5ldyBEYXRlKHRoaXMuZ2NMYXN0UnVuKSA6ICdydW5uaW5nJyk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHRoaXMuZ2NMYXN0UnVuID0gbnVsbDsKICAgICAgdmFyIGdjZCA9IHt9OwogICAgICB0cnkgewogICAgICAgIHZhciBnZXR0ZXJzID0gY3R4LmdldHRlcnMsCiAgICAgICAgICByb290U3RhdGUgPSBjdHgucm9vdFN0YXRlLAogICAgICAgICAgZGlzcGF0Y2ggPSBjdHguZGlzcGF0Y2g7CiAgICAgICAgaWYgKCFyb290U3RhdGUuY2x1c3RlclJlYWR5KSB7CiAgICAgICAgICB0aGlzLmRlYnVnTG9nKCdTa2lwcGluZyAoY2x1c3RlciBub3QgcmVhZHkpJyk7CiAgICAgICAgICB0aGlzLmdjTGFzdFJ1biA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICB0aGlzLmRlYnVnTG9nKCItLS0tLS0gU3RhcnRlZCAtLS0tLS0iKTsKICAgICAgICB2YXIgdWlQZXJmR2FyYmFnZUNvbGxlY3Rpb24gPSB0aGlzLmdldFVpUGVyZkdhcmJhZ2VDb2xsZWN0aW9uKHJvb3RTdGF0ZSk7CiAgICAgICAgaWYgKCF1aVBlcmZHYXJiYWdlQ29sbGVjdGlvbikgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICB2YXIgbWF4QWdlID0gdWlQZXJmR2FyYmFnZUNvbGxlY3Rpb24uYWdlVGhyZXNob2xkICogMTAwMDsKICAgICAgICB2YXIgbWF4Q291bnQgPSB1aVBlcmZHYXJiYWdlQ29sbGVjdGlvbi5jb3VudFRocmVzaG9sZDsKICAgICAgICB0aGlzLmRlYnVnTG9nKCJNYXggQWdlOiAiLmNvbmNhdChtYXhBZ2UsICIuIE1heCBDb3VudDogIikuY29uY2F0KG1heENvdW50KSk7IC8vICwgJ0NhY2hlJywgdGhpcy5sYXN0QWNjZXNzZWRDYWNoZQogICAgICAgIHZhciBzdG9yZSA9IGN0eC5zdGF0ZS5jb25maWcubmFtZXNwYWNlOwogICAgICAgIC8vIHRoaXMuZGVidWdMb2coJ0NhY2hlJywgdGhpcy5sYXN0QWNjZXNzZWRDYWNoZSk7CiAgICAgICAgT2JqZWN0LmVudHJpZXModGhpcy5sYXN0QWNjZXNzZWRDYWNoZVtzdG9yZV0gfHwge30pLmZvckVhY2goZnVuY3Rpb24gKF9yZWYpIHsKICAgICAgICAgIHZhciBfcmVmMiA9IF9zbGljZWRUb0FycmF5KF9yZWYsIDIpLAogICAgICAgICAgICB0eXBlID0gX3JlZjJbMF0sCiAgICAgICAgICAgIGxhc3RBY2Nlc3NlZCA9IF9yZWYyWzFdOwogICAgICAgICAgdmFyIF9hOwogICAgICAgICAgaWYgKCFsYXN0QWNjZXNzZWQpIHsKICAgICAgICAgICAgLy8gVGhlcmUncyBubyBsYXN0IGFjY2Vzc2VkIHRpbWUuLi4gZ2MgaXMgcHJvYmFibHkgZGlzYWJsZWQgaW4gYW5vdGhlciB3YXkKICAgICAgICAgICAgX3RoaXMyLmRlYnVnTG9nKCIiLmNvbmNhdCh0eXBlLCAiOiBTa2lwcGluZyAobm8gYWNjZXNzZWQgdGltZSkiKSk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICAgIGlmICghX3RoaXMyLmdjRW5hYmxlZEZvclR5cGUoY3R4LCB0eXBlKSkgewogICAgICAgICAgICAvLyBUaGlzIHNwZWNpZmljIHN0b3JlIGlzIHRlbGxpbmcgdXMgdG8gaWdub3JlIHRoZSB0eXBlIChmb3IgZXhhbXBsZSBgY2x1c3RlcmAgc3RvcmUgd2lsbCBub3QgR0Mgc2NoZW1hJ3MsIGNvdW50cywgZXRjKQogICAgICAgICAgICBfdGhpczIuZGVidWdMb2coIiIuY29uY2F0KHR5cGUsICI6IFNraXBwaW5nICh0eXBlIGlnbm9yZWQgYnkgc3RvcmUpIikpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoaWdub3JlVHlwZXNbdHlwZV0pIHsKICAgICAgICAgICAgLy8gV2UncmUgZ29pbmcgdG8gYSBwbGFjZSB0aGF0IG5lZWRzIHRoZSByZXNvdXJjZQogICAgICAgICAgICBfdGhpczIuZGVidWdMb2coIiIuY29uY2F0KHR5cGUsICI6IFNraXBwaW5nIChuYXZpZ2F0aW5nIHRvIHR5cGUpIikpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgICBpZiAobm93IC0gbGFzdEFjY2Vzc2VkIDw9IG1heEFnZSkgewogICAgICAgICAgICAvLyBUaGUgcmVzb3VyY2Ugd2FzIHJlY2VudGx5IGFjY2Vzc2VkCiAgICAgICAgICAgIF90aGlzMi5kZWJ1Z0xvZygiIi5jb25jYXQodHlwZSwgIjogU2tpcHBpbmcgKHJlY2VudGx5IGFjY2Vzc2VkKSIpKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQogICAgICAgICAgaWYgKF90aGlzMi5sYXN0Um91dGVDaGFuZ2UgIT09IHVuZGVmaW5lZCAmJiBfdGhpczIubGFzdFJvdXRlQ2hhbmdlIDwgbGFzdEFjY2Vzc2VkKSB7CiAgICAgICAgICAgIC8vIFRoZSByZXNvdXJjZSBpcyBiZWluZyB1c2VkIGluIHRoZSBjdXJyZW50IHJvdXRlL3BhZ2UKICAgICAgICAgICAgX3RoaXMyLmRlYnVnTG9nKCIiLmNvbmNhdCh0eXBlLCAiOiBTa2lwcGluZyAodXNlZCBpbiBjdXJyZW50IHJvdXRlL3BhZ2UpIikpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgICB2YXIgY291bnRGcm9tUmVzb3VyY2UgPSAoX2EgPSBnZXR0ZXJzLmFsbChDT1VOVClbMF0uY291bnRzW3R5cGVdKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Euc3VtbWFyeS5jb3VudDsKICAgICAgICAgIHZhciBjdXJyZW50Q291bnQgPSBjb3VudEZyb21SZXNvdXJjZSAhPT0gbnVsbCAmJiBjb3VudEZyb21SZXNvdXJjZSAhPT0gdm9pZCAwID8gY291bnRGcm9tUmVzb3VyY2UgOiAwOwogICAgICAgICAgaWYgKGN1cnJlbnRDb3VudCA9PT0gdW5kZWZpbmVkIHx8IGN1cnJlbnRDb3VudCA8IG1heENvdW50KSB7CiAgICAgICAgICAgIC8vIFRoZXJlJ3MgdG9vIGZldyByZXNvdXJjZXMsIHdlIG1pZ2h0IGFzIHdlbGwga2VlcCB0aGVtIHRvIGF2b2lkIGEgbmV0d29yayByZXF1ZXN0IHdoZW4gd2UgbmVlZCB0aGVtIGFnYWluCiAgICAgICAgICAgIF90aGlzMi5kZWJ1Z0xvZygiIi5jb25jYXQodHlwZSwgIjogU2tpcHBpbmcgKHRvbyBmZXcgb2YgcmVzb3VyY2UpIikpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgICBfdGhpczIuZGVidWdMb2coIiIuY29uY2F0KHR5cGUsICI6IFJlbW92aW5nIGZyb20gc3RvcmUiKSk7CiAgICAgICAgICBkaXNwYXRjaCgnZm9yZ2V0VHlwZScsIHR5cGUpOwogICAgICAgICAgZ2NkW3R5cGVdID0gY3VycmVudENvdW50OwogICAgICAgIH0pOwogICAgICAgIHRoaXMuZ2NMYXN0UnVuID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICB0aGlzLmRlYnVnTG9nKCI6IEVycm9yIiwgZSk7CiAgICAgICAgdGhpcy5nY0xhc3RSdW4gPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTsKICAgICAgfQogICAgICBpZiAoT2JqZWN0LmtleXMoZ2NkKS5sZW5ndGggPiAwKSB7CiAgICAgICAgY29uc29sZS5pbmZvKCdHYXJiYWdlIENvbGxlY3RlZCBSZXNvdXJjZXMnLCBnY2QpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnNvbGUKICAgICAgfQogICAgICB0aGlzLmRlYnVnTG9nKCItLS0tLS0gRmluaXNoZWQgLS0tLS0tIik7CiAgICB9CiAgICAvLyAtLS0tLS0tLS0tLS0tIEdDIFVwZGF0ZSBsb2NhbCBjYWNoZSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIC8qKgogICAgICogVXBkYXRlIHRoZSB0aW1lIHRoYXQgdGhlIHJlc291cmNlIHR5cGUgd2FzIGFjY2Vzc2VkCiAgICAgKiBUaGlzIG5lZWRzIHRvIHJ1biBhZnRlciBhbnkgdHlwZSBpbml0aWFsaXNhdGlvbiAoYWthIHJlZ2lzdGVyVHlwZSkKICAgICAqLwogIH0sIHsKICAgIGtleTogImdjVXBkYXRlTGFzdEFjY2Vzc2VkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnY1VwZGF0ZUxhc3RBY2Nlc3NlZChwc2V1ZG9DdHgsIHR5cGUpIHsKICAgICAgaWYgKCF0aGlzLmdjRW5hYmxlZEFsbChwc2V1ZG9DdHgsIHR5cGUpKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHZhciBzdG9yZSA9IHBzZXVkb0N0eC5zdGF0ZS5jb25maWcubmFtZXNwYWNlOwogICAgICBpZiAoIXRoaXMubGFzdEFjY2Vzc2VkQ2FjaGVbc3RvcmVdKSB7CiAgICAgICAgdGhpcy5sYXN0QWNjZXNzZWRDYWNoZVtzdG9yZV0gPSB7fTsKICAgICAgfQogICAgICB0aGlzLmxhc3RBY2Nlc3NlZENhY2hlW3N0b3JlXVt0eXBlXSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpOwogICAgfQogICAgLyoqCiAgICAgKiBVcGRhdGUgdGhlIHRpbWUgdGhlIHVzZXIgbGFzdCBjaGFuZ2VkIHJvdXRlcwogICAgICovCiAgfSwgewogICAga2V5OiAiZ2NVcGRhdGVSb3V0ZUNoYW5nZWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdjVXBkYXRlUm91dGVDaGFuZ2VkKCkgewogICAgICB0aGlzLmxhc3RSb3V0ZUNoYW5nZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpOwogICAgfQogICAgLy8gLS0tLS0tLS0tLS0tLSBHQyByZXNldCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIC8qKgogICAgICogUmVtb3ZlIGFsbCBjYWNoZWQgYWNjZXNzIHRpbWVzIGZvciB0aGUgZ2l2ZW4gc3RvcmUKICAgICAqLwogIH0sIHsKICAgIGtleTogImdjUmVzZXRTdG9yZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2NSZXNldFN0b3JlKHN0YXRlKSB7CiAgICAgIHZhciBzdG9yZSA9IHN0YXRlLmNvbmZpZy5uYW1lc3BhY2U7CiAgICAgIGRlbGV0ZSB0aGlzLmxhc3RBY2Nlc3NlZENhY2hlW3N0b3JlXTsKICAgICAgdGhpcy5kZWJ1Z0xvZygnRm9yZ2V0dGluZyBTdG9yZTonLCBzdG9yZSk7CiAgICB9CiAgICAvKioKICAgICAqIFJlbW92ZSBjYWNoZWQgYWNjZXNzIHRpbWUgZm9yIHRoZSBnaXZlbiByZXNvdXJjZSB0eXBlCiAgICAgKi8KICB9LCB7CiAgICBrZXk6ICJnY1Jlc2V0VHlwZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2NSZXNldFR5cGUoc3RhdGUsIHR5cGUpIHsKICAgICAgdmFyIHN0b3JlID0gc3RhdGUuY29uZmlnLm5hbWVzcGFjZTsKICAgICAgaWYgKCF0aGlzLmxhc3RBY2Nlc3NlZENhY2hlW3N0b3JlXSkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBkZWxldGUgdGhpcy5sYXN0QWNjZXNzZWRDYWNoZVtzdG9yZV1bdHlwZV07CiAgICAgIHRoaXMuZGVidWdMb2coJ0ZvcmdldHRpbmcgVHlwZTonLCBzdG9yZSwgdHlwZSk7CiAgICB9CiAgfV0pOwp9KCk7CkdhcmJhZ2VDb2xsZWN0LkVOQUJMRV9ERUJVR19MT0dHSU5HID0gZmFsc2U7Ci8qKgogKiBEb24ndCBydW4gR0MgaWYgaXQncyBiZWVuIHJ1biB3aXRoaW4gNSBzZWNvbmRzCiAqLwpHYXJiYWdlQ29sbGVjdC5HQ19SRV9SVU5fR0FQID0gMTAwMCAqIDU7CnZhciBnYyA9IG5ldyBHYXJiYWdlQ29sbGVjdCgpOwpleHBvcnQgZGVmYXVsdCBnYzs="},{"version":3,"names":["SETTING","COUNT","MANAGEMENT","GC_DEFAULTS","GarbageCollect","_this","_classCallCheck","cachedGcPrefs","cachedGcPrefsStamp","debugLog","ENABLE_DEBUG_LOGGING","_console","_len","arguments","length","args","Array","_key","console","debug","apply","concat","gcLastRun","getUiPerfGarbageCollection","rootState","uiPerfSetting","_a","management","types","list","find","s","id","UI_PERFORMANCE","value","undefined","stamp","metadata","generation","resourceVersion","uiPerfSettingParsed","JSON","parse","garbageCollection","lastAccessedCache","lastRouteChange","_createClass","key","gcEnabledAll","pseudoCtx","type","gcEnabledForStore","state","gcEnabledSetting","gcEnabledForType","uiPerfGarbageCollection","enabled","config","supportsGc","getters","gcIgnoreTypes","gcEnabledInterval","enabledInterval","interval","gcEnabledRoute","enabledOnNavigate","garbageCollect","ctx","_this2","ignoreTypes","now","Date","getTime","GC_RE_RUN_GAP","gcd","dispatch","clusterReady","maxAge","ageThreshold","maxCount","countThreshold","store","namespace","Object","entries","forEach","_ref","_ref2","_slicedToArray","lastAccessed","countFromResource","all","counts","summary","count","currentCount","e","keys","info","gcUpdateLastAccessed","gcUpdateRouteChanged","gcResetStore","gcResetType","gc"],"sources":["/home/ubuntu/suseconf/node_modules/@rancher/shell/utils/gc/gc.ts"],"sourcesContent":["import { SETTING } from '@shell/config/settings';\nimport { COUNT, MANAGEMENT } from '@shell/config/types';\nimport { GC_DEFAULTS, GC_PREFERENCES } from './gc-types';\n\nclass GarbageCollect {\n  private static ENABLE_DEBUG_LOGGING = false;\n\n  /**\n   * Don't run GC if it's been run within 5 seconds\n   */\n  private static GC_RE_RUN_GAP = 1000 * 5;\n\n  private cachedGcPrefs: GC_PREFERENCES = GC_DEFAULTS;\n\n  private cachedGcPrefsStamp = '';\n\n  private debugLog = (...args: any) => {\n    if (GarbageCollect.ENABLE_DEBUG_LOGGING) {\n      console.debug('GC', ...args); // eslint-disable-line no-console\n    }\n  };\n\n  /**\n   * Time the GC last ran\n   */\n  private gcLastRun: number | null = 0;\n\n  /**\n   * To avoid JSON.parse on the `ui-performance` setting keep a local cache\n   */\n  private getUiPerfGarbageCollection = (rootState: any) => {\n    const uiPerfSetting = rootState.management.types[MANAGEMENT.SETTING]?.list.find((s: any) => s.id === SETTING.UI_PERFORMANCE);\n\n    if (!uiPerfSetting || !uiPerfSetting.value) {\n      // Could be in the process of logging out\n      return undefined;\n    }\n    const stamp = `${ uiPerfSetting.metadata.generation }-${ uiPerfSetting.metadata.resourceVersion }`;\n\n    if (this.cachedGcPrefsStamp !== stamp) {\n      this.debugLog(`Updating ${ SETTING.UI_PERFORMANCE } cache`);\n      this.cachedGcPrefsStamp = stamp;\n      const uiPerfSettingParsed = JSON.parse(uiPerfSetting.value);\n\n      this.cachedGcPrefs = uiPerfSettingParsed.garbageCollection;\n    }\n\n    return this.cachedGcPrefs;\n  };\n\n  /**\n   * The last time a resource was accessed by either find or getters style functions\n   */\n  private lastAccessedCache: {\n    [store: string]: {\n      [type: string]: number;\n    }\n  } = {}\n\n  /**\n   * Track when a logged in route changes.\n   */\n  private lastRouteChange = 0;\n\n  // ------------- GC Enabled ---------------------\n\n  gcEnabledAll(pseudoCtx: any, type: string) {\n    return this.gcEnabledForStore(pseudoCtx.state) && this.gcEnabledSetting(pseudoCtx) && this.gcEnabledForType(pseudoCtx, type);\n  }\n\n  gcEnabledSetting(pseudoCtx: any) {\n    const { rootState } = pseudoCtx;\n\n    // Don't use a getter... as we'll end up triggering ourselves again\n    const uiPerfGarbageCollection = this.getUiPerfGarbageCollection(rootState);\n\n    return uiPerfGarbageCollection?.enabled;\n  }\n\n  gcEnabledForStore(state: any) {\n    return state?.config?.supportsGc;\n  }\n\n  /**\n   * Store can require certain types are not GC'd (for example `cluster` and `schema`s, `counts`, etc)\n   */\n  gcEnabledForType(pseudoCtx: any, type: string) {\n    const { getters } = pseudoCtx;\n\n    if (!type || getters.gcIgnoreTypes[type]) {\n      return false;\n    }\n\n    return true;\n  }\n\n  gcEnabledInterval(pseudoCtx: any) {\n    const { rootState } = pseudoCtx;\n\n    // Don't use a getter... as we'll end up triggering ourselves again\n    const uiPerfGarbageCollection = this.getUiPerfGarbageCollection(rootState);\n\n    return {\n      enabled:  uiPerfGarbageCollection?.enabledInterval,\n      interval: uiPerfGarbageCollection?.interval || 0\n    };\n  }\n\n  gcEnabledRoute(pseudoCtx: any) {\n    const { rootState } = pseudoCtx;\n\n    // Don't use a getter... as we'll end up triggering ourselves again\n    const uiPerfGarbageCollection = this.getUiPerfGarbageCollection(rootState);\n\n    return uiPerfGarbageCollection?.enabledOnNavigate;\n  }\n\n  // ------------- GC (actual) ---------------------\n\n  /**\n   * Remove stale resource types from the store and stop watching them for changes\n   */\n  garbageCollect(ctx: any, ignoreTypes: {[type: string]: boolean} = {}) {\n    const now = new Date().getTime();\n\n    // Is gc currently running OR has run in the past GC_RE_RUN_GAP return early\n    if (this.gcLastRun === null || now - this.gcLastRun < GarbageCollect.GC_RE_RUN_GAP) {\n      this.debugLog('Skipping (running or recently run)', this.gcLastRun ? new Date(this.gcLastRun) : 'running');\n\n      return;\n    }\n\n    this.gcLastRun = null;\n    const gcd: {[type: string]: number} = {};\n\n    try {\n      const { getters, rootState, dispatch } = ctx;\n\n      if (!rootState.clusterReady) {\n        this.debugLog('Skipping (cluster not ready)');\n        this.gcLastRun = new Date().getTime();\n\n        return ;\n      }\n      this.debugLog(`------ Started ------`);\n\n      const uiPerfGarbageCollection = this.getUiPerfGarbageCollection(rootState);\n\n      if (!uiPerfGarbageCollection) {\n        return ;\n      }\n      const maxAge = uiPerfGarbageCollection.ageThreshold * 1000;\n      const maxCount = uiPerfGarbageCollection.countThreshold;\n\n      this.debugLog(`Max Age: ${ maxAge }. Max Count: ${ maxCount }`);// , 'Cache', this.lastAccessedCache\n\n      const store = ctx.state.config.namespace;\n\n      // this.debugLog('Cache', this.lastAccessedCache);\n\n      Object.entries((this.lastAccessedCache[store] || {})).forEach(([type, lastAccessed]) => {\n        if (!lastAccessed) {\n          // There's no last accessed time... gc is probably disabled in another way\n          this.debugLog(`${ type }: Skipping (no accessed time)`);\n\n          return;\n        }\n\n        if (!this.gcEnabledForType(ctx, type)) {\n          // This specific store is telling us to ignore the type (for example `cluster` store will not GC schema's, counts, etc)\n          this.debugLog(`${ type }: Skipping (type ignored by store)`);\n\n          return;\n        }\n\n        if (ignoreTypes[type]) {\n          // We're going to a place that needs the resource\n          this.debugLog(`${ type }: Skipping (navigating to type)`);\n\n          return;\n        }\n\n        if (now - lastAccessed <= maxAge) {\n          // The resource was recently accessed\n\n          this.debugLog(`${ type }: Skipping (recently accessed)`);\n\n          return;\n        }\n\n        if (this.lastRouteChange !== undefined && this.lastRouteChange < lastAccessed ) {\n          // The resource is being used in the current route/page\n          this.debugLog(`${ type }: Skipping (used in current route/page)`);\n\n          return;\n        }\n\n        const countFromResource = getters.all(COUNT)[0].counts[type]?.summary.count;\n        const currentCount = countFromResource ?? 0;\n\n        if (currentCount === undefined || currentCount < maxCount) {\n          // There's too few resources, we might as well keep them to avoid a network request when we need them again\n          this.debugLog(`${ type }: Skipping (too few of resource)`);\n\n          return;\n        }\n\n        this.debugLog(`${ type }: Removing from store`);\n        dispatch('forgetType', type);\n        gcd[type] = currentCount;\n      });\n\n      this.gcLastRun = new Date().getTime();\n    } catch (e) {\n      this.debugLog(`: Error`, e);\n      this.gcLastRun = new Date().getTime();\n    }\n\n    if (Object.keys(gcd).length > 0) {\n      console.info('Garbage Collected Resources', gcd); // eslint-disable-line no-console\n    }\n\n    this.debugLog(`------ Finished ------`);\n  }\n\n  // ------------- GC Update local cache ---------------------\n\n  /**\n   * Update the time that the resource type was accessed\n   * This needs to run after any type initialisation (aka registerType)\n   */\n  gcUpdateLastAccessed(pseudoCtx: any, type: string) {\n    if (!this.gcEnabledAll(pseudoCtx, type)) {\n      return;\n    }\n    const store = pseudoCtx.state.config.namespace;\n\n    if (!this.lastAccessedCache[store]) {\n      this.lastAccessedCache[store] = {};\n    }\n\n    this.lastAccessedCache[store][type] = new Date().getTime();\n  }\n\n  /**\n   * Update the time the user last changed routes\n   */\n  gcUpdateRouteChanged() {\n    this.lastRouteChange = new Date().getTime();\n  }\n\n  // ------------- GC reset ---------------------\n\n  /**\n   * Remove all cached access times for the given store\n   */\n  gcResetStore(state: any) {\n    const store = state.config.namespace;\n\n    delete this.lastAccessedCache[store];\n\n    this.debugLog('Forgetting Store:', store);\n  }\n\n  /**\n   * Remove cached access time for the given resource type\n   */\n  gcResetType(state: any, type: string) {\n    const store = state.config.namespace;\n\n    if (!this.lastAccessedCache[store]) {\n      return;\n    }\n    delete this.lastAccessedCache[store][type];\n\n    this.debugLog('Forgetting Type:', store, type);\n  }\n}\n\nconst gc = new GarbageCollect();\n\nexport default gc;\n"],"mappings":"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","ignoreList":[]}]}