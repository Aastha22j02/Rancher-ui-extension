{"remainingRequest":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js??ref--16-1!/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js??ref--17-0!/home/ubuntu/suseconf/node_modules/ts-loader/index.js??ref--17-1!/home/ubuntu/suseconf/node_modules/@rancher/shell/utils/validators/formRules/index.ts","dependencies":[{"path":"/home/ubuntu/suseconf/node_modules/@rancher/shell/utils/validators/formRules/index.ts","mtime":1725338146566},{"path":"/home/ubuntu/suseconf/babel.config.js","mtime":1725343995893},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js","mtime":1725271298942},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/ts-loader/index.js","mtime":1725271299135}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90b0NvbnN1bWFibGVBcnJheSI7CmltcG9ydCBfc2xpY2VkVG9BcnJheSBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9zbGljZWRUb0FycmF5IjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcyI7CmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2siOwpmdW5jdGlvbiBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihyLCBlKSB7IHZhciB0ID0gInVuZGVmaW5lZCIgIT0gdHlwZW9mIFN5bWJvbCAmJiByW1N5bWJvbC5pdGVyYXRvcl0gfHwgclsiQEBpdGVyYXRvciJdOyBpZiAoIXQpIHsgaWYgKEFycmF5LmlzQXJyYXkocikgfHwgKHQgPSBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkocikpIHx8IGUgJiYgciAmJiAibnVtYmVyIiA9PSB0eXBlb2Ygci5sZW5ndGgpIHsgdCAmJiAociA9IHQpOyB2YXIgX24gPSAwLCBGID0gZnVuY3Rpb24gRigpIHt9OyByZXR1cm4geyBzOiBGLCBuOiBmdW5jdGlvbiBuKCkgeyByZXR1cm4gX24gPj0gci5sZW5ndGggPyB7IGRvbmU6ICEwIH0gOiB7IGRvbmU6ICExLCB2YWx1ZTogcltfbisrXSB9OyB9LCBlOiBmdW5jdGlvbiBlKHIpIHsgdGhyb3cgcjsgfSwgZjogRiB9OyB9IHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBpdGVyYXRlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC4iKTsgfSB2YXIgbywgYSA9ICEwLCB1ID0gITE7IHJldHVybiB7IHM6IGZ1bmN0aW9uIHMoKSB7IHQgPSB0LmNhbGwocik7IH0sIG46IGZ1bmN0aW9uIG4oKSB7IHZhciByID0gdC5uZXh0KCk7IHJldHVybiBhID0gci5kb25lLCByOyB9LCBlOiBmdW5jdGlvbiBlKHIpIHsgdSA9ICEwLCBvID0gcjsgfSwgZjogZnVuY3Rpb24gZigpIHsgdHJ5IHsgYSB8fCBudWxsID09IHQucmV0dXJuIHx8IHQucmV0dXJuKCk7IH0gZmluYWxseSB7IGlmICh1KSB0aHJvdyBvOyB9IH0gfTsgfQpmdW5jdGlvbiBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkociwgYSkgeyBpZiAocikgeyBpZiAoInN0cmluZyIgPT0gdHlwZW9mIHIpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShyLCBhKTsgdmFyIHQgPSB7fS50b1N0cmluZy5jYWxsKHIpLnNsaWNlKDgsIC0xKTsgcmV0dXJuICJPYmplY3QiID09PSB0ICYmIHIuY29uc3RydWN0b3IgJiYgKHQgPSByLmNvbnN0cnVjdG9yLm5hbWUpLCAiTWFwIiA9PT0gdCB8fCAiU2V0IiA9PT0gdCA/IEFycmF5LmZyb20ocikgOiAiQXJndW1lbnRzIiA9PT0gdCB8fCAvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdCh0KSA/IF9hcnJheUxpa2VUb0FycmF5KHIsIGEpIDogdm9pZCAwOyB9IH0KZnVuY3Rpb24gX2FycmF5TGlrZVRvQXJyYXkociwgYSkgeyAobnVsbCA9PSBhIHx8IGEgPiByLmxlbmd0aCkgJiYgKGEgPSByLmxlbmd0aCk7IGZvciAodmFyIGUgPSAwLCBuID0gQXJyYXkoYSk7IGUgPCBhOyBlKyspIG5bZV0gPSByW2VdOyByZXR1cm4gbjsgfQppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maW5kLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmRlc2NyaXB0aW9uLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZnJvbS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuam9pbi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNsaWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci5jb25zdHJ1Y3Rvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci5pcy1pbnRlZ2VyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLm1hdGNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0IHsgUkJBQyB9IGZyb20gJ0BzaGVsbC9jb25maWcvdHlwZXMnOwppbXBvcnQgeyBIQ0kgfSBmcm9tICdAc2hlbGwvY29uZmlnL2xhYmVscy1hbm5vdGF0aW9ucyc7CmltcG9ydCBpc0VtcHR5IGZyb20gJ2xvZGFzaC9pc0VtcHR5JzsKaW1wb3J0IGhhcyBmcm9tICdsb2Rhc2gvaGFzJzsKaW1wb3J0IGlzVXJsIGZyb20gJ2lzLXVybCc7Ci8vIGltcG9ydCB1bmlxIGZyb20gJ2xvZGFzaC91bmlxJzsKaW1wb3J0IGNyb25zdHJ1ZSBmcm9tICdjcm9uc3RydWUnOwppbXBvcnQgeyBpc0h0dHBzLCBpc0xvY2FsaG9zdCwgaGFzVHJhaWxpbmdGb3J3YXJkU2xhc2ggfSBmcm9tICdAc2hlbGwvdXRpbHMvdmFsaWRhdG9ycy9zZXR0aW5nJzsKZXhwb3J0IHZhciBQb3J0ID0gLyojX19QVVJFX18qL19jcmVhdGVDbGFzcyhmdW5jdGlvbiBQb3J0KHBvcnQpIHsKICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUG9ydCk7CiAgdGhpcy5zdHJpbmcgPSBTdHJpbmcocG9ydCk7CiAgdGhpcy5pbnQgPSBwYXJzZUludCh0aGlzLnN0cmluZywgMTApOwogIHRoaXMuZW1wdHkgPSAhcG9ydCAmJiB0aGlzLmludCAhPT0gMDsKICB0aGlzLmlzTnVtYmVyID0gIWlzTmFOKHRoaXMuaW50KSAmJiAhdGhpcy5zdHJpbmcuaW5jbHVkZXMoJ2UnKTsgLy8gbGVhdmluZyBvdXQgdGhlIGV4cG9uZW50IGVkZ2UgY2FzZSB0byBrZWVwIHRoZSBsb2dpYyBzaW1wbGUgYW5kIGJlY2F1c2UgcG9ydCBudW1iZXJzIGFyZW4ndCB0aGF0IGJpZy4uLgogIHRoaXMuaXNJbnQgPSB0aGlzLmlzTnVtYmVyICYmICF0aGlzLnN0cmluZy5pbmNsdWRlcygnLicpOwp9KTsKdmFyIHJ1blZhbGlkYXRvcnMgPSBmdW5jdGlvbiBydW5WYWxpZGF0b3JzKHZhbCwgdmFsaWRhdG9ycykgewogIHZhciBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcih2YWxpZGF0b3JzKSwKICAgIF9zdGVwOwogIHRyeSB7CiAgICBmb3IgKF9pdGVyYXRvci5zKCk7ICEoX3N0ZXAgPSBfaXRlcmF0b3IubigpKS5kb25lOykgewogICAgICB2YXIgdmFsaWRhdG9yID0gX3N0ZXAudmFsdWU7CiAgICAgIHZhciBtZXNzYWdlID0gdmFsaWRhdG9yKHZhbCk7CiAgICAgIGlmIChtZXNzYWdlKSB7CiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7CiAgICAgIH0KICAgIH0KICB9IGNhdGNoIChlcnIpIHsKICAgIF9pdGVyYXRvci5lKGVycik7CiAgfSBmaW5hbGx5IHsKICAgIF9pdGVyYXRvci5mKCk7CiAgfQp9OwovLyAidCIgaXMgdGhlIGZ1bmN0aW9uIG5hbWUgd2UgdXNlIGZvciBnZXR0aW5nIGEgdHJhbnNsYXRlZCBzdHJpbmcKZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKHQsIF9yZWYpIHsKICB2YXIgX3JlZiRrZXkgPSBfcmVmLmtleSwKICAgIGtleSA9IF9yZWYka2V5ID09PSB2b2lkIDAgPyAnVmFsdWUnIDogX3JlZiRrZXk7CiAgLy8gdXRpbGl0eSB2YWxpZGF0b3JzIHRoZXNlIHZhbGlkYXRvcnMgb25seSBnZXQgdXNlZCBieSBvdGhlciB2YWxpZGF0b3JzCiAgdmFyIHN0YXJ0RG90ID0gZnVuY3Rpb24gc3RhcnREb3QobGFiZWwpIHsKICAgIHJldHVybiBmdW5jdGlvbiAodmFsKSB7CiAgICAgIHJldHVybiAodmFsID09PSBudWxsIHx8IHZhbCA9PT0gdm9pZCAwID8gdm9pZCAwIDogdmFsLnNsaWNlKDAsIDEpKSA9PT0gJy4nID8gdCgidmFsaWRhdGlvbi5kbnMuIi5jb25jYXQobGFiZWwsICIuc3RhcnREb3QiKSwgewogICAgICAgIGtleToga2V5CiAgICAgIH0pIDogdW5kZWZpbmVkOwogICAgfTsKICB9OwogIHZhciBlbmREb3QgPSBmdW5jdGlvbiBlbmREb3QobGFiZWwpIHsKICAgIHJldHVybiBmdW5jdGlvbiAodmFsKSB7CiAgICAgIHJldHVybiAodmFsID09PSBudWxsIHx8IHZhbCA9PT0gdm9pZCAwID8gdm9pZCAwIDogdmFsLnNsaWNlKC0xKSkgPT09ICcuJyA/IHQoInZhbGlkYXRpb24uZG5zLiIuY29uY2F0KGxhYmVsLCAiLmVuZERvdCIpLCB7CiAgICAgICAga2V5OiBrZXkKICAgICAgfSkgOiB1bmRlZmluZWQ7CiAgICB9OwogIH07CiAgdmFyIHN0YXJ0TnVtYmVyID0gZnVuY3Rpb24gc3RhcnROdW1iZXIobGFiZWwpIHsKICAgIHJldHVybiBmdW5jdGlvbiAodmFsKSB7CiAgICAgIHZhciBfYTsKICAgICAgcmV0dXJuICgoX2EgPSB2YWwgPT09IG51bGwgfHwgdmFsID09PSB2b2lkIDAgPyB2b2lkIDAgOiB2YWwuc2xpY2UoMCwgMSkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5tYXRjaCgvWzAtOV0vKSkgPyB0KCJ2YWxpZGF0aW9uLmRucy4iLmNvbmNhdChsYWJlbCwgIi5zdGFydE51bWJlciIpLCB7CiAgICAgICAga2V5OiBrZXkKICAgICAgfSkgOiB1bmRlZmluZWQ7CiAgICB9OwogIH07CiAgdmFyIHN0YXJ0SHlwaGVuID0gZnVuY3Rpb24gc3RhcnRIeXBoZW4obGFiZWwpIHsKICAgIHJldHVybiBmdW5jdGlvbiAodmFsKSB7CiAgICAgIHJldHVybiAodmFsID09PSBudWxsIHx8IHZhbCA9PT0gdm9pZCAwID8gdm9pZCAwIDogdmFsLnNsaWNlKDAsIDEpKSA9PT0gJy0nID8gdCgidmFsaWRhdGlvbi5kbnMuIi5jb25jYXQobGFiZWwsICIuc3RhcnRIeXBoZW4iKSwgewogICAgICAgIGtleToga2V5CiAgICAgIH0pIDogdW5kZWZpbmVkOwogICAgfTsKICB9OwogIHZhciBlbmRIeXBoZW4gPSBmdW5jdGlvbiBlbmRIeXBoZW4obGFiZWwpIHsKICAgIHJldHVybiBmdW5jdGlvbiAodmFsKSB7CiAgICAgIHJldHVybiAodmFsID09PSBudWxsIHx8IHZhbCA9PT0gdm9pZCAwID8gdm9pZCAwIDogdmFsLnNsaWNlKC0xKSkgPT09ICctJyA/IHQoInZhbGlkYXRpb24uZG5zLiIuY29uY2F0KGxhYmVsLCAiLmVuZEh5cGhlbiIpLCB7CiAgICAgICAga2V5OiBrZXkKICAgICAgfSkgOiB1bmRlZmluZWQ7CiAgICB9OwogIH07CiAgdmFyIG1pblZhbHVlID0gZnVuY3Rpb24gbWluVmFsdWUobWluKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKHZhbCkgewogICAgICByZXR1cm4gTnVtYmVyKHZhbCkgPCBOdW1iZXIobWluKSA/IHQoJ3ZhbGlkYXRpb24ubWluVmFsdWUnLCB7CiAgICAgICAga2V5OiBrZXksCiAgICAgICAgbWluOiBtaW4KICAgICAgfSkgOiB1bmRlZmluZWQ7CiAgICB9OwogIH07CiAgdmFyIG1heFZhbHVlID0gZnVuY3Rpb24gbWF4VmFsdWUobWF4KSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKHZhbCkgewogICAgICByZXR1cm4gTnVtYmVyKHZhbCkgPiBOdW1iZXIobWF4KSA/IHQoJ3ZhbGlkYXRpb24ubWF4VmFsdWUnLCB7CiAgICAgICAga2V5OiBrZXksCiAgICAgICAgbWF4OiBtYXgKICAgICAgfSkgOiB1bmRlZmluZWQ7CiAgICB9OwogIH07CiAgdmFyIGJldHdlZW5WYWx1ZXMgPSBmdW5jdGlvbiBiZXR3ZWVuVmFsdWVzKF9yZWYyKSB7CiAgICB2YXIgX3JlZjMgPSBfc2xpY2VkVG9BcnJheShfcmVmMiwgMiksCiAgICAgIG1pbiA9IF9yZWYzWzBdLAogICAgICBtYXggPSBfcmVmM1sxXTsKICAgIHJldHVybiBmdW5jdGlvbiAodmFsKSB7CiAgICAgIHJldHVybiBtaW5WYWx1ZShtaW4pKHZhbCkgfHwgbWF4VmFsdWUobWF4KSh2YWwpID8gdCgndmFsaWRhdGlvbi5iZXR3ZWVuVmFsdWVzJywgewogICAgICAgIGtleToga2V5LAogICAgICAgIG1pbjogbWluLAogICAgICAgIG1heDogbWF4CiAgICAgIH0pIDogdW5kZWZpbmVkOwogICAgfTsKICB9OwogIHZhciBtaW5MZW5ndGggPSBmdW5jdGlvbiBtaW5MZW5ndGgobWluKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKHZhbCkgewogICAgICByZXR1cm4gdmFsLmxlbmd0aCA8IE51bWJlcihtaW4pID8gdCgndmFsaWRhdGlvbi5taW5MZW5ndGgnLCB7CiAgICAgICAga2V5OiBrZXksCiAgICAgICAgbWluOiBtaW4KICAgICAgfSkgOiB1bmRlZmluZWQ7CiAgICB9OwogIH07CiAgdmFyIG1heExlbmd0aCA9IGZ1bmN0aW9uIG1heExlbmd0aChtYXgpIHsKICAgIHJldHVybiBmdW5jdGlvbiAodmFsKSB7CiAgICAgIHJldHVybiB2YWwubGVuZ3RoID4gTnVtYmVyKG1heCkgPyB0KCd2YWxpZGF0aW9uLm1heExlbmd0aCcsIHsKICAgICAgICBrZXk6IGtleSwKICAgICAgICBtYXg6IG1heAogICAgICB9KSA6IHVuZGVmaW5lZDsKICAgIH07CiAgfTsKICB2YXIgYmV0d2Vlbkxlbmd0aHMgPSBmdW5jdGlvbiBiZXR3ZWVuTGVuZ3RocyhfcmVmNCkgewogICAgdmFyIF9yZWY1ID0gX3NsaWNlZFRvQXJyYXkoX3JlZjQsIDIpLAogICAgICBtaW4gPSBfcmVmNVswXSwKICAgICAgbWF4ID0gX3JlZjVbMV07CiAgICByZXR1cm4gZnVuY3Rpb24gKHZhbCkgewogICAgICByZXR1cm4gbWluTGVuZ3RoKG1pbikodmFsKSB8fCBtYXhMZW5ndGgobWF4KSh2YWwpID8gdCgndmFsaWRhdGlvbi5iZXR3ZWVuTGVuZ3RocycsIHsKICAgICAgICBrZXk6IGtleSwKICAgICAgICBtaW46IG1pbiwKICAgICAgICBtYXg6IG1heAogICAgICB9KSA6IHVuZGVmaW5lZDsKICAgIH07CiAgfTsKICB2YXIgcmVxdWlyZWRJbnQgPSBmdW5jdGlvbiByZXF1aXJlZEludCh2YWwpIHsKICAgIHJldHVybiBpc05hTihwYXJzZUludCh2YWwsIDEwKSkgPyB0KCd2YWxpZGF0aW9uLm51bWJlci5yZXF1aXJlZEludCcsIHsKICAgICAga2V5OiBrZXkKICAgIH0pIDogdW5kZWZpbmVkOwogIH07CiAgdmFyIGlzSW50ZWdlciA9IGZ1bmN0aW9uIGlzSW50ZWdlcih2YWwpIHsKICAgIHJldHVybiAhTnVtYmVyLmlzSW50ZWdlcigrdmFsKSB8fCAiIi5jb25jYXQodmFsKS5tYXRjaCgvXC4rL2cpID8gdCgndmFsaWRhdGlvbi5udW1iZXIucmVxdWlyZWRJbnQnLCB7CiAgICAgIGtleToga2V5CiAgICB9KSA6IHVuZGVmaW5lZDsKICB9OwogIHZhciBpc1Bvc2l0aXZlID0gZnVuY3Rpb24gaXNQb3NpdGl2ZSh2YWwpIHsKICAgIHJldHVybiArdmFsIDwgMCA/IHQoJ3ZhbGlkYXRpb24ubnVtYmVyLmlzUG9zaXRpdmUnLCB7CiAgICAgIGtleToga2V5CiAgICB9KSA6IHVuZGVmaW5lZDsKICB9OwogIHZhciBpc09jdGFsID0gZnVuY3Rpb24gaXNPY3RhbCh2YWwpIHsKICAgIHZhciB2YWx1ZVN0cmluZyA9ICIiLmNvbmNhdCh2YWwpOwogICAgdmFyIGlzVmFsaWQgPSB2YWx1ZVN0cmluZy5tYXRjaCgvKF4wKykoLispLyk7CiAgICByZXR1cm4gaXNWYWxpZCA/IHQoJ3ZhbGlkYXRpb24ubnVtYmVyLmlzT2N0YWwnLCB7CiAgICAgIGtleToga2V5CiAgICB9KSA6IHVuZGVmaW5lZDsKICB9OwogIHZhciBwb3J0TnVtYmVyID0gZnVuY3Rpb24gcG9ydE51bWJlcih2YWwpIHsKICAgIHJldHVybiBwYXJzZUludCh2YWwsIDEwKSA8IDEgfHwgcGFyc2VJbnQodmFsLCAxMCkgPiA2NTUzNSA/IHQoJ3ZhbGlkYXRpb24ubnVtYmVyLmJldHdlZW4nLCB7CiAgICAgIGtleToga2V5LAogICAgICBtaW46ICcxJywKICAgICAgbWF4OiAnNjU1MzUnCiAgICB9KSA6IHVuZGVmaW5lZDsKICB9OwogIHZhciBkbnNDaGFycyA9IGZ1bmN0aW9uIGRuc0NoYXJzKHZhbCkgewogICAgdmFyIG1hdGNoZWRDaGFycyA9IHZhbCA9PT0gbnVsbCB8fCB2YWwgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHZhbC5tYXRjaCgvW14keydBLVphLXowLTktJ31dL2cpOwogICAgaWYgKG1hdGNoZWRDaGFycykgewogICAgICByZXR1cm4gdCgndmFsaWRhdGlvbi5jaGFycycsIHsKICAgICAgICBrZXk6IGtleSwKICAgICAgICBjb3VudDogbWF0Y2hlZENoYXJzLmxlbmd0aCwKICAgICAgICBjaGFyczogbWF0Y2hlZENoYXJzLm1hcChmdW5jdGlvbiAoY2hhcikgewogICAgICAgICAgcmV0dXJuIGNoYXIgPT09ICcgJyA/ICdTcGFjZScgOiAiXCIiLmNvbmNhdChjaGFyLCAiXCIiKTsKICAgICAgICB9KS5qb2luKCcsICcpCiAgICAgIH0pOwogICAgfQogICAgcmV0dXJuIHVuZGVmaW5lZDsKICB9OwogIC8vIHRoZSB3ZWlyZCBlZGdlIGNhc2UgaGVyZSBkZWFscyB3aXRoIGludGVybmF0aW9uYWxpemVkIGRvbWFpbiBuYW1lcyB3aGljaCBhcmUgcHJlcGVuZGVkIHdpdGggJ3huLS0nCiAgLy8gaHR0cHM6Ly9kYXRhdHJhY2tlci5pZXRmLm9yZy9kb2MvaHRtbC9yZmM1ODkxI3NlY3Rpb24tNC4yLjMuMQogIHZhciBkbnNEb3VibGVEYXNoID0gZnVuY3Rpb24gZG5zRG91YmxlRGFzaCh2YWwpIHsKICAgIHJldHVybiAodmFsID09PSBudWxsIHx8IHZhbCA9PT0gdm9pZCAwID8gdm9pZCAwIDogdmFsLnN1YnN0cigyLCAyKSkgPT09ICctLScgJiYgKHZhbCA9PT0gbnVsbCB8fCB2YWwgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHZhbC5zdWJzdHIoMCwgMikpICE9PSAneG4nID8gdCgidmFsaWRhdGlvbi5kbnMuZG91YmxlSHlwaGVuIiwgewogICAgICBrZXk6IGtleQogICAgfSkgOiB1bmRlZmluZWQ7CiAgfTsKICB2YXIgZG5zSWFuYVNlcnZpY2VOYW1lRG91YmxlRGFzaCA9IGZ1bmN0aW9uIGRuc0lhbmFTZXJ2aWNlTmFtZURvdWJsZURhc2godmFsKSB7CiAgICByZXR1cm4gKHZhbCA9PT0gbnVsbCB8fCB2YWwgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHZhbC5zdWJzdHIoMiwgMikpID09PSAnLS0nICYmICh2YWwgPT09IG51bGwgfHwgdmFsID09PSB2b2lkIDAgPyB2b2lkIDAgOiB2YWwuc3Vic3RyKDAsIDIpKSAhPT0gJ3huJyA/IHQoInZhbGlkYXRpb24uZG5zLmRvdWJsZUh5cGhlbiIsIHsKICAgICAga2V5OiBrZXkKICAgIH0pIDogdW5kZWZpbmVkOwogIH07CiAgdmFyIGRuc0VtcHR5ID0gZnVuY3Rpb24gZG5zRW1wdHkobGFiZWwpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciB2YWwgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6ICcnOwogICAgICByZXR1cm4gdmFsLmxlbmd0aCA9PT0gMCA/IHQoInZhbGlkYXRpb24uZG5zLiIuY29uY2F0KGxhYmVsLCAiLmVtcHR5TGFiZWwiKSwgewogICAgICAgIGtleToga2V5LAogICAgICAgIG1pbjogMQogICAgICB9KSA6IHVuZGVmaW5lZDsKICAgIH07CiAgfTsKICB2YXIgZG5zVG9vTG9uZyA9IGZ1bmN0aW9uIGRuc1Rvb0xvbmcobGFiZWwpIHsKICAgIHZhciBsZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IDYzOwogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIHZhbCA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogJyc7CiAgICAgIHJldHVybiB2YWwubGVuZ3RoID4gbGVuZ3RoID8gdCgidmFsaWRhdGlvbi5kbnMuIi5jb25jYXQobGFiZWwsICIudG9vTG9uZ0xhYmVsIiksIHsKICAgICAgICBrZXk6IGtleSwKICAgICAgICBtYXg6IGxlbmd0aAogICAgICB9KSA6IHVuZGVmaW5lZDsKICAgIH07CiAgfTsKICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnMKICB2YXIgaG9zdG5hbWVFbXB0eSA9IGZ1bmN0aW9uIGhvc3RuYW1lRW1wdHkoKSB7CiAgICB2YXIgdmFsID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiAnJzsKICAgIHJldHVybiB2YWwubGVuZ3RoID09PSAwID8gdCgndmFsaWRhdGlvbi5kbnMuaG9zdG5hbWUuZW1wdHknLCB7CiAgICAgIGtleToga2V5CiAgICB9KSA6IHVuZGVmaW5lZDsKICB9OwogIHZhciBob3N0bmFtZVRvb0xvbmcgPSBmdW5jdGlvbiBob3N0bmFtZVRvb0xvbmcoKSB7CiAgICB2YXIgdmFsID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiAnJzsKICAgIHJldHVybiB2YWwubGVuZ3RoID4gMjUzID8gdCgndmFsaWRhdGlvbi5kbnMuaG9zdG5hbWUudG9vTG9uZycsIHsKICAgICAga2V5OiBrZXksCiAgICAgIG1heDogMjUzCiAgICB9KSA6IHVuZGVmaW5lZDsKICB9OwogIHZhciBhYnNvbHV0ZVBhdGggPSBmdW5jdGlvbiBhYnNvbHV0ZVBhdGgoKSB7CiAgICB2YXIgdmFsID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiAnJzsKICAgIHJldHVybiB2YWxbMF0gIT09ICcvJyAmJiB2YWwubGVuZ3RoID4gMCA/IHQoJ3ZhbGlkYXRpb24ucGF0aCcsIHsKICAgICAga2V5OiBrZXkKICAgIH0pIDogdW5kZWZpbmVkOwogIH07CiAgdmFyIHJlcXVpcmVkID0gZnVuY3Rpb24gcmVxdWlyZWQodmFsKSB7CiAgICByZXR1cm4gIXZhbCAmJiB2YWwgIT09IGZhbHNlID8gdCgndmFsaWRhdGlvbi5yZXF1aXJlZCcsIHsKICAgICAga2V5OiBrZXkKICAgIH0pIDogdW5kZWZpbmVkOwogIH07CiAgdmFyIG5vVXBwZXJDYXNlID0gZnVuY3Rpb24gbm9VcHBlckNhc2UoKSB7CiAgICB2YXIgdmFsID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiAnJzsKICAgIHJldHVybiB2YWwudG9Mb3dlckNhc2UoKSAhPT0gdmFsID8gdCgndmFsaWRhdGlvbi5ub1VwcGVyQ2FzZScsIHsKICAgICAga2V5OiBrZXkKICAgIH0pIDogdW5kZWZpbmVkOwogIH07CiAgdmFyIGNyb25TY2hlZHVsZSA9IGZ1bmN0aW9uIGNyb25TY2hlZHVsZSh2YWwpIHsKICAgIHRyeSB7CiAgICAgIGNyb25zdHJ1ZS50b1N0cmluZyh2YWwpOwogICAgfSBjYXRjaCAoZSkgewogICAgICByZXR1cm4gdCgndmFsaWRhdGlvbi5pbnZhbGlkQ3JvbicpOwogICAgfQogIH07CiAgdmFyIGh0dHBzID0gZnVuY3Rpb24gaHR0cHModmFsKSB7CiAgICByZXR1cm4gdmFsICYmICFpc0h0dHBzKHZhbCkgPyB0KCd2YWxpZGF0aW9uLnNldHRpbmcuc2VydmVyVXJsLmh0dHBzJykgOiB1bmRlZmluZWQ7CiAgfTsKICB2YXIgbG9jYWxob3N0ID0gZnVuY3Rpb24gbG9jYWxob3N0KHZhbCkgewogICAgcmV0dXJuIGlzTG9jYWxob3N0KHZhbCkgPyB0KCd2YWxpZGF0aW9uLnNldHRpbmcuc2VydmVyVXJsLmxvY2FsaG9zdCcpIDogdW5kZWZpbmVkOwogIH07CiAgdmFyIHRyYWlsaW5nRm9yd2FyZFNsYXNoID0gZnVuY3Rpb24gdHJhaWxpbmdGb3J3YXJkU2xhc2godmFsKSB7CiAgICByZXR1cm4gaGFzVHJhaWxpbmdGb3J3YXJkU2xhc2godmFsKSA/IHQoJ3ZhbGlkYXRpb24uc2V0dGluZy5zZXJ2ZXJVcmwudHJhaWxpbmdGb3J3YXJkU2xhc2gnKSA6IHVuZGVmaW5lZDsKICB9OwogIHZhciB1cmwgPSBmdW5jdGlvbiB1cmwodmFsKSB7CiAgICByZXR1cm4gdmFsICYmICFpc1VybCh2YWwpID8gdCgndmFsaWRhdGlvbi5zZXR0aW5nLnNlcnZlclVybC51cmwnKSA6IHVuZGVmaW5lZDsKICB9OwogIHZhciBhbHBoYW51bWVyaWMgPSBmdW5jdGlvbiBhbHBoYW51bWVyaWModmFsKSB7CiAgICByZXR1cm4gdmFsICYmICEvXlthLXpBLVowLTldKyQvLnRlc3QodmFsKSA/IHQoJ3ZhbGlkYXRpb24uYWxwaGFudW1lcmljJywgewogICAgICBrZXk6IGtleQogICAgfSkgOiB1bmRlZmluZWQ7CiAgfTsKICB2YXIgaW50ZXJ2YWwgPSBmdW5jdGlvbiBpbnRlcnZhbCh2YWwpIHsKICAgIHJldHVybiAhL15cZCtbaG1zXSQvLnRlc3QodmFsKSA/IHQoJ3ZhbGlkYXRpb24ubW9uaXRvcmluZy5yb3V0ZS5pbnRlcnZhbCcsIHsKICAgICAga2V5OiBrZXkKICAgIH0pIDogdW5kZWZpbmVkOwogIH07CiAgdmFyIGNvbnRhaW5lckltYWdlID0gZnVuY3Rpb24gY29udGFpbmVySW1hZ2UodmFsKSB7CiAgICByZXR1cm4gISh2YWwgPT09IG51bGwgfHwgdmFsID09PSB2b2lkIDAgPyB2b2lkIDAgOiB2YWwuaW1hZ2UpID8gdCgnd29ya2xvYWQudmFsaWRhdGlvbi5jb250YWluZXJJbWFnZScsIHsKICAgICAgbmFtZTogdmFsLm5hbWUKICAgIH0pIDogdW5kZWZpbmVkOwogIH07CiAgdmFyIGNvbnRhaW5lckltYWdlcyA9IGZ1bmN0aW9uIGNvbnRhaW5lckltYWdlcyh2YWwpIHsKICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2UsIF9mOwogICAgdmFyIGNvbnRhaW5lcnMgPSB2YWwuam9iVGVtcGxhdGUgPyAoX2QgPSAoX2MgPSAoX2IgPSAoX2EgPSB2YWwgPT09IG51bGwgfHwgdmFsID09PSB2b2lkIDAgPyB2b2lkIDAgOiB2YWwuam9iVGVtcGxhdGUpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5zcGVjKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IudGVtcGxhdGUpID09PSBudWxsIHx8IF9jID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYy5zcGVjKSA9PT0gbnVsbCB8fCBfZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2QuY29udGFpbmVycyA6IChfZiA9IChfZSA9IHZhbCA9PT0gbnVsbCB8fCB2YWwgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHZhbC50ZW1wbGF0ZSkgPT09IG51bGwgfHwgX2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9lLnNwZWMpID09PSBudWxsIHx8IF9mID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZi5jb250YWluZXJzOwogICAgaWYgKCFjb250YWluZXJzIHx8ICFjb250YWluZXJzLmxlbmd0aCkgewogICAgICByZXR1cm4gdCgndmFsaWRhdGlvbi5yZXF1aXJlZCcsIHsKICAgICAgICBrZXk6IHQoJ3dvcmtsb2FkLmNvbnRhaW5lci50aXRsZXMuY29udGFpbmVycycpCiAgICAgIH0pOwogICAgfQogICAgLy8gbWFraW5nIHN1cmUgZWFjaCBjb250YWluZXIgaGFzIGFuIGltYWdlIG5hbWUKICAgIHJldHVybiBjb250YWluZXJzLm1hcChmdW5jdGlvbiAoY29udGFpbmVyKSB7CiAgICAgIHJldHVybiBjb250YWluZXJJbWFnZShjb250YWluZXIpOwogICAgfSkuZmluZChmdW5jdGlvbiAoY29udGFpbmVyRXJyb3IpIHsKICAgICAgcmV0dXJuIGNvbnRhaW5lckVycm9yOwogICAgfSk7CiAgfTsKICB2YXIgZG5zTGFiZWwgPSBmdW5jdGlvbiBkbnNMYWJlbCh2YWwpIHsKICAgIHZhciB2YWxpZGF0b3JzID0gW2Ruc0NoYXJzLCBzdGFydEh5cGhlbignbGFiZWwnKSwgZW5kSHlwaGVuKCdsYWJlbCcpLCBkbnNEb3VibGVEYXNoLAogICAgLy8gZG5zRW1wdHkoJ2xhYmVsJyksIC8vIHF1ZXN0aW9uYWJsZSBhcyB0byBpZiB0aGlzIGlzIG5lZWRlZCBpZiB0aGUgZmllbGQgaXMgYWxzbyByZXF1aXJlZC4uLgogICAgZG5zVG9vTG9uZygnbGFiZWwnKV07CiAgICByZXR1cm4gcnVuVmFsaWRhdG9ycyh2YWwsIHZhbGlkYXRvcnMpOwogIH07CiAgdmFyIGRuc0xhYmVsSWFuYVNlcnZpY2VOYW1lID0gZnVuY3Rpb24gZG5zTGFiZWxJYW5hU2VydmljZU5hbWUodmFsKSB7CiAgICB2YXIgdmFsaWRhdG9ycyA9IFtkbnNDaGFycywgc3RhcnRIeXBoZW4oJ2xhYmVsJyksIGVuZEh5cGhlbignbGFiZWwnKSwgZG5zSWFuYVNlcnZpY2VOYW1lRG91YmxlRGFzaCwgZG5zRW1wdHkoJ2xhYmVsJyksIGRuc1Rvb0xvbmcoJ2xhYmVsJywgMTUpXTsKICAgIHJldHVybiBydW5WYWxpZGF0b3JzKHZhbCwgdmFsaWRhdG9ycyk7CiAgfTsKICB2YXIgZG5zTGFiZWxSZXN0cmljdGVkID0gZnVuY3Rpb24gZG5zTGFiZWxSZXN0cmljdGVkKHZhbCkgewogICAgdmFyIHZhbGlkYXRvcnMgPSBbZG5zQ2hhcnMsIHN0YXJ0TnVtYmVyKCdsYWJlbCcpLCBzdGFydEh5cGhlbignbGFiZWwnKSwgZW5kSHlwaGVuKCdsYWJlbCcpLCBkbnNEb3VibGVEYXNoLCBkbnNFbXB0eSgnbGFiZWwnKSwgZG5zVG9vTG9uZygnbGFiZWwnKV07CiAgICByZXR1cm4gcnVuVmFsaWRhdG9ycyh2YWwsIHZhbGlkYXRvcnMpOwogIH07CiAgdmFyIGhvc3RuYW1lID0gZnVuY3Rpb24gaG9zdG5hbWUodmFsKSB7CiAgICBpZiAodmFsKSB7CiAgICAgIHZhciB2YWxpZGF0b3JzID0gW3N0YXJ0RG90KCdob3N0bmFtZScpLCBob3N0bmFtZVRvb0xvbmcsIGVuZERvdCgnaG9zdG5hbWUnKV07CiAgICAgIHZhciBob3N0TmFtZU1lc3NhZ2UgPSBydW5WYWxpZGF0b3JzKHZhbCwgdmFsaWRhdG9ycyk7CiAgICAgIGlmIChob3N0TmFtZU1lc3NhZ2UpIHsKICAgICAgICByZXR1cm4gaG9zdE5hbWVNZXNzYWdlOwogICAgICB9CiAgICAgIHZhciBsYWJlbHMgPSB2YWwuc3BsaXQoJy4nKTsKICAgICAgdmFyIGxhYmVsVmFsaWRhdG9ycyA9IFtkbnNDaGFycywgc3RhcnRIeXBoZW4oJ2hvc3RuYW1lJyksIGVuZEh5cGhlbignaG9zdG5hbWUnKSwgZG5zRG91YmxlRGFzaCwgZG5zRW1wdHkoJ2hvc3RuYW1lJyksIGRuc1Rvb0xvbmcoJ2hvc3RuYW1lJyldOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxhYmVscy5sZW5ndGg7IGkrKykgewogICAgICAgIHZhciBsYWJlbE1lc3NhZ2UgPSBydW5WYWxpZGF0b3JzKGxhYmVsc1tpXSwgbGFiZWxWYWxpZGF0b3JzKTsKICAgICAgICBpZiAobGFiZWxNZXNzYWdlKSB7CiAgICAgICAgICByZXR1cm4gbGFiZWxNZXNzYWdlOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH07CiAgdmFyIHdpbGRjYXJkSG9zdG5hbWUgPSBmdW5jdGlvbiB3aWxkY2FyZEhvc3RuYW1lKHZhbCkgewogICAgLy8gYWxsb3cgd2lsZGNhcmQgaW4gZmlyc3QgcGFydCBvZiBob3N0bmFtZQogICAgdmFsID0gdmFsID8gdmFsLnJlcGxhY2UoL15cKlwuLywgJycpIDogdmFsOwogICAgcmV0dXJuIGhvc3RuYW1lKHZhbCk7CiAgfTsKICB2YXIgZXh0ZXJuYWxOYW1lID0gZnVuY3Rpb24gZXh0ZXJuYWxOYW1lKHZhbCkgewogICAgaWYgKGlzRW1wdHkodmFsKSkgewogICAgICByZXR1cm4gdCgndmFsaWRhdGlvbi5zZXJ2aWNlLmV4dGVybmFsTmFtZS5ub25lJyk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gaG9zdG5hbWUodmFsKTsKICAgIH0KICB9OwogIHZhciB0ZXN0UnVsZSA9IGZ1bmN0aW9uIHRlc3RSdWxlKHZhbCkgewogICAgcmV0dXJuICdUaGlzIGlzIGFuIGVycm9yIHJldHVybmVkIGJ5IHRoZSB0ZXN0UnVsZSB2YWxpZGF0b3InOwogIH07CiAgdmFyIHJ1bGVHcm91cHMgPSBmdW5jdGlvbiBydWxlR3JvdXBzKHZhbCkgewogICAgcmV0dXJuIGlzRW1wdHkodmFsID09PSBudWxsIHx8IHZhbCA9PT0gdm9pZCAwID8gdm9pZCAwIDogdmFsLmdyb3VwcykgPyB0KCd2YWxpZGF0aW9uLnByb21ldGhldXNSdWxlLmdyb3Vwcy5yZXF1aXJlZCcpIDogdW5kZWZpbmVkOwogIH07CiAgdmFyIGNsdXN0ZXJOYW1lID0gZnVuY3Rpb24gY2x1c3Rlck5hbWUoaXNSa2UyKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKHZhbCkgewogICAgICB2YXIgX2E7CiAgICAgIHJldHVybiBpc1JrZTIgJiYgKChfYSA9IHZhbCB8fCAnJykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm1hdGNoKC9eKGMtLns1fXxsb2NhbCkkL2kpKSA/IHQoJ3ZhbGlkYXRpb24uY2x1c3Rlci5uYW1lJykgOiB1bmRlZmluZWQ7CiAgICB9OwogIH07CiAgdmFyIHNlcnZpY2VQb3J0ID0gZnVuY3Rpb24gc2VydmljZVBvcnQodmFsKSB7CiAgICB2YXIgX2E7CiAgICB2YXIgbmFtZSA9IHZhbC5uYW1lLAogICAgICBpZHggPSB2YWwuaWR4OwogICAgdmFyIG5vZGVQb3J0ID0gbmV3IFBvcnQodmFsLm5vZGVQb3J0KTsKICAgIHZhciBsaXN0ZW5pbmdQb3J0ID0gbmV3IFBvcnQodmFsLnBvcnQpOwogICAgdmFyIHRhcmdldFBvcnQgPSBuZXcgUG9ydCh2YWwudGFyZ2V0UG9ydCk7CiAgICBpZiAoaXNFbXB0eShuYW1lKSkgewogICAgICByZXR1cm4gdCgndmFsaWRhdGlvbi5zZXJ2aWNlLnBvcnRzLm5hbWUucmVxdWlyZWQnLCB7CiAgICAgICAgcG9zaXRpb246IGlkeCArIDEKICAgICAgfSk7CiAgICB9CiAgICBpZiAoIW5vZGVQb3J0LmVtcHR5KSB7CiAgICAgIGlmICghbm9kZVBvcnQuaXNJbnQpIHsKICAgICAgICByZXR1cm4gdCgndmFsaWRhdGlvbi5zZXJ2aWNlLnBvcnRzLm5vZGVQb3J0LnJlcXVpcmVkSW50JywgewogICAgICAgICAgcG9zaXRpb246IGlkeCArIDEKICAgICAgICB9KTsKICAgICAgfSBlbHNlIGlmIChub2RlUG9ydC5pbnQgPCAxIHx8IG5vZGVQb3J0LmludCA+IDY1NTM1KSB7CiAgICAgICAgcmV0dXJuIHQoJ3ZhbGlkYXRpb24uc2VydmljZS5wb3J0cy5ub2RlUG9ydC5iZXR3ZWVuJywgewogICAgICAgICAgcG9zaXRpb246IGlkeCArIDEKICAgICAgICB9KTsKICAgICAgfQogICAgfQogICAgaWYgKCFsaXN0ZW5pbmdQb3J0LmVtcHR5KSB7CiAgICAgIGlmICghbGlzdGVuaW5nUG9ydC5pc0ludCkgewogICAgICAgIHJldHVybiB0KCd2YWxpZGF0aW9uLnNlcnZpY2UucG9ydHMucG9ydC5yZXF1aXJlZEludCcsIHsKICAgICAgICAgIHBvc2l0aW9uOiBpZHggKyAxCiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSBpZiAobGlzdGVuaW5nUG9ydC5pbnQgPCAxIHx8IGxpc3RlbmluZ1BvcnQuaW50ID4gNjU1MzUpIHsKICAgICAgICByZXR1cm4gdCgndmFsaWRhdGlvbi5zZXJ2aWNlLnBvcnRzLnBvcnQuYmV0d2VlbicsIHsKICAgICAgICAgIHBvc2l0aW9uOiBpZHggKyAxCiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSBpZiAoKF9hID0gbGlzdGVuaW5nUG9ydC5zdHJpbmcpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5pbmNsdWRlcygnLicpKSB7CiAgICAgICAgcmV0dXJuIGxpc3RlbmluZ1BvcnQ7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiB0KCd2YWxpZGF0aW9uLnNlcnZpY2UucG9ydHMucG9ydC5yZXF1aXJlZCcsIHsKICAgICAgICBwb3NpdGlvbjogaWR4ICsgMQogICAgICB9KTsKICAgIH0KICAgIGlmICghdGFyZ2V0UG9ydC5lbXB0eSkgewogICAgICBpZiAoIXRhcmdldFBvcnQuaXNJbnQpIHsKICAgICAgICB2YXIgaWFuYVNlcnZpY2VOYW1lRXJyb3JzID0gZG5zTGFiZWxJYW5hU2VydmljZU5hbWUodGFyZ2V0UG9ydC5zdHJpbmcpOwogICAgICAgIGlmIChpYW5hU2VydmljZU5hbWVFcnJvcnMpIHsKICAgICAgICAgIHJldHVybiBpYW5hU2VydmljZU5hbWVFcnJvcnM7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKHRhcmdldFBvcnQuaW50IDwgMSB8fCB0YXJnZXRQb3J0LmludCA+IDY1NTM1KSB7CiAgICAgICAgcmV0dXJuIHQoJ3ZhbGlkYXRpb24uc2VydmljZS5wb3J0cy50YXJnZXRQb3J0LmJldHdlZW4nLCB7CiAgICAgICAgICBwb3NpdGlvbjogaWR4ICsgMQogICAgICAgIH0pOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gdCgndmFsaWRhdGlvbi5zZXJ2aWNlLnBvcnRzLnRhcmdldFBvcnQucmVxdWlyZWQnLCB7CiAgICAgICAgcG9zaXRpb246IGlkeCArIDEKICAgICAgfSk7CiAgICB9CiAgICByZXR1cm4gdW5kZWZpbmVkOwogIH07CiAgdmFyIGdyb3VwSXNWYWxpZCA9IGZ1bmN0aW9uIGdyb3VwSXNWYWxpZCh2YWwsIHJlYWRhYmxlSW5kZXgpIHsKICAgIHZhciByZXR1cm5NZXNzYWdlOwogICAgaWYgKGlzRW1wdHkodmFsID09PSBudWxsIHx8IHZhbCA9PT0gdm9pZCAwID8gdm9pZCAwIDogdmFsLm5hbWUpKSB7CiAgICAgIHJldHVybiB0KCd2YWxpZGF0aW9uLnByb21ldGhldXNSdWxlLmdyb3Vwcy52YWxpZC5uYW1lJywgewogICAgICAgIGluZGV4OiByZWFkYWJsZUluZGV4CiAgICAgIH0pOwogICAgfQogICAgaWYgKGlzRW1wdHkodmFsLnJ1bGVzKSkgewogICAgICByZXR1cm4gdCgndmFsaWRhdGlvbi5wcm9tZXRoZXVzUnVsZS5ncm91cHMudmFsaWQuc2luZ2xlRW50cnknLCB7CiAgICAgICAgaW5kZXg6IHJlYWRhYmxlSW5kZXgKICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICB2YWwucnVsZXMuZm9yRWFjaChmdW5jdGlvbiAocnVsZSwgaWR4KSB7CiAgICAgICAgdmFyIHJlYWRhYmxlUnVsZUluZGV4ID0gaWR4ICsgMTsKICAgICAgICBpZiAoaGFzKHJ1bGUsICdhbGVydCcpICYmIGlzRW1wdHkocnVsZSA9PT0gbnVsbCB8fCBydWxlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBydWxlLmFsZXJ0KSAmJiAhcmV0dXJuTWVzc2FnZSkgewogICAgICAgICAgcmV0dXJuTWVzc2FnZSA9IHQoJ3ZhbGlkYXRpb24ucHJvbWV0aGV1c1J1bGUuZ3JvdXBzLnZhbGlkLnJ1bGUuYWxlcnROYW1lJywgewogICAgICAgICAgICBncm91cEluZGV4OiByZWFkYWJsZUluZGV4LAogICAgICAgICAgICBydWxlSW5kZXg6IHJlYWRhYmxlUnVsZUluZGV4CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgaWYgKGhhcyhydWxlLCAncmVjb3JkJykgJiYgaXNFbXB0eShydWxlID09PSBudWxsIHx8IHJ1bGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJ1bGUucmVjb3JkKSkgewogICAgICAgICAgcmV0dXJuTWVzc2FnZSA9IHQoJ3ZhbGlkYXRpb24ucHJvbWV0aGV1c1J1bGUuZ3JvdXBzLnZhbGlkLnJ1bGUucmVjb3JkTmFtZScsIHsKICAgICAgICAgICAgZ3JvdXBJbmRleDogcmVhZGFibGVJbmRleCwKICAgICAgICAgICAgcnVsZUluZGV4OiByZWFkYWJsZVJ1bGVJbmRleAogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIGlmIChoYXMocnVsZSwgJ2V4cHInKSAmJiBpc0VtcHR5KHJ1bGUuZXhwcikgJiYgIXJldHVybk1lc3NhZ2UgfHwgIWhhcyhydWxlLCAnZXhwcicpICYmICFyZXR1cm5NZXNzYWdlKSB7CiAgICAgICAgICByZXR1cm5NZXNzYWdlID0gdCgndmFsaWRhdGlvbi5wcm9tZXRoZXVzUnVsZS5ncm91cHMudmFsaWQucnVsZS5leHByJywgewogICAgICAgICAgICBncm91cEluZGV4OiByZWFkYWJsZUluZGV4LAogICAgICAgICAgICBydWxlSW5kZXg6IHJlYWRhYmxlUnVsZUluZGV4CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgaWYgKGhhcyhydWxlLCAnYWxlcnQnKSkgewogICAgICAgICAgaWYgKGhhcyhydWxlLCAnbGFiZWxzJykgJiYgaXNFbXB0eShydWxlLmxhYmVscykgJiYgIXJldHVybk1lc3NhZ2UgfHwgIWhhcyhydWxlLCAnbGFiZWxzJykgJiYgIXJldHVybk1lc3NhZ2UpIHsKICAgICAgICAgICAgcmV0dXJuTWVzc2FnZSA9IHQoJ3ZhbGlkYXRpb24ucHJvbWV0aGV1c1J1bGUuZ3JvdXBzLnZhbGlkLnJ1bGUubGFiZWxzJywgewogICAgICAgICAgICAgIGdyb3VwSW5kZXg6IHJlYWRhYmxlSW5kZXgsCiAgICAgICAgICAgICAgcnVsZUluZGV4OiByZWFkYWJsZVJ1bGVJbmRleAogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgfQogICAgcmV0dXJuIHJldHVybk1lc3NhZ2U7CiAgfTsKICB2YXIgZ3JvdXBzQXJlVmFsaWQgPSBmdW5jdGlvbiBncm91cHNBcmVWYWxpZCh2YWwpIHsKICAgIHZhciBncm91cHMgPSBfdG9Db25zdW1hYmxlQXJyYXkodmFsKTsgLy8gbWFraW5nIGEgbmV3IGFycmF5IGluIHRoZSBmdW5jdGlvbiBiZWNhdXNlIEknbSBnb25uYSBtdXRhdGUgaXQgbGF0ZXIuLi4KICAgIHZhciBtZXNzYWdlOwogICAgZ3JvdXBzLmZvckVhY2goZnVuY3Rpb24gKGdyb3VwLCBpZHgsIGFycikgewogICAgICBtZXNzYWdlID0gZ3JvdXBJc1ZhbGlkKGdyb3VwLCBpZHggKyAxKTsKICAgICAgaWYgKCEhbWVzc2FnZSkgewogICAgICAgIGFyci5sZW5ndGggPSBpZHggKyAxOyAvLyB0aGlzIGlzIGEgdHJpY2tzeSB3YXkgb2YgYnJlYWtpbmcgYSBmb3JFYWNoIGxvb3Agc2luY2Ugd2UganVzdCB3YW50IHRoZSBmaXJzdCBtZXNzYWdlCiAgICAgIH0KICAgIH0pOwogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfTsKICB2YXIgbWF0Y2hpbmcgPSBmdW5jdGlvbiBtYXRjaGluZyh2YWwpIHsKICAgIGlmIChpc0VtcHR5KHZhbCA9PT0gbnVsbCB8fCB2YWwgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHZhbC5tYXRjaCkgJiYgaXNFbXB0eSh2YWwgPT09IG51bGwgfHwgdmFsID09PSB2b2lkIDAgPyB2b2lkIDAgOiB2YWxbJ21hdGNoX3JlJ10pKSB7CiAgICAgIHJldHVybiB0KCd2YWxpZGF0aW9uLm1vbml0b3Jpbmcucm91dGUubWF0Y2gnKTsKICAgIH0KICB9OwogIHZhciByb2xlVGVtcGxhdGVSdWxlcyA9IGZ1bmN0aW9uIHJvbGVUZW1wbGF0ZVJ1bGVzKHR5cGUpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciB2YWwgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IFtdOwogICAgICBpZiAodmFsLnNvbWUoZnVuY3Rpb24gKHJ1bGUpIHsKICAgICAgICByZXR1cm4gaXNFbXB0eShydWxlLnZlcmJzKTsKICAgICAgfSkpIHsKICAgICAgICByZXR1cm4gdCgndmFsaWRhdGlvbi5yb2xlVGVtcGxhdGUucm9sZVRlbXBsYXRlUnVsZXMubWlzc2luZ1ZlcmInKTsKICAgICAgfQogICAgICBpZiAodmFsLnNvbWUoZnVuY3Rpb24gKHJ1bGUpIHsKICAgICAgICB2YXIgX2EsIF9iOwogICAgICAgIHJldHVybiAoKF9hID0gcnVsZS5yZXNvdXJjZXMpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5sZW5ndGgpICYmICgoX2IgPSBydWxlLm5vblJlc291cmNlVVJMcykgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmxlbmd0aCk7CiAgICAgIH0pKSB7CiAgICAgICAgcmV0dXJuIHQoJ3ZhbGlkYXRpb24ucm9sZVRlbXBsYXRlLnJvbGVUZW1wbGF0ZVJ1bGVzLm5vUmVzb3VyY2VBbmROb25SZXNvdXJjZScpOwogICAgICB9CiAgICAgIGlmICh0eXBlID09PSBSQkFDLlJPTEUpIHsKICAgICAgICBpZiAodmFsLnNvbWUoZnVuY3Rpb24gKHJ1bGUpIHsKICAgICAgICAgIHJldHVybiBpc0VtcHR5KHJ1bGUucmVzb3VyY2VzKTsKICAgICAgICB9KSkgewogICAgICAgICAgcmV0dXJuIHQoJ3ZhbGlkYXRpb24ucm9sZVRlbXBsYXRlLnJvbGVUZW1wbGF0ZVJ1bGVzLm1pc3NpbmdSZXNvdXJjZScpOwogICAgICAgIH0KICAgICAgICBpZiAodmFsLnNvbWUoZnVuY3Rpb24gKHJ1bGUpIHsKICAgICAgICAgIHJldHVybiBpc0VtcHR5KHJ1bGUuYXBpR3JvdXBzKTsKICAgICAgICB9KSkgewogICAgICAgICAgcmV0dXJuIHQoJ3ZhbGlkYXRpb24ucm9sZVRlbXBsYXRlLnJvbGVUZW1wbGF0ZVJ1bGVzLm1pc3NpbmdBcGlHcm91cCcpOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmICh2YWwuc29tZShmdW5jdGlvbiAocnVsZSkgewogICAgICAgIHJldHVybiBpc0VtcHR5KHJ1bGUucmVzb3VyY2VzKSAmJiBpc0VtcHR5KHJ1bGUubm9uUmVzb3VyY2VVUkxzKTsKICAgICAgfSkpIHsKICAgICAgICByZXR1cm4gdCgndmFsaWRhdGlvbi5yb2xlVGVtcGxhdGUucm9sZVRlbXBsYXRlUnVsZXMubWlzc2luZ09uZVJlc291cmNlJyk7CiAgICAgIH0KICAgICAgcmV0dXJuIHVuZGVmaW5lZDsKICAgIH07CiAgfTsKICAvLyBUaGUgZXhpc3RpbmcgdmFsaWRhdG9yIGZvciBjbHVzdGVySXAgbmV2ZXIgYWN0dWFsbHkgcmV0dXJucyBhbiBlcnJvcgogIHZhciBjbHVzdGVySXAgPSBmdW5jdGlvbiBjbHVzdGVySXAodmFsKSB7CiAgICByZXR1cm4gdW5kZWZpbmVkOwogIH07CiAgdmFyIGJhY2t1cFRhcmdldCA9IGZ1bmN0aW9uIGJhY2t1cFRhcmdldCh2YWwpIHsKICAgIHZhciBwYXJzZVZhbHVlID0gSlNPTi5wYXJzZSh2YWwpOwogICAgdmFyIHR5cGUgPSBwYXJzZVZhbHVlLnR5cGU7CiAgICBpZiAoIXR5cGUpIHsKICAgICAgcmV0dXJuIHQoJ3ZhbGlkYXRpb24ucmVxdWlyZWQnLCB7CiAgICAgICAga2V5OiAnVHlwZScKICAgICAgfSk7CiAgICB9CiAgICBpZiAodHlwZSA9PT0gJ3MzJykgewogICAgICBpZiAoIXBhcnNlVmFsdWUuYWNjZXNzS2V5SWQpIHsKICAgICAgICByZXR1cm4gdCgndmFsaWRhdGlvbi5yZXF1aXJlZCcsIHsKICAgICAgICAgIGtleTogJ2FjY2Vzc0tleUlkJwogICAgICAgIH0pOwogICAgICB9CiAgICAgIGlmICghcGFyc2VWYWx1ZS5zZWNyZXRBY2Nlc3NLZXkpIHsKICAgICAgICByZXR1cm4gdCgndmFsaWRhdGlvbi5yZXF1aXJlZCcsIHsKICAgICAgICAgIGtleTogJ3NlY3JldEFjY2Vzc0tleScKICAgICAgICB9KTsKICAgICAgfQogICAgICBpZiAoIXBhcnNlVmFsdWUuYnVja2V0UmVnaW9uKSB7CiAgICAgICAgcmV0dXJuIHQoJ3ZhbGlkYXRpb24ucmVxdWlyZWQnLCB7CiAgICAgICAgICBrZXk6ICdidWNrZXRSZWdpb24nCiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgaWYgKCFwYXJzZVZhbHVlLmJ1Y2tldE5hbWUpIHsKICAgICAgICByZXR1cm4gdCgndmFsaWRhdGlvbi5yZXF1aXJlZCcsIHsKICAgICAgICAgIGtleTogJ2J1Y2tldE5hbWUnCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiB1bmRlZmluZWQ7CiAgfTsKICB2YXIgaW1hZ2VVcmwgPSBmdW5jdGlvbiBpbWFnZVVybCh2YWwpIHsKICAgIHZhciBWTV9JTUFHRV9GSUxFX0ZPUk1BVCA9IFsncWNvdycsICdxY293MicsICdyYXcnLCAnaW1nJywgJ2lzbyddOwogICAgaWYgKCF2YWwgfHwgdmFsID09PSAnJykgewogICAgICByZXR1cm4gdW5kZWZpbmVkOwogICAgfQogICAgdmFyIHVybFNsdWcgPSB2YWwuc3BsaXQoJy8nKS5wb3AoKTsKICAgIHZhciBmaWxlRXh0ZW5zaW9uID0gdXJsU2x1Zy5zcGxpdCgnLicpLnBvcCgpLnRvTG93ZXJDYXNlKCk7CiAgICBpZiAoIVZNX0lNQUdFX0ZJTEVfRk9STUFULmluY2x1ZGVzKGZpbGVFeHRlbnNpb24pKSB7CiAgICAgIHJldHVybiB0KCdoYXJ2ZXN0ZXIudmFsaWRhdGlvbi5pbWFnZS5ydWxlVGlwJyk7CiAgICB9CiAgICByZXR1cm4gdW5kZWZpbmVkOwogIH07CiAgdmFyIGZpbGVSZXF1aXJlZCA9IGZ1bmN0aW9uIGZpbGVSZXF1aXJlZCgpIHsKICAgIHZhciB2YWwgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9OwogICAgaWYgKCF2YWxbSENJLklNQUdFX05BTUVdKSB7CiAgICAgIHJldHVybiB0KCd2YWxpZGF0aW9uLnJlcXVpcmVkJywgewogICAgICAgIGtleTogdCgnaGFydmVzdGVyLmltYWdlLmZpbGVOYW1lJykKICAgICAgfSk7CiAgICB9CiAgfTsKICB2YXIgc3ViRG9tYWluID0gZnVuY3Rpb24gc3ViRG9tYWluKHZhbCkgewogICAgdmFyIG1hdGNoZWRDaGFycyA9IHZhbCA9PT0gbnVsbCB8fCB2YWwgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHZhbC5tYXRjaCgvW15hLXowLTkuLV0vZyk7CiAgICBpZiAobWF0Y2hlZENoYXJzKSB7CiAgICAgIHJldHVybiB0KCd2YWxpZGF0aW9uLmNoYXJzJywgewogICAgICAgIGtleToga2V5LAogICAgICAgIGNvdW50OiBtYXRjaGVkQ2hhcnMubGVuZ3RoLAogICAgICAgIGNoYXJzOiBtYXRjaGVkQ2hhcnMubWFwKGZ1bmN0aW9uIChjaGFyKSB7CiAgICAgICAgICByZXR1cm4gY2hhciA9PT0gJyAnID8gJ1NwYWNlJyA6ICJcIiIuY29uY2F0KGNoYXIsICJcIiIpOwogICAgICAgIH0pLmpvaW4oJywgJykKICAgICAgfSk7CiAgICB9CiAgICByZXR1cm4gcnVuVmFsaWRhdG9ycyh2YWwsIFtzdGFydEh5cGhlbignbGFiZWwnKSwgZW5kSHlwaGVuKCdsYWJlbCcpLCBzdGFydERvdCgnbGFiZWwnKSwgZW5kRG90KCdsYWJlbCcpLCByZXF1aXJlZF0pOwogIH07CiAgcmV0dXJuIHsKICAgIGFic29sdXRlUGF0aDogYWJzb2x1dGVQYXRoLAogICAgYWxwaGFudW1lcmljOiBhbHBoYW51bWVyaWMsCiAgICBiYWNrdXBUYXJnZXQ6IGJhY2t1cFRhcmdldCwKICAgIGJldHdlZW5MZW5ndGhzOiBiZXR3ZWVuTGVuZ3RocywKICAgIGJldHdlZW5WYWx1ZXM6IGJldHdlZW5WYWx1ZXMsCiAgICBjbHVzdGVySXA6IGNsdXN0ZXJJcCwKICAgIGNsdXN0ZXJOYW1lOiBjbHVzdGVyTmFtZSwKICAgIGNvbnRhaW5lckltYWdlOiBjb250YWluZXJJbWFnZSwKICAgIGNvbnRhaW5lckltYWdlczogY29udGFpbmVySW1hZ2VzLAogICAgY3JvblNjaGVkdWxlOiBjcm9uU2NoZWR1bGUsCiAgICBkbnNMYWJlbDogZG5zTGFiZWwsCiAgICBkbnNMYWJlbElhbmFTZXJ2aWNlTmFtZTogZG5zTGFiZWxJYW5hU2VydmljZU5hbWUsCiAgICBkbnNMYWJlbFJlc3RyaWN0ZWQ6IGRuc0xhYmVsUmVzdHJpY3RlZCwKICAgIGV4dGVybmFsTmFtZTogZXh0ZXJuYWxOYW1lLAogICAgZmlsZVJlcXVpcmVkOiBmaWxlUmVxdWlyZWQsCiAgICBncm91cHNBcmVWYWxpZDogZ3JvdXBzQXJlVmFsaWQsCiAgICBob3N0bmFtZTogaG9zdG5hbWUsCiAgICBpbWFnZVVybDogaW1hZ2VVcmwsCiAgICBpbnRlcnZhbDogaW50ZXJ2YWwsCiAgICBodHRwczogaHR0cHMsCiAgICBsb2NhbGhvc3Q6IGxvY2FsaG9zdCwKICAgIHRyYWlsaW5nRm9yd2FyZFNsYXNoOiB0cmFpbGluZ0ZvcndhcmRTbGFzaCwKICAgIHVybDogdXJsLAogICAgbWF0Y2hpbmc6IG1hdGNoaW5nLAogICAgbWF4TGVuZ3RoOiBtYXhMZW5ndGgsCiAgICBtYXhWYWx1ZTogbWF4VmFsdWUsCiAgICBtaW5MZW5ndGg6IG1pbkxlbmd0aCwKICAgIG1pblZhbHVlOiBtaW5WYWx1ZSwKICAgIG5vVXBwZXJDYXNlOiBub1VwcGVyQ2FzZSwKICAgIHBvcnROdW1iZXI6IHBvcnROdW1iZXIsCiAgICByZXF1aXJlZDogcmVxdWlyZWQsCiAgICByZXF1aXJlZEludDogcmVxdWlyZWRJbnQsCiAgICBpc0ludGVnZXI6IGlzSW50ZWdlciwKICAgIGlzUG9zaXRpdmU6IGlzUG9zaXRpdmUsCiAgICBpc09jdGFsOiBpc09jdGFsLAogICAgcm9sZVRlbXBsYXRlUnVsZXM6IHJvbGVUZW1wbGF0ZVJ1bGVzLAogICAgcnVsZUdyb3VwczogcnVsZUdyb3VwcywKICAgIHNlcnZpY2VQb3J0OiBzZXJ2aWNlUG9ydCwKICAgIHN1YkRvbWFpbjogc3ViRG9tYWluLAogICAgdGVzdFJ1bGU6IHRlc3RSdWxlLAogICAgd2lsZGNhcmRIb3N0bmFtZTogd2lsZGNhcmRIb3N0bmFtZQogIH07Cn0="},{"version":3,"names":["RBAC","HCI","isEmpty","has","isUrl","cronstrue","isHttps","isLocalhost","hasTrailingForwardSlash","Port","_createClass","port","_classCallCheck","string","String","int","parseInt","empty","isNumber","isNaN","includes","isInt","runValidators","val","validators","_iterator","_createForOfIteratorHelper","_step","s","n","done","validator","value","message","err","e","f","t","_ref","_ref$key","key","startDot","label","slice","concat","undefined","endDot","startNumber","_a","match","startHyphen","endHyphen","minValue","min","Number","maxValue","max","betweenValues","_ref2","_ref3","_slicedToArray","minLength","length","maxLength","betweenLengths","_ref4","_ref5","requiredInt","isInteger","isPositive","isOctal","valueString","isValid","portNumber","dnsChars","matchedChars","count","chars","map","char","join","dnsDoubleDash","substr","dnsIanaServiceNameDoubleDash","dnsEmpty","arguments","dnsTooLong","hostnameEmpty","hostnameTooLong","absolutePath","required","noUpperCase","toLowerCase","cronSchedule","toString","https","localhost","trailingForwardSlash","url","alphanumeric","test","interval","containerImage","image","name","containerImages","containers","jobTemplate","_d","_c","_b","spec","template","_f","_e","container","find","containerError","dnsLabel","dnsLabelIanaServiceName","dnsLabelRestricted","hostname","hostNameMessage","labels","split","labelValidators","i","labelMessage","wildcardHostname","replace","externalName","testRule","ruleGroups","groups","clusterName","isRke2","servicePort","idx","nodePort","listeningPort","targetPort","position","ianaServiceNameErrors","groupIsValid","readableIndex","returnMessage","index","rules","forEach","rule","readableRuleIndex","alert","groupIndex","ruleIndex","record","expr","groupsAreValid","_toConsumableArray","group","arr","matching","roleTemplateRules","type","some","verbs","resources","nonResourceURLs","ROLE","apiGroups","clusterIp","backupTarget","parseValue","JSON","parse","accessKeyId","secretAccessKey","bucketRegion","bucketName","imageUrl","VM_IMAGE_FILE_FORMAT","urlSlug","pop","fileExtension","fileRequired","IMAGE_NAME","subDomain"],"sources":["/home/ubuntu/suseconf/node_modules/@rancher/shell/utils/validators/formRules/index.ts"],"sourcesContent":["import { RBAC } from '@shell/config/types';\nimport { HCI } from '@shell/config/labels-annotations';\nimport isEmpty from 'lodash/isEmpty';\nimport has from 'lodash/has';\nimport isUrl from 'is-url';\n// import uniq from 'lodash/uniq';\nimport cronstrue from 'cronstrue';\nimport { Translation } from '@shell/types/t';\nimport { isHttps, isLocalhost, hasTrailingForwardSlash } from '@shell/utils/validators/setting';\n\n// import uniq from 'lodash/uniq';\nexport type Validator<T = undefined | string> = (val: any, arg?: any) => T;\n\nexport type ValidatorFactory = (arg1: any, arg2?: any) => Validator\n\ntype ServicePort = {\n  name?: string,\n  nodePort?: string | number,\n  port?: string | number,\n  targetPort?: string | number,\n  idx: number\n}\n\nexport class Port {\n  empty: boolean;\n  int: number;\n  string: string;\n  isNumber: boolean;\n  isInt: boolean;\n  constructor(port: number | string | undefined) {\n    this.string = String(port);\n    this.int = parseInt(this.string, 10);\n    this.empty = (!port && this.int !== 0);\n    this.isNumber = !isNaN(this.int) && !this.string.includes('e'); // leaving out the exponent edge case to keep the logic simple and because port numbers aren't that big...\n    this.isInt = this.isNumber && !this.string.includes('.');\n  }\n}\n\nconst runValidators = (val: any, validators: Validator[]) => {\n  for (const validator of validators) {\n    const message = validator(val);\n\n    if (message) {\n      return message;\n    }\n  }\n};\n\nexport interface ValidationOptions {\n  key?: string,\n}\n\n// \"t\" is the function name we use for getting a translated string\nexport default function(t: Translation, { key = 'Value' }: ValidationOptions): { [key:string]: Validator<any> | ValidatorFactory } {\n  // utility validators these validators only get used by other validators\n  const startDot: ValidatorFactory = (label: string): Validator => (val: string) => val?.slice(0, 1) === '.' ? t(`validation.dns.${ label }.startDot`, { key }) : undefined;\n\n  const endDot = (label: string): Validator => (val: string) => val?.slice(-1) === '.' ? t(`validation.dns.${ label }.endDot`, { key }) : undefined;\n\n  const startNumber: ValidatorFactory = (label: string): Validator => (val: string) => val?.slice(0, 1)?.match(/[0-9]/) ? t(`validation.dns.${ label }.startNumber`, { key }) : undefined;\n\n  const startHyphen: ValidatorFactory = (label: string): Validator => (val: string) => val?.slice(0, 1) === '-' ? t(`validation.dns.${ label }.startHyphen`, { key }) : undefined;\n\n  const endHyphen: ValidatorFactory = (label: string): Validator => (val: string) => val?.slice(-1) === '-' ? t(`validation.dns.${ label }.endHyphen`, { key }) : undefined;\n\n  const minValue: ValidatorFactory = (min: string) => (val: string | number) => Number(val) < Number(min) ? t('validation.minValue', { key, min }) : undefined;\n\n  const maxValue: ValidatorFactory = (max: string) => (val: string | number) => Number(val) > Number(max) ? t('validation.maxValue', { key, max }) : undefined;\n\n  const betweenValues: ValidatorFactory = ([min, max]: string[]) => (val: string | number) => minValue(min)(val) || maxValue(max)(val) ? t('validation.betweenValues', {\n    key, min, max\n  }) : undefined;\n\n  const minLength: ValidatorFactory = (min: string) => (val: string) => val.length < Number(min) ? t('validation.minLength', { key, min }) : undefined;\n\n  const maxLength: ValidatorFactory = (max: string) => (val: string) => val.length > Number(max) ? t('validation.maxLength', { key, max }) : undefined;\n\n  const betweenLengths: ValidatorFactory = ([min, max]: string[]) => (val: string) => minLength(min)(val) || maxLength(max)(val) ? t('validation.betweenLengths', {\n    key, min, max\n  }) : undefined;\n\n  const requiredInt: Validator = (val: string) => isNaN(parseInt(val, 10)) ? t('validation.number.requiredInt', { key }) : undefined;\n\n  const isInteger: Validator = (val: string | number) => !Number.isInteger(+val) || `${ val }`.match(/\\.+/g) ? t('validation.number.requiredInt', { key }) : undefined;\n\n  const isPositive: Validator = (val: string | number) => +val < 0 ? t('validation.number.isPositive', { key }) : undefined;\n\n  const isOctal: Validator = (val: string | number) => {\n    const valueString = `${ val }`;\n    const isValid = valueString.match(/(^0+)(.+)/);\n\n    return isValid ? t('validation.number.isOctal', { key }) : undefined;\n  };\n\n  const portNumber: Validator = (val: string) => parseInt(val, 10) < 1 || parseInt(val, 10) > 65535 ? t('validation.number.between', {\n    key, min: '1', max: '65535'\n  }) : undefined;\n\n  const dnsChars: Validator = (val: string) => {\n    const matchedChars = val?.match(/[^${'A-Za-z0-9-'}]/g);\n\n    if (matchedChars) {\n      return t('validation.chars', {\n        key, count: matchedChars.length, chars: matchedChars.map((char) => char === ' ' ? 'Space' : `\"${ char }\"`).join(', ')\n      });\n    }\n\n    return undefined;\n  };\n\n  // the weird edge case here deals with internationalized domain names which are prepended with 'xn--'\n  // https://datatracker.ietf.org/doc/html/rfc5891#section-4.2.3.1\n  const dnsDoubleDash: Validator = (val: string) => (val?.substr(2, 2) === '--' && val?.substr(0, 2) !== 'xn') ? t(`validation.dns.doubleHyphen`, { key }) : undefined;\n\n  const dnsIanaServiceNameDoubleDash: Validator = (val: string) => (val?.substr(2, 2) === '--' && val?.substr(0, 2) !== 'xn') ? t(`validation.dns.doubleHyphen`, { key }) : undefined;\n\n  const dnsEmpty: ValidatorFactory = (label: string): Validator => (val = '') => val.length === 0 ? t(`validation.dns.${ label }.emptyLabel`, { key, min: 1 }) : undefined;\n\n  const dnsTooLong: ValidatorFactory = (label: string, length = 63): Validator => (val = '') => val.length > length ? t(`validation.dns.${ label }.tooLongLabel`, { key, max: length }) : undefined;\n\n  // eslint-disable-next-line no-unused-vars\n  const hostnameEmpty: Validator = (val = '') => val.length === 0 ? t('validation.dns.hostname.empty', { key }) : undefined;\n\n  const hostnameTooLong: Validator = (val = '') => val.length > 253 ? t('validation.dns.hostname.tooLong', { key, max: 253 }) : undefined;\n\n  const absolutePath: Validator = (val = '') => val[0] !== '/' && val.length > 0 ? t('validation.path', { key }) : undefined;\n\n  const required: Validator = (val: any) => !val && val !== false ? t('validation.required', { key }) : undefined;\n\n  const noUpperCase: Validator = (val = '') => val.toLowerCase() !== val ? t('validation.noUpperCase', { key }) : undefined;\n\n  const cronSchedule: Validator = (val: string) => {\n    try {\n      cronstrue.toString(val);\n    } catch (e) {\n      return t('validation.invalidCron');\n    }\n  };\n\n  const https: Validator = (val: string) => val && !isHttps(val) ? t('validation.setting.serverUrl.https') : undefined;\n\n  const localhost: Validator = (val: string) => isLocalhost(val) ? t('validation.setting.serverUrl.localhost') : undefined;\n\n  const trailingForwardSlash: Validator = (val: string) => hasTrailingForwardSlash(val) ? t('validation.setting.serverUrl.trailingForwardSlash') : undefined;\n\n  const url: Validator = (val: string) => val && !isUrl(val) ? t('validation.setting.serverUrl.url') : undefined;\n\n  const alphanumeric: Validator = (val: string) => val && !/^[a-zA-Z0-9]+$/.test(val) ? t('validation.alphanumeric', { key }) : undefined;\n\n  const interval: Validator = (val: string) => !/^\\d+[hms]$/.test(val) ? t('validation.monitoring.route.interval', { key }) : undefined;\n\n  const containerImage: Validator = (val: any) => !val?.image ? t('workload.validation.containerImage', { name: val.name }) : undefined;\n\n  const containerImages: Validator = (val: any | [any]) => {\n    const containers = val.jobTemplate ? val?.jobTemplate?.spec?.template?.spec?.containers : val?.template?.spec?.containers;\n\n    if (!containers || !containers.length) {\n      return t('validation.required', { key: t('workload.container.titles.containers') });\n    }\n\n    // making sure each container has an image name\n    return containers.map((container: any) => containerImage(container)).find((containerError: string) => containerError);\n  };\n\n  const dnsLabel: Validator = (val: string) => {\n    const validators = [\n      dnsChars,\n      startHyphen('label'),\n      endHyphen('label'),\n      dnsDoubleDash,\n      // dnsEmpty('label'), // questionable as to if this is needed if the field is also required...\n      dnsTooLong('label')\n    ];\n\n    return runValidators(val, validators);\n  };\n\n  const dnsLabelIanaServiceName: Validator = (val: string) => {\n    const validators = [\n      dnsChars,\n      startHyphen('label'),\n      endHyphen('label'),\n      dnsIanaServiceNameDoubleDash,\n      dnsEmpty('label'), // questionable as to if this is needed if the field is also required...\n      dnsTooLong('label', 15)\n    ];\n\n    return runValidators(val, validators);\n  };\n\n  const dnsLabelRestricted: Validator = (val: string) => {\n    const validators = [\n      dnsChars,\n      startNumber('label'),\n      startHyphen('label'),\n      endHyphen('label'),\n      dnsDoubleDash,\n      dnsEmpty('label'), // questionable as to if this is needed if the field is also required...\n      dnsTooLong('label')\n    ];\n\n    return runValidators(val, validators);\n  };\n\n  const hostname: Validator = (val: string) => {\n    if (val) {\n      const validators = [\n        startDot('hostname'),\n        hostnameTooLong,\n        endDot('hostname')\n      ];\n\n      const hostNameMessage = runValidators(val, validators);\n\n      if (hostNameMessage) {\n        return hostNameMessage;\n      }\n\n      const labels = val.split('.');\n      const labelValidators = [\n        dnsChars,\n        startHyphen('hostname'),\n        endHyphen('hostname'),\n        dnsDoubleDash,\n        dnsEmpty('hostname'),\n        dnsTooLong('hostname')\n      ];\n\n      for ( let i = 0; i < labels.length; i++ ) {\n        const labelMessage = runValidators(labels[i], labelValidators);\n\n        if (labelMessage) {\n          return labelMessage;\n        }\n      }\n    }\n  };\n\n  const wildcardHostname: Validator = (val: string) => {\n    // allow wildcard in first part of hostname\n    val = val ? val.replace(/^\\*\\./, '') : val;\n\n    return hostname(val);\n  };\n\n  const externalName: Validator = (val: string) => {\n    if (isEmpty(val)) {\n      return t('validation.service.externalName.none');\n    } else {\n      return hostname(val);\n    }\n  };\n\n  const testRule = (val: string | undefined) => {\n    return 'This is an error returned by the testRule validator';\n  };\n\n  const ruleGroups: Validator = (val: {groups?: any}) => isEmpty(val?.groups) ? t('validation.prometheusRule.groups.required') : undefined;\n\n  const clusterName: ValidatorFactory = (isRke2: boolean): Validator => (val: string | undefined) => isRke2 && (val || '')?.match(/^(c-.{5}|local)$/i) ? t('validation.cluster.name') : undefined;\n\n  const servicePort: Validator<string | Port | undefined> = (val: ServicePort) => {\n    const {\n      name,\n      idx\n    } = val;\n\n    const nodePort = new Port(val.nodePort);\n    const listeningPort = new Port(val.port);\n    const targetPort = new Port(val.targetPort);\n\n    if (isEmpty(name)) {\n      return t('validation.service.ports.name.required', { position: idx + 1 });\n    }\n\n    if (!nodePort.empty) {\n      if (!nodePort.isInt) {\n        return t('validation.service.ports.nodePort.requiredInt', { position: idx + 1 });\n      } else if (nodePort.int < 1 || nodePort.int > 65535) {\n        return t('validation.service.ports.nodePort.between', { position: idx + 1 });\n      }\n    }\n\n    if (!listeningPort.empty) {\n      if (!listeningPort.isInt) {\n        return t('validation.service.ports.port.requiredInt', { position: idx + 1 });\n      } else if (listeningPort.int < 1 || listeningPort.int > 65535) {\n        return t('validation.service.ports.port.between', { position: idx + 1 });\n      } else if (listeningPort.string?.includes('.')) {\n        return listeningPort;\n      }\n    } else {\n      return t('validation.service.ports.port.required', { position: idx + 1 });\n    }\n\n    if (!targetPort.empty) {\n      if (!targetPort.isInt) {\n        const ianaServiceNameErrors = dnsLabelIanaServiceName(targetPort.string);\n\n        if (ianaServiceNameErrors) {\n          return ianaServiceNameErrors;\n        }\n      } else if (targetPort.int < 1 || targetPort.int > 65535) {\n        return t('validation.service.ports.targetPort.between', { position: idx + 1 });\n      }\n    } else {\n      return t('validation.service.ports.targetPort.required', { position: idx + 1 });\n    }\n\n    return undefined;\n  };\n\n  const groupIsValid: Validator = (val, readableIndex) => {\n    let returnMessage: string | undefined;\n\n    if (isEmpty(val?.name)) {\n      return t('validation.prometheusRule.groups.valid.name', { index: readableIndex });\n    }\n\n    if (isEmpty(val.rules)) {\n      return t('validation.prometheusRule.groups.valid.singleEntry', { index: readableIndex });\n    } else {\n      val.rules.forEach((rule: any, idx: number) => {\n        const readableRuleIndex = idx + 1;\n\n        if (has(rule, 'alert') && isEmpty(rule?.alert) && !returnMessage) {\n          returnMessage = t('validation.prometheusRule.groups.valid.rule.alertName', { groupIndex: readableIndex, ruleIndex: readableRuleIndex });\n        } else if (has(rule, 'record') && isEmpty(rule?.record)) {\n          returnMessage = t('validation.prometheusRule.groups.valid.rule.recordName', { groupIndex: readableIndex, ruleIndex: readableRuleIndex });\n        }\n\n        if ((has(rule, 'expr') && isEmpty(rule.expr) && !returnMessage) || (!has(rule, 'expr') && !returnMessage)) {\n          returnMessage = t('validation.prometheusRule.groups.valid.rule.expr', { groupIndex: readableIndex, ruleIndex: readableRuleIndex });\n        }\n\n        if (has(rule, 'alert')) {\n          if (\n            (has(rule, 'labels') && isEmpty(rule.labels) && !returnMessage) ||\n            (!has(rule, 'labels') && !returnMessage)\n          ) {\n            returnMessage = t('validation.prometheusRule.groups.valid.rule.labels', { groupIndex: readableIndex, ruleIndex: readableRuleIndex });\n          }\n        }\n      });\n    }\n\n    return returnMessage;\n  };\n\n  const groupsAreValid: Validator = (val) => {\n    const groups = [...val]; // making a new array in the function because I'm gonna mutate it later...\n    let message;\n\n    groups.forEach((group, idx, arr) => {\n      message = groupIsValid(group, idx + 1);\n      if (!!message) {\n        arr.length = idx + 1; // this is a tricksy way of breaking a forEach loop since we just want the first message\n      }\n    });\n\n    return message;\n  };\n\n  const matching: Validator = (val) => {\n    if (isEmpty(val?.match) && isEmpty(val?.['match_re'])) {\n      return t('validation.monitoring.route.match');\n    }\n  };\n\n  const roleTemplateRules: ValidatorFactory = (type): Validator => (val = []) => {\n    if (val.some((rule: any) => isEmpty(rule.verbs))) {\n      return t('validation.roleTemplate.roleTemplateRules.missingVerb');\n    }\n\n    if (val.some((rule: any) => rule.resources?.length && rule.nonResourceURLs?.length)) {\n      return t('validation.roleTemplate.roleTemplateRules.noResourceAndNonResource');\n    }\n\n    if (type === RBAC.ROLE) {\n      if (val.some((rule: any) => isEmpty(rule.resources))) {\n        return t('validation.roleTemplate.roleTemplateRules.missingResource');\n      }\n\n      if (val.some((rule: any) => isEmpty(rule.apiGroups))) {\n        return t('validation.roleTemplate.roleTemplateRules.missingApiGroup');\n      }\n    } else if (val.some((rule: any) => isEmpty(rule.resources) && isEmpty(rule.nonResourceURLs))) {\n      return t('validation.roleTemplate.roleTemplateRules.missingOneResource');\n    }\n\n    return undefined;\n  };\n\n  // The existing validator for clusterIp never actually returns an error\n  const clusterIp: Validator = (val) => undefined;\n\n  const backupTarget: Validator = (val) => {\n    const parseValue = JSON.parse(val);\n    const type = parseValue.type;\n\n    if (!type) {\n      return t('validation.required', { key: 'Type' });\n    }\n\n    if (type === 's3') {\n      if (!parseValue.accessKeyId) {\n        return t('validation.required', { key: 'accessKeyId' });\n      }\n\n      if (!parseValue.secretAccessKey) {\n        return t('validation.required', { key: 'secretAccessKey' });\n      }\n\n      if (!parseValue.bucketRegion) {\n        return t('validation.required', { key: 'bucketRegion' });\n      }\n\n      if (!parseValue.bucketName) {\n        return t('validation.required', { key: 'bucketName' });\n      }\n    }\n\n    return undefined;\n  };\n\n  const imageUrl: Validator = (val) => {\n    const VM_IMAGE_FILE_FORMAT = ['qcow', 'qcow2', 'raw', 'img', 'iso'];\n\n    if (!val || val === '') {\n      return undefined;\n    }\n\n    const urlSlug = val.split('/').pop();\n    const fileExtension = urlSlug.split('.').pop().toLowerCase();\n\n    if (!VM_IMAGE_FILE_FORMAT.includes(fileExtension)) {\n      return t('harvester.validation.image.ruleTip');\n    }\n\n    return undefined;\n  };\n\n  const fileRequired: Validator = (val = {}) => {\n    if (!val[HCI.IMAGE_NAME]) {\n      return t('validation.required', { key: t('harvester.image.fileName') });\n    }\n  };\n\n  const subDomain: Validator = (val) => {\n    const matchedChars = val?.match(/[^a-z0-9.-]/g);\n\n    if (matchedChars) {\n      return t('validation.chars', {\n        key, count: matchedChars.length, chars: matchedChars.map((char: string) => char === ' ' ? 'Space' : `\"${ char }\"`).join(', ')\n      });\n    }\n\n    return runValidators(val, [startHyphen('label'), endHyphen('label'), startDot('label'), endDot('label'), required]);\n  };\n\n  return {\n    absolutePath,\n    alphanumeric,\n    backupTarget,\n    betweenLengths,\n    betweenValues,\n    clusterIp,\n    clusterName,\n    containerImage,\n    containerImages,\n    cronSchedule,\n    dnsLabel,\n    dnsLabelIanaServiceName,\n    dnsLabelRestricted,\n    externalName,\n    fileRequired,\n    groupsAreValid,\n    hostname,\n    imageUrl,\n    interval,\n    https,\n    localhost,\n    trailingForwardSlash,\n    url,\n    matching,\n    maxLength,\n    maxValue,\n    minLength,\n    minValue,\n    noUpperCase,\n    portNumber,\n    required,\n    requiredInt,\n    isInteger,\n    isPositive,\n    isOctal,\n    roleTemplateRules,\n    ruleGroups,\n    servicePort,\n    subDomain,\n    testRule,\n    wildcardHostname,\n  };\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,SAASA,IAAI,QAAQ,qBAAqB;AAC1C,SAASC,GAAG,QAAQ,kCAAkC;AACtD,OAAOC,OAAO,MAAM,gBAAgB;AACpC,OAAOC,GAAG,MAAM,YAAY;AAC5B,OAAOC,KAAK,MAAM,QAAQ;AAC1B;AACA,OAAOC,SAAS,MAAM,WAAW;AAEjC,SAASC,OAAO,EAAEC,WAAW,EAAEC,uBAAuB,QAAQ,iCAAiC;AAe/F,WAAaC,IAAI,gBAAAC,YAAA,CAMf,SAAAD,KAAYE,IAAiC;EAAAC,eAAA,OAAAH,IAAA;EAC3C,IAAI,CAACI,MAAM,GAAGC,MAAM,CAACH,IAAI,CAAC;EAC1B,IAAI,CAACI,GAAG,GAAGC,QAAQ,CAAC,IAAI,CAACH,MAAM,EAAE,EAAE,CAAC;EACpC,IAAI,CAACI,KAAK,GAAI,CAACN,IAAI,IAAI,IAAI,CAACI,GAAG,KAAK,CAAE;EACtC,IAAI,CAACG,QAAQ,GAAG,CAACC,KAAK,CAAC,IAAI,CAACJ,GAAG,CAAC,IAAI,CAAC,IAAI,CAACF,MAAM,CAACO,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC;EAChE,IAAI,CAACC,KAAK,GAAG,IAAI,CAACH,QAAQ,IAAI,CAAC,IAAI,CAACL,MAAM,CAACO,QAAQ,CAAC,GAAG,CAAC;AAC1D,CAAC;AAGH,IAAME,aAAa,GAAG,SAAhBA,aAAaA,CAAIC,GAAQ,EAAEC,UAAuB,EAAI;EAAA,IAAAC,SAAA,GAAAC,0BAAA,CAClCF,UAAU;IAAAG,KAAA;EAAA;IAAlC,KAAAF,SAAA,CAAAG,CAAA,MAAAD,KAAA,GAAAF,SAAA,CAAAI,CAAA,IAAAC,IAAA,GAAoC;MAAA,IAAzBC,SAAS,GAAAJ,KAAA,CAAAK,KAAA;MAClB,IAAMC,OAAO,GAAGF,SAAS,CAACR,GAAG,CAAC;MAE9B,IAAIU,OAAO,EAAE;QACX,OAAOA,OAAO;;;EAEjB,SAAAC,GAAA;IAAAT,SAAA,CAAAU,CAAA,CAAAD,GAAA;EAAA;IAAAT,SAAA,CAAAW,CAAA;EAAA;AACH,CAAC;AAMD;AACA,eAAc,UAAUC,CAAc,EAAAC,IAAA,EAAsC;EAAA,IAAAC,QAAA,GAAAD,IAAA,CAAlCE,GAAG;IAAHA,GAAG,GAAAD,QAAA,cAAG,OAAO,GAAAA,QAAA;EACrD;EACA,IAAME,QAAQ,GAAqB,SAA7BA,QAAQA,CAAsBC,KAAa;IAAA,OAAgB,UAACnB,GAAW;MAAA,OAAK,CAAAA,GAAG,aAAHA,GAAG,uBAAHA,GAAG,CAAEoB,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,MAAK,GAAG,GAAGN,CAAC,mBAAAO,MAAA,CAAoBF,KAAM,gBAAa;QAAEF,GAAG,EAAHA;MAAG,CAAE,CAAC,GAAGK,SAAS;IAAA;EAAA;EAEzK,IAAMC,MAAM,GAAG,SAATA,MAAMA,CAAIJ,KAAa;IAAA,OAAgB,UAACnB,GAAW;MAAA,OAAK,CAAAA,GAAG,aAAHA,GAAG,uBAAHA,GAAG,CAAEoB,KAAK,CAAC,CAAC,CAAC,CAAC,MAAK,GAAG,GAAGN,CAAC,mBAAAO,MAAA,CAAoBF,KAAM,cAAW;QAAEF,GAAG,EAAHA;MAAG,CAAE,CAAC,GAAGK,SAAS;IAAA;EAAA;EAEjJ,IAAME,WAAW,GAAqB,SAAhCA,WAAWA,CAAsBL,KAAa;IAAA,OAAgB,UAACnB,GAAW,EAAI;MAAA,IAAAyB,EAAA;MAAC,SAAAA,EAAA,GAAAzB,GAAG,aAAHA,GAAG,uBAAHA,GAAG,CAAEoB,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,cAAAK,EAAA,uBAAAA,EAAA,CAAEC,KAAK,CAAC,OAAO,CAAC,IAAGZ,CAAC,mBAAAO,MAAA,CAAoBF,KAAM,mBAAgB;QAAEF,GAAG,EAAHA;MAAG,CAAE,CAAC,GAAGK,SAAS;IAAA;EAAA;EAEvL,IAAMK,WAAW,GAAqB,SAAhCA,WAAWA,CAAsBR,KAAa;IAAA,OAAgB,UAACnB,GAAW;MAAA,OAAK,CAAAA,GAAG,aAAHA,GAAG,uBAAHA,GAAG,CAAEoB,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,MAAK,GAAG,GAAGN,CAAC,mBAAAO,MAAA,CAAoBF,KAAM,mBAAgB;QAAEF,GAAG,EAAHA;MAAG,CAAE,CAAC,GAAGK,SAAS;IAAA;EAAA;EAE/K,IAAMM,SAAS,GAAqB,SAA9BA,SAASA,CAAsBT,KAAa;IAAA,OAAgB,UAACnB,GAAW;MAAA,OAAK,CAAAA,GAAG,aAAHA,GAAG,uBAAHA,GAAG,CAAEoB,KAAK,CAAC,CAAC,CAAC,CAAC,MAAK,GAAG,GAAGN,CAAC,mBAAAO,MAAA,CAAoBF,KAAM,iBAAc;QAAEF,GAAG,EAAHA;MAAG,CAAE,CAAC,GAAGK,SAAS;IAAA;EAAA;EAEzK,IAAMO,QAAQ,GAAqB,SAA7BA,QAAQA,CAAsBC,GAAW;IAAA,OAAK,UAAC9B,GAAoB;MAAA,OAAK+B,MAAM,CAAC/B,GAAG,CAAC,GAAG+B,MAAM,CAACD,GAAG,CAAC,GAAGhB,CAAC,CAAC,qBAAqB,EAAE;QAAEG,GAAG,EAAHA,GAAG;QAAEa,GAAG,EAAHA;MAAG,CAAE,CAAC,GAAGR,SAAS;IAAA;EAAA;EAE5J,IAAMU,QAAQ,GAAqB,SAA7BA,QAAQA,CAAsBC,GAAW;IAAA,OAAK,UAACjC,GAAoB;MAAA,OAAK+B,MAAM,CAAC/B,GAAG,CAAC,GAAG+B,MAAM,CAACE,GAAG,CAAC,GAAGnB,CAAC,CAAC,qBAAqB,EAAE;QAAEG,GAAG,EAAHA,GAAG;QAAEgB,GAAG,EAAHA;MAAG,CAAE,CAAC,GAAGX,SAAS;IAAA;EAAA;EAE5J,IAAMY,aAAa,GAAqB,SAAlCA,aAAaA,CAAAC,KAAA;IAAA,IAAAC,KAAA,GAAAC,cAAA,CAAAF,KAAA;MAAuBL,GAAG,GAAAM,KAAA;MAAEH,GAAG,GAAAG,KAAA;IAAA,OAAgB,UAACpC,GAAoB;MAAA,OAAK6B,QAAQ,CAACC,GAAG,CAAC,CAAC9B,GAAG,CAAC,IAAIgC,QAAQ,CAACC,GAAG,CAAC,CAACjC,GAAG,CAAC,GAAGc,CAAC,CAAC,0BAA0B,EAAE;QACnKG,GAAG,EAAHA,GAAG;QAAEa,GAAG,EAAHA,GAAG;QAAEG,GAAG,EAAHA;OACX,CAAC,GAAGX,SAAS;IAAA;EAAA;EAEd,IAAMgB,SAAS,GAAqB,SAA9BA,SAASA,CAAsBR,GAAW;IAAA,OAAK,UAAC9B,GAAW;MAAA,OAAKA,GAAG,CAACuC,MAAM,GAAGR,MAAM,CAACD,GAAG,CAAC,GAAGhB,CAAC,CAAC,sBAAsB,EAAE;QAAEG,GAAG,EAAHA,GAAG;QAAEa,GAAG,EAAHA;MAAG,CAAE,CAAC,GAAGR,SAAS;IAAA;EAAA;EAEpJ,IAAMkB,SAAS,GAAqB,SAA9BA,SAASA,CAAsBP,GAAW;IAAA,OAAK,UAACjC,GAAW;MAAA,OAAKA,GAAG,CAACuC,MAAM,GAAGR,MAAM,CAACE,GAAG,CAAC,GAAGnB,CAAC,CAAC,sBAAsB,EAAE;QAAEG,GAAG,EAAHA,GAAG;QAAEgB,GAAG,EAAHA;MAAG,CAAE,CAAC,GAAGX,SAAS;IAAA;EAAA;EAEpJ,IAAMmB,cAAc,GAAqB,SAAnCA,cAAcA,CAAAC,KAAA;IAAA,IAAAC,KAAA,GAAAN,cAAA,CAAAK,KAAA;MAAuBZ,GAAG,GAAAa,KAAA;MAAEV,GAAG,GAAAU,KAAA;IAAA,OAAgB,UAAC3C,GAAW;MAAA,OAAKsC,SAAS,CAACR,GAAG,CAAC,CAAC9B,GAAG,CAAC,IAAIwC,SAAS,CAACP,GAAG,CAAC,CAACjC,GAAG,CAAC,GAAGc,CAAC,CAAC,2BAA2B,EAAE;QAC9JG,GAAG,EAAHA,GAAG;QAAEa,GAAG,EAAHA,GAAG;QAAEG,GAAG,EAAHA;OACX,CAAC,GAAGX,SAAS;IAAA;EAAA;EAEd,IAAMsB,WAAW,GAAc,SAAzBA,WAAWA,CAAe5C,GAAW;IAAA,OAAKJ,KAAK,CAACH,QAAQ,CAACO,GAAG,EAAE,EAAE,CAAC,CAAC,GAAGc,CAAC,CAAC,+BAA+B,EAAE;MAAEG,GAAG,EAAHA;IAAG,CAAE,CAAC,GAAGK,SAAS;EAAA;EAElI,IAAMuB,SAAS,GAAc,SAAvBA,SAASA,CAAe7C,GAAoB;IAAA,OAAK,CAAC+B,MAAM,CAACc,SAAS,CAAC,CAAC7C,GAAG,CAAC,IAAI,GAAAqB,MAAA,CAAIrB,GAAI,EAAG0B,KAAK,CAAC,MAAM,CAAC,GAAGZ,CAAC,CAAC,+BAA+B,EAAE;MAAEG,GAAG,EAAHA;IAAG,CAAE,CAAC,GAAGK,SAAS;EAAA;EAEpK,IAAMwB,UAAU,GAAc,SAAxBA,UAAUA,CAAe9C,GAAoB;IAAA,OAAK,CAACA,GAAG,GAAG,CAAC,GAAGc,CAAC,CAAC,8BAA8B,EAAE;MAAEG,GAAG,EAAHA;IAAG,CAAE,CAAC,GAAGK,SAAS;EAAA;EAEzH,IAAMyB,OAAO,GAAc,SAArBA,OAAOA,CAAe/C,GAAoB,EAAI;IAClD,IAAMgD,WAAW,MAAA3B,MAAA,CAAOrB,GAAI,CAAE;IAC9B,IAAMiD,OAAO,GAAGD,WAAW,CAACtB,KAAK,CAAC,WAAW,CAAC;IAE9C,OAAOuB,OAAO,GAAGnC,CAAC,CAAC,2BAA2B,EAAE;MAAEG,GAAG,EAAHA;IAAG,CAAE,CAAC,GAAGK,SAAS;EACtE,CAAC;EAED,IAAM4B,UAAU,GAAc,SAAxBA,UAAUA,CAAelD,GAAW;IAAA,OAAKP,QAAQ,CAACO,GAAG,EAAE,EAAE,CAAC,GAAG,CAAC,IAAIP,QAAQ,CAACO,GAAG,EAAE,EAAE,CAAC,GAAG,KAAK,GAAGc,CAAC,CAAC,2BAA2B,EAAE;MACjIG,GAAG,EAAHA,GAAG;MAAEa,GAAG,EAAE,GAAG;MAAEG,GAAG,EAAE;KACrB,CAAC,GAAGX,SAAS;EAAA;EAEd,IAAM6B,QAAQ,GAAc,SAAtBA,QAAQA,CAAenD,GAAW,EAAI;IAC1C,IAAMoD,YAAY,GAAGpD,GAAG,aAAHA,GAAG,uBAAHA,GAAG,CAAE0B,KAAK,CAAC,qBAAqB,CAAC;IAEtD,IAAI0B,YAAY,EAAE;MAChB,OAAOtC,CAAC,CAAC,kBAAkB,EAAE;QAC3BG,GAAG,EAAHA,GAAG;QAAEoC,KAAK,EAAED,YAAY,CAACb,MAAM;QAAEe,KAAK,EAAEF,YAAY,CAACG,GAAG,CAAC,UAACC,IAAI;UAAA,OAAKA,IAAI,KAAK,GAAG,GAAG,OAAO,QAAAnC,MAAA,CAAQmC,IAAK,OAAG;QAAA,EAAC,CAACC,IAAI,CAAC,IAAI;OACrH,CAAC;;IAGJ,OAAOnC,SAAS;EAClB,CAAC;EAED;EACA;EACA,IAAMoC,aAAa,GAAc,SAA3BA,aAAaA,CAAe1D,GAAW;IAAA,OAAM,CAAAA,GAAG,aAAHA,GAAG,uBAAHA,GAAG,CAAE2D,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,MAAK,IAAI,IAAI,CAAA3D,GAAG,aAAHA,GAAG,uBAAHA,GAAG,CAAE2D,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,MAAK,IAAI,GAAI7C,CAAC,gCAAgC;MAAEG,GAAG,EAAHA;IAAG,CAAE,CAAC,GAAGK,SAAS;EAAA;EAEpK,IAAMsC,4BAA4B,GAAc,SAA1CA,4BAA4BA,CAAe5D,GAAW;IAAA,OAAM,CAAAA,GAAG,aAAHA,GAAG,uBAAHA,GAAG,CAAE2D,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,MAAK,IAAI,IAAI,CAAA3D,GAAG,aAAHA,GAAG,uBAAHA,GAAG,CAAE2D,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,MAAK,IAAI,GAAI7C,CAAC,gCAAgC;MAAEG,GAAG,EAAHA;IAAG,CAAE,CAAC,GAAGK,SAAS;EAAA;EAEnL,IAAMuC,QAAQ,GAAqB,SAA7BA,QAAQA,CAAsB1C,KAAa;IAAA,OAAgB;MAAA,IAACnB,GAAG,GAAA8D,SAAA,CAAAvB,MAAA,QAAAuB,SAAA,QAAAxC,SAAA,GAAAwC,SAAA,MAAG,EAAE;MAAA,OAAK9D,GAAG,CAACuC,MAAM,KAAK,CAAC,GAAGzB,CAAC,mBAAAO,MAAA,CAAoBF,KAAM,kBAAe;QAAEF,GAAG,EAAHA,GAAG;QAAEa,GAAG,EAAE;MAAC,CAAE,CAAC,GAAGR,SAAS;IAAA;EAAA;EAExK,IAAMyC,UAAU,GAAqB,SAA/BA,UAAUA,CAAsB5C,KAAa;IAAA,IAAEoB,MAAM,GAAAuB,SAAA,CAAAvB,MAAA,QAAAuB,SAAA,QAAAxC,SAAA,GAAAwC,SAAA,MAAG,EAAE;IAAA,OAAgB;MAAA,IAAC9D,GAAG,GAAA8D,SAAA,CAAAvB,MAAA,QAAAuB,SAAA,QAAAxC,SAAA,GAAAwC,SAAA,MAAG,EAAE;MAAA,OAAK9D,GAAG,CAACuC,MAAM,GAAGA,MAAM,GAAGzB,CAAC,mBAAAO,MAAA,CAAoBF,KAAM,oBAAiB;QAAEF,GAAG,EAAHA,GAAG;QAAEgB,GAAG,EAAEM;MAAM,CAAE,CAAC,GAAGjB,SAAS;IAAA;EAAA;EAEjM;EACA,IAAM0C,aAAa,GAAc,SAA3BA,aAAaA,CAAA;IAAA,IAAehE,GAAG,GAAA8D,SAAA,CAAAvB,MAAA,QAAAuB,SAAA,QAAAxC,SAAA,GAAAwC,SAAA,MAAG,EAAE;IAAA,OAAK9D,GAAG,CAACuC,MAAM,KAAK,CAAC,GAAGzB,CAAC,CAAC,+BAA+B,EAAE;MAAEG,GAAG,EAAHA;IAAG,CAAE,CAAC,GAAGK,SAAS;EAAA;EAEzH,IAAM2C,eAAe,GAAc,SAA7BA,eAAeA,CAAA;IAAA,IAAejE,GAAG,GAAA8D,SAAA,CAAAvB,MAAA,QAAAuB,SAAA,QAAAxC,SAAA,GAAAwC,SAAA,MAAG,EAAE;IAAA,OAAK9D,GAAG,CAACuC,MAAM,GAAG,GAAG,GAAGzB,CAAC,CAAC,iCAAiC,EAAE;MAAEG,GAAG,EAAHA,GAAG;MAAEgB,GAAG,EAAE;IAAG,CAAE,CAAC,GAAGX,SAAS;EAAA;EAEvI,IAAM4C,YAAY,GAAc,SAA1BA,YAAYA,CAAA;IAAA,IAAelE,GAAG,GAAA8D,SAAA,CAAAvB,MAAA,QAAAuB,SAAA,QAAAxC,SAAA,GAAAwC,SAAA,MAAG,EAAE;IAAA,OAAK9D,GAAG,CAAC,CAAC,CAAC,KAAK,GAAG,IAAIA,GAAG,CAACuC,MAAM,GAAG,CAAC,GAAGzB,CAAC,CAAC,iBAAiB,EAAE;MAAEG,GAAG,EAAHA;IAAG,CAAE,CAAC,GAAGK,SAAS;EAAA;EAE1H,IAAM6C,QAAQ,GAAc,SAAtBA,QAAQA,CAAenE,GAAQ;IAAA,OAAK,CAACA,GAAG,IAAIA,GAAG,KAAK,KAAK,GAAGc,CAAC,CAAC,qBAAqB,EAAE;MAAEG,GAAG,EAAHA;IAAG,CAAE,CAAC,GAAGK,SAAS;EAAA;EAE/G,IAAM8C,WAAW,GAAc,SAAzBA,WAAWA,CAAA;IAAA,IAAepE,GAAG,GAAA8D,SAAA,CAAAvB,MAAA,QAAAuB,SAAA,QAAAxC,SAAA,GAAAwC,SAAA,MAAG,EAAE;IAAA,OAAK9D,GAAG,CAACqE,WAAW,EAAE,KAAKrE,GAAG,GAAGc,CAAC,CAAC,wBAAwB,EAAE;MAAEG,GAAG,EAAHA;IAAG,CAAE,CAAC,GAAGK,SAAS;EAAA;EAEzH,IAAMgD,YAAY,GAAc,SAA1BA,YAAYA,CAAetE,GAAW,EAAI;IAC9C,IAAI;MACFlB,SAAS,CAACyF,QAAQ,CAACvE,GAAG,CAAC;KACxB,CAAC,OAAOY,CAAC,EAAE;MACV,OAAOE,CAAC,CAAC,wBAAwB,CAAC;;EAEtC,CAAC;EAED,IAAM0D,KAAK,GAAc,SAAnBA,KAAKA,CAAexE,GAAW;IAAA,OAAKA,GAAG,IAAI,CAACjB,OAAO,CAACiB,GAAG,CAAC,GAAGc,CAAC,CAAC,oCAAoC,CAAC,GAAGQ,SAAS;EAAA;EAEpH,IAAMmD,SAAS,GAAc,SAAvBA,SAASA,CAAezE,GAAW;IAAA,OAAKhB,WAAW,CAACgB,GAAG,CAAC,GAAGc,CAAC,CAAC,wCAAwC,CAAC,GAAGQ,SAAS;EAAA;EAExH,IAAMoD,oBAAoB,GAAc,SAAlCA,oBAAoBA,CAAe1E,GAAW;IAAA,OAAKf,uBAAuB,CAACe,GAAG,CAAC,GAAGc,CAAC,CAAC,mDAAmD,CAAC,GAAGQ,SAAS;EAAA;EAE1J,IAAMqD,GAAG,GAAc,SAAjBA,GAAGA,CAAe3E,GAAW;IAAA,OAAKA,GAAG,IAAI,CAACnB,KAAK,CAACmB,GAAG,CAAC,GAAGc,CAAC,CAAC,kCAAkC,CAAC,GAAGQ,SAAS;EAAA;EAE9G,IAAMsD,YAAY,GAAc,SAA1BA,YAAYA,CAAe5E,GAAW;IAAA,OAAKA,GAAG,IAAI,CAAC,gBAAgB,CAAC6E,IAAI,CAAC7E,GAAG,CAAC,GAAGc,CAAC,CAAC,yBAAyB,EAAE;MAAEG,GAAG,EAAHA;IAAG,CAAE,CAAC,GAAGK,SAAS;EAAA;EAEvI,IAAMwD,QAAQ,GAAc,SAAtBA,QAAQA,CAAe9E,GAAW;IAAA,OAAK,CAAC,YAAY,CAAC6E,IAAI,CAAC7E,GAAG,CAAC,GAAGc,CAAC,CAAC,sCAAsC,EAAE;MAAEG,GAAG,EAAHA;IAAG,CAAE,CAAC,GAAGK,SAAS;EAAA;EAErI,IAAMyD,cAAc,GAAc,SAA5BA,cAAcA,CAAe/E,GAAQ;IAAA,OAAK,EAACA,GAAG,aAAHA,GAAG,uBAAHA,GAAG,CAAEgF,KAAK,IAAGlE,CAAC,CAAC,oCAAoC,EAAE;MAAEmE,IAAI,EAAEjF,GAAG,CAACiF;IAAI,CAAE,CAAC,GAAG3D,SAAS;EAAA;EAErI,IAAM4D,eAAe,GAAc,SAA7BA,eAAeA,CAAelF,GAAgB,EAAI;;IACtD,IAAMmF,UAAU,GAAGnF,GAAG,CAACoF,WAAW,GAAG,CAAAC,EAAA,IAAAC,EAAA,IAAAC,EAAA,IAAA9D,EAAA,GAAAzB,GAAG,aAAHA,GAAG,uBAAHA,GAAG,CAAEoF,WAAW,cAAA3D,EAAA,uBAAAA,EAAA,CAAE+D,IAAI,cAAAD,EAAA,uBAAAA,EAAA,CAAEE,QAAQ,cAAAH,EAAA,uBAAAA,EAAA,CAAEE,IAAI,cAAAH,EAAA,uBAAAA,EAAA,CAAEF,UAAU,GAAG,CAAAO,EAAA,IAAAC,EAAA,GAAA3F,GAAG,aAAHA,GAAG,uBAAHA,GAAG,CAAEyF,QAAQ,cAAAE,EAAA,uBAAAA,EAAA,CAAEH,IAAI,cAAAE,EAAA,uBAAAA,EAAA,CAAEP,UAAU;IAEzH,IAAI,CAACA,UAAU,IAAI,CAACA,UAAU,CAAC5C,MAAM,EAAE;MACrC,OAAOzB,CAAC,CAAC,qBAAqB,EAAE;QAAEG,GAAG,EAAEH,CAAC,CAAC,sCAAsC;MAAC,CAAE,CAAC;;IAGrF;IACA,OAAOqE,UAAU,CAAC5B,GAAG,CAAC,UAACqC,SAAc;MAAA,OAAKb,cAAc,CAACa,SAAS,CAAC;IAAA,EAAC,CAACC,IAAI,CAAC,UAACC,cAAsB;MAAA,OAAKA,cAAc;IAAA,EAAC;EACvH,CAAC;EAED,IAAMC,QAAQ,GAAc,SAAtBA,QAAQA,CAAe/F,GAAW,EAAI;IAC1C,IAAMC,UAAU,GAAG,CACjBkD,QAAQ,EACRxB,WAAW,CAAC,OAAO,CAAC,EACpBC,SAAS,CAAC,OAAO,CAAC,EAClB8B,aAAa;IACb;IACAK,UAAU,CAAC,OAAO,CAAC,CACpB;IAED,OAAOhE,aAAa,CAACC,GAAG,EAAEC,UAAU,CAAC;EACvC,CAAC;EAED,IAAM+F,uBAAuB,GAAc,SAArCA,uBAAuBA,CAAehG,GAAW,EAAI;IACzD,IAAMC,UAAU,GAAG,CACjBkD,QAAQ,EACRxB,WAAW,CAAC,OAAO,CAAC,EACpBC,SAAS,CAAC,OAAO,CAAC,EAClBgC,4BAA4B,EAC5BC,QAAQ,CAAC,OAAO,CAAC,EACjBE,UAAU,CAAC,OAAO,EAAE,EAAE,CAAC,CACxB;IAED,OAAOhE,aAAa,CAACC,GAAG,EAAEC,UAAU,CAAC;EACvC,CAAC;EAED,IAAMgG,kBAAkB,GAAc,SAAhCA,kBAAkBA,CAAejG,GAAW,EAAI;IACpD,IAAMC,UAAU,GAAG,CACjBkD,QAAQ,EACR3B,WAAW,CAAC,OAAO,CAAC,EACpBG,WAAW,CAAC,OAAO,CAAC,EACpBC,SAAS,CAAC,OAAO,CAAC,EAClB8B,aAAa,EACbG,QAAQ,CAAC,OAAO,CAAC,EACjBE,UAAU,CAAC,OAAO,CAAC,CACpB;IAED,OAAOhE,aAAa,CAACC,GAAG,EAAEC,UAAU,CAAC;EACvC,CAAC;EAED,IAAMiG,QAAQ,GAAc,SAAtBA,QAAQA,CAAelG,GAAW,EAAI;IAC1C,IAAIA,GAAG,EAAE;MACP,IAAMC,UAAU,GAAG,CACjBiB,QAAQ,CAAC,UAAU,CAAC,EACpB+C,eAAe,EACf1C,MAAM,CAAC,UAAU,CAAC,CACnB;MAED,IAAM4E,eAAe,GAAGpG,aAAa,CAACC,GAAG,EAAEC,UAAU,CAAC;MAEtD,IAAIkG,eAAe,EAAE;QACnB,OAAOA,eAAe;;MAGxB,IAAMC,MAAM,GAAGpG,GAAG,CAACqG,KAAK,CAAC,GAAG,CAAC;MAC7B,IAAMC,eAAe,GAAG,CACtBnD,QAAQ,EACRxB,WAAW,CAAC,UAAU,CAAC,EACvBC,SAAS,CAAC,UAAU,CAAC,EACrB8B,aAAa,EACbG,QAAQ,CAAC,UAAU,CAAC,EACpBE,UAAU,CAAC,UAAU,CAAC,CACvB;MAED,KAAM,IAAIwC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGH,MAAM,CAAC7D,MAAM,EAAEgE,CAAC,EAAE,EAAG;QACxC,IAAMC,YAAY,GAAGzG,aAAa,CAACqG,MAAM,CAACG,CAAC,CAAC,EAAED,eAAe,CAAC;QAE9D,IAAIE,YAAY,EAAE;UAChB,OAAOA,YAAY;;;;EAI3B,CAAC;EAED,IAAMC,gBAAgB,GAAc,SAA9BA,gBAAgBA,CAAezG,GAAW,EAAI;IAClD;IACAA,GAAG,GAAGA,GAAG,GAAGA,GAAG,CAAC0G,OAAO,CAAC,OAAO,EAAE,EAAE,CAAC,GAAG1G,GAAG;IAE1C,OAAOkG,QAAQ,CAAClG,GAAG,CAAC;EACtB,CAAC;EAED,IAAM2G,YAAY,GAAc,SAA1BA,YAAYA,CAAe3G,GAAW,EAAI;IAC9C,IAAIrB,OAAO,CAACqB,GAAG,CAAC,EAAE;MAChB,OAAOc,CAAC,CAAC,sCAAsC,CAAC;KACjD,MAAM;MACL,OAAOoF,QAAQ,CAAClG,GAAG,CAAC;;EAExB,CAAC;EAED,IAAM4G,QAAQ,GAAG,SAAXA,QAAQA,CAAI5G,GAAuB,EAAI;IAC3C,OAAO,qDAAqD;EAC9D,CAAC;EAED,IAAM6G,UAAU,GAAc,SAAxBA,UAAUA,CAAe7G,GAAmB;IAAA,OAAKrB,OAAO,CAACqB,GAAG,aAAHA,GAAG,uBAAHA,GAAG,CAAE8G,MAAM,CAAC,GAAGhG,CAAC,CAAC,2CAA2C,CAAC,GAAGQ,SAAS;EAAA;EAExI,IAAMyF,WAAW,GAAqB,SAAhCA,WAAWA,CAAsBC,MAAe;IAAA,OAAgB,UAAChH,GAAuB,EAAI;MAAA,IAAAyB,EAAA;MAAC,OAAAuF,MAAM,KAAI,CAAAvF,EAAA,GAACzB,GAAG,IAAI,EAAG,cAAAyB,EAAA,uBAAAA,EAAA,CAAEC,KAAK,CAAC,mBAAmB,CAAC,IAAGZ,CAAC,CAAC,yBAAyB,CAAC,GAAGQ,SAAS;IAAA;EAAA;EAE/L,IAAM2F,WAAW,GAAyC,SAApDA,WAAWA,CAA0CjH,GAAgB,EAAI;;IAC7E,IACEiF,IAAI,GAEFjF,GAAG,CAFLiF,IAAI;MACJiC,GAAG,GACDlH,GAAG,CADLkH,GAAG;IAGL,IAAMC,QAAQ,GAAG,IAAIjI,IAAI,CAACc,GAAG,CAACmH,QAAQ,CAAC;IACvC,IAAMC,aAAa,GAAG,IAAIlI,IAAI,CAACc,GAAG,CAACZ,IAAI,CAAC;IACxC,IAAMiI,UAAU,GAAG,IAAInI,IAAI,CAACc,GAAG,CAACqH,UAAU,CAAC;IAE3C,IAAI1I,OAAO,CAACsG,IAAI,CAAC,EAAE;MACjB,OAAOnE,CAAC,CAAC,wCAAwC,EAAE;QAAEwG,QAAQ,EAAEJ,GAAG,GAAG;MAAC,CAAE,CAAC;;IAG3E,IAAI,CAACC,QAAQ,CAACzH,KAAK,EAAE;MACnB,IAAI,CAACyH,QAAQ,CAACrH,KAAK,EAAE;QACnB,OAAOgB,CAAC,CAAC,+CAA+C,EAAE;UAAEwG,QAAQ,EAAEJ,GAAG,GAAG;QAAC,CAAE,CAAC;OACjF,MAAM,IAAIC,QAAQ,CAAC3H,GAAG,GAAG,CAAC,IAAI2H,QAAQ,CAAC3H,GAAG,GAAG,KAAK,EAAE;QACnD,OAAOsB,CAAC,CAAC,2CAA2C,EAAE;UAAEwG,QAAQ,EAAEJ,GAAG,GAAG;QAAC,CAAE,CAAC;;;IAIhF,IAAI,CAACE,aAAa,CAAC1H,KAAK,EAAE;MACxB,IAAI,CAAC0H,aAAa,CAACtH,KAAK,EAAE;QACxB,OAAOgB,CAAC,CAAC,2CAA2C,EAAE;UAAEwG,QAAQ,EAAEJ,GAAG,GAAG;QAAC,CAAE,CAAC;OAC7E,MAAM,IAAIE,aAAa,CAAC5H,GAAG,GAAG,CAAC,IAAI4H,aAAa,CAAC5H,GAAG,GAAG,KAAK,EAAE;QAC7D,OAAOsB,CAAC,CAAC,uCAAuC,EAAE;UAAEwG,QAAQ,EAAEJ,GAAG,GAAG;QAAC,CAAE,CAAC;OACzE,MAAM,IAAI,CAAAzF,EAAA,GAAA2F,aAAa,CAAC9H,MAAM,cAAAmC,EAAA,uBAAAA,EAAA,CAAE5B,QAAQ,CAAC,GAAG,CAAC,EAAE;QAC9C,OAAOuH,aAAa;;KAEvB,MAAM;MACL,OAAOtG,CAAC,CAAC,wCAAwC,EAAE;QAAEwG,QAAQ,EAAEJ,GAAG,GAAG;MAAC,CAAE,CAAC;;IAG3E,IAAI,CAACG,UAAU,CAAC3H,KAAK,EAAE;MACrB,IAAI,CAAC2H,UAAU,CAACvH,KAAK,EAAE;QACrB,IAAMyH,qBAAqB,GAAGvB,uBAAuB,CAACqB,UAAU,CAAC/H,MAAM,CAAC;QAExE,IAAIiI,qBAAqB,EAAE;UACzB,OAAOA,qBAAqB;;OAE/B,MAAM,IAAIF,UAAU,CAAC7H,GAAG,GAAG,CAAC,IAAI6H,UAAU,CAAC7H,GAAG,GAAG,KAAK,EAAE;QACvD,OAAOsB,CAAC,CAAC,6CAA6C,EAAE;UAAEwG,QAAQ,EAAEJ,GAAG,GAAG;QAAC,CAAE,CAAC;;KAEjF,MAAM;MACL,OAAOpG,CAAC,CAAC,8CAA8C,EAAE;QAAEwG,QAAQ,EAAEJ,GAAG,GAAG;MAAC,CAAE,CAAC;;IAGjF,OAAO5F,SAAS;EAClB,CAAC;EAED,IAAMkG,YAAY,GAAc,SAA1BA,YAAYA,CAAexH,GAAG,EAAEyH,aAAa,EAAI;IACrD,IAAIC,aAAiC;IAErC,IAAI/I,OAAO,CAACqB,GAAG,aAAHA,GAAG,uBAAHA,GAAG,CAAEiF,IAAI,CAAC,EAAE;MACtB,OAAOnE,CAAC,CAAC,6CAA6C,EAAE;QAAE6G,KAAK,EAAEF;MAAa,CAAE,CAAC;;IAGnF,IAAI9I,OAAO,CAACqB,GAAG,CAAC4H,KAAK,CAAC,EAAE;MACtB,OAAO9G,CAAC,CAAC,oDAAoD,EAAE;QAAE6G,KAAK,EAAEF;MAAa,CAAE,CAAC;KACzF,MAAM;MACLzH,GAAG,CAAC4H,KAAK,CAACC,OAAO,CAAC,UAACC,IAAS,EAAEZ,GAAW,EAAI;QAC3C,IAAMa,iBAAiB,GAAGb,GAAG,GAAG,CAAC;QAEjC,IAAItI,GAAG,CAACkJ,IAAI,EAAE,OAAO,CAAC,IAAInJ,OAAO,CAACmJ,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEE,KAAK,CAAC,IAAI,CAACN,aAAa,EAAE;UAChEA,aAAa,GAAG5G,CAAC,CAAC,uDAAuD,EAAE;YAAEmH,UAAU,EAAER,aAAa;YAAES,SAAS,EAAEH;UAAiB,CAAE,CAAC;SACxI,MAAM,IAAInJ,GAAG,CAACkJ,IAAI,EAAE,QAAQ,CAAC,IAAInJ,OAAO,CAACmJ,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEK,MAAM,CAAC,EAAE;UACvDT,aAAa,GAAG5G,CAAC,CAAC,wDAAwD,EAAE;YAAEmH,UAAU,EAAER,aAAa;YAAES,SAAS,EAAEH;UAAiB,CAAE,CAAC;;QAG1I,IAAKnJ,GAAG,CAACkJ,IAAI,EAAE,MAAM,CAAC,IAAInJ,OAAO,CAACmJ,IAAI,CAACM,IAAI,CAAC,IAAI,CAACV,aAAa,IAAM,CAAC9I,GAAG,CAACkJ,IAAI,EAAE,MAAM,CAAC,IAAI,CAACJ,aAAc,EAAE;UACzGA,aAAa,GAAG5G,CAAC,CAAC,kDAAkD,EAAE;YAAEmH,UAAU,EAAER,aAAa;YAAES,SAAS,EAAEH;UAAiB,CAAE,CAAC;;QAGpI,IAAInJ,GAAG,CAACkJ,IAAI,EAAE,OAAO,CAAC,EAAE;UACtB,IACGlJ,GAAG,CAACkJ,IAAI,EAAE,QAAQ,CAAC,IAAInJ,OAAO,CAACmJ,IAAI,CAAC1B,MAAM,CAAC,IAAI,CAACsB,aAAa,IAC7D,CAAC9I,GAAG,CAACkJ,IAAI,EAAE,QAAQ,CAAC,IAAI,CAACJ,aAAc,EACxC;YACAA,aAAa,GAAG5G,CAAC,CAAC,oDAAoD,EAAE;cAAEmH,UAAU,EAAER,aAAa;cAAES,SAAS,EAAEH;YAAiB,CAAE,CAAC;;;MAG1I,CAAC,CAAC;;IAGJ,OAAOL,aAAa;EACtB,CAAC;EAED,IAAMW,cAAc,GAAc,SAA5BA,cAAcA,CAAerI,GAAG,EAAI;IACxC,IAAM8G,MAAM,GAAAwB,kBAAA,CAAOtI,GAAG,CAAC,CAAC,CAAC;IACzB,IAAIU,OAAO;IAEXoG,MAAM,CAACe,OAAO,CAAC,UAACU,KAAK,EAAErB,GAAG,EAAEsB,GAAG,EAAI;MACjC9H,OAAO,GAAG8G,YAAY,CAACe,KAAK,EAAErB,GAAG,GAAG,CAAC,CAAC;MACtC,IAAI,CAAC,CAACxG,OAAO,EAAE;QACb8H,GAAG,CAACjG,MAAM,GAAG2E,GAAG,GAAG,CAAC,CAAC,CAAC;;IAE1B,CAAC,CAAC;IAEF,OAAOxG,OAAO;EAChB,CAAC;EAED,IAAM+H,QAAQ,GAAc,SAAtBA,QAAQA,CAAezI,GAAG,EAAI;IAClC,IAAIrB,OAAO,CAACqB,GAAG,aAAHA,GAAG,uBAAHA,GAAG,CAAE0B,KAAK,CAAC,IAAI/C,OAAO,CAACqB,GAAG,aAAHA,GAAG,uBAAHA,GAAG,CAAG,UAAU,CAAC,CAAC,EAAE;MACrD,OAAOc,CAAC,CAAC,mCAAmC,CAAC;;EAEjD,CAAC;EAED,IAAM4H,iBAAiB,GAAqB,SAAtCA,iBAAiBA,CAAsBC,IAAI;IAAA,OAAgB,YAAa;MAAA,IAAZ3I,GAAG,GAAA8D,SAAA,CAAAvB,MAAA,QAAAuB,SAAA,QAAAxC,SAAA,GAAAwC,SAAA,MAAG,EAAE;MACxE,IAAI9D,GAAG,CAAC4I,IAAI,CAAC,UAACd,IAAS;QAAA,OAAKnJ,OAAO,CAACmJ,IAAI,CAACe,KAAK,CAAC;MAAA,EAAC,EAAE;QAChD,OAAO/H,CAAC,CAAC,uDAAuD,CAAC;;MAGnE,IAAId,GAAG,CAAC4I,IAAI,CAAC,UAACd,IAAS,EAAI;QAAA,IAAArG,EAAA,EAAA8D,EAAA;QAAC,SAAA9D,EAAA,GAAAqG,IAAI,CAACgB,SAAS,cAAArH,EAAA,uBAAAA,EAAA,CAAEc,MAAM,MAAI,CAAAgD,EAAA,GAAAuC,IAAI,CAACiB,eAAe,cAAAxD,EAAA,uBAAAA,EAAA,CAAEhD,MAAM;MAAA,EAAC,EAAE;QACnF,OAAOzB,CAAC,CAAC,oEAAoE,CAAC;;MAGhF,IAAI6H,IAAI,KAAKlK,IAAI,CAACuK,IAAI,EAAE;QACtB,IAAIhJ,GAAG,CAAC4I,IAAI,CAAC,UAACd,IAAS;UAAA,OAAKnJ,OAAO,CAACmJ,IAAI,CAACgB,SAAS,CAAC;QAAA,EAAC,EAAE;UACpD,OAAOhI,CAAC,CAAC,2DAA2D,CAAC;;QAGvE,IAAId,GAAG,CAAC4I,IAAI,CAAC,UAACd,IAAS;UAAA,OAAKnJ,OAAO,CAACmJ,IAAI,CAACmB,SAAS,CAAC;QAAA,EAAC,EAAE;UACpD,OAAOnI,CAAC,CAAC,2DAA2D,CAAC;;OAExE,MAAM,IAAId,GAAG,CAAC4I,IAAI,CAAC,UAACd,IAAS;QAAA,OAAKnJ,OAAO,CAACmJ,IAAI,CAACgB,SAAS,CAAC,IAAInK,OAAO,CAACmJ,IAAI,CAACiB,eAAe,CAAC;MAAA,EAAC,EAAE;QAC5F,OAAOjI,CAAC,CAAC,8DAA8D,CAAC;;MAG1E,OAAOQ,SAAS;IAClB,CAAC;EAAA;EAED;EACA,IAAM4H,SAAS,GAAc,SAAvBA,SAASA,CAAelJ,GAAG;IAAA,OAAKsB,SAAS;EAAA;EAE/C,IAAM6H,YAAY,GAAc,SAA1BA,YAAYA,CAAenJ,GAAG,EAAI;IACtC,IAAMoJ,UAAU,GAAGC,IAAI,CAACC,KAAK,CAACtJ,GAAG,CAAC;IAClC,IAAM2I,IAAI,GAAGS,UAAU,CAACT,IAAI;IAE5B,IAAI,CAACA,IAAI,EAAE;MACT,OAAO7H,CAAC,CAAC,qBAAqB,EAAE;QAAEG,GAAG,EAAE;MAAM,CAAE,CAAC;;IAGlD,IAAI0H,IAAI,KAAK,IAAI,EAAE;MACjB,IAAI,CAACS,UAAU,CAACG,WAAW,EAAE;QAC3B,OAAOzI,CAAC,CAAC,qBAAqB,EAAE;UAAEG,GAAG,EAAE;QAAa,CAAE,CAAC;;MAGzD,IAAI,CAACmI,UAAU,CAACI,eAAe,EAAE;QAC/B,OAAO1I,CAAC,CAAC,qBAAqB,EAAE;UAAEG,GAAG,EAAE;QAAiB,CAAE,CAAC;;MAG7D,IAAI,CAACmI,UAAU,CAACK,YAAY,EAAE;QAC5B,OAAO3I,CAAC,CAAC,qBAAqB,EAAE;UAAEG,GAAG,EAAE;QAAc,CAAE,CAAC;;MAG1D,IAAI,CAACmI,UAAU,CAACM,UAAU,EAAE;QAC1B,OAAO5I,CAAC,CAAC,qBAAqB,EAAE;UAAEG,GAAG,EAAE;QAAY,CAAE,CAAC;;;IAI1D,OAAOK,SAAS;EAClB,CAAC;EAED,IAAMqI,QAAQ,GAAc,SAAtBA,QAAQA,CAAe3J,GAAG,EAAI;IAClC,IAAM4J,oBAAoB,GAAG,CAAC,MAAM,EAAE,OAAO,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,CAAC;IAEnE,IAAI,CAAC5J,GAAG,IAAIA,GAAG,KAAK,EAAE,EAAE;MACtB,OAAOsB,SAAS;;IAGlB,IAAMuI,OAAO,GAAG7J,GAAG,CAACqG,KAAK,CAAC,GAAG,CAAC,CAACyD,GAAG,EAAE;IACpC,IAAMC,aAAa,GAAGF,OAAO,CAACxD,KAAK,CAAC,GAAG,CAAC,CAACyD,GAAG,EAAE,CAACzF,WAAW,EAAE;IAE5D,IAAI,CAACuF,oBAAoB,CAAC/J,QAAQ,CAACkK,aAAa,CAAC,EAAE;MACjD,OAAOjJ,CAAC,CAAC,oCAAoC,CAAC;;IAGhD,OAAOQ,SAAS;EAClB,CAAC;EAED,IAAM0I,YAAY,GAAc,SAA1BA,YAAYA,CAAA,EAA2B;IAAA,IAAZhK,GAAG,GAAA8D,SAAA,CAAAvB,MAAA,QAAAuB,SAAA,QAAAxC,SAAA,GAAAwC,SAAA,MAAG,EAAE;IACvC,IAAI,CAAC9D,GAAG,CAACtB,GAAG,CAACuL,UAAU,CAAC,EAAE;MACxB,OAAOnJ,CAAC,CAAC,qBAAqB,EAAE;QAAEG,GAAG,EAAEH,CAAC,CAAC,0BAA0B;MAAC,CAAE,CAAC;;EAE3E,CAAC;EAED,IAAMoJ,SAAS,GAAc,SAAvBA,SAASA,CAAelK,GAAG,EAAI;IACnC,IAAMoD,YAAY,GAAGpD,GAAG,aAAHA,GAAG,uBAAHA,GAAG,CAAE0B,KAAK,CAAC,cAAc,CAAC;IAE/C,IAAI0B,YAAY,EAAE;MAChB,OAAOtC,CAAC,CAAC,kBAAkB,EAAE;QAC3BG,GAAG,EAAHA,GAAG;QAAEoC,KAAK,EAAED,YAAY,CAACb,MAAM;QAAEe,KAAK,EAAEF,YAAY,CAACG,GAAG,CAAC,UAACC,IAAY;UAAA,OAAKA,IAAI,KAAK,GAAG,GAAG,OAAO,QAAAnC,MAAA,CAAQmC,IAAK,OAAG;QAAA,EAAC,CAACC,IAAI,CAAC,IAAI;OAC7H,CAAC;;IAGJ,OAAO1D,aAAa,CAACC,GAAG,EAAE,CAAC2B,WAAW,CAAC,OAAO,CAAC,EAAEC,SAAS,CAAC,OAAO,CAAC,EAAEV,QAAQ,CAAC,OAAO,CAAC,EAAEK,MAAM,CAAC,OAAO,CAAC,EAAE4C,QAAQ,CAAC,CAAC;EACrH,CAAC;EAED,OAAO;IACLD,YAAY,EAAZA,YAAY;IACZU,YAAY,EAAZA,YAAY;IACZuE,YAAY,EAAZA,YAAY;IACZ1G,cAAc,EAAdA,cAAc;IACdP,aAAa,EAAbA,aAAa;IACbgH,SAAS,EAATA,SAAS;IACTnC,WAAW,EAAXA,WAAW;IACXhC,cAAc,EAAdA,cAAc;IACdG,eAAe,EAAfA,eAAe;IACfZ,YAAY,EAAZA,YAAY;IACZyB,QAAQ,EAARA,QAAQ;IACRC,uBAAuB,EAAvBA,uBAAuB;IACvBC,kBAAkB,EAAlBA,kBAAkB;IAClBU,YAAY,EAAZA,YAAY;IACZqD,YAAY,EAAZA,YAAY;IACZ3B,cAAc,EAAdA,cAAc;IACdnC,QAAQ,EAARA,QAAQ;IACRyD,QAAQ,EAARA,QAAQ;IACR7E,QAAQ,EAARA,QAAQ;IACRN,KAAK,EAALA,KAAK;IACLC,SAAS,EAATA,SAAS;IACTC,oBAAoB,EAApBA,oBAAoB;IACpBC,GAAG,EAAHA,GAAG;IACH8D,QAAQ,EAARA,QAAQ;IACRjG,SAAS,EAATA,SAAS;IACTR,QAAQ,EAARA,QAAQ;IACRM,SAAS,EAATA,SAAS;IACTT,QAAQ,EAARA,QAAQ;IACRuC,WAAW,EAAXA,WAAW;IACXlB,UAAU,EAAVA,UAAU;IACViB,QAAQ,EAARA,QAAQ;IACRvB,WAAW,EAAXA,WAAW;IACXC,SAAS,EAATA,SAAS;IACTC,UAAU,EAAVA,UAAU;IACVC,OAAO,EAAPA,OAAO;IACP2F,iBAAiB,EAAjBA,iBAAiB;IACjB7B,UAAU,EAAVA,UAAU;IACVI,WAAW,EAAXA,WAAW;IACXiD,SAAS,EAATA,SAAS;IACTtD,QAAQ,EAARA,QAAQ;IACRH,gBAAgB,EAAhBA;GACD;AACH","ignoreList":[]}]}