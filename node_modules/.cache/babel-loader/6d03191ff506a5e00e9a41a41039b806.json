{"remainingRequest":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js??ref--16-1!/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/ubuntu/suseconf/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ubuntu/suseconf/node_modules/@rancher/shell/pages/c/_cluster/gatekeeper/index.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/ubuntu/suseconf/node_modules/@rancher/shell/pages/c/_cluster/gatekeeper/index.vue","mtime":1725338146566},{"path":"/home/ubuntu/suseconf/babel.config.js","mtime":1725343995893},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js","mtime":1725271298942},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1725271300920}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgX3JlZ2VuZXJhdG9yUnVudGltZSBmcm9tICIvaG9tZS91YnVudHUvc3VzZWNvbmYvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL3JlZ2VuZXJhdG9yL2luZGV4LmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwppbXBvcnQgeyBOQU1FLCBDSEFSVF9OQU1FIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy9wcm9kdWN0L2dhdGVrZWVwZXInOwppbXBvcnQgSW5zdGFsbFJlZGlyZWN0IGZyb20gJ0BzaGVsbC91dGlscy9pbnN0YWxsLXJlZGlyZWN0JzsKaW1wb3J0IENoYXJ0SGVhZGluZyBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9DaGFydEhlYWRpbmcnOwppbXBvcnQgU29ydGFibGVUYWJsZSBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9Tb3J0YWJsZVRhYmxlJzsKaW1wb3J0IHsgQmFubmVyIH0gZnJvbSAnQGNvbXBvbmVudHMvQmFubmVyJzsKaW1wb3J0IHsgQ09OU1RSQUlOVF9WSU9MQVRJT05fQ09OU1RSQUlOVF9MSU5LLCBDT05TVFJBSU5UX1ZJT0xBVElPTl9DT1VOVCwgQ09OU1RSQUlOVF9WSU9MQVRJT05fVEVNUExBVEVfTElOSyB9IGZyb20gJ0BzaGVsbC9jb25maWcvdGFibGUtaGVhZGVycyc7CmltcG9ydCB7IEdBVEVLRUVQRVIgfSBmcm9tICdAc2hlbGwvY29uZmlnL3R5cGVzJzsKZXhwb3J0IHZhciBPUEFfR0FURV9LRUVQRVJfSUQgPSAnY2x1c3Rlci9yYW5jaGVyLWNoYXJ0cy9yYW5jaGVyLWdhdGVrZWVwZXInOwpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgQ2hhcnRIZWFkaW5nOiBDaGFydEhlYWRpbmcsCiAgICBTb3J0YWJsZVRhYmxlOiBTb3J0YWJsZVRhYmxlLAogICAgQmFubmVyOiBCYW5uZXIKICB9LAogIG1pZGRsZXdhcmU6IEluc3RhbGxSZWRpcmVjdChOQU1FLCBDSEFSVF9OQU1FKSwKICBmZXRjaDogZnVuY3Rpb24gZmV0Y2goKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgdmFyIGNvbnN0cmFpbnRzOwogICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgaWYgKCFfdGhpcy5jb25zdHJhaW50KSB7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgX2NvbnRleHQudDAgPSBbX3RoaXMuY29uc3RyYWludF07CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA3OwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDY7CiAgICAgICAgICAgIHJldHVybiBfdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2NsdXN0ZXIvZmluZEFsbCcsIHsKICAgICAgICAgICAgICB0eXBlOiBHQVRFS0VFUEVSLlNQT09GRUQuQ09OU1RSQUlOVAogICAgICAgICAgICB9KTsKICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICBjb25zdHJhaW50cyA9IF9jb250ZXh0LnQwOwogICAgICAgICAgICBfdGhpcy52aW9sYXRpb25zID0gY29uc3RyYWludHMubWFwKGZ1bmN0aW9uIChjb25zdHJhaW50LCBpKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIGlkOiBpLAogICAgICAgICAgICAgICAgY29uc3RyYWludExpbms6IHsKICAgICAgICAgICAgICAgICAgdGV4dDogY29uc3RyYWludC5uYW1lRGlzcGxheSwKICAgICAgICAgICAgICAgICAgdG86IGNvbnN0cmFpbnQuZGV0YWlsTG9jYXRpb24KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB0ZW1wbGF0ZUxpbms6IHsKICAgICAgICAgICAgICAgICAgdGV4dDogY29uc3RyYWludC5raW5kLAogICAgICAgICAgICAgICAgICB0bzogewogICAgICAgICAgICAgICAgICAgIG5hbWU6ICdjLWNsdXN0ZXItcHJvZHVjdC1yZXNvdXJjZS1pZCcsCiAgICAgICAgICAgICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgICAgICAgICAgICByZXNvdXJjZTogJ3RlbXBsYXRlcy5nYXRla2VlcGVyLnNoLmNvbnN0cmFpbnR0ZW1wbGF0ZScsCiAgICAgICAgICAgICAgICAgICAgICBpZDogY29uc3RyYWludC5raW5kLnRvTG93ZXJDYXNlKCksCiAgICAgICAgICAgICAgICAgICAgICBwcm9kdWN0OiAnZ2F0ZWtlZXBlcicKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBjb3VudDogY29uc3RyYWludC50b3RhbFZpb2xhdGlvbnMKICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9KTsKICAgICAgICAgIGNhc2UgOToKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlKTsKICAgIH0pKSgpOwogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YShjdHgpIHsKICAgIHJldHVybiB7CiAgICAgIGhlYWRlcnM6IFtDT05TVFJBSU5UX1ZJT0xBVElPTl9DT05TVFJBSU5UX0xJTkssIENPTlNUUkFJTlRfVklPTEFUSU9OX1RFTVBMQVRFX0xJTkssIENPTlNUUkFJTlRfVklPTEFUSU9OX0NPVU5UXSwKICAgICAgdmlvbGF0aW9uczogW10KICAgIH07CiAgfQp9Ow=="},{"version":3,"names":["NAME","CHART_NAME","InstallRedirect","ChartHeading","SortableTable","Banner","CONSTRAINT_VIOLATION_CONSTRAINT_LINK","CONSTRAINT_VIOLATION_COUNT","CONSTRAINT_VIOLATION_TEMPLATE_LINK","GATEKEEPER","OPA_GATE_KEEPER_ID","components","middleware","fetch","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","constraints","wrap","_callee$","_context","prev","next","constraint","t0","$store","dispatch","type","SPOOFED","CONSTRAINT","sent","violations","map","i","id","constraintLink","text","nameDisplay","to","detailLocation","templateLink","kind","name","params","resource","toLowerCase","product","count","totalViolations","stop","data","ctx","headers"],"sources":["node_modules/@rancher/shell/pages/c/_cluster/gatekeeper/index.vue"],"sourcesContent":["<script>\nimport { NAME, CHART_NAME } from '@shell/config/product/gatekeeper';\nimport InstallRedirect from '@shell/utils/install-redirect';\nimport ChartHeading from '@shell/components/ChartHeading';\nimport SortableTable from '@shell/components/SortableTable';\nimport { Banner } from '@components/Banner';\nimport { CONSTRAINT_VIOLATION_CONSTRAINT_LINK, CONSTRAINT_VIOLATION_COUNT, CONSTRAINT_VIOLATION_TEMPLATE_LINK } from '@shell/config/table-headers';\nimport { GATEKEEPER } from '@shell/config/types';\n\nexport const OPA_GATE_KEEPER_ID = 'cluster/rancher-charts/rancher-gatekeeper';\n\nexport default {\n  components: {\n    ChartHeading, SortableTable, Banner\n  },\n  middleware: InstallRedirect(NAME, CHART_NAME),\n  async fetch() {\n    const constraints = this.constraint ? [this.constraint] : await this.$store.dispatch('cluster/findAll', { type: GATEKEEPER.SPOOFED.CONSTRAINT });\n\n    this.violations = constraints\n      .map((constraint, i) => ({\n        id:             i,\n        constraintLink: {\n          text: constraint.nameDisplay,\n          to:   constraint.detailLocation\n        },\n        templateLink: {\n          text: constraint.kind,\n          to:   {\n            name:   'c-cluster-product-resource-id',\n            params: {\n              resource: 'templates.gatekeeper.sh.constrainttemplate', id: constraint.kind.toLowerCase(), product: 'gatekeeper'\n            }\n          }\n        },\n        count: constraint.totalViolations\n      }));\n  },\n  data(ctx) {\n    return {\n      headers: [\n        CONSTRAINT_VIOLATION_CONSTRAINT_LINK,\n        CONSTRAINT_VIOLATION_TEMPLATE_LINK,\n        CONSTRAINT_VIOLATION_COUNT\n      ],\n      violations: []\n    };\n  }\n};\n</script>\n\n<template>\n  <div>\n    <ChartHeading\n      :label=\"t('gatekeeperIndex.poweredBy')\"\n      url=\"https://github.com/open-policy-agent/gatekeeper\"\n    />\n    <Banner color=\"warning\">\n      <span v-clean-html=\"t('gatekeeperIndex.deprecated', {}, true)\" />\n    </Banner>\n    <div class=\"spacer\" />\n    <div class=\"mb-10\">\n      <h2><t k=\"gatekeeperIndex.violations\" /></h2>\n    </div>\n    <div>\n      <SortableTable\n        :headers=\"headers\"\n        :rows=\"violations\"\n        :search=\"false\"\n        :table-actions=\"false\"\n        :row-actions=\"false\"\n        :paging=\"true\"\n        :rows-per-page=\"10\"\n        key-field=\"id\"\n        group-by=\"templateLink.text\"\n      />\n    </div>\n  </div>\n</template>\n"],"mappings":";;;;AACA,SAAAA,IAAA,EAAAC,UAAA;AACA,OAAAC,eAAA;AACA,OAAAC,YAAA;AACA,OAAAC,aAAA;AACA,SAAAC,MAAA;AACA,SAAAC,oCAAA,EAAAC,0BAAA,EAAAC,kCAAA;AACA,SAAAC,UAAA;AAEA,WAAAC,kBAAA;AAEA;EACAC,UAAA;IACAR,YAAA,EAAAA,YAAA;IAAAC,aAAA,EAAAA,aAAA;IAAAC,MAAA,EAAAA;EACA;EACAO,UAAA,EAAAV,eAAA,CAAAF,IAAA,EAAAC,UAAA;EACAY,KAAA,WAAAA,MAAA;IAAA,IAAAC,KAAA;IAAA,OAAAC,iBAAA,cAAAC,mBAAA,CAAAC,IAAA,UAAAC,QAAA;MAAA,IAAAC,WAAA;MAAA,OAAAH,mBAAA,CAAAI,IAAA,UAAAC,SAAAC,QAAA;QAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;UAAA;YAAA,KACAV,KAAA,CAAAW,UAAA;cAAAH,QAAA,CAAAE,IAAA;cAAA;YAAA;YAAAF,QAAA,CAAAI,EAAA,IAAAZ,KAAA,CAAAW,UAAA;YAAAH,QAAA,CAAAE,IAAA;YAAA;UAAA;YAAAF,QAAA,CAAAE,IAAA;YAAA,OAAAV,KAAA,CAAAa,MAAA,CAAAC,QAAA;cAAAC,IAAA,EAAApB,UAAA,CAAAqB,OAAA,CAAAC;YAAA;UAAA;YAAAT,QAAA,CAAAI,EAAA,GAAAJ,QAAA,CAAAU,IAAA;UAAA;YAAAb,WAAA,GAAAG,QAAA,CAAAI,EAAA;YAEAZ,KAAA,CAAAmB,UAAA,GAAAd,WAAA,CACAe,GAAA,WAAAT,UAAA,EAAAU,CAAA;cAAA;gBACAC,EAAA,EAAAD,CAAA;gBACAE,cAAA;kBACAC,IAAA,EAAAb,UAAA,CAAAc,WAAA;kBACAC,EAAA,EAAAf,UAAA,CAAAgB;gBACA;gBACAC,YAAA;kBACAJ,IAAA,EAAAb,UAAA,CAAAkB,IAAA;kBACAH,EAAA;oBACAI,IAAA;oBACAC,MAAA;sBACAC,QAAA;sBAAAV,EAAA,EAAAX,UAAA,CAAAkB,IAAA,CAAAI,WAAA;sBAAAC,OAAA;oBACA;kBACA;gBACA;gBACAC,KAAA,EAAAxB,UAAA,CAAAyB;cACA;YAAA;UAAA;UAAA;YAAA,OAAA5B,QAAA,CAAA6B,IAAA;QAAA;MAAA,GAAAjC,OAAA;IAAA;EACA;EACAkC,IAAA,WAAAA,KAAAC,GAAA;IACA;MACAC,OAAA,GACAhD,oCAAA,EACAE,kCAAA,EACAD,0BAAA,CACA;MACA0B,UAAA;IACA;EACA;AACA","ignoreList":[]}]}