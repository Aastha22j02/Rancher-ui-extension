{"remainingRequest":"/home/ubuntu/susecon-2024-ext-demo/node_modules/babel-loader/lib/index.js??ref--16-1!/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/store/catalog.js","dependencies":[{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/store/catalog.js","mtime":1725271280091},{"path":"/home/ubuntu/susecon-2024-ext-demo/babel.config.js","mtime":1725268750245},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/babel-loader/lib/index.js","mtime":1725271298942}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3NsaWNlZFRvQXJyYXkiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBfdG9Db25zdW1hYmxlQXJyYXkgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdG9Db25zdW1hYmxlQXJyYXkiOwppbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5IjsKaW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiL2hvbWUvdWJ1bnR1L3N1c2Vjb24tMjAyNC1leHQtZGVtby9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvcmVnZW5lcmF0b3IvaW5kZXguanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmZ1bmN0aW9uIF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHIsIGUpIHsgdmFyIHQgPSAidW5kZWZpbmVkIiAhPSB0eXBlb2YgU3ltYm9sICYmIHJbU3ltYm9sLml0ZXJhdG9yXSB8fCByWyJAQGl0ZXJhdG9yIl07IGlmICghdCkgeyBpZiAoQXJyYXkuaXNBcnJheShyKSB8fCAodCA9IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShyKSkgfHwgZSAmJiByICYmICJudW1iZXIiID09IHR5cGVvZiByLmxlbmd0aCkgeyB0ICYmIChyID0gdCk7IHZhciBfbiA9IDAsIEYgPSBmdW5jdGlvbiBGKCkge307IHJldHVybiB7IHM6IEYsIG46IGZ1bmN0aW9uIG4oKSB7IHJldHVybiBfbiA+PSByLmxlbmd0aCA/IHsgZG9uZTogITAgfSA6IHsgZG9uZTogITEsIHZhbHVlOiByW19uKytdIH07IH0sIGU6IGZ1bmN0aW9uIGUocikgeyB0aHJvdyByOyB9LCBmOiBGIH07IH0gdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIGl0ZXJhdGUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLiIpOyB9IHZhciBvLCBhID0gITAsIHUgPSAhMTsgcmV0dXJuIHsgczogZnVuY3Rpb24gcygpIHsgdCA9IHQuY2FsbChyKTsgfSwgbjogZnVuY3Rpb24gbigpIHsgdmFyIHIgPSB0Lm5leHQoKTsgcmV0dXJuIGEgPSByLmRvbmUsIHI7IH0sIGU6IGZ1bmN0aW9uIGUocikgeyB1ID0gITAsIG8gPSByOyB9LCBmOiBmdW5jdGlvbiBmKCkgeyB0cnkgeyBhIHx8IG51bGwgPT0gdC5yZXR1cm4gfHwgdC5yZXR1cm4oKTsgfSBmaW5hbGx5IHsgaWYgKHUpIHRocm93IG87IH0gfSB9OyB9CmZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShyLCBhKSB7IGlmIChyKSB7IGlmICgic3RyaW5nIiA9PSB0eXBlb2YgcikgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KHIsIGEpOyB2YXIgdCA9IHt9LnRvU3RyaW5nLmNhbGwocikuc2xpY2UoOCwgLTEpOyByZXR1cm4gIk9iamVjdCIgPT09IHQgJiYgci5jb25zdHJ1Y3RvciAmJiAodCA9IHIuY29uc3RydWN0b3IubmFtZSksICJNYXAiID09PSB0IHx8ICJTZXQiID09PSB0ID8gQXJyYXkuZnJvbShyKSA6ICJBcmd1bWVudHMiID09PSB0IHx8IC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KHQpID8gX2FycmF5TGlrZVRvQXJyYXkociwgYSkgOiB2b2lkIDA7IH0gfQpmdW5jdGlvbiBfYXJyYXlMaWtlVG9BcnJheShyLCBhKSB7IChudWxsID09IGEgfHwgYSA+IHIubGVuZ3RoKSAmJiAoYSA9IHIubGVuZ3RoKTsgZm9yICh2YXIgZSA9IDAsIG4gPSBBcnJheShhKTsgZSA8IGE7IGUrKykgbltlXSA9IHJbZV07IHJldHVybiBuOyB9CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5kZXNjcmlwdGlvbi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5mcm9tLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNvcnQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuYXNzaWduLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmVudHJpZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudmFsdWVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucHJvbWlzZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5tYXRjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5yZXBsYWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnN0YXJ0cy13aXRoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnRyaW0uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lc25leHQucHJvbWlzZS5hbGwtc2V0dGxlZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yLmpzIjsKaW1wb3J0IHsgQ0FUQUxPRyB9IGZyb20gJ0BzaGVsbC9jb25maWcvdHlwZXMnOwppbXBvcnQgeyBDQVRBTE9HIGFzIENBVEFMT0dfQU5OT1RBVElPTlMgfSBmcm9tICdAc2hlbGwvY29uZmlnL2xhYmVscy1hbm5vdGF0aW9ucyc7CmltcG9ydCB7IGFkZFBhcmFtcyB9IGZyb20gJ0BzaGVsbC91dGlscy91cmwnOwppbXBvcnQgeyBhbGxIYXNoLCBhbGxIYXNoU2V0dGxlZCB9IGZyb20gJ0BzaGVsbC91dGlscy9wcm9taXNlJzsKaW1wb3J0IHsgY2xvbmUgfSBmcm9tICdAc2hlbGwvdXRpbHMvb2JqZWN0JzsKaW1wb3J0IHsgZmluZEJ5LCBhZGRPYmplY3QsIGZpbHRlckJ5LCBpc0FycmF5IH0gZnJvbSAnQHNoZWxsL3V0aWxzL2FycmF5JzsKaW1wb3J0IHsgc3RyaW5naWZ5IH0gZnJvbSAnQHNoZWxsL3V0aWxzL2Vycm9yJzsKaW1wb3J0IHsgY2xhc3NpZnkgfSBmcm9tICdAc2hlbGwvcGx1Z2lucy9kYXNoYm9hcmQtc3RvcmUvY2xhc3NpZnknOwppbXBvcnQgeyBzb3J0QnkgfSBmcm9tICdAc2hlbGwvdXRpbHMvc29ydCc7CmltcG9ydCB7IGltcG9ydENoYXJ0IH0gZnJvbSAnQHNoZWxsL3V0aWxzL2R5bmFtaWMtaW1wb3J0ZXInOwppbXBvcnQgeyBlbnN1cmVSZWdleCB9IGZyb20gJ0BzaGVsbC91dGlscy9zdHJpbmcnOwppbXBvcnQgeyBpc1ByZXJlbGVhc2UgfSBmcm9tICdAc2hlbGwvdXRpbHMvdmVyc2lvbic7CmltcG9ydCBkaWZmZXJlbmNlIGZyb20gJ2xvZGFzaC9kaWZmZXJlbmNlJzsKaW1wb3J0IHsgbG9va3VwIH0gZnJvbSAnQHNoZWxsL3BsdWdpbnMvZGFzaGJvYXJkLXN0b3JlL21vZGVsLWxvYWRlcic7CnZhciBBTExPV0VEX0NBVEVHT1JJRVMgPSBbJ1N0b3JhZ2UnLCAnTW9uaXRvcmluZycsICdEYXRhYmFzZScsICdSZXBvc2l0b3J5JywgJ1NlY3VyaXR5JywgJ05ldHdvcmtpbmcnLCAnUGFhUycsICdJbmZyYXN0cnVjdHVyZScsICdBcHBsaWNhdGlvbnMnXTsKdmFyIENFUlRJRklFRF9TT1JUUyA9IF9kZWZpbmVQcm9wZXJ0eShfZGVmaW5lUHJvcGVydHkoX2RlZmluZVByb3BlcnR5KF9kZWZpbmVQcm9wZXJ0eSh7fSwgQ0FUQUxPR19BTk5PVEFUSU9OUy5fUkFOQ0hFUiwgMSksIENBVEFMT0dfQU5OT1RBVElPTlMuX0VYUEVSSU1FTlRBTCwgMSksIENBVEFMT0dfQU5OT1RBVElPTlMuX1BBUlRORVIsIDIpLCAib3RoZXIiLCAzKTsKZXhwb3J0IHZhciBXSU5ET1dTID0gJ3dpbmRvd3MnOwpleHBvcnQgdmFyIExJTlVYID0gJ2xpbnV4JzsKZXhwb3J0IHZhciBzdGF0ZSA9IGZ1bmN0aW9uIHN0YXRlKCkgewogIHJldHVybiB7CiAgICBsb2FkZWQ6IHt9LAogICAgY2x1c3RlclJlcG9zOiBbXSwKICAgIG5hbWVzcGFjZWRSZXBvczogW10sCiAgICBjaGFydHM6IHt9LAogICAgdmVyc2lvbkluZm9zOiB7fSwKICAgIGNvbmZpZzogewogICAgICBuYW1lc3BhY2U6ICdjYXRhbG9nJwogICAgfSwKICAgIGluU3RvcmU6IHVuZGVmaW5lZAogIH07Cn07CmV4cG9ydCB2YXIgZ2V0dGVycyA9IHsKICBpc0xvYWRlZDogZnVuY3Rpb24gaXNMb2FkZWQoc3RhdGUpIHsKICAgIHJldHVybiBmdW5jdGlvbiAocmVwbykgewogICAgICByZXR1cm4gISFzdGF0ZS5sb2FkZWRbcmVwby5fa2V5XTsKICAgIH07CiAgfSwKICByZXBvczogZnVuY3Rpb24gcmVwb3Moc3RhdGUpIHsKICAgIHZhciBjbHVzdGVyZWQgPSBzdGF0ZS5jbHVzdGVyUmVwb3MgfHwgW107CiAgICB2YXIgbmFtZXNwYWNlZCA9IHN0YXRlLm5hbWVzcGFjZWRSZXBvcyB8fCBbXTsKICAgIHJldHVybiBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KGNsdXN0ZXJlZCksIF90b0NvbnN1bWFibGVBcnJheShuYW1lc3BhY2VkKSk7CiAgfSwKICAvLyBSYXcgY2hhcnRzCiAgcmF3Q2hhcnRzOiBmdW5jdGlvbiByYXdDaGFydHMoc3RhdGUpIHsKICAgIHJldHVybiBzdGF0ZS5jaGFydHM7CiAgfSwKICByZXBvOiBmdW5jdGlvbiByZXBvKHN0YXRlLCBnZXR0ZXJzKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKF9yZWYpIHsKICAgICAgdmFyIHJlcG9UeXBlID0gX3JlZi5yZXBvVHlwZSwKICAgICAgICByZXBvTmFtZSA9IF9yZWYucmVwb05hbWU7CiAgICAgIHZhciBhcnkgPSByZXBvVHlwZSA9PT0gJ2NsdXN0ZXInID8gc3RhdGUuY2x1c3RlclJlcG9zIDogc3RhdGUubmFtZXNwYWNlZFJlcG9zOwogICAgICByZXR1cm4gZmluZEJ5KGFyeSwgJ21ldGFkYXRhLm5hbWUnLCByZXBvTmFtZSk7CiAgICB9OwogIH0sCiAgY2hhcnRzOiBmdW5jdGlvbiBjaGFydHMoc3RhdGUsIGdldHRlcnMsIHJvb3RTdGF0ZSwgcm9vdEdldHRlcnMpIHsKICAgIHZhciBfcm9vdEdldHRlcnMkY3VycmVudFA7CiAgICB2YXIgcmVwb0tleXMgPSBnZXR0ZXJzLnJlcG9zLm1hcChmdW5jdGlvbiAoeCkgewogICAgICByZXR1cm4geC5fa2V5OwogICAgfSk7CiAgICB2YXIgY2x1c3RlciA9IHJvb3RHZXR0ZXJzWydjdXJyZW50Q2x1c3RlciddOwogICAgaWYgKCgoX3Jvb3RHZXR0ZXJzJGN1cnJlbnRQID0gcm9vdEdldHRlcnNbJ2N1cnJlbnRQcm9kdWN0J10pID09PSBudWxsIHx8IF9yb290R2V0dGVycyRjdXJyZW50UCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3Jvb3RHZXR0ZXJzJGN1cnJlbnRQLmluU3RvcmUpID09PSAnbWFuYWdlbWVudCcpIHsKICAgICAgY2x1c3RlciA9IG51bGw7CiAgICB9CgogICAgLy8gRmlsdGVyIG91dCBjaGFydHMgZm9yIHJlcG9zIHRoYXQgYXJlIG5vIGxvbmdlciBpbiB0aGUgc3RvcmUsIHJhdGhlcgogICAgLy8gdGhhbiB0cnlpbmcgdG8gY2xlYXIgdGhlbSB3aGVuIGEgcmVwbyBpcyByZW1vdmVkLgogICAgLy8gQW5kIG9uZXMgdGhhdCBhcmUgZm9yIHRoZSB3cm9uZyBraW5kIG9mIGNsdXN0ZXIKICAgIHZhciBvdXQgPSBPYmplY3QudmFsdWVzKHN0YXRlLmNoYXJ0cykuZmlsdGVyKGZ1bmN0aW9uIChjaGFydCkgewogICAgICBpZiAoIXJlcG9LZXlzLmluY2x1ZGVzKGNoYXJ0LnJlcG9LZXkpKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIGlmIChjbHVzdGVyICYmIGNoYXJ0LnNjb3BlICYmIGNoYXJ0LnNjb3BlICE9PSBjbHVzdGVyLnNjb3BlKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIHJldHVybiB0cnVlOwogICAgfSk7CiAgICByZXR1cm4gc29ydEJ5KG91dCwgWydjZXJ0aWZpZWRTb3J0JywgJ3JlcG9OYW1lJywgJ2NoYXJ0TmFtZSddKTsKICB9LAogIGNoYXJ0OiBmdW5jdGlvbiBjaGFydChzdGF0ZSwgZ2V0dGVycykgewogICAgcmV0dXJuIGZ1bmN0aW9uIChfcmVmMikgewogICAgICB2YXIga2V5ID0gX3JlZjIua2V5LAogICAgICAgIHJlcG9UeXBlID0gX3JlZjIucmVwb1R5cGUsCiAgICAgICAgcmVwb05hbWUgPSBfcmVmMi5yZXBvTmFtZSwKICAgICAgICBjaGFydE5hbWUgPSBfcmVmMi5jaGFydE5hbWUsCiAgICAgICAgcHJlZmVyUmVwb1R5cGUgPSBfcmVmMi5wcmVmZXJSZXBvVHlwZSwKICAgICAgICBwcmVmZXJSZXBvTmFtZSA9IF9yZWYyLnByZWZlclJlcG9OYW1lLAogICAgICAgIGluY2x1ZGVIaWRkZW4gPSBfcmVmMi5pbmNsdWRlSGlkZGVuOwogICAgICBpZiAoa2V5ICYmICFyZXBvVHlwZSAmJiAhcmVwb05hbWUgJiYgIWNoYXJ0TmFtZSkgewogICAgICAgIHZhciBwYXJzZWQgPSBwYXJzZUtleShrZXkpOwogICAgICAgIHJlcG9UeXBlID0gcGFyc2VkLnJlcG9UeXBlOwogICAgICAgIHJlcG9OYW1lID0gcGFyc2VkLnJlcG9OYW1lOwogICAgICAgIGNoYXJ0TmFtZSA9IHBhcnNlZC5jaGFydE5hbWU7CiAgICAgIH0KICAgICAgdmFyIG1hdGNoaW5nID0gZmlsdGVyQnkoZ2V0dGVycy5jaGFydHMsIHsKICAgICAgICByZXBvVHlwZTogcmVwb1R5cGUsCiAgICAgICAgcmVwb05hbWU6IHJlcG9OYW1lLAogICAgICAgIGNoYXJ0TmFtZTogY2hhcnROYW1lLAogICAgICAgIGRlcHJlY2F0ZWQ6IGZhbHNlCiAgICAgIH0pOwogICAgICBpZiAoaW5jbHVkZUhpZGRlbiA9PT0gZmFsc2UpIHsKICAgICAgICBtYXRjaGluZyA9IG1hdGNoaW5nLmZpbHRlcihmdW5jdGlvbiAoeCkgewogICAgICAgICAgcmV0dXJuICF4LmhpZGRlbjsKICAgICAgICB9KTsKICAgICAgfQogICAgICBpZiAoIW1hdGNoaW5nLmxlbmd0aCkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBpZiAocHJlZmVyUmVwb1R5cGUgJiYgcHJlZmVyUmVwb05hbWUpIHsKICAgICAgICBwcmVmZXJTYW1lUmVwbyhtYXRjaGluZywgcHJlZmVyUmVwb1R5cGUsIHByZWZlclJlcG9OYW1lKTsKICAgICAgfQogICAgICByZXR1cm4gbWF0Y2hpbmdbMF07CiAgICB9OwogIH0sCiAgaXNJbnN0YWxsZWQ6IGZ1bmN0aW9uIGlzSW5zdGFsbGVkKHN0YXRlLCBnZXR0ZXJzLCByb290U3RhdGUsIHJvb3RHZXR0ZXJzKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKF9yZWYzKSB7CiAgICAgIHZhciBndnIgPSBfcmVmMy5ndnI7CiAgICAgIHZhciBuYW1lLCB2ZXJzaW9uOwogICAgICB2YXIgaWR4ID0gZ3ZyLmluZGV4T2YoJy8nKTsKICAgICAgaWYgKGlkeCA+IDApIHsKICAgICAgICBuYW1lID0gZ3ZyLnN1YnN0cigwLCBpZHgpOwogICAgICAgIHZlcnNpb24gPSBndnIuc3Vic3RyKGlkeCArIDEpOwogICAgICB9IGVsc2UgewogICAgICAgIG5hbWUgPSBndnI7CiAgICAgIH0KICAgICAgdmFyIGluU3RvcmUgPSByb290R2V0dGVyc1snY3VycmVudFByb2R1Y3QnXS5pblN0b3JlOwogICAgICB2YXIgc2NoZW1hID0gcm9vdEdldHRlcnNbIiIuY29uY2F0KGluU3RvcmUsICIvc2NoZW1hRm9yIildKG5hbWUpOwogICAgICBpZiAoc2NoZW1hICYmICghdmVyc2lvbiB8fCBzY2hlbWEuYXR0cmlidXRlcy52ZXJzaW9uID09PSB2ZXJzaW9uKSkgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH07CiAgfSwKICB2ZXJzaW9uU2F0aXNmeWluZzogZnVuY3Rpb24gdmVyc2lvblNhdGlzZnlpbmcoc3RhdGUsIGdldHRlcnMpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoX3JlZjQpIHsKICAgICAgdmFyIHJlcG9UeXBlID0gX3JlZjQucmVwb1R5cGUsCiAgICAgICAgcmVwb05hbWUgPSBfcmVmNC5yZXBvTmFtZSwKICAgICAgICBjb25zdHJhaW50ID0gX3JlZjQuY29uc3RyYWludCwKICAgICAgICBjaGFydFZlcnNpb24gPSBfcmVmNC5jaGFydFZlcnNpb247CiAgICAgIHZhciBuYW1lLCB3YW50VmVyc2lvbjsKICAgICAgdmFyIGlkeCA9IGNvbnN0cmFpbnQuaW5kZXhPZignPScpOwogICAgICBpZiAoaWR4ID4gMCkgewogICAgICAgIG5hbWUgPSBjb25zdHJhaW50LnN1YnN0cigwLCBpZHgpOwogICAgICAgIHdhbnRWZXJzaW9uID0gbm9ybWFsaXplVmVyc2lvbihjb25zdHJhaW50LnN1YnN0cihpZHggKyAxKSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbmFtZSA9IGNvbnN0cmFpbnQ7CiAgICAgICAgd2FudFZlcnNpb24gPSAnbGF0ZXN0JzsKICAgICAgfQogICAgICBuYW1lID0gbmFtZS50b0xvd2VyQ2FzZSgpLnRyaW0oKTsKICAgICAgY2hhcnRWZXJzaW9uID0gbm9ybWFsaXplVmVyc2lvbihjaGFydFZlcnNpb24pOwogICAgICB2YXIgbWF0Y2hpbmcgPSBnZXR0ZXJzLmNoYXJ0cy5maWx0ZXIoZnVuY3Rpb24gKGNoYXJ0KSB7CiAgICAgICAgcmV0dXJuIGNoYXJ0LmNoYXJ0TmFtZS50b0xvd2VyQ2FzZSgpLnRyaW0oKSA9PT0gbmFtZTsKICAgICAgfSk7CiAgICAgIGlmICghbWF0Y2hpbmcubGVuZ3RoKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGlmIChyZXBvVHlwZSAmJiByZXBvTmFtZSkgewogICAgICAgIHByZWZlclNhbWVSZXBvKG1hdGNoaW5nLCByZXBvVHlwZSwgcmVwb05hbWUpOwogICAgICB9CiAgICAgIHZhciBjaGFydCA9IG1hdGNoaW5nWzBdOwogICAgICB2YXIgdmVyc2lvbjsKICAgICAgaWYgKHdhbnRWZXJzaW9uID09PSAnbGF0ZXN0JykgewogICAgICAgIHZlcnNpb24gPSBjaGFydC52ZXJzaW9uc1swXTsKICAgICAgfSBlbHNlIGlmICh3YW50VmVyc2lvbiA9PT0gJ21hdGNoJyB8fCB3YW50VmVyc2lvbiA9PT0gJ21hdGNoaW5nJykgewogICAgICAgIHZlcnNpb24gPSBjaGFydC52ZXJzaW9ucy5maW5kKGZ1bmN0aW9uICh2KSB7CiAgICAgICAgICByZXR1cm4gbm9ybWFsaXplVmVyc2lvbih2LnZlcnNpb24pID09PSBjaGFydFZlcnNpb247CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmVyc2lvbiA9IGNoYXJ0LnZlcnNpb25zLmZpbmQoZnVuY3Rpb24gKHYpIHsKICAgICAgICAgIHJldHVybiBub3JtYWxpemVWZXJzaW9uKHYudmVyc2lvbikgPT09IHdhbnRWZXJzaW9uOwogICAgICAgIH0pOwogICAgICB9CiAgICAgIGlmICh2ZXJzaW9uKSB7CiAgICAgICAgcmV0dXJuIGNsb25lKHZlcnNpb24pOwogICAgICB9CiAgICB9OwogIH0sCiAgdmVyc2lvblByb3ZpZGluZzogZnVuY3Rpb24gdmVyc2lvblByb3ZpZGluZyhzdGF0ZSwgZ2V0dGVycykgewogICAgcmV0dXJuIGZ1bmN0aW9uIChfcmVmNSkgewogICAgICB2YXIgcmVwb1R5cGUgPSBfcmVmNS5yZXBvVHlwZSwKICAgICAgICByZXBvTmFtZSA9IF9yZWY1LnJlcG9OYW1lLAogICAgICAgIGd2ciA9IF9yZWY1Lmd2cjsKICAgICAgdmFyIG1hdGNoaW5nID0gZ2V0dGVycy5jaGFydHMuZmlsdGVyKGZ1bmN0aW9uIChjaGFydCkgewogICAgICAgIHJldHVybiBjaGFydC5wcm92aWRlcy5pbmNsdWRlcyhndnIpOwogICAgICB9KTsKICAgICAgaWYgKCFtYXRjaGluZy5sZW5ndGgpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgaWYgKHJlcG9UeXBlICYmIHJlcG9OYW1lKSB7CiAgICAgICAgcHJlZmVyU2FtZVJlcG8obWF0Y2hpbmcsIHJlcG9UeXBlLCByZXBvTmFtZSk7CiAgICAgIH0KICAgICAgdmFyIHZlcnNpb24gPSBtYXRjaGluZ1swXS52ZXJzaW9ucy5maW5kKGZ1bmN0aW9uICh2ZXJzaW9uKSB7CiAgICAgICAgdmFyIF92ZXJzaW9uJGFubm90YXRpb25zOwogICAgICAgIHJldHVybiAoKF92ZXJzaW9uJGFubm90YXRpb25zID0gdmVyc2lvbi5hbm5vdGF0aW9ucykgPT09IG51bGwgfHwgX3ZlcnNpb24kYW5ub3RhdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF92ZXJzaW9uJGFubm90YXRpb25zW0NBVEFMT0dfQU5OT1RBVElPTlMuUFJPVklERVNdKSA9PT0gZ3ZyOwogICAgICB9KTsKICAgICAgaWYgKHZlcnNpb24pIHsKICAgICAgICByZXR1cm4gY2xvbmUodmVyc2lvbik7CiAgICAgIH0KICAgIH07CiAgfSwKICB2ZXJzaW9uOiBmdW5jdGlvbiB2ZXJzaW9uKHN0YXRlLCBnZXR0ZXJzKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKF9yZWY2KSB7CiAgICAgIHZhciByZXBvVHlwZSA9IF9yZWY2LnJlcG9UeXBlLAogICAgICAgIHJlcG9OYW1lID0gX3JlZjYucmVwb05hbWUsCiAgICAgICAgY2hhcnROYW1lID0gX3JlZjYuY2hhcnROYW1lLAogICAgICAgIHZlcnNpb25OYW1lID0gX3JlZjYudmVyc2lvbk5hbWU7CiAgICAgIHZhciBjaGFydCA9IGdldHRlcnNbJ2NoYXJ0J10oewogICAgICAgIHJlcG9UeXBlOiByZXBvVHlwZSwKICAgICAgICByZXBvTmFtZTogcmVwb05hbWUsCiAgICAgICAgY2hhcnROYW1lOiBjaGFydE5hbWUKICAgICAgfSk7CiAgICAgIGlmICghY2hhcnQpIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQogICAgICB2YXIgdmVyc2lvbjsKICAgICAgaWYgKHZlcnNpb25OYW1lKSB7CiAgICAgICAgdmVyc2lvbiA9IGZpbmRCeShjaGFydC52ZXJzaW9ucywgJ3ZlcnNpb24nLCB2ZXJzaW9uTmFtZSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmVyc2lvbiA9IGNoYXJ0LnZlcnNpb25zWzBdOwogICAgICB9CiAgICAgIGlmICh2ZXJzaW9uKSB7CiAgICAgICAgcmV0dXJuIGNsb25lKHZlcnNpb24pOwogICAgICB9CiAgICB9OwogIH0sCiAgZXJyb3JzOiBmdW5jdGlvbiBlcnJvcnMoc3RhdGUpIHsKICAgIHJldHVybiBzdGF0ZS5lcnJvcnMgfHwgW107CiAgfSwKICBoYXZlQ29tcG9uZW50OiBmdW5jdGlvbiBoYXZlQ29tcG9uZW50KCkgewogICAgcmV0dXJuIGZ1bmN0aW9uIChuYW1lKSB7CiAgICAgIHJldHVybiBnZXR0ZXJzWyd0eXBlLW1hcC9oYXNDdXN0b21DaGFydCddKG5hbWUpOwogICAgfTsKICB9LAogIGltcG9ydENvbXBvbmVudDogZnVuY3Rpb24gaW1wb3J0Q29tcG9uZW50KHN0YXRlLCBnZXR0ZXJzKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKG5hbWUpIHsKICAgICAgcmV0dXJuIGdldHRlcnNbJ3R5cGUtbWFwL2ltcG9ydENoYXJ0J10obmFtZSk7CiAgICB9OwogIH0sCiAgY2hhcnRTdGVwczogZnVuY3Rpb24gY2hhcnRTdGVwcyhzdGF0ZSwgZ2V0dGVycykgewogICAgcmV0dXJuIGZ1bmN0aW9uIChuYW1lKSB7CiAgICAgIHZhciBzdGVwcyA9IFtdOwogICAgICB2YXIgc3RlcHNQYXRoID0gIi4vIi5jb25jYXQobmFtZSwgIi9zdGVwcy8iKTsKICAgICAgLy8gcmVxdWlyZS5jb250ZXh0IG9ubHkgdGFrZXMgbGl0ZXJhbHMsIHNvIGZpbmQgYWxsIGNhbmRpZGF0ZSBzdGVwIGZpbGVzIGFuZCBmaWx0ZXIgb3V0CiAgICAgIHZhciBhbGxQYXRocyA9IHJlcXVpcmUuY29udGV4dCgnQHNoZWxsL2NoYXJ0JywgdHJ1ZSwgL1wudnVlJC8pLmtleXMoKTsKICAgICAgYWxsUGF0aHMuZmlsdGVyKGZ1bmN0aW9uIChwYXRoKSB7CiAgICAgICAgcmV0dXJuIHBhdGguc3RhcnRzV2l0aChzdGVwc1BhdGgpOwogICAgICB9KS5mb3JFYWNoKGZ1bmN0aW9uIChwYXRoKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIHN0ZXBzLnB1c2goewogICAgICAgICAgICBuYW1lOiBwYXRoLnJlcGxhY2Uoc3RlcHNQYXRoLCAnJyksCiAgICAgICAgICAgIGNvbXBvbmVudDogaW1wb3J0Q2hhcnQocGF0aC5zdWJzdHIoMiwgcGF0aC5sZW5ndGgpKQogICAgICAgICAgfSk7CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgY29uc29sZS53YXJuKCJGYWlsZWQgdG8gbG9hZCBzdGVwIGNvbXBvbmVudCAiLmNvbmNhdChwYXRoLCAiIGZvciBjaGFydCAiKS5jb25jYXQobmFtZSksIGUpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnNvbGUKICAgICAgICB9CiAgICAgIH0pOwogICAgICByZXR1cm4gc3RlcHM7CiAgICB9OwogIH0sCiAgaW5TdG9yZTogZnVuY3Rpb24gaW5TdG9yZShzdGF0ZSkgewogICAgcmV0dXJuIHN0YXRlLmluU3RvcmU7CiAgfSwKICBjbGFzc2lmeTogZnVuY3Rpb24gY2xhc3NpZnkoc3RhdGUsIGdldHRlcnMsIHJvb3RTdGF0ZSkgewogICAgcmV0dXJuIGZ1bmN0aW9uIChvYmopIHsKICAgICAgdmFyIF9vYmokbWV0YWRhdGE7CiAgICAgIHJldHVybiBsb29rdXAoc3RhdGUuY29uZmlnLm5hbWVzcGFjZSwgb2JqID09PSBudWxsIHx8IG9iaiA9PT0gdm9pZCAwID8gdm9pZCAwIDogb2JqLnR5cGUsIG9iaiA9PT0gbnVsbCB8fCBvYmogPT09IHZvaWQgMCB8fCAoX29iaiRtZXRhZGF0YSA9IG9iai5tZXRhZGF0YSkgPT09IG51bGwgfHwgX29iaiRtZXRhZGF0YSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX29iaiRtZXRhZGF0YS5uYW1lLCByb290U3RhdGUpOwogICAgfTsKICB9Cn07CmV4cG9ydCB2YXIgbXV0YXRpb25zID0gewogIHJlc2V0OiBmdW5jdGlvbiByZXNldChjdXJyZW50U3RhdGUpIHsKICAgIHZhciBuZXdTdGF0ZSA9IHN0YXRlKCk7CiAgICBPYmplY3QuYXNzaWduKGN1cnJlbnRTdGF0ZSwgbmV3U3RhdGUpOwogIH0sCiAgc2V0SW5TdG9yZTogZnVuY3Rpb24gc2V0SW5TdG9yZShzdGF0ZSwgaW5TdG9yZSkgewogICAgc3RhdGUuaW5TdG9yZSA9IGluU3RvcmU7CiAgfSwKICBzZXRSZXBvczogZnVuY3Rpb24gc2V0UmVwb3Moc3RhdGUsIF9yZWY3KSB7CiAgICB2YXIgY2x1c3RlciA9IF9yZWY3LmNsdXN0ZXIsCiAgICAgIG5hbWVzcGFjZWQgPSBfcmVmNy5uYW1lc3BhY2VkOwogICAgc3RhdGUuY2x1c3RlclJlcG9zID0gY2x1c3RlcjsKICAgIHN0YXRlLm5hbWVzcGFjZWRSZXBvcyA9IG5hbWVzcGFjZWQ7CiAgfSwKICBzZXRDaGFydHM6IGZ1bmN0aW9uIHNldENoYXJ0cyhzdGF0ZSwgX3JlZjgpIHsKICAgIHZhciBjaGFydHMgPSBfcmVmOC5jaGFydHMsCiAgICAgIF9yZWY4JGVycm9ycyA9IF9yZWY4LmVycm9ycywKICAgICAgZXJyb3JzID0gX3JlZjgkZXJyb3JzID09PSB2b2lkIDAgPyBbXSA6IF9yZWY4JGVycm9ycywKICAgICAgX3JlZjgkbG9hZGVkID0gX3JlZjgubG9hZGVkLAogICAgICBsb2FkZWQgPSBfcmVmOCRsb2FkZWQgPT09IHZvaWQgMCA/IFtdIDogX3JlZjgkbG9hZGVkOwogICAgc3RhdGUuY2hhcnRzID0gY2hhcnRzOwogICAgc3RhdGUuZXJyb3JzID0gZXJyb3JzOwogICAgdmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKGxvYWRlZCksCiAgICAgIF9zdGVwOwogICAgdHJ5IHsKICAgICAgZm9yIChfaXRlcmF0b3IucygpOyAhKF9zdGVwID0gX2l0ZXJhdG9yLm4oKSkuZG9uZTspIHsKICAgICAgICB2YXIgcmVwbyA9IF9zdGVwLnZhbHVlOwogICAgICAgIHN0YXRlLmxvYWRlZFtyZXBvLl9rZXldID0gdHJ1ZTsKICAgICAgfQogICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgIF9pdGVyYXRvci5lKGVycik7CiAgICB9IGZpbmFsbHkgewogICAgICBfaXRlcmF0b3IuZigpOwogICAgfQogIH0sCiAgY2FjaGVWZXJzaW9uOiBmdW5jdGlvbiBjYWNoZVZlcnNpb24oc3RhdGUsIF9yZWY5KSB7CiAgICB2YXIga2V5ID0gX3JlZjkua2V5LAogICAgICBpbmZvID0gX3JlZjkuaW5mbzsKICAgIHN0YXRlLnZlcnNpb25JbmZvc1trZXldID0gaW5mbzsKICB9Cn07CmV4cG9ydCB2YXIgYWN0aW9ucyA9IHsKICBsb2FkOiBmdW5jdGlvbiBsb2FkKGN0eCkgewogICAgdmFyIF9hcmd1bWVudHMgPSBhcmd1bWVudHM7CiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgdmFyIF9oYXNoJGNsdXN0ZXI7CiAgICAgIHZhciBfcmVmMTAsIGZvcmNlLCByZXNldCwgc3RhdGUsIGdldHRlcnMsIHJvb3RHZXR0ZXJzLCBjb21taXQsIGRpc3BhdGNoLCBwcm9taXNlcywgaW5TdG9yZSwgaGFzaCwgcmVwb3MsIGxvYWRlZCwgX2l0ZXJhdG9yMiwgX3N0ZXAyLCBfcmVwbywgcmVzLCBjaGFydHMsIGVycm9ycywgX2ksIF9PYmplY3Qka2V5cywga2V5LCBvYmosIHJlcG8sIGssIF9pdGVyYXRvcjMsIF9zdGVwMywgZW50cnk7CiAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBfcmVmMTAgPSBfYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgX2FyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gX2FyZ3VtZW50c1sxXSA6IHt9LCBmb3JjZSA9IF9yZWYxMC5mb3JjZSwgcmVzZXQgPSBfcmVmMTAucmVzZXQ7CiAgICAgICAgICAgIHN0YXRlID0gY3R4LnN0YXRlLCBnZXR0ZXJzID0gY3R4LmdldHRlcnMsIHJvb3RHZXR0ZXJzID0gY3R4LnJvb3RHZXR0ZXJzLCBjb21taXQgPSBjdHguY29tbWl0LCBkaXNwYXRjaCA9IGN0eC5kaXNwYXRjaDsKICAgICAgICAgICAgcHJvbWlzZXMgPSB7fTsgLy8gSW5zdGFsbGluZyBhbiBhcHA/IFRoaXMgaXMgZmluZSAoaW4gY2x1c3RlciBzdG9yZSkKICAgICAgICAgICAgLy8gRmV0Y2hpbmcgbGlzdCBvZiBjbHVzdGVyIHRlbXBsYXRlcz8gVGhpcyBpcyBmaW5lIChpbiBtYW5hZ2VtZW50IHN0b3JlKQogICAgICAgICAgICAvLyBJbnN0YWxsaW5nIGEgY2x1c3RlciB0ZW1wbGF0ZT8gVGhpcyBpc24ndCBmaW5lIChpbiBjbHVzdGVyIHN0b3JlIGFzIHBlciBpbnN0YWxsaW5nIGFwcCwgYnV0IGlmIHRoZXJlIGlzIG5vIGNsdXN0ZXIgd2UgbmVlZCB0byBkZWZhdWx0IHRvIG1hbmFnZW1lbnQpCiAgICAgICAgICAgIGluU3RvcmUgPSByb290R2V0dGVyc1snY3VycmVudENsdXN0ZXInXSA/IHJvb3RHZXR0ZXJzWydjdXJyZW50UHJvZHVjdCddLmluU3RvcmUgOiAnbWFuYWdlbWVudCc7CiAgICAgICAgICAgIGlmIChyb290R2V0dGVyc1siIi5jb25jYXQoaW5TdG9yZSwgIi9zY2hlbWFGb3IiKV0oQ0FUQUxPRy5DTFVTVEVSX1JFUE8pKSB7CiAgICAgICAgICAgICAgcHJvbWlzZXMuY2x1c3RlciA9IGRpc3BhdGNoKCIiLmNvbmNhdChpblN0b3JlLCAiL2ZpbmRBbGwiKSwgewogICAgICAgICAgICAgICAgdHlwZTogQ0FUQUxPRy5DTFVTVEVSX1JFUE8KICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICByb290OiB0cnVlCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHJvb3RHZXR0ZXJzWyIiLmNvbmNhdChpblN0b3JlLCAiL3NjaGVtYUZvciIpXShDQVRBTE9HLlJFUE8pKSB7CiAgICAgICAgICAgICAgcHJvbWlzZXMubmFtZXNwYWNlZCA9IGRpc3BhdGNoKCIiLmNvbmNhdChpblN0b3JlLCAiL2ZpbmRBbGwiKSwgewogICAgICAgICAgICAgICAgdHlwZTogQ0FUQUxPRy5SRVBPCiAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgcm9vdDogdHJ1ZQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA4OwogICAgICAgICAgICByZXR1cm4gYWxsSGFzaChwcm9taXNlcyk7CiAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgIGhhc2ggPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAvLyBBcyBwZXIgY29tbWVudCBhYm92ZSwgd2hlbiB0aGVyZSBhcmUgbm8gY2x1c3RlcnMgdGhpcyB3aWxsIGJlIG1hbmFnZW1lbnQuIFN0b3JlIGl0IHN1Y2ggdGhhdCBpdCBjYW4gYmUgdXNlZCBmb3IgdGhvc2UgY2FzZXMKICAgICAgICAgICAgY29tbWl0KCdzZXRJblN0b3JlJywgaW5TdG9yZSk7CiAgICAgICAgICAgIGhhc2guY2x1c3RlciA9IChfaGFzaCRjbHVzdGVyID0gaGFzaC5jbHVzdGVyKSA9PT0gbnVsbCB8fCBfaGFzaCRjbHVzdGVyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfaGFzaCRjbHVzdGVyLmZpbHRlcihmdW5jdGlvbiAocmVwbykgewogICAgICAgICAgICAgIHZhciBfcmVwbyRtZXRhZGF0YTsKICAgICAgICAgICAgICByZXR1cm4gISgocmVwbyA9PT0gbnVsbCB8fCByZXBvID09PSB2b2lkIDAgfHwgKF9yZXBvJG1ldGFkYXRhID0gcmVwby5tZXRhZGF0YSkgPT09IG51bGwgfHwgX3JlcG8kbWV0YWRhdGEgPT09IHZvaWQgMCB8fCAoX3JlcG8kbWV0YWRhdGEgPSBfcmVwbyRtZXRhZGF0YS5hbm5vdGF0aW9ucykgPT09IG51bGwgfHwgX3JlcG8kbWV0YWRhdGEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9yZXBvJG1ldGFkYXRhW0NBVEFMT0dfQU5OT1RBVElPTlMuSElEREVOX1JFUE9dKSA9PT0gJ3RydWUnKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNvbW1pdCgnc2V0UmVwb3MnLCBoYXNoKTsKICAgICAgICAgICAgcmVwb3MgPSBnZXR0ZXJzWydyZXBvcyddOwogICAgICAgICAgICBsb2FkZWQgPSBbXTsKICAgICAgICAgICAgcHJvbWlzZXMgPSB7fTsKICAgICAgICAgICAgX2l0ZXJhdG9yMiA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHJlcG9zKTsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICBmb3IgKF9pdGVyYXRvcjIucygpOyAhKF9zdGVwMiA9IF9pdGVyYXRvcjIubigpKS5kb25lOykgewogICAgICAgICAgICAgICAgX3JlcG8gPSBfc3RlcDIudmFsdWU7CiAgICAgICAgICAgICAgICBpZiAoKGZvcmNlID09PSB0cnVlIHx8ICFnZXR0ZXJzLmlzTG9hZGVkKF9yZXBvKSkgJiYgX3JlcG8uY2FuTG9hZCkgewogICAgICAgICAgICAgICAgICBjb25zb2xlLmluZm8oJ0xvYWRpbmcgaW5kZXggZm9yIHJlcG8nLCBfcmVwby5uYW1lLCAiKCIuY29uY2F0KF9yZXBvLl9rZXksICIpIikpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnNvbGUKICAgICAgICAgICAgICAgICAgcHJvbWlzZXNbX3JlcG8uX2tleV0gPSBfcmVwby5mb2xsb3dMaW5rKCdpbmRleCcpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgICAgX2l0ZXJhdG9yMi5lKGVycik7CiAgICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgICAgX2l0ZXJhdG9yMi5mKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE5OwogICAgICAgICAgICByZXR1cm4gYWxsSGFzaFNldHRsZWQocHJvbWlzZXMpOwogICAgICAgICAgY2FzZSAxOToKICAgICAgICAgICAgcmVzID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgY2hhcnRzID0gcmVzZXQgPyB7fSA6IHN0YXRlLmNoYXJ0czsKICAgICAgICAgICAgZXJyb3JzID0gW107CiAgICAgICAgICAgIF9pID0gMCwgX09iamVjdCRrZXlzID0gT2JqZWN0LmtleXMocmVzKTsKICAgICAgICAgIGNhc2UgMjM6CiAgICAgICAgICAgIGlmICghKF9pIDwgX09iamVjdCRrZXlzLmxlbmd0aCkpIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzU7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgICAga2V5ID0gX09iamVjdCRrZXlzW19pXTsKICAgICAgICAgICAgb2JqID0gcmVzW2tleV07CiAgICAgICAgICAgIHJlcG8gPSBmaW5kQnkocmVwb3MsICdfa2V5Jywga2V5KTsKICAgICAgICAgICAgaWYgKCEob2JqLnN0YXR1cyA9PT0gJ3JlamVjdGVkJykpIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzA7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZXJyb3JzLnB1c2goc3RyaW5naWZ5KG9iai5yZWFzb24pKTsKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgiY29udGludWUiLCAzMik7CiAgICAgICAgICBjYXNlIDMwOgogICAgICAgICAgICBmb3IgKGsgaW4gb2JqLnZhbHVlLmVudHJpZXMpIHsKICAgICAgICAgICAgICBfaXRlcmF0b3IzID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIob2JqLnZhbHVlLmVudHJpZXNba10pOwogICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBmb3IgKF9pdGVyYXRvcjMucygpOyAhKF9zdGVwMyA9IF9pdGVyYXRvcjMubigpKS5kb25lOykgewogICAgICAgICAgICAgICAgICBlbnRyeSA9IF9zdGVwMy52YWx1ZTsKICAgICAgICAgICAgICAgICAgYWRkQ2hhcnQoY3R4LCBjaGFydHMsIGVudHJ5LCByZXBvKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgICAgIF9pdGVyYXRvcjMuZShlcnIpOwogICAgICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgICAgICBfaXRlcmF0b3IzLmYoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgbG9hZGVkLnB1c2gocmVwbyk7CiAgICAgICAgICBjYXNlIDMyOgogICAgICAgICAgICBfaSsrOwogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjM7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAzNToKICAgICAgICAgICAgY29tbWl0KCdzZXRDaGFydHMnLCB7CiAgICAgICAgICAgICAgY2hhcnRzOiBjaGFydHMsCiAgICAgICAgICAgICAgZXJyb3JzOiBlcnJvcnMsCiAgICAgICAgICAgICAgbG9hZGVkOiBsb2FkZWQKICAgICAgICAgICAgfSk7CiAgICAgICAgICBjYXNlIDM2OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUpOwogICAgfSkpKCk7CiAgfSwKICByZWZyZXNoOiBmdW5jdGlvbiByZWZyZXNoKF9yZWYxMSkgewogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICB2YXIgZ2V0dGVycywgY29tbWl0LCBkaXNwYXRjaCwgcHJvbWlzZXM7CiAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgZ2V0dGVycyA9IF9yZWYxMS5nZXR0ZXJzLCBjb21taXQgPSBfcmVmMTEuY29tbWl0LCBkaXNwYXRjaCA9IF9yZWYxMS5kaXNwYXRjaDsKICAgICAgICAgICAgcHJvbWlzZXMgPSBnZXR0ZXJzLnJlcG9zLm1hcChmdW5jdGlvbiAoeCkgewogICAgICAgICAgICAgIHJldHVybiB4LnJlZnJlc2goKTsKICAgICAgICAgICAgfSk7IC8vIEBUT0RPIHdhaXQgZm9yIHJlcG8gc3RhdGUgdG8gaW5kaWNhdGUgdGhleSdyZSBkb25lIG9uY2UgdGhlIEFQSSBoYXMgdGhhdAogICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDQ7CiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbFNldHRsZWQocHJvbWlzZXMpOwogICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDY7CiAgICAgICAgICAgIHJldHVybiBkaXNwYXRjaCgnbG9hZCcsIHsKICAgICAgICAgICAgICBmb3JjZTogdHJ1ZSwKICAgICAgICAgICAgICByZXNldDogdHJ1ZQogICAgICAgICAgICB9KTsKICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTIpOwogICAgfSkpKCk7CiAgfSwKICAvKgogICAgRmV0Y2ggZnVsbCBpbmZvcm1hdGlvbiBhYm91dCBhIHNwZWNpZmljIHZlcnNpb24gb2YgYSBIZWxtIGNoYXJ0LAogICAgaW5jbHVkaW5nIHRoZSBzdGFuZGFyZCB2YWx1ZXMgYW5kIFJFQURNRS4KICAqLwogIGdldFZlcnNpb25JbmZvOiBmdW5jdGlvbiBnZXRWZXJzaW9uSW5mbyhfcmVmMTIsIF9yZWYxMykgewogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkgewogICAgICB2YXIgc3RhdGUsIGdldHRlcnMsIGNvbW1pdCwgcmVwb1R5cGUsIHJlcG9OYW1lLCBjaGFydE5hbWUsIHZlcnNpb25OYW1lLCBrZXksIGluZm8sIHJlcG87CiAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgc3RhdGUgPSBfcmVmMTIuc3RhdGUsIGdldHRlcnMgPSBfcmVmMTIuZ2V0dGVycywgY29tbWl0ID0gX3JlZjEyLmNvbW1pdDsKICAgICAgICAgICAgcmVwb1R5cGUgPSBfcmVmMTMucmVwb1R5cGUsIHJlcG9OYW1lID0gX3JlZjEzLnJlcG9OYW1lLCBjaGFydE5hbWUgPSBfcmVmMTMuY2hhcnROYW1lLCB2ZXJzaW9uTmFtZSA9IF9yZWYxMy52ZXJzaW9uTmFtZTsKICAgICAgICAgICAga2V5ID0gIiIuY29uY2F0KHJlcG9UeXBlLCAiLyIpLmNvbmNhdChyZXBvTmFtZSwgIi8iKS5jb25jYXQoY2hhcnROYW1lLCAiLyIpLmNvbmNhdCh2ZXJzaW9uTmFtZSk7CiAgICAgICAgICAgIGluZm8gPSBzdGF0ZS52ZXJzaW9uSW5mb3Nba2V5XTsKICAgICAgICAgICAgaWYgKGluZm8pIHsKICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDEyOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJlcG8gPSBnZXR0ZXJzWydyZXBvJ10oewogICAgICAgICAgICAgIHJlcG9UeXBlOiByZXBvVHlwZSwKICAgICAgICAgICAgICByZXBvTmFtZTogcmVwb05hbWUKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGlmIChyZXBvKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA4OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVwbyBub3QgZm91bmQnKTsKICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAxMDsKICAgICAgICAgICAgcmV0dXJuIHJlcG8uZm9sbG93TGluaygnaW5mbycsIHsKICAgICAgICAgICAgICB1cmw6IGFkZFBhcmFtcyhyZXBvLmxpbmtzLmluZm8sIHsKICAgICAgICAgICAgICAgIGNoYXJ0TmFtZTogY2hhcnROYW1lLAogICAgICAgICAgICAgICAgdmVyc2lvbjogdmVyc2lvbk5hbWUKICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9KTsKICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgIGluZm8gPSBfY29udGV4dDMuc2VudDsKICAgICAgICAgICAgY29tbWl0KCdjYWNoZVZlcnNpb24nLCB7CiAgICAgICAgICAgICAga2V5OiBrZXksCiAgICAgICAgICAgICAgaW5mbzogaW5mbwogICAgICAgICAgICB9KTsKICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iLCBpbmZvKTsKICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUzKTsKICAgIH0pKSgpOwogIH0sCiAgcmVoeWRyYXRlOiBmdW5jdGlvbiByZWh5ZHJhdGUoY3R4KSB7CiAgICB2YXIgc3RhdGUgPSBjdHguc3RhdGUsCiAgICAgIGNvbW1pdCA9IGN0eC5jb21taXQ7CiAgICB2YXIgY2hhcnRzID0gc3RhdGUuY2hhcnRzIHx8IHt9OwogICAgT2JqZWN0LmVudHJpZXMoc3RhdGUuY2hhcnRzKS5mb3JFYWNoKGZ1bmN0aW9uIChfcmVmMTQpIHsKICAgICAgdmFyIF9yZWYxNSA9IF9zbGljZWRUb0FycmF5KF9yZWYxNCwgMiksCiAgICAgICAga2V5ID0gX3JlZjE1WzBdLAogICAgICAgIGNoYXJ0ID0gX3JlZjE1WzFdOwogICAgICBpZiAoY2hhcnQuX19yZWh5ZHJhdGUpIHsKICAgICAgICBjaGFydHNba2V5XSA9IGNsYXNzaWZ5KGN0eCwgY2hhcnQpOwogICAgICB9CiAgICB9KTsKICAgIGNvbW1pdCgnc2V0Q2hhcnRzJywgewogICAgICBjaGFydHM6IGNoYXJ0cywKICAgICAgZXJyb3JzOiBzdGF0ZS5lcnJvcnMKICAgIH0pOwogIH0KfTsKZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlS2V5KHJlcG9UeXBlLCByZXBvTmFtZSwgY2hhcnROYW1lKSB7CiAgcmV0dXJuICIiLmNvbmNhdChyZXBvVHlwZSwgIi8iKS5jb25jYXQocmVwb05hbWUsICIvIikuY29uY2F0KGNoYXJ0TmFtZSk7Cn0KZXhwb3J0IGZ1bmN0aW9uIHBhcnNlS2V5KGtleSkgewogIHZhciBwYXJ0cyA9IGtleS5zcGxpdCgnLycpOwogIHJldHVybiB7CiAgICByZXBvVHlwZTogcGFydHNbMF0sCiAgICByZXBvTmFtZTogcGFydHNbMV0sCiAgICBjaGFydE5hbWU6IHBhcnRzWzJdCiAgfTsKfQpmdW5jdGlvbiBhZGRDaGFydChjdHgsIG1hcCwgY2hhcnQsIHJlcG8pIHsKICB2YXIgX2NoYXJ0JGFubm90YXRpb25zLCBfY2hhcnQkYW5ub3RhdGlvbnMyLCBfY2hhcnQkYW5ub3RhdGlvbnMxMjsKICB2YXIgcmVwb1R5cGUgPSByZXBvLnR5cGUgPT09IENBVEFMT0cuQ0xVU1RFUl9SRVBPID8gJ2NsdXN0ZXInIDogJ25hbWVzcGFjZSc7CiAgdmFyIHJlcG9OYW1lID0gcmVwby5tZXRhZGF0YS5uYW1lOwogIHZhciBrZXkgPSBnZW5lcmF0ZUtleShyZXBvVHlwZSwgcmVwb05hbWUsIGNoYXJ0Lm5hbWUpOwogIHZhciBvYmogPSBtYXBba2V5XTsKICB2YXIgY2VydGlmaWVkQW5ub3RhdGlvbiA9IChfY2hhcnQkYW5ub3RhdGlvbnMgPSBjaGFydC5hbm5vdGF0aW9ucykgPT09IG51bGwgfHwgX2NoYXJ0JGFubm90YXRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfY2hhcnQkYW5ub3RhdGlvbnNbQ0FUQUxPR19BTk5PVEFUSU9OUy5DRVJUSUZJRURdOwogIHZhciBjZXJ0aWZpZWQgPSBudWxsOwogIHZhciBzaWRlTGFiZWwgPSBudWxsOwogIGlmIChyZXBvLmlzUmFuY2hlcikgewogICAgY2VydGlmaWVkID0gQ0FUQUxPR19BTk5PVEFUSU9OUy5fUkFOQ0hFUjsKICB9IGVsc2UgaWYgKHJlcG8uaXNQYXJ0bmVyKSB7CiAgICBjZXJ0aWZpZWQgPSBDQVRBTE9HX0FOTk9UQVRJT05TLl9QQVJUTkVSOwogIH0gZWxzZSB7CiAgICBjZXJ0aWZpZWQgPSBDQVRBTE9HX0FOTk9UQVRJT05TLl9PVEhFUjsKICB9CiAgaWYgKChfY2hhcnQkYW5ub3RhdGlvbnMyID0gY2hhcnQuYW5ub3RhdGlvbnMpICE9PSBudWxsICYmIF9jaGFydCRhbm5vdGF0aW9uczIgIT09IHZvaWQgMCAmJiBfY2hhcnQkYW5ub3RhdGlvbnMyW0NBVEFMT0dfQU5OT1RBVElPTlMuRVhQRVJJTUVOVEFMXSkgewogICAgc2lkZUxhYmVsID0gJ0V4cGVyaW1lbnRhbCc7CiAgfSBlbHNlIGlmICghcmVwby5pc1JhbmNoZXJTb3VyY2UgJiYgY2VydGlmaWVkQW5ub3RhdGlvbiAmJiBjZXJ0aWZpZWRBbm5vdGF0aW9uICE9PSBDQVRBTE9HX0FOTk9UQVRJT05TLl9SQU5DSEVSICYmIGNlcnRpZmllZCA9PT0gQ0FUQUxPR19BTk5PVEFUSU9OUy5fT1RIRVIpIHsKICAgIC8vIEJ1dCBhbnlib2R5IGNhbiBzZXQgdGhlIHNpZGUgbGFiZWwKICAgIHNpZGVMYWJlbCA9IGNlcnRpZmllZEFubm90YXRpb247CiAgfQogIGlmICghb2JqKSB7CiAgICB2YXIgX2NoYXJ0JGFubm90YXRpb25zMywgX2NoYXJ0JGFubm90YXRpb25zNCwgX2NoYXJ0JGFubm90YXRpb25zNSwgX2NoYXJ0JGFubm90YXRpb25zNiwgX2NoYXJ0JGFubm90YXRpb25zNywgX2NoYXJ0JGFubm90YXRpb25zOCwgX2NoYXJ0JGFubm90YXRpb25zOSwgX2NoYXJ0JGFubm90YXRpb25zMTAsIF9jaGFydCRhbm5vdGF0aW9uczExOwogICAgaWYgKGN0eCkge30KICAgIG9iaiA9IGNsYXNzaWZ5KGN0eCwgewogICAgICBrZXk6IGtleSwKICAgICAgdHlwZTogJ2NoYXJ0JywKICAgICAgaWQ6IGtleSwKICAgICAgY2VydGlmaWVkOiBjZXJ0aWZpZWQsCiAgICAgIHNpZGVMYWJlbDogc2lkZUxhYmVsLAogICAgICByZXBvVHlwZTogcmVwb1R5cGUsCiAgICAgIHJlcG9OYW1lOiByZXBvTmFtZSwKICAgICAgcmVwb05hbWVEaXNwbGF5OiBjdHgucm9vdEdldHRlcnNbJ2kxOG4vd2l0aEZhbGxiYWNrJ10oImNhdGFsb2cucmVwby5uYW1lLlwiIi5jb25jYXQocmVwb05hbWUsICJcIiIpLCBudWxsLCByZXBvTmFtZSksCiAgICAgIGNlcnRpZmllZFNvcnQ6IENFUlRJRklFRF9TT1JUU1tjZXJ0aWZpZWRdIHx8IDk5LAogICAgICBpY29uOiBjaGFydC5pY29uLAogICAgICBjb2xvcjogcmVwby5jb2xvciwKICAgICAgY2hhcnRUeXBlOiAoKF9jaGFydCRhbm5vdGF0aW9uczMgPSBjaGFydC5hbm5vdGF0aW9ucykgPT09IG51bGwgfHwgX2NoYXJ0JGFubm90YXRpb25zMyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2NoYXJ0JGFubm90YXRpb25zM1tDQVRBTE9HX0FOTk9UQVRJT05TLlRZUEVdKSB8fCBDQVRBTE9HX0FOTk9UQVRJT05TLl9BUFAsCiAgICAgIGNoYXJ0TmFtZTogY2hhcnQubmFtZSwKICAgICAgY2hhcnROYW1lRGlzcGxheTogKChfY2hhcnQkYW5ub3RhdGlvbnM0ID0gY2hhcnQuYW5ub3RhdGlvbnMpID09PSBudWxsIHx8IF9jaGFydCRhbm5vdGF0aW9uczQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jaGFydCRhbm5vdGF0aW9uczRbQ0FUQUxPR19BTk5PVEFUSU9OUy5ESVNQTEFZX05BTUVdKSB8fCBjaGFydC5uYW1lLAogICAgICBjaGFydERlc2NyaXB0aW9uOiBjaGFydC5kZXNjcmlwdGlvbiwKICAgICAgZmVhdHVyZWQ6IChfY2hhcnQkYW5ub3RhdGlvbnM1ID0gY2hhcnQuYW5ub3RhdGlvbnMpID09PSBudWxsIHx8IF9jaGFydCRhbm5vdGF0aW9uczUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jaGFydCRhbm5vdGF0aW9uczVbQ0FUQUxPR19BTk5PVEFUSU9OUy5GRUFUVVJFRF0sCiAgICAgIHJlcG9LZXk6IHJlcG8uX2tleSwKICAgICAgdmVyc2lvbnM6IFtdLAogICAgICBjYXRlZ29yaWVzOiBmaWx0ZXJDYXRlZ29yaWVzKGNoYXJ0LmtleXdvcmRzKSwKICAgICAgZGVwcmVjYXRlZDogISFjaGFydC5kZXByZWNhdGVkLAogICAgICBoaWRkZW46ICEhKChfY2hhcnQkYW5ub3RhdGlvbnM2ID0gY2hhcnQuYW5ub3RhdGlvbnMpICE9PSBudWxsICYmIF9jaGFydCRhbm5vdGF0aW9uczYgIT09IHZvaWQgMCAmJiBfY2hhcnQkYW5ub3RhdGlvbnM2W0NBVEFMT0dfQU5OT1RBVElPTlMuSElEREVOXSksCiAgICAgIHRhcmdldE5hbWVzcGFjZTogKF9jaGFydCRhbm5vdGF0aW9uczcgPSBjaGFydC5hbm5vdGF0aW9ucykgPT09IG51bGwgfHwgX2NoYXJ0JGFubm90YXRpb25zNyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2NoYXJ0JGFubm90YXRpb25zN1tDQVRBTE9HX0FOTk9UQVRJT05TLk5BTUVTUEFDRV0sCiAgICAgIHRhcmdldE5hbWU6IChfY2hhcnQkYW5ub3RhdGlvbnM4ID0gY2hhcnQuYW5ub3RhdGlvbnMpID09PSBudWxsIHx8IF9jaGFydCRhbm5vdGF0aW9uczggPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jaGFydCRhbm5vdGF0aW9uczhbQ0FUQUxPR19BTk5PVEFUSU9OUy5SRUxFQVNFX05BTUVdLAogICAgICBzY29wZTogKF9jaGFydCRhbm5vdGF0aW9uczkgPSBjaGFydC5hbm5vdGF0aW9ucykgPT09IG51bGwgfHwgX2NoYXJ0JGFubm90YXRpb25zOSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2NoYXJ0JGFubm90YXRpb25zOVtDQVRBTE9HX0FOTk9UQVRJT05TLlNDT1BFXSwKICAgICAgcHJvdmlkZXM6IFtdLAogICAgICB3aW5kb3dzSW5jb21wYXRpYmxlOiAhKCgoX2NoYXJ0JGFubm90YXRpb25zMTAgPSBjaGFydC5hbm5vdGF0aW9ucykgPT09IG51bGwgfHwgX2NoYXJ0JGFubm90YXRpb25zMTAgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jaGFydCRhbm5vdGF0aW9uczEwW0NBVEFMT0dfQU5OT1RBVElPTlMuUEVSTUlUVEVEX09TXSkgfHwgJycpLmluY2x1ZGVzKCd3aW5kb3dzJyksCiAgICAgIGRlcGxveXNPbldpbmRvd3M6ICgoKF9jaGFydCRhbm5vdGF0aW9uczExID0gY2hhcnQuYW5ub3RhdGlvbnMpID09PSBudWxsIHx8IF9jaGFydCRhbm5vdGF0aW9uczExID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfY2hhcnQkYW5ub3RhdGlvbnMxMVtDQVRBTE9HX0FOTk9UQVRJT05TLkRFUExPWUVEX09TXSkgfHwgJycpLmluY2x1ZGVzKCd3aW5kb3dzJykKICAgIH0pOwogICAgbWFwW2tleV0gPSBvYmo7CiAgfQogIGNoYXJ0LmtleSA9ICIiLmNvbmNhdChrZXksICIvIikuY29uY2F0KGNoYXJ0LnZlcnNpb24pOwogIGNoYXJ0LnJlcG9UeXBlID0gcmVwb1R5cGU7CiAgY2hhcnQucmVwb05hbWUgPSByZXBvTmFtZTsKICB2YXIgcHJvdmlkZXMgPSAoX2NoYXJ0JGFubm90YXRpb25zMTIgPSBjaGFydC5hbm5vdGF0aW9ucykgPT09IG51bGwgfHwgX2NoYXJ0JGFubm90YXRpb25zMTIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jaGFydCRhbm5vdGF0aW9uczEyW0NBVEFMT0dfQU5OT1RBVElPTlMuUFJPVklERVNdOwogIGlmIChwcm92aWRlcykgewogICAgYWRkT2JqZWN0KG9iai5wcm92aWRlcywgcHJvdmlkZXMpOwogIH0KICBvYmoudmVyc2lvbnMucHVzaChjaGFydCk7Cn0KZnVuY3Rpb24gcHJlZmVyU2FtZVJlcG8obWF0Y2hpbmcsIHJlcG9UeXBlLCByZXBvTmFtZSkgewogIG1hdGNoaW5nLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsKICAgIHZhciBhU2FtZVJlcG8gPSBhLnJlcG9UeXBlID09PSByZXBvVHlwZSAmJiBhLnJlcG9OYW1lID09PSByZXBvTmFtZSA/IDEgOiAwOwogICAgdmFyIGJTYW1lUmVwbyA9IGIucmVwb1R5cGUgPT09IHJlcG9UeXBlICYmIGIucmVwb05hbWUgPT09IHJlcG9OYW1lID8gMSA6IDA7CiAgICBpZiAoYVNhbWVSZXBvICYmICFiU2FtZVJlcG8pIHsKICAgICAgcmV0dXJuIC0xOwogICAgfSBlbHNlIGlmICghYVNhbWVSZXBvICYmIGJTYW1lUmVwbykgewogICAgICByZXR1cm4gMTsKICAgIH0KICAgIHJldHVybiAwOwogIH0pOwp9CmZ1bmN0aW9uIG5vcm1hbGl6ZVZlcnNpb24odikgewogIHJldHVybiB2LnJlcGxhY2UoL152L2ksICcnKS50b0xvd2VyQ2FzZSgpLnRyaW0oKTsKfQpmdW5jdGlvbiBmaWx0ZXJDYXRlZ29yaWVzKGNhdGVnb3JpZXMpIHsKICBjYXRlZ29yaWVzID0gKGNhdGVnb3JpZXMgfHwgW10pLm1hcChmdW5jdGlvbiAoeCkgewogICAgcmV0dXJuIG5vcm1hbGl6ZUNhdGVnb3J5KHgpOwogIH0pOwogIHZhciBvdXQgPSBbXTsKICBmb3IgKHZhciBfaTIgPSAwLCBfQUxMT1dFRF9DQVRFR09SSUVTID0gQUxMT1dFRF9DQVRFR09SSUVTOyBfaTIgPCBfQUxMT1dFRF9DQVRFR09SSUVTLmxlbmd0aDsgX2kyKyspIHsKICAgIHZhciBjID0gX0FMTE9XRURfQ0FURUdPUklFU1tfaTJdOwogICAgaWYgKGNhdGVnb3JpZXMuaW5jbHVkZXMobm9ybWFsaXplQ2F0ZWdvcnkoYykpKSB7CiAgICAgIGFkZE9iamVjdChvdXQsIGMpOwogICAgfQogIH0KICByZXR1cm4gb3V0Owp9CmZ1bmN0aW9uIG5vcm1hbGl6ZUNhdGVnb3J5KGMpIHsKICByZXR1cm4gYy5yZXBsYWNlKC9ccysvZywgJycpLnRvTG93ZXJDYXNlKCk7Cn0KCi8qCmNhdGFsb2cuY2F0dGxlLmlvL2RlcGx5cy1vbi1vczogT1MgLT4gcmVxdWlyZXMgZ2xvYmFsLmNhdHRsZS5PUy5lbmFibGVkOiB0cnVlCiAgZGVmYXVsdDogbm90aGluZwpjYXRhbG9nLmNhdHRsZS5pby9wZXJtaXRzLW9zOiBPUyAtPiB3aWxsIGJyZWFrIG9uIGNsdXN0ZXJzIGNvbnRhaW5pbmcgbm9kZXMgdGhhdCBhcmUgbm90IE9TCiAgZGVmYXVsdCBpZiBub3QgZm91bmQ6IGNhdGFsb2cuY2F0dGxlLmlvL3Blcm1pdHMtb3M6IGxpbnV4CiovCmV4cG9ydCBmdW5jdGlvbiBjb21wYXRpYmxlVmVyc2lvbnNGb3IoY2hhcnQsIG9zKSB7CiAgdmFyIGluY2x1ZGVQcmVyZWxlYXNlID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiB0cnVlOwogIHZhciB2ZXJzaW9ucyA9IGNoYXJ0LnZlcnNpb25zOwogIGlmIChvcyAmJiAhaXNBcnJheShvcykpIHsKICAgIG9zID0gW29zXTsKICB9CiAgcmV0dXJuIHZlcnNpb25zLmZpbHRlcihmdW5jdGlvbiAodmVyKSB7CiAgICB2YXIgX3ZlciRhbm5vdGF0aW9uczsKICAgIHZhciBvc1Blcm1pdHRlZCA9ICgodmVyID09PSBudWxsIHx8IHZlciA9PT0gdm9pZCAwIHx8IChfdmVyJGFubm90YXRpb25zID0gdmVyLmFubm90YXRpb25zKSA9PT0gbnVsbCB8fCBfdmVyJGFubm90YXRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdmVyJGFubm90YXRpb25zW0NBVEFMT0dfQU5OT1RBVElPTlMuUEVSTUlUVEVEX09TXSkgfHwgTElOVVgpLnNwbGl0KCcsJyk7CiAgICBpZiAoIWluY2x1ZGVQcmVyZWxlYXNlICYmIGlzUHJlcmVsZWFzZSh2ZXIudmVyc2lvbikpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgaWYgKCFvcyB8fCBkaWZmZXJlbmNlKG9zLCBvc1Blcm1pdHRlZCkubGVuZ3RoID09PSAwKSB7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgcmV0dXJuIGZhbHNlOwogIH0pOwp9CmV4cG9ydCBmdW5jdGlvbiBmaWx0ZXJBbmRBcnJhbmdlQ2hhcnRzKGNoYXJ0cykgewogIHZhciBfcmVmMTYgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9LAogICAgX3JlZjE2JGNsdXN0ZXJQcm92aWRlID0gX3JlZjE2LmNsdXN0ZXJQcm92aWRlciwKICAgIGNsdXN0ZXJQcm92aWRlciA9IF9yZWYxNiRjbHVzdGVyUHJvdmlkZSA9PT0gdm9pZCAwID8gJycgOiBfcmVmMTYkY2x1c3RlclByb3ZpZGUsCiAgICBvcGVyYXRpbmdTeXN0ZW1zID0gX3JlZjE2Lm9wZXJhdGluZ1N5c3RlbXMsCiAgICBjYXRlZ29yeSA9IF9yZWYxNi5jYXRlZ29yeSwKICAgIHNlYXJjaFF1ZXJ5ID0gX3JlZjE2LnNlYXJjaFF1ZXJ5LAogICAgX3JlZjE2JHNob3dEZXByZWNhdGVkID0gX3JlZjE2LnNob3dEZXByZWNhdGVkLAogICAgc2hvd0RlcHJlY2F0ZWQgPSBfcmVmMTYkc2hvd0RlcHJlY2F0ZWQgPT09IHZvaWQgMCA/IGZhbHNlIDogX3JlZjE2JHNob3dEZXByZWNhdGVkLAogICAgX3JlZjE2JHNob3dIaWRkZW4gPSBfcmVmMTYuc2hvd0hpZGRlbiwKICAgIHNob3dIaWRkZW4gPSBfcmVmMTYkc2hvd0hpZGRlbiA9PT0gdm9pZCAwID8gZmFsc2UgOiBfcmVmMTYkc2hvd0hpZGRlbiwKICAgIF9yZWYxNiRzaG93UHJlcmVsZWFzZSA9IF9yZWYxNi5zaG93UHJlcmVsZWFzZSwKICAgIHNob3dQcmVyZWxlYXNlID0gX3JlZjE2JHNob3dQcmVyZWxlYXNlID09PSB2b2lkIDAgPyB0cnVlIDogX3JlZjE2JHNob3dQcmVyZWxlYXNlLAogICAgX3JlZjE2JGhpZGVSZXBvcyA9IF9yZWYxNi5oaWRlUmVwb3MsCiAgICBoaWRlUmVwb3MgPSBfcmVmMTYkaGlkZVJlcG9zID09PSB2b2lkIDAgPyBbXSA6IF9yZWYxNiRoaWRlUmVwb3MsCiAgICBfcmVmMTYkc2hvd1JlcG9zID0gX3JlZjE2LnNob3dSZXBvcywKICAgIHNob3dSZXBvcyA9IF9yZWYxNiRzaG93UmVwb3MgPT09IHZvaWQgMCA/IFtdIDogX3JlZjE2JHNob3dSZXBvcywKICAgIF9yZWYxNiRzaG93VHlwZXMgPSBfcmVmMTYuc2hvd1R5cGVzLAogICAgc2hvd1R5cGVzID0gX3JlZjE2JHNob3dUeXBlcyA9PT0gdm9pZCAwID8gW10gOiBfcmVmMTYkc2hvd1R5cGVzLAogICAgX3JlZjE2JGhpZGVUeXBlcyA9IF9yZWYxNi5oaWRlVHlwZXMsCiAgICBoaWRlVHlwZXMgPSBfcmVmMTYkaGlkZVR5cGVzID09PSB2b2lkIDAgPyBbXSA6IF9yZWYxNiRoaWRlVHlwZXM7CiAgdmFyIG91dCA9IGNoYXJ0cy5maWx0ZXIoZnVuY3Rpb24gKGMpIHsKICAgIGlmIChjLmRlcHJlY2F0ZWQgJiYgIXNob3dEZXByZWNhdGVkIHx8IGMuaGlkZGVuICYmICFzaG93SGlkZGVuIHx8IGhpZGVSZXBvcyAhPT0gbnVsbCAmJiBoaWRlUmVwb3MgIT09IHZvaWQgMCAmJiBoaWRlUmVwb3MubGVuZ3RoICYmIGhpZGVSZXBvcy5pbmNsdWRlcyhjLnJlcG9LZXkpIHx8IHNob3dSZXBvcyAhPT0gbnVsbCAmJiBzaG93UmVwb3MgIT09IHZvaWQgMCAmJiBzaG93UmVwb3MubGVuZ3RoICYmICFzaG93UmVwb3MuaW5jbHVkZXMoYy5yZXBvS2V5KSB8fCBoaWRlVHlwZXMgIT09IG51bGwgJiYgaGlkZVR5cGVzICE9PSB2b2lkIDAgJiYgaGlkZVR5cGVzLmxlbmd0aCAmJiBoaWRlVHlwZXMuaW5jbHVkZXMoYy5jaGFydFR5cGUpIHx8IHNob3dUeXBlcyAhPT0gbnVsbCAmJiBzaG93VHlwZXMgIT09IHZvaWQgMCAmJiBzaG93VHlwZXMubGVuZ3RoICYmICFzaG93VHlwZXMuaW5jbHVkZXMoYy5jaGFydFR5cGUpIHx8IGMuY2hhcnROYW1lID09PSAncmFuY2hlci13aW5zLXVwZ3JhZGVyJyAmJiBjbHVzdGVyUHJvdmlkZXIgPT09ICdya2UyJykgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgICBpZiAoY29tcGF0aWJsZVZlcnNpb25zRm9yKGMsIG9wZXJhdGluZ1N5c3RlbXMsIHNob3dQcmVyZWxlYXNlKS5sZW5ndGggPD0gMCkgewogICAgICAvLyBUaGVyZSdzIG5vIHZlcnNpb25zIGNvbXBhdGlibGUgd2l0aCB0aGUgc3BlY2lmaWVkIG9zCiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIGlmIChjYXRlZ29yeSAmJiAhYy5jYXRlZ29yaWVzLmluY2x1ZGVzKGNhdGVnb3J5KSkgewogICAgICAvLyBUaGUgY2F0ZWdvcnkgZmlsdGVyIGRvZXNuJ3QgbWF0Y2gKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgaWYgKHNlYXJjaFF1ZXJ5KSB7CiAgICAgIC8vIFRoZSBzZWFyY2ggZmlsdGVyIGRvZXNuJ3QgbWF0Y2gKICAgICAgdmFyIHNlYXJjaFRva2VucyA9IHNlYXJjaFF1ZXJ5LnNwbGl0KC9ccypbLCBdXHMqLykubWFwKGZ1bmN0aW9uICh4KSB7CiAgICAgICAgcmV0dXJuIGVuc3VyZVJlZ2V4KHgsIGZhbHNlKTsKICAgICAgfSk7CiAgICAgIHZhciBfaXRlcmF0b3I0ID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIoc2VhcmNoVG9rZW5zKSwKICAgICAgICBfc3RlcDQ7CiAgICAgIHRyeSB7CiAgICAgICAgZm9yIChfaXRlcmF0b3I0LnMoKTsgIShfc3RlcDQgPSBfaXRlcmF0b3I0Lm4oKSkuZG9uZTspIHsKICAgICAgICAgIHZhciB0b2tlbiA9IF9zdGVwNC52YWx1ZTsKICAgICAgICAgIHZhciBjaGFydERlc2NyaXB0aW9uID0gYy5jaGFydERlc2NyaXB0aW9uIHx8ICcnOwogICAgICAgICAgaWYgKCFjLmNoYXJ0TmFtZURpc3BsYXkubWF0Y2godG9rZW4pICYmICFjaGFydERlc2NyaXB0aW9uLm1hdGNoKHRva2VuKSkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBfaXRlcmF0b3I0LmUoZXJyKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICBfaXRlcmF0b3I0LmYoKTsKICAgICAgfQogICAgfQogICAgcmV0dXJuIHRydWU7CiAgfSk7CiAgcmV0dXJuIHNvcnRCeShvdXQsIFsnY2VydGlmaWVkU29ydCcsICdyZXBvTmFtZScsICdjaGFydE5hbWVEaXNwbGF5J10pOwp9"},{"version":3,"names":["CATALOG","CATALOG_ANNOTATIONS","addParams","allHash","allHashSettled","clone","findBy","addObject","filterBy","isArray","stringify","classify","sortBy","importChart","ensureRegex","isPrerelease","difference","lookup","ALLOWED_CATEGORIES","CERTIFIED_SORTS","_defineProperty","_RANCHER","_EXPERIMENTAL","_PARTNER","WINDOWS","LINUX","state","loaded","clusterRepos","namespacedRepos","charts","versionInfos","config","namespace","inStore","undefined","getters","isLoaded","repo","_key","repos","clustered","namespaced","concat","_toConsumableArray","rawCharts","_ref","repoType","repoName","ary","rootState","rootGetters","_rootGetters$currentP","repoKeys","map","x","cluster","out","Object","values","filter","chart","includes","repoKey","scope","_ref2","key","chartName","preferRepoType","preferRepoName","includeHidden","parsed","parseKey","matching","deprecated","hidden","length","preferSameRepo","isInstalled","_ref3","gvr","name","version","idx","indexOf","substr","schema","attributes","versionSatisfying","_ref4","constraint","chartVersion","wantVersion","normalizeVersion","toLowerCase","trim","versions","find","v","versionProviding","_ref5","provides","_version$annotations","annotations","PROVIDES","_ref6","versionName","errors","haveComponent","importComponent","chartSteps","steps","stepsPath","allPaths","require","context","keys","path","startsWith","forEach","push","replace","component","e","console","warn","obj","_obj$metadata","type","metadata","mutations","reset","currentState","newState","assign","setInStore","setRepos","_ref7","setCharts","_ref8","_ref8$errors","_ref8$loaded","_iterator","_createForOfIteratorHelper","_step","s","n","done","value","err","f","cacheVersion","_ref9","info","actions","load","ctx","_arguments","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_hash$cluster","_ref10","force","commit","dispatch","promises","hash","_iterator2","_step2","_repo","res","_i","_Object$keys","k","_iterator3","_step3","entry","wrap","_callee$","_context","prev","next","CLUSTER_REPO","root","REPO","sent","_repo$metadata","HIDDEN_REPO","canLoad","followLink","status","reason","abrupt","entries","addChart","stop","refresh","_ref11","_callee2","_callee2$","_context2","Promise","allSettled","getVersionInfo","_ref12","_ref13","_callee3","_callee3$","_context3","Error","url","links","rehydrate","_ref14","_ref15","_slicedToArray","__rehydrate","generateKey","parts","split","_chart$annotations","_chart$annotations2","_chart$annotations12","certifiedAnnotation","CERTIFIED","certified","sideLabel","isRancher","isPartner","_OTHER","EXPERIMENTAL","isRancherSource","_chart$annotations3","_chart$annotations4","_chart$annotations5","_chart$annotations6","_chart$annotations7","_chart$annotations8","_chart$annotations9","_chart$annotations10","_chart$annotations11","id","repoNameDisplay","certifiedSort","icon","color","chartType","TYPE","_APP","chartNameDisplay","DISPLAY_NAME","chartDescription","description","featured","FEATURED","categories","filterCategories","keywords","HIDDEN","targetNamespace","NAMESPACE","targetName","RELEASE_NAME","SCOPE","windowsIncompatible","PERMITTED_OS","deploysOnWindows","DEPLOYED_OS","sort","a","b","aSameRepo","bSameRepo","normalizeCategory","_i2","_ALLOWED_CATEGORIES","c","compatibleVersionsFor","os","includePrerelease","ver","_ver$annotations","osPermitted","filterAndArrangeCharts","_ref16","_ref16$clusterProvide","clusterProvider","operatingSystems","category","searchQuery","_ref16$showDeprecated","showDeprecated","_ref16$showHidden","showHidden","_ref16$showPrerelease","showPrerelease","_ref16$hideRepos","hideRepos","_ref16$showRepos","showRepos","_ref16$showTypes","showTypes","_ref16$hideTypes","hideTypes","searchTokens","_iterator4","_step4","token","match"],"sources":["/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/store/catalog.js"],"sourcesContent":["import { CATALOG } from '@shell/config/types';\nimport { CATALOG as CATALOG_ANNOTATIONS } from '@shell/config/labels-annotations';\nimport { addParams } from '@shell/utils/url';\nimport { allHash, allHashSettled } from '@shell/utils/promise';\nimport { clone } from '@shell/utils/object';\nimport { findBy, addObject, filterBy, isArray } from '@shell/utils/array';\nimport { stringify } from '@shell/utils/error';\nimport { classify } from '@shell/plugins/dashboard-store/classify';\nimport { sortBy } from '@shell/utils/sort';\nimport { importChart } from '@shell/utils/dynamic-importer';\nimport { ensureRegex } from '@shell/utils/string';\nimport { isPrerelease } from '@shell/utils/version';\nimport difference from 'lodash/difference';\nimport { lookup } from '@shell/plugins/dashboard-store/model-loader';\n\nconst ALLOWED_CATEGORIES = [\n  'Storage',\n  'Monitoring',\n  'Database',\n  'Repository',\n  'Security',\n  'Networking',\n  'PaaS',\n  'Infrastructure',\n  'Applications',\n];\n\nconst CERTIFIED_SORTS = {\n  [CATALOG_ANNOTATIONS._RANCHER]:      1,\n  [CATALOG_ANNOTATIONS._EXPERIMENTAL]: 1,\n  [CATALOG_ANNOTATIONS._PARTNER]:      2,\n  other:                               3,\n};\n\nexport const WINDOWS = 'windows';\nexport const LINUX = 'linux';\n\nexport const state = function() {\n  return {\n    loaded:          {},\n    clusterRepos:    [],\n    namespacedRepos: [],\n    charts:          {},\n    versionInfos:    {},\n    config:          { namespace: 'catalog' },\n    inStore:         undefined,\n  };\n};\n\nexport const getters = {\n  isLoaded(state) {\n    return (repo) => {\n      return !!state.loaded[repo._key];\n    };\n  },\n\n  repos(state) {\n    const clustered = state.clusterRepos || [];\n    const namespaced = state.namespacedRepos || [];\n\n    return [...clustered, ...namespaced];\n  },\n\n  // Raw charts\n  rawCharts(state) {\n    return state.charts;\n  },\n\n  repo(state, getters) {\n    return ({ repoType, repoName }) => {\n      const ary = (repoType === 'cluster' ? state.clusterRepos : state.namespacedRepos);\n\n      return findBy(ary, 'metadata.name', repoName);\n    };\n  },\n\n  charts(state, getters, rootState, rootGetters) {\n    const repoKeys = getters.repos.map((x) => x._key);\n    let cluster = rootGetters['currentCluster'];\n\n    if ( rootGetters['currentProduct']?.inStore === 'management' ) {\n      cluster = null;\n    }\n\n    // Filter out charts for repos that are no longer in the store, rather\n    // than trying to clear them when a repo is removed.\n    // And ones that are for the wrong kind of cluster\n    const out = Object.values(state.charts).filter((chart) => {\n      if ( !repoKeys.includes(chart.repoKey) ) {\n        return false;\n      }\n\n      if ( cluster && chart.scope && chart.scope !== cluster.scope ) {\n        return false;\n      }\n\n      return true;\n    });\n\n    return sortBy(out, ['certifiedSort', 'repoName', 'chartName']);\n  },\n\n  chart(state, getters) {\n    return ({\n      key, repoType, repoName, chartName, preferRepoType, preferRepoName, includeHidden\n    }) => {\n      if ( key && !repoType && !repoName && !chartName) {\n        const parsed = parseKey(key);\n\n        repoType = parsed.repoType;\n        repoName = parsed.repoName;\n        chartName = parsed.chartName;\n      }\n\n      let matching = filterBy(getters.charts, {\n        repoType,\n        repoName,\n        chartName,\n        deprecated: false,\n      });\n\n      if ( includeHidden === false ) {\n        matching = matching.filter((x) => !x.hidden);\n      }\n\n      if ( !matching.length ) {\n        return;\n      }\n\n      if ( preferRepoType && preferRepoName ) {\n        preferSameRepo(matching, preferRepoType, preferRepoName);\n      }\n\n      return matching[0];\n    };\n  },\n\n  isInstalled(state, getters, rootState, rootGetters) {\n    return ({ gvr }) => {\n      let name, version;\n      const idx = gvr.indexOf('/');\n\n      if ( idx > 0 ) {\n        name = gvr.substr(0, idx);\n        version = gvr.substr(idx + 1);\n      } else {\n        name = gvr;\n      }\n\n      const inStore = rootGetters['currentProduct'].inStore;\n      const schema = rootGetters[`${ inStore }/schemaFor`](name);\n\n      if ( schema && (!version || schema.attributes.version === version) ) {\n        return true;\n      }\n\n      return false;\n    };\n  },\n\n  versionSatisfying(state, getters) {\n    return ({\n      repoType, repoName, constraint, chartVersion\n    }) => {\n      let name, wantVersion;\n      const idx = constraint.indexOf('=');\n\n      if ( idx > 0 ) {\n        name = constraint.substr(0, idx);\n        wantVersion = normalizeVersion(constraint.substr(idx + 1));\n      } else {\n        name = constraint;\n        wantVersion = 'latest';\n      }\n\n      name = name.toLowerCase().trim();\n      chartVersion = normalizeVersion(chartVersion);\n\n      const matching = getters.charts.filter((chart) => chart.chartName.toLowerCase().trim() === name);\n\n      if ( !matching.length ) {\n        return;\n      }\n\n      if ( repoType && repoName ) {\n        preferSameRepo(matching, repoType, repoName);\n      }\n\n      const chart = matching[0];\n      let version;\n\n      if ( wantVersion === 'latest' ) {\n        version = chart.versions[0];\n      } else if ( wantVersion === 'match' || wantVersion === 'matching' ) {\n        version = chart.versions.find((v) => normalizeVersion(v.version) === chartVersion);\n      } else {\n        version = chart.versions.find((v) => normalizeVersion(v.version) === wantVersion);\n      }\n\n      if ( version ) {\n        return clone(version);\n      }\n    };\n  },\n\n  versionProviding(state, getters) {\n    return ({ repoType, repoName, gvr }) => {\n      const matching = getters.charts.filter((chart) => chart.provides.includes(gvr) );\n\n      if ( !matching.length ) {\n        return;\n      }\n\n      if ( repoType && repoName ) {\n        preferSameRepo(matching, repoType, repoName);\n      }\n\n      const version = matching[0].versions.find((version) => version.annotations?.[CATALOG_ANNOTATIONS.PROVIDES] === gvr);\n\n      if ( version ) {\n        return clone(version);\n      }\n    };\n  },\n\n  version(state, getters) {\n    return ({\n      repoType, repoName, chartName, versionName\n    }) => {\n      const chart = getters['chart']({\n        repoType, repoName, chartName\n      });\n\n      if ( !chart ) {\n        return null;\n      }\n\n      let version;\n\n      if ( versionName ) {\n        version = findBy(chart.versions, 'version', versionName);\n      } else {\n        version = chart.versions[0];\n      }\n\n      if ( version ) {\n        return clone(version);\n      }\n    };\n  },\n\n  errors(state) {\n    return state.errors || [];\n  },\n\n  haveComponent() {\n    return (name) => {\n      return getters['type-map/hasCustomChart'](name);\n    };\n  },\n\n  importComponent(state, getters) {\n    return (name) => {\n      return getters['type-map/importChart'](name);\n    };\n  },\n\n  chartSteps(state, getters) {\n    return (name) => {\n      const steps = [];\n\n      const stepsPath = `./${ name }/steps/`;\n      // require.context only takes literals, so find all candidate step files and filter out\n      const allPaths = require.context('@shell/chart', true, /\\.vue$/).keys();\n\n      allPaths\n        .filter((path) => path.startsWith(stepsPath))\n        .forEach((path) => {\n          try {\n            steps.push({\n              name:      path.replace(stepsPath, ''),\n              component: importChart(path.substr(2, path.length)),\n            });\n          } catch (e) {\n            console.warn(`Failed to load step component ${ path } for chart ${ name }`, e); // eslint-disable-line no-console\n          }\n        });\n\n      return steps;\n    };\n  },\n\n  inStore(state) {\n    return state.inStore;\n  },\n\n  classify: (state, getters, rootState) => (obj) => {\n    return lookup(state.config.namespace, obj?.type, obj?.metadata?.name, rootState);\n  },\n};\n\nexport const mutations = {\n  reset(currentState) {\n    const newState = state();\n\n    Object.assign(currentState, newState);\n  },\n\n  setInStore(state, inStore) {\n    state.inStore = inStore;\n  },\n\n  setRepos(state, { cluster, namespaced }) {\n    state.clusterRepos = cluster;\n    state.namespacedRepos = namespaced;\n  },\n\n  setCharts(state, { charts, errors = [], loaded = [] }) {\n    state.charts = charts;\n    state.errors = errors;\n\n    for ( const repo of loaded ) {\n      state.loaded[repo._key] = true;\n    }\n  },\n\n  cacheVersion(state, { key, info }) {\n    state.versionInfos[key] = info;\n  }\n};\n\nexport const actions = {\n  async load(ctx, { force, reset } = {}) {\n    const {\n      state, getters, rootGetters, commit, dispatch\n    } = ctx;\n\n    let promises = {};\n    // Installing an app? This is fine (in cluster store)\n    // Fetching list of cluster templates? This is fine (in management store)\n    // Installing a cluster template? This isn't fine (in cluster store as per installing app, but if there is no cluster we need to default to management)\n\n    const inStore = rootGetters['currentCluster'] ? rootGetters['currentProduct'].inStore : 'management';\n\n    if ( rootGetters[`${ inStore }/schemaFor`](CATALOG.CLUSTER_REPO) ) {\n      promises.cluster = dispatch(`${ inStore }/findAll`, { type: CATALOG.CLUSTER_REPO }, { root: true });\n    }\n\n    if ( rootGetters[`${ inStore }/schemaFor`](CATALOG.REPO) ) {\n      promises.namespaced = dispatch(`${ inStore }/findAll`, { type: CATALOG.REPO }, { root: true });\n    }\n\n    const hash = await allHash(promises);\n\n    // As per comment above, when there are no clusters this will be management. Store it such that it can be used for those cases\n    commit('setInStore', inStore);\n    hash.cluster = hash.cluster?.filter((repo) => !(repo?.metadata?.annotations?.[CATALOG_ANNOTATIONS.HIDDEN_REPO] === 'true'));\n\n    commit('setRepos', hash);\n\n    const repos = getters['repos'];\n    const loaded = [];\n\n    promises = {};\n\n    for ( const repo of repos ) {\n      if ( (force === true || !getters.isLoaded(repo)) && repo.canLoad ) {\n        console.info('Loading index for repo', repo.name, `(${ repo._key })`); // eslint-disable-line no-console\n        promises[repo._key] = repo.followLink('index');\n      }\n    }\n\n    const res = await allHashSettled(promises);\n    const charts = reset ? {} : state.charts;\n    const errors = [];\n\n    for ( const key of Object.keys(res) ) {\n      const obj = res[key];\n      const repo = findBy(repos, '_key', key);\n\n      if ( obj.status === 'rejected' ) {\n        errors.push(stringify(obj.reason));\n        continue;\n      }\n\n      for ( const k in obj.value.entries ) {\n        for ( const entry of obj.value.entries[k] ) {\n          addChart(ctx, charts, entry, repo);\n        }\n      }\n\n      loaded.push(repo);\n    }\n\n    commit('setCharts', {\n      charts,\n      errors,\n      loaded,\n    });\n  },\n\n  async refresh({ getters, commit, dispatch }) {\n    const promises = getters.repos.map((x) => x.refresh());\n\n    // @TODO wait for repo state to indicate they're done once the API has that\n\n    await Promise.allSettled(promises);\n\n    await dispatch('load', { force: true, reset: true });\n  },\n\n  /*\n    Fetch full information about a specific version of a Helm chart,\n    including the standard values and README.\n  */\n  async getVersionInfo({ state, getters, commit }, {\n    repoType, repoName, chartName, versionName\n  }) {\n    const key = `${ repoType }/${ repoName }/${ chartName }/${ versionName }`;\n    let info = state.versionInfos[key];\n\n    if ( !info ) {\n      const repo = getters['repo']({ repoType, repoName });\n\n      if ( !repo ) {\n        throw new Error('Repo not found');\n      }\n\n      info = await repo.followLink('info', {\n        url: addParams(repo.links.info, {\n          chartName,\n          version: versionName\n        })\n      });\n\n      commit('cacheVersion', { key, info });\n    }\n\n    return info;\n  },\n\n  rehydrate(ctx) {\n    const { state, commit } = ctx;\n    const charts = state.charts || {};\n\n    Object.entries(state.charts).forEach(([key, chart]) => {\n      if (chart.__rehydrate) {\n        charts[key] = classify(ctx, chart);\n      }\n    });\n    commit('setCharts', {\n      charts,\n      errors: state.errors,\n    });\n  }\n};\n\nexport function generateKey(repoType, repoName, chartName) {\n  return `${ repoType }/${ repoName }/${ chartName }`;\n}\n\nexport function parseKey(key) {\n  const parts = key.split('/');\n\n  return {\n    repoType:  parts[0],\n    repoName:  parts[1],\n    chartName: parts[2],\n  };\n}\n\nfunction addChart(ctx, map, chart, repo) {\n  const repoType = (repo.type === CATALOG.CLUSTER_REPO ? 'cluster' : 'namespace');\n  const repoName = repo.metadata.name;\n  const key = generateKey(repoType, repoName, chart.name);\n  let obj = map[key];\n\n  const certifiedAnnotation = chart.annotations?.[CATALOG_ANNOTATIONS.CERTIFIED];\n\n  let certified = null;\n  let sideLabel = null;\n\n  if ( repo.isRancher ) {\n    certified = CATALOG_ANNOTATIONS._RANCHER;\n  } else if ( repo.isPartner ) {\n    certified = CATALOG_ANNOTATIONS._PARTNER;\n  } else {\n    certified = CATALOG_ANNOTATIONS._OTHER;\n  }\n\n  if ( chart.annotations?.[CATALOG_ANNOTATIONS.EXPERIMENTAL] ) {\n    sideLabel = 'Experimental';\n  } else if (\n    !repo.isRancherSource &&\n    certifiedAnnotation &&\n    certifiedAnnotation !== CATALOG_ANNOTATIONS._RANCHER &&\n    certified === CATALOG_ANNOTATIONS._OTHER\n  ) {\n    // But anybody can set the side label\n    sideLabel = certifiedAnnotation;\n  }\n\n  if ( !obj ) {\n    if ( ctx ) { }\n    obj = classify(ctx, {\n      key,\n      type:                'chart',\n      id:                  key,\n      certified,\n      sideLabel,\n      repoType,\n      repoName,\n      repoNameDisplay:     ctx.rootGetters['i18n/withFallback'](`catalog.repo.name.\"${ repoName }\"`, null, repoName),\n      certifiedSort:       CERTIFIED_SORTS[certified] || 99,\n      icon:                chart.icon,\n      color:               repo.color,\n      chartType:           chart.annotations?.[CATALOG_ANNOTATIONS.TYPE] || CATALOG_ANNOTATIONS._APP,\n      chartName:           chart.name,\n      chartNameDisplay:    chart.annotations?.[CATALOG_ANNOTATIONS.DISPLAY_NAME] || chart.name,\n      chartDescription:    chart.description,\n      featured:            chart.annotations?.[CATALOG_ANNOTATIONS.FEATURED],\n      repoKey:             repo._key,\n      versions:            [],\n      categories:          filterCategories(chart.keywords),\n      deprecated:          !!chart.deprecated,\n      hidden:              !!chart.annotations?.[CATALOG_ANNOTATIONS.HIDDEN],\n      targetNamespace:     chart.annotations?.[CATALOG_ANNOTATIONS.NAMESPACE],\n      targetName:          chart.annotations?.[CATALOG_ANNOTATIONS.RELEASE_NAME],\n      scope:               chart.annotations?.[CATALOG_ANNOTATIONS.SCOPE],\n      provides:            [],\n      windowsIncompatible: !(chart.annotations?.[CATALOG_ANNOTATIONS.PERMITTED_OS] || '').includes('windows'),\n      deploysOnWindows:    (chart.annotations?.[CATALOG_ANNOTATIONS.DEPLOYED_OS] || '').includes('windows')\n    });\n\n    map[key] = obj;\n  }\n\n  chart.key = `${ key }/${ chart.version }`;\n  chart.repoType = repoType;\n  chart.repoName = repoName;\n\n  const provides = chart.annotations?.[CATALOG_ANNOTATIONS.PROVIDES];\n\n  if ( provides ) {\n    addObject(obj.provides, provides);\n  }\n\n  obj.versions.push(chart);\n}\n\nfunction preferSameRepo(matching, repoType, repoName) {\n  matching.sort((a, b) => {\n    const aSameRepo = a.repoType === repoType && a.repoName === repoName ? 1 : 0;\n    const bSameRepo = b.repoType === repoType && b.repoName === repoName ? 1 : 0;\n\n    if ( aSameRepo && !bSameRepo ) {\n      return -1;\n    } else if ( !aSameRepo && bSameRepo ) {\n      return 1;\n    }\n\n    return 0;\n  });\n}\n\nfunction normalizeVersion(v) {\n  return v.replace(/^v/i, '').toLowerCase().trim();\n}\n\nfunction filterCategories(categories) {\n  categories = (categories || []).map((x) => normalizeCategory(x));\n\n  const out = [];\n\n  for ( const c of ALLOWED_CATEGORIES ) {\n    if ( categories.includes(normalizeCategory(c)) ) {\n      addObject(out, c);\n    }\n  }\n\n  return out;\n}\n\nfunction normalizeCategory(c) {\n  return c.replace(/\\s+/g, '').toLowerCase();\n}\n\n/*\ncatalog.cattle.io/deplys-on-os: OS -> requires global.cattle.OS.enabled: true\n  default: nothing\ncatalog.cattle.io/permits-os: OS -> will break on clusters containing nodes that are not OS\n  default if not found: catalog.cattle.io/permits-os: linux\n*/\nexport function compatibleVersionsFor(chart, os, includePrerelease = true) {\n  const versions = chart.versions;\n\n  if (os && !isArray(os)) {\n    os = [os];\n  }\n\n  return versions.filter((ver) => {\n    const osPermitted = (ver?.annotations?.[CATALOG_ANNOTATIONS.PERMITTED_OS] || LINUX).split(',');\n\n    if ( !includePrerelease && isPrerelease(ver.version) ) {\n      return false;\n    }\n\n    if ( !os || difference(os, osPermitted).length === 0) {\n      return true;\n    }\n\n    return false;\n  });\n}\n\nexport function filterAndArrangeCharts(charts, {\n  clusterProvider = '',\n  operatingSystems,\n  category,\n  searchQuery,\n  showDeprecated = false,\n  showHidden = false,\n  showPrerelease = true,\n  hideRepos = [],\n  showRepos = [],\n  showTypes = [],\n  hideTypes = [],\n} = {}) {\n  const out = charts.filter((c) => {\n    if (\n      ( c.deprecated && !showDeprecated ) ||\n      ( c.hidden && !showHidden ) ||\n      ( hideRepos?.length && hideRepos.includes(c.repoKey) ) ||\n      ( showRepos?.length && !showRepos.includes(c.repoKey) ) ||\n      ( hideTypes?.length && hideTypes.includes(c.chartType) ) ||\n      ( showTypes?.length && !showTypes.includes(c.chartType) ) ||\n      (c.chartName === 'rancher-wins-upgrader' && clusterProvider === 'rke2')\n    ) {\n      return false;\n    }\n\n    if (compatibleVersionsFor(c, operatingSystems, showPrerelease).length <= 0) {\n      // There's no versions compatible with the specified os\n      return false;\n    }\n\n    if ( category && !c.categories.includes(category) ) {\n      // The category filter doesn't match\n      return false;\n    }\n\n    if ( searchQuery ) {\n      // The search filter doesn't match\n      const searchTokens = searchQuery.split(/\\s*[, ]\\s*/).map((x) => ensureRegex(x, false));\n\n      for ( const token of searchTokens ) {\n        const chartDescription = c.chartDescription || '';\n\n        if ( !c.chartNameDisplay.match(token) && !chartDescription.match(token) ) {\n          return false;\n        }\n      }\n    }\n\n    return true;\n  });\n\n  return sortBy(out, ['certifiedSort', 'repoName', 'chartNameDisplay']);\n}\n"],"mappings":"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","ignoreList":[]}]}