{"remainingRequest":"/home/ubuntu/susecon-2024-ext-demo/node_modules/babel-loader/lib/index.js??ref--16-1!/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/store/index.js","dependencies":[{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/store/index.js","mtime":1725271280091},{"path":"/home/ubuntu/susecon-2024-ext-demo/babel.config.js","mtime":1725268750245},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/babel-loader/lib/index.js","mtime":1725271298942}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5IjsKaW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3NsaWNlZFRvQXJyYXkiOwppbXBvcnQgX3JlZ2VuZXJhdG9yUnVudGltZSBmcm9tICIvaG9tZS91YnVudHUvc3VzZWNvbi0yMDI0LWV4dC1kZW1vL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9yZWdlbmVyYXRvci9pbmRleC5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKZnVuY3Rpb24gb3duS2V5cyhlLCByKSB7IHZhciB0ID0gT2JqZWN0LmtleXMoZSk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBvID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKTsgciAmJiAobyA9IG8uZmlsdGVyKGZ1bmN0aW9uIChyKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsIHIpLmVudW1lcmFibGU7IH0pKSwgdC5wdXNoLmFwcGx5KHQsIG8pOyB9IHJldHVybiB0OyB9CmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQoZSkgeyBmb3IgKHZhciByID0gMTsgciA8IGFyZ3VtZW50cy5sZW5ndGg7IHIrKykgeyB2YXIgdCA9IG51bGwgIT0gYXJndW1lbnRzW3JdID8gYXJndW1lbnRzW3JdIDoge307IHIgJSAyID8gb3duS2V5cyhPYmplY3QodCksICEwKS5mb3JFYWNoKGZ1bmN0aW9uIChyKSB7IF9kZWZpbmVQcm9wZXJ0eShlLCByLCB0W3JdKTsgfSkgOiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGUsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHQpKSA6IG93bktleXMoT2JqZWN0KHQpKS5mb3JFYWNoKGZ1bmN0aW9uIChyKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCByLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsIHIpKTsgfSk7IH0gcmV0dXJuIGU7IH0KZnVuY3Rpb24gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIociwgZSkgeyB2YXIgdCA9ICJ1bmRlZmluZWQiICE9IHR5cGVvZiBTeW1ib2wgJiYgcltTeW1ib2wuaXRlcmF0b3JdIHx8IHJbIkBAaXRlcmF0b3IiXTsgaWYgKCF0KSB7IGlmIChBcnJheS5pc0FycmF5KHIpIHx8ICh0ID0gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KHIpKSB8fCBlICYmIHIgJiYgIm51bWJlciIgPT0gdHlwZW9mIHIubGVuZ3RoKSB7IHQgJiYgKHIgPSB0KTsgdmFyIF9uID0gMCwgRiA9IGZ1bmN0aW9uIEYoKSB7fTsgcmV0dXJuIHsgczogRiwgbjogZnVuY3Rpb24gbigpIHsgcmV0dXJuIF9uID49IHIubGVuZ3RoID8geyBkb25lOiAhMCB9IDogeyBkb25lOiAhMSwgdmFsdWU6IHJbX24rK10gfTsgfSwgZTogZnVuY3Rpb24gZShyKSB7IHRocm93IHI7IH0sIGY6IEYgfTsgfSB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gaXRlcmF0ZSBub24taXRlcmFibGUgaW5zdGFuY2UuXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuIik7IH0gdmFyIG8sIGEgPSAhMCwgdSA9ICExOyByZXR1cm4geyBzOiBmdW5jdGlvbiBzKCkgeyB0ID0gdC5jYWxsKHIpOyB9LCBuOiBmdW5jdGlvbiBuKCkgeyB2YXIgciA9IHQubmV4dCgpOyByZXR1cm4gYSA9IHIuZG9uZSwgcjsgfSwgZTogZnVuY3Rpb24gZShyKSB7IHUgPSAhMCwgbyA9IHI7IH0sIGY6IGZ1bmN0aW9uIGYoKSB7IHRyeSB7IGEgfHwgbnVsbCA9PSB0LnJldHVybiB8fCB0LnJldHVybigpOyB9IGZpbmFsbHkgeyBpZiAodSkgdGhyb3cgbzsgfSB9IH07IH0KZnVuY3Rpb24gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KHIsIGEpIHsgaWYgKHIpIHsgaWYgKCJzdHJpbmciID09IHR5cGVvZiByKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkociwgYSk7IHZhciB0ID0ge30udG9TdHJpbmcuY2FsbChyKS5zbGljZSg4LCAtMSk7IHJldHVybiAiT2JqZWN0IiA9PT0gdCAmJiByLmNvbnN0cnVjdG9yICYmICh0ID0gci5jb25zdHJ1Y3Rvci5uYW1lKSwgIk1hcCIgPT09IHQgfHwgIlNldCIgPT09IHQgPyBBcnJheS5mcm9tKHIpIDogIkFyZ3VtZW50cyIgPT09IHQgfHwgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QodCkgPyBfYXJyYXlMaWtlVG9BcnJheShyLCBhKSA6IHZvaWQgMDsgfSB9CmZ1bmN0aW9uIF9hcnJheUxpa2VUb0FycmF5KHIsIGEpIHsgKG51bGwgPT0gYSB8fCBhID4gci5sZW5ndGgpICYmIChhID0gci5sZW5ndGgpOyBmb3IgKHZhciBlID0gMCwgbiA9IEFycmF5KGEpOyBlIDwgYTsgZSsrKSBuW2VdID0gcltlXTsgcmV0dXJuIG47IH0KaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmVudHJpZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvcnMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5kZXNjcmlwdGlvbi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZyb20uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudmFsdWVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucHJvbWlzZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5yZXBsYWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnN0YXJ0cy13aXRoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgeyBCQUNLX1RPIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy9sb2NhbC1zdG9yYWdlJzsKaW1wb3J0IHsgc2V0QnJhbmQsIHNldFZlbmRvciB9IGZyb20gJ0BzaGVsbC9jb25maWcvcHJpdmF0ZS1sYWJlbCc7CmltcG9ydCB7IE5BTUUgYXMgRVhQTE9SRVIgfSBmcm9tICdAc2hlbGwvY29uZmlnL3Byb2R1Y3QvZXhwbG9yZXInOwppbXBvcnQgeyBMT0dHRURfT1VULCBUSU1FRF9PVVQsIFVQR1JBREVELCBfRkxBR0dFRCB9IGZyb20gJ0BzaGVsbC9jb25maWcvcXVlcnktcGFyYW1zJzsKaW1wb3J0IHsgU0VUVElORyB9IGZyb20gJ0BzaGVsbC9jb25maWcvc2V0dGluZ3MnOwppbXBvcnQgeyBDT1VOVCwgREVGQVVMVF9XT1JLU1BBQ0UsIEZMRUVULCBNQU5BR0VNRU5ULCBOQU1FU1BBQ0UsIE5PUk1BTiwgVUksIFZJUlRVQUxfSEFSVkVTVEVSX1BST1ZJREVSLCBIQ0kgfSBmcm9tICdAc2hlbGwvY29uZmlnL3R5cGVzJzsKaW1wb3J0IHsgQllfVFlQRSB9IGZyb20gJ0BzaGVsbC9wbHVnaW5zL2Rhc2hib2FyZC1zdG9yZS9jbGFzc2lmeSc7CmltcG9ydCBTdGV2ZSBmcm9tICdAc2hlbGwvcGx1Z2lucy9zdGV2ZSc7CmltcG9ydCB7IFNURVZFX01PREVMX1RZUEVTIH0gZnJvbSAnQHNoZWxsL3BsdWdpbnMvc3RldmUvZ2V0dGVycyc7CmltcG9ydCB7IENMVVNURVIgYXMgQ0xVU1RFUl9QUkVGLCBMQVNUX05BTUVTUEFDRSwgTkFNRVNQQUNFX0ZJTFRFUlMsIFdPUktTUEFDRSB9IGZyb20gJ0BzaGVsbC9zdG9yZS9wcmVmcyc7CmltcG9ydCB7IEJPVEgsIENMVVNURVJfTEVWRUwsIE5BTUVTUEFDRUQgfSBmcm9tICdAc2hlbGwvc3RvcmUvdHlwZS1tYXAnOwppbXBvcnQgeyBmaWx0ZXJCeSwgZmluZEJ5IH0gZnJvbSAnQHNoZWxsL3V0aWxzL2FycmF5JzsKaW1wb3J0IHsgQXBpRXJyb3IsIENsdXN0ZXJOb3RGb3VuZEVycm9yIH0gZnJvbSAnQHNoZWxsL3V0aWxzL2Vycm9yJzsKaW1wb3J0IHsgZ2NBY3Rpb25zLCBnY0dldHRlcnMgfSBmcm9tICdAc2hlbGwvdXRpbHMvZ2MvZ2Mtcm9vdC1zdG9yZSc7CmltcG9ydCB7IE5BTUVTUEFDRV9GSUxURVJfQUxMX09SUEhBTlMgYXMgQUxMX09SUEhBTlMsIE5BTUVTUEFDRV9GSUxURVJfQUxMX1NZU1RFTSBhcyBBTExfU1lTVEVNLCBOQU1FU1BBQ0VfRklMVEVSX0FMTF9VU0VSIGFzIEFMTF9VU0VSLCBOQU1FU1BBQ0VfRklMVEVSX05BTUVTUEFDRURfTk8gYXMgTkFNRVNQQUNFRF9OTywgTkFNRVNQQUNFX0ZJTFRFUl9OQU1FU1BBQ0VEX1BSRUZJWCBhcyBOQU1FU1BBQ0VEX1BSRUZJWCwgTkFNRVNQQUNFX0ZJTFRFUl9OQU1FU1BBQ0VEX1lFUyBhcyBOQU1FU1BBQ0VEX1lFUywgc3BsaXROYW1lc3BhY2VGaWx0ZXJLZXksIE5BTUVTUEFDRV9GSUxURVJfTlNfRlVMTF9QUkVGSVggfSBmcm9tICdAc2hlbGwvdXRpbHMvbmFtZXNwYWNlLWZpbHRlcic7CmltcG9ydCB7IGFsbEhhc2gsIGFsbEhhc2hTZXR0bGVkIH0gZnJvbSAnQHNoZWxsL3V0aWxzL3Byb21pc2UnOwppbXBvcnQgeyBzb3J0QnkgfSBmcm9tICdAc2hlbGwvdXRpbHMvc29ydCc7CmltcG9ydCB7IGFkZFBhcmFtIH0gZnJvbSAnQHNoZWxsL3V0aWxzL3VybCc7CmltcG9ydCBzZW12ZXIgZnJvbSAnc2VtdmVyJzsKaW1wb3J0IHsgU1RPUkUsIEJMQU5LX0NMVVNURVIgfSBmcm9tICdAc2hlbGwvc3RvcmUvc3RvcmUtdHlwZXMnOwppbXBvcnQgeyBpc0RldkJ1aWxkIH0gZnJvbSAnQHNoZWxsL3V0aWxzL3ZlcnNpb24nOwoKLy8gRGlzYWJsZXMgc3RyaWN0IG1vZGUgZm9yIGFsbCBzdG9yZSBpbnN0YW5jZXMgdG8gcHJldmVudCB3YXJuaW5nIGFib3V0IGNoYW5naW5nIHN0YXRlIG91dHNpZGUgb2YgbXV0YXRpb25zCi8vIGJlY2F1c2UgaXQncyBtb3JlIGVmZmljaWVudCB0byBkbyB0aGF0IHNvbWV0aW1lcy4KZXhwb3J0IHZhciBzdHJpY3QgPSBmYWxzZTsKZXhwb3J0IHZhciBwbHVnaW5zID0gW1N0ZXZlKHsKICBuYW1lc3BhY2U6IFNUT1JFLk1BTkFHRU1FTlQsCiAgYmFzZVVybDogJy92MScsCiAgbW9kZWxCYXNlQ2xhc3M6IEJZX1RZUEUsCiAgc3VwcG9ydHNTdHJlYW06IGZhbHNlIC8vIHRydWUsIC0tIERpc2FibGVkIGR1ZSB0byByZXBvcnQgdGhhdCBpdCdzIHNvbWV0aW1lcyBtdWNoIHNsb3dlciBpbiBDaHJvbWUKfSksIFN0ZXZlKHsKICBuYW1lc3BhY2U6IFNUT1JFLkNMVVNURVIsCiAgYmFzZVVybDogJycsCiAgLy8gVVJMIGlzIGR5bmFtaWNhbGx5IHNldCBmb3IgdGhlIHNlbGVjdGVkIGNsdXN0ZXIKICBzdXBwb3J0c1N0cmVhbTogZmFsc2UsCiAgLy8gdHJ1ZSwgLS0gRGlzYWJsZWQgZHVlIHRvIHJlcG9ydCB0aGF0IGl0J3Mgc29tZXRpbWVzIG11Y2ggc2xvd2VyIGluIENocm9tZQogIHN1cHBvcnRzR2M6IHRydWUgLy8gRW5hYmxlIGdhcmJhZ2UgY29sbGVjdGlvbiBmb3IgdGhpcyBzdG9yZSBvbmx5Cn0pLCBTdGV2ZSh7CiAgbmFtZXNwYWNlOiBTVE9SRS5SQU5DSEVSLAogIGJhc2VVcmw6ICcvdjMnLAogIHN1cHBvcnRzU3RyZWFtOiBmYWxzZSwKICAvLyBUaGUgbm9ybWFuIEFQSSBkb2Vzbid0IHN1cHBvcnQgc3RyZWFtaW5nCiAgbW9kZWxCYXNlQ2xhc3M6IFNURVZFX01PREVMX1RZUEVTLk5PUk1BTgp9KV07CgovKioKICogR2V0IGFsbCB0aGUgbmFtZXNwYWNlcyBjYXRlZ29yaWVzCiAqIEByZXR1cm5zIFJlY29yZDxzdHJpbmcsIHRydWU+CiAqLwp2YXIgZ2V0QWN0aXZlTmFtZXNwYWNlc0NhdGVnb3JpZXMgPSBmdW5jdGlvbiBnZXRBY3RpdmVOYW1lc3BhY2VzQ2F0ZWdvcmllcyhnZXR0ZXJzLCBuYW1lc3BhY2VzLCBmaWx0ZXJzKSB7CiAgLy8gU3BsaXQgbmFtZXNwYWNlcyBieSBjYXRlZ29yeQogIHZhciBpbmNsdWRlQWxsID0gZ2V0dGVycy5pc0FsbE5hbWVzcGFjZXM7CiAgdmFyIGluY2x1ZGVTeXN0ZW0gPSBmaWx0ZXJzLmluY2x1ZGVzKEFMTF9TWVNURU0pOwogIHZhciBpbmNsdWRlVXNlciA9IGZpbHRlcnMuaW5jbHVkZXMoQUxMX1VTRVIpOwogIHZhciBpbmNsdWRlT3JwaGFucyA9IGZpbHRlcnMuaW5jbHVkZXMoQUxMX09SUEhBTlMpOwoKICAvLyBDYXRlZ29yaWVzIHRvIHB1bGwgaW4gYWxsIHRoZSB1c2VyLCBzeXN0ZW0sIG9yIG9ycGhhbmVkIG5hbWVzcGFjZXMKICB2YXIgaGFzQ2F0ZWdvcnkgPSBpbmNsdWRlQWxsIHx8IGluY2x1ZGVPcnBoYW5zIHx8IGluY2x1ZGVTeXN0ZW0gfHwgaW5jbHVkZVVzZXI7CiAgcmV0dXJuIGhhc0NhdGVnb3J5ID8gT2JqZWN0LnZhbHVlcyhuYW1lc3BhY2VzKS5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgbnMpIHsKICAgIGlmIChpbmNsdWRlQWxsIHx8IGluY2x1ZGVPcnBoYW5zICYmICFucy5wcm9qZWN0SWQgfHwgaW5jbHVkZVVzZXIgJiYgIW5zLmlzU3lzdGVtIHx8IGluY2x1ZGVTeXN0ZW0gJiYgbnMuaXNTeXN0ZW0pIHsKICAgICAgYWNjW25zLmlkXSA9IHRydWU7CiAgICB9CiAgICByZXR1cm4gYWNjOwogIH0sIHt9KSA6IHt9Owp9OwoKLyoqCiAqIEdldCBoYW5kcGlja2VkIG5hbWVzcGFjZXMgZnJvbSB0aGUgZmlsdGVycwogKiBAcmV0dXJucyBSZWNvcmQ8c3RyaW5nLCB0cnVlPgogKi8KdmFyIGdldEFjdGl2ZVNpbmdsZU5hbWVzcGFjZXMgPSBmdW5jdGlvbiBnZXRBY3RpdmVTaW5nbGVOYW1lc3BhY2VzKGdldHRlcnMsIGZpbHRlcnMpIHsKICB2YXIgYWN0aXZlTmFtZXNwYWNlcyA9IHt9OwoKICAvLyBJbmRpdmlkdWFsIGNhc2VzIGZvciBzdGFja2VkIHByb2plY3QgYW5kL29yIG5hbWVzcGFjZSBmaWx0ZXJzCiAgaWYgKCFnZXR0ZXJzLmlzQWxsTmFtZXNwYWNlcykgewogICAgdmFyIF9nZXR0ZXJzJGN1cnJlbnRDbHVzdDsKICAgIHZhciBjbHVzdGVySWQgPSAoX2dldHRlcnMkY3VycmVudENsdXN0ID0gZ2V0dGVyc1snY3VycmVudENsdXN0ZXInXSkgPT09IG51bGwgfHwgX2dldHRlcnMkY3VycmVudENsdXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZ2V0dGVycyRjdXJyZW50Q2x1c3QuaWQ7CiAgICB2YXIgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIoZmlsdGVycyksCiAgICAgIF9zdGVwOwogICAgdHJ5IHsKICAgICAgZm9yIChfaXRlcmF0b3IucygpOyAhKF9zdGVwID0gX2l0ZXJhdG9yLm4oKSkuZG9uZTspIHsKICAgICAgICB2YXIgZmlsdGVyID0gX3N0ZXAudmFsdWU7CiAgICAgICAgdmFyIF9maWx0ZXIkc3BsaXQgPSBmaWx0ZXIuc3BsaXQoJzovLycsIDIpLAogICAgICAgICAgX2ZpbHRlciRzcGxpdDIgPSBfc2xpY2VkVG9BcnJheShfZmlsdGVyJHNwbGl0LCAyKSwKICAgICAgICAgIHR5cGUgPSBfZmlsdGVyJHNwbGl0MlswXSwKICAgICAgICAgIGlkID0gX2ZpbHRlciRzcGxpdDJbMV07CiAgICAgICAgaWYgKCF0eXBlKSB7CiAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9CiAgICAgICAgaWYgKHR5cGUgPT09ICducycpIHsKICAgICAgICAgIGFjdGl2ZU5hbWVzcGFjZXNbaWRdID0gdHJ1ZTsKICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdwcm9qZWN0JykgewogICAgICAgICAgLy8gU2V0IGFsbCB0aGUgbmFtZXNwYWNlcyBjb250YWluZWQgaW4gdGhlIHByb2plY3QKICAgICAgICAgIHZhciBwcm9qZWN0ID0gZ2V0dGVyc1snbWFuYWdlbWVudC9ieUlkJ10oTUFOQUdFTUVOVC5QUk9KRUNULCAiIi5jb25jYXQoY2x1c3RlcklkLCAiLyIpLmNvbmNhdChpZCkpOwogICAgICAgICAgaWYgKHByb2plY3QpIHsKICAgICAgICAgICAgdmFyIF9pdGVyYXRvcjIgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihwcm9qZWN0Lm5hbWVzcGFjZXMpLAogICAgICAgICAgICAgIF9zdGVwMjsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICBmb3IgKF9pdGVyYXRvcjIucygpOyAhKF9zdGVwMiA9IF9pdGVyYXRvcjIubigpKS5kb25lOykgewogICAgICAgICAgICAgICAgdmFyIHByb2plY3ROYW1lc3BhY2UgPSBfc3RlcDIudmFsdWU7CiAgICAgICAgICAgICAgICBhY3RpdmVOYW1lc3BhY2VzW3Byb2plY3ROYW1lc3BhY2UuaWRdID0gdHJ1ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgICAgIF9pdGVyYXRvcjIuZShlcnIpOwogICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgIF9pdGVyYXRvcjIuZigpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgX2l0ZXJhdG9yLmUoZXJyKTsKICAgIH0gZmluYWxseSB7CiAgICAgIF9pdGVyYXRvci5mKCk7CiAgICB9CiAgfQogIHJldHVybiBhY3RpdmVOYW1lc3BhY2VzOwp9OwoKLyoqCiAqIEdldCBvbmx5IG5hbWVzcGFjZXMgZm9yIHVzZXIgd2l0aCByb2xlcyAiQ2x1c3RlciBNZW1iZXIiIGFuZCAiVmlldyBBbGwgUHJvamVjdHMiCiAqIEByZXR1cm5zIFJlY29yZDxzdHJpbmcsIHRydWU+CiAqLwp2YXIgZ2V0UmVhZE9ubHlBY3RpdmVOYW1lc3BhY2VzID0gZnVuY3Rpb24gZ2V0UmVhZE9ubHlBY3RpdmVOYW1lc3BhY2VzKG5hbWVzcGFjZXMsIGFjdGl2ZU5hbWVzcGFjZXMpIHsKICB2YXIgcmVhZG9ubHlOYW1lc3BhY2VzID0gT2JqZWN0LnZhbHVlcyhuYW1lc3BhY2VzKS5maWx0ZXIoZnVuY3Rpb24gKG5zKSB7CiAgICByZXR1cm4gISFucy5saW5rcy51cGRhdGU7CiAgfSkubWFwKGZ1bmN0aW9uIChfcmVmKSB7CiAgICB2YXIgaWQgPSBfcmVmLmlkOwogICAgcmV0dXJuIGlkOwogIH0pOwogIHJldHVybiBPYmplY3Qua2V5cyhhY3RpdmVOYW1lc3BhY2VzKS5maWx0ZXIoZnVuY3Rpb24gKG5zKSB7CiAgICByZXR1cm4gcmVhZG9ubHlOYW1lc3BhY2VzLmluY2x1ZGVzKG5zKTsKICB9KS5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgbnMpIHsKICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGFjYyksIHt9LCBfZGVmaW5lUHJvcGVydHkoe30sIG5zLCB0cnVlKSk7CiAgfSwge30pOwp9OwoKLyoqCiAqIENvbGxlY3QgYWxsIHRoZSBuYW1lc3BhY2VzIGdyb3VwZWQgYnkgY2F0ZWdvcnksIHByb2plY3Qgb3Igc2luZ2xlIHBpY2sKICogQHJldHVybnMgUmVjb3JkPHN0cmluZywgdHJ1ZT4KICovCnZhciBnZXRBY3RpdmVOYW1lc3BhY2VzID0gZnVuY3Rpb24gZ2V0QWN0aXZlTmFtZXNwYWNlcyhzdGF0ZSwgZ2V0dGVycykgewogIHZhciBfZ2V0dGVycyRjdXJyZW50Q2x1c3QyOwogIHZhciByZWFkb25seSA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogZmFsc2U7CiAgdmFyIHByb2R1Y3QgPSBnZXR0ZXJzWydjdXJyZW50UHJvZHVjdCddOwogIGlmICghcHJvZHVjdCkgewogICAgcmV0dXJuIHt9OwogIH0KCiAgLy8gVE9ETzogQWRkIGNvbW1lbnQgd2l0aCBsb2dpYyBmb3IgZmxlZXQKICBpZiAocHJvZHVjdC5zaG93V29ya3NwYWNlU3dpdGNoZXIpIHsKICAgIHZhciBmbGVldE91dCA9IF9kZWZpbmVQcm9wZXJ0eSh7fSwgc3RhdGUud29ya3NwYWNlLCB0cnVlKTsKICAgIHVwZGF0ZUFjdGl2ZU5hbWVzcGFjZUNhY2hlKHN0YXRlLCBmbGVldE91dCk7CiAgICByZXR1cm4gZmxlZXRPdXQ7CiAgfQoKICAvLyBSZXNldCBjYWNoZSBpZiBubyBjbHVzdGVyIGlzIGZvdW5kIG9yIGlzIG5vdCBpbiBzdG9yZQogIHZhciBpblN0b3JlID0gcHJvZHVjdCA9PT0gbnVsbCB8fCBwcm9kdWN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwcm9kdWN0LmluU3RvcmU7CiAgdmFyIGNsdXN0ZXJJZCA9IChfZ2V0dGVycyRjdXJyZW50Q2x1c3QyID0gZ2V0dGVyc1snY3VycmVudENsdXN0ZXInXSkgPT09IG51bGwgfHwgX2dldHRlcnMkY3VycmVudENsdXN0MiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2dldHRlcnMkY3VycmVudENsdXN0Mi5pZDsKICBpZiAoIWNsdXN0ZXJJZCB8fCAhaW5TdG9yZSkgewogICAgdXBkYXRlQWN0aXZlTmFtZXNwYWNlQ2FjaGUoc3RhdGUsIHt9KTsKICAgIHJldHVybiB7fTsKICB9CgogIC8vIFVzZSBkZWZhdWx0ICJBbGwgTmFtZXNwYWNlcyIgY2F0ZWdvcnkgaWYgbm8gbmFtZXNwYWNlcyBpcyBmb3VuZAogIHZhciBoYXNOYW1lc3BhY2VzID0gQXJyYXkuaXNBcnJheShzdGF0ZS5hbGxOYW1lc3BhY2VzKSAmJiBzdGF0ZS5hbGxOYW1lc3BhY2VzLmxlbmd0aCA+IDA7CiAgdmFyIGFsbE5hbWVzcGFjZXMgPSBoYXNOYW1lc3BhY2VzID8gc3RhdGUuYWxsTmFtZXNwYWNlcyA6IGdldHRlcnNbIiIuY29uY2F0KGluU3RvcmUsICIvYWxsIildKE5BTUVTUEFDRSk7CiAgdmFyIGFsbG93ZWROYW1lc3BhY2VzID0gYWxsTmFtZXNwYWNlcy5maWx0ZXIoZnVuY3Rpb24gKG5zKSB7CiAgICByZXR1cm4gc3RhdGUucHJlZnMuZGF0YVsnYWxsLW5hbWVzcGFjZXMnXSA/IHRydWUgOiAhbnMuaXNPYnNjdXJlOwogIH0pIC8vIEZpbHRlciBvdXQgUmFuY2hlciBzeXN0ZW0gbmFtZXNwYWNlcwogIC5maWx0ZXIoZnVuY3Rpb24gKG5zKSB7CiAgICByZXR1cm4gcHJvZHVjdC5oaWRlU3lzdGVtUmVzb3VyY2VzID8gIW5zLmlzU3lzdGVtIDogdHJ1ZTsKICB9KTsgLy8gRmlsdGVyIG91dCBGbGVldCBzeXN0ZW0gbmFtZXNwYWNlcwoKICAvLyBSZXRyaWV2ZSBhbGwgdGhlIGZpbHRlcnMgc2VsZWN0ZWQgYnkgdGhlIHVzZXIKICB2YXIgZmlsdGVycyA9IHN0YXRlLm5hbWVzcGFjZUZpbHRlcnMuZmlsdGVyKGZ1bmN0aW9uIChmaWx0ZXJzKSB7CiAgICByZXR1cm4gISFmaWx0ZXJzICYmICEiIi5jb25jYXQoZmlsdGVycykuc3RhcnRzV2l0aChOQU1FU1BBQ0VEX1BSRUZJWCk7CiAgfSk7CiAgdmFyIGFjdGl2ZU5hbWVzcGFjZXMgPSBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGdldEFjdGl2ZU5hbWVzcGFjZXNDYXRlZ29yaWVzKGdldHRlcnMsIGFsbG93ZWROYW1lc3BhY2VzLCBmaWx0ZXJzKSksIGdldEFjdGl2ZVNpbmdsZU5hbWVzcGFjZXMoZ2V0dGVycywgZmlsdGVycykpOwoKICAvLyBDcmVhdGUgbWFwIHRoYXQgY2FuIGJlIHVzZWQgdG8gZWZmaWNpZW50bHkgY2hlY2sgaWYgYSByZXNvdXJjZSBzaG91bGQgYmUgZGlzcGxheWVkCiAgdXBkYXRlQWN0aXZlTmFtZXNwYWNlQ2FjaGUoc3RhdGUsIGFjdGl2ZU5hbWVzcGFjZXMpOwoKICAvLyBFeGNsdWRlIG5hbWVzcGFjZXMgcmVzdHJpY3RlZCB0byB0aGUgdXNlciBmb3Igd3JpdGluZwogIGlmIChyZWFkb25seSkgewogICAgcmV0dXJuIGdldFJlYWRPbmx5QWN0aXZlTmFtZXNwYWNlcyhhbGxvd2VkTmFtZXNwYWNlcywgYWN0aXZlTmFtZXNwYWNlcyk7CiAgfQogIHJldHVybiBhY3RpdmVOYW1lc3BhY2VzOwp9OwoKLyoqCiAqIENhY2hpbmcgc2lkZS1lZmZlY3Qgd2hpbGUgcmV0cmlldmluZyBuYW1lc3BhY2VzIGZpbHRlcnMKICovCnZhciB1cGRhdGVBY3RpdmVOYW1lc3BhY2VDYWNoZSA9IGZ1bmN0aW9uIHVwZGF0ZUFjdGl2ZU5hbWVzcGFjZUNhY2hlKHN0YXRlLCBhY3RpdmVOYW1lc3BhY2VDYWNoZSkgewogIC8vIFRoaXMgaXMgZ29pbmcgdG8gcnVuIGEgbG90LCBzbyBrZWVwIGl0IG9wdGltaXNlZAogIHZhciBjYWNoZUtleSA9ICcnOwogIGZvciAodmFyIGtleSBpbiBhY3RpdmVOYW1lc3BhY2VDYWNoZSkgewogICAgLy8gSSB0aG91Z2h0IGFycmF5LmpvaW4gd291bGQgYmUgZmFzdGVyIHRoYW4gc3RyaW5nIGNvbmNhdGVuYXRpb24sIGJ1dCBpbiBwbGFjZXMgbGlrZSB0aGlzIHdoZXJlIHRoZSBhcnJheSBtdXN0IGZpcnN0IGJlIGNvbnN0cnVjdGVkIGl0J3MKICAgIC8vIHNsb3dlci4KICAgIGNhY2hlS2V5ICs9IGtleSArIGFjdGl2ZU5hbWVzcGFjZUNhY2hlW2tleV07CiAgfQoKICAvLyBPbmx5IHVwZGF0ZSBgYWN0aXZlTmFtZXNwYWNlQ2FjaGVgIGlmIHRoZXJlIGhhdmUgYmVlbiBjaGFuZ2VzLiBUaGlzIHJlZHVjZXMgYSBsb3Qgb2YgY2h1cm4KICBpZiAoc3RhdGUuYWN0aXZlTmFtZXNwYWNlQ2FjaGVLZXkgIT09IGNhY2hlS2V5KSB7CiAgICBzdGF0ZS5hY3RpdmVOYW1lc3BhY2VDYWNoZUtleSA9IGNhY2hlS2V5OwogICAgc3RhdGUuYWN0aXZlTmFtZXNwYWNlQ2FjaGUgPSBhY3RpdmVOYW1lc3BhY2VDYWNoZTsKICB9Cn07CmV4cG9ydCB2YXIgc3RhdGUgPSBmdW5jdGlvbiBzdGF0ZSgpIHsKICByZXR1cm4gewogICAgbWFuYWdlbWVudFJlYWR5OiBmYWxzZSwKICAgIGNsdXN0ZXJSZWFkeTogZmFsc2UsCiAgICBpc1JhbmNoZXI6IGZhbHNlLAogICAgbmFtZXNwYWNlRmlsdGVyczogW10sCiAgICBhY3RpdmVOYW1lc3BhY2VDYWNoZToge30sCiAgICAvLyBVc2VkIHRvIGVmZmljaWVudGx5IGNoZWNrIGlmIGEgcmVzb3VyY2Ugc2hvdWxkIGJlIGRpc3BsYXllZAogICAgYWN0aXZlTmFtZXNwYWNlQ2FjaGVLZXk6ICcnLAogICAgLy8gRmluZ2VycHJpbnQgb2YgYWN0aXZlTmFtZXNwYWNlQ2FjaGUKICAgIGFsbE5hbWVzcGFjZXM6IFtdLAogICAgYWxsV29ya3NwYWNlczogW10sCiAgICBjbHVzdGVySWQ6IG51bGwsCiAgICBwcm9kdWN0SWQ6IG51bGwsCiAgICB3b3Jrc3BhY2U6IG51bGwsCiAgICBlcnJvcjogbnVsbCwKICAgIGNhbWVGcm9tRXJyb3I6IGZhbHNlLAogICAgcGFnZUFjdGlvbnM6IFtdLAogICAgc2VydmVyVmVyc2lvbjogbnVsbCwKICAgIHN5c3RlbU5hbWVzcGFjZXM6IFtdLAogICAgaXNTaW5nbGVQcm9kdWN0OiB1bmRlZmluZWQsCiAgICBpc1JhbmNoZXJJbkhhcnZlc3RlcjogZmFsc2UsCiAgICB0YXJnZXRSb3V0ZTogbnVsbAogIH07Cn07CmV4cG9ydCB2YXIgZ2V0dGVycyA9IF9vYmplY3RTcHJlYWQoewogIGNsdXN0ZXJSZWFkeTogZnVuY3Rpb24gY2x1c3RlclJlYWR5KHN0YXRlKSB7CiAgICByZXR1cm4gc3RhdGUuY2x1c3RlclJlYWR5ID09PSB0cnVlOwogIH0sCiAgaXNNdWx0aUNsdXN0ZXI6IGZ1bmN0aW9uIGlzTXVsdGlDbHVzdGVyKHN0YXRlLCBnZXR0ZXJzKSB7CiAgICB2YXIgX2NsdXN0ZXJzJDAkbWV0YWRhdGE7CiAgICB2YXIgY2x1c3RlcnMgPSBnZXR0ZXJzWydtYW5hZ2VtZW50L2FsbCddKE1BTkFHRU1FTlQuQ0xVU1RFUik7CiAgICBpZiAoY2x1c3RlcnMubGVuZ3RoID09PSAxICYmICgoX2NsdXN0ZXJzJDAkbWV0YWRhdGEgPSBjbHVzdGVyc1swXS5tZXRhZGF0YSkgPT09IG51bGwgfHwgX2NsdXN0ZXJzJDAkbWV0YWRhdGEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jbHVzdGVycyQwJG1ldGFkYXRhLm5hbWUpID09PSAnbG9jYWwnKSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQogIH0sCiAgaXNSYW5jaGVyOiBmdW5jdGlvbiBpc1JhbmNoZXIoc3RhdGUpIHsKICAgIHJldHVybiBzdGF0ZS5pc1JhbmNoZXIgPT09IHRydWU7CiAgfSwKICBjbHVzdGVySWQ6IGZ1bmN0aW9uIGNsdXN0ZXJJZChzdGF0ZSkgewogICAgcmV0dXJuIHN0YXRlLmNsdXN0ZXJJZDsKICB9LAogIHByb2R1Y3RJZDogZnVuY3Rpb24gcHJvZHVjdElkKHN0YXRlLCBnZXR0ZXJzKSB7CiAgICByZXR1cm4gc3RhdGUucHJvZHVjdElkOwogIH0sCiAgd29ya3NwYWNlOiBmdW5jdGlvbiB3b3Jrc3BhY2Uoc3RhdGUsIGdldHRlcnMpIHsKICAgIHJldHVybiBzdGF0ZS53b3Jrc3BhY2U7CiAgfSwKICBwYWdlQWN0aW9uczogZnVuY3Rpb24gcGFnZUFjdGlvbnMoc3RhdGUpIHsKICAgIHJldHVybiBzdGF0ZS5wYWdlQWN0aW9uczsKICB9LAogIHN5c3RlbU5hbWVzcGFjZXM6IGZ1bmN0aW9uIHN5c3RlbU5hbWVzcGFjZXMoc3RhdGUpIHsKICAgIHJldHVybiBzdGF0ZS5zeXN0ZW1OYW1lc3BhY2VzOwogIH0sCiAgY3VycmVudENsdXN0ZXI6IGZ1bmN0aW9uIGN1cnJlbnRDbHVzdGVyKHN0YXRlLCBnZXR0ZXJzKSB7CiAgICByZXR1cm4gZ2V0dGVyc1snbWFuYWdlbWVudC9ieUlkJ10oTUFOQUdFTUVOVC5DTFVTVEVSLCBzdGF0ZS5jbHVzdGVySWQpOwogIH0sCiAgY3VycmVudFByb2R1Y3Q6IGZ1bmN0aW9uIGN1cnJlbnRQcm9kdWN0KHN0YXRlLCBnZXR0ZXJzKSB7CiAgICB2YXIgYWN0aXZlID0gZ2V0dGVyc1sndHlwZS1tYXAvYWN0aXZlUHJvZHVjdHMnXTsKICAgIHZhciBvdXQgPSBmaW5kQnkoYWN0aXZlLCAnbmFtZScsIHN0YXRlLnByb2R1Y3RJZCk7CiAgICBpZiAoIW91dCkgewogICAgICBvdXQgPSBmaW5kQnkoYWN0aXZlLCAnbmFtZScsIEVYUExPUkVSKTsKICAgIH0KICAgIGlmICghb3V0KSB7CiAgICAgIG91dCA9IGFjdGl2ZVswXTsKICAgIH0KICAgIHJldHVybiBvdXQ7CiAgfSwKICBnZXRTdG9yZU5hbWVCeVByb2R1Y3RJZDogZnVuY3Rpb24gZ2V0U3RvcmVOYW1lQnlQcm9kdWN0SWQoc3RhdGUpIHsKICAgIHZhciBfc3RhdGUkdHlwZU1hcCwgX3JlZjI7CiAgICB2YXIgcHJvZHVjdHMgPSAoX3N0YXRlJHR5cGVNYXAgPSBzdGF0ZVsndHlwZS1tYXAnXSkgPT09IG51bGwgfHwgX3N0YXRlJHR5cGVNYXAgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9zdGF0ZSR0eXBlTWFwLnByb2R1Y3RzOwogICAgcmV0dXJuICgoX3JlZjIgPSBwcm9kdWN0cy5maW5kKGZ1bmN0aW9uIChwKSB7CiAgICAgIHJldHVybiBwLm5hbWUgPT09IHN0YXRlLnByb2R1Y3RJZDsKICAgIH0pIHx8IHt9KSA9PT0gbnVsbCB8fCBfcmVmMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3JlZjIuaW5TdG9yZSkgfHwgJ2NsdXN0ZXInOwogIH0sCiAgY3VycmVudFN0b3JlOiBmdW5jdGlvbiBjdXJyZW50U3RvcmUoc3RhdGUsIGdldHRlcnMpIHsKICAgIHJldHVybiBmdW5jdGlvbiAodHlwZSkgewogICAgICB2YXIgX3Byb2R1Y3QkdHlwZVN0b3JlTWFwOwogICAgICB2YXIgcHJvZHVjdCA9IGdldHRlcnNbJ2N1cnJlbnRQcm9kdWN0J107CiAgICAgIGlmICghcHJvZHVjdCkgewogICAgICAgIHJldHVybiAnY2x1c3Rlcic7CiAgICAgIH0KICAgICAgaWYgKHR5cGUgJiYgKF9wcm9kdWN0JHR5cGVTdG9yZU1hcCA9IHByb2R1Y3QudHlwZVN0b3JlTWFwKSAhPT0gbnVsbCAmJiBfcHJvZHVjdCR0eXBlU3RvcmVNYXAgIT09IHZvaWQgMCAmJiBfcHJvZHVjdCR0eXBlU3RvcmVNYXBbdHlwZV0pIHsKICAgICAgICByZXR1cm4gcHJvZHVjdC50eXBlU3RvcmVNYXBbdHlwZV07CiAgICAgIH0KICAgICAgcmV0dXJuIHByb2R1Y3QuaW5TdG9yZTsKICAgIH07CiAgfSwKICBpc0V4cGxvcmVyOiBmdW5jdGlvbiBpc0V4cGxvcmVyKHN0YXRlLCBnZXR0ZXJzKSB7CiAgICB2YXIgcHJvZHVjdCA9IGdldHRlcnMuY3VycmVudFByb2R1Y3Q7CiAgICBpZiAoIXByb2R1Y3QpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgcmV0dXJuIHByb2R1Y3QubmFtZSA9PT0gRVhQTE9SRVIgfHwgcHJvZHVjdC5pblN0b3JlID09PSAnY2x1c3Rlcic7CiAgfSwKICBkZWZhdWx0Q2x1c3RlcklkOiBmdW5jdGlvbiBkZWZhdWx0Q2x1c3RlcklkKHN0YXRlLCBnZXR0ZXJzKSB7CiAgICB2YXIgYWxsID0gZ2V0dGVyc1snbWFuYWdlbWVudC9hbGwnXShNQU5BR0VNRU5ULkNMVVNURVIpOwogICAgdmFyIGNsdXN0ZXJzID0gc29ydEJ5KGZpbHRlckJ5KGFsbCwgJ2lzUmVhZHknKSwgJ25hbWVEaXNwbGF5Jyk7CiAgICB2YXIgZGVzaXJlZCA9IGdldHRlcnNbJ3ByZWZzL2dldCddKENMVVNURVJfUFJFRik7CiAgICBpZiAoY2x1c3RlcnMuZmluZChmdW5jdGlvbiAoeCkgewogICAgICByZXR1cm4geC5pZCA9PT0gZGVzaXJlZDsKICAgIH0pKSB7CiAgICAgIHJldHVybiBkZXNpcmVkOwogICAgfSBlbHNlIGlmIChjbHVzdGVycy5sZW5ndGgpIHsKICAgICAgcmV0dXJuIGNsdXN0ZXJzWzBdLmlkOwogICAgfQogICAgcmV0dXJuIEJMQU5LX0NMVVNURVI7CiAgfSwKICBpc0FsbE5hbWVzcGFjZXM6IGZ1bmN0aW9uIGlzQWxsTmFtZXNwYWNlcyhzdGF0ZSwgZ2V0dGVycykgewogICAgdmFyIHByb2R1Y3QgPSBnZXR0ZXJzWydjdXJyZW50UHJvZHVjdCddOwogICAgaWYgKCFwcm9kdWN0KSB7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgaWYgKHByb2R1Y3Quc2hvd1dvcmtzcGFjZVN3aXRjaGVyKSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIGlmICghcHJvZHVjdC5zaG93TmFtZXNwYWNlRmlsdGVyICYmICFnZXR0ZXJzWydpc0V4cGxvcmVyJ10pIHsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICByZXR1cm4gc3RhdGUubmFtZXNwYWNlRmlsdGVycy5maWx0ZXIoZnVuY3Rpb24gKHgpIHsKICAgICAgcmV0dXJuICEiIi5jb25jYXQoeCkuc3RhcnRzV2l0aChOQU1FU1BBQ0VEX1BSRUZJWCk7CiAgICB9KS5sZW5ndGggPT09IDA7CiAgfSwKICBpc011bHRpcGxlTmFtZXNwYWNlczogZnVuY3Rpb24gaXNNdWx0aXBsZU5hbWVzcGFjZXMoc3RhdGUsIGdldHRlcnMpIHsKICAgIHZhciBwcm9kdWN0ID0gZ2V0dGVyc1snY3VycmVudFByb2R1Y3QnXTsKICAgIGlmICghcHJvZHVjdCkgewogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIGlmIChwcm9kdWN0LnNob3dXb3Jrc3BhY2VTd2l0Y2hlcikgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgICBpZiAoZ2V0dGVycy5pc0FsbE5hbWVzcGFjZXMpIHsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICB2YXIgZmlsdGVycyA9IHN0YXRlLm5hbWVzcGFjZUZpbHRlcnM7CiAgICBpZiAoZmlsdGVycy5sZW5ndGggIT09IDEpIHsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICByZXR1cm4gIWZpbHRlcnNbMF0uc3RhcnRzV2l0aChOQU1FU1BBQ0VfRklMVEVSX05TX0ZVTExfUFJFRklYKTsKICB9LAogIG5hbWVzcGFjZUZpbHRlcnM6IGZ1bmN0aW9uIG5hbWVzcGFjZUZpbHRlcnMoc3RhdGUpIHsKICAgIHZhciBmaWx0ZXJzID0gc3RhdGUubmFtZXNwYWNlRmlsdGVycy5maWx0ZXIoZnVuY3Rpb24gKHgpIHsKICAgICAgcmV0dXJuICEheCAmJiAhIiIuY29uY2F0KHgpLnN0YXJ0c1dpdGgoTkFNRVNQQUNFRF9QUkVGSVgpOwogICAgfSk7CiAgICByZXR1cm4gZmlsdGVyczsKICB9LAogIG5hbWVzcGFjZU1vZGU6IGZ1bmN0aW9uIG5hbWVzcGFjZU1vZGUoc3RhdGUsIGdldHRlcnMpIHsKICAgIHZhciBmaWx0ZXJzID0gc3RhdGUubmFtZXNwYWNlRmlsdGVyczsKICAgIHZhciBwcm9kdWN0ID0gZ2V0dGVyc1snY3VycmVudFByb2R1Y3QnXTsKICAgIGlmICghKHByb2R1Y3QgIT09IG51bGwgJiYgcHJvZHVjdCAhPT0gdm9pZCAwICYmIHByb2R1Y3Quc2hvd05hbWVzcGFjZUZpbHRlcikpIHsKICAgICAgcmV0dXJuIEJPVEg7CiAgICB9CgogICAgLy8gRXhwbGljaXRseSBhc2tpbmcKICAgIGlmIChmaWx0ZXJzLmluY2x1ZGVzKE5BTUVTUEFDRURfWUVTKSkgewogICAgICByZXR1cm4gTkFNRVNQQUNFRDsKICAgIH0gZWxzZSBpZiAoZmlsdGVycy5pbmNsdWRlcyhOQU1FU1BBQ0VEX05PKSkgewogICAgICByZXR1cm4gQ0xVU1RFUl9MRVZFTDsKICAgIH0KICAgIHZhciBieUtpbmQgPSB7fTsKICAgIHZhciBfaXRlcmF0b3IzID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIoZmlsdGVycyksCiAgICAgIF9zdGVwMzsKICAgIHRyeSB7CiAgICAgIGZvciAoX2l0ZXJhdG9yMy5zKCk7ICEoX3N0ZXAzID0gX2l0ZXJhdG9yMy5uKCkpLmRvbmU7KSB7CiAgICAgICAgdmFyIGZpbHRlciA9IF9zdGVwMy52YWx1ZTsKICAgICAgICB2YXIgdHlwZSA9IGZpbHRlci5zcGxpdCgnOi8vJywgMilbMF07CiAgICAgICAgYnlLaW5kW3R5cGVdID0gKGJ5S2luZFt0eXBlXSB8fCAwKSArIDE7CiAgICAgIH0KICAgIH0gY2F0Y2ggKGVycikgewogICAgICBfaXRlcmF0b3IzLmUoZXJyKTsKICAgIH0gZmluYWxseSB7CiAgICAgIF9pdGVyYXRvcjMuZigpOwogICAgfQogICAgaWYgKGJ5S2luZFsncHJvamVjdCddID4gMCB8fCBieUtpbmRbJ25zJ10gPiAwKSB7CiAgICAgIHJldHVybiBOQU1FU1BBQ0VEOwogICAgfQogICAgcmV0dXJuIEJPVEg7CiAgfSwKICBhY3RpdmVOYW1lc3BhY2VDYWNoZTogZnVuY3Rpb24gYWN0aXZlTmFtZXNwYWNlQ2FjaGUoc3RhdGUpIHsKICAgIC8vIFRoZSBhY3RpdmVOYW1lc3BhY2VDYWNoZSB2YWx1ZSBpcyB1cGRhdGVkIGJ5IHRoZQogICAgLy8gdXBkYXRlTmFtZXNwYWNlcyBtdXRhdGlvbi4gV2UgdXNlIHRoaXMgbWFwIHRvIGZpbHRlciB3b3JrbG9hZHMKICAgIC8vIGFzIHdlIGRvbid0IHdhbnQgdG8gcmVjb21wdXRlIHRoZSBhY3RpdmUgbmFtZXNwYWNlcwogICAgLy8gZm9yIGVhY2ggd29ya2xvYWQgaW4gYSBsaXN0LgogICAgcmV0dXJuIHN0YXRlLmFjdGl2ZU5hbWVzcGFjZUNhY2hlOwogIH0sCiAgYWN0aXZlTmFtZXNwYWNlQ2FjaGVLZXk6IGZ1bmN0aW9uIGFjdGl2ZU5hbWVzcGFjZUNhY2hlS2V5KHN0YXRlKSB7CiAgICByZXR1cm4gc3RhdGUuYWN0aXZlTmFtZXNwYWNlQ2FjaGVLZXk7CiAgfSwKICBhY3RpdmVOYW1lc3BhY2VGaWx0ZXJzOiBmdW5jdGlvbiBhY3RpdmVOYW1lc3BhY2VGaWx0ZXJzKHN0YXRlKSB7CiAgICByZXR1cm4gc3RhdGUubmFtZXNwYWNlRmlsdGVyczsKICB9LAogIGFsbE5hbWVzcGFjZXM6IGZ1bmN0aW9uIGFsbE5hbWVzcGFjZXMoc3RhdGUpIHsKICAgIHJldHVybiBzdGF0ZS5hbGxOYW1lc3BhY2VzOwogIH0sCiAgbmFtZXNwYWNlczogZnVuY3Rpb24gbmFtZXNwYWNlcyhzdGF0ZSwgZ2V0dGVycykgewogICAgLy8gQ2FsbCB0aGlzIGdldHRlciBpZiB5b3Ugd2FudCB0byByZWNvbXB1dGUgdGhlIGFjdGl2ZSBuYW1lc3BhY2VzCiAgICAvLyBieSBsb29waW5nIG92ZXIgYWxsIG5hbWVzcGFjZXMgaW4gYSBjbHVzdGVyLiBPdGhlcndpc2UgY2FsbCBhY3RpdmVOYW1lc3BhY2VDYWNoZSwKICAgIC8vIHdoaWNoIHJldHVybnMgdGhlIHNhbWUgb2JqZWN0IGJ1dCBpcyBvbmx5IHJlY29tcHV0ZWQgd2hlbiB0aGUgdXBkYXRlTmFtZXNwYWNlcwogICAgLy8gbXV0YXRpb24gaXMgY2FsbGVkLgogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIGdldEFjdGl2ZU5hbWVzcGFjZXMoc3RhdGUsIGdldHRlcnMpOwogICAgfTsKICB9LAogIC8qKgogICAqIFJldHVybiBuYW1lc3BhY2VzIHdoaWNoIHRoZSB1c2VyIGNhbiByZWZlciB0byBjcmVhdGUgcmVzb3VyY2VzCiAgICogQHJldHVybnMgUmVjb3JkPHN0cmluZywgdHJ1ZT4KICAgKi8KICBhbGxvd2VkTmFtZXNwYWNlczogZnVuY3Rpb24gYWxsb3dlZE5hbWVzcGFjZXMoc3RhdGUsIGdldHRlcnMpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBnZXRBY3RpdmVOYW1lc3BhY2VzKHN0YXRlLCBnZXR0ZXJzLCB0cnVlKTsKICAgIH07CiAgfSwKICBkZWZhdWx0TmFtZXNwYWNlOiBmdW5jdGlvbiBkZWZhdWx0TmFtZXNwYWNlKHN0YXRlLCBnZXR0ZXJzLCByb290U3RhdGUsIHJvb3RHZXR0ZXJzKSB7CiAgICB2YXIgcHJvZHVjdCA9IGdldHRlcnNbJ2N1cnJlbnRQcm9kdWN0J107CiAgICBpZiAoIXByb2R1Y3QpIHsKICAgICAgcmV0dXJuICdkZWZhdWx0JzsKICAgIH0KICAgIHZhciBpblN0b3JlID0gcHJvZHVjdC5pblN0b3JlOwogICAgdmFyIGZpbHRlcmVkTWFwID0gZ2V0dGVyc1snYWN0aXZlTmFtZXNwYWNlQ2FjaGUnXTsKICAgIHZhciBpc0FsbCA9IGdldHRlcnNbJ2lzQWxsTmFtZXNwYWNlcyddOwogICAgdmFyIGFsbCA9IGdldHRlcnNbIiIuY29uY2F0KGluU3RvcmUsICIvYWxsIildKE5BTUVTUEFDRSkubWFwKGZ1bmN0aW9uICh4KSB7CiAgICAgIHJldHVybiB4LmlkOwogICAgfSk7CiAgICB2YXIgb3V0OwogICAgZnVuY3Rpb24gaXNPaygpIHsKICAgICAgaWYgKCFvdXQpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgcmV0dXJuIGlzQWxsICYmIGFsbC5pbmNsdWRlcyhvdXQpIHx8ICFpc0FsbCAmJiBmaWx0ZXJlZE1hcCAmJiBmaWx0ZXJlZE1hcFtvdXRdOwogICAgfQogICAgb3V0ID0gcm9vdEdldHRlcnNbJ3ByZWZzL2dldCddKExBU1RfTkFNRVNQQUNFKTsKICAgIGlmIChpc09rKCkpIHsKICAgICAgcmV0dXJuIG91dDsKICAgIH0KICAgIG91dCA9ICdkZWZhdWx0JzsKICAgIGlmIChpc09rKCkpIHsKICAgICAgcmV0dXJuIG91dDsKICAgIH0KICAgIGlmICghaXNBbGwpIHsKICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhmaWx0ZXJlZE1hcCk7CiAgICAgIGlmIChrZXlzLmxlbmd0aCkgewogICAgICAgIHJldHVybiBrZXlzWzBdOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gYWxsWzBdOwogIH0sCiAgYmFja1RvUmFuY2hlckdsb2JhbExpbms6IGZ1bmN0aW9uIGJhY2tUb1JhbmNoZXJHbG9iYWxMaW5rKHN0YXRlKSB7CiAgICB2YXIgbGluayA9ICcvZyc7CiAgICBpZiAocHJvY2Vzcy5lbnYuZGV2KSB7CiAgICAgIGxpbmsgPSAiaHR0cHM6Ly9sb2NhbGhvc3Q6ODAwMCIuY29uY2F0KGxpbmspOwogICAgfQogICAgcmV0dXJuIGxpbms7CiAgfSwKICBiYWNrVG9SYW5jaGVyTGluazogZnVuY3Rpb24gYmFja1RvUmFuY2hlckxpbmsoc3RhdGUpIHsKICAgIHZhciBjbHVzdGVySWQgPSBzdGF0ZS5jbHVzdGVySWQ7CiAgICB2YXIgbGluayA9ICcvZyc7CiAgICBpZiAoY2x1c3RlcklkKSB7CiAgICAgIGxpbmsgPSAiL2MvIi5jb25jYXQoZXNjYXBlKGNsdXN0ZXJJZCkpOwogICAgfQogICAgaWYgKHByb2Nlc3MuZW52LmRldikgewogICAgICBsaW5rID0gImh0dHBzOi8vbG9jYWxob3N0OjgwMDAiLmNvbmNhdChsaW5rKTsKICAgIH0KICAgIHJldHVybiBsaW5rOwogIH0sCiAgcmFuY2hlckxpbms6IGZ1bmN0aW9uIHJhbmNoZXJMaW5rKGdldHRlcnMpIHsKICAgIGlmIChwcm9jZXNzLmVudi5kZXYpIHsKICAgICAgcmV0dXJuICJodHRwczovL2xvY2FsaG9zdDo4MDAwLyI7CiAgICB9CiAgICByZXR1cm4gJy8nOwogIH0sCiAgaXNTaW5nbGVQcm9kdWN0OiBmdW5jdGlvbiBpc1NpbmdsZVByb2R1Y3Qoc3RhdGUpIHsKICAgIGlmIChzdGF0ZS5pc1NpbmdsZVByb2R1Y3QgIT09IHVuZGVmaW5lZCkgewogICAgICByZXR1cm4gc3RhdGUuaXNTaW5nbGVQcm9kdWN0OwogICAgfQogICAgcmV0dXJuIGZhbHNlOwogIH0sCiAgaXNSYW5jaGVySW5IYXJ2ZXN0ZXI6IGZ1bmN0aW9uIGlzUmFuY2hlckluSGFydmVzdGVyKHN0YXRlKSB7CiAgICByZXR1cm4gc3RhdGUuaXNSYW5jaGVySW5IYXJ2ZXN0ZXI7CiAgfSwKICBpc1ZpcnR1YWxDbHVzdGVyOiBmdW5jdGlvbiBpc1ZpcnR1YWxDbHVzdGVyKHN0YXRlLCBnZXR0ZXJzKSB7CiAgICB2YXIgX2NsdXN0ZXIkc3RhdHVzOwogICAgdmFyIGNsdXN0ZXIgPSBnZXR0ZXJzWydjdXJyZW50Q2x1c3RlciddOwogICAgcmV0dXJuIChjbHVzdGVyID09PSBudWxsIHx8IGNsdXN0ZXIgPT09IHZvaWQgMCB8fCAoX2NsdXN0ZXIkc3RhdHVzID0gY2x1c3Rlci5zdGF0dXMpID09PSBudWxsIHx8IF9jbHVzdGVyJHN0YXR1cyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2NsdXN0ZXIkc3RhdHVzLnByb3ZpZGVyKSA9PT0gVklSVFVBTF9IQVJWRVNURVJfUFJPVklERVI7CiAgfSwKICBpc1N0YW5kYWxvbmVIYXJ2ZXN0ZXI6IGZ1bmN0aW9uIGlzU3RhbmRhbG9uZUhhcnZlc3RlcihzdGF0ZSwgZ2V0dGVycykgewogICAgdmFyIGNsdXN0ZXJzID0gZ2V0dGVyc1snbWFuYWdlbWVudC9hbGwnXShNQU5BR0VNRU5ULkNMVVNURVIpOwogICAgdmFyIGNsdXN0ZXIgPSBjbHVzdGVycy5maW5kKGZ1bmN0aW9uIChjKSB7CiAgICAgIHJldHVybiBjLmlkID09PSAnbG9jYWwnOwogICAgfSkgfHwge307CiAgICByZXR1cm4gZ2V0dGVyc1snaXNTaW5nbGVQcm9kdWN0J10gJiYgY2x1c3Rlci5pc0hhcnZlc3RlciAmJiAhZ2V0dGVyc1snaXNSYW5jaGVySW5IYXJ2ZXN0ZXInXTsKICB9LAogIHNob3dUb3BMZXZlbE1lbnU6IGZ1bmN0aW9uIHNob3dUb3BMZXZlbE1lbnUoZ2V0dGVycykgewogICAgcmV0dXJuIGdldHRlcnNbJ2lzUmFuY2hlckluSGFydmVzdGVyJ10gfHwgZ2V0dGVyc1snaXNNdWx0aUNsdXN0ZXInXSB8fCAhZ2V0dGVyc1snaXNTaW5nbGVQcm9kdWN0J107CiAgfSwKICB0YXJnZXRSb3V0ZTogZnVuY3Rpb24gdGFyZ2V0Um91dGUoc3RhdGUpIHsKICAgIHJldHVybiBzdGF0ZS50YXJnZXRSb3V0ZTsKICB9LAogIHJlbGVhc2VOb3Rlc1VybDogZnVuY3Rpb24gcmVsZWFzZU5vdGVzVXJsKHN0YXRlLCBnZXR0ZXJzKSB7CiAgICB2YXIgX2dldHRlcnMkbWFuYWdlbWVudEI7CiAgICB2YXIgdmVyc2lvbiA9IChfZ2V0dGVycyRtYW5hZ2VtZW50QiA9IGdldHRlcnNbJ21hbmFnZW1lbnQvYnlJZCddKE1BTkFHRU1FTlQuU0VUVElORywgJ3NlcnZlci12ZXJzaW9uJykpID09PSBudWxsIHx8IF9nZXR0ZXJzJG1hbmFnZW1lbnRCID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZ2V0dGVycyRtYW5hZ2VtZW50Qi52YWx1ZTsKICAgIHZhciBiYXNlID0gJ2h0dHBzOi8vZ2l0aHViLmNvbS9yYW5jaGVyL3JhbmNoZXIvcmVsZWFzZXMnOwogICAgaWYgKHZlcnNpb24gJiYgIWlzRGV2QnVpbGQodmVyc2lvbikpIHsKICAgICAgcmV0dXJuICIiLmNvbmNhdChiYXNlLCAiL3RhZy8iKS5jb25jYXQodmVyc2lvbik7CiAgICB9CiAgICByZXR1cm4gIiIuY29uY2F0KGJhc2UsICIvbGF0ZXN0Iik7CiAgfQp9LCBnY0dldHRlcnMpOwpleHBvcnQgdmFyIG11dGF0aW9ucyA9IHsKICBtYW5hZ2VtZW50Q2hhbmdlZDogZnVuY3Rpb24gbWFuYWdlbWVudENoYW5nZWQoc3RhdGUsIF9yZWYzKSB7CiAgICB2YXIgcmVhZHkgPSBfcmVmMy5yZWFkeSwKICAgICAgaXNSYW5jaGVyID0gX3JlZjMuaXNSYW5jaGVyOwogICAgc3RhdGUubWFuYWdlbWVudFJlYWR5ID0gcmVhZHk7CiAgICBzdGF0ZS5pc1JhbmNoZXIgPSBpc1JhbmNoZXI7CiAgfSwKICBjbHVzdGVyUmVhZHk6IGZ1bmN0aW9uIGNsdXN0ZXJSZWFkeShzdGF0ZSwgcmVhZHkpIHsKICAgIHN0YXRlLmNsdXN0ZXJSZWFkeSA9IHJlYWR5OwogIH0sCiAgaXNSYW5jaGVySW5IYXJ2ZXN0ZXI6IGZ1bmN0aW9uIGlzUmFuY2hlckluSGFydmVzdGVyKHN0YXRlLCBuZXUpIHsKICAgIHN0YXRlLmlzUmFuY2hlckluSGFydmVzdGVyID0gbmV1OwogIH0sCiAgdXBkYXRlTmFtZXNwYWNlczogZnVuY3Rpb24gdXBkYXRlTmFtZXNwYWNlcyhzdGF0ZSwgX3JlZjQpIHsKICAgIHZhciBmaWx0ZXJzID0gX3JlZjQuZmlsdGVycywKICAgICAgYWxsID0gX3JlZjQuYWxsLAogICAgICBnZXR0ZXJzID0gX3JlZjQuZ2V0dGVyczsKICAgIHN0YXRlLm5hbWVzcGFjZUZpbHRlcnMgPSBmaWx0ZXJzLmZpbHRlcihmdW5jdGlvbiAoeCkgewogICAgICByZXR1cm4gISF4OwogICAgfSk7CiAgICBpZiAoYWxsKSB7CiAgICAgIHN0YXRlLmFsbE5hbWVzcGFjZXMgPSBhbGw7CiAgICB9CiAgICAvLyBDcmVhdGUgbWFwIHRoYXQgY2FuIGJlIHVzZWQgdG8gZWZmaWNpZW50bHkgY2hlY2sgaWYgYQogICAgLy8gcmVzb3VyY2Ugc2hvdWxkIGJlIGRpc3BsYXllZAogICAgZ2V0QWN0aXZlTmFtZXNwYWNlcyhzdGF0ZSwgZ2V0dGVycyk7CiAgfSwKICBjaGFuZ2VBbGxOYW1lc3BhY2VzOiBmdW5jdGlvbiBjaGFuZ2VBbGxOYW1lc3BhY2VzKHN0YXRlLCBuYW1lc3BhY2UpIHsKICAgIC8vIGBhbGxOYW1lc3BhY2VzL2NoYW5nZUFsbE5hbWVzcGFjZXNgIGFsbG93IHByb2R1Y3RzIHRvIHJlc3RyaWN0IHRoZSBuYW1lc3BhY2VzIHNob3duIHRvIHRoZSB1c2VyIGluIHRoZSBOYW1lc3BhY2VGaWx0ZXIgYW5kIE5hbWVOc0Rlc2NyaXB0aW9uIGNvbXBvbmVudHMuCiAgICAvLyBZb3UgY2FuIGNvbmZpZ3VyZSB0aGUgYG5vdEZpbHRlck5hbWVzcGFjZWAgcGFyYW1ldGVyIGZvciBlYWNoIHJlc291cmNlIHBhZ2UgdG8gZGVmaW5lIG5hbWVzcGFjZXMgdGhhdCBkbyBub3QgbmVlZCB0byBiZSBmaWx0ZXJlZCwgIGFuZCB0aGVuIGNoYW5nZSBgYWxsTmFtZXNwYWNlc2AgYnkgY2FsbGluZyBgY2hhbmdlQWxsTmFtZXNwYWNlc2AKICAgIC8vIGVnOgogICAgLy8gY29uc3Qgbm90RmlsdGVyTmFtZXNwYWNlcyA9IHRoaXMuJHN0b3JlLmdldHRlcnNbYHR5cGUtbWFwL29wdGlvbnNGb3JgXShyZXNvdXJjZSkubm90RmlsdGVyTmFtZXNwYWNlIHx8IFtdOwogICAgLy8gY29uc3QgYWxsTmFtZXNwYWNlcyA9IHRoaXMuJHN0b3JlLmdldHRlcnNbYCR7IHRoaXMuY3VycmVudFByb2R1Y3QuaW5TdG9yZSB9L2ZpbHRlck5hbWVzcGFjZWBdKG5vdEZpbHRlck5hbWVzcGFjZXMpOwogICAgc3RhdGUuYWxsTmFtZXNwYWNlcyA9IG5hbWVzcGFjZTsKICB9LAogIHBhZ2VBY3Rpb25zOiBmdW5jdGlvbiBwYWdlQWN0aW9ucyhzdGF0ZSwgX3BhZ2VBY3Rpb25zKSB7CiAgICBzdGF0ZS5wYWdlQWN0aW9ucyA9IF9wYWdlQWN0aW9uczsKICB9LAogIHVwZGF0ZVdvcmtzcGFjZTogZnVuY3Rpb24gdXBkYXRlV29ya3NwYWNlKHN0YXRlLCBfcmVmNSkgewogICAgdmFyIHZhbHVlID0gX3JlZjUudmFsdWUsCiAgICAgIGFsbCA9IF9yZWY1LmFsbCwKICAgICAgZ2V0dGVycyA9IF9yZWY1LmdldHRlcnM7CiAgICBpZiAoYWxsKSB7CiAgICAgIHN0YXRlLmFsbFdvcmtzcGFjZXMgPSBhbGw7CiAgICAgIGlmIChmaW5kQnkoYWxsLCAnaWQnLCB2YWx1ZSkpIHsKICAgICAgICAvLyBUaGUgdmFsdWUgaXMgYSB2YWxpZCBvcHRpb24sIGdvb2QKICAgICAgfSBlbHNlIGlmIChmaW5kQnkoYWxsLCAnaWQnLCBERUZBVUxUX1dPUktTUEFDRSkpIHsKICAgICAgICAvLyBIb3cgYWJvdXQgdGhlIGRlZmF1bHQKICAgICAgICB2YWx1ZSA9IERFRkFVTFRfV09SS1NQQUNFOwogICAgICB9IGVsc2UgaWYgKGFsbC5sZW5ndGgpIHsKICAgICAgICB2YWx1ZSA9IGFsbFswXS5pZDsKICAgICAgfQogICAgfQogICAgc3RhdGUud29ya3NwYWNlID0gdmFsdWU7CiAgICBnZXRBY3RpdmVOYW1lc3BhY2VzKHN0YXRlLCBnZXR0ZXJzKTsKICB9LAogIGNsdXN0ZXJJZDogZnVuY3Rpb24gY2x1c3RlcklkKHN0YXRlLCBuZXUpIHsKICAgIHN0YXRlLmNsdXN0ZXJJZCA9IG5ldTsKICB9LAogIHNldFByb2R1Y3Q6IGZ1bmN0aW9uIHNldFByb2R1Y3Qoc3RhdGUsIG5ldSkgewogICAgc3RhdGUucHJvZHVjdElkID0gbmV1OwogIH0sCiAgc2V0RXJyb3I6IGZ1bmN0aW9uIHNldEVycm9yKHN0YXRlLCBfcmVmNikgewogICAgdmFyIG9iaiA9IF9yZWY2LmVycm9yLAogICAgICBsb2NhdGlvbkVycm9yID0gX3JlZjYubG9jYXRpb25FcnJvcjsKICAgIHZhciBlcnIgPSBuZXcgQXBpRXJyb3Iob2JqKTsKICAgIGNvbnNvbGUubG9nKCdMb2FkaW5nIGVycm9yJywgZXJyKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1jb25zb2xlCiAgICBjb25zb2xlLmxvZygnKGFjdHVhbCBlcnJvciknLCBvYmopOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnNvbGUKICAgIC8vIExvY2F0aW9uIG9mIGVycm9yLCB3aXRoIGRlc2NyaXB0aW9uIGFuZCBzdGFjayB0cmFjZQogICAgY29uc29sZS5sb2coJ0xvYWRpbmcgZXJyb3IgbG9jYXRpb24nLCBsb2NhdGlvbkVycm9yKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1jb25zb2xlCiAgICBjb25zb2xlLmxvZygnTG9hZGluZyBvcmlnaW5hbCBlcnJvcicsIG9iaik7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc29sZQoKICAgIHN0YXRlLmVycm9yID0gZXJyOwogICAgc3RhdGUuY2FtZUZyb21FcnJvciA9IHRydWU7CiAgfSwKICBjYW1lRnJvbUVycm9yOiBmdW5jdGlvbiBjYW1lRnJvbUVycm9yKHN0YXRlKSB7CiAgICBzdGF0ZS5jYW1lRnJvbUVycm9yID0gdHJ1ZTsKICB9LAogIHNldFNlcnZlclZlcnNpb246IGZ1bmN0aW9uIHNldFNlcnZlclZlcnNpb24oc3RhdGUsIHZlcnNpb24pIHsKICAgIHN0YXRlLnNlcnZlclZlcnNpb24gPSB2ZXJzaW9uOwogIH0sCiAgc2V0U3lzdGVtTmFtZXNwYWNlczogZnVuY3Rpb24gc2V0U3lzdGVtTmFtZXNwYWNlcyhzdGF0ZSwgbmFtZXNwYWNlcykgewogICAgc3RhdGUuc3lzdGVtTmFtZXNwYWNlcyA9IG5hbWVzcGFjZXM7CiAgfSwKICBzZXRJc1NpbmdsZVByb2R1Y3Q6IGZ1bmN0aW9uIHNldElzU2luZ2xlUHJvZHVjdChzdGF0ZSwgaXNTaW5nbGVQcm9kdWN0KSB7CiAgICBzdGF0ZS5pc1NpbmdsZVByb2R1Y3QgPSBpc1NpbmdsZVByb2R1Y3Q7CiAgfSwKICB0YXJnZXRSb3V0ZTogZnVuY3Rpb24gdGFyZ2V0Um91dGUoc3RhdGUsIHJvdXRlKSB7CiAgICBzdGF0ZS50YXJnZXRSb3V0ZSA9IHJvdXRlOwogIH0KfTsKZXhwb3J0IHZhciBhY3Rpb25zID0gX29iamVjdFNwcmVhZCh7CiAgbG9hZE1hbmFnZW1lbnQ6IGZ1bmN0aW9uIGxvYWRNYW5hZ2VtZW50KF9yZWY3KSB7CiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgdmFyIF9mbGVldFNjaGVtYSRsaW5rcywgX3JlcyRjbHVzdGVycywgX3JlcyRzZXR0aW5ncywgX3JlcyRzZXR0aW5nczIsIF9yZXMkc2V0dGluZ3MzOwogICAgICB2YXIgZ2V0dGVycywgc3RhdGUsIGNvbW1pdCwgZGlzcGF0Y2gsIHJvb3RHZXR0ZXJzLCByZXMsIHByb21pc2VzLCBpc1JhbmNoZXIsIGZsZWV0U2NoZW1hLCBpc011bHRpQ2x1c3RlciwgbG9jYWxDbHVzdGVyLCBoYXJ2ZXN0ZXJTZXR0aW5nLCByYW5jaGVyTWFuYWdlclN1cHBvcnQsIGlzUmFuY2hlckluSGFydmVzdGVyLCBwbCwgYnJhbmQsIHN5c3RlbU5hbWVzcGFjZXMsIF9yZWY4LCBuYW1lc3BhY2U7CiAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBnZXR0ZXJzID0gX3JlZjcuZ2V0dGVycywgc3RhdGUgPSBfcmVmNy5zdGF0ZSwgY29tbWl0ID0gX3JlZjcuY29tbWl0LCBkaXNwYXRjaCA9IF9yZWY3LmRpc3BhdGNoLCByb290R2V0dGVycyA9IF9yZWY3LnJvb3RHZXR0ZXJzOwogICAgICAgICAgICBpZiAoIXN0YXRlLm1hbmFnZW1lbnRSZWFkeSkgewogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwogICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICBjb25zb2xlLmxvZygnTG9hZGluZyBtYW5hZ2VtZW50Li4uJyk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc29sZQogICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gNDsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDc7CiAgICAgICAgICAgIHJldHVybiBkaXNwYXRjaCgncmFuY2hlci9maW5kQWxsJywgewogICAgICAgICAgICAgIHR5cGU6IE5PUk1BTi5QUklOQ0lQQUwsCiAgICAgICAgICAgICAgb3B0OiB7CiAgICAgICAgICAgICAgICB1cmw6ICdwcmluY2lwYWxzJwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSA5OwogICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDQpOwogICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEzOwogICAgICAgICAgICByZXR1cm4gYWxsSGFzaFNldHRsZWQoewogICAgICAgICAgICAgIG1nbXRTdWJzY3JpYmU6IGRpc3BhdGNoKCdtYW5hZ2VtZW50L3N1YnNjcmliZScpLAogICAgICAgICAgICAgIG1nbXRTY2hlbWFzOiBkaXNwYXRjaCgnbWFuYWdlbWVudC9sb2FkU2NoZW1hcycsIHRydWUpLAogICAgICAgICAgICAgIHJhbmNoZXJTY2hlbWFzOiBkaXNwYXRjaCgncmFuY2hlci9sb2FkU2NoZW1hcycsIHRydWUpCiAgICAgICAgICAgIH0pOwogICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgcmVzID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgcHJvbWlzZXMgPSB7CiAgICAgICAgICAgICAgLy8gQ2x1c3RlcnMgZ3VhcmFudGVlZCBhbHdheXMgYXZhaWxhYmxlIG9yIHlvdXIgbW9uZXkgYmFjawogICAgICAgICAgICAgIGNsdXN0ZXJzOiBkaXNwYXRjaCgnbWFuYWdlbWVudC9maW5kQWxsJywgewogICAgICAgICAgICAgICAgdHlwZTogTUFOQUdFTUVOVC5DTFVTVEVSCiAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgLy8gRmVhdHVyZXMgY2hlY2tzIG9uIGl0cyBvd24gaWYgdGhleSBhcmUgYXZhaWxhYmxlCiAgICAgICAgICAgICAgZmVhdHVyZXM6IGRpc3BhdGNoKCdmZWF0dXJlcy9sb2FkU2VydmVyJykKICAgICAgICAgICAgfTsKICAgICAgICAgICAgaXNSYW5jaGVyID0gcmVzLnJhbmNoZXJTY2hlbWFzLnN0YXR1cyA9PT0gJ2Z1bGZpbGxlZCcgJiYgISFnZXR0ZXJzWydtYW5hZ2VtZW50L3NjaGVtYUZvciddKE1BTkFHRU1FTlQuUFJPSkVDVCk7CiAgICAgICAgICAgIGlmIChpc1JhbmNoZXIpIHsKICAgICAgICAgICAgICBwcm9taXNlc1sncHJlZnMnXSA9IGRpc3BhdGNoKCdwcmVmcy9sb2FkU2VydmVyJyk7CiAgICAgICAgICAgICAgcHJvbWlzZXNbJ3JhbmNoZXJTdWJzY3JpYmUnXSA9IGRpc3BhdGNoKCdyYW5jaGVyL3N1YnNjcmliZScpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChnZXR0ZXJzWydtYW5hZ2VtZW50L3NjaGVtYUZvciddKENPVU5UKSkgewogICAgICAgICAgICAgIHByb21pc2VzWydjb3VudHMnXSA9IGRpc3BhdGNoKCdtYW5hZ2VtZW50L2ZpbmRBbGwnLCB7CiAgICAgICAgICAgICAgICB0eXBlOiBDT1VOVAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChnZXR0ZXJzWydtYW5hZ2VtZW50L2Nhbkxpc3QnXShNQU5BR0VNRU5ULlNFVFRJTkcpKSB7CiAgICAgICAgICAgICAgcHJvbWlzZXNbJ3NldHRpbmdzJ10gPSBkaXNwYXRjaCgnbWFuYWdlbWVudC9maW5kQWxsJywgewogICAgICAgICAgICAgICAgdHlwZTogTUFOQUdFTUVOVC5TRVRUSU5HCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGdldHRlcnNbJ21hbmFnZW1lbnQvc2NoZW1hRm9yJ10oTkFNRVNQQUNFKSkgewogICAgICAgICAgICAgIHByb21pc2VzWyduYW1lc3BhY2VzJ10gPSBkaXNwYXRjaCgnbWFuYWdlbWVudC9maW5kQWxsJywgewogICAgICAgICAgICAgICAgdHlwZTogTkFNRVNQQUNFCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZmxlZXRTY2hlbWEgPSBnZXR0ZXJzWydtYW5hZ2VtZW50L3NjaGVtYUZvciddKEZMRUVULldPUktTUEFDRSk7CiAgICAgICAgICAgIGlmIChmbGVldFNjaGVtYSAhPT0gbnVsbCAmJiBmbGVldFNjaGVtYSAhPT0gdm9pZCAwICYmIChfZmxlZXRTY2hlbWEkbGlua3MgPSBmbGVldFNjaGVtYS5saW5rcykgIT09IG51bGwgJiYgX2ZsZWV0U2NoZW1hJGxpbmtzICE9PSB2b2lkIDAgJiYgX2ZsZWV0U2NoZW1hJGxpbmtzLmNvbGxlY3Rpb24pIHsKICAgICAgICAgICAgICBwcm9taXNlc1snd29ya3NwYWNlcyddID0gZGlzcGF0Y2goJ21hbmFnZW1lbnQvZmluZEFsbCcsIHsKICAgICAgICAgICAgICAgIHR5cGU6IEZMRUVULldPUktTUEFDRQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyNDsKICAgICAgICAgICAgcmV0dXJuIGFsbEhhc2gocHJvbWlzZXMpOwogICAgICAgICAgY2FzZSAyNDoKICAgICAgICAgICAgcmVzID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgZGlzcGF0Y2goJ2kxOG4vaW5pdCcpOwogICAgICAgICAgICBpc011bHRpQ2x1c3RlciA9IGdldHRlcnNbJ2lzTXVsdGlDbHVzdGVyJ107IC8vIElmIHRoZSBsb2NhbCBjbHVzdGVyIGlzIGEgSGFydmVzdGVyIGNsdXN0ZXIgYW5kICdyYW5jaGVyLW1hbmFnZXItc3VwcG9ydCcgaXMgdHJ1ZSwgaXQgbWVhbnMgdGhhdCB0aGUgZW1iZWRkZWQgUmFuY2hlciBpcyBiZWluZyB1c2VkLgogICAgICAgICAgICBsb2NhbENsdXN0ZXIgPSAoX3JlcyRjbHVzdGVycyA9IHJlcy5jbHVzdGVycykgPT09IG51bGwgfHwgX3JlcyRjbHVzdGVycyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3JlcyRjbHVzdGVycy5maW5kKGZ1bmN0aW9uIChjKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGMuaWQgPT09ICdsb2NhbCc7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBpZiAoIShsb2NhbENsdXN0ZXIgIT09IG51bGwgJiYgbG9jYWxDbHVzdGVyICE9PSB2b2lkIDAgJiYgbG9jYWxDbHVzdGVyLmlzSGFydmVzdGVyKSkgewogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzNTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzE7CiAgICAgICAgICAgIHJldHVybiBkaXNwYXRjaCgnY2x1c3Rlci9maW5kQWxsJywgewogICAgICAgICAgICAgIHR5cGU6IEhDSS5TRVRUSU5HLAogICAgICAgICAgICAgIG9wdDogewogICAgICAgICAgICAgICAgdXJsOiAiL3YxL2hhcnZlc3Rlci8iLmNvbmNhdChIQ0kuU0VUVElORywgInMiKQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICBjYXNlIDMxOgogICAgICAgICAgICBoYXJ2ZXN0ZXJTZXR0aW5nID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgcmFuY2hlck1hbmFnZXJTdXBwb3J0ID0gaGFydmVzdGVyU2V0dGluZy5maW5kKGZ1bmN0aW9uIChzZXR0aW5nKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHNldHRpbmcuaWQgPT09ICdyYW5jaGVyLW1hbmFnZXItc3VwcG9ydCc7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBpc1JhbmNoZXJJbkhhcnZlc3RlciA9ICgocmFuY2hlck1hbmFnZXJTdXBwb3J0ID09PSBudWxsIHx8IHJhbmNoZXJNYW5hZ2VyU3VwcG9ydCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmFuY2hlck1hbmFnZXJTdXBwb3J0LnZhbHVlKSB8fCAocmFuY2hlck1hbmFnZXJTdXBwb3J0ID09PSBudWxsIHx8IHJhbmNoZXJNYW5hZ2VyU3VwcG9ydCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmFuY2hlck1hbmFnZXJTdXBwb3J0LmRlZmF1bHQpKSA9PT0gJ3RydWUnOwogICAgICAgICAgICBjb21taXQoJ2lzUmFuY2hlckluSGFydmVzdGVyJywgaXNSYW5jaGVySW5IYXJ2ZXN0ZXIpOwogICAgICAgICAgY2FzZSAzNToKICAgICAgICAgICAgcGwgPSAoX3JlcyRzZXR0aW5ncyA9IHJlcy5zZXR0aW5ncykgPT09IG51bGwgfHwgX3JlcyRzZXR0aW5ncyA9PT0gdm9pZCAwIHx8IChfcmVzJHNldHRpbmdzID0gX3JlcyRzZXR0aW5ncy5maW5kKGZ1bmN0aW9uICh4KSB7CiAgICAgICAgICAgICAgcmV0dXJuIHguaWQgPT09ICd1aS1wbCc7CiAgICAgICAgICAgIH0pKSA9PT0gbnVsbCB8fCBfcmVzJHNldHRpbmdzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcmVzJHNldHRpbmdzLnZhbHVlOwogICAgICAgICAgICBicmFuZCA9IChfcmVzJHNldHRpbmdzMiA9IHJlcy5zZXR0aW5ncykgPT09IG51bGwgfHwgX3JlcyRzZXR0aW5nczIgPT09IHZvaWQgMCB8fCAoX3JlcyRzZXR0aW5nczIgPSBfcmVzJHNldHRpbmdzMi5maW5kKGZ1bmN0aW9uICh4KSB7CiAgICAgICAgICAgICAgcmV0dXJuIHguaWQgPT09IFNFVFRJTkcuQlJBTkQ7CiAgICAgICAgICAgIH0pKSA9PT0gbnVsbCB8fCBfcmVzJHNldHRpbmdzMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3JlcyRzZXR0aW5nczIudmFsdWU7CiAgICAgICAgICAgIHN5c3RlbU5hbWVzcGFjZXMgPSAoX3JlcyRzZXR0aW5nczMgPSByZXMuc2V0dGluZ3MpID09PSBudWxsIHx8IF9yZXMkc2V0dGluZ3MzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcmVzJHNldHRpbmdzMy5maW5kKGZ1bmN0aW9uICh4KSB7CiAgICAgICAgICAgICAgcmV0dXJuIHguaWQgPT09IFNFVFRJTkcuU1lTVEVNX05BTUVTUEFDRVM7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBpZiAocGwpIHsKICAgICAgICAgICAgICBzZXRWZW5kb3IocGwpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChicmFuZCkgewogICAgICAgICAgICAgIHNldEJyYW5kKGJyYW5kKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoc3lzdGVtTmFtZXNwYWNlcykgewogICAgICAgICAgICAgIG5hbWVzcGFjZSA9IChfcmVmOCA9IHN5c3RlbU5hbWVzcGFjZXMudmFsdWUgfHwgc3lzdGVtTmFtZXNwYWNlcy5kZWZhdWx0KSA9PT0gbnVsbCB8fCBfcmVmOCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3JlZjguc3BsaXQoJywnKTsKICAgICAgICAgICAgICBjb21taXQoJ3NldFN5c3RlbU5hbWVzcGFjZXMnLCBuYW1lc3BhY2UpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNvbW1pdCgnbWFuYWdlbWVudENoYW5nZWQnLCB7CiAgICAgICAgICAgICAgcmVhZHk6IHRydWUsCiAgICAgICAgICAgICAgaXNSYW5jaGVyOiBpc1JhbmNoZXIKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGlmIChyZXMud29ya3NwYWNlcykgewogICAgICAgICAgICAgIGNvbW1pdCgndXBkYXRlV29ya3NwYWNlJywgewogICAgICAgICAgICAgICAgdmFsdWU6IGdldHRlcnNbJ3ByZWZzL2dldCddKFdPUktTUEFDRSksCiAgICAgICAgICAgICAgICBhbGw6IHJlcy53b3Jrc3BhY2VzLAogICAgICAgICAgICAgICAgZ2V0dGVyczogZ2V0dGVycwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJEb25lIGxvYWRpbmcgbWFuYWdlbWVudDsgaXNSYW5jaGVyPSIuY29uY2F0KGlzUmFuY2hlciwgIjsgaXNNdWx0aUNsdXN0ZXI9IikuY29uY2F0KGlzTXVsdGlDbHVzdGVyKSk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc29sZQogICAgICAgICAgY2FzZSA0NDoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlLCBudWxsLCBbWzQsIDldXSk7CiAgICB9KSkoKTsKICB9LAogIGxvYWRDbHVzdGVyOiBmdW5jdGlvbiBsb2FkQ2x1c3RlcihfcmVmOSwgX3JlZjEwKSB7CiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgIHZhciBfb2xkUGtnJHN0b3JlcyRmaW5kLCBfbmV3UGtnJHN0b3JlcyRmaW5kLCBfc3RhdGUkdHlwZU1hcDIsIF9nZXR0ZXJzJHByZWZzR2V0OwogICAgICB2YXIgc3RhdGUsIGNvbW1pdCwgZGlzcGF0Y2gsIGdldHRlcnMsIGlkLCBwcm9kdWN0LCBvbGRQcm9kdWN0LCBvbGRQa2csIG5ld1BrZywgdGFyZ2V0Um91dGUsIHNhbWVDbHVzdGVyLCBzYW1lUGFja2FnZSwgc2FtZVByb2R1Y3QsIGlzTXVsdGlDbHVzdGVyLCBvbGRQa2dDbHVzdGVyU3RvcmUsIG5ld1BrZ0NsdXN0ZXJTdG9yZSwgcHJvZHVjdENvbmZpZywgZm9yZ2V0Q3VycmVudENsdXN0ZXIsIGNsdXN0ZXIsIGNsdXN0ZXJCYXNlLCBwcm9qZWN0QXJncywgZmV0Y2hQcm9qZWN0cywgcmVzLCBmaWx0ZXJzLCBhbGxOYW1lc3BhY2VzOwogICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIHN0YXRlID0gX3JlZjkuc3RhdGUsIGNvbW1pdCA9IF9yZWY5LmNvbW1pdCwgZGlzcGF0Y2ggPSBfcmVmOS5kaXNwYXRjaCwgZ2V0dGVycyA9IF9yZWY5LmdldHRlcnM7CiAgICAgICAgICAgIGlkID0gX3JlZjEwLmlkLCBwcm9kdWN0ID0gX3JlZjEwLnByb2R1Y3QsIG9sZFByb2R1Y3QgPSBfcmVmMTAub2xkUHJvZHVjdCwgb2xkUGtnID0gX3JlZjEwLm9sZFBrZywgbmV3UGtnID0gX3JlZjEwLm5ld1BrZywgdGFyZ2V0Um91dGUgPSBfcmVmMTAudGFyZ2V0Um91dGU7CiAgICAgICAgICAgIGNvbW1pdCgndGFyZ2V0Um91dGUnLCB0YXJnZXRSb3V0ZSk7CiAgICAgICAgICAgIHNhbWVDbHVzdGVyID0gc3RhdGUuY2x1c3RlcklkICYmIHN0YXRlLmNsdXN0ZXJJZCA9PT0gaWQ7CiAgICAgICAgICAgIHNhbWVQYWNrYWdlID0gKG9sZFBrZyA9PT0gbnVsbCB8fCBvbGRQa2cgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9sZFBrZy5uYW1lKSA9PT0gKG5ld1BrZyA9PT0gbnVsbCB8fCBuZXdQa2cgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG5ld1BrZy5uYW1lKTsKICAgICAgICAgICAgc2FtZVByb2R1Y3QgPSBvbGRQcm9kdWN0ID09PSBwcm9kdWN0OwogICAgICAgICAgICBpc011bHRpQ2x1c3RlciA9IGdldHRlcnNbJ2lzTXVsdGlDbHVzdGVyJ107IC8vIEFyZSB3ZSBpbiB0aGUgc2FtZSBjbHVzdGVyIGFuZCBwYWNrYWdlIG9yIHByb2R1Y3Q/CiAgICAgICAgICAgIGlmICghKHNhbWVDbHVzdGVyICYmIChzYW1lUGFja2FnZSB8fCBzYW1lUHJvZHVjdCkpKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA5OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iKTsKICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgb2xkUGtnQ2x1c3RlclN0b3JlID0gb2xkUGtnID09PSBudWxsIHx8IG9sZFBrZyA9PT0gdm9pZCAwIHx8IChfb2xkUGtnJHN0b3JlcyRmaW5kID0gb2xkUGtnLnN0b3Jlcy5maW5kKGZ1bmN0aW9uIChzKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGdldHRlcnNbIiIuY29uY2F0KHMuc3RvcmVOYW1lLCAiL2lzQ2x1c3RlclN0b3JlIildOwogICAgICAgICAgICB9KSkgPT09IG51bGwgfHwgX29sZFBrZyRzdG9yZXMkZmluZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX29sZFBrZyRzdG9yZXMkZmluZC5zdG9yZU5hbWU7CiAgICAgICAgICAgIG5ld1BrZ0NsdXN0ZXJTdG9yZSA9IG5ld1BrZyA9PT0gbnVsbCB8fCBuZXdQa2cgPT09IHZvaWQgMCB8fCAoX25ld1BrZyRzdG9yZXMkZmluZCA9IG5ld1BrZy5zdG9yZXMuZmluZChmdW5jdGlvbiAocykgewogICAgICAgICAgICAgIHJldHVybiBnZXR0ZXJzWyIiLmNvbmNhdChzLnN0b3JlTmFtZSwgIi9pc0NsdXN0ZXJTdG9yZSIpXTsKICAgICAgICAgICAgfSkpID09PSBudWxsIHx8IF9uZXdQa2ckc3RvcmVzJGZpbmQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9uZXdQa2ckc3RvcmVzJGZpbmQuc3RvcmVOYW1lOwogICAgICAgICAgICBwcm9kdWN0Q29uZmlnID0gKF9zdGF0ZSR0eXBlTWFwMiA9IHN0YXRlWyd0eXBlLW1hcCddKSA9PT0gbnVsbCB8fCBfc3RhdGUkdHlwZU1hcDIgPT09IHZvaWQgMCB8fCAoX3N0YXRlJHR5cGVNYXAyID0gX3N0YXRlJHR5cGVNYXAyLnByb2R1Y3RzKSA9PT0gbnVsbCB8fCBfc3RhdGUkdHlwZU1hcDIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9zdGF0ZSR0eXBlTWFwMi5maW5kKGZ1bmN0aW9uIChwKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHAubmFtZSA9PT0gcHJvZHVjdDsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGZvcmdldEN1cnJlbnRDbHVzdGVyID0gKHN0YXRlLmNsdXN0ZXJJZCAmJiBpZCB8fCAhc2FtZVBhY2thZ2UpICYmICEocHJvZHVjdENvbmZpZyAhPT0gbnVsbCAmJiBwcm9kdWN0Q29uZmlnICE9PSB2b2lkIDAgJiYgcHJvZHVjdENvbmZpZy5pbkV4cGxvcmVyKTsgLy8gU2hvdWxkIHdlIGxlYXZlL2ZvcmdldCB0aGUgY3VycmVudCBjbHVzdGVyPyBPbmx5IGlmIHdlJ3JlIGdvaW5nIGZyb20gYW4gZXhpc3RpbmcgY2x1c3RlciB0byBhIG5ldyBjbHVzdGVyLCBvciB0aGUgcGFja2FnZSBoYXMgY2hhbmdlZAogICAgICAgICAgICAvLyAobGF0dGVyIGNhdGNoZXMgY2FzZXMgbGlrZSBuYXYgZnJvbSBleHBsb3JlciBjbHVzdGVyIEEgdG8gZXBpbmlvIGNsdXN0ZXIgQSkKICAgICAgICAgICAgLy8gQU5EIGlmIHRoZSBwcm9kdWN0IG5vdCBzY29wZWQgdG8gdGhlIGV4cGxvcmVyIC0gYSBjYXNlIGZvciBwcm9kdWN0cyB0aGF0IG9ubHkgZXhpc3Qgd2l0aGluIHRoZSBleHBsb3JlciAoaS5lLiBLdWJld2FyZGVuKQogICAgICAgICAgICBpZiAoIWZvcmdldEN1cnJlbnRDbHVzdGVyKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyODsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICAvLyBDbGVhciB0aGUgb2xkIGNsdXN0ZXIgc3RhdGUgb3V0IGlmIHN3aXRjaGluZyB0byBhIG5ldyBvbmUuCiAgICAgICAgICAgIC8vIElmIHRoZXJlIGlzIG5vdCBhbiBpZCB0aGVuIHN0YXkgY29ubmVjdGVkIHRvIHRoZSBvbGQgb25lIGJlaGluZCB0aGUgc2NlbmVzLAogICAgICAgICAgICAvLyBzbyB0aGF0IHRoZSBuYXYgYW5kIGhlYWRlciBzdGF5IHRoZSBzYW1lIHdoZW4gZ29pbmcgdG8gdGhpbmdzIGxpa2UgcHJlZnMKICAgICAgICAgICAgY29tbWl0KCdjbHVzdGVyUmVhZHknLCBmYWxzZSk7CiAgICAgICAgICAgIGNvbW1pdCgnY2x1c3RlcklkJywgdW5kZWZpbmVkKTsKICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAxODsKICAgICAgICAgICAgcmV0dXJuIGRpc3BhdGNoKCdjbHVzdGVyL3Vuc3Vic2NyaWJlJyk7CiAgICAgICAgICBjYXNlIDE4OgogICAgICAgICAgICBjb21taXQoJ2NsdXN0ZXIvcmVzZXQnKTsKICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyMTsKICAgICAgICAgICAgcmV0dXJuIGRpc3BhdGNoKCdtYW5hZ2VtZW50L3dhdGNoJywgewogICAgICAgICAgICAgIHR5cGU6IE1BTkFHRU1FTlQuUFJPSkVDVCwKICAgICAgICAgICAgICBuYW1lc3BhY2U6IHN0YXRlLmNsdXN0ZXJJZCwKICAgICAgICAgICAgICBzdG9wOiB0cnVlCiAgICAgICAgICAgIH0pOwogICAgICAgICAgY2FzZSAyMToKICAgICAgICAgICAgY29tbWl0KCdtYW5hZ2VtZW50L2ZvcmdldFR5cGUnLCBNQU5BR0VNRU5ULlBST0pFQ1QpOwogICAgICAgICAgICBjb21taXQoJ2NhdGFsb2cvcmVzZXQnKTsKICAgICAgICAgICAgaWYgKCFvbGRQa2dDbHVzdGVyU3RvcmUpIHsKICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDI4OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjY7CiAgICAgICAgICAgIHJldHVybiBkaXNwYXRjaCgiIi5jb25jYXQob2xkUGtnQ2x1c3RlclN0b3JlLCAiL3Vuc3Vic2NyaWJlIikpOwogICAgICAgICAgY2FzZSAyNjoKICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyODsKICAgICAgICAgICAgcmV0dXJuIGNvbW1pdCgiIi5jb25jYXQob2xkUGtnQ2x1c3RlclN0b3JlLCAiL3Jlc2V0IikpOwogICAgICAgICAgY2FzZSAyODoKICAgICAgICAgICAgaWYgKCFpZCkgewogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMzY7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8gUmVtZW1iZXIgdGhlIGN1cnJlbnQgY2x1c3RlcgogICAgICAgICAgICBkaXNwYXRjaCgncHJlZnMvc2V0JywgewogICAgICAgICAgICAgIGtleTogQ0xVU1RFUl9QUkVGLAogICAgICAgICAgICAgIHZhbHVlOiBpZAogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY29tbWl0KCdjbHVzdGVySWQnLCBpZCk7CgogICAgICAgICAgICAvLyBVc2UgYSBwc2V1ZG8gY2x1c3RlciBJRCB0byBwcmV0ZW5kIHdlIGhhdmUgYSBjbHVzdGVyLi4uIHRvIGVuc3VyZSBzb21lIHNjcmVlbnMgdGhhdCBkb24ndCBjYXJlIGFib3V0IGEgY2x1c3RlciBidXQgJ3JlcXVpcmUnIG9uZSB0byBzaG93CiAgICAgICAgICAgIGlmICghKGlkID09PSBCTEFOS19DTFVTVEVSKSkgewogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMzQ7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY29tbWl0KCdjbHVzdGVyUmVhZHknLCB0cnVlKTsKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoInJldHVybiIpOwogICAgICAgICAgY2FzZSAzNDoKICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAzNzsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlIDM2OgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIik7CiAgICAgICAgICBjYXNlIDM3OgogICAgICAgICAgICBjb25zb2xlLmxvZygiTG9hZGluZyAiLmNvbmNhdChpc011bHRpQ2x1c3RlciA/ICdFQ00gJyA6ICcnLCAiY2x1c3Rlci4uLiIpKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1jb25zb2xlCgogICAgICAgICAgICAvLyBJZiB3ZSd2ZSBlbnRlcmVkIGEgbmV3IHN0b3JlIGVuc3VyZSBldmVyeXRoaW5nIGhhcyBsb2FkZWQgY29ycmVjdGx5CiAgICAgICAgICAgIGlmICghbmV3UGtnQ2x1c3RlclN0b3JlKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA0NDsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDQxOwogICAgICAgICAgICByZXR1cm4gZGlzcGF0Y2goIiIuY29uY2F0KG5ld1BrZ0NsdXN0ZXJTdG9yZSwgIi9sb2FkQ2x1c3RlciIpLCB7CiAgICAgICAgICAgICAgaWQ6IGlkCiAgICAgICAgICAgIH0pOwogICAgICAgICAgY2FzZSA0MToKICAgICAgICAgICAgY29tbWl0KCdjbHVzdGVyUmVhZHknLCB0cnVlKTsKICAgICAgICAgICAgY29uc29sZS5sb2coJ0RvbmUgbG9hZGluZyBwa2cgY2x1c3RlcjonLCBuZXdQa2dDbHVzdGVyU3RvcmUpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnNvbGUKCiAgICAgICAgICAgIC8vIEV2ZXJ5dGhpbmcgYmVsb3cgaGVyZSBpcyByYW5jaGVyL2t1YmUgY2x1c3RlciBzcGVjaWZpYwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIik7CiAgICAgICAgICBjYXNlIDQ0OgogICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDQ2OwogICAgICAgICAgICByZXR1cm4gZGlzcGF0Y2goJ21hbmFnZW1lbnQvd2FpdEZvclNjaGVtYScsIHsKICAgICAgICAgICAgICB0eXBlOiBNQU5BR0VNRU5ULkNMVVNURVIKICAgICAgICAgICAgfSk7CiAgICAgICAgICBjYXNlIDQ2OgogICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDQ4OwogICAgICAgICAgICByZXR1cm4gZGlzcGF0Y2goJ21hbmFnZW1lbnQvd2FpdEZvckhhdmVBbGwnLCB7CiAgICAgICAgICAgICAgdHlwZTogTUFOQUdFTUVOVC5DTFVTVEVSCiAgICAgICAgICAgIH0pOwogICAgICAgICAgY2FzZSA0ODoKICAgICAgICAgICAgX2NvbnRleHQzLnByZXYgPSA0ODsKICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA1MTsKICAgICAgICAgICAgcmV0dXJuIGRpc3BhdGNoKCdtYW5hZ2VtZW50L2ZpbmQnLCB7CiAgICAgICAgICAgICAgdHlwZTogTUFOQUdFTUVOVC5DTFVTVEVSLAogICAgICAgICAgICAgIGlkOiBpZCwKICAgICAgICAgICAgICBvcHQ6IHsKICAgICAgICAgICAgICAgIHVybDogIiIuY29uY2F0KE1BTkFHRU1FTlQuQ0xVU1RFUiwgInMvIikuY29uY2F0KGVzY2FwZShpZCkpCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIGNhc2UgNTE6CiAgICAgICAgICAgIGNsdXN0ZXIgPSBfY29udGV4dDMuc2VudDsKICAgICAgICAgICAgaWYgKGNsdXN0ZXIuaXNSZWFkeSkgewogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNTU7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8gVHJlYXQgYW4gdW5yZWFkeSBjbHVzdGVyIHRoZSBzYW1lIGFzIGEgbWlzc2luZyBvbmUuIFRoaXMgZW5zdXJlcyB0aGF0IHdlIHNhZmVseSB0YWtlIHVzZXIgdG8gdGhlIGhvbWUgcGFnZSBpbnN0ZWFkIG9mIHNob3dpbmcKICAgICAgICAgICAgLy8gYW4gZXJyb3IgcGFnZSAodXNlZnVsIGlmIHRoZXkndmUgc2V0IHRoZSBjbHVzdGVyIGFzIHRoZWlyIGhvbWUgcGFnZSBhbmQgZG9uJ3Qgd2FudCB0byBjaGFuZ2UgdGhlaXIgbGFuZGluZyBsb2NhdGlvbikKICAgICAgICAgICAgY29uc29sZS53YXJuKCdDbHVzdGVyIGlzIG5vdCByZWFkeSwgY2Fubm90IGxvYWQgaXQ6JywgY2x1c3Rlci5uYW1lRGlzcGxheSk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc29sZQogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VucmVhZHkgY2x1c3RlcicpOwogICAgICAgICAgY2FzZSA1NToKICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA2MjsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlIDU3OgogICAgICAgICAgICBfY29udGV4dDMucHJldiA9IDU3OwogICAgICAgICAgICBfY29udGV4dDMudDAgPSBfY29udGV4dDNbImNhdGNoIl0oNDgpOwogICAgICAgICAgICBjb21taXQoJ2NsdXN0ZXJJZCcsIG51bGwpOwogICAgICAgICAgICBjb21taXQoJ2NsdXN0ZXIvYXBwbHlDb25maWcnLCB7CiAgICAgICAgICAgICAgYmFzZVVybDogbnVsbAogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdGhyb3cgbmV3IENsdXN0ZXJOb3RGb3VuZEVycm9yKGlkKTsKICAgICAgICAgIGNhc2UgNjI6CiAgICAgICAgICAgIGNsdXN0ZXJCYXNlID0gIi9rOHMvY2x1c3RlcnMvIi5jb25jYXQoZXNjYXBlKGlkKSwgIi92MSIpOyAvLyBVcGRhdGUgdGhlIFN0ZXZlIGNsaWVudCBVUkxzCiAgICAgICAgICAgIGNvbW1pdCgnY2x1c3Rlci9hcHBseUNvbmZpZycsIHsKICAgICAgICAgICAgICBiYXNlVXJsOiBjbHVzdGVyQmFzZQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA2NjsKICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKFtkaXNwYXRjaCgnY2x1c3Rlci9sb2FkU2NoZW1hcycsIHRydWUpXSk7CiAgICAgICAgICBjYXNlIDY2OgogICAgICAgICAgICBkaXNwYXRjaCgnY2x1c3Rlci9zdWJzY3JpYmUnKTsKICAgICAgICAgICAgcHJvamVjdEFyZ3MgPSB7CiAgICAgICAgICAgICAgdHlwZTogTUFOQUdFTUVOVC5QUk9KRUNULAogICAgICAgICAgICAgIG9wdDogewogICAgICAgICAgICAgICAgdXJsOiAiIi5jb25jYXQoTUFOQUdFTUVOVC5QUk9KRUNULCAiLyIpLmNvbmNhdChlc2NhcGUoaWQpKSwKICAgICAgICAgICAgICAgIHdhdGNoTmFtZXNwYWNlOiBpZAogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKICAgICAgICAgICAgZmV0Y2hQcm9qZWN0cyA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgdmFyIF9yZWYxMSA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgICAgICAgICAgdmFyIGxpbWl0LCBzbGVlcDsKICAgICAgICAgICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgbGltaXQgPSAzMDAwMDsKICAgICAgICAgICAgICAgICAgICAgIHNsZWVwID0gMTAwOwogICAgICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgICAgIGlmICghKGxpbWl0ID4gMCAmJiAhc3RhdGUubWFuYWdlbWVudFJlYWR5KSkgewogICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDg7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA1OwogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge30sIHNsZWVwKTsKICAgICAgICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICAgICAgICBsaW1pdCAtPSBzbGVlcDsKICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjsKICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICAgICAgICAgIGlmICghZ2V0dGVyc1snbWFuYWdlbWVudC9zY2hlbWFGb3InXShNQU5BR0VNRU5ULlBST0pFQ1QpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsIGRpc3BhdGNoKCdtYW5hZ2VtZW50L2ZpbmRBbGwnLCBwcm9qZWN0QXJncykpOwogICAgICAgICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiBmZXRjaFByb2plY3RzKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIF9yZWYxMS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0oKTsKICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA3MTsKICAgICAgICAgICAgcmV0dXJuIGFsbEhhc2goewogICAgICAgICAgICAgIHByb2plY3RzOiBmZXRjaFByb2plY3RzKCksCiAgICAgICAgICAgICAgY291bnRzOiBkaXNwYXRjaCgnY2x1c3Rlci9maW5kQWxsJywgewogICAgICAgICAgICAgICAgdHlwZTogQ09VTlQKICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICBuYW1lc3BhY2VzOiBkaXNwYXRjaCgnY2x1c3Rlci9maW5kQWxsJywgewogICAgICAgICAgICAgICAgdHlwZTogTkFNRVNQQUNFCiAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgbmF2TGlua3M6ICEhZ2V0dGVyc1snY2x1c3Rlci9zY2hlbWFGb3InXShVSS5OQVZfTElOSykgJiYgZGlzcGF0Y2goJ2NsdXN0ZXIvZmluZEFsbCcsIHsKICAgICAgICAgICAgICAgIHR5cGU6IFVJLk5BVl9MSU5LCiAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfSk7CiAgICAgICAgICBjYXNlIDcxOgogICAgICAgICAgICByZXMgPSBfY29udGV4dDMuc2VudDsKICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA3NDsKICAgICAgICAgICAgcmV0dXJuIGRpc3BhdGNoKCdjbGVhbk5hbWVzcGFjZXMnKTsKICAgICAgICAgIGNhc2UgNzQ6CiAgICAgICAgICAgIGZpbHRlcnMgPSAoX2dldHRlcnMkcHJlZnNHZXQgPSBnZXR0ZXJzWydwcmVmcy9nZXQnXShOQU1FU1BBQ0VfRklMVEVSUykpID09PSBudWxsIHx8IF9nZXR0ZXJzJHByZWZzR2V0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZ2V0dGVycyRwcmVmc0dldFtpZF07CiAgICAgICAgICAgIGFsbE5hbWVzcGFjZXMgPSByZXMubmFtZXNwYWNlczsKICAgICAgICAgICAgY29tbWl0KCd1cGRhdGVOYW1lc3BhY2VzJywgewogICAgICAgICAgICAgIGZpbHRlcnM6IGZpbHRlcnMgfHwgW0FMTF9VU0VSXSwKICAgICAgICAgICAgICBhbGw6IGFsbE5hbWVzcGFjZXMsCiAgICAgICAgICAgICAgZ2V0dGVyczogZ2V0dGVycwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgaWYgKCEoZ2V0dGVyc1snY3VycmVudENsdXN0ZXInXSAmJiBnZXR0ZXJzWydjdXJyZW50Q2x1c3RlciddLmlzSGFydmVzdGVyKSkgewogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gODA7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA4MDsKICAgICAgICAgICAgcmV0dXJuIGRpc3BhdGNoKCdjbHVzdGVyL2ZpbmRBbGwnLCB7CiAgICAgICAgICAgICAgdHlwZTogSENJLlNFVFRJTkcKICAgICAgICAgICAgfSk7CiAgICAgICAgICBjYXNlIDgwOgogICAgICAgICAgICBjb21taXQoJ2NsdXN0ZXJSZWFkeScsIHRydWUpOwogICAgICAgICAgICBjb25zb2xlLmxvZygnRG9uZSBsb2FkaW5nIGNsdXN0ZXIuJyk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc29sZQogICAgICAgICAgY2FzZSA4MjoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTMsIG51bGwsIFtbNDgsIDU3XV0pOwogICAgfSkpKCk7CiAgfSwKICBzd2l0Y2hOYW1lc3BhY2VzOiBmdW5jdGlvbiBzd2l0Y2hOYW1lc3BhY2VzKF9yZWYxMiwgX3JlZjEzKSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjEyLmNvbW1pdCwKICAgICAgZGlzcGF0Y2ggPSBfcmVmMTIuZGlzcGF0Y2gsCiAgICAgIGdldHRlcnMgPSBfcmVmMTIuZ2V0dGVyczsKICAgIHZhciBpZHMgPSBfcmVmMTMuaWRzLAogICAgICBrZXkgPSBfcmVmMTMua2V5OwogICAgdmFyIGZpbHRlcnMgPSBnZXR0ZXJzWydwcmVmcy9nZXQnXShOQU1FU1BBQ0VfRklMVEVSUyk7CiAgICBkaXNwYXRjaCgncHJlZnMvc2V0JywgewogICAgICBrZXk6IE5BTUVTUEFDRV9GSUxURVJTLAogICAgICB2YWx1ZTogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBmaWx0ZXJzKSwge30sIF9kZWZpbmVQcm9wZXJ0eSh7fSwga2V5LCBpZHMpKQogICAgfSk7CiAgICBjb21taXQoJ3VwZGF0ZU5hbWVzcGFjZXMnLCB7CiAgICAgIGZpbHRlcnM6IGlkcywKICAgICAgZ2V0dGVyczogZ2V0dGVycwogICAgfSk7CiAgfSwKICBjbGVhbk5hbWVzcGFjZXM6IGZ1bmN0aW9uIGNsZWFuTmFtZXNwYWNlcyhfcmVmMTQpIHsKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNCgpIHsKICAgICAgdmFyIGdldHRlcnMsIGRpc3BhdGNoLCBmaWx0ZXJzLCBjbGVhbkZpbHRlcnMsIGlkLCBfc3BsaXROYW1lc3BhY2VGaWx0ZXIsIGNsdXN0ZXJJZDsKICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNCQoX2NvbnRleHQ0KSB7CiAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQ0LnByZXYgPSBfY29udGV4dDQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBnZXR0ZXJzID0gX3JlZjE0LmdldHRlcnMsIGRpc3BhdGNoID0gX3JlZjE0LmRpc3BhdGNoOwogICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDM7CiAgICAgICAgICAgIHJldHVybiBkaXNwYXRjaCgnbWFuYWdlbWVudC9maW5kQWxsJywgewogICAgICAgICAgICAgIHR5cGU6IE1BTkFHRU1FTlQuQ0xVU1RFUgogICAgICAgICAgICB9KTsKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgLy8gU28gdGhleSBjYW4gYmUgZ290IGJ5SWQgYmVsb3cKICAgICAgICAgICAgZmlsdGVycyA9IGdldHRlcnNbJ3ByZWZzL2dldCddKE5BTUVTUEFDRV9GSUxURVJTKTsKICAgICAgICAgICAgaWYgKGZpbHRlcnMpIHsKICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDc7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZGlzcGF0Y2goJ3ByZWZzL3NldCcsIHsKICAgICAgICAgICAgICBrZXk6IE5BTUVTUEFDRV9GSUxURVJTLAogICAgICAgICAgICAgIHZhbHVlOiB7fQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5hYnJ1cHQoInJldHVybiIpOwogICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICBjbGVhbkZpbHRlcnMgPSB7fTsKICAgICAgICAgICAgZm9yIChpZCBpbiBmaWx0ZXJzKSB7CiAgICAgICAgICAgICAgX3NwbGl0TmFtZXNwYWNlRmlsdGVyID0gc3BsaXROYW1lc3BhY2VGaWx0ZXJLZXkoaWQpLCBjbHVzdGVySWQgPSBfc3BsaXROYW1lc3BhY2VGaWx0ZXIuY2x1c3RlcklkOwogICAgICAgICAgICAgIGlmIChnZXR0ZXJzWydtYW5hZ2VtZW50L2J5SWQnXShNQU5BR0VNRU5ULkNMVVNURVIsIGNsdXN0ZXJJZCkpIHsKICAgICAgICAgICAgICAgIGNsZWFuRmlsdGVyc1tpZF0gPSBmaWx0ZXJzW2lkXTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKGZpbHRlcnMpLmxlbmd0aCAhPT0gT2JqZWN0LmtleXMoY2xlYW5GaWx0ZXJzKS5sZW5ndGgpIHsKICAgICAgICAgICAgICBjb25zb2xlLmRlYnVnKCdVbmtub3duIGNsdXN0ZXJzIGhhdmUgYmVlbiByZW1vdmVkIGZyb20gbmFtZXNwYWNlIGZpbHRlcnMgbGlzdCAoYmVmb3JlL2FmdGVyKScsIGZpbHRlcnMsIGNsZWFuRmlsdGVycyk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc29sZQogICAgICAgICAgICAgIGRpc3BhdGNoKCdwcmVmcy9zZXQnLCB7CiAgICAgICAgICAgICAgICBrZXk6IE5BTUVTUEFDRV9GSUxURVJTLAogICAgICAgICAgICAgICAgdmFsdWU6IGNsZWFuRmlsdGVycwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlNCk7CiAgICB9KSkoKTsKICB9LAogIG9uTG9nb3V0OiBmdW5jdGlvbiBvbkxvZ291dChzdG9yZSkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNSgpIHsKICAgICAgdmFyIGRpc3BhdGNoLCBjb21taXQsIHN0YXRlLCByb3V0ZXIsIHJvdXRlLCBiYWNrVG8sIGlzTG9naW4sIGlzTG9nb3V0LCBRVUVSWTsKICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNSQoX2NvbnRleHQ1KSB7CiAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQ1LnByZXYgPSBfY29udGV4dDUubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBkaXNwYXRjaCA9IHN0b3JlLmRpc3BhdGNoLCBjb21taXQgPSBzdG9yZS5jb21taXQsIHN0YXRlID0gc3RvcmUuc3RhdGU7CiAgICAgICAgICAgIHN0b3JlLmRpc3BhdGNoKCdnY1N0b3BJbnRlcnZhbHMnKTsKICAgICAgICAgICAgT2JqZWN0LnZhbHVlcyhfdGhpcy4kcGx1Z2luLmdldFBsdWdpbnMoKSkuZm9yRWFjaChmdW5jdGlvbiAocCkgewogICAgICAgICAgICAgIGlmIChwLm9uTG9nT3V0KSB7CiAgICAgICAgICAgICAgICBwLm9uTG9nT3V0KHN0b3JlKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDU7CiAgICAgICAgICAgIHJldHVybiBkaXNwYXRjaCgnbWFuYWdlbWVudC91bnN1YnNjcmliZScpOwogICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICBjb21taXQoJ21hbmFnZW1lbnRDaGFuZ2VkJywgewogICAgICAgICAgICAgIHJlYWR5OiBmYWxzZQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY29tbWl0KCdtYW5hZ2VtZW50L3Jlc2V0Jyk7CiAgICAgICAgICAgIGNvbW1pdCgncHJlZnMvcmVzZXQnKTsKICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSAxMDsKICAgICAgICAgICAgcmV0dXJuIGRpc3BhdGNoKCdjbHVzdGVyL3Vuc3Vic2NyaWJlJyk7CiAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICBjb21taXQoJ2NsdXN0ZXJSZWFkeScsIGZhbHNlKTsKICAgICAgICAgICAgY29tbWl0KCdjbHVzdGVySWQnLCBudWxsKTsKICAgICAgICAgICAgY29tbWl0KCdjbHVzdGVyL3Jlc2V0Jyk7CiAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gMTU7CiAgICAgICAgICAgIHJldHVybiBkaXNwYXRjaCgncmFuY2hlci91bnN1YnNjcmliZScpOwogICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgY29tbWl0KCdyYW5jaGVyL3Jlc2V0Jyk7CiAgICAgICAgICAgIGNvbW1pdCgnY2F0YWxvZy9yZXNldCcpOwogICAgICAgICAgICByb3V0ZXIgPSBzdGF0ZS4kcm91dGVyOwogICAgICAgICAgICByb3V0ZSA9IHJvdXRlci5jdXJyZW50Um91dGU7CiAgICAgICAgICAgIGlmIChyb3V0ZS5uYW1lID09PSAnaW5kZXgnKSB7CiAgICAgICAgICAgICAgcm91dGVyLnJlcGxhY2UoJy9hdXRoL2xvZ2luJyk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgYmFja1RvID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKEJBQ0tfVE8pOwogICAgICAgICAgICAgIGlzTG9naW4gPSByb3V0ZS5uYW1lID09PSAnYXV0aC1sb2dpbicgfHwgcm91dGUucGF0aCA9PT0gJy9sb2dpbic7IC8vIENvdmVyIGRhc2hib2FyZCBhbmQgY2FzZSBvZiBsb2cgb3V0IGZyb20gZW1iZXI7CiAgICAgICAgICAgICAgaXNMb2dvdXQgPSByb3V0ZS5uYW1lID09PSAnYXV0aC1sb2dvdXQnOwogICAgICAgICAgICAgIGlmICghYmFja1RvICYmICFpc0xvZ2luICYmICFpc0xvZ291dCkgewogICAgICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKEJBQ0tfVE8sIHdpbmRvdy5sb2NhdGlvbi5ocmVmKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgUVVFUlkgPSBMT0dHRURfT1VUIGluIHJvdXRlLnF1ZXJ5ID8gTE9HR0VEX09VVCA6IFRJTUVEX09VVDsKICAgICAgICAgICAgICByb3V0ZXIucmVwbGFjZSgiL2F1dGgvbG9naW4/Ii5jb25jYXQoUVVFUlkpKTsKICAgICAgICAgICAgfQogICAgICAgICAgY2FzZSAyMDoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuc3RvcCgpOwogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTUpOwogICAgfSkpKCk7CiAgfSwKICBudXh0U2VydmVySW5pdDogZnVuY3Rpb24gbnV4dFNlcnZlckluaXQoX3JlZjE1LCBudXh0KSB7CiAgICB2YXIgZGlzcGF0Y2ggPSBfcmVmMTUuZGlzcGF0Y2gsCiAgICAgIHJvb3RTdGF0ZSA9IF9yZWYxNS5yb290U3RhdGU7CiAgICAvLyBNb2RlbHMgaW4gU1NSIHNlcnZlciBtb2RlIGhhdmUgbm8gd2F5IHRvIGdldCB0byB0aGUgcm91dGUgb3Igcm91dGVyLCBzbyBoYWNrIG9uZSBpbi4uLgogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHJvb3RTdGF0ZSwgJyRyb3V0ZXInLCB7CiAgICAgIHZhbHVlOiBudXh0LmFwcC5yb3V0ZXIKICAgIH0pOwogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHJvb3RTdGF0ZSwgJyRyb3V0ZScsIHsKICAgICAgdmFsdWU6IG51eHQucm91dGUKICAgIH0pOwogICAgZGlzcGF0Y2goJ3ByZWZzL2xvYWRDb29raWVzJyk7CiAgfSwKICBudXh0Q2xpZW50SW5pdDogZnVuY3Rpb24gbnV4dENsaWVudEluaXQoX3JlZjE2LCBudXh0KSB7CiAgICB2YXIgZGlzcGF0Y2ggPSBfcmVmMTYuZGlzcGF0Y2gsCiAgICAgIHJvb3RTdGF0ZSA9IF9yZWYxNi5yb290U3RhdGU7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkocm9vdFN0YXRlLCAnJHJvdXRlcicsIHsKICAgICAgdmFsdWU6IG51eHQuYXBwLnJvdXRlcgogICAgfSk7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkocm9vdFN0YXRlLCAnJHJvdXRlJywgewogICAgICB2YWx1ZTogbnV4dC5yb3V0ZQogICAgfSk7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkocm9vdFN0YXRlLCAnJHBsdWdpbicsIHsKICAgICAgdmFsdWU6IG51eHQuYXBwLiRwbHVnaW4KICAgIH0pOwogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsICckcGx1Z2luJywgewogICAgICB2YWx1ZTogbnV4dC5hcHAuJHBsdWdpbgogICAgfSk7CiAgICBkaXNwYXRjaCgnbWFuYWdlbWVudC9yZWh5ZHJhdGVTdWJzY3JpYmUnKTsKICAgIGRpc3BhdGNoKCdjbHVzdGVyL3JlaHlkcmF0ZVN1YnNjcmliZScpOwogICAgaWYgKHJvb3RTdGF0ZS5pc1JhbmNoZXIpIHsKICAgICAgZGlzcGF0Y2goJ3JhbmNoZXIvcmVoeWRyYXRlU3Vic2NyaWJlJyk7CiAgICB9CiAgICBkaXNwYXRjaCgnY2F0YWxvZy9yZWh5ZHJhdGUnKTsKICAgIGRpc3BhdGNoKCdwcmVmcy9sb2FkQ29va2llcycpOwogICAgZGlzcGF0Y2goJ3ByZWZzL2xvYWRUaGVtZScpOwogIH0sCiAgbG9hZGluZ0Vycm9yOiBmdW5jdGlvbiBsb2FkaW5nRXJyb3IoX3JlZjE3LCBlcnIpIHsKICAgIHZhciBjb21taXQgPSBfcmVmMTcuY29tbWl0LAogICAgICBzdGF0ZSA9IF9yZWYxNy5zdGF0ZTsKICAgIGNvbW1pdCgnc2V0RXJyb3InLCB7CiAgICAgIGVycm9yOiBlcnIsCiAgICAgIGxvY2F0aW9uRXJyb3I6IG5ldyBFcnJvcignbG9hZGluZ0Vycm9yJykKICAgIH0pOwogICAgdmFyIHJvdXRlciA9IHN0YXRlLiRyb3V0ZXI7CiAgICByb3V0ZXIucmVwbGFjZSgnL2ZhaWwtd2hhbGUnKTsKICB9LAogIHVwZGF0ZVNlcnZlclZlcnNpb246IGZ1bmN0aW9uIHVwZGF0ZVNlcnZlclZlcnNpb24oX3JlZjE4LCBuZXUpIHsKICAgIHZhciBjb21taXQgPSBfcmVmMTguY29tbWl0LAogICAgICBzdGF0ZSA9IF9yZWYxOC5zdGF0ZTsKICAgIHZhciBjdXIgPSBzdGF0ZS5zZXJ2ZXJWZXJzaW9uOwogICAgaWYgKCFjdXIpIHsKICAgICAgLy8gSWYgd2UgaGF2ZW4ndCBoZWFyZCB0aGUgY3VycmVudCB2ZXJzaW9uIHlldCwgdGhpcyBpcyBub3cgaXQuCiAgICAgIGNvbW1pdCgnc2V0U2VydmVyVmVyc2lvbicsIG5ldSk7CiAgICAgIHJldHVybjsKICAgIH0KICAgIHZhciBjaGFuZ2VkID0gZmFsc2U7CiAgICB2YXIgc2VtdmVyQ3VyID0gc2VtdmVyLmNvZXJjZShjdXIpOwogICAgdmFyIHNlbXZlck5ldSA9IHNlbXZlci5jb2VyY2UobmV1KTsKICAgIGlmIChzZW12ZXIudmFsaWQoc2VtdmVyQ3VyKSAmJiBzZW12ZXIudmFsaWQoc2VtdmVyTmV1KSkgewogICAgICAvLyBSZWd1bGFyIHJlbGVhc2VzIGhhdmUgcmVndWxhciB2Mi54LnkgdGFncywgcmVsb2FkIG9ubHkgaWYgaXQncyBhbiB1cGdyYWRlCiAgICAgIC8vIFNvIHRoYXQgd2UgZG9uJ3QgZmxhcCBiYWNrIGFuZCBmb3J0aCBpZiBkaWZmZXJlbnQgc2VydmVycyBiZWhpbmQgYSBMQgogICAgICAvLyAgYW5zd2VyIHdpdGggb2xkIGFuZCBuZXcgdmVyc2lvbnMgYXQgdGhlIHNhbWUgdGltZSBkdXJpbmcgYW4gdXBncmFkZQoKICAgICAgaWYgKHNlbXZlci5sdChzZW12ZXJDdXIsIHNlbXZlck5ldSkpIHsKICAgICAgICBjaGFuZ2VkID0gdHJ1ZTsKICAgICAgfQogICAgfSBlbHNlIGlmIChjdXIgIT09IG5ldSkgewogICAgICAvLyBNYXN0ZXIgYW5kIG90aGVyIG5vbi1yZWxlYXNlcyBoYXZlIHJhbmRvbSBuYW1lcyBsaWtlIG1hc3Rlci1oZWFkCiAgICAgIC8vIG9yIFNIQS1zdW1zLiAgSnVzdCBsb29rIGlmIHRoZSB2YWx1ZSBjaGFuZ2VkIGluc3RlYWQgaGVyCiAgICAgIGNoYW5nZWQgPSB0cnVlOwogICAgfQogICAgaWYgKGNoYW5nZWQpIHsKICAgICAgdmFyIHVybCA9IGFkZFBhcmFtKHdpbmRvdy5sb2NhdGlvbi5ocmVmLCBVUEdSQURFRCwgX0ZMQUdHRUQpOwogICAgICB3aW5kb3cubG9jYXRpb24ucmVwbGFjZSh1cmwpOwogICAgfQogIH0sCiAgc2V0SXNTaW5nbGVQcm9kdWN0OiBmdW5jdGlvbiBzZXRJc1NpbmdsZVByb2R1Y3QoX3JlZjE5LCBpc1NpbmdsZVByb2R1Y3QpIHsKICAgIHZhciBjb21taXQgPSBfcmVmMTkuY29tbWl0OwogICAgY29tbWl0KCJzZXRJc1NpbmdsZVByb2R1Y3QiLCBpc1NpbmdsZVByb2R1Y3QpOwogIH0sCiAgdW5zdWJzY3JpYmU6IGZ1bmN0aW9uIHVuc3Vic2NyaWJlKF9yZWYyMCkgewogICAgdmFyIHN0YXRlID0gX3JlZjIwLnN0YXRlLAogICAgICBkaXNwYXRjaCA9IF9yZWYyMC5kaXNwYXRjaDsKICAgIC8vIEl0IHdvdWxkIGJlIG5pY2UgdG8gZ3JhYiBhbGwgdnVleCBtb2R1bGUgc3RvcmVzIHRoYXQgd2UndmUgcmVnaXN0ZXJlZCwgYXBwYXJlbnRseSB0aGlzIGlzIG9ubHkgcG9zc2libGUgdmlhIHRoZQogICAgLy8gaW50ZXJuYWwgcHJvcGVydGllcyBzdG9yZS5fbW9kdWxlcy5yb290Ll9jaGlsZHJlbi4KICAgIC8vIFNvIGluc3RlYWQgbG9vcCB0aHJvdWdoIGFsbCBzdGF0ZSBlbnRyaWVzIHRvIGZpbmQgc3RvcmVzCiAgICByZXR1cm4gT2JqZWN0LmVudHJpZXMoc3RhdGUpLmZpbHRlcihmdW5jdGlvbiAoX3JlZjIxKSB7CiAgICAgIHZhciBfcmVmMjIgPSBfc2xpY2VkVG9BcnJheShfcmVmMjEsIDIpLAogICAgICAgIHN0b3JlTmFtZSA9IF9yZWYyMlswXSwKICAgICAgICBzdG9yZVN0YXRlID0gX3JlZjIyWzFdOwogICAgICBpZiAoc3RvcmVTdGF0ZSAhPT0gbnVsbCAmJiBzdG9yZVN0YXRlICE9PSB2b2lkIDAgJiYgc3RvcmVTdGF0ZS5hbGxvd1N0cmVhbWluZykgewogICAgICAgIGRpc3BhdGNoKCIiLmNvbmNhdChzdG9yZU5hbWUsICIvdW5zdWJzY3JpYmUiKSk7CiAgICAgIH0KICAgIH0pOwogIH0KfSwgZ2NBY3Rpb25zKTs="},{"version":3,"names":["BACK_TO","setBrand","setVendor","NAME","EXPLORER","LOGGED_OUT","TIMED_OUT","UPGRADED","_FLAGGED","SETTING","COUNT","DEFAULT_WORKSPACE","FLEET","MANAGEMENT","NAMESPACE","NORMAN","UI","VIRTUAL_HARVESTER_PROVIDER","HCI","BY_TYPE","Steve","STEVE_MODEL_TYPES","CLUSTER","CLUSTER_PREF","LAST_NAMESPACE","NAMESPACE_FILTERS","WORKSPACE","BOTH","CLUSTER_LEVEL","NAMESPACED","filterBy","findBy","ApiError","ClusterNotFoundError","gcActions","gcGetters","NAMESPACE_FILTER_ALL_ORPHANS","ALL_ORPHANS","NAMESPACE_FILTER_ALL_SYSTEM","ALL_SYSTEM","NAMESPACE_FILTER_ALL_USER","ALL_USER","NAMESPACE_FILTER_NAMESPACED_NO","NAMESPACED_NO","NAMESPACE_FILTER_NAMESPACED_PREFIX","NAMESPACED_PREFIX","NAMESPACE_FILTER_NAMESPACED_YES","NAMESPACED_YES","splitNamespaceFilterKey","NAMESPACE_FILTER_NS_FULL_PREFIX","allHash","allHashSettled","sortBy","addParam","semver","STORE","BLANK_CLUSTER","isDevBuild","strict","plugins","namespace","baseUrl","modelBaseClass","supportsStream","supportsGc","RANCHER","getActiveNamespacesCategories","getters","namespaces","filters","includeAll","isAllNamespaces","includeSystem","includes","includeUser","includeOrphans","hasCategory","Object","values","reduce","acc","ns","projectId","isSystem","id","getActiveSingleNamespaces","activeNamespaces","_getters$currentClust","clusterId","_iterator","_createForOfIteratorHelper","_step","s","n","done","filter","value","_filter$split","split","_filter$split2","_slicedToArray","type","project","PROJECT","concat","_iterator2","_step2","projectNamespace","err","e","f","getReadOnlyActiveNamespaces","readonlyNamespaces","links","update","map","_ref","keys","_objectSpread","_defineProperty","getActiveNamespaces","state","_getters$currentClust2","readonly","arguments","length","undefined","product","showWorkspaceSwitcher","fleetOut","workspace","updateActiveNamespaceCache","inStore","hasNamespaces","Array","isArray","allNamespaces","allowedNamespaces","prefs","data","isObscure","hideSystemResources","namespaceFilters","startsWith","activeNamespaceCache","cacheKey","key","activeNamespaceCacheKey","managementReady","clusterReady","isRancher","allWorkspaces","productId","error","cameFromError","pageActions","serverVersion","systemNamespaces","isSingleProduct","isRancherInHarvester","targetRoute","isMultiCluster","_clusters$0$metadata","clusters","metadata","name","currentCluster","currentProduct","active","out","getStoreNameByProductId","_state$typeMap","_ref2","products","find","p","currentStore","_product$typeStoreMap","typeStoreMap","isExplorer","defaultClusterId","all","desired","x","showNamespaceFilter","isMultipleNamespaces","namespaceMode","byKind","_iterator3","_step3","activeNamespaceFilters","defaultNamespace","rootState","rootGetters","filteredMap","isAll","isOk","backToRancherGlobalLink","link","process","env","dev","backToRancherLink","escape","rancherLink","isVirtualCluster","_cluster$status","cluster","status","provider","isStandaloneHarvester","c","isHarvester","showTopLevelMenu","releaseNotesUrl","_getters$managementB","version","base","mutations","managementChanged","_ref3","ready","neu","updateNamespaces","_ref4","changeAllNamespaces","updateWorkspace","_ref5","setProduct","setError","_ref6","obj","locationError","console","log","setServerVersion","setSystemNamespaces","setIsSingleProduct","route","actions","loadManagement","_ref7","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_fleetSchema$links","_res$clusters","_res$settings","_res$settings2","_res$settings3","commit","dispatch","res","promises","fleetSchema","localCluster","harvesterSetting","rancherManagerSupport","pl","brand","_ref8","wrap","_callee$","_context","prev","next","abrupt","PRINCIPAL","opt","url","t0","mgmtSubscribe","mgmtSchemas","rancherSchemas","sent","features","collection","setting","default","settings","BRAND","SYSTEM_NAMESPACES","workspaces","stop","loadCluster","_ref9","_ref10","_callee3","_oldPkg$stores$find","_newPkg$stores$find","_state$typeMap2","_getters$prefsGet","oldProduct","oldPkg","newPkg","sameCluster","samePackage","sameProduct","oldPkgClusterStore","newPkgClusterStore","productConfig","forgetCurrentCluster","clusterBase","projectArgs","fetchProjects","_callee3$","_context3","stores","storeName","inExplorer","isReady","warn","nameDisplay","Error","Promise","watchNamespace","_ref11","_callee2","limit","sleep","_callee2$","_context2","setTimeout","apply","projects","counts","navLinks","NAV_LINK","switchNamespaces","_ref12","_ref13","ids","cleanNamespaces","_ref14","_callee4","cleanFilters","_splitNamespaceFilter","_callee4$","_context4","debug","onLogout","store","_this","_callee5","router","backTo","isLogin","isLogout","QUERY","_callee5$","_context5","$plugin","getPlugins","forEach","onLogOut","$router","currentRoute","replace","window","localStorage","getItem","path","setItem","location","href","query","nuxtServerInit","_ref15","nuxt","defineProperty","app","nuxtClientInit","_ref16","loadingError","_ref17","updateServerVersion","_ref18","cur","changed","semverCur","coerce","semverNeu","valid","lt","_ref19","unsubscribe","_ref20","entries","_ref21","_ref22","storeState","allowStreaming"],"sources":["/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/store/index.js"],"sourcesContent":["import { BACK_TO } from '@shell/config/local-storage';\nimport { setBrand, setVendor } from '@shell/config/private-label';\nimport { NAME as EXPLORER } from '@shell/config/product/explorer';\nimport { LOGGED_OUT, TIMED_OUT, UPGRADED, _FLAGGED } from '@shell/config/query-params';\nimport { SETTING } from '@shell/config/settings';\nimport {\n  COUNT,\n  DEFAULT_WORKSPACE,\n  FLEET,\n  MANAGEMENT,\n  NAMESPACE, NORMAN,\n  UI, VIRTUAL_HARVESTER_PROVIDER, HCI\n} from '@shell/config/types';\nimport { BY_TYPE } from '@shell/plugins/dashboard-store/classify';\nimport Steve from '@shell/plugins/steve';\nimport { STEVE_MODEL_TYPES } from '@shell/plugins/steve/getters';\nimport { CLUSTER as CLUSTER_PREF, LAST_NAMESPACE, NAMESPACE_FILTERS, WORKSPACE } from '@shell/store/prefs';\nimport { BOTH, CLUSTER_LEVEL, NAMESPACED } from '@shell/store/type-map';\nimport { filterBy, findBy } from '@shell/utils/array';\nimport { ApiError, ClusterNotFoundError } from '@shell/utils/error';\nimport { gcActions, gcGetters } from '@shell/utils/gc/gc-root-store';\nimport {\n  NAMESPACE_FILTER_ALL_ORPHANS as ALL_ORPHANS,\n  NAMESPACE_FILTER_ALL_SYSTEM as ALL_SYSTEM,\n  NAMESPACE_FILTER_ALL_USER as ALL_USER,\n  NAMESPACE_FILTER_NAMESPACED_NO as NAMESPACED_NO,\n  NAMESPACE_FILTER_NAMESPACED_PREFIX as NAMESPACED_PREFIX,\n  NAMESPACE_FILTER_NAMESPACED_YES as NAMESPACED_YES,\n  splitNamespaceFilterKey,\n  NAMESPACE_FILTER_NS_FULL_PREFIX,\n} from '@shell/utils/namespace-filter';\nimport { allHash, allHashSettled } from '@shell/utils/promise';\nimport { sortBy } from '@shell/utils/sort';\nimport { addParam } from '@shell/utils/url';\nimport semver from 'semver';\nimport { STORE, BLANK_CLUSTER } from '@shell/store/store-types';\nimport { isDevBuild } from '@shell/utils/version';\n\n// Disables strict mode for all store instances to prevent warning about changing state outside of mutations\n// because it's more efficient to do that sometimes.\nexport const strict = false;\n\nexport const plugins = [\n  Steve({\n    namespace:      STORE.MANAGEMENT,\n    baseUrl:        '/v1',\n    modelBaseClass: BY_TYPE,\n    supportsStream: false, // true, -- Disabled due to report that it's sometimes much slower in Chrome\n  }),\n  Steve({\n    namespace:      STORE.CLUSTER,\n    baseUrl:        '', // URL is dynamically set for the selected cluster\n    supportsStream: false, // true, -- Disabled due to report that it's sometimes much slower in Chrome\n    supportsGc:     true, // Enable garbage collection for this store only\n  }),\n  Steve({\n    namespace:      STORE.RANCHER,\n    baseUrl:        '/v3',\n    supportsStream: false, // The norman API doesn't support streaming\n    modelBaseClass: STEVE_MODEL_TYPES.NORMAN,\n  }),\n];\n\n/**\n * Get all the namespaces categories\n * @returns Record<string, true>\n */\nconst getActiveNamespacesCategories = (getters, namespaces, filters) => {\n  // Split namespaces by category\n  const includeAll = getters.isAllNamespaces;\n  const includeSystem = filters.includes(ALL_SYSTEM);\n  const includeUser = filters.includes(ALL_USER);\n  const includeOrphans = filters.includes(ALL_ORPHANS);\n\n  // Categories to pull in all the user, system, or orphaned namespaces\n  const hasCategory = includeAll || includeOrphans || includeSystem || includeUser;\n\n  return hasCategory ? Object.values(namespaces).reduce((acc, ns) => {\n    if (\n      includeAll ||\n      (includeOrphans && !ns.projectId) ||\n      (includeUser && !ns.isSystem) ||\n      (includeSystem && ns.isSystem)\n    ) {\n      acc[ns.id] = true;\n    }\n\n    return acc;\n  }, {}) : {};\n};\n\n/**\n * Get handpicked namespaces from the filters\n * @returns Record<string, true>\n */\nconst getActiveSingleNamespaces = (getters, filters) => {\n  const activeNamespaces = {};\n\n  // Individual cases for stacked project and/or namespace filters\n  if ( !getters.isAllNamespaces ) {\n    const clusterId = getters['currentCluster']?.id;\n\n    for ( const filter of filters ) {\n      const [type, id] = filter.split('://', 2);\n\n      if ( !type ) {\n        continue;\n      }\n\n      if ( type === 'ns' ) {\n        activeNamespaces[id] = true;\n      } else if (type === 'project') {\n        // Set all the namespaces contained in the project\n        const project = getters['management/byId'](MANAGEMENT.PROJECT, `${ clusterId }/${ id }`);\n\n        if ( project ) {\n          for ( const projectNamespace of project.namespaces ) {\n            activeNamespaces[projectNamespace.id] = true;\n          }\n        }\n      }\n    }\n  }\n\n  return activeNamespaces;\n};\n\n/**\n * Get only namespaces for user with roles \"Cluster Member\" and \"View All Projects\"\n * @returns Record<string, true>\n */\nconst getReadOnlyActiveNamespaces = (namespaces, activeNamespaces) => {\n  const readonlyNamespaces = Object\n    .values(namespaces)\n    .filter((ns) => !!ns.links.update)\n    .map(({ id }) => id);\n\n  return Object.keys(activeNamespaces)\n    .filter((ns) => readonlyNamespaces.includes(ns))\n    .reduce((acc, ns) => ({\n      ...acc,\n      [ns]: true\n    }), {});\n};\n\n/**\n * Collect all the namespaces grouped by category, project or single pick\n * @returns Record<string, true>\n */\nconst getActiveNamespaces = (state, getters, readonly = false) => {\n  const product = getters['currentProduct'];\n\n  if ( !product ) {\n    return {};\n  }\n\n  // TODO: Add comment with logic for fleet\n  if ( product.showWorkspaceSwitcher ) {\n    const fleetOut = { [state.workspace]: true };\n\n    updateActiveNamespaceCache(state, fleetOut);\n\n    return fleetOut;\n  }\n\n  // Reset cache if no cluster is found or is not in store\n  const inStore = product?.inStore;\n  const clusterId = getters['currentCluster']?.id;\n\n  if ( !clusterId || !inStore ) {\n    updateActiveNamespaceCache(state, {});\n\n    return {};\n  }\n\n  // Use default \"All Namespaces\" category if no namespaces is found\n  const hasNamespaces = Array.isArray(state.allNamespaces) && state.allNamespaces.length > 0;\n  const allNamespaces = hasNamespaces ? state.allNamespaces : getters[`${ inStore }/all`](NAMESPACE);\n\n  const allowedNamespaces = allNamespaces\n    .filter((ns) => state.prefs.data['all-namespaces'] ? true : !ns.isObscure) // Filter out Rancher system namespaces\n    .filter((ns) => product.hideSystemResources ? !ns.isSystem : true); // Filter out Fleet system namespaces\n\n  // Retrieve all the filters selected by the user\n  const filters = state.namespaceFilters.filter(\n    (filters) => !!filters && !`${ filters }`.startsWith(NAMESPACED_PREFIX)\n  );\n\n  const activeNamespaces = {\n    ...getActiveNamespacesCategories(getters, allowedNamespaces, filters),\n    ...getActiveSingleNamespaces(getters, filters),\n  };\n\n  // Create map that can be used to efficiently check if a resource should be displayed\n  updateActiveNamespaceCache(state, activeNamespaces);\n\n  // Exclude namespaces restricted to the user for writing\n  if (readonly) {\n    return getReadOnlyActiveNamespaces(allowedNamespaces, activeNamespaces);\n  }\n\n  return activeNamespaces;\n};\n\n/**\n * Caching side-effect while retrieving namespaces filters\n */\nconst updateActiveNamespaceCache = (state, activeNamespaceCache) => {\n  // This is going to run a lot, so keep it optimised\n  let cacheKey = '';\n\n  for (const key in activeNamespaceCache) {\n    // I thought array.join would be faster than string concatenation, but in places like this where the array must first be constructed it's\n    // slower.\n    cacheKey += key + activeNamespaceCache[key];\n  }\n\n  // Only update `activeNamespaceCache` if there have been changes. This reduces a lot of churn\n  if (state.activeNamespaceCacheKey !== cacheKey) {\n    state.activeNamespaceCacheKey = cacheKey;\n    state.activeNamespaceCache = activeNamespaceCache;\n  }\n};\n\nexport const state = () => {\n  return {\n    managementReady:         false,\n    clusterReady:            false,\n    isRancher:               false,\n    namespaceFilters:        [],\n    activeNamespaceCache:    {}, // Used to efficiently check if a resource should be displayed\n    activeNamespaceCacheKey: '', // Fingerprint of activeNamespaceCache\n    allNamespaces:           [],\n    allWorkspaces:           [],\n    clusterId:               null,\n    productId:               null,\n    workspace:               null,\n    error:                   null,\n    cameFromError:           false,\n    pageActions:             [],\n    serverVersion:           null,\n    systemNamespaces:        [],\n    isSingleProduct:         undefined,\n    isRancherInHarvester:    false,\n    targetRoute:             null\n  };\n};\n\nexport const getters = {\n  clusterReady(state) {\n    return state.clusterReady === true;\n  },\n\n  isMultiCluster(state, getters) {\n    const clusters = getters['management/all'](MANAGEMENT.CLUSTER);\n\n    if (clusters.length === 1 && clusters[0].metadata?.name === 'local') {\n      return false;\n    } else {\n      return true;\n    }\n  },\n\n  isRancher(state) {\n    return state.isRancher === true;\n  },\n\n  clusterId(state) {\n    return state.clusterId;\n  },\n\n  productId(state, getters) {\n    return state.productId;\n  },\n\n  workspace(state, getters) {\n    return state.workspace;\n  },\n\n  pageActions(state) {\n    return state.pageActions;\n  },\n\n  systemNamespaces(state) {\n    return state.systemNamespaces;\n  },\n\n  currentCluster(state, getters) {\n    return getters['management/byId'](MANAGEMENT.CLUSTER, state.clusterId);\n  },\n\n  currentProduct(state, getters) {\n    const active = getters['type-map/activeProducts'];\n\n    let out = findBy(active, 'name', state.productId);\n\n    if ( !out ) {\n      out = findBy(active, 'name', EXPLORER);\n    }\n\n    if ( !out ) {\n      out = active[0];\n    }\n\n    return out;\n  },\n\n  getStoreNameByProductId(state) {\n    const products = state['type-map']?.products;\n\n    return (products.find((p) => p.name === state.productId) || {})?.inStore || 'cluster';\n  },\n\n  currentStore(state, getters) {\n    return (type) => {\n      const product = getters['currentProduct'];\n\n      if (!product) {\n        return 'cluster';\n      }\n\n      if (type && product.typeStoreMap?.[type]) {\n        return product.typeStoreMap[type];\n      }\n\n      return product.inStore;\n    };\n  },\n\n  isExplorer(state, getters) {\n    const product = getters.currentProduct;\n\n    if ( !product ) {\n      return false;\n    }\n\n    return product.name === EXPLORER || product.inStore === 'cluster';\n  },\n\n  defaultClusterId(state, getters) {\n    const all = getters['management/all'](MANAGEMENT.CLUSTER);\n    const clusters = sortBy(filterBy(all, 'isReady'), 'nameDisplay');\n\n    const desired = getters['prefs/get'](CLUSTER_PREF);\n\n    if ( clusters.find((x) => x.id === desired) ) {\n      return desired;\n    } else if ( clusters.length ) {\n      return clusters[0].id;\n    }\n\n    return BLANK_CLUSTER;\n  },\n\n  isAllNamespaces(state, getters) {\n    const product = getters['currentProduct'];\n\n    if ( !product ) {\n      return true;\n    }\n\n    if ( product.showWorkspaceSwitcher ) {\n      return false;\n    }\n\n    if ( !product.showNamespaceFilter && !getters['isExplorer'] ) {\n      return true;\n    }\n\n    return state.namespaceFilters.filter((x) => !`${ x }`.startsWith(NAMESPACED_PREFIX)).length === 0;\n  },\n\n  isMultipleNamespaces(state, getters) {\n    const product = getters['currentProduct'];\n\n    if ( !product ) {\n      return true;\n    }\n\n    if ( product.showWorkspaceSwitcher ) {\n      return false;\n    }\n\n    if ( getters.isAllNamespaces ) {\n      return true;\n    }\n\n    const filters = state.namespaceFilters;\n\n    if ( filters.length !== 1 ) {\n      return true;\n    }\n\n    return !filters[0].startsWith(NAMESPACE_FILTER_NS_FULL_PREFIX);\n  },\n\n  namespaceFilters(state) {\n    const filters = state.namespaceFilters.filter((x) => !!x && !`${ x }`.startsWith(NAMESPACED_PREFIX));\n\n    return filters;\n  },\n\n  namespaceMode(state, getters) {\n    const filters = state.namespaceFilters;\n    const product = getters['currentProduct'];\n\n    if ( !product?.showNamespaceFilter ) {\n      return BOTH;\n    }\n\n    // Explicitly asking\n    if ( filters.includes(NAMESPACED_YES) ) {\n      return NAMESPACED;\n    } else if ( filters.includes(NAMESPACED_NO) ) {\n      return CLUSTER_LEVEL;\n    }\n\n    const byKind = {};\n\n    for ( const filter of filters ) {\n      const type = filter.split('://', 2)[0];\n\n      byKind[type] = (byKind[type] || 0) + 1;\n    }\n\n    if ( byKind['project'] > 0 || byKind['ns'] > 0 ) {\n      return NAMESPACED;\n    }\n\n    return BOTH;\n  },\n\n  activeNamespaceCache(state) {\n    // The activeNamespaceCache value is updated by the\n    // updateNamespaces mutation. We use this map to filter workloads\n    // as we don't want to recompute the active namespaces\n    // for each workload in a list.\n    return state.activeNamespaceCache;\n  },\n\n  activeNamespaceCacheKey(state) {\n    return state.activeNamespaceCacheKey;\n  },\n\n  activeNamespaceFilters(state) {\n    return state.namespaceFilters;\n  },\n\n  allNamespaces(state) {\n    return state.allNamespaces;\n  },\n\n  namespaces(state, getters) {\n    // Call this getter if you want to recompute the active namespaces\n    // by looping over all namespaces in a cluster. Otherwise call activeNamespaceCache,\n    // which returns the same object but is only recomputed when the updateNamespaces\n    // mutation is called.\n    return () => getActiveNamespaces(state, getters);\n  },\n\n  /**\n   * Return namespaces which the user can refer to create resources\n   * @returns Record<string, true>\n   */\n  allowedNamespaces(state, getters) {\n    return () => getActiveNamespaces(state, getters, true);\n  },\n\n  defaultNamespace(state, getters, rootState, rootGetters) {\n    const product = getters['currentProduct'];\n\n    if ( !product ) {\n      return 'default';\n    }\n\n    const inStore = product.inStore;\n    const filteredMap = getters['activeNamespaceCache'];\n    const isAll = getters['isAllNamespaces'];\n    const all = getters[`${ inStore }/all`](NAMESPACE).map((x) => x.id);\n    let out;\n\n    function isOk() {\n      if ( !out ) {\n        return false;\n      }\n\n      return (isAll && all.includes(out) ) ||\n             (!isAll && filteredMap && filteredMap[out] );\n    }\n\n    out = rootGetters['prefs/get'](LAST_NAMESPACE);\n    if ( isOk() ) {\n      return out;\n    }\n\n    out = 'default';\n    if ( isOk() ) {\n      return out;\n    }\n\n    if ( !isAll ) {\n      const keys = Object.keys(filteredMap);\n\n      if ( keys.length ) {\n        return keys[0];\n      }\n    }\n\n    return all[0];\n  },\n\n  backToRancherGlobalLink(state) {\n    let link = '/g';\n\n    if ( process.env.dev ) {\n      link = `https://localhost:8000${ link }`;\n    }\n\n    return link;\n  },\n\n  backToRancherLink(state) {\n    const clusterId = state.clusterId;\n\n    let link = '/g';\n\n    if ( clusterId ) {\n      link = `/c/${ escape(clusterId) }`;\n    }\n\n    if ( process.env.dev ) {\n      link = `https://localhost:8000${ link }`;\n    }\n\n    return link;\n  },\n\n  rancherLink(getters) {\n    if ( process.env.dev ) {\n      return `https://localhost:8000/`;\n    }\n\n    return '/';\n  },\n\n  isSingleProduct(state) {\n    if (state.isSingleProduct !== undefined) {\n      return state.isSingleProduct;\n    }\n\n    return false;\n  },\n\n  isRancherInHarvester(state) {\n    return state.isRancherInHarvester;\n  },\n\n  isVirtualCluster(state, getters) {\n    const cluster = getters['currentCluster'];\n\n    return cluster?.status?.provider === VIRTUAL_HARVESTER_PROVIDER;\n  },\n\n  isStandaloneHarvester(state, getters) {\n    const clusters = getters['management/all'](MANAGEMENT.CLUSTER);\n    const cluster = clusters.find((c) => c.id === 'local') || {};\n\n    return getters['isSingleProduct'] && cluster.isHarvester && !getters['isRancherInHarvester'];\n  },\n\n  showTopLevelMenu(getters) {\n    return getters['isRancherInHarvester'] || getters['isMultiCluster'] || !getters['isSingleProduct'];\n  },\n\n  targetRoute(state) {\n    return state.targetRoute;\n  },\n\n  releaseNotesUrl(state, getters) {\n    const version = getters['management/byId'](MANAGEMENT.SETTING, 'server-version')?.value;\n\n    const base = 'https://github.com/rancher/rancher/releases';\n\n    if (version && !isDevBuild(version)) {\n      return `${ base }/tag/${ version }`;\n    }\n\n    return `${ base }/latest`;\n  },\n\n  ...gcGetters\n};\n\nexport const mutations = {\n  managementChanged(state, { ready, isRancher }) {\n    state.managementReady = ready;\n    state.isRancher = isRancher;\n  },\n  clusterReady(state, ready) {\n    state.clusterReady = ready;\n  },\n\n  isRancherInHarvester(state, neu) {\n    state.isRancherInHarvester = neu;\n  },\n\n  updateNamespaces(state, { filters, all, getters }) {\n    state.namespaceFilters = filters.filter((x) => !!x);\n\n    if ( all ) {\n      state.allNamespaces = all;\n    }\n    // Create map that can be used to efficiently check if a\n    // resource should be displayed\n    getActiveNamespaces(state, getters);\n  },\n\n  changeAllNamespaces(state, namespace) {\n    // `allNamespaces/changeAllNamespaces` allow products to restrict the namespaces shown to the user in the NamespaceFilter and NameNsDescription components.\n    // You can configure the `notFilterNamespace` parameter for each resource page to define namespaces that do not need to be filtered,  and then change `allNamespaces` by calling `changeAllNamespaces`\n    // eg:\n    // const notFilterNamespaces = this.$store.getters[`type-map/optionsFor`](resource).notFilterNamespace || [];\n    // const allNamespaces = this.$store.getters[`${ this.currentProduct.inStore }/filterNamespace`](notFilterNamespaces);\n    state.allNamespaces = namespace;\n  },\n\n  pageActions(state, pageActions) {\n    state.pageActions = pageActions;\n  },\n\n  updateWorkspace(state, { value, all, getters }) {\n    if ( all ) {\n      state.allWorkspaces = all;\n\n      if ( findBy(all, 'id', value) ) {\n        // The value is a valid option, good\n      } else if ( findBy(all, 'id', DEFAULT_WORKSPACE) ) {\n        // How about the default\n        value = DEFAULT_WORKSPACE;\n      } else if ( all.length ) {\n        value = all[0].id;\n      }\n    }\n\n    state.workspace = value;\n    getActiveNamespaces(state, getters);\n  },\n\n  clusterId(state, neu) {\n    state.clusterId = neu;\n  },\n\n  setProduct(state, neu) {\n    state.productId = neu;\n  },\n\n  setError(state, { error: obj, locationError }) {\n    const err = new ApiError(obj);\n\n    console.log('Loading error', err); // eslint-disable-line no-console\n    console.log('(actual error)', obj); // eslint-disable-line no-console\n    // Location of error, with description and stack trace\n    console.log('Loading error location', locationError); // eslint-disable-line no-console\n    console.log('Loading original error', obj); // eslint-disable-line no-console\n\n    state.error = err;\n    state.cameFromError = true;\n  },\n\n  cameFromError(state) {\n    state.cameFromError = true;\n  },\n\n  setServerVersion(state, version) {\n    state.serverVersion = version;\n  },\n\n  setSystemNamespaces(state, namespaces) {\n    state.systemNamespaces = namespaces;\n  },\n\n  setIsSingleProduct(state, isSingleProduct) {\n    state.isSingleProduct = isSingleProduct;\n  },\n\n  targetRoute(state, route) {\n    state.targetRoute = route;\n  }\n};\n\nexport const actions = {\n  async loadManagement({\n    getters, state, commit, dispatch, rootGetters\n  }) {\n    if ( state.managementReady) {\n      // Do nothing, it's already loaded\n      return;\n    }\n\n    console.log('Loading management...'); // eslint-disable-line no-console\n\n    try {\n      await dispatch('rancher/findAll', { type: NORMAN.PRINCIPAL, opt: { url: 'principals' } });\n    } catch (e) {\n      // Maybe not Rancher\n    }\n\n    let res = await allHashSettled({\n      mgmtSubscribe:  dispatch('management/subscribe'),\n      mgmtSchemas:    dispatch('management/loadSchemas', true),\n      rancherSchemas: dispatch('rancher/loadSchemas', true),\n    });\n\n    const promises = {\n      // Clusters guaranteed always available or your money back\n      clusters: dispatch('management/findAll', { type: MANAGEMENT.CLUSTER }),\n\n      // Features checks on its own if they are available\n      features: dispatch('features/loadServer'),\n    };\n\n    const isRancher = res.rancherSchemas.status === 'fulfilled' && !!getters['management/schemaFor'](MANAGEMENT.PROJECT);\n\n    if ( isRancher ) {\n      promises['prefs'] = dispatch('prefs/loadServer');\n      promises['rancherSubscribe'] = dispatch('rancher/subscribe');\n    }\n\n    if ( getters['management/schemaFor'](COUNT) ) {\n      promises['counts'] = dispatch('management/findAll', { type: COUNT });\n    }\n\n    if ( getters['management/canList'](MANAGEMENT.SETTING) ) {\n      promises['settings'] = dispatch('management/findAll', { type: MANAGEMENT.SETTING });\n    }\n\n    if ( getters['management/schemaFor'](NAMESPACE) ) {\n      promises['namespaces'] = dispatch('management/findAll', { type: NAMESPACE });\n    }\n\n    const fleetSchema = getters['management/schemaFor'](FLEET.WORKSPACE);\n\n    if (fleetSchema?.links?.collection) {\n      promises['workspaces'] = dispatch('management/findAll', { type: FLEET.WORKSPACE });\n    }\n\n    res = await allHash(promises);\n    dispatch('i18n/init');\n    const isMultiCluster = getters['isMultiCluster'];\n\n    // If the local cluster is a Harvester cluster and 'rancher-manager-support' is true, it means that the embedded Rancher is being used.\n    const localCluster = res.clusters?.find((c) => c.id === 'local');\n\n    if (localCluster?.isHarvester) {\n      const harvesterSetting = await dispatch('cluster/findAll', { type: HCI.SETTING, opt: { url: `/v1/harvester/${ HCI.SETTING }s` } });\n      const rancherManagerSupport = harvesterSetting.find((setting) => setting.id === 'rancher-manager-support');\n      const isRancherInHarvester = (rancherManagerSupport?.value || rancherManagerSupport?.default) === 'true';\n\n      commit('isRancherInHarvester', isRancherInHarvester);\n    }\n\n    const pl = res.settings?.find((x) => x.id === 'ui-pl')?.value;\n    const brand = res.settings?.find((x) => x.id === SETTING.BRAND)?.value;\n    const systemNamespaces = res.settings?.find((x) => x.id === SETTING.SYSTEM_NAMESPACES);\n\n    if ( pl ) {\n      setVendor(pl);\n    }\n\n    if (brand) {\n      setBrand(brand);\n    }\n\n    if (systemNamespaces) {\n      const namespace = (systemNamespaces.value || systemNamespaces.default)?.split(',');\n\n      commit('setSystemNamespaces', namespace);\n    }\n\n    commit('managementChanged', {\n      ready: true,\n      isRancher,\n    });\n\n    if ( res.workspaces ) {\n      commit('updateWorkspace', {\n        value: getters['prefs/get'](WORKSPACE),\n        all:   res.workspaces,\n        getters\n      });\n    }\n\n    console.log(`Done loading management; isRancher=${ isRancher }; isMultiCluster=${ isMultiCluster }`); // eslint-disable-line no-console\n  },\n\n  async loadCluster({\n    state, commit, dispatch, getters\n  }, {\n    id, product, oldProduct, oldPkg, newPkg, targetRoute\n  }) {\n    commit('targetRoute', targetRoute);\n    const sameCluster = state.clusterId && state.clusterId === id;\n    const samePackage = oldPkg?.name === newPkg?.name;\n    const sameProduct = oldProduct === product;\n    const isMultiCluster = getters['isMultiCluster'];\n\n    // Are we in the same cluster and package or product?\n    if ( sameCluster && (samePackage || sameProduct)) {\n      // Do nothing, we're already connected/connecting to this cluster\n      return;\n    }\n    const oldPkgClusterStore = oldPkg?.stores.find(\n      (s) => getters[`${ s.storeName }/isClusterStore`]\n    )?.storeName;\n\n    const newPkgClusterStore = newPkg?.stores.find(\n      (s) => getters[`${ s.storeName }/isClusterStore`]\n    )?.storeName;\n\n    const productConfig = state['type-map']?.products?.find((p) => p.name === product);\n    const forgetCurrentCluster = ((state.clusterId && id) || !samePackage) && !productConfig?.inExplorer;\n\n    // Should we leave/forget the current cluster? Only if we're going from an existing cluster to a new cluster, or the package has changed\n    // (latter catches cases like nav from explorer cluster A to epinio cluster A)\n    // AND if the product not scoped to the explorer - a case for products that only exist within the explorer (i.e. Kubewarden)\n    if ( forgetCurrentCluster ) {\n      // Clear the old cluster state out if switching to a new one.\n      // If there is not an id then stay connected to the old one behind the scenes,\n      // so that the nav and header stay the same when going to things like prefs\n      commit('clusterReady', false);\n      commit('clusterId', undefined);\n      await dispatch('cluster/unsubscribe');\n      commit('cluster/reset');\n\n      await dispatch('management/watch', {\n        type:      MANAGEMENT.PROJECT,\n        namespace: state.clusterId,\n        stop:      true\n      });\n\n      commit('management/forgetType', MANAGEMENT.PROJECT);\n      commit('catalog/reset');\n\n      if (oldPkgClusterStore) {\n        // Mirror actions on the 'cluster' store for our specific pkg `cluster` store\n        await dispatch(`${ oldPkgClusterStore }/unsubscribe`);\n        await commit(`${ oldPkgClusterStore }/reset`);\n      }\n    }\n\n    if ( id ) {\n      // Remember the current cluster\n      dispatch('prefs/set', { key: CLUSTER_PREF, value: id });\n      commit('clusterId', id);\n\n      // Use a pseudo cluster ID to pretend we have a cluster... to ensure some screens that don't care about a cluster but 'require' one to show\n      if (id === BLANK_CLUSTER) {\n        commit('clusterReady', true);\n\n        return;\n      }\n    } else {\n      // Switching to a global page with no cluster id, keep it the same.\n      return;\n    }\n\n    console.log(`Loading ${ isMultiCluster ? 'ECM ' : '' }cluster...`); // eslint-disable-line no-console\n\n    // If we've entered a new store ensure everything has loaded correctly\n    if (newPkgClusterStore) {\n      // Mirror actions on the 'cluster' store for our specific pkg `cluster` store\n      await dispatch(`${ newPkgClusterStore }/loadCluster`, { id });\n\n      commit('clusterReady', true);\n      console.log('Done loading pkg cluster:', newPkgClusterStore); // eslint-disable-line no-console\n\n      // Everything below here is rancher/kube cluster specific\n      return;\n    }\n\n    // Execute Rancher cluster specific code\n\n    // This is a workaround for a timing issue where the mgmt cluster schema may not be available\n    // Try and wait until the schema exists before proceeding\n    await dispatch('management/waitForSchema', { type: MANAGEMENT.CLUSTER });\n\n    // Similar to above, we're still waiting on loadManagement to fetch required resources\n    // If we don't have all mgmt clusters yet a request to fetch this cluster and then all clusters (in cleanNamespaces) is kicked off\n    await dispatch('management/waitForHaveAll', { type: MANAGEMENT.CLUSTER });\n\n    // See if it really exists\n    try {\n      const cluster = await dispatch('management/find', {\n        type: MANAGEMENT.CLUSTER,\n        id,\n        opt:  { url: `${ MANAGEMENT.CLUSTER }s/${ escape(id) }` }\n      });\n\n      if (!cluster.isReady) {\n        // Treat an unready cluster the same as a missing one. This ensures that we safely take user to the home page instead of showing\n        // an error page (useful if they've set the cluster as their home page and don't want to change their landing location)\n        console.warn('Cluster is not ready, cannot load it:', cluster.nameDisplay); // eslint-disable-line no-console\n        throw new Error('Unready cluster');\n      }\n    } catch {\n      commit('clusterId', null);\n      commit('cluster/applyConfig', { baseUrl: null });\n      throw new ClusterNotFoundError(id);\n    }\n\n    const clusterBase = `/k8s/clusters/${ escape(id) }/v1`;\n\n    // Update the Steve client URLs\n    commit('cluster/applyConfig',\n      { baseUrl: clusterBase });\n\n    await Promise.all([\n      dispatch('cluster/loadSchemas', true),\n    ]);\n\n    dispatch('cluster/subscribe');\n\n    const projectArgs = {\n      type: MANAGEMENT.PROJECT,\n      opt:  {\n        url:            `${ MANAGEMENT.PROJECT }/${ escape(id) }`,\n        watchNamespace: id\n      }\n    };\n\n    const fetchProjects = async() => {\n      let limit = 30000;\n      const sleep = 100;\n\n      while ( limit > 0 && !state.managementReady ) {\n        await setTimeout(() => {}, sleep);\n        limit -= sleep;\n      }\n\n      if ( getters['management/schemaFor'](MANAGEMENT.PROJECT) ) {\n        return dispatch('management/findAll', projectArgs);\n      }\n    };\n\n    const res = await allHash({\n      projects:   fetchProjects(),\n      counts:     dispatch('cluster/findAll', { type: COUNT }),\n      namespaces: dispatch('cluster/findAll', { type: NAMESPACE }),\n      navLinks:   !!getters['cluster/schemaFor'](UI.NAV_LINK) && dispatch('cluster/findAll', { type: UI.NAV_LINK }),\n    });\n\n    await dispatch('cleanNamespaces');\n\n    const filters = getters['prefs/get'](NAMESPACE_FILTERS)?.[id];\n    const allNamespaces = res.namespaces;\n\n    commit('updateNamespaces', {\n      filters: filters || [ALL_USER],\n      all:     allNamespaces,\n      getters\n    });\n\n    if (getters['currentCluster'] && getters['currentCluster'].isHarvester) {\n      await dispatch('cluster/findAll', { type: HCI.SETTING });\n    }\n\n    commit('clusterReady', true);\n\n    console.log('Done loading cluster.'); // eslint-disable-line no-console\n  },\n\n  switchNamespaces({ commit, dispatch, getters }, { ids, key }) {\n    const filters = getters['prefs/get'](NAMESPACE_FILTERS);\n\n    dispatch('prefs/set', {\n      key:   NAMESPACE_FILTERS,\n      value: {\n        ...filters,\n        [key]: ids\n      }\n    });\n\n    commit('updateNamespaces', { filters: ids, getters });\n  },\n\n  async cleanNamespaces({ getters, dispatch }) {\n    // Initialise / Remove any filters that the user no-longer has access to\n    await dispatch('management/findAll', { type: MANAGEMENT.CLUSTER }); // So they can be got byId below\n\n    const filters = getters['prefs/get'](NAMESPACE_FILTERS);\n\n    if ( !filters ) {\n      dispatch('prefs/set', {\n        key:   NAMESPACE_FILTERS,\n        value: { }\n      });\n\n      return;\n    }\n\n    const cleanFilters = {};\n\n    for ( const id in filters ) {\n      const { clusterId } = splitNamespaceFilterKey(id);\n\n      if ( getters['management/byId'](MANAGEMENT.CLUSTER, clusterId) ) {\n        cleanFilters[id] = filters[id];\n      }\n    }\n\n    if (Object.keys(filters).length !== Object.keys(cleanFilters).length) {\n      console.debug('Unknown clusters have been removed from namespace filters list (before/after)', filters, cleanFilters); // eslint-disable-line no-console\n      dispatch('prefs/set', {\n        key:   NAMESPACE_FILTERS,\n        value: cleanFilters\n      });\n    }\n  },\n\n  async onLogout(store) {\n    const { dispatch, commit, state } = store;\n\n    store.dispatch('gcStopIntervals');\n\n    Object.values(this.$plugin.getPlugins()).forEach((p) => {\n      if (p.onLogOut) {\n        p.onLogOut(store);\n      }\n    });\n\n    await dispatch('management/unsubscribe');\n    commit('managementChanged', { ready: false });\n    commit('management/reset');\n    commit('prefs/reset');\n\n    await dispatch('cluster/unsubscribe');\n    commit('clusterReady', false);\n    commit('clusterId', null);\n    commit('cluster/reset');\n\n    await dispatch('rancher/unsubscribe');\n    commit('rancher/reset');\n    commit('catalog/reset');\n\n    const router = state.$router;\n    const route = router.currentRoute;\n\n    if ( route.name === 'index' ) {\n      router.replace('/auth/login');\n    } else {\n      const backTo = window.localStorage.getItem(BACK_TO);\n\n      const isLogin = route.name === 'auth-login' || route.path === '/login'; // Cover dashboard and case of log out from ember;\n      const isLogout = route.name === 'auth-logout';\n\n      if (!backTo && !isLogin && !isLogout) {\n        window.localStorage.setItem(BACK_TO, window.location.href);\n      }\n\n      const QUERY = (LOGGED_OUT in route.query) ? LOGGED_OUT : TIMED_OUT;\n\n      router.replace(`/auth/login?${ QUERY }`);\n    }\n  },\n\n  nuxtServerInit({ dispatch, rootState }, nuxt) {\n    // Models in SSR server mode have no way to get to the route or router, so hack one in...\n    Object.defineProperty(rootState, '$router', { value: nuxt.app.router });\n    Object.defineProperty(rootState, '$route', { value: nuxt.route });\n    dispatch('prefs/loadCookies');\n  },\n\n  nuxtClientInit({ dispatch, rootState }, nuxt) {\n    Object.defineProperty(rootState, '$router', { value: nuxt.app.router });\n    Object.defineProperty(rootState, '$route', { value: nuxt.route });\n    Object.defineProperty(rootState, '$plugin', { value: nuxt.app.$plugin });\n    Object.defineProperty(this, '$plugin', { value: nuxt.app.$plugin });\n\n    dispatch('management/rehydrateSubscribe');\n    dispatch('cluster/rehydrateSubscribe');\n\n    if ( rootState.isRancher ) {\n      dispatch('rancher/rehydrateSubscribe');\n    }\n\n    dispatch('catalog/rehydrate');\n\n    dispatch('prefs/loadCookies');\n    dispatch('prefs/loadTheme');\n  },\n\n  loadingError({ commit, state }, err) {\n    commit('setError', { error: err, locationError: new Error('loadingError') });\n\n    const router = state.$router;\n\n    router.replace('/fail-whale');\n  },\n\n  updateServerVersion({ commit, state }, neu) {\n    const cur = state.serverVersion;\n\n    if ( !cur ) {\n      // If we haven't heard the current version yet, this is now it.\n      commit('setServerVersion', neu);\n\n      return;\n    }\n\n    let changed = false;\n    const semverCur = semver.coerce(cur);\n    const semverNeu = semver.coerce(neu);\n\n    if ( semver.valid(semverCur) && semver.valid(semverNeu) ) {\n      // Regular releases have regular v2.x.y tags, reload only if it's an upgrade\n      // So that we don't flap back and forth if different servers behind a LB\n      //  answer with old and new versions at the same time during an upgrade\n\n      if ( semver.lt(semverCur, semverNeu) ) {\n        changed = true;\n      }\n    } else if ( cur !== neu ) {\n      // Master and other non-releases have random names like master-head\n      // or SHA-sums.  Just look if the value changed instead her\n      changed = true;\n    }\n\n    if ( changed ) {\n      const url = addParam(window.location.href, UPGRADED, _FLAGGED);\n\n      window.location.replace(url);\n    }\n  },\n\n  setIsSingleProduct({ commit }, isSingleProduct) {\n    commit(`setIsSingleProduct`, isSingleProduct);\n  },\n\n  unsubscribe( { state, dispatch }) {\n    // It would be nice to grab all vuex module stores that we've registered, apparently this is only possible via the\n    // internal properties store._modules.root._children.\n    // So instead loop through all state entries to find stores\n    return Object.entries(state).filter(([storeName, storeState]) => {\n      if (storeState?.allowStreaming) {\n        dispatch(`${ storeName }/unsubscribe`);\n      }\n    });\n  },\n\n  ...gcActions\n};\n"],"mappings":"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","ignoreList":[]}]}