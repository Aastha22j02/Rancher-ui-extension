{"remainingRequest":"/home/ubuntu/susecon-2024-ext-demo/node_modules/babel-loader/lib/index.js??ref--16-1!/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/models/workload.js","dependencies":[{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/models/workload.js","mtime":1725271280091},{"path":"/home/ubuntu/susecon-2024-ext-demo/babel.config.js","mtime":1725268750245},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/babel-loader/lib/index.js","mtime":1725271298942}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmRlc2NyaXB0aW9uLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZnJvbS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc2xpY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvcnMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZmxlY3QuY29uc3RydWN0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgX3RvQ29uc3VtYWJsZUFycmF5IGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvQ29uc3VtYWJsZUFycmF5IjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5IjsKaW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MiOwppbXBvcnQgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4gZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiI7CmltcG9ydCBfZ2V0IGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2dldCI7CmltcG9ydCBfZ2V0UHJvdG90eXBlT2YgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZ2V0UHJvdG90eXBlT2YiOwppbXBvcnQgX2luaGVyaXRzIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2luaGVyaXRzIjsKZnVuY3Rpb24gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIociwgZSkgeyB2YXIgdCA9ICJ1bmRlZmluZWQiICE9IHR5cGVvZiBTeW1ib2wgJiYgcltTeW1ib2wuaXRlcmF0b3JdIHx8IHJbIkBAaXRlcmF0b3IiXTsgaWYgKCF0KSB7IGlmIChBcnJheS5pc0FycmF5KHIpIHx8ICh0ID0gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KHIpKSB8fCBlICYmIHIgJiYgIm51bWJlciIgPT0gdHlwZW9mIHIubGVuZ3RoKSB7IHQgJiYgKHIgPSB0KTsgdmFyIF9uID0gMCwgRiA9IGZ1bmN0aW9uIEYoKSB7fTsgcmV0dXJuIHsgczogRiwgbjogZnVuY3Rpb24gbigpIHsgcmV0dXJuIF9uID49IHIubGVuZ3RoID8geyBkb25lOiAhMCB9IDogeyBkb25lOiAhMSwgdmFsdWU6IHJbX24rK10gfTsgfSwgZTogZnVuY3Rpb24gZShyKSB7IHRocm93IHI7IH0sIGY6IEYgfTsgfSB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gaXRlcmF0ZSBub24taXRlcmFibGUgaW5zdGFuY2UuXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuIik7IH0gdmFyIG8sIGEgPSAhMCwgdSA9ICExOyByZXR1cm4geyBzOiBmdW5jdGlvbiBzKCkgeyB0ID0gdC5jYWxsKHIpOyB9LCBuOiBmdW5jdGlvbiBuKCkgeyB2YXIgciA9IHQubmV4dCgpOyByZXR1cm4gYSA9IHIuZG9uZSwgcjsgfSwgZTogZnVuY3Rpb24gZShyKSB7IHUgPSAhMCwgbyA9IHI7IH0sIGY6IGZ1bmN0aW9uIGYoKSB7IHRyeSB7IGEgfHwgbnVsbCA9PSB0LnJldHVybiB8fCB0LnJldHVybigpOyB9IGZpbmFsbHkgeyBpZiAodSkgdGhyb3cgbzsgfSB9IH07IH0KZnVuY3Rpb24gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KHIsIGEpIHsgaWYgKHIpIHsgaWYgKCJzdHJpbmciID09IHR5cGVvZiByKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkociwgYSk7IHZhciB0ID0ge30udG9TdHJpbmcuY2FsbChyKS5zbGljZSg4LCAtMSk7IHJldHVybiAiT2JqZWN0IiA9PT0gdCAmJiByLmNvbnN0cnVjdG9yICYmICh0ID0gci5jb25zdHJ1Y3Rvci5uYW1lKSwgIk1hcCIgPT09IHQgfHwgIlNldCIgPT09IHQgPyBBcnJheS5mcm9tKHIpIDogIkFyZ3VtZW50cyIgPT09IHQgfHwgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QodCkgPyBfYXJyYXlMaWtlVG9BcnJheShyLCBhKSA6IHZvaWQgMDsgfSB9CmZ1bmN0aW9uIF9hcnJheUxpa2VUb0FycmF5KHIsIGEpIHsgKG51bGwgPT0gYSB8fCBhID4gci5sZW5ndGgpICYmIChhID0gci5sZW5ndGgpOyBmb3IgKHZhciBlID0gMCwgbiA9IEFycmF5KGEpOyBlIDwgYTsgZSsrKSBuW2VdID0gcltlXTsgcmV0dXJuIG47IH0KaW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiL2hvbWUvdWJ1bnR1L3N1c2Vjb24tMjAyNC1leHQtZGVtby9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvcmVnZW5lcmF0b3IvaW5kZXguanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmZ1bmN0aW9uIG93bktleXMoZSwgcikgeyB2YXIgdCA9IE9iamVjdC5rZXlzKGUpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgbyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7IHIgJiYgKG8gPSBvLmZpbHRlcihmdW5jdGlvbiAocikgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLCByKS5lbnVtZXJhYmxlOyB9KSksIHQucHVzaC5hcHBseSh0LCBvKTsgfSByZXR1cm4gdDsgfQpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKGUpIHsgZm9yICh2YXIgciA9IDE7IHIgPCBhcmd1bWVudHMubGVuZ3RoOyByKyspIHsgdmFyIHQgPSBudWxsICE9IGFyZ3VtZW50c1tyXSA/IGFyZ3VtZW50c1tyXSA6IHt9OyByICUgMiA/IG93bktleXMoT2JqZWN0KHQpLCAhMCkuZm9yRWFjaChmdW5jdGlvbiAocikgeyBfZGVmaW5lUHJvcGVydHkoZSwgciwgdFtyXSk7IH0pIDogT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMgPyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyh0KSkgOiBvd25LZXlzKE9iamVjdCh0KSkuZm9yRWFjaChmdW5jdGlvbiAocikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgciwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LCByKSk7IH0pOyB9IHJldHVybiBlOyB9CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudmFsdWVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy50cmltLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmZ1bmN0aW9uIF9jYWxsU3VwZXIodCwgbywgZSkgeyByZXR1cm4gbyA9IF9nZXRQcm90b3R5cGVPZihvKSwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odCwgX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpID8gUmVmbGVjdC5jb25zdHJ1Y3QobywgZSB8fCBbXSwgX2dldFByb3RvdHlwZU9mKHQpLmNvbnN0cnVjdG9yKSA6IG8uYXBwbHkodCwgZSkpOyB9CmZ1bmN0aW9uIF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKSB7IHRyeSB7IHZhciB0ID0gIUJvb2xlYW4ucHJvdG90eXBlLnZhbHVlT2YuY2FsbChSZWZsZWN0LmNvbnN0cnVjdChCb29sZWFuLCBbXSwgZnVuY3Rpb24gKCkge30pKTsgfSBjYXRjaCAodCkge30gcmV0dXJuIChfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0ID0gZnVuY3Rpb24gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpIHsgcmV0dXJuICEhdDsgfSkoKTsgfQppbXBvcnQgeyBmaW5kQnksIGluc2VydEF0IH0gZnJvbSAnQHNoZWxsL3V0aWxzL2FycmF5JzsKaW1wb3J0IHsgVElNRVNUQU1QLCBDQVRUTEVfUFVCTElDX0VORFBPSU5UUyB9IGZyb20gJ0BzaGVsbC9jb25maWcvbGFiZWxzLWFubm90YXRpb25zJzsKaW1wb3J0IHsgV09SS0xPQURfVFlQRVMsIFNFUlZJQ0UsIFBPRCB9IGZyb20gJ0BzaGVsbC9jb25maWcvdHlwZXMnOwppbXBvcnQgeyBnZXQgYXMgX2dldDIsIHNldCB9IGZyb20gJ0BzaGVsbC91dGlscy9vYmplY3QnOwppbXBvcnQgZGF5IGZyb20gJ2RheWpzJzsKaW1wb3J0IHsgY29udmVydFNlbGVjdG9yT2JqLCBtYXRjaGluZywgbWF0Y2hlcyB9IGZyb20gJ0BzaGVsbC91dGlscy9zZWxlY3Rvcic7CmltcG9ydCB7IFNFUEFSQVRPUiB9IGZyb20gJ0BzaGVsbC9jb25maWcvd29ya2xvYWQnOwppbXBvcnQgV29ya2xvYWRTZXJ2aWNlIGZyb20gJ0BzaGVsbC9tb2RlbHMvd29ya2xvYWQuc2VydmljZSc7CmV4cG9ydCB2YXIgZGVmYXVsdENvbnRhaW5lciA9IHsKICBpbWFnZVB1bGxQb2xpY3k6ICdBbHdheXMnLAogIG5hbWU6ICdjb250YWluZXItMCcsCiAgc2VjdXJpdHlDb250ZXh0OiB7CiAgICBydW5Bc05vblJvb3Q6IGZhbHNlLAogICAgcmVhZE9ubHlSb290RmlsZXN5c3RlbTogZmFsc2UsCiAgICBwcml2aWxlZ2VkOiBmYWxzZSwKICAgIGFsbG93UHJpdmlsZWdlRXNjYWxhdGlvbjogZmFsc2UKICB9Cn07CnZhciBXb3JrbG9hZCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX1dvcmtsb2FkU2VydmljZSkgewogIGZ1bmN0aW9uIFdvcmtsb2FkKCkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFdvcmtsb2FkKTsKICAgIHJldHVybiBfY2FsbFN1cGVyKHRoaXMsIFdvcmtsb2FkLCBhcmd1bWVudHMpOwogIH0KICBfaW5oZXJpdHMoV29ya2xvYWQsIF9Xb3JrbG9hZFNlcnZpY2UpOwogIHJldHVybiBfY3JlYXRlQ2xhc3MoV29ya2xvYWQsIFt7CiAgICBrZXk6ICJfYXZhaWxhYmxlQWN0aW9ucyIsCiAgICBnZXQ6CiAgICAvLyByZW1vdmUgY2xvbmUgYXMgeWFtbC9lZGl0IGFzIHlhbWwgdW50aWwgQVBJIHN1cHBvcnRlZAogICAgZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgb3V0ID0gX2dldChfZ2V0UHJvdG90eXBlT2YoV29ya2xvYWQucHJvdG90eXBlKSwgIl9hdmFpbGFibGVBY3Rpb25zIiwgdGhpcyk7CiAgICAgIHZhciB0eXBlID0gdGhpcy5fdHlwZSA/IHRoaXMuX3R5cGUgOiB0aGlzLnR5cGU7CiAgICAgIHZhciBlZGl0WWFtbCA9IGZpbmRCeShvdXQsICdhY3Rpb24nLCAnZ29Ub0VkaXRZYW1sJyk7CiAgICAgIHZhciBpbmRleCA9IGVkaXRZYW1sID8gb3V0LmluZGV4T2YoZWRpdFlhbWwpIDogMDsKICAgICAgaW5zZXJ0QXQob3V0LCBpbmRleCwgewogICAgICAgIGFjdGlvbjogJ2FkZFNpZGVjYXInLAogICAgICAgIGxhYmVsOiB0aGlzLnQoJ2FjdGlvbi5hZGRTaWRlY2FyJyksCiAgICAgICAgaWNvbjogJ2ljb24gaWNvbi1wbHVzJywKICAgICAgICBlbmFibGVkOiAhIXRoaXMubGlua3MudXBkYXRlCiAgICAgIH0pOwogICAgICBpZiAodHlwZSAhPT0gV09SS0xPQURfVFlQRVMuSk9CICYmIHR5cGUgIT09IFdPUktMT0FEX1RZUEVTLkNST05fSk9CKSB7CiAgICAgICAgdmFyIF90aGlzJHNwZWMsIF90aGlzJHNwZWMyOwogICAgICAgIGluc2VydEF0KG91dCwgMCwgewogICAgICAgICAgYWN0aW9uOiAndG9nZ2xlUm9sbGJhY2tNb2RhbCcsCiAgICAgICAgICBsYWJlbDogdGhpcy50KCdhY3Rpb24ucm9sbGJhY2snKSwKICAgICAgICAgIGljb246ICdpY29uIGljb24taGlzdG9yeScsCiAgICAgICAgICBlbmFibGVkOiAhIXRoaXMubGlua3MudXBkYXRlCiAgICAgICAgfSk7CiAgICAgICAgaW5zZXJ0QXQob3V0LCAwLCB7CiAgICAgICAgICBhY3Rpb246ICdyZWRlcGxveScsCiAgICAgICAgICBsYWJlbDogdGhpcy50KCdhY3Rpb24ucmVkZXBsb3knKSwKICAgICAgICAgIGljb246ICdpY29uIGljb24tcmVmcmVzaCcsCiAgICAgICAgICBlbmFibGVkOiAhIXRoaXMubGlua3MudXBkYXRlLAogICAgICAgICAgYnVsa2FibGU6IHRydWUKICAgICAgICB9KTsKICAgICAgICBpbnNlcnRBdChvdXQsIDAsIHsKICAgICAgICAgIGFjdGlvbjogJ3BhdXNlJywKICAgICAgICAgIGxhYmVsOiB0aGlzLnQoJ2FzeW5jQnV0dG9uLnBhdXNlLmFjdGlvbicpLAogICAgICAgICAgaWNvbjogJ2ljb24gaWNvbi1wYXVzZScsCiAgICAgICAgICBlbmFibGVkOiAhIXRoaXMubGlua3MudXBkYXRlICYmICEoKF90aGlzJHNwZWMgPSB0aGlzLnNwZWMpICE9PSBudWxsICYmIF90aGlzJHNwZWMgIT09IHZvaWQgMCAmJiBfdGhpcyRzcGVjLnBhdXNlZCkKICAgICAgICB9KTsKICAgICAgICBpbnNlcnRBdChvdXQsIDAsIHsKICAgICAgICAgIGFjdGlvbjogJ3Jlc3VtZScsCiAgICAgICAgICBsYWJlbDogdGhpcy50KCdhc3luY0J1dHRvbi5yZXN1bWUuYWN0aW9uJyksCiAgICAgICAgICBpY29uOiAnaWNvbiBpY29uLXBsYXknLAogICAgICAgICAgZW5hYmxlZDogISF0aGlzLmxpbmtzLnVwZGF0ZSAmJiAoKF90aGlzJHNwZWMyID0gdGhpcy5zcGVjKSA9PT0gbnVsbCB8fCBfdGhpcyRzcGVjMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkc3BlYzIucGF1c2VkKSA9PT0gdHJ1ZQogICAgICAgIH0pOwogICAgICB9CiAgICAgIGluc2VydEF0KG91dCwgMCwgewogICAgICAgIGRpdmlkZXI6IHRydWUKICAgICAgfSk7CiAgICAgIGluc2VydEF0KG91dCwgMCwgewogICAgICAgIGFjdGlvbjogJ29wZW5TaGVsbCcsCiAgICAgICAgZW5hYmxlZDogISF0aGlzLmxpbmtzLnZpZXcsCiAgICAgICAgaWNvbjogJ2ljb24gaWNvbi1mdyBpY29uLWNoZXZyb24tcmlnaHQnLAogICAgICAgIGxhYmVsOiB0aGlzLnQoJ2FjdGlvbi5vcGVuU2hlbGwnKSwKICAgICAgICB0b3RhbDogMQogICAgICB9KTsKICAgICAgdmFyIHRvRmlsdGVyID0gWydjbG9uZVlhbWwnXTsKICAgICAgb3V0ID0gb3V0LmZpbHRlcihmdW5jdGlvbiAoYWN0aW9uKSB7CiAgICAgICAgaWYgKCF0b0ZpbHRlci5pbmNsdWRlcyhhY3Rpb24uYWN0aW9uKSkgewogICAgICAgICAgcmV0dXJuIGFjdGlvbjsKICAgICAgICB9CiAgICAgIH0pOwogICAgICByZXR1cm4gb3V0OwogICAgfQogIH0sIHsKICAgIGtleTogImFwcGx5RGVmYXVsdHMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGFwcGx5RGVmYXVsdHModm0pIHsKICAgICAgdmFyIF90aGlzJHNwZWMzID0gdGhpcy5zcGVjLAogICAgICAgIHNwZWMgPSBfdGhpcyRzcGVjMyA9PT0gdm9pZCAwID8ge30gOiBfdGhpcyRzcGVjMzsKICAgICAgaWYgKHRoaXMudHlwZSA9PT0gV09SS0xPQURfVFlQRVMuQ1JPTl9KT0IpIHsKICAgICAgICBpZiAoIXNwZWMuam9iVGVtcGxhdGUpIHsKICAgICAgICAgIHNwZWMuam9iVGVtcGxhdGUgPSB7CiAgICAgICAgICAgIHNwZWM6IHsKICAgICAgICAgICAgICB0ZW1wbGF0ZTogewogICAgICAgICAgICAgICAgc3BlYzogewogICAgICAgICAgICAgICAgICByZXN0YXJ0UG9saWN5OiAnTmV2ZXInLAogICAgICAgICAgICAgICAgICBjb250YWluZXJzOiBbewogICAgICAgICAgICAgICAgICAgIGltYWdlUHVsbFBvbGljeTogJ0Fsd2F5cycsCiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ2NvbnRhaW5lci0wJwogICAgICAgICAgICAgICAgICB9XSwKICAgICAgICAgICAgICAgICAgaW5pdENvbnRhaW5lcnM6IFtdCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAoIXNwZWMucmVwbGljYXMgJiYgc3BlYy5yZXBsaWNhcyAhPT0gMCkgewogICAgICAgICAgc3BlYy5yZXBsaWNhcyA9IDE7CiAgICAgICAgfQogICAgICAgIGlmICghc3BlYy50ZW1wbGF0ZSkgewogICAgICAgICAgc3BlYy50ZW1wbGF0ZSA9IHsKICAgICAgICAgICAgc3BlYzogewogICAgICAgICAgICAgIHJlc3RhcnRQb2xpY3k6IHRoaXMudHlwZSA9PT0gV09SS0xPQURfVFlQRVMuSk9CID8gJ05ldmVyJyA6ICdBbHdheXMnLAogICAgICAgICAgICAgIGNvbnRhaW5lcnM6IFtfb2JqZWN0U3ByZWFkKHt9LCBkZWZhdWx0Q29udGFpbmVyKV0sCiAgICAgICAgICAgICAgaW5pdENvbnRhaW5lcnM6IFtdCiAgICAgICAgICAgIH0KICAgICAgICAgIH07CiAgICAgICAgfQogICAgICAgIGlmICghc3BlYy5zZWxlY3RvcikgewogICAgICAgICAgc3BlYy5zZWxlY3RvciA9IHt9OwogICAgICAgIH0KICAgICAgfQogICAgICB2bS4kc2V0KHRoaXMsICdzcGVjJywgc3BlYyk7CiAgICB9CiAgfSwgewogICAga2V5OiAidG9nZ2xlUm9sbGJhY2tNb2RhbCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdG9nZ2xlUm9sbGJhY2tNb2RhbCgpIHsKICAgICAgdmFyIHdvcmtsb2FkID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB0aGlzOwogICAgICB0aGlzLiRkaXNwYXRjaCgncHJvbXB0TW9kYWwnLCB7CiAgICAgICAgY29tcG9uZW50UHJvcHM6IHsKICAgICAgICAgIHdvcmtsb2FkOiB3b3JrbG9hZAogICAgICAgIH0sCiAgICAgICAgY29tcG9uZW50OiAnUm9sbGJhY2tXb3JrbG9hZERpYWxvZycKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAicm9sbEJhY2tXb3JrbG9hZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3JvbGxCYWNrV29ya2xvYWQgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKGNsdXN0ZXIsIHdvcmtsb2FkLCB0eXBlLCByb2xsYmFja1JlcXVlc3REYXRhKSB7CiAgICAgICAgdmFyIHJvbGxiYWNrUmVxdWVzdEJvZHksIG5hbWVzcGFjZSwgd29ya2xvYWROYW1lOwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICByb2xsYmFja1JlcXVlc3RCb2R5ID0gSlNPTi5zdHJpbmdpZnkocm9sbGJhY2tSZXF1ZXN0RGF0YSk7CiAgICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHdvcmtsb2FkKSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcih0aGlzLnQoJ3Byb21wdFJvbGxiYWNrLm11bHRpcGxlV29ya2xvYWRFcnJvcicpKTsKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIG5hbWVzcGFjZSA9IHdvcmtsb2FkLm1ldGFkYXRhLm5hbWVzcGFjZTsKICAgICAgICAgICAgICB3b3JrbG9hZE5hbWUgPSB3b3JrbG9hZC5tZXRhZGF0YS5uYW1lOwogICAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgICAqIEVuc3VyZSB3ZSBnbyBvdXQgdG8gdGhlIGNvcnJlY3QgY2x1c3RlcgogICAgICAgICAgICAgICAqCiAgICAgICAgICAgICAgICogQnVpbGQgdGhlIHJlcXVlc3QgYm9keSBpbiB0aGUgc2FtZSBmb3JtYXQgdGhhdCBrdWJlY3RsCiAgICAgICAgICAgICAgICogdXNlcyB0byBjYWxsIHRoZSBLdWJlcm5ldGVzIEFQSSB0byByb2xsIGJhY2sgYSB3b3JrbG9hZC4KICAgICAgICAgICAgICAgKiBUbyBzZWUgYW4gZXhhbXBsZSByZXF1ZXN0IGJvZHksIHJ1bjoKICAgICAgICAgICAgICAgKiBrdWJlY3RsIHJvbGxvdXQgdW5kbyBkZXBsb3ltZW50L1tkZXBsb3ltZW50IG5hbWVdIC0tdG8tcmV2aXNpb249W3JldmlzaW9uIG51bWJlcl0gLXY9OAogICAgICAgICAgICAgICAqLwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA3OwogICAgICAgICAgICAgIHJldHVybiB0aGlzLnBhdGNoKHJvbGxiYWNrUmVxdWVzdEJvZHksIHsKICAgICAgICAgICAgICAgIHVybDogIi9rOHMvY2x1c3RlcnMvIi5jb25jYXQoY2x1c3Rlci5pZCwgIi9hcGlzL2FwcHMvdjEvbmFtZXNwYWNlcy8iKS5jb25jYXQobmFtZXNwYWNlLCAiLyIpLmNvbmNhdCh0eXBlLCAiLyIpLmNvbmNhdCh3b3JrbG9hZE5hbWUpCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUsIHRoaXMpOwogICAgICB9KSk7CiAgICAgIGZ1bmN0aW9uIHJvbGxCYWNrV29ya2xvYWQoX3gsIF94MiwgX3gzLCBfeDQpIHsKICAgICAgICByZXR1cm4gX3JvbGxCYWNrV29ya2xvYWQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQogICAgICByZXR1cm4gcm9sbEJhY2tXb3JrbG9hZDsKICAgIH0oKQogIH0sIHsKICAgIGtleTogInBhdXNlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBwYXVzZSgpIHsKICAgICAgc2V0KHRoaXMuc3BlYywgJ3BhdXNlZCcsIHRydWUpOwogICAgICB0aGlzLnNhdmUoKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZXN1bWUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlc3VtZSgpIHsKICAgICAgc2V0KHRoaXMuc3BlYywgJ3BhdXNlZCcsIGZhbHNlKTsKICAgICAgdGhpcy5zYXZlKCk7CiAgICB9CiAgfSwgewogICAga2V5OiAic2NhbGVEb3duIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfc2NhbGVEb3duID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgdmFyIG5ld1NjYWxlOwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgbmV3U2NhbGUgPSB0aGlzLnNwZWMucmVwbGljYXMgLSAxOwogICAgICAgICAgICAgIGlmICghKG5ld1NjYWxlID49IDApKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDU7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgc2V0KHRoaXMuc3BlYywgJ3JlcGxpY2FzJywgbmV3U2NhbGUpOwogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNTsKICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zYXZlKCk7CiAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMiwgdGhpcyk7CiAgICAgIH0pKTsKICAgICAgZnVuY3Rpb24gc2NhbGVEb3duKCkgewogICAgICAgIHJldHVybiBfc2NhbGVEb3duLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KICAgICAgcmV0dXJuIHNjYWxlRG93bjsKICAgIH0oKQogIH0sIHsKICAgIGtleTogInNjYWxlVXAiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9zY2FsZVVwID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBzZXQodGhpcy5zcGVjLCAncmVwbGljYXMnLCB0aGlzLnNwZWMucmVwbGljYXMgKyAxKTsKICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDM7CiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2F2ZSgpOwogICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTMsIHRoaXMpOwogICAgICB9KSk7CiAgICAgIGZ1bmN0aW9uIHNjYWxlVXAoKSB7CiAgICAgICAgcmV0dXJuIF9zY2FsZVVwLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KICAgICAgcmV0dXJuIHNjYWxlVXA7CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJzdGF0ZSIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgdmFyIF90aGlzJHNwZWM0OwogICAgICBpZiAoKChfdGhpcyRzcGVjNCA9IHRoaXMuc3BlYykgPT09IG51bGwgfHwgX3RoaXMkc3BlYzQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJHNwZWM0LnBhdXNlZCkgPT09IHRydWUpIHsKICAgICAgICByZXR1cm4gJ3BhdXNlZCc7CiAgICAgIH0KICAgICAgcmV0dXJuIF9nZXQoX2dldFByb3RvdHlwZU9mKFdvcmtsb2FkLnByb3RvdHlwZSksICJzdGF0ZSIsIHRoaXMpOwogICAgfQogIH0sIHsKICAgIGtleTogIm9wZW5TaGVsbCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX29wZW5TaGVsbCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU0KCkgewogICAgICAgIHZhciBwb2RzLCBfaXRlcmF0b3IsIF9zdGVwLCBwb2Q7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNCQoX2NvbnRleHQ0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDQucHJldiA9IF9jb250ZXh0NC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDI7CiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubWF0Y2hpbmdQb2RzKCk7CiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICBwb2RzID0gX2NvbnRleHQ0LnNlbnQ7CiAgICAgICAgICAgICAgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIocG9kcyk7CiAgICAgICAgICAgICAgX2NvbnRleHQ0LnByZXYgPSA0OwogICAgICAgICAgICAgIF9pdGVyYXRvci5zKCk7CiAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICBpZiAoKF9zdGVwID0gX2l0ZXJhdG9yLm4oKSkuZG9uZSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAxMzsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBwb2QgPSBfc3RlcC52YWx1ZTsKICAgICAgICAgICAgICBpZiAoIXBvZC5pc1J1bm5pbmcpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgcG9kLm9wZW5TaGVsbCgpOwogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuYWJydXB0KCJyZXR1cm4iKTsKICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDY7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAxODsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgICBfY29udGV4dDQucHJldiA9IDE1OwogICAgICAgICAgICAgIF9jb250ZXh0NC50MCA9IF9jb250ZXh0NFsiY2F0Y2giXSg0KTsKICAgICAgICAgICAgICBfaXRlcmF0b3IuZShfY29udGV4dDQudDApOwogICAgICAgICAgICBjYXNlIDE4OgogICAgICAgICAgICAgIF9jb250ZXh0NC5wcmV2ID0gMTg7CiAgICAgICAgICAgICAgX2l0ZXJhdG9yLmYoKTsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmZpbmlzaCgxOCk7CiAgICAgICAgICAgIGNhc2UgMjE6CiAgICAgICAgICAgICAgdGhpcy4kZGlzcGF0Y2goJ2dyb3dsL2Vycm9yJywgewogICAgICAgICAgICAgICAgdGl0bGU6ICdVbmF2YWlsYWJsZScsCiAgICAgICAgICAgICAgICBtZXNzYWdlOiAnVGhlcmUgYXJlIG5vIHJ1bm5pbmcgcG9kcyB0byBleGVjdXRlIGEgc2hlbGwgaW4uJwogICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgY2FzZSAyMjoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNCwgdGhpcywgW1s0LCAxNSwgMTgsIDIxXV0pOwogICAgICB9KSk7CiAgICAgIGZ1bmN0aW9uIG9wZW5TaGVsbCgpIHsKICAgICAgICByZXR1cm4gX29wZW5TaGVsbC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CiAgICAgIHJldHVybiBvcGVuU2hlbGw7CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJhZGRTaWRlY2FyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRTaWRlY2FyKCkgewogICAgICByZXR1cm4gdGhpcy5nb1RvRWRpdCh7CiAgICAgICAgc2lkZWNhcjogdHJ1ZQogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzaG93UG9kUmVzdGFydHMiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQogIH0sIHsKICAgIGtleTogInJlc3RhcnRDb3VudCIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgdmFyIHBvZHMgPSB0aGlzLnBvZHM7CiAgICAgIHZhciBzdW0gPSAwOwogICAgICBwb2RzLmZvckVhY2goZnVuY3Rpb24gKHBvZCkgewogICAgICAgIGlmIChwb2Quc3RhdHVzLmNvbnRhaW5lclN0YXR1c2VzKSB7CiAgICAgICAgICB2YXIgX3BvZCRzdGF0dXM7CiAgICAgICAgICBzdW0gKz0gKChfcG9kJHN0YXR1cyA9IHBvZC5zdGF0dXMpID09PSBudWxsIHx8IF9wb2Qkc3RhdHVzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcG9kJHN0YXR1cy5jb250YWluZXJTdGF0dXNlc1swXS5yZXN0YXJ0Q291bnQpIHx8IDA7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgcmV0dXJuIHN1bTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJoYXNTaWRlY2FycyIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgdmFyIF90aGlzJHNwZWM1LCBfdGhpcyRzcGVjNjsKICAgICAgdmFyIHBvZFRlbXBsYXRlU3BlYyA9IHRoaXMudHlwZSA9PT0gV09SS0xPQURfVFlQRVMuQ1JPTl9KT0IgPyB0aGlzID09PSBudWxsIHx8IHRoaXMgPT09IHZvaWQgMCB8fCAoX3RoaXMkc3BlYzUgPSB0aGlzLnNwZWMpID09PSBudWxsIHx8IF90aGlzJHNwZWM1ID09PSB2b2lkIDAgfHwgKF90aGlzJHNwZWM1ID0gX3RoaXMkc3BlYzUuam9iVGVtcGxhdGUpID09PSBudWxsIHx8IF90aGlzJHNwZWM1ID09PSB2b2lkIDAgfHwgKF90aGlzJHNwZWM1ID0gX3RoaXMkc3BlYzUuc3BlYykgPT09IG51bGwgfHwgX3RoaXMkc3BlYzUgPT09IHZvaWQgMCB8fCAoX3RoaXMkc3BlYzUgPSBfdGhpcyRzcGVjNS50ZW1wbGF0ZSkgPT09IG51bGwgfHwgX3RoaXMkc3BlYzUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJHNwZWM1LnNwZWMgOiAoX3RoaXMkc3BlYzYgPSB0aGlzLnNwZWMpID09PSBudWxsIHx8IF90aGlzJHNwZWM2ID09PSB2b2lkIDAgfHwgKF90aGlzJHNwZWM2ID0gX3RoaXMkc3BlYzYudGVtcGxhdGUpID09PSBudWxsIHx8IF90aGlzJHNwZWM2ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRzcGVjNi5zcGVjOwogICAgICB2YXIgX3BvZFRlbXBsYXRlU3BlYyRjb250ID0gcG9kVGVtcGxhdGVTcGVjLmNvbnRhaW5lcnMsCiAgICAgICAgY29udGFpbmVycyA9IF9wb2RUZW1wbGF0ZVNwZWMkY29udCA9PT0gdm9pZCAwID8gW10gOiBfcG9kVGVtcGxhdGVTcGVjJGNvbnQsCiAgICAgICAgX3BvZFRlbXBsYXRlU3BlYyRpbml0ID0gcG9kVGVtcGxhdGVTcGVjLmluaXRDb250YWluZXJzLAogICAgICAgIGluaXRDb250YWluZXJzID0gX3BvZFRlbXBsYXRlU3BlYyRpbml0ID09PSB2b2lkIDAgPyBbXSA6IF9wb2RUZW1wbGF0ZVNwZWMkaW5pdDsKICAgICAgcmV0dXJuIGNvbnRhaW5lcnMubGVuZ3RoID4gMSB8fCBpbml0Q29udGFpbmVycy5sZW5ndGg7CiAgICB9CiAgfSwgewogICAga2V5OiAiY3VzdG9tVmFsaWRhdGlvblJ1bGVzIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgdHlwZSA9IHRoaXMuX3R5cGUgPyB0aGlzLl90eXBlIDogdGhpcy50eXBlOwogICAgICB2YXIgcG9kU3BlY1BhdGggPSB0eXBlID09PSBXT1JLTE9BRF9UWVBFUy5DUk9OX0pPQiA/ICdzcGVjLmpvYlRlbXBsYXRlLnNwZWMudGVtcGxhdGUuc3BlYycgOiAnc3BlYy50ZW1wbGF0ZS5zcGVjJzsKICAgICAgdmFyIG91dCA9IFt7CiAgICAgICAgbnVsbGFibGU6IGZhbHNlLAogICAgICAgIHBhdGg6ICdtZXRhZGF0YS5uYW1lJywKICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICB0cmFuc2xhdGlvbktleTogJ2dlbmVyaWMubmFtZScsCiAgICAgICAgdHlwZTogJ3N1YkRvbWFpbicKICAgICAgfSwgewogICAgICAgIG51bGxhYmxlOiBmYWxzZSwKICAgICAgICBwYXRoOiAnc3BlYycsCiAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgdHlwZTogJ29iamVjdCcsCiAgICAgICAgdmFsaWRhdG9yczogWydjb250YWluZXJJbWFnZXMnXQogICAgICB9LCB7CiAgICAgICAgbnVsbGFibGU6IHRydWUsCiAgICAgICAgcGF0aDogIiIuY29uY2F0KHBvZFNwZWNQYXRoLCAiLmFmZmluaXR5IiksCiAgICAgICAgdHlwZTogJ29iamVjdCcsCiAgICAgICAgdmFsaWRhdG9yczogWydwb2RBZmZpbml0eSddCiAgICAgIH1dOwogICAgICBzd2l0Y2ggKHR5cGUpIHsKICAgICAgICBjYXNlIFdPUktMT0FEX1RZUEVTLkRFUExPWU1FTlQ6CiAgICAgICAgY2FzZSBXT1JLTE9BRF9UWVBFUy5SRVBMSUNBX1NFVDoKICAgICAgICAgIG91dC5wdXNoKHsKICAgICAgICAgICAgbnVsbGFibGU6IGZhbHNlLAogICAgICAgICAgICBwYXRoOiAnc3BlYy5yZXBsaWNhcycsCiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgICB0eXBlOiAnbnVtYmVyJywKICAgICAgICAgICAgdHJhbnNsYXRpb25LZXk6ICd3b3JrbG9hZC5yZXBsaWNhcycKICAgICAgICAgIH0pOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSBXT1JLTE9BRF9UWVBFUy5TVEFURUZVTF9TRVQ6CiAgICAgICAgICBvdXQucHVzaCh7CiAgICAgICAgICAgIG51bGxhYmxlOiBmYWxzZSwKICAgICAgICAgICAgcGF0aDogJ3NwZWMucmVwbGljYXMnLAogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgdHlwZTogJ251bWJlcicsCiAgICAgICAgICAgIHRyYW5zbGF0aW9uS2V5OiAnd29ya2xvYWQucmVwbGljYXMnCiAgICAgICAgICB9KTsKICAgICAgICAgIG91dC5wdXNoKHsKICAgICAgICAgICAgbnVsbGFibGU6IGZhbHNlLAogICAgICAgICAgICBwYXRoOiAnc3BlYy5zZXJ2aWNlTmFtZScsCiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgICB0eXBlOiAnc3RyaW5nJywKICAgICAgICAgICAgdHJhbnNsYXRpb25LZXk6ICd3b3JrbG9hZC5zZXJ2aWNlTmFtZScKICAgICAgICAgIH0pOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSBXT1JLTE9BRF9UWVBFUy5DUk9OX0pPQjoKICAgICAgICAgIG91dC5wdXNoKHsKICAgICAgICAgICAgbnVsbGFibGU6IGZhbHNlLAogICAgICAgICAgICBwYXRoOiAnc3BlYy5zY2hlZHVsZScsCiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgICB0eXBlOiAnc3RyaW5nJywKICAgICAgICAgICAgdmFsaWRhdG9yczogWydjcm9uU2NoZWR1bGUnXSwKICAgICAgICAgICAgdHJhbnNsYXRpb25LZXk6ICd3b3JrbG9hZC5jcm9uU2NoZWR1bGUnCiAgICAgICAgICB9KTsKICAgICAgfQogICAgICByZXR1cm4gb3V0OwogICAgfQogIH0sIHsKICAgIGtleTogImVuZHBvaW50IiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgX3RoaXMkbWV0YWRhdGE7CiAgICAgIHJldHVybiB0aGlzID09PSBudWxsIHx8IHRoaXMgPT09IHZvaWQgMCB8fCAoX3RoaXMkbWV0YWRhdGEgPSB0aGlzLm1ldGFkYXRhKSA9PT0gbnVsbCB8fCBfdGhpcyRtZXRhZGF0YSA9PT0gdm9pZCAwIHx8IChfdGhpcyRtZXRhZGF0YSA9IF90aGlzJG1ldGFkYXRhLmFubm90YXRpb25zKSA9PT0gbnVsbCB8fCBfdGhpcyRtZXRhZGF0YSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkbWV0YWRhdGFbQ0FUVExFX1BVQkxJQ19FTkRQT0lOVFNdOwogICAgfQogIH0sIHsKICAgIGtleTogImRlc2lyZWQiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHZhciBfdGhpcyRzcGVjNzsKICAgICAgcmV0dXJuICgoX3RoaXMkc3BlYzcgPSB0aGlzLnNwZWMpID09PSBudWxsIHx8IF90aGlzJHNwZWM3ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRzcGVjNy5yZXBsaWNhcykgfHwgMDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJhdmFpbGFibGUiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHZhciBfdGhpcyRzdGF0dXM7CiAgICAgIHJldHVybiAoKF90aGlzJHN0YXR1cyA9IHRoaXMuc3RhdHVzKSA9PT0gbnVsbCB8fCBfdGhpcyRzdGF0dXMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJHN0YXR1cy5yZWFkeVJlcGxpY2FzKSB8fCAwOwogICAgfQogIH0sIHsKICAgIGtleTogInJlYWR5IiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgX3RoaXMkc3RhdHVzMiwgX3RoaXMkc3RhdHVzMzsKICAgICAgdmFyIHJlYWR5UmVwbGljYXMgPSBNYXRoLm1heCgwLCAoKChfdGhpcyRzdGF0dXMyID0gdGhpcy5zdGF0dXMpID09PSBudWxsIHx8IF90aGlzJHN0YXR1czIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJHN0YXR1czIucmVwbGljYXMpIHx8IDApIC0gKCgoX3RoaXMkc3RhdHVzMyA9IHRoaXMuc3RhdHVzKSA9PT0gbnVsbCB8fCBfdGhpcyRzdGF0dXMzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRzdGF0dXMzLnVuYXZhaWxhYmxlUmVwbGljYXMpIHx8IDApKTsKICAgICAgaWYgKHRoaXMudHlwZSA9PT0gV09SS0xPQURfVFlQRVMuREFFTU9OX1NFVCkgewogICAgICAgIHJldHVybiByZWFkeVJlcGxpY2FzOwogICAgICB9CiAgICAgIHJldHVybiAiIi5jb25jYXQocmVhZHlSZXBsaWNhcywgIi8iKS5jb25jYXQodGhpcy5kZXNpcmVkKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJ1bmF2YWlsYWJsZSIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgdmFyIF90aGlzJHN0YXR1czQ7CiAgICAgIHJldHVybiAoKF90aGlzJHN0YXR1czQgPSB0aGlzLnN0YXR1cykgPT09IG51bGwgfHwgX3RoaXMkc3RhdHVzNCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkc3RhdHVzNC51bmF2YWlsYWJsZVJlcGxpY2FzKSB8fCAwOwogICAgfQogIH0sIHsKICAgIGtleTogInVwVG9EYXRlIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgX3RoaXMkc3RhdHVzNTsKICAgICAgcmV0dXJuIChfdGhpcyRzdGF0dXM1ID0gdGhpcy5zdGF0dXMpID09PSBudWxsIHx8IF90aGlzJHN0YXR1czUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJHN0YXR1czUudXBkYXRlZFJlcGxpY2FzOwogICAgfQogIH0sIHsKICAgIGtleTogImRldGFpbHMiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHZhciBvdXQgPSBbXTsKICAgICAgdmFyIHR5cGUgPSB0aGlzLl90eXBlID8gdGhpcy5fdHlwZSA6IHRoaXMudHlwZTsKICAgICAgdmFyIGRldGFpbEl0ZW0gPSB7CiAgICAgICAgZW5kcG9pbnQ6IHsKICAgICAgICAgIGxhYmVsOiAnRW5kcG9pbnRzJywKICAgICAgICAgIGNvbnRlbnQ6IHRoaXMuZW5kcG9pbnQsCiAgICAgICAgICBmb3JtYXR0ZXI6ICdXb3JrbG9hZERldGFpbEVuZHBvaW50cycKICAgICAgICB9LAogICAgICAgIHJlYWR5OiB7CiAgICAgICAgICBsYWJlbDogJ1JlYWR5JywKICAgICAgICAgIGNvbnRlbnQ6IHRoaXMucmVhZHkKICAgICAgICB9LAogICAgICAgIHVwVG9EYXRlOiB7CiAgICAgICAgICBsYWJlbDogJ1VwLXRvLWRhdGUnLAogICAgICAgICAgY29udGVudDogdGhpcy51cFRvRGF0ZQogICAgICAgIH0sCiAgICAgICAgYXZhaWxhYmxlOiB7CiAgICAgICAgICBsYWJlbDogJ0F2YWlsYWJsZScsCiAgICAgICAgICBjb250ZW50OiB0aGlzLmF2YWlsYWJsZQogICAgICAgIH0KICAgICAgfTsKICAgICAgaWYgKHR5cGUgPT09IFdPUktMT0FEX1RZUEVTLkpPQikgewogICAgICAgIHZhciBfdGhpcyRzdGF0dXM2ID0gdGhpcy5zdGF0dXMsCiAgICAgICAgICBjb21wbGV0aW9uVGltZSA9IF90aGlzJHN0YXR1czYuY29tcGxldGlvblRpbWUsCiAgICAgICAgICBzdGFydFRpbWUgPSBfdGhpcyRzdGF0dXM2LnN0YXJ0VGltZTsKICAgICAgICB2YXIgRkFDVE9SUyA9IFs2MCwgNjAsIDI0XTsKICAgICAgICB2YXIgTEFCRUxTID0gWydzZWMnLCAnbWluJywgJ2hvdXInLCAnZGF5J107CiAgICAgICAgaWYgKHN0YXJ0VGltZSkgewogICAgICAgICAgb3V0LnB1c2goewogICAgICAgICAgICBsYWJlbDogJ1N0YXJ0ZWQnLAogICAgICAgICAgICBjb250ZW50OiBzdGFydFRpbWUsCiAgICAgICAgICAgIGZvcm1hdHRlcjogJ0xpdmVEYXRlJywKICAgICAgICAgICAgZm9ybWF0dGVyT3B0czogewogICAgICAgICAgICAgIGFkZFN1ZmZpeDogdHJ1ZQogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgaWYgKGNvbXBsZXRpb25UaW1lICYmIHN0YXJ0VGltZSkgewogICAgICAgICAgdmFyIGVuZCA9IGRheShjb21wbGV0aW9uVGltZSk7CiAgICAgICAgICB2YXIgc3RhcnQgPSBkYXkoc3RhcnRUaW1lKTsKICAgICAgICAgIHZhciBkaWZmID0gZW5kLmRpZmYoc3RhcnQpIC8gMTAwMDsKICAgICAgICAgIHZhciBsYWJlbDsKICAgICAgICAgIHZhciBpID0gMDsKICAgICAgICAgIHdoaWxlIChkaWZmID49IEZBQ1RPUlNbaV0gJiYgaSA8IEZBQ1RPUlMubGVuZ3RoKSB7CiAgICAgICAgICAgIGRpZmYgLz0gRkFDVE9SU1tpXTsKICAgICAgICAgICAgaSsrOwogICAgICAgICAgfQogICAgICAgICAgaWYgKGRpZmYgPCA1KSB7CiAgICAgICAgICAgIGxhYmVsID0gTWF0aC5mbG9vcihkaWZmICogMTApIC8gMTA7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBsYWJlbCA9IE1hdGguZmxvb3IoZGlmZik7CiAgICAgICAgICB9CiAgICAgICAgICBsYWJlbCArPSAiICIuY29uY2F0KHRoaXMudCgidW5pdC4iLmNvbmNhdChMQUJFTFNbaV0pLCB7CiAgICAgICAgICAgIGNvdW50OiBsYWJlbAogICAgICAgICAgfSksICIgIik7CiAgICAgICAgICBsYWJlbCA9IGxhYmVsLnRyaW0oKTsKICAgICAgICAgIG91dC5wdXNoKHsKICAgICAgICAgICAgbGFiZWw6ICdEdXJhdGlvbicsCiAgICAgICAgICAgIGNvbnRlbnQ6IGxhYmVsCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gV09SS0xPQURfVFlQRVMuQ1JPTl9KT0IpIHsKICAgICAgICB2YXIgX3RoaXMkc3RhdHVzNzsKICAgICAgICBvdXQucHVzaCh7CiAgICAgICAgICBsYWJlbDogJ0xhc3QgU2NoZWR1bGVkIFRpbWUnLAogICAgICAgICAgY29udGVudDogdGhpcyA9PT0gbnVsbCB8fCB0aGlzID09PSB2b2lkIDAgfHwgKF90aGlzJHN0YXR1czcgPSB0aGlzLnN0YXR1cykgPT09IG51bGwgfHwgX3RoaXMkc3RhdHVzNyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkc3RhdHVzNy5sYXN0U2NoZWR1bGVUaW1lLAogICAgICAgICAgZm9ybWF0dGVyOiAnTGl2ZURhdGUnCiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgb3V0LnB1c2goewogICAgICAgIGxhYmVsOiAnSW1hZ2UnLAogICAgICAgIGNvbnRlbnQ6IHRoaXMuaW1hZ2VOYW1lcywKICAgICAgICBmb3JtYXR0ZXI6ICdQb2RJbWFnZXMnCiAgICAgIH0pOwogICAgICBzd2l0Y2ggKHR5cGUpIHsKICAgICAgICBjYXNlIFdPUktMT0FEX1RZUEVTLkRFUExPWU1FTlQ6CiAgICAgICAgICBvdXQucHVzaChkZXRhaWxJdGVtLnJlYWR5LCBkZXRhaWxJdGVtLnVwVG9EYXRlLCBkZXRhaWxJdGVtLmF2YWlsYWJsZSwgU0VQQVJBVE9SLCBkZXRhaWxJdGVtLmVuZHBvaW50KTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgV09SS0xPQURfVFlQRVMuREFFTU9OX1NFVDoKICAgICAgICAgIG91dC5wdXNoKGRldGFpbEl0ZW0ucmVhZHksIFNFUEFSQVRPUiwgZGV0YWlsSXRlbS5lbmRwb2ludCk7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlIFdPUktMT0FEX1RZUEVTLlJFUExJQ0FfU0VUOgogICAgICAgICAgb3V0LnB1c2goZGV0YWlsSXRlbS5yZWFkeSwgU0VQQVJBVE9SLCBkZXRhaWxJdGVtLmVuZHBvaW50KTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgV09SS0xPQURfVFlQRVMuU1RBVEVGVUxfU0VUOgogICAgICAgICAgb3V0LnB1c2goZGV0YWlsSXRlbS5yZWFkeSwgU0VQQVJBVE9SLCBkZXRhaWxJdGVtLmVuZHBvaW50KTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgV09SS0xPQURfVFlQRVMuUkVQTElDQVRJT05fQ09OVFJPTExFUjoKICAgICAgICAgIG91dC5wdXNoKGRldGFpbEl0ZW0ucmVhZHksIFNFUEFSQVRPUiwgZGV0YWlsSXRlbS5lbmRwb2ludCk7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlIFdPUktMT0FEX1RZUEVTLkpPQjoKICAgICAgICAgIG91dC5wdXNoKGRldGFpbEl0ZW0uZW5kcG9pbnQpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSBXT1JLTE9BRF9UWVBFUy5DUk9OX0pPQjoKICAgICAgICAgIG91dC5wdXNoKGRldGFpbEl0ZW0uZW5kcG9pbnQpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSBQT0Q6CiAgICAgICAgICBvdXQucHVzaChkZXRhaWxJdGVtLnJlYWR5KTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgICByZXR1cm4gb3V0OwogICAgfQogIH0sIHsKICAgIGtleTogInJlZGVwbG95IiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZWRlcGxveSgpIHsKICAgICAgdmFyIG5vdyA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5yZXBsYWNlKC9cLlxkK1okLywgJ1onKTsKICAgICAgaWYgKCF0aGlzLnNwZWMudGVtcGxhdGUubWV0YWRhdGEpIHsKICAgICAgICBzZXQodGhpcy5zcGVjLnRlbXBsYXRlLCAnbWV0YWRhdGEnLCB7fSk7CiAgICAgIH0KICAgICAgdmFyIGFubm90YXRpb25zID0gdGhpcy5zcGVjLnRlbXBsYXRlLm1ldGFkYXRhLmFubm90YXRpb25zIHx8IHt9OwogICAgICBhbm5vdGF0aW9uc1tUSU1FU1RBTVBdID0gbm93OwogICAgICBzZXQodGhpcy5zcGVjLnRlbXBsYXRlLm1ldGFkYXRhLCAnYW5ub3RhdGlvbnMnLCBhbm5vdGF0aW9ucyk7CiAgICAgIHRoaXMuc2F2ZSgpOwogICAgfQoKICAgIC8vIG1hdGNoIGV4aXN0aW5nIGNvbnRhaW5lciBwb3J0cyB3aXRoIHNlcnZpY2VzIGNyZWF0ZWQgZm9yIHRoaXMgd29ya2xvYWQKICB9LCB7CiAgICBrZXk6ICJnZXRQb3J0c1dpdGhTZXJ2aWNlVHlwZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2dldFBvcnRzV2l0aFNlcnZpY2VUeXBlID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTUoKSB7CiAgICAgICAgdmFyIHBvcnRzLCBjYW5BY2Nlc3NTZXJ2aWNlcywgc2VydmljZXMsIGNsdXN0ZXJJUFNlcnZpY2VQb3J0cywgbG9hZEJhbGFuY2VyU2VydmljZVBvcnRzLCBub2RlUG9ydFNlcnZpY2VQb3J0czsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU1JChfY29udGV4dDUpIHsKICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0NS5wcmV2ID0gX2NvbnRleHQ1Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIHBvcnRzID0gW107CiAgICAgICAgICAgICAgdGhpcy5jb250YWluZXJzLmZvckVhY2goZnVuY3Rpb24gKGNvbnRhaW5lcikgewogICAgICAgICAgICAgICAgcmV0dXJuIHBvcnRzLnB1c2guYXBwbHkocG9ydHMsIF90b0NvbnN1bWFibGVBcnJheShjb250YWluZXIucG9ydHMgfHwgW10pKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAodGhpcy5pbml0Q29udGFpbmVycyB8fCBbXSkuZm9yRWFjaChmdW5jdGlvbiAoY29udGFpbmVyKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gcG9ydHMucHVzaC5hcHBseShwb3J0cywgX3RvQ29uc3VtYWJsZUFycmF5KGNvbnRhaW5lci5wb3J0cyB8fCBbXSkpOwogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAvLyBPbmx5IGdldCBzZXJ2aWNlcyBvd25lZCBpZiB3ZSBjYW4gYWNjZXNzIHRoZSBzZXJ2aWNlIHJlc291cmNlCiAgICAgICAgICAgICAgY2FuQWNjZXNzU2VydmljZXMgPSB0aGlzLiRnZXR0ZXJzWydzY2hlbWFGb3InXShTRVJWSUNFKTsKICAgICAgICAgICAgICBpZiAoIWNhbkFjY2Vzc1NlcnZpY2VzKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDEwOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gNzsKICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRTZXJ2aWNlc093bmVkKCk7CiAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICBfY29udGV4dDUudDAgPSBfY29udGV4dDUuc2VudDsKICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDExOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgIF9jb250ZXh0NS50MCA9IFtdOwogICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgIHNlcnZpY2VzID0gX2NvbnRleHQ1LnQwOwogICAgICAgICAgICAgIGNsdXN0ZXJJUFNlcnZpY2VQb3J0cyA9IFtdOwogICAgICAgICAgICAgIGxvYWRCYWxhbmNlclNlcnZpY2VQb3J0cyA9IFtdOwogICAgICAgICAgICAgIG5vZGVQb3J0U2VydmljZVBvcnRzID0gW107CiAgICAgICAgICAgICAgaWYgKHNlcnZpY2VzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgc2VydmljZXMuZm9yRWFjaChmdW5jdGlvbiAoc3ZjKSB7CiAgICAgICAgICAgICAgICAgIHZhciBfc3ZjJHNwZWMsIF9zdmMkc3BlYzIsIF9zdmMkc3BlYzM7CiAgICAgICAgICAgICAgICAgIHN3aXRjaCAoc3ZjLnNwZWMudHlwZSkgewogICAgICAgICAgICAgICAgICAgIGNhc2UgJ0NsdXN0ZXJJUCc6CiAgICAgICAgICAgICAgICAgICAgICBjbHVzdGVySVBTZXJ2aWNlUG9ydHMucHVzaC5hcHBseShjbHVzdGVySVBTZXJ2aWNlUG9ydHMsIF90b0NvbnN1bWFibGVBcnJheSgoc3ZjID09PSBudWxsIHx8IHN2YyA9PT0gdm9pZCAwIHx8IChfc3ZjJHNwZWMgPSBzdmMuc3BlYykgPT09IG51bGwgfHwgX3N2YyRzcGVjID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfc3ZjJHNwZWMucG9ydHMpIHx8IFtdKSk7CiAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICBjYXNlICdMb2FkQmFsYW5jZXInOgogICAgICAgICAgICAgICAgICAgICAgbG9hZEJhbGFuY2VyU2VydmljZVBvcnRzLnB1c2guYXBwbHkobG9hZEJhbGFuY2VyU2VydmljZVBvcnRzLCBfdG9Db25zdW1hYmxlQXJyYXkoKHN2YyA9PT0gbnVsbCB8fCBzdmMgPT09IHZvaWQgMCB8fCAoX3N2YyRzcGVjMiA9IHN2Yy5zcGVjKSA9PT0gbnVsbCB8fCBfc3ZjJHNwZWMyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfc3ZjJHNwZWMyLnBvcnRzKSB8fCBbXSkpOwogICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAnTm9kZVBvcnQnOgogICAgICAgICAgICAgICAgICAgICAgbm9kZVBvcnRTZXJ2aWNlUG9ydHMucHVzaC5hcHBseShub2RlUG9ydFNlcnZpY2VQb3J0cywgX3RvQ29uc3VtYWJsZUFycmF5KChzdmMgPT09IG51bGwgfHwgc3ZjID09PSB2b2lkIDAgfHwgKF9zdmMkc3BlYzMgPSBzdmMuc3BlYykgPT09IG51bGwgfHwgX3N2YyRzcGVjMyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3N2YyRzcGVjMy5wb3J0cykgfHwgW10pKTsKICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHBvcnRzLmZvckVhY2goZnVuY3Rpb24gKHBvcnQpIHsKICAgICAgICAgICAgICAgIHZhciBuYW1lID0gcG9ydC5uYW1lID8gcG9ydC5uYW1lIDogIiIuY29uY2F0KHBvcnQuY29udGFpbmVyUG9ydCkuY29uY2F0KHBvcnQucHJvdG9jb2wudG9Mb3dlckNhc2UoKSkuY29uY2F0KHBvcnQuaG9zdFBvcnQgfHwgcG9ydC5fbGlzdGVuaW5nUG9ydCB8fCAnJyk7CiAgICAgICAgICAgICAgICBwb3J0Lm5hbWUgPSBuYW1lOwogICAgICAgICAgICAgICAgaWYgKHBvcnQuX3NlcnZpY2VUeXBlICYmIHBvcnQuX3NlcnZpY2VUeXBlICE9PSAnJykgewogICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAobG9hZEJhbGFuY2VyU2VydmljZVBvcnRzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICB2YXIgcG9ydFNwZWMgPSBmaW5kQnkobG9hZEJhbGFuY2VyU2VydmljZVBvcnRzLCAnbmFtZScsIG5hbWUpOwogICAgICAgICAgICAgICAgICBpZiAocG9ydFNwZWMpIHsKICAgICAgICAgICAgICAgICAgICBwb3J0Ll9saXN0ZW5pbmdQb3J0ID0gcG9ydFNwZWMucG9ydDsKICAgICAgICAgICAgICAgICAgICBwb3J0Ll9zZXJ2aWNlVHlwZSA9ICdMb2FkQmFsYW5jZXInOwogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKG5vZGVQb3J0U2VydmljZVBvcnRzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICB2YXIgX3BvcnRTcGVjID0gZmluZEJ5KG5vZGVQb3J0U2VydmljZVBvcnRzLCAnbmFtZScsIG5hbWUpOwogICAgICAgICAgICAgICAgICBpZiAoX3BvcnRTcGVjKSB7CiAgICAgICAgICAgICAgICAgICAgcG9ydC5fbGlzdGVuaW5nUG9ydCA9IF9wb3J0U3BlYy5ub2RlUG9ydDsKICAgICAgICAgICAgICAgICAgICBwb3J0Ll9zZXJ2aWNlVHlwZSA9ICdOb2RlUG9ydCc7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoY2x1c3RlcklQU2VydmljZVBvcnRzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICBpZiAoZmluZEJ5KGNsdXN0ZXJJUFNlcnZpY2VQb3J0cywgJ25hbWUnLCBuYW1lKSkgewogICAgICAgICAgICAgICAgICAgIHBvcnQuX3NlcnZpY2VUeXBlID0gJ0NsdXN0ZXJJUCc7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LmFicnVwdCgicmV0dXJuIiwgcG9ydHMpOwogICAgICAgICAgICBjYXNlIDE4OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU1LCB0aGlzKTsKICAgICAgfSkpOwogICAgICBmdW5jdGlvbiBnZXRQb3J0c1dpdGhTZXJ2aWNlVHlwZSgpIHsKICAgICAgICByZXR1cm4gX2dldFBvcnRzV2l0aFNlcnZpY2VUeXBlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KICAgICAgcmV0dXJuIGdldFBvcnRzV2l0aFNlcnZpY2VUeXBlOwogICAgfSgpCiAgfSwgewogICAga2V5OiAib3duZWRCeVdvcmtsb2FkIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgX3RoaXMkbWV0YWRhdGEyOwogICAgICB2YXIgdHlwZXMgPSBPYmplY3QudmFsdWVzKFdPUktMT0FEX1RZUEVTKTsKICAgICAgaWYgKChfdGhpcyRtZXRhZGF0YTIgPSB0aGlzLm1ldGFkYXRhKSAhPT0gbnVsbCAmJiBfdGhpcyRtZXRhZGF0YTIgIT09IHZvaWQgMCAmJiBfdGhpcyRtZXRhZGF0YTIub3duZXJSZWZlcmVuY2VzKSB7CiAgICAgICAgdmFyIF9pdGVyYXRvcjIgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcih0aGlzLm1ldGFkYXRhLm93bmVyUmVmZXJlbmNlcyksCiAgICAgICAgICBfc3RlcDI7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIGZvciAoX2l0ZXJhdG9yMi5zKCk7ICEoX3N0ZXAyID0gX2l0ZXJhdG9yMi5uKCkpLmRvbmU7KSB7CiAgICAgICAgICAgIHZhciBvd25lciA9IF9zdGVwMi52YWx1ZTsKICAgICAgICAgICAgdmFyIGhhdmUgPSAiIi5jb25jYXQob3duZXIuYXBpVmVyc2lvbi5yZXBsYWNlKC9cLy4qLywgJycpLCAiLiIpLmNvbmNhdChvd25lci5raW5kKS50b0xvd2VyQ2FzZSgpOwogICAgICAgICAgICBpZiAodHlwZXMuaW5jbHVkZXMoaGF2ZSkpIHsKICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgX2l0ZXJhdG9yMi5lKGVycik7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgIF9pdGVyYXRvcjIuZigpOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgfSwgewogICAga2V5OiAiaXNGcm9tTm9ybWFuIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gKHRoaXMubWV0YWRhdGEubGFiZWxzIHx8IHt9KVsnY2F0dGxlLmlvL2NyZWF0b3InXSA9PT0gJ25vcm1hbic7CiAgICB9CiAgfSwgewogICAga2V5OiAid2FybkRlbGV0aW9uTWVzc2FnZSIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgaWYgKHRoaXMuaXNGcm9tTm9ybWFuKSB7CiAgICAgICAgcmV0dXJuIHRoaXMudCgnd29ya2xvYWQubm9ybWFuV2FybmluZycpOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAicG9kcyIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgdmFyIF90aGlzJG1ldGFkYXRhMzsKICAgICAgdmFyIHJlbGF0aW9uc2hpcHMgPSAoKF90aGlzJG1ldGFkYXRhMyA9IHRoaXMubWV0YWRhdGEpID09PSBudWxsIHx8IF90aGlzJG1ldGFkYXRhMyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkbWV0YWRhdGEzLnJlbGF0aW9uc2hpcHMpIHx8IFtdOwogICAgICB2YXIgcG9kUmVsYXRpb25zaGlwID0gcmVsYXRpb25zaGlwcy5maWx0ZXIoZnVuY3Rpb24gKHJlbGF0aW9uc2hpcCkgewogICAgICAgIHJldHVybiByZWxhdGlvbnNoaXAudG9UeXBlID09PSBQT0Q7CiAgICAgIH0pWzBdOwogICAgICBpZiAocG9kUmVsYXRpb25zaGlwKSB7CiAgICAgICAgdmFyIHBvZHMgPSB0aGlzLiRnZXR0ZXJzWydwb2RzQnlOYW1lc3BhY2UnXSh0aGlzLm1ldGFkYXRhLm5hbWVzcGFjZSk7CiAgICAgICAgcmV0dXJuIHBvZHMuZmlsdGVyKGZ1bmN0aW9uIChvYmopIHsKICAgICAgICAgIHJldHVybiBtYXRjaGVzKG9iaiwgcG9kUmVsYXRpb25zaGlwLnNlbGVjdG9yKTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gW107CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJwb2RHYXVnZXMiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHZhciBvdXQgPSB7fTsKICAgICAgaWYgKCF0aGlzLnBvZHMpIHsKICAgICAgICByZXR1cm4gb3V0OwogICAgICB9CiAgICAgIHRoaXMucG9kcy5tYXAoZnVuY3Rpb24gKHBvZCkgewogICAgICAgIHZhciBzdGF0ZUNvbG9yID0gcG9kLnN0YXRlQ29sb3IsCiAgICAgICAgICBzdGF0ZURpc3BsYXkgPSBwb2Quc3RhdGVEaXNwbGF5OwogICAgICAgIGlmIChvdXRbc3RhdGVEaXNwbGF5XSkgewogICAgICAgICAgb3V0W3N0YXRlRGlzcGxheV0uY291bnQrKzsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgb3V0W3N0YXRlRGlzcGxheV0gPSB7CiAgICAgICAgICAgIGNvbG9yOiBzdGF0ZUNvbG9yLnJlcGxhY2UoJ3RleHQtJywgJycpLAogICAgICAgICAgICBjb3VudDogMQogICAgICAgICAgfTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICByZXR1cm4gb3V0OwogICAgfQoKICAgIC8vIEpvYiBTcGVjaWZpYwogIH0sIHsKICAgIGtleTogImpvYlJlbGF0aW9uc2hpcHMiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIGlmICh0aGlzLnR5cGUgIT09IFdPUktMT0FEX1RZUEVTLkNST05fSk9CKSB7CiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDsKICAgICAgfQogICAgICByZXR1cm4gKF9nZXQyKHRoaXMsICdtZXRhZGF0YS5yZWxhdGlvbnNoaXBzJykgfHwgW10pLmZpbHRlcihmdW5jdGlvbiAocmVsYXRpb25zaGlwKSB7CiAgICAgICAgcmV0dXJuIHJlbGF0aW9uc2hpcC50b1R5cGUgPT09IFdPUktMT0FEX1RZUEVTLkpPQjsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiam9icyIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgaWYgKHRoaXMudHlwZSAhPT0gV09SS0xPQURfVFlQRVMuQ1JPTl9KT0IpIHsKICAgICAgICByZXR1cm4gdW5kZWZpbmVkOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzLmpvYlJlbGF0aW9uc2hpcHMubWFwKGZ1bmN0aW9uIChvYmopIHsKICAgICAgICByZXR1cm4gX3RoaXMuJGdldHRlcnNbJ2J5SWQnXShXT1JLTE9BRF9UWVBFUy5KT0IsIG9iai50b0lkKTsKICAgICAgfSkuZmlsdGVyKGZ1bmN0aW9uICh4KSB7CiAgICAgICAgcmV0dXJuICEheDsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiam9iR2F1Z2VzIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgb3V0ID0gewogICAgICAgIHN1Y2NlZWRlZDogewogICAgICAgICAgY29sb3I6ICdzdWNjZXNzJywKICAgICAgICAgIGNvdW50OiAwCiAgICAgICAgfSwKICAgICAgICBydW5uaW5nOiB7CiAgICAgICAgICBjb2xvcjogJ2luZm8nLAogICAgICAgICAgY291bnQ6IDAKICAgICAgICB9LAogICAgICAgIGZhaWxlZDogewogICAgICAgICAgY29sb3I6ICdlcnJvcicsCiAgICAgICAgICBjb3VudDogMAogICAgICAgIH0KICAgICAgfTsKICAgICAgaWYgKHRoaXMudHlwZSA9PT0gV09SS0xPQURfVFlQRVMuQ1JPTl9KT0IpIHsKICAgICAgICB0aGlzLmpvYnMuZm9yRWFjaChmdW5jdGlvbiAoam9iKSB7CiAgICAgICAgICB2YXIgX2pvYiRzdGF0dXMgPSBqb2Iuc3RhdHVzLAogICAgICAgICAgICBzdGF0dXMgPSBfam9iJHN0YXR1cyA9PT0gdm9pZCAwID8ge30gOiBfam9iJHN0YXR1czsKICAgICAgICAgIG91dC5ydW5uaW5nLmNvdW50ICs9IHN0YXR1cy5hY3RpdmUgfHwgMDsKICAgICAgICAgIG91dC5zdWNjZWVkZWQuY291bnQgKz0gc3RhdHVzLnN1Y2NlZWRlZCB8fCAwOwogICAgICAgICAgb3V0LmZhaWxlZC5jb3VudCArPSBzdGF0dXMuZmFpbGVkIHx8IDA7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSBpZiAodGhpcy50eXBlID09PSBXT1JLTE9BRF9UWVBFUy5KT0IpIHsKICAgICAgICB2YXIgX3RoaXMkc3RhdHVzOCA9IHRoaXMuc3RhdHVzLAogICAgICAgICAgc3RhdHVzID0gX3RoaXMkc3RhdHVzOCA9PT0gdm9pZCAwID8ge30gOiBfdGhpcyRzdGF0dXM4OwogICAgICAgIG91dC5ydW5uaW5nLmNvdW50ID0gc3RhdHVzLmFjdGl2ZSB8fCAwOwogICAgICAgIG91dC5zdWNjZWVkZWQuY291bnQgPSBzdGF0dXMuc3VjY2VlZGVkIHx8IDA7CiAgICAgICAgb3V0LmZhaWxlZC5jb3VudCA9IHN0YXR1cy5mYWlsZWQgfHwgMDsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQogICAgICByZXR1cm4gb3V0OwogICAgfQogIH0sIHsKICAgIGtleTogImN1cnJlbnRSZXZpc2lvbk51bWJlciIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgaWYgKHRoaXMub3duZWRCeVdvcmtsb2FkIHx8IHRoaXMua2luZCA9PT0gJ0pvYicgfHwgdGhpcy5raW5kID09PSAnQ3JvbkpvYicpIHsKICAgICAgICByZXR1cm4gdW5kZWZpbmVkOwogICAgICB9CiAgICAgIGlmICh0aGlzLmtpbmQgPT09ICdEZXBsb3ltZW50JykgewogICAgICAgIHJldHVybiB0aGlzLm1ldGFkYXRhLmFubm90YXRpb25zWydkZXBsb3ltZW50Lmt1YmVybmV0ZXMuaW8vcmV2aXNpb24nXTsKICAgICAgfQoKICAgICAgLy8gJ0RhZW1vblNldCcsICdTdGF0ZWZ1bFNldCcKICAgICAgcmV0dXJuIHRoaXMubWV0YWRhdGEuZ2VuZXJhdGlvbjsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJtYXRjaGluZ1BvZHMiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9tYXRjaGluZ1BvZHMgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNigpIHsKICAgICAgICB2YXIgX3RoaXMyID0gdGhpczsKICAgICAgICB2YXIgYWxsLCBhbGxJbk5hbWVzcGFjZSwgc2VsZWN0b3I7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNiQoX2NvbnRleHQ2KSB7CiAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDYucHJldiA9IF9jb250ZXh0Ni5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDI7CiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJGRpc3BhdGNoKCdmaW5kQWxsJywgewogICAgICAgICAgICAgICAgdHlwZTogUE9ECiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICBhbGwgPSBfY29udGV4dDYuc2VudDsKICAgICAgICAgICAgICBhbGxJbk5hbWVzcGFjZSA9IGFsbC5maWx0ZXIoZnVuY3Rpb24gKHBvZCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHBvZC5tZXRhZGF0YS5uYW1lc3BhY2UgPT09IF90aGlzMi5tZXRhZGF0YS5uYW1lc3BhY2U7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgc2VsZWN0b3IgPSBjb252ZXJ0U2VsZWN0b3JPYmoodGhpcy5zcGVjLnNlbGVjdG9yKTsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LmFicnVwdCgicmV0dXJuIiwgbWF0Y2hpbmcoYWxsSW5OYW1lc3BhY2UsIHNlbGVjdG9yKSk7CiAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNiwgdGhpcyk7CiAgICAgIH0pKTsKICAgICAgZnVuY3Rpb24gbWF0Y2hpbmdQb2RzKCkgewogICAgICAgIHJldHVybiBfbWF0Y2hpbmdQb2RzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KICAgICAgcmV0dXJuIG1hdGNoaW5nUG9kczsKICAgIH0oKQogIH0sIHsKICAgIGtleTogImNsZWFuRm9yU2F2ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY2xlYW5Gb3JTYXZlKGRhdGEpIHsKICAgICAgdmFyIF92YWwkc3BlYywKICAgICAgICBfdGhpczMgPSB0aGlzLAogICAgICAgIF92YWwkc3BlYzI7CiAgICAgIHZhciB2YWwgPSBfZ2V0KF9nZXRQcm90b3R5cGVPZihXb3JrbG9hZC5wcm90b3R5cGUpLCAiY2xlYW5Gb3JTYXZlIiwgdGhpcykuY2FsbCh0aGlzLCBkYXRhKTsKCiAgICAgIC8vIHJlbW92ZSBmaWVsZHMgZnJvbSBjb250YWluZXJzCiAgICAgIChfdmFsJHNwZWMgPSB2YWwuc3BlYykgPT09IG51bGwgfHwgX3ZhbCRzcGVjID09PSB2b2lkIDAgfHwgKF92YWwkc3BlYyA9IF92YWwkc3BlYy50ZW1wbGF0ZSkgPT09IG51bGwgfHwgX3ZhbCRzcGVjID09PSB2b2lkIDAgfHwgKF92YWwkc3BlYyA9IF92YWwkc3BlYy5zcGVjKSA9PT0gbnVsbCB8fCBfdmFsJHNwZWMgPT09IHZvaWQgMCB8fCAoX3ZhbCRzcGVjID0gX3ZhbCRzcGVjLmNvbnRhaW5lcnMpID09PSBudWxsIHx8IF92YWwkc3BlYyA9PT0gdm9pZCAwIHx8IF92YWwkc3BlYy5mb3JFYWNoKGZ1bmN0aW9uIChjb250YWluZXIpIHsKICAgICAgICBfdGhpczMuY2xlYW5Db250YWluZXJGb3JTYXZlKGNvbnRhaW5lcik7CiAgICAgIH0pOwoKICAgICAgLy8gcmVtb3ZlIGZpZWxkcyBmcm9tIGluaXRDb250YWluZXJzCiAgICAgIChfdmFsJHNwZWMyID0gdmFsLnNwZWMpID09PSBudWxsIHx8IF92YWwkc3BlYzIgPT09IHZvaWQgMCB8fCAoX3ZhbCRzcGVjMiA9IF92YWwkc3BlYzIudGVtcGxhdGUpID09PSBudWxsIHx8IF92YWwkc3BlYzIgPT09IHZvaWQgMCB8fCAoX3ZhbCRzcGVjMiA9IF92YWwkc3BlYzIuc3BlYykgPT09IG51bGwgfHwgX3ZhbCRzcGVjMiA9PT0gdm9pZCAwIHx8IChfdmFsJHNwZWMyID0gX3ZhbCRzcGVjMi5pbml0Q29udGFpbmVycykgPT09IG51bGwgfHwgX3ZhbCRzcGVjMiA9PT0gdm9pZCAwIHx8IF92YWwkc3BlYzIuZm9yRWFjaChmdW5jdGlvbiAoY29udGFpbmVyKSB7CiAgICAgICAgX3RoaXMzLmNsZWFuQ29udGFpbmVyRm9yU2F2ZShjb250YWluZXIpOwogICAgICB9KTsKICAgICAgcmV0dXJuIHZhbDsKICAgIH0KICB9XSk7Cn0oV29ya2xvYWRTZXJ2aWNlKTsKZXhwb3J0IHsgV29ya2xvYWQgYXMgZGVmYXVsdCB9Ow=="},{"version":3,"names":["findBy","insertAt","TIMESTAMP","CATTLE_PUBLIC_ENDPOINTS","WORKLOAD_TYPES","SERVICE","POD","get","set","day","convertSelectorObj","matching","matches","SEPARATOR","WorkloadService","defaultContainer","imagePullPolicy","name","securityContext","runAsNonRoot","readOnlyRootFilesystem","privileged","allowPrivilegeEscalation","Workload","_WorkloadService","_classCallCheck","_callSuper","arguments","_inherits","_createClass","key","out","_get","_getPrototypeOf","prototype","type","_type","editYaml","index","indexOf","action","label","t","icon","enabled","links","update","JOB","CRON_JOB","_this$spec","_this$spec2","bulkable","spec","paused","divider","view","total","toFilter","filter","includes","value","applyDefaults","vm","_this$spec3","jobTemplate","template","restartPolicy","containers","initContainers","replicas","_objectSpread","selector","$set","toggleRollbackModal","workload","length","undefined","$dispatch","componentProps","component","_rollBackWorkload","_asyncToGenerator","_regeneratorRuntime","mark","_callee","cluster","rollbackRequestData","rollbackRequestBody","namespace","workloadName","wrap","_callee$","_context","prev","next","JSON","stringify","Array","isArray","TypeError","metadata","patch","url","concat","id","stop","rollBackWorkload","_x","_x2","_x3","_x4","apply","pause","save","resume","_scaleDown","_callee2","newScale","_callee2$","_context2","scaleDown","_scaleUp","_callee3","_callee3$","_context3","scaleUp","_this$spec4","_openShell","_callee4","pods","_iterator","_step","pod","_callee4$","_context4","matchingPods","sent","_createForOfIteratorHelper","s","n","done","isRunning","openShell","abrupt","t0","e","f","finish","title","message","root","addSidecar","goToEdit","sidecar","sum","forEach","status","containerStatuses","_pod$status","restartCount","_this$spec5","_this$spec6","podTemplateSpec","_podTemplateSpec$cont","_podTemplateSpec$init","podSpecPath","nullable","path","required","translationKey","validators","DEPLOYMENT","REPLICA_SET","push","STATEFUL_SET","_this$metadata","annotations","_this$spec7","_this$status","readyReplicas","_this$status2","_this$status3","Math","max","unavailableReplicas","DAEMON_SET","desired","_this$status4","_this$status5","updatedReplicas","detailItem","endpoint","content","formatter","ready","upToDate","available","_this$status6","completionTime","startTime","FACTORS","LABELS","formatterOpts","addSuffix","end","start","diff","i","floor","count","trim","_this$status7","lastScheduleTime","imageNames","REPLICATION_CONTROLLER","redeploy","now","Date","toISOString","replace","_getPortsWithServiceType","_callee5","ports","canAccessServices","services","clusterIPServicePorts","loadBalancerServicePorts","nodePortServicePorts","_callee5$","_context5","container","_toConsumableArray","$getters","getServicesOwned","svc","_svc$spec","_svc$spec2","_svc$spec3","port","containerPort","protocol","toLowerCase","hostPort","_listeningPort","_serviceType","portSpec","nodePort","getPortsWithServiceType","_this$metadata2","types","Object","values","ownerReferences","_iterator2","_step2","owner","have","apiVersion","kind","err","labels","isFromNorman","_this$metadata3","relationships","podRelationship","relationship","toType","obj","map","stateColor","stateDisplay","color","_this","jobRelationships","toId","x","succeeded","running","failed","jobs","job","_job$status","active","_this$status8","ownedByWorkload","generation","_matchingPods","_callee6","_this2","all","allInNamespace","_callee6$","_context6","cleanForSave","data","_val$spec","_this3","_val$spec2","val","call","cleanContainerForSave","default"],"sources":["/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/models/workload.js"],"sourcesContent":["import { findBy, insertAt } from '@shell/utils/array';\nimport { TIMESTAMP, CATTLE_PUBLIC_ENDPOINTS } from '@shell/config/labels-annotations';\nimport { WORKLOAD_TYPES, SERVICE, POD } from '@shell/config/types';\nimport { get, set } from '@shell/utils/object';\nimport day from 'dayjs';\nimport { convertSelectorObj, matching, matches } from '@shell/utils/selector';\nimport { SEPARATOR } from '@shell/config/workload';\nimport WorkloadService from '@shell/models/workload.service';\n\nexport const defaultContainer = {\n  imagePullPolicy: 'Always',\n  name:            'container-0',\n  securityContext: {\n    runAsNonRoot:             false,\n    readOnlyRootFilesystem:   false,\n    privileged:               false,\n    allowPrivilegeEscalation: false,\n  }\n};\nexport default class Workload extends WorkloadService {\n  // remove clone as yaml/edit as yaml until API supported\n  get _availableActions() {\n    let out = super._availableActions;\n    const type = this._type ? this._type : this.type;\n\n    const editYaml = findBy(out, 'action', 'goToEditYaml');\n    const index = editYaml ? out.indexOf(editYaml) : 0;\n\n    insertAt(out, index, {\n      action:  'addSidecar',\n      label:   this.t('action.addSidecar'),\n      icon:    'icon icon-plus',\n      enabled: !!this.links.update,\n    });\n\n    if (type !== WORKLOAD_TYPES.JOB && type !== WORKLOAD_TYPES.CRON_JOB) {\n      insertAt(out, 0, {\n        action:  'toggleRollbackModal',\n        label:   this.t('action.rollback'),\n        icon:    'icon icon-history',\n        enabled: !!this.links.update,\n      });\n\n      insertAt(out, 0, {\n        action:   'redeploy',\n        label:    this.t('action.redeploy'),\n        icon:     'icon icon-refresh',\n        enabled:  !!this.links.update,\n        bulkable: true,\n      });\n\n      insertAt(out, 0, {\n        action:  'pause',\n        label:   this.t('asyncButton.pause.action'),\n        icon:    'icon icon-pause',\n        enabled: !!this.links.update && !this.spec?.paused\n      });\n\n      insertAt(out, 0, {\n        action:  'resume',\n        label:   this.t('asyncButton.resume.action'),\n        icon:    'icon icon-play',\n        enabled: !!this.links.update && this.spec?.paused === true\n      });\n    }\n\n    insertAt(out, 0, { divider: true }) ;\n\n    insertAt(out, 0, {\n      action:  'openShell',\n      enabled: !!this.links.view,\n      icon:    'icon icon-fw icon-chevron-right',\n      label:   this.t('action.openShell'),\n      total:   1,\n    });\n\n    const toFilter = ['cloneYaml'];\n\n    out = out.filter((action) => {\n      if (!toFilter.includes(action.action)) {\n        return action;\n      }\n    });\n\n    return out;\n  }\n\n  applyDefaults(vm) {\n    const { spec = {} } = this;\n\n    if (this.type === WORKLOAD_TYPES.CRON_JOB) {\n      if (!spec.jobTemplate) {\n        spec.jobTemplate = {\n          spec: {\n            template: {\n              spec: {\n                restartPolicy: 'Never', containers: [{ imagePullPolicy: 'Always', name: 'container-0' }], initContainers: []\n              }\n            }\n          }\n        };\n      }\n    } else {\n      if (!spec.replicas && spec.replicas !== 0) {\n        spec.replicas = 1;\n      }\n\n      if (!spec.template) {\n        spec.template = {\n          spec: {\n            restartPolicy:  this.type === WORKLOAD_TYPES.JOB ? 'Never' : 'Always',\n            containers:     [{ ...defaultContainer }],\n            initContainers: []\n          }\n        };\n      }\n      if (!spec.selector) {\n        spec.selector = {};\n      }\n    }\n    vm.$set(this, 'spec', spec);\n  }\n\n  toggleRollbackModal( workload = this ) {\n    this.$dispatch('promptModal', {\n      componentProps: { workload },\n      component:      'RollbackWorkloadDialog'\n    });\n  }\n\n  async rollBackWorkload( cluster, workload, type, rollbackRequestData ) {\n    const rollbackRequestBody = JSON.stringify(rollbackRequestData);\n\n    if ( Array.isArray( workload ) ) {\n      throw new TypeError(this.t('promptRollback.multipleWorkloadError'));\n    }\n    const namespace = workload.metadata.namespace;\n    const workloadName = workload.metadata.name;\n\n    /**\n     * Ensure we go out to the correct cluster\n     *\n     * Build the request body in the same format that kubectl\n     * uses to call the Kubernetes API to roll back a workload.\n     * To see an example request body, run:\n     * kubectl rollout undo deployment/[deployment name] --to-revision=[revision number] -v=8\n     */\n    await this.patch(rollbackRequestBody, { url: `/k8s/clusters/${ cluster.id }/apis/apps/v1/namespaces/${ namespace }/${ type }/${ workloadName }` });\n  }\n\n  pause() {\n    set(this.spec, 'paused', true);\n    this.save();\n  }\n\n  resume() {\n    set(this.spec, 'paused', false);\n    this.save();\n  }\n\n  async scaleDown() {\n    const newScale = this.spec.replicas - 1;\n\n    if (newScale >= 0) {\n      set(this.spec, 'replicas', newScale);\n      await this.save();\n    }\n  }\n\n  async scaleUp() {\n    set(this.spec, 'replicas', this.spec.replicas + 1);\n    await this.save();\n  }\n\n  get state() {\n    if ( this.spec?.paused === true ) {\n      return 'paused';\n    }\n\n    return super.state;\n  }\n\n  async openShell() {\n    const pods = await this.matchingPods();\n\n    for ( const pod of pods ) {\n      if ( pod.isRunning ) {\n        pod.openShell();\n\n        return;\n      }\n    }\n\n    this.$dispatch('growl/error', {\n      title:   'Unavailable',\n      message: 'There are no running pods to execute a shell in.'\n    }, { root: true });\n  }\n\n  addSidecar() {\n    return this.goToEdit({ sidecar: true });\n  }\n\n  get showPodRestarts() {\n    return true;\n  }\n\n  get restartCount() {\n    const pods = this.pods;\n\n    let sum = 0;\n\n    pods.forEach((pod) => {\n      if (pod.status.containerStatuses) {\n        sum += pod.status?.containerStatuses[0].restartCount || 0;\n      }\n    });\n\n    return sum;\n  }\n\n  get hasSidecars() {\n    const podTemplateSpec = this.type === WORKLOAD_TYPES.CRON_JOB ? this?.spec?.jobTemplate?.spec?.template?.spec : this.spec?.template?.spec;\n\n    const { containers = [], initContainers = [] } = podTemplateSpec;\n\n    return containers.length > 1 || initContainers.length;\n  }\n\n  get customValidationRules() {\n    const type = this._type ? this._type : this.type;\n\n    const podSpecPath = type === WORKLOAD_TYPES.CRON_JOB ? 'spec.jobTemplate.spec.template.spec' : 'spec.template.spec';\n    const out = [\n      {\n        nullable:       false,\n        path:           'metadata.name',\n        required:       true,\n        translationKey: 'generic.name',\n        type:           'subDomain',\n      },\n      {\n        nullable:   false,\n        path:       'spec',\n        required:   true,\n        type:       'object',\n        validators: ['containerImages'],\n      },\n      {\n        nullable:   true,\n        path:       `${ podSpecPath }.affinity`,\n        type:       'object',\n        validators: ['podAffinity'],\n      }\n    ];\n\n    switch (type) {\n    case WORKLOAD_TYPES.DEPLOYMENT:\n    case WORKLOAD_TYPES.REPLICA_SET:\n      out.push( {\n        nullable:       false,\n        path:           'spec.replicas',\n        required:       true,\n        type:           'number',\n        translationKey: 'workload.replicas'\n      });\n      break;\n    case WORKLOAD_TYPES.STATEFUL_SET:\n      out.push({\n        nullable:       false,\n        path:           'spec.replicas',\n        required:       true,\n        type:           'number',\n        translationKey: 'workload.replicas'\n      });\n      out.push({\n        nullable:       false,\n        path:           'spec.serviceName',\n        required:       true,\n        type:           'string',\n        translationKey: 'workload.serviceName'\n      });\n      break;\n    case WORKLOAD_TYPES.CRON_JOB:\n      out.push( {\n        nullable:       false,\n        path:           'spec.schedule',\n        required:       true,\n        type:           'string',\n        validators:     ['cronSchedule'],\n        translationKey: 'workload.cronSchedule'\n      });\n    }\n\n    return out;\n  }\n\n  get endpoint() {\n    return this?.metadata?.annotations?.[CATTLE_PUBLIC_ENDPOINTS];\n  }\n\n  get desired() {\n    return this.spec?.replicas || 0;\n  }\n\n  get available() {\n    return this.status?.readyReplicas || 0;\n  }\n\n  get ready() {\n    const readyReplicas = Math.max(0, (this.status?.replicas || 0) - (this.status?.unavailableReplicas || 0));\n\n    if (this.type === WORKLOAD_TYPES.DAEMON_SET) {\n      return readyReplicas;\n    }\n\n    return `${ readyReplicas }/${ this.desired }`;\n  }\n\n  get unavailable() {\n    return this.status?.unavailableReplicas || 0;\n  }\n\n  get upToDate() {\n    return this.status?.updatedReplicas;\n  }\n\n  get details() {\n    const out = [];\n    const type = this._type ? this._type : this.type;\n\n    const detailItem = {\n      endpoint: {\n        label:     'Endpoints',\n        content:   this.endpoint,\n        formatter: 'WorkloadDetailEndpoints'\n      },\n      ready: {\n        label:   'Ready',\n        content: this.ready\n      },\n      upToDate: {\n        label:   'Up-to-date',\n        content: this.upToDate\n      },\n      available: {\n        label:   'Available',\n        content: this.available\n      }\n    };\n\n    if (type === WORKLOAD_TYPES.JOB) {\n      const { completionTime, startTime } = this.status;\n      const FACTORS = [60, 60, 24];\n      const LABELS = ['sec', 'min', 'hour', 'day'];\n\n      if ( startTime ) {\n        out.push({\n          label:         'Started',\n          content:       startTime,\n          formatter:     'LiveDate',\n          formatterOpts: { addSuffix: true },\n        });\n      }\n\n      if (completionTime && startTime) {\n        const end = day(completionTime);\n        const start = day(startTime);\n        let diff = end.diff(start) / 1000;\n\n        let label;\n\n        let i = 0;\n\n        while ( diff >= FACTORS[i] && i < FACTORS.length ) {\n          diff /= FACTORS[i];\n          i++;\n        }\n\n        if ( diff < 5 ) {\n          label = Math.floor(diff * 10) / 10;\n        } else {\n          label = Math.floor(diff);\n        }\n\n        label += ` ${ this.t(`unit.${ LABELS[i] }`, { count: label }) } `;\n        label = label.trim();\n\n        out.push({ label: 'Duration', content: label });\n      }\n    } else if ( type === WORKLOAD_TYPES.CRON_JOB ) {\n      out.push({\n        label:     'Last Scheduled Time',\n        content:   this?.status?.lastScheduleTime,\n        formatter: 'LiveDate'\n      });\n    }\n\n    out.push( {\n      label:     'Image',\n      content:   this.imageNames,\n      formatter: 'PodImages'\n    });\n\n    switch (type) {\n    case WORKLOAD_TYPES.DEPLOYMENT:\n      out.push(detailItem.ready, detailItem.upToDate, detailItem.available, SEPARATOR, detailItem.endpoint);\n      break;\n    case WORKLOAD_TYPES.DAEMON_SET:\n      out.push(detailItem.ready, SEPARATOR, detailItem.endpoint);\n      break;\n    case WORKLOAD_TYPES.REPLICA_SET:\n      out.push(detailItem.ready, SEPARATOR, detailItem.endpoint);\n      break;\n    case WORKLOAD_TYPES.STATEFUL_SET:\n      out.push(detailItem.ready, SEPARATOR, detailItem.endpoint);\n      break;\n    case WORKLOAD_TYPES.REPLICATION_CONTROLLER:\n      out.push(detailItem.ready, SEPARATOR, detailItem.endpoint);\n      break;\n    case WORKLOAD_TYPES.JOB:\n      out.push(detailItem.endpoint);\n      break;\n    case WORKLOAD_TYPES.CRON_JOB:\n      out.push(detailItem.endpoint);\n      break;\n    case POD:\n      out.push(detailItem.ready);\n      break;\n    default: break;\n    }\n\n    return out;\n  }\n\n  redeploy() {\n    const now = (new Date()).toISOString().replace(/\\.\\d+Z$/, 'Z');\n\n    if ( !this.spec.template.metadata ) {\n      set(this.spec.template, 'metadata', {});\n    }\n\n    const annotations = this.spec.template.metadata.annotations || {};\n\n    annotations[TIMESTAMP] = now;\n    set(this.spec.template.metadata, 'annotations', annotations);\n\n    this.save();\n  }\n\n  // match existing container ports with services created for this workload\n  async getPortsWithServiceType() {\n    const ports = [];\n\n    this.containers.forEach((container) => ports.push(...(container.ports || [])));\n    (this.initContainers || []).forEach((container) => ports.push(...(container.ports || [])));\n\n    // Only get services owned if we can access the service resource\n    const canAccessServices = this.$getters['schemaFor'](SERVICE);\n    const services = canAccessServices ? await this.getServicesOwned() : [];\n    const clusterIPServicePorts = [];\n    const loadBalancerServicePorts = [];\n    const nodePortServicePorts = [];\n\n    if (services.length) {\n      services.forEach((svc) => {\n        switch (svc.spec.type) {\n        case 'ClusterIP':\n          clusterIPServicePorts.push(...(svc?.spec?.ports || []));\n          break;\n        case 'LoadBalancer':\n          loadBalancerServicePorts.push(...(svc?.spec?.ports || []));\n          break;\n        case 'NodePort':\n          nodePortServicePorts.push(...(svc?.spec?.ports || []));\n          break;\n        default:\n          break;\n        }\n      });\n    }\n    ports.forEach((port) => {\n      const name = port.name ? port.name : `${ port.containerPort }${ port.protocol.toLowerCase() }${ port.hostPort || port._listeningPort || '' }`;\n\n      port.name = name;\n\n      if (port._serviceType && port._serviceType !== '') {\n        return;\n      }\n\n      if (loadBalancerServicePorts.length) {\n        const portSpec = findBy(loadBalancerServicePorts, 'name', name);\n\n        if (portSpec) {\n          port._listeningPort = portSpec.port;\n\n          port._serviceType = 'LoadBalancer';\n\n          return;\n        }\n      } if (nodePortServicePorts.length) {\n        const portSpec = findBy(nodePortServicePorts, 'name', name);\n\n        if (portSpec) {\n          port._listeningPort = portSpec.nodePort;\n\n          port._serviceType = 'NodePort';\n\n          return;\n        }\n      } if (clusterIPServicePorts.length) {\n        if (findBy(clusterIPServicePorts, 'name', name)) {\n          port._serviceType = 'ClusterIP';\n        }\n      }\n    });\n\n    return ports;\n  }\n\n  get ownedByWorkload() {\n    const types = Object.values(WORKLOAD_TYPES);\n\n    if (this.metadata?.ownerReferences) {\n      for (const owner of this.metadata.ownerReferences) {\n        const have = (`${ owner.apiVersion.replace(/\\/.*/, '') }.${ owner.kind }`).toLowerCase();\n\n        if ( types.includes(have) ) {\n          return true;\n        }\n      }\n    }\n\n    return false;\n  }\n\n  get isFromNorman() {\n    return (this.metadata.labels || {})['cattle.io/creator'] === 'norman';\n  }\n\n  get warnDeletionMessage() {\n    if (this.isFromNorman) {\n      return this.t('workload.normanWarning');\n    } else {\n      return null;\n    }\n  }\n\n  get pods() {\n    const relationships = this.metadata?.relationships || [];\n    const podRelationship = relationships.filter((relationship) => relationship.toType === POD)[0];\n\n    if (podRelationship) {\n      const pods = this.$getters['podsByNamespace'](this.metadata.namespace);\n\n      return pods.filter((obj) => {\n        return matches(obj, podRelationship.selector);\n      });\n    } else {\n      return [];\n    }\n  }\n\n  get podGauges() {\n    const out = { };\n\n    if (!this.pods) {\n      return out;\n    }\n\n    this.pods.map((pod) => {\n      const { stateColor, stateDisplay } = pod;\n\n      if (out[stateDisplay]) {\n        out[stateDisplay].count++;\n      } else {\n        out[stateDisplay] = {\n          color: stateColor.replace('text-', ''),\n          count: 1\n        };\n      }\n    });\n\n    return out;\n  }\n\n  // Job Specific\n  get jobRelationships() {\n    if (this.type !== WORKLOAD_TYPES.CRON_JOB) {\n      return undefined;\n    }\n\n    return (get(this, 'metadata.relationships') || []).filter((relationship) => relationship.toType === WORKLOAD_TYPES.JOB);\n  }\n\n  get jobs() {\n    if (this.type !== WORKLOAD_TYPES.CRON_JOB) {\n      return undefined;\n    }\n\n    return this.jobRelationships.map((obj) => {\n      return this.$getters['byId'](WORKLOAD_TYPES.JOB, obj.toId );\n    }).filter((x) => !!x);\n  }\n\n  get jobGauges() {\n    const out = {\n      succeeded: { color: 'success', count: 0 }, running: { color: 'info', count: 0 }, failed: { color: 'error', count: 0 }\n    };\n\n    if (this.type === WORKLOAD_TYPES.CRON_JOB) {\n      this.jobs.forEach((job) => {\n        const { status = {} } = job;\n\n        out.running.count += status.active || 0;\n        out.succeeded.count += status.succeeded || 0;\n        out.failed.count += status.failed || 0;\n      });\n    } else if (this.type === WORKLOAD_TYPES.JOB) {\n      const { status = {} } = this;\n\n      out.running.count = status.active || 0;\n      out.succeeded.count = status.succeeded || 0;\n      out.failed.count = status.failed || 0;\n    } else {\n      return null;\n    }\n\n    return out;\n  }\n\n  get currentRevisionNumber() {\n    if (this.ownedByWorkload || this.kind === 'Job' || this.kind === 'CronJob') {\n      return undefined;\n    }\n    if (this.kind === 'Deployment') {\n      return this.metadata.annotations['deployment.kubernetes.io/revision'];\n    }\n\n    // 'DaemonSet', 'StatefulSet'\n    return this.metadata.generation;\n  }\n\n  async matchingPods() {\n    const all = await this.$dispatch('findAll', { type: POD });\n    const allInNamespace = all.filter((pod) => pod.metadata.namespace === this.metadata.namespace);\n\n    const selector = convertSelectorObj(this.spec.selector);\n\n    return matching(allInNamespace, selector);\n  }\n\n  cleanForSave(data) {\n    const val = super.cleanForSave(data);\n\n    // remove fields from containers\n    val.spec?.template?.spec?.containers?.forEach((container) => {\n      this.cleanContainerForSave(container);\n    });\n\n    // remove fields from initContainers\n    val.spec?.template?.spec?.initContainers?.forEach((container) => {\n      this.cleanContainerForSave(container);\n    });\n\n    return val;\n  }\n}\n"],"mappings":"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","ignoreList":[]}]}