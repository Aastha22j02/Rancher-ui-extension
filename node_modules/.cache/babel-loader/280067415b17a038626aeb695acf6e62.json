{"remainingRequest":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js??ref--16-1!/home/ubuntu/suseconf/node_modules/@rancher/shell/plugins/steve/norman-class.js","dependencies":[{"path":"/home/ubuntu/suseconf/node_modules/@rancher/shell/plugins/steve/norman-class.js","mtime":1725338146566},{"path":"/home/ubuntu/suseconf/babel.config.js","mtime":1725343995893},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js","mtime":1725271298942}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3JzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVmbGVjdC5jb25zdHJ1Y3QuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90b0NvbnN1bWFibGVBcnJheSI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHkiOwppbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcyI7CmltcG9ydCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIjsKaW1wb3J0IF9nZXRQcm90b3R5cGVPZiBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9nZXRQcm90b3R5cGVPZiI7CmltcG9ydCBfZ2V0IGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2dldCI7CmltcG9ydCBfaW5oZXJpdHMgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vaW5oZXJpdHMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5rZXlzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pbmNsdWRlcy5qcyI7CmZ1bmN0aW9uIG93bktleXMoZSwgcikgeyB2YXIgdCA9IE9iamVjdC5rZXlzKGUpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgbyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7IHIgJiYgKG8gPSBvLmZpbHRlcihmdW5jdGlvbiAocikgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLCByKS5lbnVtZXJhYmxlOyB9KSksIHQucHVzaC5hcHBseSh0LCBvKTsgfSByZXR1cm4gdDsgfQpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKGUpIHsgZm9yICh2YXIgciA9IDE7IHIgPCBhcmd1bWVudHMubGVuZ3RoOyByKyspIHsgdmFyIHQgPSBudWxsICE9IGFyZ3VtZW50c1tyXSA/IGFyZ3VtZW50c1tyXSA6IHt9OyByICUgMiA/IG93bktleXMoT2JqZWN0KHQpLCAhMCkuZm9yRWFjaChmdW5jdGlvbiAocikgeyBfZGVmaW5lUHJvcGVydHkoZSwgciwgdFtyXSk7IH0pIDogT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMgPyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyh0KSkgOiBvd25LZXlzKE9iamVjdCh0KSkuZm9yRWFjaChmdW5jdGlvbiAocikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgciwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LCByKSk7IH0pOyB9IHJldHVybiBlOyB9CmZ1bmN0aW9uIF9jYWxsU3VwZXIodCwgbywgZSkgeyByZXR1cm4gbyA9IF9nZXRQcm90b3R5cGVPZihvKSwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odCwgX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpID8gUmVmbGVjdC5jb25zdHJ1Y3QobywgZSB8fCBbXSwgX2dldFByb3RvdHlwZU9mKHQpLmNvbnN0cnVjdG9yKSA6IG8uYXBwbHkodCwgZSkpOyB9CmZ1bmN0aW9uIF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKSB7IHRyeSB7IHZhciB0ID0gIUJvb2xlYW4ucHJvdG90eXBlLnZhbHVlT2YuY2FsbChSZWZsZWN0LmNvbnN0cnVjdChCb29sZWFuLCBbXSwgZnVuY3Rpb24gKCkge30pKTsgfSBjYXRjaCAodCkge30gcmV0dXJuIChfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0ID0gZnVuY3Rpb24gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpIHsgcmV0dXJuICEhdDsgfSkoKTsgfQpmdW5jdGlvbiBfc3VwZXJQcm9wR2V0KHQsIGUsIG8sIHIpIHsgdmFyIHAgPSBfZ2V0KF9nZXRQcm90b3R5cGVPZigxICYgciA/IHQucHJvdG90eXBlIDogdCksIGUsIG8pOyByZXR1cm4gMiAmIHIgJiYgImZ1bmN0aW9uIiA9PSB0eXBlb2YgcCA/IGZ1bmN0aW9uICh0KSB7IHJldHVybiBwLmFwcGx5KG8sIHQpOyB9IDogcDsgfQppbXBvcnQgeyBBTk5PVEFUSU9OU19UT19JR05PUkVfUkVHRVgsIExBQkVMU19UT19JR05PUkVfUkVHRVggfSBmcm9tICdAc2hlbGwvY29uZmlnL2xhYmVscy1hbm5vdGF0aW9ucyc7CmltcG9ydCBwaWNrQnkgZnJvbSAnbG9kYXNoL3BpY2tCeSc7CmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IHsgZmluZEJ5IH0gZnJvbSAnQHNoZWxsL3V0aWxzL2FycmF5JzsKaW1wb3J0IHsgbWF0Y2hlc1NvbWVSZWdleCwgY29lcmNlU3RyaW5nVHlwZVRvU2NhbGFyVHlwZSB9IGZyb20gJ0BzaGVsbC91dGlscy9zdHJpbmcnOwppbXBvcnQgUmVzb3VyY2UsIHsgRE5TX0xJS0VfVFlQRVMgfSBmcm9tICdAc2hlbGwvcGx1Z2lucy9kYXNoYm9hcmQtc3RvcmUvcmVzb3VyY2UtY2xhc3MnOwppbXBvcnQgeyBnZXQgfSBmcm9tICdAc2hlbGwvdXRpbHMvb2JqZWN0JzsKaW1wb3J0IHsgZGlzcGxheUtleUZvciwgdmFsaWRhdGVCb29sZWFuLCB2YWxpZGF0ZUNoYXJzLCB2YWxpZGF0ZURuc0xpa2VUeXBlcywgdmFsaWRhdGVMZW5ndGggfSBmcm9tICdAc2hlbGwvdXRpbHMvdmFsaWRhdG9ycyc7CmltcG9ydCB7IG5vcm1hbGl6ZVR5cGUgfSBmcm9tICdAc2hlbGwvcGx1Z2lucy9kYXNoYm9hcmQtc3RvcmUvbm9ybWFsaXplJzsKaW1wb3J0IGlzU3RyaW5nIGZyb20gJ2xvZGFzaC9pc1N0cmluZyc7CmltcG9ydCB1bmlxIGZyb20gJ2xvZGFzaC91bmlxJzsKaW1wb3J0IGlzRW1wdHkgZnJvbSAnbG9kYXNoL2lzRW1wdHknOwp2YXIgU1RSSU5HX0xJS0VfVFlQRVMgPSBbJ3N0cmluZycsICdkYXRlJywgJ2Jsb2InLCAnZW51bScsICdtdWx0aWxpbmUnLCAnbWFza2VkJywgJ3Bhc3N3b3JkJywgJ2Ruc0xhYmVsJywgJ2hvc3RuYW1lJ107CnZhciBOb3JtYW5Nb2RlbCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX1Jlc291cmNlKSB7CiAgZnVuY3Rpb24gTm9ybWFuTW9kZWwoKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTm9ybWFuTW9kZWwpOwogICAgcmV0dXJuIF9jYWxsU3VwZXIodGhpcywgTm9ybWFuTW9kZWwsIGFyZ3VtZW50cyk7CiAgfQogIF9pbmhlcml0cyhOb3JtYW5Nb2RlbCwgX1Jlc291cmNlKTsKICByZXR1cm4gX2NyZWF0ZUNsYXNzKE5vcm1hbk1vZGVsLCBbewogICAga2V5OiAic2V0TGFiZWxzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRMYWJlbHModmFsKSB7CiAgICAgIHZhciBhbGwgPSB0aGlzLmxhYmVscyB8fCB7fTsKICAgICAgdmFyIHdhc0lnbm9yZWQgPSBwaWNrQnkoYWxsLCBmdW5jdGlvbiAodmFsdWUsIGtleSkgewogICAgICAgIHJldHVybiBtYXRjaGVzU29tZVJlZ2V4KGtleSwgTEFCRUxTX1RPX0lHTk9SRV9SRUdFWCk7CiAgICAgIH0pOwogICAgICBWdWUuc2V0KHRoaXMsICdsYWJlbHMnLCBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHdhc0lnbm9yZWQpLCB2YWwpKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzZXRMYWJlbCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0TGFiZWwoa2V5LCB2YWwpIHsKICAgICAgaWYgKHZhbCkgewogICAgICAgIGlmICghdGhpcy5sYWJlbHMpIHsKICAgICAgICAgIHRoaXMubGFiZWxzID0ge307CiAgICAgICAgfQogICAgICAgIFZ1ZS5zZXQodGhpcy5sYWJlbHMsIGtleSwgdmFsKTsKICAgICAgfSBlbHNlIGlmICh0aGlzLmxhYmVscykgewogICAgICAgIFZ1ZS5zZXQodGhpcy5sYWJlbHMsIGtleSwgdW5kZWZpbmVkKTsKICAgICAgICBkZWxldGUgdGhpcy5sYWJlbHNba2V5XTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogInNldEFubm90YXRpb25zIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRBbm5vdGF0aW9ucyh2YWwpIHsKICAgICAgdmFyIGFsbCA9IHRoaXMuYW5ub3RhdGlvbnMgfHwge307CiAgICAgIHZhciB3YXNJZ25vcmVkID0gcGlja0J5KGFsbCwgZnVuY3Rpb24gKHZhbHVlLCBrZXkpIHsKICAgICAgICByZXR1cm4gbWF0Y2hlc1NvbWVSZWdleChrZXksIEFOTk9UQVRJT05TX1RPX0lHTk9SRV9SRUdFWCk7CiAgICAgIH0pOwogICAgICBWdWUuc2V0KHRoaXMsICdhbm5vdGF0aW9ucycsIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgd2FzSWdub3JlZCksIHZhbCkpOwogICAgfQogIH0sIHsKICAgIGtleTogInNldEFubm90YXRpb24iLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNldEFubm90YXRpb24oa2V5LCB2YWwpIHsKICAgICAgaWYgKHZhbCkgewogICAgICAgIGlmICghdGhpcy5hbm5vdGF0aW9ucykgewogICAgICAgICAgdGhpcy5hbm5vdGF0aW9ucyA9IHt9OwogICAgICAgIH0KICAgICAgICBWdWUuc2V0KHRoaXMuYW5ub3RhdGlvbnMsIGtleSwgdmFsKTsKICAgICAgfSBlbHNlIGlmICh0aGlzLmFubm90YXRpb25zKSB7CiAgICAgICAgVnVlLnNldCh0aGlzLmFubm90YXRpb25zLCBrZXksIHVuZGVmaW5lZCk7CiAgICAgICAgZGVsZXRlIHRoaXMuYW5ub3RhdGlvbnNba2V5XTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogInNldFJlc291cmNlUXVvdGFzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRSZXNvdXJjZVF1b3RhcyhzcGVjKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHZhciBrZXlzID0gWydyZXNvdXJjZVF1b3RhJywgJ25hbWVzcGFjZURlZmF1bHRSZXNvdXJjZVF1b3RhJ107CiAgICAgIGtleXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgVnVlLnNldChfdGhpcywga2V5LCBfb2JqZWN0U3ByZWFkKHt9LCBzcGVjW2tleV0pKTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiaXNDb25kaXRpb24iLAogICAgdmFsdWU6IGZ1bmN0aW9uIGlzQ29uZGl0aW9uKGNvbmRpdGlvbikgewogICAgICB2YXIgd2l0aFN0YXR1cyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogJ1RydWUnOwogICAgICBpZiAoIXRoaXMuY29uZGl0aW9ucykgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICB2YXIgZW50cnkgPSBmaW5kQnkodGhpcy5jb25kaXRpb25zIHx8IFtdLCAndHlwZScsIGNvbmRpdGlvbik7CiAgICAgIGlmICghZW50cnkpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgaWYgKCF3aXRoU3RhdHVzKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KICAgICAgcmV0dXJuIChlbnRyeS5zdGF0dXMgfHwgJycpLnRvTG93ZXJDYXNlKCkgPT09ICIiLmNvbmNhdCh3aXRoU3RhdHVzKS50b0xvd2VyQ2FzZSgpOwogICAgfQoKICAgIC8qKgogICAgICogQ2hlY2sgdGhpcyBpbnN0YW5jZSBpcyB2YWxpZCBhZ2FpbnN0CiAgICAgKiAtIHRoZSBzY2hlbWEncyByZXNvdXJjZSBmaWVsZHMKICAgICAqIC0gYWxzbyBjYWxscyBzdXBlci52YWxpZGF0aW9uRXJyb3JzCiAgICAgKi8KICB9LCB7CiAgICBrZXk6ICJ2YWxpZGF0aW9uRXJyb3JzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiB2YWxpZGF0aW9uRXJyb3JzKCkgewogICAgICB2YXIgZGF0YSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogdGhpczsKICAgICAgdmFyIG9wdCA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogewogICAgICAgIGlnbm9yZUZpZWxkczogdW5kZWZpbmVkCiAgICAgIH07CiAgICAgIHZhciBlcnJvcnMgPSBbXTsKICAgICAgdmFyIG9yaWdpbmFsVHlwZSA9IGRhdGEudHlwZSwKICAgICAgICBzY2hlbWEgPSBkYXRhLnNjaGVtYTsKICAgICAgdmFyIHR5cGUgPSBub3JtYWxpemVUeXBlKG9yaWdpbmFsVHlwZSk7CiAgICAgIGlmICghb3JpZ2luYWxUeXBlKSB7CiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lCiAgICAgICAgY29uc29sZS53YXJuKHRoaXMudCgndmFsaWRhdGlvbi5ub1R5cGUnKSwgZGF0YSk7CiAgICAgICAgcmV0dXJuIGVycm9yczsKICAgICAgfQogICAgICBpZiAoIXNjaGVtYSkgewogICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZQogICAgICAgIC8vIGNvbnNvbGUud2Fybih0aGlzLnQoJ3ZhbGlkYXRpb24ubm9TY2hlbWEnKSwgb3JpZ2luYWxUeXBlLCBkYXRhKTsKCiAgICAgICAgcmV0dXJuIGVycm9yczsKICAgICAgfQogICAgICB2YXIgZmllbGRzID0gc2NoZW1hLnJlc291cmNlRmllbGRzIHx8IHt9OwogICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGZpZWxkcyk7CiAgICAgIHZhciBmaWVsZCwga2V5LCB2YWwsIGRpc3BsYXlLZXk7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykgewogICAgICAgIHZhciBfZmllbGQ7CiAgICAgICAgdmFyIGZpZWxkRXJyb3JzID0gW107CiAgICAgICAga2V5ID0ga2V5c1tpXTsKICAgICAgICBmaWVsZCA9IGZpZWxkc1trZXldOwogICAgICAgIHZhbCA9IGdldChkYXRhLCBrZXkpOwogICAgICAgIGRpc3BsYXlLZXkgPSBkaXNwbGF5S2V5Rm9yKHR5cGUsIGtleSwgdGhpcy4kcm9vdEdldHRlcnMpOwogICAgICAgIHZhciBmaWVsZFR5cGUgPSAoX2ZpZWxkID0gZmllbGQpICE9PSBudWxsICYmIF9maWVsZCAhPT0gdm9pZCAwICYmIF9maWVsZC50eXBlID8gbm9ybWFsaXplVHlwZShmaWVsZC50eXBlKSA6IG51bGw7CiAgICAgICAgdmFyIHZhbElzU3RyaW5nID0gaXNTdHJpbmcodmFsKTsKICAgICAgICBpZiAob3B0Lmlnbm9yZUZpZWxkcyAmJiBvcHQuaWdub3JlRmllbGRzLmluY2x1ZGVzKGtleSkpIHsKICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIH0KICAgICAgICBpZiAodmFsID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgIHZhbCA9IG51bGw7CiAgICAgICAgfQogICAgICAgIGlmICh2YWxJc1N0cmluZykgewogICAgICAgICAgaWYgKGZpZWxkVHlwZSkgewogICAgICAgICAgICBWdWUuc2V0KGRhdGEsIGtleSwgY29lcmNlU3RyaW5nVHlwZVRvU2NhbGFyVHlwZSh2YWwsIGZpZWxkVHlwZSkpOwogICAgICAgICAgfQoKICAgICAgICAgIC8vIEVtcHR5IHN0cmluZ3Mgb24gbnVsbGFibGUgc3RyaW5nIGZpZWxkcyAtPiBudWxsCiAgICAgICAgICBpZiAoZmllbGQubnVsbGFibGUgJiYgdmFsLmxlbmd0aCA9PT0gMCAmJiBTVFJJTkdfTElLRV9UWVBFUy5pbmNsdWRlcyhmaWVsZFR5cGUpKSB7CiAgICAgICAgICAgIHZhbCA9IG51bGw7CiAgICAgICAgICAgIFZ1ZS5zZXQoZGF0YSwga2V5LCB2YWwpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAoZmllbGRUeXBlID09PSAnYm9vbGVhbicpIHsKICAgICAgICAgIHZhbGlkYXRlQm9vbGVhbih2YWwsIGZpZWxkLCBkaXNwbGF5S2V5LCB0aGlzLiRyb290R2V0dGVycywgZmllbGRFcnJvcnMpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB2YWxpZGF0ZUxlbmd0aCh2YWwsIGZpZWxkLCBkaXNwbGF5S2V5LCB0aGlzLiRyb290R2V0dGVycywgZmllbGRFcnJvcnMpOwogICAgICAgICAgdmFsaWRhdGVDaGFycyh2YWwsIGZpZWxkLCBkaXNwbGF5S2V5LCB0aGlzLiRyb290R2V0dGVycywgZmllbGRFcnJvcnMpOwogICAgICAgIH0KICAgICAgICBpZiAoZmllbGRFcnJvcnMubGVuZ3RoID4gMCkgewogICAgICAgICAgZmllbGRFcnJvcnMucHVzaCh0aGlzLnQoJ3ZhbGlkYXRpb24ucmVxdWlyZWQnLCB7CiAgICAgICAgICAgIGtleTogZGlzcGxheUtleQogICAgICAgICAgfSkpOwogICAgICAgICAgZXJyb3JzLnB1c2guYXBwbHkoZXJyb3JzLCBmaWVsZEVycm9ycyk7CiAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9CgogICAgICAgIC8vIElEcyBjbGFpbSB0byBiZSB0aGVzZSBidXQgYXJlIGxpZXMuLi4KICAgICAgICBpZiAoa2V5ICE9PSAnaWQnICYmICFpc0VtcHR5KHZhbCkgJiYgRE5TX0xJS0VfVFlQRVMuaW5jbHVkZXMoZmllbGRUeXBlKSkgewogICAgICAgICAgLy8gRE5TIHR5cGVzIHNob3VsZCBiZSBsb3dlcmNhc2UKICAgICAgICAgIHZhciB0b2xvd2VyID0gKHZhbCB8fCAnJykudG9Mb3dlckNhc2UoKTsKICAgICAgICAgIGlmICh0b2xvd2VyICE9PSB2YWwpIHsKICAgICAgICAgICAgdmFsID0gdG9sb3dlcjsKICAgICAgICAgICAgVnVlLnNldChkYXRhLCBrZXksIHZhbCk7CiAgICAgICAgICB9CiAgICAgICAgICBmaWVsZEVycm9ycy5wdXNoLmFwcGx5KGZpZWxkRXJyb3JzLCBfdG9Db25zdW1hYmxlQXJyYXkodmFsaWRhdGVEbnNMaWtlVHlwZXModmFsLCBmaWVsZFR5cGUsIGRpc3BsYXlLZXksIHRoaXMuJHJvb3RHZXR0ZXJzLCBmaWVsZEVycm9ycykpKTsKICAgICAgICB9CiAgICAgICAgZXJyb3JzLnB1c2guYXBwbHkoZXJyb3JzLCBmaWVsZEVycm9ycyk7CiAgICAgIH0KICAgICAgdmFyIHJvb3RFcnJvcnMgPSBfc3VwZXJQcm9wR2V0KE5vcm1hbk1vZGVsLCAidmFsaWRhdGlvbkVycm9ycyIsIHRoaXMsIDMpKFt0aGlzLCBvcHRdKTsKICAgICAgcmV0dXJuIHVuaXEoW10uY29uY2F0KGVycm9ycywgX3RvQ29uc3VtYWJsZUFycmF5KHJvb3RFcnJvcnMpKSk7CiAgICB9CiAgfV0pOwp9KFJlc291cmNlKTsKZXhwb3J0IHsgTm9ybWFuTW9kZWwgYXMgZGVmYXVsdCB9Ow=="},{"version":3,"names":["ANNOTATIONS_TO_IGNORE_REGEX","LABELS_TO_IGNORE_REGEX","pickBy","Vue","findBy","matchesSomeRegex","coerceStringTypeToScalarType","Resource","DNS_LIKE_TYPES","get","displayKeyFor","validateBoolean","validateChars","validateDnsLikeTypes","validateLength","normalizeType","isString","uniq","isEmpty","STRING_LIKE_TYPES","NormanModel","_Resource","_classCallCheck","_callSuper","arguments","_inherits","_createClass","key","value","setLabels","val","all","labels","wasIgnored","set","_objectSpread","setLabel","undefined","setAnnotations","annotations","setAnnotation","setResourceQuotas","spec","_this","keys","forEach","isCondition","condition","withStatus","length","conditions","entry","status","toLowerCase","concat","validationErrors","data","opt","ignoreFields","errors","originalType","type","schema","console","warn","t","fields","resourceFields","Object","field","displayKey","i","_field","fieldErrors","$rootGetters","fieldType","valIsString","includes","nullable","push","apply","tolower","_toConsumableArray","rootErrors","_superPropGet","default"],"sources":["/home/ubuntu/suseconf/node_modules/@rancher/shell/plugins/steve/norman-class.js"],"sourcesContent":["import { ANNOTATIONS_TO_IGNORE_REGEX, LABELS_TO_IGNORE_REGEX } from '@shell/config/labels-annotations';\nimport pickBy from 'lodash/pickBy';\nimport Vue from 'vue';\nimport { findBy } from '@shell/utils/array';\nimport { matchesSomeRegex, coerceStringTypeToScalarType } from '@shell/utils/string';\nimport Resource, { DNS_LIKE_TYPES } from '@shell/plugins/dashboard-store/resource-class';\nimport { get } from '@shell/utils/object';\nimport {\n  displayKeyFor,\n  validateBoolean,\n  validateChars,\n  validateDnsLikeTypes,\n  validateLength,\n} from '@shell/utils/validators';\nimport { normalizeType } from '@shell/plugins/dashboard-store/normalize';\nimport isString from 'lodash/isString';\nimport uniq from 'lodash/uniq';\n\nimport isEmpty from 'lodash/isEmpty';\n\nconst STRING_LIKE_TYPES = [\n  'string',\n  'date',\n  'blob',\n  'enum',\n  'multiline',\n  'masked',\n  'password',\n  'dnsLabel',\n  'hostname',\n];\n\nexport default class NormanModel extends Resource {\n  setLabels(val) {\n    const all = this.labels || {};\n    const wasIgnored = pickBy(all, (value, key) => {\n      return matchesSomeRegex(key, LABELS_TO_IGNORE_REGEX);\n    });\n\n    Vue.set(this, 'labels', { ...wasIgnored, ...val });\n  }\n\n  setLabel(key, val) {\n    if ( val ) {\n      if ( !this.labels ) {\n        this.labels = {};\n      }\n\n      Vue.set(this.labels, key, val);\n    } else if ( this.labels ) {\n      Vue.set(this.labels, key, undefined);\n      delete this.labels[key];\n    }\n  }\n\n  setAnnotations(val) {\n    const all = this.annotations || {};\n    const wasIgnored = pickBy(all, (value, key) => {\n      return matchesSomeRegex(key, ANNOTATIONS_TO_IGNORE_REGEX);\n    });\n\n    Vue.set(this, 'annotations', { ...wasIgnored, ...val });\n  }\n\n  setAnnotation(key, val) {\n    if ( val ) {\n      if ( !this.annotations ) {\n        this.annotations = {};\n      }\n\n      Vue.set(this.annotations, key, val);\n    } else if ( this.annotations ) {\n      Vue.set(this.annotations, key, undefined);\n      delete this.annotations[key];\n    }\n  }\n\n  setResourceQuotas(spec) {\n    const keys = ['resourceQuota', 'namespaceDefaultResourceQuota'];\n\n    keys.forEach((key) => {\n      Vue.set(this, key, { ...spec[key] });\n    });\n  }\n\n  isCondition(condition, withStatus = 'True') {\n    if ( !this.conditions ) {\n      return false;\n    }\n\n    const entry = findBy((this.conditions || []), 'type', condition);\n\n    if ( !entry ) {\n      return false;\n    }\n\n    if ( !withStatus ) {\n      return true;\n    }\n\n    return (entry.status || '').toLowerCase() === `${ withStatus }`.toLowerCase();\n  }\n\n  /**\n   * Check this instance is valid against\n   * - the schema's resource fields\n   * - also calls super.validationErrors\n   */\n  validationErrors(data = this, opt = { ignoreFields: undefined }) {\n    const errors = [];\n    const {\n      type: originalType,\n      schema\n    } = data;\n    const type = normalizeType(originalType);\n\n    if ( !originalType ) {\n      // eslint-disable-next-line\n      console.warn(this.t('validation.noType'), data);\n\n      return errors;\n    }\n\n    if ( !schema ) {\n      // eslint-disable-next-line\n      // console.warn(this.t('validation.noSchema'), originalType, data);\n\n      return errors;\n    }\n\n    const fields = schema.resourceFields || {};\n    const keys = Object.keys(fields);\n    let field, key, val, displayKey;\n\n    for ( let i = 0 ; i < keys.length ; i++ ) {\n      const fieldErrors = [];\n\n      key = keys[i];\n      field = fields[key];\n      val = get(data, key);\n      displayKey = displayKeyFor(type, key, this.$rootGetters);\n\n      const fieldType = field?.type ? normalizeType(field.type) : null;\n      const valIsString = isString(val);\n\n      if ( opt.ignoreFields && opt.ignoreFields.includes(key) ) {\n        continue;\n      }\n\n      if ( val === undefined ) {\n        val = null;\n      }\n\n      if (valIsString) {\n        if (fieldType) {\n          Vue.set(data, key, coerceStringTypeToScalarType(val, fieldType));\n        }\n\n        // Empty strings on nullable string fields -> null\n        if ( field.nullable && val.length === 0 && STRING_LIKE_TYPES.includes(fieldType)) {\n          val = null;\n\n          Vue.set(data, key, val);\n        }\n      }\n      if (fieldType === 'boolean') {\n        validateBoolean(val, field, displayKey, this.$rootGetters, fieldErrors);\n      } else {\n        validateLength(val, field, displayKey, this.$rootGetters, fieldErrors);\n        validateChars(val, field, displayKey, this.$rootGetters, fieldErrors);\n      }\n\n      if (fieldErrors.length > 0) {\n        fieldErrors.push(this.t('validation.required', { key: displayKey }));\n        errors.push(...fieldErrors);\n        continue;\n      }\n\n      // IDs claim to be these but are lies...\n      if ( key !== 'id' && !isEmpty(val) && DNS_LIKE_TYPES.includes(fieldType) ) {\n        // DNS types should be lowercase\n        const tolower = (val || '').toLowerCase();\n\n        if ( tolower !== val ) {\n          val = tolower;\n\n          Vue.set(data, key, val);\n        }\n\n        fieldErrors.push(...validateDnsLikeTypes(val, fieldType, displayKey, this.$rootGetters, fieldErrors));\n      }\n      errors.push(...fieldErrors);\n    }\n\n    const rootErrors = super.validationErrors(this, opt);\n\n    return uniq([...errors, ...rootErrors]);\n  }\n}\n"],"mappings":"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","ignoreList":[]}]}