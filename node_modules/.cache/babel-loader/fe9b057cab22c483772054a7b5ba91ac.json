{"remainingRequest":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js??ref--16-1!/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js??ref--17-0!/home/ubuntu/suseconf/node_modules/ts-loader/index.js??ref--17-1!/home/ubuntu/suseconf/node_modules/@rancher/shell/cloud-credential/__tests__/azure.test.ts","dependencies":[{"path":"/home/ubuntu/suseconf/node_modules/@rancher/shell/cloud-credential/__tests__/azure.test.ts","mtime":1725338146566},{"path":"/home/ubuntu/suseconf/babel.config.js","mtime":1725343995893},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js","mtime":1725271298942},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/ts-loader/index.js","mtime":1725271299135}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgX3JlZ2VuZXJhdG9yUnVudGltZSBmcm9tICIvaG9tZS91YnVudHUvc3VzZWNvbmYvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL3JlZ2VuZXJhdG9yL2luZGV4LmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCB7IG1vdW50IH0gZnJvbSAnQHZ1ZS90ZXN0LXV0aWxzJzsKaW1wb3J0IEF6dXJlQ2xvdWRDcmVkcyBmcm9tICdAc2hlbGwvY2xvdWQtY3JlZGVudGlhbC9henVyZS52dWUnOwp2YXIgbW9ja1N0b3JlID0gewogIGdldHRlcnM6IHsKICAgICdpMThuL3QnOiBqZXN0LmZuKCkKICB9LAogIGRpc3BhdGNoOiBmdW5jdGlvbiBkaXNwYXRjaCgpIHsKICAgIHJldHVybiBqZXN0LmZuKCk7CiAgfQp9OwpkZXNjcmliZSgnY2xvdWQgY3JlZGVudGlhbHM6IEF6dXJlJywgZnVuY3Rpb24gKCkgewogIHZhciB3cmFwcGVyID0gbW91bnQoQXp1cmVDbG91ZENyZWRzLCB7CiAgICBwcm9wc0RhdGE6IHsKICAgICAgdmFsdWU6IHsKICAgICAgICBkZWNvZGVkRGF0YTogewogICAgICAgICAgZW52aXJvbm1lbnQ6ICcnLAogICAgICAgICAgc3Vic2NyaXB0aW9uSWQ6ICcnLAogICAgICAgICAgY2xpZW50SWQ6ICcnLAogICAgICAgICAgY2xpZW50U2VjcmV0OiAnJwogICAgICAgIH0sCiAgICAgICAgc2V0RGF0YTogamVzdC5mbigpCiAgICAgIH0KICAgIH0sCiAgICBtb2NrczogewogICAgICAkc3RvcmU6IG1vY2tTdG9yZQogICAgfQogIH0pOwogIGl0KCdzaG91bGQgcGFzcyBhbGwgdGhlIGNvcnJlY3QgZmllbGRzIHdoZW4gY2hlY2tpbmcgaWYgY3JlZGVudGlhbHMgYXJlIHZhbGlkJywgLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgIHZhciBzcHlEaXNwYXRjaDsKICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICBjYXNlIDA6CiAgICAgICAgICBzcHlEaXNwYXRjaCA9IGplc3Quc3B5T24obW9ja1N0b3JlLCAnZGlzcGF0Y2gnKTsKICAgICAgICAgIHdyYXBwZXIuc2V0RGF0YSh7CiAgICAgICAgICAgIHZhbHVlOiB7CiAgICAgICAgICAgICAgZGVjb2RlZERhdGE6IHsKICAgICAgICAgICAgICAgIGVudmlyb25tZW50OiAnbXktZW52JywKICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbklkOiAnbXktc3ViLWlkJywKICAgICAgICAgICAgICAgIGNsaWVudElkOiAnbXktYy1pZCcsCiAgICAgICAgICAgICAgICBjbGllbnRTZWNyZXQ6ICdteS1jLXNlY3JldCcKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ7CiAgICAgICAgICByZXR1cm4gd3JhcHBlci52bS50ZXN0KCk7CiAgICAgICAgY2FzZSA0OgogICAgICAgICAgZXhwZWN0KHNweURpc3BhdGNoKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnbWFuYWdlbWVudC9yZXF1ZXN0JywgewogICAgICAgICAgICBkYXRhOiB7CiAgICAgICAgICAgICAgZW52aXJvbm1lbnQ6ICdteS1lbnYnLAogICAgICAgICAgICAgIHN1YnNjcmlwdGlvbklkOiAnbXktc3ViLWlkJywKICAgICAgICAgICAgICBjbGllbnRJZDogJ215LWMtaWQnLAogICAgICAgICAgICAgIGNsaWVudFNlY3JldDogJ215LWMtc2VjcmV0JwogICAgICAgICAgICB9LAogICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywKICAgICAgICAgICAgcmVkaXJlY3RVbmF1dGhvcml6ZWQ6IGZhbHNlLAogICAgICAgICAgICB1cmw6ICcvbWV0YS9ha3NDaGVja0NyZWRlbnRpYWxzJwogICAgICAgICAgfSk7CiAgICAgICAgY2FzZSA1OgogICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICB9CiAgICB9LCBfY2FsbGVlKTsKICB9KSkpOwp9KTs="},{"version":3,"names":["mount","AzureCloudCreds","mockStore","getters","jest","fn","dispatch","describe","wrapper","propsData","value","decodedData","environment","subscriptionId","clientId","clientSecret","setData","mocks","$store","it","_asyncToGenerator","_regeneratorRuntime","mark","_callee","spyDispatch","wrap","_callee$","_context","prev","next","spyOn","vm","test","expect","toHaveBeenCalledWith","data","method","redirectUnauthorized","url","stop"],"sources":["/home/ubuntu/suseconf/node_modules/@rancher/shell/cloud-credential/__tests__/azure.test.ts"],"sourcesContent":["import { mount } from '@vue/test-utils';\nimport AzureCloudCreds from '@shell/cloud-credential/azure.vue';\n\nconst mockStore = {\n  getters:  { 'i18n/t': jest.fn() },\n  dispatch: () => jest.fn()\n};\n\ndescribe('cloud credentials: Azure', () => {\n  const wrapper = mount(AzureCloudCreds, {\n    propsData: {\n      value: {\n        decodedData: {\n          environment:    '',\n          subscriptionId: '',\n          clientId:       '',\n          clientSecret:   '',\n        },\n        setData: jest.fn()\n      }\n    },\n    mocks: { $store: mockStore }\n  });\n\n  it('should pass all the correct fields when checking if credentials are valid', async() => {\n    const spyDispatch = jest.spyOn(mockStore, 'dispatch');\n\n    wrapper.setData({\n      value: {\n        decodedData: {\n          environment:    'my-env',\n          subscriptionId: 'my-sub-id',\n          clientId:       'my-c-id',\n          clientSecret:   'my-c-secret',\n        }\n      }\n    });\n\n    await wrapper.vm.test();\n\n    expect(spyDispatch).toHaveBeenCalledWith('management/request', {\n      data: {\n        environment:    'my-env',\n        subscriptionId: 'my-sub-id',\n        clientId:       'my-c-id',\n        clientSecret:   'my-c-secret',\n      },\n      method:               'POST',\n      redirectUnauthorized: false,\n      url:                  '/meta/aksCheckCredentials'\n    });\n  });\n});\n"],"mappings":";;;;AAAA,SAASA,KAAK,QAAQ,iBAAiB;AACvC,OAAOC,eAAe,MAAM,mCAAmC;AAE/D,IAAMC,SAAS,GAAG;EAChBC,OAAO,EAAG;IAAE,QAAQ,EAAEC,IAAI,CAACC,EAAE;EAAE,CAAE;EACjCC,QAAQ,EAAE,SAAVA,QAAQA,CAAA;IAAA,OAAQF,IAAI,CAACC,EAAE,EAAE;EAAA;CAC1B;AAEDE,QAAQ,CAAC,0BAA0B,EAAE,YAAK;EACxC,IAAMC,OAAO,GAAGR,KAAK,CAACC,eAAe,EAAE;IACrCQ,SAAS,EAAE;MACTC,KAAK,EAAE;QACLC,WAAW,EAAE;UACXC,WAAW,EAAK,EAAE;UAClBC,cAAc,EAAE,EAAE;UAClBC,QAAQ,EAAQ,EAAE;UAClBC,YAAY,EAAI;SACjB;QACDC,OAAO,EAAEZ,IAAI,CAACC,EAAE;;KAEnB;IACDY,KAAK,EAAE;MAAEC,MAAM,EAAEhB;IAAS;GAC3B,CAAC;EAEFiB,EAAE,CAAC,2EAA2E,eAAAC,iBAAA,cAAAC,mBAAA,CAAAC,IAAA,CAAE,SAAAC,QAAA;IAAA,IAAAC,WAAA;IAAA,OAAAH,mBAAA,CAAAI,IAAA,UAAAC,SAAAC,QAAA;MAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;QAAA;UACxEL,WAAW,GAAGpB,IAAI,CAAC0B,KAAK,CAAC5B,SAAS,EAAE,UAAU,CAAC;UAErDM,OAAO,CAACQ,OAAO,CAAC;YACdN,KAAK,EAAE;cACLC,WAAW,EAAE;gBACXC,WAAW,EAAK,QAAQ;gBACxBC,cAAc,EAAE,WAAW;gBAC3BC,QAAQ,EAAQ,SAAS;gBACzBC,YAAY,EAAI;;;WAGrB,CAAC;UAACY,QAAA,CAAAE,IAAA;UAAA,OAEGrB,OAAO,CAACuB,EAAE,CAACC,IAAI,EAAE;QAAA;UAEvBC,MAAM,CAACT,WAAW,CAAC,CAACU,oBAAoB,CAAC,oBAAoB,EAAE;YAC7DC,IAAI,EAAE;cACJvB,WAAW,EAAK,QAAQ;cACxBC,cAAc,EAAE,WAAW;cAC3BC,QAAQ,EAAQ,SAAS;cACzBC,YAAY,EAAI;aACjB;YACDqB,MAAM,EAAgB,MAAM;YAC5BC,oBAAoB,EAAE,KAAK;YAC3BC,GAAG,EAAmB;WACvB,CAAC;QAAC;QAAA;UAAA,OAAAX,QAAA,CAAAY,IAAA;MAAA;IAAA,GAAAhB,OAAA;EAAA,CACJ,GAAC;AACJ,CAAC,CAAC","ignoreList":[]}]}