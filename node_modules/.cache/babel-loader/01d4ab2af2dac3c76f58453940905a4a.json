{"remainingRequest":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js??ref--16-1!/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/ubuntu/suseconf/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ubuntu/suseconf/node_modules/@rancher/shell/edit/provisioning.cattle.io.cluster/index.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/ubuntu/suseconf/node_modules/@rancher/shell/edit/provisioning.cattle.io.cluster/index.vue","mtime":1725338146566},{"path":"/home/ubuntu/suseconf/babel.config.js","mtime":1725343995893},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js","mtime":1725271298942},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1725271300920}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKZnVuY3Rpb24gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIociwgZSkgeyB2YXIgdCA9ICJ1bmRlZmluZWQiICE9IHR5cGVvZiBTeW1ib2wgJiYgcltTeW1ib2wuaXRlcmF0b3JdIHx8IHJbIkBAaXRlcmF0b3IiXTsgaWYgKCF0KSB7IGlmIChBcnJheS5pc0FycmF5KHIpIHx8ICh0ID0gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KHIpKSB8fCBlICYmIHIgJiYgIm51bWJlciIgPT0gdHlwZW9mIHIubGVuZ3RoKSB7IHQgJiYgKHIgPSB0KTsgdmFyIF9uID0gMCwgRiA9IGZ1bmN0aW9uIEYoKSB7fTsgcmV0dXJuIHsgczogRiwgbjogZnVuY3Rpb24gbigpIHsgcmV0dXJuIF9uID49IHIubGVuZ3RoID8geyBkb25lOiAhMCB9IDogeyBkb25lOiAhMSwgdmFsdWU6IHJbX24rK10gfTsgfSwgZTogZnVuY3Rpb24gZShyKSB7IHRocm93IHI7IH0sIGY6IEYgfTsgfSB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gaXRlcmF0ZSBub24taXRlcmFibGUgaW5zdGFuY2UuXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuIik7IH0gdmFyIG8sIGEgPSAhMCwgdSA9ICExOyByZXR1cm4geyBzOiBmdW5jdGlvbiBzKCkgeyB0ID0gdC5jYWxsKHIpOyB9LCBuOiBmdW5jdGlvbiBuKCkgeyB2YXIgciA9IHQubmV4dCgpOyByZXR1cm4gYSA9IHIuZG9uZSwgcjsgfSwgZTogZnVuY3Rpb24gZShyKSB7IHUgPSAhMCwgbyA9IHI7IH0sIGY6IGZ1bmN0aW9uIGYoKSB7IHRyeSB7IGEgfHwgbnVsbCA9PSB0LnJldHVybiB8fCB0LnJldHVybigpOyB9IGZpbmFsbHkgeyBpZiAodSkgdGhyb3cgbzsgfSB9IH07IH0KZnVuY3Rpb24gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KHIsIGEpIHsgaWYgKHIpIHsgaWYgKCJzdHJpbmciID09IHR5cGVvZiByKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkociwgYSk7IHZhciB0ID0ge30udG9TdHJpbmcuY2FsbChyKS5zbGljZSg4LCAtMSk7IHJldHVybiAiT2JqZWN0IiA9PT0gdCAmJiByLmNvbnN0cnVjdG9yICYmICh0ID0gci5jb25zdHJ1Y3Rvci5uYW1lKSwgIk1hcCIgPT09IHQgfHwgIlNldCIgPT09IHQgPyBBcnJheS5mcm9tKHIpIDogIkFyZ3VtZW50cyIgPT09IHQgfHwgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QodCkgPyBfYXJyYXlMaWtlVG9BcnJheShyLCBhKSA6IHZvaWQgMDsgfSB9CmZ1bmN0aW9uIF9hcnJheUxpa2VUb0FycmF5KHIsIGEpIHsgKG51bGwgPT0gYSB8fCBhID4gci5sZW5ndGgpICYmIChhID0gci5sZW5ndGgpOyBmb3IgKHZhciBlID0gMCwgbiA9IEFycmF5KGEpOyBlIDwgYTsgZSsrKSBuW2VdID0gcltlXTsgcmV0dXJuIG47IH0KZnVuY3Rpb24gb3duS2V5cyhlLCByKSB7IHZhciB0ID0gT2JqZWN0LmtleXMoZSk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBvID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKTsgciAmJiAobyA9IG8uZmlsdGVyKGZ1bmN0aW9uIChyKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsIHIpLmVudW1lcmFibGU7IH0pKSwgdC5wdXNoLmFwcGx5KHQsIG8pOyB9IHJldHVybiB0OyB9CmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQoZSkgeyBmb3IgKHZhciByID0gMTsgciA8IGFyZ3VtZW50cy5sZW5ndGg7IHIrKykgeyB2YXIgdCA9IG51bGwgIT0gYXJndW1lbnRzW3JdID8gYXJndW1lbnRzW3JdIDoge307IHIgJSAyID8gb3duS2V5cyhPYmplY3QodCksICEwKS5mb3JFYWNoKGZ1bmN0aW9uIChyKSB7IF9kZWZpbmVQcm9wZXJ0eShlLCByLCB0W3JdKTsgfSkgOiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGUsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHQpKSA6IG93bktleXMoT2JqZWN0KHQpKS5mb3JFYWNoKGZ1bmN0aW9uIChyKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCByLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsIHIpKTsgfSk7IH0gcmV0dXJuIGU7IH0KaW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiL2hvbWUvdWJ1bnR1L3N1c2Vjb25mL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9yZWdlbmVyYXRvci9pbmRleC5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmRlc2NyaXB0aW9uLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQtaW5kZXguanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5mcm9tLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNsaWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9ycy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5rZXlzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC52YWx1ZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zdGFydHMtd2l0aC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5saW5rLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgQ3JlYXRlRWRpdFZpZXcgZnJvbSAnQHNoZWxsL21peGlucy9jcmVhdGUtZWRpdC12aWV3JzsKaW1wb3J0IExvYWRpbmcgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvTG9hZGluZyc7CmltcG9ydCBDcnVSZXNvdXJjZSBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9DcnVSZXNvdXJjZSc7CmltcG9ydCBTZWxlY3RJY29uR3JpZCBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9TZWxlY3RJY29uR3JpZCc7CmltcG9ydCBFbWJlclBhZ2UgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvRW1iZXJQYWdlJzsKaW1wb3J0IHsgVG9nZ2xlU3dpdGNoIH0gZnJvbSAnQGNvbXBvbmVudHMvRm9ybS9Ub2dnbGVTd2l0Y2gnOwppbXBvcnQgeyBDSEFSVCwgRlJPTV9DTFVTVEVSLCBTVUJfVFlQRSwgUktFX1RZUEUsIF9FRElULCBfSU1QT1JULCBfQ09ORklHLCBfVklFVyB9IGZyb20gJ0BzaGVsbC9jb25maWcvcXVlcnktcGFyYW1zJzsKaW1wb3J0IHsgbWFwR2V0dGVycyB9IGZyb20gJ3Z1ZXgnOwppbXBvcnQgeyBzb3J0QnkgfSBmcm9tICdAc2hlbGwvdXRpbHMvc29ydCc7CmltcG9ydCB7IHNldCB9IGZyb20gJ0BzaGVsbC91dGlscy9vYmplY3QnOwppbXBvcnQgeyBQUk9WSVNJT05FUiwgX1JLRTEgYXMgX1JLRSwgX1JLRTIgYXMgX1JLRTMgfSBmcm9tICdAc2hlbGwvc3RvcmUvcHJlZnMnOwppbXBvcnQgeyBmaWx0ZXJBbmRBcnJhbmdlQ2hhcnRzIH0gZnJvbSAnQHNoZWxsL3N0b3JlL2NhdGFsb2cnOwppbXBvcnQgeyBDQVRBTE9HIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy9sYWJlbHMtYW5ub3RhdGlvbnMnOwppbXBvcnQgeyBDQVBJLCBNQU5BR0VNRU5ULCBERUZBVUxUX1dPUktTUEFDRSB9IGZyb20gJ0BzaGVsbC9jb25maWcvdHlwZXMnOwppbXBvcnQgeyBtYXBGZWF0dXJlLCBSS0UyIGFzIFJLRTJfRkVBVFVSRSwgUktFMV9VSSB9IGZyb20gJ0BzaGVsbC9zdG9yZS9mZWF0dXJlcyc7CmltcG9ydCB7IGFsbEhhc2ggfSBmcm9tICdAc2hlbGwvdXRpbHMvcHJvbWlzZSc7CmltcG9ydCB7IEJMQU5LX0NMVVNURVIgfSBmcm9tICdAc2hlbGwvc3RvcmUvc3RvcmUtdHlwZXMuanMnOwppbXBvcnQgeyBFTEVNRU5UQUxfUFJPRFVDVF9OQU1FLCBFTEVNRU5UQUxfQ0xVU1RFUl9QUk9WSURFUiB9IGZyb20gJy4uLy4uL2NvbmZpZy9lbGVtZW50YWwtdHlwZXMnOwppbXBvcnQgUmtlMkNvbmZpZyBmcm9tICcuL3JrZTInOwppbXBvcnQgSW1wb3J0IGZyb20gJy4vaW1wb3J0JzsKaW1wb3J0IHsgRFJJVkVSX1RPX0lNUE9SVCB9IGZyb20gJ0BzaGVsbC9tb2RlbHMvbWFuYWdlbWVudC5jYXR0bGUuaW8ua29udGFpbmVyZHJpdmVyJzsKdmFyIFNPUlRfR1JPVVBTID0gewogIHRlbXBsYXRlOiAxLAogIGtvbnRhaW5lcjogMiwKICBya2UxOiAzLAogIHJrZTI6IDMsCiAgcmVnaXN0ZXI6IDQsCiAgY3VzdG9tOiA1LAogIGN1c3RvbTE6IDUsCiAgY3VzdG9tMjogNQp9OwoKLy8gdVNlZCB0byBwcm94eSBzdHlsZXNoZWV0cyBmb3IgY3VzdG9tIGRyaXZlcnMgdGhhdCBwcm92aWRlIGN1c3RvbSBVSSAoUktFMSkKdmFyIFBST1hZX0VORFBPSU5UID0gJy9tZXRhL3Byb3h5JzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdDcnVDbHVzdGVyJywKICBjb21wb25lbnRzOiB7CiAgICBDcnVSZXNvdXJjZTogQ3J1UmVzb3VyY2UsCiAgICBFbWJlclBhZ2U6IEVtYmVyUGFnZSwKICAgIEltcG9ydDogSW1wb3J0LAogICAgTG9hZGluZzogTG9hZGluZywKICAgIFJrZTJDb25maWc6IFJrZTJDb25maWcsCiAgICBTZWxlY3RJY29uR3JpZDogU2VsZWN0SWNvbkdyaWQsCiAgICBUb2dnbGVTd2l0Y2g6IFRvZ2dsZVN3aXRjaAogIH0sCiAgbWl4aW5zOiBbQ3JlYXRlRWRpdFZpZXddLAogIHByb3BzOiB7CiAgICByZWFsTW9kZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICB9LAogICAgbW9kZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICB9LAogICAgdmFsdWU6IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICBkZWZhdWx0OiBudWxsCiAgICB9LAogICAgLyoqCiAgICAgKiBJbmhlcml0ZWQgZ2xvYmFsIGlkZW50aWZpZXIgcHJlZml4IGZvciB0ZXN0cwogICAgICogRGVmaW5lIGEgdGVybSBiYXNlZCBvbiB0aGUgcGFyZW50IGNvbXBvbmVudCB0byBhdm9pZCBjb25mbGljdHMgb24gbXVsdGlwbGUgY29tcG9uZW50cwogICAgICovCiAgICBjb21wb25lbnRUZXN0aWQ6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAnY2x1c3Rlci1tYW5hZ2VyLWNyZWF0ZScKICAgIH0KICB9LAogIGZldGNoOiBmdW5jdGlvbiBmZXRjaCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICB2YXIgaGFzaCwgcmVzLCBleHRlbnNpb25DbGFzc2VzOwogICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgaGFzaCA9IHsKICAgICAgICAgICAgICAvLyBUaGVzZSBhcmVuJ3QgZXhwbGljaXRseSB1c2VkLCBidXQgbmVlZCB0byBiZSBsaXN0ZW5pbmcgZm9yIGNoYW5nZSBldmVudHMKICAgICAgICAgICAgICBtZ210Q2x1c3RlcnM6IF90aGlzLiRzdG9yZS5kaXNwYXRjaCgnbWFuYWdlbWVudC9maW5kQWxsJywgewogICAgICAgICAgICAgICAgdHlwZTogTUFOQUdFTUVOVC5DTFVTVEVSCiAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgcHJvdkNsdXN0ZXJzOiBfdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ21hbmFnZW1lbnQvZmluZEFsbCcsIHsKICAgICAgICAgICAgICAgIHR5cGU6IENBUEkuUkFOQ0hFUl9DTFVTVEVSCiAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgY2F0YWxvZzogX3RoaXMuJHN0b3JlLmRpc3BhdGNoKCdjYXRhbG9nL2xvYWQnKQogICAgICAgICAgICB9OwogICAgICAgICAgICBpZiAoX3RoaXMuJHN0b3JlLmdldHRlcnNbIm1hbmFnZW1lbnQvY2FuTGlzdCJdKE1BTkFHRU1FTlQuTk9ERV9EUklWRVIpKSB7CiAgICAgICAgICAgICAgaGFzaC5ub2RlRHJpdmVycyA9IF90aGlzLiRzdG9yZS5kaXNwYXRjaCgnbWFuYWdlbWVudC9maW5kQWxsJywgewogICAgICAgICAgICAgICAgdHlwZTogTUFOQUdFTUVOVC5OT0RFX0RSSVZFUgogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChfdGhpcy4kc3RvcmUuZ2V0dGVyc1sibWFuYWdlbWVudC9jYW5MaXN0Il0oTUFOQUdFTUVOVC5LT05UQUlORVJfRFJJVkVSKSkgewogICAgICAgICAgICAgIGhhc2gua29udGFpbmVyRHJpdmVycyA9IF90aGlzLiRzdG9yZS5kaXNwYXRjaCgnbWFuYWdlbWVudC9maW5kQWxsJywgewogICAgICAgICAgICAgICAgdHlwZTogTUFOQUdFTUVOVC5LT05UQUlORVJfRFJJVkVSCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKF90aGlzLnZhbHVlLmlkICYmICFfdGhpcy52YWx1ZS5pc1JrZTIpIHsKICAgICAgICAgICAgICAvLyBUaGVzZSBhcmUgbmVlZGVkIHRvIHJlc29sdmUgcmVmZXJlbmNlcyBpbiB0aGUgbWdtdCBjbHVzdGVyIC0+IG5vZGUgcG9vbCAtPiBub2RlIHRlbXBsYXRlIHRvIGZpZ3VyZSBvdXQgd2hhdCBwcm92aWRlciB0aGUgY2x1c3RlciBpcyB1c2luZwogICAgICAgICAgICAgIC8vIHNvIHRoYXQgdGhlIGVkaXQgaWZyYW1lIGZvciBlbWJlciBwYWdlcyBjYW4gZ28gdG8gdGhlIHJpZ2h0IHBsYWNlLgogICAgICAgICAgICAgIGlmIChfdGhpcy4kc3RvcmUuZ2V0dGVyc1sibWFuYWdlbWVudC9jYW5MaXN0Il0oTUFOQUdFTUVOVC5OT0RFX1BPT0wpKSB7CiAgICAgICAgICAgICAgICBoYXNoLnJrZTFOb2RlUG9vbHMgPSBfdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ21hbmFnZW1lbnQvZmluZEFsbCcsIHsKICAgICAgICAgICAgICAgICAgdHlwZTogTUFOQUdFTUVOVC5OT0RFX1BPT0wKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAoX3RoaXMuJHN0b3JlLmdldHRlcnNbIm1hbmFnZW1lbnQvY2FuTGlzdCJdKE1BTkFHRU1FTlQuTk9ERV9URU1QTEFURSkpIHsKICAgICAgICAgICAgICAgIGhhc2gucmtlMU5vZGVUZW1wbGF0ZXMgPSBfdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ21hbmFnZW1lbnQvZmluZEFsbCcsIHsKICAgICAgICAgICAgICAgICAgdHlwZTogTUFOQUdFTUVOVC5OT0RFX1RFTVBMQVRFCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDY7CiAgICAgICAgICAgIHJldHVybiBhbGxIYXNoKGhhc2gpOwogICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICByZXMgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICBfdGhpcy5ub2RlRHJpdmVycyA9IHJlcy5ub2RlRHJpdmVycyB8fCBbXTsKICAgICAgICAgICAgX3RoaXMua29udGFpbmVyRHJpdmVycyA9IHJlcy5rb250YWluZXJEcml2ZXJzIHx8IFtdOwogICAgICAgICAgICBpZiAoIV90aGlzLnZhbHVlLnNwZWMpIHsKICAgICAgICAgICAgICBzZXQoX3RoaXMudmFsdWUsICdzcGVjJywge30pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICghX3RoaXMudmFsdWUuaWQpIHsKICAgICAgICAgICAgICBpZiAoIV90aGlzLnZhbHVlLm1ldGFkYXRhKSB7CiAgICAgICAgICAgICAgICBzZXQoX3RoaXMudmFsdWUsICdtZXRhZGF0YScsIHt9KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgc2V0KF90aGlzLnZhbHVlLm1ldGFkYXRhLCAnbmFtZXNwYWNlJywgREVGQVVMVF9XT1JLU1BBQ0UpOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBGb3IgdGhlIG5vZGUgZHJpdmVycywgbG9vayBmb3IgY3VzdG9tIFVJIHRoYXQgd2UgY2FuIHVzZSB0byBzaG93IGFuIGljb24gKGlmIG5vdCBidWlsdC1pbikKICAgICAgICAgICAgX3RoaXMubm9kZURyaXZlcnMuZm9yRWFjaChmdW5jdGlvbiAoZHJpdmVyKSB7CiAgICAgICAgICAgICAgdmFyIF9kcml2ZXIkc3BlYywgX2RyaXZlciRzcGVjMiwgX2RyaXZlciRzcGVjMzsKICAgICAgICAgICAgICBpZiAoISgoX2RyaXZlciRzcGVjID0gZHJpdmVyLnNwZWMpICE9PSBudWxsICYmIF9kcml2ZXIkc3BlYyAhPT0gdm9pZCAwICYmIF9kcml2ZXIkc3BlYy5idWlsdGluKSAmJiAoX2RyaXZlciRzcGVjMiA9IGRyaXZlci5zcGVjKSAhPT0gbnVsbCAmJiBfZHJpdmVyJHNwZWMyICE9PSB2b2lkIDAgJiYgX2RyaXZlciRzcGVjMi51aVVybCAmJiAoX2RyaXZlciRzcGVjMyA9IGRyaXZlci5zcGVjKSAhPT0gbnVsbCAmJiBfZHJpdmVyJHNwZWMzICE9PSB2b2lkIDAgJiYgX2RyaXZlciRzcGVjMy5hY3RpdmUpIHsKICAgICAgICAgICAgICAgIHZhciBfZHJpdmVyJHNwZWM0OwogICAgICAgICAgICAgICAgdmFyIG5hbWUgPSAoKF9kcml2ZXIkc3BlYzQgPSBkcml2ZXIuc3BlYykgPT09IG51bGwgfHwgX2RyaXZlciRzcGVjNCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2RyaXZlciRzcGVjNC5kaXNwbGF5TmFtZSkgfHwgZHJpdmVyLmlkOwogICAgICAgICAgICAgICAgdmFyIGNzc1VybCA9IGRyaXZlci5zcGVjLnVpVXJsLnJlcGxhY2UoL1wuanMkLywgJy5jc3MnKTsKICAgICAgICAgICAgICAgIGlmIChjc3NVcmwuc3RhcnRzV2l0aCgnaHR0cDovLycpIHx8IGNzc1VybC5zdGFydHNXaXRoKCdodHRwczovLycpKSB7CiAgICAgICAgICAgICAgICAgIGNzc1VybCA9ICIiLmNvbmNhdChQUk9YWV9FTkRQT0lOVCwgIi8iKS5jb25jYXQoY3NzVXJsKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIF90aGlzLmxvYWRTdHlsZXNoZWV0KGNzc1VybCwgImRyaXZlci11aS1jc3MtIi5jb25jYXQoZHJpdmVyLmlkKSk7CiAgICAgICAgICAgICAgICBfdGhpcy5pY29uQ2xhc3Nlc1tuYW1lXSA9ICJtYWNoaW5lLWRyaXZlciAiLmNvbmNhdChuYW1lKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgLy8gQ3VzdG9tIFByb3ZpZGVycyBmcm9tIGV4dGVuc2lvbnMgLSBpbml0aWFsaXplIGVhY2ggd2l0aCB0aGUgc3RvcmUgYW5kIHRoZSBpMThuIHNlcnZpY2UKICAgICAgICAgICAgLy8gV3JhcCBpbiB0cnkgLi4uIGNhdGNoLCB0byBwcmV2ZW50IGVycm9ycyBpbiBhbiBleHRlbnNpb24gYnJlYWtpbmcgdGhlIHBhZ2UKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICBleHRlbnNpb25DbGFzc2VzID0gX3RoaXMuJHBsdWdpbi5saXN0RHluYW1pYygncHJvdmlzaW9uZXInKS5tYXAoZnVuY3Rpb24gKG5hbWUpIHsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy4kcGx1Z2luLmdldER5bmFtaWMoJ3Byb3Zpc2lvbmVyJywgbmFtZSk7CiAgICAgICAgICAgICAgfSk7IC8vIFdlIGNhbid0IHBhc3MgaW4gdGhpcy4kc3RvcmUgYXMgdGhpcyBsZWFkcyB0byBhIGNpcmN1bGFyLXJlZmVyZW5jZSB0aGF0IGNhdXNlcyBWdWUgdG8gZnJlZXplLAogICAgICAgICAgICAgIC8vIHNvIHBhc3MgaW4gc3BlY2lmaWMgc2VydmljZXMgdGhhdCB0aGUgcHJvdmlzaW9uZXIgZXh0ZW5zaW9uIG1heSBuZWVkCiAgICAgICAgICAgICAgX3RoaXMuZXh0ZW5zaW9ucyA9IGV4dGVuc2lvbkNsYXNzZXMubWFwKGZ1bmN0aW9uIChjKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGMoewogICAgICAgICAgICAgICAgICBkaXNwYXRjaDogX3RoaXMuJHN0b3JlLmRpc3BhdGNoLAogICAgICAgICAgICAgICAgICBnZXR0ZXJzOiBfdGhpcy4kc3RvcmUuZ2V0dGVycywKICAgICAgICAgICAgICAgICAgYXhpb3M6IF90aGlzLiRzdG9yZS4kYXhpb3MsCiAgICAgICAgICAgICAgICAgICRwbHVnaW46IF90aGlzLiRzdG9yZS5hcHAuJHBsdWdpbiwKICAgICAgICAgICAgICAgICAgdDogZnVuY3Rpb24gdCgpIHsKICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHsKICAgICAgICAgICAgICAgICAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy50LmFwcGx5KF90aGlzLCBhcmdzKTsKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgaXNDcmVhdGU6IF90aGlzLmlzQ3JlYXRlLAogICAgICAgICAgICAgICAgICBpc0VkaXQ6IF90aGlzLmlzRWRpdCwKICAgICAgICAgICAgICAgICAgaXNWaWV3OiBfdGhpcy5pc1ZpZXcKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgbG9hZGluZyBwcm92aXNpb25lcihzKSBmcm9tIGV4dGVuc2lvbnMnLCBlKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1jb25zb2xlCiAgICAgICAgICAgIH0KICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSk7CiAgICB9KSkoKTsKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICB2YXIgc3ViVHlwZSA9IHRoaXMuJHJvdXRlLnF1ZXJ5W1NVQl9UWVBFXSB8fCBudWxsOwogICAgdmFyIHJrZVR5cGUgPSB0aGlzLiRyb3V0ZS5xdWVyeVtSS0VfVFlQRV0gfHwgbnVsbDsKICAgIHZhciBjaGFydCA9IHRoaXMuJHJvdXRlLnF1ZXJ5W0NIQVJUXSB8fCBudWxsOwogICAgdmFyIGlzSW1wb3J0ID0gdGhpcy5yZWFsTW9kZSA9PT0gX0lNUE9SVDsKICAgIHJldHVybiB7CiAgICAgIG5vZGVEcml2ZXJzOiBbXSwKICAgICAga29udGFpbmVyRHJpdmVyczogW10sCiAgICAgIGV4dGVuc2lvbnM6IFtdLAogICAgICBzdWJUeXBlOiBzdWJUeXBlLAogICAgICBya2VUeXBlOiBya2VUeXBlLAogICAgICBjaGFydDogY2hhcnQsCiAgICAgIGlzSW1wb3J0OiBpc0ltcG9ydCwKICAgICAgcHJvdmlkZXJDbHVzdGVyOiBudWxsLAogICAgICBpY29uQ2xhc3Nlczoge30KICAgIH07CiAgfSwKICBjb21wdXRlZDogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIG1hcEdldHRlcnMoewogICAgYWxsQ2hhcnRzOiAnY2F0YWxvZy9jaGFydHMnCiAgfSkpLCBtYXBHZXR0ZXJzKCd0eXBlLW1hcCcsIFsnYWN0aXZlUHJvZHVjdHMnXSkpLCB7fSwgewogICAgLy8gbmVlZGVkIHRvIHJlY3JlYXRlIGxvZ2ljIG9uIG1hcFByZWYgaW4gb3JkZXIgdG8gaW5jb3Jwb3JhdGUgdGhlIGxvZ2ljIGFyb3VuZCB0aGUgcmtlVHlwZSBxdWVyeSBwYXJhbQogICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3JhbmNoZXIvZGFzaGJvYXJkL2lzc3Vlcy82Mjk5CiAgICBwcmVmZXJyZWRQcm92aXNpb25lcjogewogICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgICBpZiAodGhpcy5ya2VUeXBlKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy5ya2VUeXBlOwogICAgICAgIH0KICAgICAgICByZXR1cm4gdGhpcy4kc3RvcmUuZ2V0dGVyc1sncHJlZnMvZ2V0J10oUFJPVklTSU9ORVIpOwogICAgICB9LAogICAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWx1ZSkgewogICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdwcmVmcy9zZXQnLCB7CiAgICAgICAgICBrZXk6IFBST1ZJU0lPTkVSLAogICAgICAgICAgdmFsdWU6IHZhbHVlCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBfUktFMTogZnVuY3Rpb24gX1JLRTEoKSB7CiAgICAgIHJldHVybiBfUktFOwogICAgfSwKICAgIF9SS0UyOiBmdW5jdGlvbiBfUktFMigpIHsKICAgICAgcmV0dXJuIF9SS0UzOwogICAgfSwKICAgIGVtYmVyTGluazogZnVuY3Rpb24gZW1iZXJMaW5rKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKICAgICAgaWYgKHRoaXMudmFsdWUpIHsKICAgICAgICB2YXIgX3RoaXMkdmFsdWUkbWdtdDsKICAgICAgICBpZiAodGhpcy52YWx1ZS5wcm92aXNpb25lcikgewogICAgICAgICAgdmFyIG1hdGNoaW5nU3VidHlwZSA9IHRoaXMuc3ViVHlwZXMuZmluZChmdW5jdGlvbiAoc3QpIHsKICAgICAgICAgICAgcmV0dXJuIHN0LmlkLnRvTG93ZXJDYXNlKCkgPT09IF90aGlzMi52YWx1ZS5wcm92aXNpb25lci50b0xvd2VyQ2FzZSgpIHx8IERSSVZFUl9UT19JTVBPUlRbc3QuaWQudG9Mb3dlckNhc2UoKV0gPT09IF90aGlzMi52YWx1ZS5wcm92aXNpb25lci50b0xvd2VyQ2FzZSgpOwogICAgICAgICAgfSk7CiAgICAgICAgICBpZiAobWF0Y2hpbmdTdWJ0eXBlKSB7CiAgICAgICAgICAgIHRoaXMuc2VsZWN0VHlwZShtYXRjaGluZ1N1YnR5cGUuaWQsIGZhbHNlKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgLy8gRm9yIGN1c3RvbSBSS0UyIGNsdXN0ZXJzLCBkb24ndCBsb2FkIGFuIEVtYmVyIHBhZ2UuCiAgICAgICAgLy8gSXQgc2hvdWxkIGJlIHRoZSBkYXNoYm9hcmQuCiAgICAgICAgaWYgKHRoaXMudmFsdWUuaXNSa2UyICYmICh0aGlzLnZhbHVlLmlzQ3VzdG9tICYmIHRoaXMubW9kZSA9PT0gX0VESVQgfHwgdGhpcy52YWx1ZS5pc0N1c3RvbSAmJiB0aGlzLmFzID09PSBfQ09ORklHICYmIHRoaXMubW9kZSA9PT0gX1ZJRVcgfHwgKHRoaXMuc3ViVHlwZSB8fCAnJykudG9Mb3dlckNhc2UoKSA9PT0gJ2N1c3RvbScpKSB7CiAgICAgICAgICAvLyBGb3IgYWRtaW5zLCB0aGlzLnZhbHVlLmlzQ3VzdG9tIGlzIHVzZWQgdG8gY2hlY2sgaWYgaXQgaXMgYSBjdXN0b20gY2x1c3Rlci4KICAgICAgICAgIC8vIEZvciBjbHVzdGVyIG93bmVycywgdGhpcy5zdWJ0eXBlIGlzIHVzZWQuCiAgICAgICAgICB0aGlzLnNlbGVjdFR5cGUoJ2N1c3RvbScsIGZhbHNlKTsKICAgICAgICAgIHJldHVybiAnJzsKICAgICAgICB9CiAgICAgICAgLy8gRm9yIFJLRTIvSzNzIGNsdXN0ZXJzIHByb3Zpc2lvbmVkIGluIFJhbmNoZXIgd2l0aCBub2RlIHBvb2xzLAogICAgICAgIC8vIGRvIG5vdCB1c2UgYW4gaUZyYW1lZCBFbWJlciBwYWdlLgogICAgICAgIGlmICh0aGlzLnZhbHVlLmlzUmtlMiAmJiB0aGlzLnZhbHVlLm1hY2hpbmVQcm92aWRlcikgewogICAgICAgICAgLy8gRWRpdCBleGlzdGluZyBSS0UyCiAgICAgICAgICB0aGlzLnNlbGVjdFR5cGUodGhpcy52YWx1ZS5tYWNoaW5lUHJvdmlkZXIsIGZhbHNlKTsKICAgICAgICAgIHJldHVybiAnJzsKICAgICAgICB9CiAgICAgICAgaWYgKHRoaXMuc3ViVHlwZSkgewogICAgICAgICAgdmFyIF90aGlzJHNlbGVjdGVkU3ViVHlwZTsKICAgICAgICAgIC8vIGlmIGRyaXZlciB0eXBlIGhhcyBhIGN1c3RvbSBmb3JtIGNvbXBvbmVudCwgZG9uJ3QgbG9hZCBhbiBlbWJlciBwYWdlCiAgICAgICAgICBpZiAodGhpcy5zZWxlY3RlZFN1YlR5cGUuY29tcG9uZW50KSB7CiAgICAgICAgICAgIHJldHVybiAnJzsKICAgICAgICAgIH0KICAgICAgICAgIC8vIEZvciBSS0UxIGFuZCBob3N0ZWQgS3ViZXJuZXRlcyBDbHVzdGVycywgc2V0IHRoZSBlbWJlciBsaW5rCiAgICAgICAgICAvLyBzbyB0aGF0IHdlIGxvYWQgdGhlIHBhZ2UgcmF0aGVyIHRoYW4gdXNpbmcgUktFMiBjcmVhdGUKICAgICAgICAgIGlmICgoX3RoaXMkc2VsZWN0ZWRTdWJUeXBlID0gdGhpcy5zZWxlY3RlZFN1YlR5cGUpICE9PSBudWxsICYmIF90aGlzJHNlbGVjdGVkU3ViVHlwZSAhPT0gdm9pZCAwICYmIF90aGlzJHNlbGVjdGVkU3ViVHlwZS5lbWJlckxpbmspIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0ZWRTdWJUeXBlLmVtYmVyTGluazsKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMuc2VsZWN0VHlwZSh0aGlzLnN1YlR5cGUsIGZhbHNlKTsKICAgICAgICAgIHJldHVybiAnJzsKICAgICAgICB9CiAgICAgICAgaWYgKChfdGhpcyR2YWx1ZSRtZ210ID0gdGhpcy52YWx1ZS5tZ210KSAhPT0gbnVsbCAmJiBfdGhpcyR2YWx1ZSRtZ210ICE9PSB2b2lkIDAgJiYgX3RoaXMkdmFsdWUkbWdtdC5lbWJlckVkaXRQYXRoKSB7CiAgICAgICAgICAvLyBJZnJhbWUgYW4gb2xkIHBhZ2UKICAgICAgICAgIHJldHVybiB0aGlzLnZhbHVlLm1nbXQuZW1iZXJFZGl0UGF0aDsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuICcnOwogICAgfSwKICAgIHJrZTJFbmFibGVkOiBtYXBGZWF0dXJlKFJLRTJfRkVBVFVSRSksCiAgICBya2UxVWlFbmFibGVkOiBtYXBGZWF0dXJlKFJLRTFfVUkpLAogICAgLy8gdG9kbyBuYiBpcyB0aGlzIGluZm8gc3RvcmVkIGFueXdoZXJlIGVsc2UuLj8KICAgIHNlbGVjdGVkU3ViVHlwZTogZnVuY3Rpb24gc2VsZWN0ZWRTdWJUeXBlKCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKICAgICAgcmV0dXJuIHRoaXMuc3ViVHlwZSA/IHRoaXMuc3ViVHlwZXMuZmluZChmdW5jdGlvbiAocykgewogICAgICAgIHJldHVybiBzLmlkID09PSBfdGhpczMuc3ViVHlwZTsKICAgICAgfSkgOiBudWxsOwogICAgfSwKICAgIHByb3Zpc2lvbmVyOiB7CiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICAgIC8vIFRoaXMgY2FuIGluY29ycmVjdGx5IHJldHVybiBya2UxIGluc3RlYWQKICAgICAgICAvLyBvZiBya2UyIGZvciBjbHVzdGVyIG93bmVycy4KICAgICAgICBpZiAoIXRoaXMucmtlMkVuYWJsZWQpIHsKICAgICAgICAgIHJldHVybiBfUktFOwogICAgICAgIH0KICAgICAgICBpZiAoIXRoaXMucmtlMVVpRW5hYmxlZCkgewogICAgICAgICAgcmV0dXJuIF9SS0UzOwogICAgICAgIH0KICAgICAgICByZXR1cm4gdGhpcy5wcmVmZXJyZWRQcm92aXNpb25lcjsKICAgICAgfSwKICAgICAgc2V0OiBmdW5jdGlvbiBzZXQobmV1KSB7CiAgICAgICAgdGhpcy5wcmVmZXJyZWRQcm92aXNpb25lciA9IG5ldTsKICAgICAgfQogICAgfSwKICAgIGlzUmtlMTogZnVuY3Rpb24gaXNSa2UxKCkgewogICAgICByZXR1cm4gdGhpcy5wcm92aXNpb25lciA9PT0gX1JLRTsKICAgIH0sCiAgICBpc1JrZTI6IGZ1bmN0aW9uIGlzUmtlMigpIHsKICAgICAgcmV0dXJuIHRoaXMudmFsdWUuaXNSa2UyIHx8ICF0aGlzLmlzUmtlMTsKICAgIH0sCiAgICB0ZW1wbGF0ZU9wdGlvbnM6IGZ1bmN0aW9uIHRlbXBsYXRlT3B0aW9ucygpIHsKICAgICAgaWYgKCF0aGlzLnJrZTJFbmFibGVkKSB7CiAgICAgICAgcmV0dXJuIFtdOwogICAgICB9CiAgICAgIHZhciBvdXQgPSBmaWx0ZXJBbmRBcnJhbmdlQ2hhcnRzKHRoaXMuYWxsQ2hhcnRzLCB7CiAgICAgICAgc2hvd1R5cGVzOiBDQVRBTE9HLl9DTFVTVEVSX1RQTAogICAgICB9KTsKICAgICAgcmV0dXJuIG91dDsKICAgIH0sCiAgICBzdWJUeXBlczogZnVuY3Rpb24gc3ViVHlwZXMoKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwogICAgICB2YXIgZ2V0dGVycyA9IHRoaXMuJHN0b3JlLmdldHRlcnM7CiAgICAgIHZhciBpc0ltcG9ydCA9IHRoaXMuaXNJbXBvcnQ7CiAgICAgIHZhciBpc0VsZW1lbnRhbEFjdGl2ZSA9ICEhdGhpcy5hY3RpdmVQcm9kdWN0cy5maW5kKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgcmV0dXJuIGl0ZW0ubmFtZSA9PT0gRUxFTUVOVEFMX1BST0RVQ1RfTkFNRTsKICAgICAgfSk7CiAgICAgIHZhciBvdXQgPSBbXTsKICAgICAgdmFyIHRlbXBsYXRlcyA9IHRoaXMudGVtcGxhdGVPcHRpb25zOwogICAgICB2YXIgdnVlS29udGFpbmVyVHlwZXMgPSBnZXR0ZXJzWydwbHVnaW5zL2NsdXN0ZXJEcml2ZXJzJ107CiAgICAgIHZhciBtYWNoaW5lVHlwZXMgPSB0aGlzLm5vZGVEcml2ZXJzLmZpbHRlcihmdW5jdGlvbiAoeCkgewogICAgICAgIHJldHVybiB4LnNwZWMuYWN0aXZlICYmIHguc3RhdGUgPT09ICdhY3RpdmUnOwogICAgICB9KTsKICAgICAgdGhpcy5rb250YWluZXJEcml2ZXJzLmZpbHRlcihmdW5jdGlvbiAoeCkgewogICAgICAgIHJldHVybiBpc0ltcG9ydCA/IHguc2hvd0ltcG9ydCA6IHguc2hvd0NyZWF0ZTsKICAgICAgfSkuZm9yRWFjaChmdW5jdGlvbiAob2JqKSB7CiAgICAgICAgaWYgKHZ1ZUtvbnRhaW5lclR5cGVzLmluY2x1ZGVzKG9iai5kcml2ZXJOYW1lKSkgewogICAgICAgICAgYWRkVHlwZShfdGhpczQuJHBsdWdpbiwgb2JqLmRyaXZlck5hbWUsICdrb250YWluZXInLCBmYWxzZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGFkZFR5cGUoX3RoaXM0LiRwbHVnaW4sIG9iai5kcml2ZXJOYW1lLCAna29udGFpbmVyJywgZmFsc2UsIGlzSW1wb3J0ID8gb2JqLmVtYmVySW1wb3J0UGF0aCA6IG9iai5lbWJlckNyZWF0ZVBhdGgpOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIGlmIChpc0ltcG9ydCkgewogICAgICAgIGFkZFR5cGUodGhpcy4kcGx1Z2luLCAnaW1wb3J0JywgJ2N1c3RvbScsIGZhbHNlKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0ZW1wbGF0ZXMuZm9yRWFjaChmdW5jdGlvbiAoY2hhcnQpIHsKICAgICAgICAgIG91dC5wdXNoKHsKICAgICAgICAgICAgaWQ6ICJjaGFydDoiLmNvbmNhdChjaGFydC5pZCksCiAgICAgICAgICAgIGxhYmVsOiBjaGFydC5jaGFydE5hbWVEaXNwbGF5LAogICAgICAgICAgICBkZXNjcmlwdGlvbjogY2hhcnQuY2hhcnREZXNjcmlwdGlvbiwKICAgICAgICAgICAgaWNvbjogY2hhcnQuaWNvbiB8fCByZXF1aXJlKCd+c2hlbGwvYXNzZXRzL2ltYWdlcy9nZW5lcmljLWNhdGFsb2cuc3ZnJyksCiAgICAgICAgICAgIGdyb3VwOiAndGVtcGxhdGUnLAogICAgICAgICAgICB0YWc6IGdldHRlcnNbJ2kxOG4vdCddKCdnZW5lcmljLnRlY2hQcmV2aWV3JykKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICAgIGlmICh0aGlzLmlzUmtlMSkgewogICAgICAgICAgbWFjaGluZVR5cGVzLmZvckVhY2goZnVuY3Rpb24gKHR5cGUpIHsKICAgICAgICAgICAgdmFyIGlkID0gdHlwZS5zcGVjLmRpc3BsYXlOYW1lIHx8IHR5cGUuaWQ7CiAgICAgICAgICAgIGFkZFR5cGUoX3RoaXM0LiRwbHVnaW4sIGlkLCBfUktFLCBmYWxzZSwgIi9nL2NsdXN0ZXJzL2FkZC9sYXVuY2gvIi5jb25jYXQoaWQpLCBfdGhpczQuaWNvbkNsYXNzZXNbaWRdLCB0eXBlKTsKICAgICAgICAgIH0pOwogICAgICAgICAgYWRkVHlwZSh0aGlzLiRwbHVnaW4sICdjdXN0b20nLCAnY3VzdG9tMScsIGZhbHNlLCAnL2cvY2x1c3RlcnMvYWRkL2xhdW5jaC9jdXN0b20nKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgbWFjaGluZVR5cGVzLmZvckVhY2goZnVuY3Rpb24gKHR5cGUpIHsKICAgICAgICAgICAgdmFyIGlkID0gdHlwZS5zcGVjLmRpc3BsYXlOYW1lIHx8IHR5cGUuaWQ7CiAgICAgICAgICAgIGFkZFR5cGUoX3RoaXM0LiRwbHVnaW4sIGlkLCBfUktFMywgZmFsc2UsIG51bGwsIHVuZGVmaW5lZCwgdHlwZSk7CiAgICAgICAgICB9KTsKICAgICAgICAgIGFkZFR5cGUodGhpcy4kcGx1Z2luLCAnY3VzdG9tJywgJ2N1c3RvbTInLCBmYWxzZSk7CiAgICAgICAgICBpZiAoaXNFbGVtZW50YWxBY3RpdmUpIHsKICAgICAgICAgICAgYWRkVHlwZSh0aGlzLiRwbHVnaW4sIEVMRU1FTlRBTF9DTFVTVEVSX1BST1ZJREVSLCAnY3VzdG9tMicsIGZhbHNlKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC8vIEFkZCBmcm9tIGV4dGVuc2lvbnMKICAgICAgICB0aGlzLmV4dGVuc2lvbnMuZm9yRWFjaChmdW5jdGlvbiAoZXh0KSB7CiAgICAgICAgICAvLyBpZiB0aGUgcmtlIHRvZ2dsZSBpcyBzZXQgdG8gcmtlMSwgZG9uJ3QgYWRkIGV4dGVuc2lvbnMgdGhhdCBzcGVjaWZ5IHJrZTIgZ3JvdXAKICAgICAgICAgIC8vIGRlZmF1bHQgZ3JvdXAgaXMgcmtlMgogICAgICAgICAgaWYgKCFfdGhpczQuaXNSa2UyICYmIChleHQuZ3JvdXAgPT09IF9SS0UzIHx8ICFleHQuZ3JvdXApKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICAgIC8vIERvIG5vdCBzaG93IHRoZSBleHRlbnNpb24gcHJvdmlzaW9uZXIgb24gdGhlIGltcG9ydCBjbHVzdGVyIHBhZ2UgdW5sZXNzIGl0cyBleHBsaWNpdGx5IHNldCB0byBkbyBzbwogICAgICAgICAgaWYgKGlzSW1wb3J0ICYmICFleHQuc2hvd0ltcG9ydCkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgICAvLyBBbGxvdyBleHRlbnNpb25zIHRvIG92ZXJ3cml0ZSBwcm92aXNpb25lcnMgd2l0aCB0aGUgc2FtZSBpZAogICAgICAgICAgb3V0ID0gb3V0LmZpbHRlcihmdW5jdGlvbiAodHlwZSkgewogICAgICAgICAgICByZXR1cm4gdHlwZS5pZCAhPT0gZXh0LmlkOwogICAgICAgICAgfSk7CiAgICAgICAgICBhZGRFeHRlbnNpb25UeXBlKGV4dCwgZ2V0dGVycyk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgcmV0dXJuIG91dDsKICAgICAgZnVuY3Rpb24gYWRkRXh0ZW5zaW9uVHlwZShleHQsIGdldHRlcnMpIHsKICAgICAgICB2YXIgaWNvbkNsYXNzID0gZXh0Lmljb25DbGFzczsKICAgICAgICB2YXIgaWNvbiA9IGV4dC5pY29uOwogICAgICAgIGlmIChpY29uKSB7CiAgICAgICAgICBpY29uQ2xhc3MgPSB1bmRlZmluZWQ7CiAgICAgICAgfSBlbHNlIGlmICghaWNvbkNsYXNzKSB7CiAgICAgICAgICBpY29uID0gcmVxdWlyZSgnfnNoZWxsL2Fzc2V0cy9pbWFnZXMvZ2VuZXJpYy1kcml2ZXIuc3ZnJyk7CiAgICAgICAgfQogICAgICAgIHZhciBzdWJ0eXBlID0gewogICAgICAgICAgaWQ6IGV4dC5pZCwKICAgICAgICAgIGxhYmVsOiBleHQubGFiZWwgfHwgZ2V0dGVyc1snaTE4bi90J10oImNsdXN0ZXIucHJvdmlkZXIuIi5jb25jYXQoZXh0LmlkKSksCiAgICAgICAgICBkZXNjcmlwdGlvbjogZXh0LmRlc2NyaXB0aW9uLAogICAgICAgICAgaWNvbjogaWNvbiwKICAgICAgICAgIGljb25DbGFzczogaWNvbkNsYXNzLAogICAgICAgICAgZ3JvdXA6IGV4dC5ncm91cCB8fCBfUktFMywKICAgICAgICAgIGRpc2FibGVkOiBleHQuZGlzYWJsZWQgfHwgZmFsc2UsCiAgICAgICAgICBsaW5rOiBleHQubGluaywKICAgICAgICAgIHRhZzogZXh0LnRhZywKICAgICAgICAgIGNvbXBvbmVudDogZXh0LmNvbXBvbmVudAogICAgICAgIH07CiAgICAgICAgb3V0LnB1c2goc3VidHlwZSk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gYWRkVHlwZShwbHVnaW4sIGlkLCBncm91cCkgewogICAgICAgIHZhciBkaXNhYmxlZCA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDogZmFsc2U7CiAgICAgICAgdmFyIGVtYmVyTGluayA9IGFyZ3VtZW50cy5sZW5ndGggPiA0ICYmIGFyZ3VtZW50c1s0XSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzRdIDogbnVsbDsKICAgICAgICB2YXIgaWNvbkNsYXNzID0gYXJndW1lbnRzLmxlbmd0aCA+IDUgJiYgYXJndW1lbnRzWzVdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbNV0gOiB1bmRlZmluZWQ7CiAgICAgICAgdmFyIHByb3ZpZGVyQ29uZmlnID0gYXJndW1lbnRzLmxlbmd0aCA+IDYgJiYgYXJndW1lbnRzWzZdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbNl0gOiB1bmRlZmluZWQ7CiAgICAgICAgdmFyIGxhYmVsID0gZ2V0dGVyc1snaTE4bi93aXRoRmFsbGJhY2snXSgiY2x1c3Rlci5wcm92aWRlci5cIiIuY29uY2F0KGlkLCAiXCIiKSwgbnVsbCwgaWQpOwogICAgICAgIHZhciBkZXNjcmlwdGlvbiA9IGdldHRlcnNbJ2kxOG4vd2l0aEZhbGxiYWNrJ10oImNsdXN0ZXIucHJvdmlkZXJEZXNjcmlwdGlvbi5cIiIuY29uY2F0KGlkLCAiXCIiKSwgbnVsbCwgJycpOwogICAgICAgIHZhciB0YWcgPSAnJzsKCiAgICAgICAgLy8gTG9vayBhdCBleHRlbnNpb25zIGZpcnN0CiAgICAgICAgLy8gQW4gZXh0ZW5zaW9uIGNhbiBvdmVycmlkZSB0aGUgaWNvbiBmb3IgYSBwcm92aWRlciB3aXRoCiAgICAgICAgLy8gcGx1Z2luLnJlZ2lzdGVyKCdpbWFnZScsICdwcm92aWRlcnMvb3BlbnN0YWNrLnN2ZycsIHJlcXVpcmUoJ35zaGVsbC9hc3NldHMvaW1hZ2VzL3Byb3ZpZGVycy9leG9zY2FsZS5zdmcnKSk7CiAgICAgICAgdmFyIGljb24gPSBwbHVnaW4uZ2V0RHluYW1pYygnaW1hZ2UnLCAicHJvdmlkZXJzLyIuY29uY2F0KGlkLCAiLnN2ZyIpKTsKICAgICAgICBpZiAoIWljb24pIHsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIGljb24gPSByZXF1aXJlKCJ+c2hlbGwvYXNzZXRzL2ltYWdlcy9wcm92aWRlcnMvIi5jb25jYXQoaWQsICIuc3ZnIikpOwogICAgICAgICAgfSBjYXRjaCAoZSkge30KICAgICAgICB9CiAgICAgICAgaWYgKGljb24pIHsKICAgICAgICAgIGljb25DbGFzcyA9IHVuZGVmaW5lZDsKICAgICAgICB9IGVsc2UgaWYgKCFpY29uQ2xhc3MpIHsKICAgICAgICAgIGljb24gPSByZXF1aXJlKCd+c2hlbGwvYXNzZXRzL2ltYWdlcy9nZW5lcmljLWRyaXZlci5zdmcnKTsKICAgICAgICB9CiAgICAgICAgdmFyIHN1YnR5cGUgPSB7CiAgICAgICAgICBpZDogaWQsCiAgICAgICAgICBsYWJlbDogbGFiZWwsCiAgICAgICAgICBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24sCiAgICAgICAgICBpY29uOiBpY29uLAogICAgICAgICAgaWNvbkNsYXNzOiBpY29uQ2xhc3MsCiAgICAgICAgICBncm91cDogZ3JvdXAsCiAgICAgICAgICBkaXNhYmxlZDogZGlzYWJsZWQsCiAgICAgICAgICBlbWJlckxpbms6IGVtYmVyTGluaywKICAgICAgICAgIHRhZzogdGFnLAogICAgICAgICAgcHJvdmlkZXJDb25maWc6IHByb3ZpZGVyQ29uZmlnCiAgICAgICAgfTsKICAgICAgICBvdXQucHVzaChzdWJ0eXBlKTsKICAgICAgfQogICAgfSwKICAgIGdyb3VwZWRTdWJUeXBlczogZnVuY3Rpb24gZ3JvdXBlZFN1YlR5cGVzKCkgewogICAgICB2YXIgb3V0ID0ge307CiAgICAgIHZhciBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcih0aGlzLnN1YlR5cGVzKSwKICAgICAgICBfc3RlcDsKICAgICAgdHJ5IHsKICAgICAgICBmb3IgKF9pdGVyYXRvci5zKCk7ICEoX3N0ZXAgPSBfaXRlcmF0b3IubigpKS5kb25lOykgewogICAgICAgICAgdmFyIHJvdyA9IF9zdGVwLnZhbHVlOwogICAgICAgICAgdmFyIG5hbWUgPSByb3cuZ3JvdXA7CiAgICAgICAgICB2YXIgZW50cnkgPSBvdXRbbmFtZV07CiAgICAgICAgICBpZiAoIWVudHJ5KSB7CiAgICAgICAgICAgIGVudHJ5ID0gewogICAgICAgICAgICAgIG5hbWU6IG5hbWUsCiAgICAgICAgICAgICAgbGFiZWw6IHRoaXMuJHN0b3JlLmdldHRlcnNbJ2kxOG4vd2l0aEZhbGxiYWNrJ10oImNsdXN0ZXIucHJvdmlkZXJHcm91cC5cIiIuY29uY2F0KHRoaXMuaXNJbXBvcnQgPyAncmVnaXN0ZXItJyA6ICdjcmVhdGUtJykuY29uY2F0KG5hbWUsICJcIiIpLCBudWxsLCBuYW1lKSwKICAgICAgICAgICAgICB0eXBlczogW10sCiAgICAgICAgICAgICAgc29ydDogU09SVF9HUk9VUFNbbmFtZV0KICAgICAgICAgICAgfTsKICAgICAgICAgICAgb3V0W25hbWVdID0gZW50cnk7CiAgICAgICAgICB9CiAgICAgICAgICBlbnRyeS50eXBlcy5wdXNoKHJvdyk7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBfaXRlcmF0b3IuZShlcnIpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIF9pdGVyYXRvci5mKCk7CiAgICAgIH0KICAgICAgZm9yICh2YXIgayBpbiBvdXQpIHsKICAgICAgICBvdXRba10udHlwZXMgPSBzb3J0Qnkob3V0W2tdLnR5cGVzLCAnbGFiZWwnKTsKICAgICAgfQogICAgICByZXR1cm4gc29ydEJ5KE9iamVjdC52YWx1ZXMob3V0KSwgJ3NvcnQnKTsKICAgIH0sCiAgICBmaXJzdE5vZGVEcml2ZXJJdGVtOiBmdW5jdGlvbiBmaXJzdE5vZGVEcml2ZXJJdGVtKCkgewogICAgICByZXR1cm4gdGhpcy5ncm91cGVkU3ViVHlwZXMuZmluZEluZGV4KGZ1bmN0aW9uIChvYmopIHsKICAgICAgICByZXR1cm4gW19SS0UsIF9SS0UzXS5pbmNsdWRlcyhvYmoubmFtZSk7CiAgICAgIH0pOwogICAgfSwKICAgIGZpcnN0Q3VzdG9tQ2x1c3Rlckl0ZW06IGZ1bmN0aW9uIGZpcnN0Q3VzdG9tQ2x1c3Rlckl0ZW0oKSB7CiAgICAgIHJldHVybiB0aGlzLmdyb3VwZWRTdWJUeXBlcy5maW5kSW5kZXgoZnVuY3Rpb24gKG9iaikgewogICAgICAgIHJldHVybiBbJ2N1c3RvbScsICdjdXN0b20xJywgJ2N1c3RvbTInXS5pbmNsdWRlcyhvYmoubmFtZSk7CiAgICAgIH0pOwogICAgfQogIH0pLAogIG1ldGhvZHM6IHsKICAgIHNob3dSa2VUb2dnbGU6IGZ1bmN0aW9uIHNob3dSa2VUb2dnbGUoaSkgewogICAgICBpZiAodGhpcy5pc0ltcG9ydCB8fCAhdGhpcy5ya2UyRW5hYmxlZCkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICBpZiAodGhpcy5maXJzdE5vZGVEcml2ZXJJdGVtID49IDApIHsKICAgICAgICByZXR1cm4gaSA9PT0gdGhpcy5maXJzdE5vZGVEcml2ZXJJdGVtOwogICAgICB9CiAgICAgIHJldHVybiBpID09PSB0aGlzLmZpcnN0Q3VzdG9tQ2x1c3Rlckl0ZW07CiAgICB9LAogICAgbG9hZFN0eWxlc2hlZXQ6IGZ1bmN0aW9uIGxvYWRTdHlsZXNoZWV0KHVybCwgaWQpIHsKICAgICAgaWYgKCFpZCkgewogICAgICAgIGNvbnNvbGUuZXJyb3IoJ2xvYWRTdHlsZXNoZWV0IGNhbGxlZCB3aXRob3V0IGFuIGlkJyk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc29sZQoKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIC8vIENoZWNrIGlmIHRoZSBzdHlsZXNoZWV0IGhhcyBhbHJlYWR5IGJlZW4gbG9hZGVkCiAgICAgIGlmICgkKCIjIi5jb25jYXQoaWQpKS5sZW5ndGggPiAwKSB7CiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbGluZQogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB2YXIgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpbmsnKTsKICAgICAgbGluay5vbmVycm9yID0gZnVuY3Rpb24gKCkgewogICAgICAgIGxpbmsucmVtb3ZlKCk7CiAgICAgIH07CiAgICAgIGxpbmsucmVsID0gJ3N0eWxlc2hlZXQnOwogICAgICBsaW5rLnNyYyA9IHVybDsKICAgICAgbGluay5ocmVmID0gdXJsOwogICAgICBsaW5rLmlkID0gaWQ7CiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdIRUFEJylbMF0uYXBwZW5kQ2hpbGQobGluayk7CiAgICB9LAogICAgY2FuY2VsOiBmdW5jdGlvbiBjYW5jZWwoKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICBuYW1lOiAnYy1jbHVzdGVyLXByb2R1Y3QtcmVzb3VyY2UnLAogICAgICAgIHBhcmFtczogewogICAgICAgICAgY2x1c3RlcjogdGhpcy4kcm91dGUucGFyYW1zLmNsdXN0ZXIsCiAgICAgICAgICBwcm9kdWN0OiB0aGlzLiRzdG9yZS5nZXR0ZXJzWydwcm9kdWN0SWQnXSwKICAgICAgICAgIHJlc291cmNlOiBDQVBJLlJBTkNIRVJfQ0xVU1RFUgogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgY29sb3JGb3I6IGZ1bmN0aW9uIGNvbG9yRm9yKG9iaikgewogICAgICByZXR1cm4gImNvbG9yIi5jb25jYXQoU09SVF9HUk9VUFNbb2JqLmdyb3VwXSB8fCAxKTsKICAgIH0sCiAgICBjbGlja2VkVHlwZTogZnVuY3Rpb24gY2xpY2tlZFR5cGUob2JqKSB7CiAgICAgIHZhciBpZCA9IG9iai5pZDsKICAgICAgdmFyIHBhcnRzID0gaWQuc3BsaXQoJzonLCAyKTsKICAgICAgaWYgKHBhcnRzWzBdID09PSAnY2hhcnQnKSB7CiAgICAgICAgdmFyIF9sb2NhbENsdXN0ZXI7CiAgICAgICAgdmFyIGNoYXJ0ID0gdGhpcy4kc3RvcmUuZ2V0dGVyc1snY2F0YWxvZy9jaGFydCddKHsKICAgICAgICAgIGtleTogcGFydHNbMV0KICAgICAgICB9KTsKICAgICAgICB2YXIgbG9jYWxDbHVzdGVyOwogICAgICAgIGlmICh0aGlzLiRzdG9yZS5nZXR0ZXJzWyJtYW5hZ2VtZW50L2Nhbkxpc3QiXShNQU5BR0VNRU5ULkNMVVNURVIpKSB7CiAgICAgICAgICBsb2NhbENsdXN0ZXIgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzWydtYW5hZ2VtZW50L2FsbCddKE1BTkFHRU1FTlQuQ0xVU1RFUikuZmluZChmdW5jdGlvbiAoeCkgewogICAgICAgICAgICByZXR1cm4geC5pc0xvY2FsOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIGNoYXJ0LmdvVG9JbnN0YWxsKEZST01fQ0xVU1RFUiwgKChfbG9jYWxDbHVzdGVyID0gbG9jYWxDbHVzdGVyKSA9PT0gbnVsbCB8fCBfbG9jYWxDbHVzdGVyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfbG9jYWxDbHVzdGVyLmlkKSB8fCBCTEFOS19DTFVTVEVSLCB0cnVlKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgaWYgKG9iai5saW5rKSB7CiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2gob2JqLmxpbmspOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB0aGlzLiRyb3V0ZXIuYXBwbHlRdWVyeShfZGVmaW5lUHJvcGVydHkoX2RlZmluZVByb3BlcnR5KHt9LCBTVUJfVFlQRSwgaWQpLCBSS0VfVFlQRSwgdGhpcy5wcmVmZXJyZWRQcm92aXNpb25lcikpOwogICAgICB0aGlzLnNlbGVjdFR5cGUoaWQpOwogICAgfSwKICAgIHNlbGVjdFR5cGU6IGZ1bmN0aW9uIHNlbGVjdFR5cGUodHlwZSkgewogICAgICB2YXIgZmV0Y2ggPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHRydWU7CiAgICAgIHZhciBwYXJ0cyA9IHR5cGUuc3BsaXQoJzonLCAyKTsKICAgICAgaWYgKHBhcnRzWzBdID09PSAnY2hhcnQnKSB7CiAgICAgICAgdGhpcy5zdWJUeXBlID0gJ2NoYXJ0JzsKICAgICAgICB0aGlzLiRlbWl0KCdzZXQtc3VidHlwZScsIHRoaXMuJHN0b3JlLmdldHRlcnNbJ2kxOG4vd2l0aEZhbGxiYWNrJ10oImNsdXN0ZXIucHJvdmlkZXIuY2hhcnQiKSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5zdWJUeXBlID0gdHlwZTsKICAgICAgICB0aGlzLiRlbWl0KCdzZXQtc3VidHlwZScsIHRoaXMuJHN0b3JlLmdldHRlcnNbJ2kxOG4vd2l0aEZhbGxiYWNrJ10oImNsdXN0ZXIucHJvdmlkZXIuXCIiLmNvbmNhdCh0eXBlLCAiXCIiKSwgbnVsbCwgdHlwZSkpOwogICAgICB9CiAgICAgIGlmIChmZXRjaCkgewogICAgICAgIHRoaXMuJGZldGNoKCk7CiAgICAgIH0KICAgIH0KICB9Cn07"},{"version":3,"names":["CreateEditView","Loading","CruResource","SelectIconGrid","EmberPage","ToggleSwitch","CHART","FROM_CLUSTER","SUB_TYPE","RKE_TYPE","_EDIT","_IMPORT","_CONFIG","_VIEW","mapGetters","sortBy","set","PROVISIONER","_RKE1","_RKE2","filterAndArrangeCharts","CATALOG","CAPI","MANAGEMENT","DEFAULT_WORKSPACE","mapFeature","RKE2","RKE2_FEATURE","RKE1_UI","allHash","BLANK_CLUSTER","ELEMENTAL_PRODUCT_NAME","ELEMENTAL_CLUSTER_PROVIDER","Rke2Config","Import","DRIVER_TO_IMPORT","SORT_GROUPS","template","kontainer","rke1","rke2","register","custom","custom1","custom2","PROXY_ENDPOINT","name","components","mixins","props","realMode","type","String","required","mode","value","Object","default","componentTestid","fetch","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","hash","res","extensionClasses","wrap","_callee$","_context","prev","next","mgmtClusters","$store","dispatch","CLUSTER","provClusters","RANCHER_CLUSTER","catalog","getters","NODE_DRIVER","nodeDrivers","KONTAINER_DRIVER","kontainerDrivers","id","isRke2","NODE_POOL","rke1NodePools","NODE_TEMPLATE","rke1NodeTemplates","sent","spec","metadata","forEach","driver","_driver$spec","_driver$spec2","_driver$spec3","builtin","uiUrl","active","_driver$spec4","displayName","cssUrl","replace","startsWith","concat","loadStylesheet","iconClasses","$plugin","listDynamic","map","getDynamic","extensions","c","axios","$axios","app","t","_len","arguments","length","args","Array","_key","apply","isCreate","isEdit","isView","e","console","error","stop","data","subType","$route","query","rkeType","chart","isImport","providerCluster","computed","_objectSpread","allCharts","preferredProvisioner","get","key","emberLink","_this2","_this$value$mgmt","provisioner","matchingSubtype","subTypes","find","st","toLowerCase","selectType","isCustom","as","machineProvider","_this$selectedSubType","selectedSubType","component","mgmt","emberEditPath","rke2Enabled","rke1UiEnabled","_this3","s","neu","isRke1","templateOptions","out","showTypes","_CLUSTER_TPL","_this4","isElementalActive","activeProducts","item","templates","vueKontainerTypes","machineTypes","filter","x","state","showImport","showCreate","obj","includes","driverName","addType","emberImportPath","emberCreatePath","push","label","chartNameDisplay","description","chartDescription","icon","require","group","tag","undefined","ext","addExtensionType","iconClass","subtype","disabled","link","plugin","providerConfig","groupedSubTypes","_iterator","_createForOfIteratorHelper","_step","n","done","row","entry","types","sort","err","f","k","values","firstNodeDriverItem","findIndex","firstCustomClusterItem","methods","showRkeToggle","i","url","$","document","createElement","onerror","remove","rel","src","href","getElementsByTagName","appendChild","cancel","$router","params","cluster","product","resource","colorFor","clickedType","parts","split","_localCluster","localCluster","isLocal","goToInstall","applyQuery","_defineProperty","$emit","$fetch"],"sources":["node_modules/@rancher/shell/edit/provisioning.cattle.io.cluster/index.vue"],"sourcesContent":["<script>\nimport CreateEditView from '@shell/mixins/create-edit-view';\nimport Loading from '@shell/components/Loading';\nimport CruResource from '@shell/components/CruResource';\nimport SelectIconGrid from '@shell/components/SelectIconGrid';\nimport EmberPage from '@shell/components/EmberPage';\nimport { ToggleSwitch } from '@components/Form/ToggleSwitch';\nimport {\n  CHART, FROM_CLUSTER, SUB_TYPE, RKE_TYPE, _EDIT, _IMPORT, _CONFIG, _VIEW\n} from '@shell/config/query-params';\nimport { mapGetters } from 'vuex';\nimport { sortBy } from '@shell/utils/sort';\nimport { set } from '@shell/utils/object';\nimport { PROVISIONER, _RKE1, _RKE2 } from '@shell/store/prefs';\nimport { filterAndArrangeCharts } from '@shell/store/catalog';\nimport { CATALOG } from '@shell/config/labels-annotations';\nimport { CAPI, MANAGEMENT, DEFAULT_WORKSPACE } from '@shell/config/types';\nimport { mapFeature, RKE2 as RKE2_FEATURE, RKE1_UI } from '@shell/store/features';\nimport { allHash } from '@shell/utils/promise';\nimport { BLANK_CLUSTER } from '@shell/store/store-types.js';\nimport { ELEMENTAL_PRODUCT_NAME, ELEMENTAL_CLUSTER_PROVIDER } from '../../config/elemental-types';\nimport Rke2Config from './rke2';\nimport Import from './import';\nimport { DRIVER_TO_IMPORT } from '@shell/models/management.cattle.io.kontainerdriver';\n\nconst SORT_GROUPS = {\n  template:  1,\n  kontainer: 2,\n  rke1:      3,\n  rke2:      3,\n  register:  4,\n  custom:    5,\n  custom1:   5,\n  custom2:   5,\n};\n\n// uSed to proxy stylesheets for custom drivers that provide custom UI (RKE1)\nconst PROXY_ENDPOINT = '/meta/proxy';\n\nexport default {\n  name: 'CruCluster',\n\n  components: {\n    CruResource,\n    EmberPage,\n    Import,\n    Loading,\n    Rke2Config,\n    SelectIconGrid,\n    ToggleSwitch\n  },\n\n  mixins: [CreateEditView],\n\n  props: {\n    realMode: {\n      type:     String,\n      required: true,\n    },\n\n    mode: {\n      type:     String,\n      required: true,\n    },\n\n    value: {\n      type:    Object,\n      default: null,\n    },\n\n    /**\n     * Inherited global identifier prefix for tests\n     * Define a term based on the parent component to avoid conflicts on multiple components\n     */\n    componentTestid: {\n      type:    String,\n      default: 'cluster-manager-create'\n    }\n  },\n\n  async fetch() {\n    const hash = {\n      // These aren't explicitly used, but need to be listening for change events\n      mgmtClusters: this.$store.dispatch('management/findAll', { type: MANAGEMENT.CLUSTER }),\n      provClusters: this.$store.dispatch('management/findAll', { type: CAPI.RANCHER_CLUSTER }),\n\n      catalog: this.$store.dispatch('catalog/load'),\n    };\n\n    if (this.$store.getters[`management/canList`](MANAGEMENT.NODE_DRIVER)) {\n      hash.nodeDrivers = this.$store.dispatch('management/findAll', { type: MANAGEMENT.NODE_DRIVER });\n    }\n\n    if (this.$store.getters[`management/canList`](MANAGEMENT.KONTAINER_DRIVER)) {\n      hash.kontainerDrivers = this.$store.dispatch('management/findAll', { type: MANAGEMENT.KONTAINER_DRIVER });\n    }\n\n    if ( this.value.id && !this.value.isRke2 ) {\n      // These are needed to resolve references in the mgmt cluster -> node pool -> node template to figure out what provider the cluster is using\n      // so that the edit iframe for ember pages can go to the right place.\n      if (this.$store.getters[`management/canList`](MANAGEMENT.NODE_POOL)) {\n        hash.rke1NodePools = this.$store.dispatch('management/findAll', { type: MANAGEMENT.NODE_POOL });\n      }\n\n      if (this.$store.getters[`management/canList`](MANAGEMENT.NODE_TEMPLATE)) {\n        hash.rke1NodeTemplates = this.$store.dispatch('management/findAll', { type: MANAGEMENT.NODE_TEMPLATE });\n      }\n    }\n\n    const res = await allHash(hash);\n\n    this.nodeDrivers = res.nodeDrivers || [];\n    this.kontainerDrivers = res.kontainerDrivers || [];\n\n    if ( !this.value.spec ) {\n      set(this.value, 'spec', {});\n    }\n\n    if ( !this.value.id ) {\n      if ( !this.value.metadata ) {\n        set(this.value, 'metadata', {});\n      }\n\n      set(this.value.metadata, 'namespace', DEFAULT_WORKSPACE);\n    }\n\n    // For the node drivers, look for custom UI that we can use to show an icon (if not built-in)\n    this.nodeDrivers.forEach((driver) => {\n      if (!driver.spec?.builtin && driver.spec?.uiUrl && driver.spec?.active) {\n        const name = driver.spec?.displayName || driver.id;\n        let cssUrl = driver.spec.uiUrl.replace(/\\.js$/, '.css');\n\n        if (cssUrl.startsWith('http://') || cssUrl.startsWith('https://')) {\n          cssUrl = `${ PROXY_ENDPOINT }/${ cssUrl }`;\n        }\n\n        this.loadStylesheet(cssUrl, `driver-ui-css-${ driver.id }`);\n\n        this.iconClasses[name] = `machine-driver ${ name }`;\n      }\n    });\n\n    // Custom Providers from extensions - initialize each with the store and the i18n service\n    // Wrap in try ... catch, to prevent errors in an extension breaking the page\n    try {\n      const extensionClasses = this.$plugin.listDynamic('provisioner').map((name) => this.$plugin.getDynamic('provisioner', name));\n\n      // We can't pass in this.$store as this leads to a circular-reference that causes Vue to freeze,\n      // so pass in specific services that the provisioner extension may need\n      this.extensions = extensionClasses.map((c) => new c({\n        dispatch: this.$store.dispatch,\n        getters:  this.$store.getters,\n        axios:    this.$store.$axios,\n        $plugin:  this.$store.app.$plugin,\n        t:        (...args) => this.t.apply(this, args),\n        isCreate: this.isCreate,\n        isEdit:   this.isEdit,\n        isView:   this.isView,\n      }));\n    } catch (e) {\n      console.error('Error loading provisioner(s) from extensions', e); // eslint-disable-line no-console\n    }\n  },\n\n  data() {\n    const subType = this.$route.query[SUB_TYPE] || null;\n    const rkeType = this.$route.query[RKE_TYPE] || null;\n    const chart = this.$route.query[CHART] || null;\n    const isImport = this.realMode === _IMPORT;\n\n    return {\n      nodeDrivers:      [],\n      kontainerDrivers: [],\n      extensions:       [],\n      subType,\n      rkeType,\n      chart,\n      isImport,\n      providerCluster:  null,\n      iconClasses:      {},\n    };\n  },\n\n  computed: {\n    ...mapGetters({ allCharts: 'catalog/charts' }),\n    ...mapGetters('type-map', ['activeProducts']),\n    // needed to recreate logic on mapPref in order to incorporate the logic around the rkeType query param\n    // https://github.com/rancher/dashboard/issues/6299\n    preferredProvisioner: {\n      get() {\n        if (this.rkeType) {\n          return this.rkeType;\n        }\n\n        return this.$store.getters['prefs/get'](PROVISIONER);\n      },\n      set(value) {\n        this.$store.dispatch('prefs/set', { key: PROVISIONER, value });\n      }\n    },\n    _RKE1: () => _RKE1,\n    _RKE2: () => _RKE2,\n\n    emberLink() {\n      if (this.value) {\n        if (this.value.provisioner) {\n          const matchingSubtype = this.subTypes.find((st) => st.id.toLowerCase() === this.value.provisioner.toLowerCase() || DRIVER_TO_IMPORT[st.id.toLowerCase()] === this.value.provisioner.toLowerCase());\n\n          if (matchingSubtype) {\n            this.selectType(matchingSubtype.id, false);\n          }\n        }\n        // For custom RKE2 clusters, don't load an Ember page.\n        // It should be the dashboard.\n        if ( this.value.isRke2 && ((this.value.isCustom && this.mode === _EDIT) || (this.value.isCustom && this.as === _CONFIG && this.mode === _VIEW) || (this.subType || '').toLowerCase() === 'custom')) {\n          // For admins, this.value.isCustom is used to check if it is a custom cluster.\n          // For cluster owners, this.subtype is used.\n          this.selectType('custom', false);\n\n          return '';\n        }\n        // For RKE2/K3s clusters provisioned in Rancher with node pools,\n        // do not use an iFramed Ember page.\n        if ( this.value.isRke2 && this.value.machineProvider ) {\n          // Edit existing RKE2\n          this.selectType(this.value.machineProvider, false);\n\n          return '';\n        }\n        if ( this.subType ) {\n          // if driver type has a custom form component, don't load an ember page\n          if (this.selectedSubType.component) {\n            return '';\n          }\n          // For RKE1 and hosted Kubernetes Clusters, set the ember link\n          // so that we load the page rather than using RKE2 create\n          if (this.selectedSubType?.emberLink) {\n            return this.selectedSubType.emberLink;\n          }\n\n          this.selectType(this.subType, false);\n\n          return '';\n        }\n\n        if ( this.value.mgmt?.emberEditPath ) {\n          // Iframe an old page\n          return this.value.mgmt.emberEditPath;\n        }\n      }\n\n      return '';\n    },\n\n    rke2Enabled:   mapFeature(RKE2_FEATURE),\n    rke1UiEnabled: mapFeature(RKE1_UI),\n\n    // todo nb is this info stored anywhere else..?\n    selectedSubType() {\n      return this.subType ? this.subTypes.find((s) => s.id === this.subType) : null;\n    },\n\n    provisioner: {\n      get() {\n        // This can incorrectly return rke1 instead\n        // of rke2 for cluster owners.\n        if ( !this.rke2Enabled ) {\n          return _RKE1;\n        }\n\n        if ( !this.rke1UiEnabled ) {\n          return _RKE2;\n        }\n\n        return this.preferredProvisioner;\n      },\n\n      set(neu) {\n        this.preferredProvisioner = neu;\n      },\n    },\n\n    isRke1() {\n      return this.provisioner === _RKE1;\n    },\n\n    isRke2() {\n      return this.value.isRke2 || !this.isRke1;\n    },\n\n    templateOptions() {\n      if ( !this.rke2Enabled ) {\n        return [];\n      }\n\n      const out = filterAndArrangeCharts(this.allCharts, { showTypes: CATALOG._CLUSTER_TPL });\n\n      return out;\n    },\n\n    subTypes() {\n      const getters = this.$store.getters;\n      const isImport = this.isImport;\n      const isElementalActive = !!this.activeProducts.find((item) => item.name === ELEMENTAL_PRODUCT_NAME);\n      let out = [];\n\n      const templates = this.templateOptions;\n      const vueKontainerTypes = getters['plugins/clusterDrivers'];\n      const machineTypes = this.nodeDrivers.filter((x) => x.spec.active && x.state === 'active');\n\n      this.kontainerDrivers.filter((x) => (isImport ? x.showImport : x.showCreate)).forEach((obj) => {\n        if ( vueKontainerTypes.includes(obj.driverName) ) {\n          addType(this.$plugin, obj.driverName, 'kontainer', false);\n        } else {\n          addType(this.$plugin, obj.driverName, 'kontainer', false, (isImport ? obj.emberImportPath : obj.emberCreatePath));\n        }\n      });\n\n      if ( isImport ) {\n        addType(this.$plugin, 'import', 'custom', false);\n      } else {\n        templates.forEach((chart) => {\n          out.push({\n            id:          `chart:${ chart.id }`,\n            label:       chart.chartNameDisplay,\n            description: chart.chartDescription,\n            icon:        chart.icon || require('~shell/assets/images/generic-catalog.svg'),\n            group:       'template',\n            tag:         getters['i18n/t']('generic.techPreview')\n          });\n        });\n\n        if (this.isRke1 ) {\n          machineTypes.forEach((type) => {\n            const id = type.spec.displayName || type.id;\n\n            addType(this.$plugin, id, _RKE1, false, `/g/clusters/add/launch/${ id }`, this.iconClasses[id], type);\n          });\n\n          addType(this.$plugin, 'custom', 'custom1', false, '/g/clusters/add/launch/custom');\n        } else {\n          machineTypes.forEach((type) => {\n            const id = type.spec.displayName || type.id;\n\n            addType(this.$plugin, id, _RKE2, false, null, undefined, type);\n          });\n\n          addType(this.$plugin, 'custom', 'custom2', false);\n\n          if (isElementalActive) {\n            addType(this.$plugin, ELEMENTAL_CLUSTER_PROVIDER, 'custom2', false);\n          }\n        }\n\n        // Add from extensions\n        this.extensions.forEach((ext) => {\n          // if the rke toggle is set to rke1, don't add extensions that specify rke2 group\n          // default group is rke2\n          if (!this.isRke2 && (ext.group === _RKE2 || !ext.group)) {\n            return;\n          }\n          // Do not show the extension provisioner on the import cluster page unless its explicitly set to do so\n          if (isImport && !ext.showImport) {\n            return;\n          }\n          // Allow extensions to overwrite provisioners with the same id\n          out = out.filter((type) => type.id !== ext.id);\n          addExtensionType(ext, getters);\n        });\n      }\n\n      return out;\n\n      function addExtensionType(ext, getters) {\n        let iconClass = ext.iconClass;\n        let icon = ext.icon;\n\n        if (icon) {\n          iconClass = undefined;\n        } else if (!iconClass) {\n          icon = require('~shell/assets/images/generic-driver.svg');\n        }\n\n        const subtype = {\n          id:          ext.id,\n          label:       ext.label || getters['i18n/t'](`cluster.provider.${ ext.id }`),\n          description: ext.description,\n          icon,\n          iconClass,\n          group:       ext.group || _RKE2,\n          disabled:    ext.disabled || false,\n          link:        ext.link,\n          tag:         ext.tag,\n          component:   ext.component\n        };\n\n        out.push(subtype);\n      }\n\n      function addType(plugin, id, group, disabled = false, emberLink = null, iconClass = undefined, providerConfig = undefined) {\n        const label = getters['i18n/withFallback'](`cluster.provider.\"${ id }\"`, null, id);\n        const description = getters['i18n/withFallback'](`cluster.providerDescription.\"${ id }\"`, null, '');\n        const tag = '';\n\n        // Look at extensions first\n        // An extension can override the icon for a provider with\n        // plugin.register('image', 'providers/openstack.svg', require('~shell/assets/images/providers/exoscale.svg'));\n        let icon = plugin.getDynamic('image', `providers/${ id }.svg`);\n\n        if (!icon) {\n          try {\n            icon = require(`~shell/assets/images/providers/${ id }.svg`);\n          } catch (e) {}\n        }\n\n        if (icon) {\n          iconClass = undefined;\n        } else if (!iconClass) {\n          icon = require('~shell/assets/images/generic-driver.svg');\n        }\n\n        const subtype = {\n          id,\n          label,\n          description,\n          icon,\n          iconClass,\n          group,\n          disabled,\n          emberLink,\n          tag,\n          providerConfig\n        };\n\n        out.push(subtype);\n      }\n    },\n\n    groupedSubTypes() {\n      const out = {};\n\n      for ( const row of this.subTypes ) {\n        const name = row.group;\n        let entry = out[name];\n\n        if ( !entry ) {\n          entry = {\n            name,\n            label: this.$store.getters['i18n/withFallback'](`cluster.providerGroup.\"${ this.isImport ? 'register-' : 'create-' }${ name }\"`, null, name),\n            types: [],\n            sort:  SORT_GROUPS[name],\n          };\n\n          out[name] = entry;\n        }\n\n        entry.types.push(row);\n      }\n\n      for ( const k in out ) {\n        out[k].types = sortBy(out[k].types, 'label');\n      }\n\n      return sortBy(Object.values(out), 'sort');\n    },\n\n    firstNodeDriverItem() {\n      return this.groupedSubTypes.findIndex((obj) => [_RKE1, _RKE2].includes(obj.name));\n    },\n\n    firstCustomClusterItem() {\n      return this.groupedSubTypes.findIndex((obj) => ['custom', 'custom1', 'custom2'].includes(obj.name));\n    },\n  },\n\n  methods: {\n    showRkeToggle(i) {\n      if (this.isImport || !this.rke2Enabled) {\n        return false;\n      }\n\n      if (this.firstNodeDriverItem >= 0) {\n        return i === this.firstNodeDriverItem;\n      }\n\n      return i === this.firstCustomClusterItem;\n    },\n\n    loadStylesheet(url, id) {\n      if ( !id ) {\n        console.error('loadStylesheet called without an id'); // eslint-disable-line no-console\n\n        return;\n      }\n\n      // Check if the stylesheet has already been loaded\n      if ( $(`#${id}`).length > 0 ) { // eslint-disable-line\n        return;\n      }\n\n      const link = document.createElement('link');\n\n      link.onerror = () => {\n        link.remove();\n      };\n      link.rel = 'stylesheet';\n      link.src = url;\n      link.href = url;\n      link.id = id;\n      document.getElementsByTagName('HEAD')[0].appendChild(link);\n    },\n\n    cancel() {\n      this.$router.push({\n        name:   'c-cluster-product-resource',\n        params: {\n          cluster:  this.$route.params.cluster,\n          product:  this.$store.getters['productId'],\n          resource: CAPI.RANCHER_CLUSTER,\n        },\n      });\n    },\n\n    colorFor(obj) {\n      return `color${ SORT_GROUPS[obj.group] || 1 }`;\n    },\n\n    clickedType(obj) {\n      const id = obj.id;\n      const parts = id.split(':', 2);\n\n      if ( parts[0] === 'chart' ) {\n        const chart = this.$store.getters['catalog/chart']({ key: parts[1] });\n        let localCluster;\n\n        if (this.$store.getters[`management/canList`](MANAGEMENT.CLUSTER)) {\n          localCluster = this.$store.getters['management/all'](MANAGEMENT.CLUSTER).find((x) => x.isLocal);\n        }\n\n        chart.goToInstall(FROM_CLUSTER, localCluster?.id || BLANK_CLUSTER, true);\n\n        return;\n      }\n      if (obj.link) {\n        this.$router.push(obj.link);\n\n        return;\n      }\n\n      this.$router.applyQuery({ [SUB_TYPE]: id, [RKE_TYPE]: this.preferredProvisioner });\n      this.selectType(id);\n    },\n\n    selectType(type, fetch = true) {\n      const parts = type.split(':', 2);\n\n      if ( parts[0] === 'chart' ) {\n        this.subType = 'chart';\n        this.$emit('set-subtype', this.$store.getters['i18n/withFallback'](`cluster.provider.chart`));\n      } else {\n        this.subType = type;\n        this.$emit('set-subtype', this.$store.getters['i18n/withFallback'](`cluster.provider.\"${ type }\"`, null, type));\n      }\n\n      if ( fetch ) {\n        this.$fetch();\n      }\n    },\n  },\n};\n</script>\n\n<template>\n  <Loading v-if=\"$fetchState.pending\" />\n  <div\n    v-else-if=\"emberLink\"\n    class=\"embed\"\n  >\n    <EmberPage\n      :force-new=\"true\"\n      :src=\"emberLink\"\n    />\n  </div>\n  <CruResource\n    v-else\n    :mode=\"mode\"\n    :validation-passed=\"true\"\n    :selected-subtype=\"subType\"\n    :resource=\"value\"\n    :errors=\"errors\"\n    :subtypes=\"subTypes\"\n    :cancel-event=\"true\"\n    :prevent-enter-submit=\"true\"\n    class=\"create-cluster\"\n    @finish=\"save\"\n    @cancel=\"cancel\"\n    @select-type=\"selectType\"\n    @error=\"e=>errors = e\"\n  >\n    <template #subtypes>\n      <div\n        v-for=\"(obj, i) in groupedSubTypes\"\n        :key=\"obj.id\"\n        class=\"mb-20\"\n        style=\"width: 100%;\"\n      >\n        <h4>\n          <div\n            v-if=\"showRkeToggle(i) && rke1UiEnabled\"\n            class=\"grouped-type\"\n          >\n            <ToggleSwitch\n              v-model=\"provisioner\"\n              data-testid=\"cluster-manager-create-rke-switch\"\n              class=\"rke-switch\"\n              :off-value=\"_RKE1\"\n              :off-label=\"t('cluster.toggle.v1')\"\n              :on-value=\"_RKE2\"\n              :on-label=\"t('cluster.toggle.v2')\"\n            />\n          </div>\n          {{ obj.label }}\n        </h4>\n        <SelectIconGrid\n          :rows=\"obj.types\"\n          key-field=\"id\"\n          name-field=\"label\"\n          side-label-field=\"tag\"\n          :color-for=\"colorFor\"\n          component-testid=\"cluster-manager-create-grid\"\n          @clicked=\"clickedType\"\n        />\n      </div>\n    </template>\n\n    <Import\n      v-if=\"isImport\"\n      v-model=\"value\"\n      :mode=\"mode\"\n      :provider=\"subType\"\n    />\n    <template v-else-if=\"subType\">\n      <!-- allow extensions to provide their own cluster provisioning form -->\n      <component\n        :is=\"selectedSubType.component\"\n        v-if=\"selectedSubType && selectedSubType.component\"\n        v-model=\"value\"\n        :initial-value=\"initialValue\"\n        :live-value=\"liveValue\"\n        :mode=\"mode\"\n        :provider=\"subType\"\n        :provider-config=\"selectedSubType.providerConfig\"\n      />\n      <Rke2Config\n        v-else\n        v-model=\"value\"\n        :initial-value=\"initialValue\"\n        :live-value=\"liveValue\"\n        :mode=\"mode\"\n        :provider=\"subType\"\n        :provider-config=\"selectedSubType.providerConfig\"\n      />\n    </template>\n\n    <template\n      v-if=\"subType\"\n      #form-footer\n    >\n      <div><!-- Hide the outer footer --></div>\n    </template>\n  </CruResource>\n</template>\n\n<style lang='scss'>\n  .grouped-type {\n    position: relative;\n  }\n\n  .rke-switch {\n    margin-top: -10px;\n    position: absolute;\n    right: 0;\n  }\n</style>\n"],"mappings":"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","ignoreList":[]}]}