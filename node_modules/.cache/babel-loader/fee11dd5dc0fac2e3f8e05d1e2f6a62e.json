{"remainingRequest":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js??ref--16-1!/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/ubuntu/suseconf/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ubuntu/suseconf/node_modules/@rancher/shell/edit/cloudcredential.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/ubuntu/suseconf/node_modules/@rancher/shell/edit/cloudcredential.vue","mtime":1725338146566},{"path":"/home/ubuntu/suseconf/babel.config.js","mtime":1725343995893},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js","mtime":1725271298942},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1725271300920}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90b0NvbnN1bWFibGVBcnJheSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKZnVuY3Rpb24gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIociwgZSkgeyB2YXIgdCA9ICJ1bmRlZmluZWQiICE9IHR5cGVvZiBTeW1ib2wgJiYgcltTeW1ib2wuaXRlcmF0b3JdIHx8IHJbIkBAaXRlcmF0b3IiXTsgaWYgKCF0KSB7IGlmIChBcnJheS5pc0FycmF5KHIpIHx8ICh0ID0gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KHIpKSB8fCBlICYmIHIgJiYgIm51bWJlciIgPT0gdHlwZW9mIHIubGVuZ3RoKSB7IHQgJiYgKHIgPSB0KTsgdmFyIF9uID0gMCwgRiA9IGZ1bmN0aW9uIEYoKSB7fTsgcmV0dXJuIHsgczogRiwgbjogZnVuY3Rpb24gbigpIHsgcmV0dXJuIF9uID49IHIubGVuZ3RoID8geyBkb25lOiAhMCB9IDogeyBkb25lOiAhMSwgdmFsdWU6IHJbX24rK10gfTsgfSwgZTogZnVuY3Rpb24gZShyKSB7IHRocm93IHI7IH0sIGY6IEYgfTsgfSB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gaXRlcmF0ZSBub24taXRlcmFibGUgaW5zdGFuY2UuXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuIik7IH0gdmFyIG8sIGEgPSAhMCwgdSA9ICExOyByZXR1cm4geyBzOiBmdW5jdGlvbiBzKCkgeyB0ID0gdC5jYWxsKHIpOyB9LCBuOiBmdW5jdGlvbiBuKCkgeyB2YXIgciA9IHQubmV4dCgpOyByZXR1cm4gYSA9IHIuZG9uZSwgcjsgfSwgZTogZnVuY3Rpb24gZShyKSB7IHUgPSAhMCwgbyA9IHI7IH0sIGY6IGZ1bmN0aW9uIGYoKSB7IHRyeSB7IGEgfHwgbnVsbCA9PSB0LnJldHVybiB8fCB0LnJldHVybigpOyB9IGZpbmFsbHkgeyBpZiAodSkgdGhyb3cgbzsgfSB9IH07IH0KZnVuY3Rpb24gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KHIsIGEpIHsgaWYgKHIpIHsgaWYgKCJzdHJpbmciID09IHR5cGVvZiByKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkociwgYSk7IHZhciB0ID0ge30udG9TdHJpbmcuY2FsbChyKS5zbGljZSg4LCAtMSk7IHJldHVybiAiT2JqZWN0IiA9PT0gdCAmJiByLmNvbnN0cnVjdG9yICYmICh0ID0gci5jb25zdHJ1Y3Rvci5uYW1lKSwgIk1hcCIgPT09IHQgfHwgIlNldCIgPT09IHQgPyBBcnJheS5mcm9tKHIpIDogIkFyZ3VtZW50cyIgPT09IHQgfHwgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QodCkgPyBfYXJyYXlMaWtlVG9BcnJheShyLCBhKSA6IHZvaWQgMDsgfSB9CmZ1bmN0aW9uIF9hcnJheUxpa2VUb0FycmF5KHIsIGEpIHsgKG51bGwgPT0gYSB8fCBhID4gci5sZW5ndGgpICYmIChhID0gci5sZW5ndGgpOyBmb3IgKHZhciBlID0gMCwgbiA9IEFycmF5KGEpOyBlIDwgYTsgZSsrKSBuW2VdID0gcltlXTsgcmV0dXJuIG47IH0KaW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiL2hvbWUvdWJ1bnR1L3N1c2Vjb25mL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9yZWdlbmVyYXRvci9pbmRleC5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmRlc2NyaXB0aW9uLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZnJvbS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuZW5kcy13aXRoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yLmpzIjsKaW1wb3J0IHsgU0VDUkVUX1RZUEVTIGFzIFRZUEVTIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy9zZWNyZXQnOwppbXBvcnQgeyBNQU5BR0VNRU5ULCBOT1JNQU4sIFNDSEVNQSwgREVGQVVMVF9XT1JLU1BBQ0UgfSBmcm9tICdAc2hlbGwvY29uZmlnL3R5cGVzJzsKaW1wb3J0IENyZWF0ZUVkaXRWaWV3IGZyb20gJ0BzaGVsbC9taXhpbnMvY3JlYXRlLWVkaXQtdmlldyc7CmltcG9ydCBOYW1lTnNEZXNjcmlwdGlvbiBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9mb3JtL05hbWVOc0Rlc2NyaXB0aW9uJzsKaW1wb3J0IENydVJlc291cmNlIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL0NydVJlc291cmNlJzsKaW1wb3J0IHsgX0NSRUFURSwgX0VESVQgfSBmcm9tICdAc2hlbGwvY29uZmlnL3F1ZXJ5LXBhcmFtcyc7CmltcG9ydCBMb2FkaW5nIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL0xvYWRpbmcnOwppbXBvcnQgTGFiZWxzIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL2Zvcm0vTGFiZWxzJzsKaW1wb3J0IHsgSElERV9TRU5TSVRJVkUgfSBmcm9tICdAc2hlbGwvc3RvcmUvcHJlZnMnOwppbXBvcnQgeyBDQVBJIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy9sYWJlbHMtYW5ub3RhdGlvbnMnOwppbXBvcnQgeyBjbGVhciwgdW5pcSB9IGZyb20gJ0BzaGVsbC91dGlscy9hcnJheSc7CmltcG9ydCBTZWxlY3RJY29uR3JpZCBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9TZWxlY3RJY29uR3JpZCc7CmltcG9ydCB7IHNvcnRCeSB9IGZyb20gJ0BzaGVsbC91dGlscy9zb3J0JzsKaW1wb3J0IHsgdWNGaXJzdCB9IGZyb20gJ0BzaGVsbC91dGlscy9zdHJpbmcnOwppbXBvcnQgeyBzZXQgfSBmcm9tICdAc2hlbGwvdXRpbHMvb2JqZWN0JzsKaW1wb3J0IHsgbWFwRmVhdHVyZSwgUktFMiBhcyBSS0UyX0ZFQVRVUkUgfSBmcm9tICdAc2hlbGwvc3RvcmUvZmVhdHVyZXMnOwppbXBvcnQgeyBya2UxU3VwcG9ydHMgfSBmcm9tICdAc2hlbGwvc3RvcmUvcGx1Z2lucyc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnQ3J1Q2xvdWRDcmVkZW50aWFsJywKICBjb21wb25lbnRzOiB7CiAgICBMb2FkaW5nOiBMb2FkaW5nLAogICAgTmFtZU5zRGVzY3JpcHRpb246IE5hbWVOc0Rlc2NyaXB0aW9uLAogICAgQ3J1UmVzb3VyY2U6IENydVJlc291cmNlLAogICAgTGFiZWxzOiBMYWJlbHMsCiAgICBTZWxlY3RJY29uR3JpZDogU2VsZWN0SWNvbkdyaWQKICB9LAogIG1peGluczogW0NyZWF0ZUVkaXRWaWV3XSwKICBmZXRjaDogZnVuY3Rpb24gZmV0Y2goKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgdmFyIF90aGlzJHZhbHVlOwogICAgICB2YXIgc2NoZW1hLCBrLCBpZDsKICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICByZXR1cm4gX3RoaXMuJHN0b3JlLmRpc3BhdGNoKCdtYW5hZ2VtZW50L2ZpbmRBbGwnLCB7CiAgICAgICAgICAgICAgdHlwZTogTUFOQUdFTUVOVC5OT0RFX0RSSVZFUgogICAgICAgICAgICB9KTsKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgX3RoaXMubm9kZURyaXZlcnMgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNTsKICAgICAgICAgICAgcmV0dXJuIF90aGlzLiRzdG9yZS5kaXNwYXRjaCgnbWFuYWdlbWVudC9maW5kQWxsJywgewogICAgICAgICAgICAgIHR5cGU6IE1BTkFHRU1FTlQuS09OVEFJTkVSX0RSSVZFUgogICAgICAgICAgICB9KTsKICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgX3RoaXMua29udGFpbmVyRHJpdmVycyA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSA2OwogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gOTsKICAgICAgICAgICAgcmV0dXJuIF90aGlzLiRzdG9yZS5kaXNwYXRjaCgncmFuY2hlci9maW5kJywgewogICAgICAgICAgICAgIHR5cGU6IFNDSEVNQSwKICAgICAgICAgICAgICBpZDogTk9STUFOLkNMT1VEX0NSRURFTlRJQUwsCiAgICAgICAgICAgICAgb3B0OiB7CiAgICAgICAgICAgICAgICBmb3JjZTogdHJ1ZSwKICAgICAgICAgICAgICAgIHVybDogInNjaGVtYXMvIi5jb25jYXQoTk9STUFOLkNMT1VEX0NSRURFTlRJQUwpCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgc2NoZW1hID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfcmVnZW5lcmF0b3JSdW50aW1lLmtleXMoc2NoZW1hLnJlc291cmNlRmllbGRzKTsKICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgIGlmICgoX2NvbnRleHQudDEgPSBfY29udGV4dC50MCgpKS5kb25lKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDIxOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGsgPSBfY29udGV4dC50MS52YWx1ZTsKICAgICAgICAgICAgaWYgKGsuZW5kc1dpdGgoJ0NvbmZpZycpKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE1OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoImNvbnRpbnVlIiwgMTEpOwogICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgaWQgPSBzY2hlbWEucmVzb3VyY2VGaWVsZHNba10udHlwZTsKICAgICAgICAgICAgaWYgKF90aGlzLiRzdG9yZS5nZXR0ZXJzWydyYW5jaGVyL3NjaGVtYUZvciddKGlkKSkgewogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxOTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTk7CiAgICAgICAgICAgIHJldHVybiBfdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3JhbmNoZXIvZmluZCcsIHsKICAgICAgICAgICAgICB0eXBlOiBTQ0hFTUEsCiAgICAgICAgICAgICAgaWQ6IGlkLAogICAgICAgICAgICAgIG9wdDogewogICAgICAgICAgICAgICAgZm9yY2U6IHRydWUsCiAgICAgICAgICAgICAgICB1cmw6ICJzY2hlbWFzLyIuY29uY2F0KGlkKQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICBjYXNlIDE5OgogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTE7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAyMToKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI1OwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgMjM6CiAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAyMzsKICAgICAgICAgICAgX2NvbnRleHQudDIgPSBfY29udGV4dFsiY2F0Y2giXSg2KTsKICAgICAgICAgIGNhc2UgMjU6CiAgICAgICAgICAgIGlmICghX3RoaXMudmFsdWUuX25hbWUpIHsKICAgICAgICAgICAgICBzZXQoX3RoaXMudmFsdWUsICdfbmFtZScsICcnKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoX3RoaXMubW9kZSA9PT0gX0VESVQgJiYgKF90aGlzJHZhbHVlID0gX3RoaXMudmFsdWUpICE9PSBudWxsICYmIF90aGlzJHZhbHVlICE9PSB2b2lkIDAgJiYgKF90aGlzJHZhbHVlID0gX3RoaXMkdmFsdWUubmFtZSkgIT09IG51bGwgJiYgX3RoaXMkdmFsdWUgIT09IHZvaWQgMCAmJiBfdGhpcyR2YWx1ZS5sZW5ndGgpIHsKICAgICAgICAgICAgICBfdGhpcy52YWx1ZS5fbmFtZSA9IF90aGlzLnZhbHVlLm5hbWU7CiAgICAgICAgICAgICAgX3RoaXMubmFtZVJlcXVpcmVkVmFsaWRhdGlvbiA9IHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKF90aGlzLnZhbHVlLnByb3ZpZGVyKSB7CiAgICAgICAgICAgICAgX3RoaXMuc2VsZWN0VHlwZShfdGhpcy52YWx1ZS5wcm92aWRlcik7CiAgICAgICAgICAgIH0KICAgICAgICAgIGNhc2UgMjg6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSwgbnVsbCwgW1s2LCAyM11dKTsKICAgIH0pKSgpOwogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGNyZWRDdXN0b21Db21wb25lbnRWYWxpZGF0aW9uOiBmYWxzZSwKICAgICAgbmFtZVJlcXVpcmVkVmFsaWRhdGlvbjogZmFsc2UsCiAgICAgIG5vZGVEcml2ZXJzOiBudWxsLAogICAgICBrb250YWluZXJEcml2ZXJzOiBudWxsCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIHJrZTJFbmFibGVkOiBtYXBGZWF0dXJlKFJLRTJfRkVBVFVSRSksCiAgICB2YWxpZGF0aW9uUGFzc2VkOiBmdW5jdGlvbiB2YWxpZGF0aW9uUGFzc2VkKCkgewogICAgICByZXR1cm4gdGhpcy5jcmVkQ3VzdG9tQ29tcG9uZW50VmFsaWRhdGlvbiAmJiB0aGlzLm5hbWVSZXF1aXJlZFZhbGlkYXRpb247CiAgICB9LAogICAgc3RvcmVPdmVycmlkZTogZnVuY3Rpb24gc3RvcmVPdmVycmlkZSgpIHsKICAgICAgcmV0dXJuICdyYW5jaGVyJzsKICAgIH0sCiAgICBkcml2ZXJOYW1lOiBmdW5jdGlvbiBkcml2ZXJOYW1lKCkgewogICAgICB2YXIgX3RoaXMkdmFsdWUyOwogICAgICByZXR1cm4gKF90aGlzJHZhbHVlMiA9IHRoaXMudmFsdWUpID09PSBudWxsIHx8IF90aGlzJHZhbHVlMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkdmFsdWUyLnByb3ZpZGVyOwogICAgfSwKICAgIGNsb3VkQ29tcG9uZW50OiBmdW5jdGlvbiBjbG91ZENvbXBvbmVudCgpIHsKICAgICAgaWYgKHRoaXMuJHN0b3JlLmdldHRlcnNbJ3R5cGUtbWFwL2hhc0N1c3RvbUNsb3VkQ3JlZGVudGlhbENvbXBvbmVudCddKHRoaXMuZHJpdmVyTmFtZSkpIHsKICAgICAgICByZXR1cm4gdGhpcy4kc3RvcmUuZ2V0dGVyc1sndHlwZS1tYXAvaW1wb3J0Q2xvdWRDcmVkZW50aWFsJ10odGhpcy5kcml2ZXJOYW1lKTsKICAgICAgfQogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuZ2V0dGVyc1sndHlwZS1tYXAvaW1wb3J0Q2xvdWRDcmVkZW50aWFsJ10oJ2dlbmVyaWMnKTsKICAgIH0sCiAgICAvLyBhcnJheSBvZiBpZCwgbGFiZWwsIGRlc2NyaXB0aW9uLCBpbml0aWFscyBmb3IgdHlwZSBzZWxlY3Rpb24gc3RlcAogICAgc2VjcmV0U3ViVHlwZXM6IGZ1bmN0aW9uIHNlY3JldFN1YlR5cGVzKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKICAgICAgdmFyIG91dCA9IFtdOwogICAgICB2YXIgZHJpdmVycyA9IFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkodGhpcy5ub2RlRHJpdmVycyksIF90b0NvbnN1bWFibGVBcnJheSh0aGlzLmtvbnRhaW5lckRyaXZlcnMpKS5maWx0ZXIoZnVuY3Rpb24gKHgpIHsKICAgICAgICByZXR1cm4geC5zcGVjLmFjdGl2ZSAmJiB4LmlkICE9PSAncmFuY2hlcmt1YmVybmV0ZXNlbmdpbmUnOwogICAgICB9KS5tYXAoZnVuY3Rpb24gKHgpIHsKICAgICAgICByZXR1cm4geC5zcGVjLmRpc3BsYXlOYW1lIHx8IHguaWQ7CiAgICAgIH0pOwogICAgICB2YXIgdHlwZXMgPSB1bmlxKGRyaXZlcnMubWFwKGZ1bmN0aW9uICh4KSB7CiAgICAgICAgcmV0dXJuIF90aGlzMi4kc3RvcmUuZ2V0dGVyc1sncGx1Z2lucy9jcmVkZW50aWFsRHJpdmVyRm9yJ10oeCk7CiAgICAgIH0pKTsKICAgICAgaWYgKCF0aGlzLnJrZTJFbmFibGVkKSB7CiAgICAgICAgdHlwZXMgPSB0eXBlcy5maWx0ZXIoZnVuY3Rpb24gKHgpIHsKICAgICAgICAgIHJldHVybiBya2UxU3VwcG9ydHMuaW5jbHVkZXMoeCk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgdmFyIHNjaGVtYSA9IHRoaXMuJHN0b3JlLmdldHRlcnNbJ3JhbmNoZXIvc2NoZW1hRm9yJ10oTk9STUFOLkNMT1VEX0NSRURFTlRJQUwpOwogICAgICB0eXBlcyA9IHR5cGVzLmZpbHRlcihmdW5jdGlvbiAobmFtZSkgewogICAgICAgIHZhciBfc2NoZW1hJHJlc291cmNlRmllbGQ7CiAgICAgICAgdmFyIGtleSA9IF90aGlzMi4kc3RvcmUuZ2V0dGVyc1sncGx1Z2lucy9jcmVkZW50aWFsRmllbGRGb3JEcml2ZXInXShuYW1lKTsKICAgICAgICB2YXIgc3ViU2NoZW1hTmFtZSA9IChfc2NoZW1hJHJlc291cmNlRmllbGQgPSBzY2hlbWEucmVzb3VyY2VGaWVsZHNbIiIuY29uY2F0KGtleSwgImNyZWRlbnRpYWxDb25maWciKV0pID09PSBudWxsIHx8IF9zY2hlbWEkcmVzb3VyY2VGaWVsZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3NjaGVtYSRyZXNvdXJjZUZpZWxkLnR5cGU7CiAgICAgICAgaWYgKCFzdWJTY2hlbWFOYW1lKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIHZhciBzdWJTY2hlbWEgPSBfdGhpczIuJHN0b3JlLmdldHRlcnNbJ3JhbmNoZXIvc2NoZW1hRm9yJ10oc3ViU2NoZW1hTmFtZSk7CiAgICAgICAgaWYgKCFzdWJTY2hlbWEpIHsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgICAgdmFyIGZpZWxkcyA9IHN1YlNjaGVtYS5yZXNvdXJjZUZpZWxkczsKICAgICAgICByZXR1cm4gZmllbGRzICYmIE9iamVjdC5rZXlzKGZpZWxkcykubGVuZ3RoID4gMDsKICAgICAgfSk7CiAgICAgIGlmIChzY2hlbWEucmVzb3VyY2VGaWVsZHNbJ3MzY3JlZGVudGlhbENvbmZpZyddKSB7CiAgICAgICAgdHlwZXMucHVzaCgnczMnKTsKICAgICAgfQogICAgICB2YXIgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIodHlwZXMpLAogICAgICAgIF9zdGVwOwogICAgICB0cnkgewogICAgICAgIGZvciAoX2l0ZXJhdG9yLnMoKTsgIShfc3RlcCA9IF9pdGVyYXRvci5uKCkpLmRvbmU7KSB7CiAgICAgICAgICB2YXIgaWQgPSBfc3RlcC52YWx1ZTsKICAgICAgICAgIHZhciBiYW5uZXJJbWFnZSA9IHZvaWQgMCwKICAgICAgICAgICAgYmFubmVyQWJicnYgPSB2b2lkIDA7CiAgICAgICAgICB0cnkgewogICAgICAgICAgICBiYW5uZXJJbWFnZSA9IHJlcXVpcmUoIn5zaGVsbC9hc3NldHMvaW1hZ2VzL3Byb3ZpZGVycy8iLmNvbmNhdChpZCwgIi5zdmciKSk7CiAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgIGJhbm5lckltYWdlID0gbnVsbDsKICAgICAgICAgICAgYmFubmVyQWJicnYgPSB0aGlzLmluaXRpYWxEaXNwbGF5Rm9yKGlkKTsKICAgICAgICAgIH0KICAgICAgICAgIG91dC5wdXNoKHsKICAgICAgICAgICAgaWQ6IGlkLAogICAgICAgICAgICBsYWJlbDogdGhpcy50eXBlRGlzcGxheShDQVBJLkNSRURFTlRJQUxfRFJJVkVSLCBpZCksCiAgICAgICAgICAgIGJhbm5lckltYWdlOiBiYW5uZXJJbWFnZSwKICAgICAgICAgICAgYmFubmVyQWJicnY6IGJhbm5lckFiYnJ2CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIF9pdGVyYXRvci5lKGVycik7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgX2l0ZXJhdG9yLmYoKTsKICAgICAgfQogICAgICByZXR1cm4gc29ydEJ5KG91dCwgJ2xhYmVsJyk7CiAgICB9LAogICAgaGlkZVNlbnNpdGl2ZURhdGE6IGZ1bmN0aW9uIGhpZGVTZW5zaXRpdmVEYXRhKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuZ2V0dGVyc1sncHJlZnMvZ2V0J10oSElERV9TRU5TSVRJVkUpOwogICAgfSwKICAgIGRvbmVSb3V0ZTogZnVuY3Rpb24gZG9uZVJvdXRlKCkgewogICAgICByZXR1cm4gJ2MtY2x1c3Rlci1tYW5hZ2VyLWNsb3VkQ3JlZGVudGlhbCc7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBoYW5kbGVOYW1lUmVxdWlyZWRWYWxpZGF0aW9uOiBmdW5jdGlvbiBoYW5kbGVOYW1lUmVxdWlyZWRWYWxpZGF0aW9uKCkgewogICAgICB2YXIgX3RoaXMkdmFsdWUzOwogICAgICB0aGlzLm5hbWVSZXF1aXJlZFZhbGlkYXRpb24gPSAhISgoX3RoaXMkdmFsdWUzID0gdGhpcy52YWx1ZSkgIT09IG51bGwgJiYgX3RoaXMkdmFsdWUzICE9PSB2b2lkIDAgJiYgKF90aGlzJHZhbHVlMyA9IF90aGlzJHZhbHVlMy5fbmFtZSkgIT09IG51bGwgJiYgX3RoaXMkdmFsdWUzICE9PSB2b2lkIDAgJiYgX3RoaXMkdmFsdWUzLmxlbmd0aCk7CiAgICB9LAogICAgY3JlYXRlVmFsaWRhdGlvbkNoYW5nZWQ6IGZ1bmN0aW9uIGNyZWF0ZVZhbGlkYXRpb25DaGFuZ2VkKHBhc3NlZCkgewogICAgICB0aGlzLmNyZWRDdXN0b21Db21wb25lbnRWYWxpZGF0aW9uID0gcGFzc2VkOwogICAgfSwKICAgIHNhdmVDcmVkZW50aWFsOiBmdW5jdGlvbiBzYXZlQ3JlZGVudGlhbChidG5DYikgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgdmFyIF90aGlzMyQkcmVmcyRjbG91ZENvbTsKICAgICAgICB2YXIgcmVzOwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgaWYgKF90aGlzMy5lcnJvcnMpIHsKICAgICAgICAgICAgICAgIGNsZWFyKF90aGlzMy5lcnJvcnMpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAoISh0eXBlb2YgKChfdGhpczMkJHJlZnMkY2xvdWRDb20gPSBfdGhpczMuJHJlZnMuY2xvdWRDb21wb25lbnQpID09PSBudWxsIHx8IF90aGlzMyQkcmVmcyRjbG91ZENvbSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMzJCRyZWZzJGNsb3VkQ29tLnRlc3QpID09PSAnZnVuY3Rpb24nKSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxNzsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDI7CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA1OwogICAgICAgICAgICAgIHJldHVybiBfdGhpczMuJHJlZnMuY2xvdWRDb21wb25lbnQudGVzdCgpOwogICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgaWYgKCEoIXJlcyB8fCByZXMgIT09IG51bGwgJiYgcmVzICE9PSB2b2lkIDAgJiYgcmVzLmVycm9ycykpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKHJlcyAhPT0gbnVsbCAmJiByZXMgIT09IHZvaWQgMCAmJiByZXMuZXJyb3JzKSB7CiAgICAgICAgICAgICAgICBfdGhpczMuZXJyb3JzID0gcmVzLmVycm9yczsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgX3RoaXMzLmVycm9ycyA9IFsnQXV0aGVudGljYXRpb24gdGVzdCBmYWlsZWQsIHBsZWFzZSBjaGVjayB5b3VyIGNyZWRlbnRpYWxzJ107CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGJ0bkNiKGZhbHNlKTsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIik7CiAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxNzsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDEyOwogICAgICAgICAgICAgIF9jb250ZXh0Mi50MCA9IF9jb250ZXh0MlsiY2F0Y2giXSgyKTsKICAgICAgICAgICAgICBfdGhpczMuZXJyb3JzID0gW19jb250ZXh0Mi50MF07CiAgICAgICAgICAgICAgYnRuQ2IoZmFsc2UpOwogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iKTsKICAgICAgICAgICAgY2FzZSAxNzoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgX3RoaXMzLnNhdmUoYnRuQ2IpKTsKICAgICAgICAgICAgY2FzZSAxODoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMiwgbnVsbCwgW1syLCAxMl1dKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgc2VsZWN0VHlwZTogZnVuY3Rpb24gc2VsZWN0VHlwZSh0eXBlKSB7CiAgICAgIHZhciBkcml2ZXI7CiAgICAgIGlmICh0eXBlID09PSBUWVBFUy5DTE9VRF9DUkVERU5USUFMKSB7CiAgICAgICAgLy8gQ2xvbmUgZ29lcyB0aHJvdWdoIGhlcmUKICAgICAgICBkcml2ZXIgPSB0aGlzLmRyaXZlck5hbWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZHJpdmVyID0gdHlwZTsKICAgICAgICB0eXBlID0gVFlQRVMuQ0xPVURfQ1JFREVOVElBTDsKICAgICAgfQogICAgICBpZiAodGhpcy5tb2RlID09PSBfQ1JFQVRFKSB7CiAgICAgICAgdGhpcy52YWx1ZS5zZXRBbm5vdGF0aW9uKENBUEkuQ1JFREVOVElBTF9EUklWRVIsIGRyaXZlcik7CiAgICAgICAgdGhpcy52YWx1ZS5tZXRhZGF0YS5nZW5lcmF0ZU5hbWUgPSAnY2MtJzsKICAgICAgICB0aGlzLnZhbHVlLm1ldGFkYXRhLm5hbWVzcGFjZSA9IERFRkFVTFRfV09SS1NQQUNFOwogICAgICAgIHZhciBmaWVsZCA9IHRoaXMuJHN0b3JlLmdldHRlcnNbJ3BsdWdpbnMvY3JlZGVudGlhbEZpZWxkRm9yRHJpdmVyJ10oZHJpdmVyKTsKICAgICAgICBzZXQodGhpcy52YWx1ZSwgIiIuY29uY2F0KGZpZWxkLCAiY3JlZGVudGlhbENvbmZpZyIpLCB7fSk7CiAgICAgIH0KICAgICAgdGhpcy4kc2V0KHRoaXMudmFsdWUsICdfdHlwZScsIHR5cGUpOwogICAgICB0aGlzLiRlbWl0KCdzZXQtc3VidHlwZScsIHRoaXMudHlwZURpc3BsYXkodHlwZSwgZHJpdmVyKSk7CiAgICB9LAogICAgdHlwZURpc3BsYXk6IGZ1bmN0aW9uIHR5cGVEaXNwbGF5KHR5cGUsIGRyaXZlcikgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuZ2V0dGVyc1snaTE4bi93aXRoRmFsbGJhY2snXSgiY2x1c3Rlci5wcm92aWRlci5cIiIuY29uY2F0KGRyaXZlciwgIlwiIiksIG51bGwsIGRyaXZlcik7CiAgICB9LAogICAgaW5pdGlhbERpc3BsYXlGb3I6IGZ1bmN0aW9uIGluaXRpYWxEaXNwbGF5Rm9yKHR5cGUpIHsKICAgICAgdmFyIGZhbGxiYWNrID0gKHVjRmlyc3QodGhpcy50eXBlRGlzcGxheSh0eXBlKSB8fCAnJykucmVwbGFjZSgvW15BLVpdL2csICcnKSB8fCB0eXBlKS5zdWJzdHIoMCwgMyk7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5nZXR0ZXJzWydpMThuL3dpdGhGYWxsYmFjayddKCJzZWNyZXQuaW5pdGlhbHMuXCIiLmNvbmNhdCh0eXBlLCAiXCIiKSwgbnVsbCwgZmFsbGJhY2spOwogICAgfQogIH0KfTs="},{"version":3,"names":["SECRET_TYPES","TYPES","MANAGEMENT","NORMAN","SCHEMA","DEFAULT_WORKSPACE","CreateEditView","NameNsDescription","CruResource","_CREATE","_EDIT","Loading","Labels","HIDE_SENSITIVE","CAPI","clear","uniq","SelectIconGrid","sortBy","ucFirst","set","mapFeature","RKE2","RKE2_FEATURE","rke1Supports","name","components","mixins","fetch","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_this$value","schema","k","id","wrap","_callee$","_context","prev","next","$store","dispatch","type","NODE_DRIVER","nodeDrivers","sent","KONTAINER_DRIVER","kontainerDrivers","CLOUD_CREDENTIAL","opt","force","url","concat","t0","keys","resourceFields","t1","done","value","endsWith","abrupt","getters","t2","_name","mode","length","nameRequiredValidation","provider","selectType","stop","data","credCustomComponentValidation","computed","rke2Enabled","validationPassed","storeOverride","driverName","_this$value2","cloudComponent","secretSubTypes","_this2","out","drivers","_toConsumableArray","filter","x","spec","active","map","displayName","types","includes","_schema$resourceField","key","subSchemaName","subSchema","fields","Object","push","_iterator","_createForOfIteratorHelper","_step","s","n","bannerImage","bannerAbbrv","require","e","initialDisplayFor","label","typeDisplay","CREDENTIAL_DRIVER","err","f","hideSensitiveData","doneRoute","methods","handleNameRequiredValidation","_this$value3","createValidationChanged","passed","saveCredential","btnCb","_this3","_callee2","_this3$$refs$cloudCom","res","_callee2$","_context2","errors","$refs","test","save","driver","setAnnotation","metadata","generateName","namespace","field","$set","$emit","fallback","replace","substr"],"sources":["node_modules/@rancher/shell/edit/cloudcredential.vue"],"sourcesContent":["<script>\nimport { SECRET_TYPES as TYPES } from '@shell/config/secret';\nimport { MANAGEMENT, NORMAN, SCHEMA, DEFAULT_WORKSPACE } from '@shell/config/types';\nimport CreateEditView from '@shell/mixins/create-edit-view';\nimport NameNsDescription from '@shell/components/form/NameNsDescription';\nimport CruResource from '@shell/components/CruResource';\nimport { _CREATE, _EDIT } from '@shell/config/query-params';\nimport Loading from '@shell/components/Loading';\nimport Labels from '@shell/components/form/Labels';\nimport { HIDE_SENSITIVE } from '@shell/store/prefs';\nimport { CAPI } from '@shell/config/labels-annotations';\nimport { clear, uniq } from '@shell/utils/array';\nimport SelectIconGrid from '@shell/components/SelectIconGrid';\nimport { sortBy } from '@shell/utils/sort';\nimport { ucFirst } from '@shell/utils/string';\nimport { set } from '@shell/utils/object';\nimport { mapFeature, RKE2 as RKE2_FEATURE } from '@shell/store/features';\nimport { rke1Supports } from '@shell/store/plugins';\n\nexport default {\n  name: 'CruCloudCredential',\n\n  components: {\n    Loading,\n    NameNsDescription,\n    CruResource,\n    Labels,\n    SelectIconGrid\n  },\n\n  mixins: [CreateEditView],\n\n  async fetch() {\n    this.nodeDrivers = await this.$store.dispatch('management/findAll', { type: MANAGEMENT.NODE_DRIVER });\n    this.kontainerDrivers = await this.$store.dispatch('management/findAll', { type: MANAGEMENT.KONTAINER_DRIVER });\n\n    // Force reload the cloud cred schema and any missing subtypes because there aren't change events sent when drivers come/go\n    try {\n      const schema = await this.$store.dispatch('rancher/find', {\n        type: SCHEMA,\n        id:   NORMAN.CLOUD_CREDENTIAL,\n        opt:  {\n          force: true,\n          url:   `schemas/${ NORMAN.CLOUD_CREDENTIAL }`,\n        },\n      });\n\n      for ( const k in schema.resourceFields ) {\n        if ( !k.endsWith('Config') ) {\n          continue;\n        }\n\n        const id = schema.resourceFields[k].type;\n\n        if ( !this.$store.getters['rancher/schemaFor'](id) ) {\n          await this.$store.dispatch('rancher/find', {\n            type: SCHEMA,\n            id,\n            opt:  {\n              force: true,\n              url:   `schemas/${ id }`,\n            },\n          });\n        }\n      }\n    } catch (e) {\n    }\n\n    if ( !this.value._name ) {\n      set(this.value, '_name', '');\n    }\n\n    if (this.mode === _EDIT && this.value?.name?.length) {\n      this.value._name = this.value.name;\n      this.nameRequiredValidation = true;\n    }\n\n    if ( this.value.provider ) {\n      this.selectType(this.value.provider);\n    }\n  },\n\n  data() {\n    return {\n      credCustomComponentValidation: false,\n      nameRequiredValidation:        false,\n      nodeDrivers:                   null,\n      kontainerDrivers:              null\n    };\n  },\n\n  computed: {\n    rke2Enabled: mapFeature(RKE2_FEATURE),\n\n    validationPassed() {\n      return this.credCustomComponentValidation && this.nameRequiredValidation;\n    },\n\n    storeOverride() {\n      return 'rancher';\n    },\n\n    driverName() {\n      return this.value?.provider;\n    },\n\n    cloudComponent() {\n      if (this.$store.getters['type-map/hasCustomCloudCredentialComponent'](this.driverName)) {\n        return this.$store.getters['type-map/importCloudCredential'](this.driverName);\n      }\n\n      return this.$store.getters['type-map/importCloudCredential']('generic');\n    },\n\n    // array of id, label, description, initials for type selection step\n    secretSubTypes() {\n      const out = [];\n\n      const drivers = [...this.nodeDrivers, ...this.kontainerDrivers]\n        .filter((x) => x.spec.active && x.id !== 'rancherkubernetesengine')\n        .map((x) => x.spec.displayName || x.id);\n\n      let types = uniq(drivers.map((x) => this.$store.getters['plugins/credentialDriverFor'](x)));\n\n      if ( !this.rke2Enabled ) {\n        types = types.filter((x) => rke1Supports.includes(x));\n      }\n\n      const schema = this.$store.getters['rancher/schemaFor'](NORMAN.CLOUD_CREDENTIAL);\n\n      types = types.filter((name) => {\n        const key = this.$store.getters['plugins/credentialFieldForDriver'](name);\n        const subSchemaName = schema.resourceFields[`${ key }credentialConfig`]?.type;\n\n        if ( !subSchemaName ) {\n          return;\n        }\n\n        const subSchema = this.$store.getters['rancher/schemaFor'](subSchemaName);\n\n        if ( !subSchema ) {\n          return false;\n        }\n\n        const fields = subSchema.resourceFields;\n\n        return fields && Object.keys(fields).length > 0;\n      });\n\n      if ( schema.resourceFields['s3credentialConfig'] ) {\n        types.push('s3');\n      }\n\n      for ( const id of types ) {\n        let bannerImage, bannerAbbrv;\n\n        try {\n          bannerImage = require(`~shell/assets/images/providers/${ id }.svg`);\n        } catch (e) {\n          bannerImage = null;\n          bannerAbbrv = this.initialDisplayFor(id);\n        }\n\n        out.push({\n          id,\n          label: this.typeDisplay(CAPI.CREDENTIAL_DRIVER, id),\n          bannerImage,\n          bannerAbbrv\n        });\n      }\n\n      return sortBy(out, 'label');\n    },\n\n    hideSensitiveData() {\n      return this.$store.getters['prefs/get'](HIDE_SENSITIVE);\n    },\n\n    doneRoute() {\n      return 'c-cluster-manager-cloudCredential';\n    },\n  },\n\n  methods: {\n    handleNameRequiredValidation() {\n      this.nameRequiredValidation = !!this.value?._name?.length;\n    },\n\n    createValidationChanged(passed) {\n      this.credCustomComponentValidation = passed;\n    },\n\n    async saveCredential(btnCb) {\n      if ( this.errors ) {\n        clear(this.errors);\n      }\n\n      if ( typeof this.$refs.cloudComponent?.test === 'function' ) {\n        try {\n          const res = await this.$refs.cloudComponent.test();\n\n          if ( !res || res?.errors) {\n            if (res?.errors) {\n              this.errors = res.errors;\n            } else {\n              this.errors = ['Authentication test failed, please check your credentials'];\n            }\n            btnCb(false);\n\n            return;\n          }\n        } catch (e) {\n          this.errors = [e];\n          btnCb(false);\n\n          return;\n        }\n      }\n\n      return this.save(btnCb);\n    },\n\n    selectType(type) {\n      let driver;\n\n      if ( type === TYPES.CLOUD_CREDENTIAL ) {\n        // Clone goes through here\n        driver = this.driverName;\n      } else {\n        driver = type;\n        type = TYPES.CLOUD_CREDENTIAL;\n      }\n\n      if ( this.mode === _CREATE ) {\n        this.value.setAnnotation(CAPI.CREDENTIAL_DRIVER, driver);\n        this.value.metadata.generateName = 'cc-';\n        this.value.metadata.namespace = DEFAULT_WORKSPACE;\n\n        const field = this.$store.getters['plugins/credentialFieldForDriver'](driver);\n\n        set(this.value, `${ field }credentialConfig`, {});\n      }\n\n      this.$set(this.value, '_type', type);\n      this.$emit('set-subtype', this.typeDisplay(type, driver));\n    },\n\n    typeDisplay(type, driver) {\n      return this.$store.getters['i18n/withFallback'](`cluster.provider.\"${ driver }\"`, null, driver);\n    },\n\n    initialDisplayFor(type) {\n      const fallback = (ucFirst(this.typeDisplay(type) || '').replace(/[^A-Z]/g, '') || type).substr(0, 3);\n\n      return this.$store.getters['i18n/withFallback'](`secret.initials.\"${ type }\"`, null, fallback);\n    },\n  },\n};\n</script>\n\n<template>\n  <form class=\"filled-height\">\n    <Loading v-if=\"$fetchState.pending\" />\n    <CruResource\n      v-else\n      :mode=\"mode\"\n      :validation-passed=\"validationPassed\"\n      :selected-subtype=\"value._type\"\n      :resource=\"value\"\n      :errors=\"errors\"\n      :done-route=\"doneRoute\"\n      :subtypes=\"secretSubTypes\"\n      :can-yaml=\"false\"\n      @finish=\"saveCredential\"\n      @select-type=\"selectType\"\n      @error=\"e=>errors = e\"\n    >\n      <NameNsDescription\n        v-model=\"value\"\n        :name-editable=\"true\"\n        name-key=\"_name\"\n        description-key=\"description\"\n        name-label=\"cluster.credential.name.label\"\n        name-placeholder=\"cluster.credential.name.placeholder\"\n        :mode=\"mode\"\n        :namespaced=\"false\"\n        @change=\"handleNameRequiredValidation\"\n      />\n      <keep-alive>\n        <component\n          :is=\"cloudComponent\"\n          ref=\"cloudComponent\"\n          :driver-name=\"driverName\"\n          :value=\"value\"\n          :mode=\"mode\"\n          :hide-sensitive-data=\"hideSensitiveData\"\n          @validationChanged=\"createValidationChanged\"\n        />\n      </keep-alive>\n    </CruResource>\n  </form>\n</template>\n\n<style lang='scss'>\n</style>\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,SAAAA,YAAA,IAAAC,KAAA;AACA,SAAAC,UAAA,EAAAC,MAAA,EAAAC,MAAA,EAAAC,iBAAA;AACA,OAAAC,cAAA;AACA,OAAAC,iBAAA;AACA,OAAAC,WAAA;AACA,SAAAC,OAAA,EAAAC,KAAA;AACA,OAAAC,OAAA;AACA,OAAAC,MAAA;AACA,SAAAC,cAAA;AACA,SAAAC,IAAA;AACA,SAAAC,KAAA,EAAAC,IAAA;AACA,OAAAC,cAAA;AACA,SAAAC,MAAA;AACA,SAAAC,OAAA;AACA,SAAAC,GAAA;AACA,SAAAC,UAAA,EAAAC,IAAA,IAAAC,YAAA;AACA,SAAAC,YAAA;AAEA;EACAC,IAAA;EAEAC,UAAA;IACAf,OAAA,EAAAA,OAAA;IACAJ,iBAAA,EAAAA,iBAAA;IACAC,WAAA,EAAAA,WAAA;IACAI,MAAA,EAAAA,MAAA;IACAK,cAAA,EAAAA;EACA;EAEAU,MAAA,GAAArB,cAAA;EAEAsB,KAAA,WAAAA,MAAA;IAAA,IAAAC,KAAA;IAAA,OAAAC,iBAAA,cAAAC,mBAAA,CAAAC,IAAA,UAAAC,QAAA;MAAA,IAAAC,WAAA;MAAA,IAAAC,MAAA,EAAAC,CAAA,EAAAC,EAAA;MAAA,OAAAN,mBAAA,CAAAO,IAAA,UAAAC,SAAAC,QAAA;QAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;UAAA;YAAAF,QAAA,CAAAE,IAAA;YAAA,OACAb,KAAA,CAAAc,MAAA,CAAAC,QAAA;cAAAC,IAAA,EAAA3C,UAAA,CAAA4C;YAAA;UAAA;YAAAjB,KAAA,CAAAkB,WAAA,GAAAP,QAAA,CAAAQ,IAAA;YAAAR,QAAA,CAAAE,IAAA;YAAA,OACAb,KAAA,CAAAc,MAAA,CAAAC,QAAA;cAAAC,IAAA,EAAA3C,UAAA,CAAA+C;YAAA;UAAA;YAAApB,KAAA,CAAAqB,gBAAA,GAAAV,QAAA,CAAAQ,IAAA;YAAAR,QAAA,CAAAC,IAAA;YAAAD,QAAA,CAAAE,IAAA;YAAA,OAIAb,KAAA,CAAAc,MAAA,CAAAC,QAAA;cACAC,IAAA,EAAAzC,MAAA;cACAiC,EAAA,EAAAlC,MAAA,CAAAgD,gBAAA;cACAC,GAAA;gBACAC,KAAA;gBACAC,GAAA,aAAAC,MAAA,CAAApD,MAAA,CAAAgD,gBAAA;cACA;YACA;UAAA;YAPAhB,MAAA,GAAAK,QAAA,CAAAQ,IAAA;YAAAR,QAAA,CAAAgB,EAAA,GAAAzB,mBAAA,CAAA0B,IAAA,CASAtB,MAAA,CAAAuB,cAAA;UAAA;YAAA,KAAAlB,QAAA,CAAAmB,EAAA,GAAAnB,QAAA,CAAAgB,EAAA,IAAAI,IAAA;cAAApB,QAAA,CAAAE,IAAA;cAAA;YAAA;YAAAN,CAAA,GAAAI,QAAA,CAAAmB,EAAA,CAAAE,KAAA;YAAA,IACAzB,CAAA,CAAA0B,QAAA;cAAAtB,QAAA,CAAAE,IAAA;cAAA;YAAA;YAAA,OAAAF,QAAA,CAAAuB,MAAA;UAAA;YAIA1B,EAAA,GAAAF,MAAA,CAAAuB,cAAA,CAAAtB,CAAA,EAAAS,IAAA;YAAA,IAEAhB,KAAA,CAAAc,MAAA,CAAAqB,OAAA,sBAAA3B,EAAA;cAAAG,QAAA,CAAAE,IAAA;cAAA;YAAA;YAAAF,QAAA,CAAAE,IAAA;YAAA,OACAb,KAAA,CAAAc,MAAA,CAAAC,QAAA;cACAC,IAAA,EAAAzC,MAAA;cACAiC,EAAA,EAAAA,EAAA;cACAe,GAAA;gBACAC,KAAA;gBACAC,GAAA,aAAAC,MAAA,CAAAlB,EAAA;cACA;YACA;UAAA;YAAAG,QAAA,CAAAE,IAAA;YAAA;UAAA;YAAAF,QAAA,CAAAE,IAAA;YAAA;UAAA;YAAAF,QAAA,CAAAC,IAAA;YAAAD,QAAA,CAAAyB,EAAA,GAAAzB,QAAA;UAAA;YAMA,KAAAX,KAAA,CAAAgC,KAAA,CAAAK,KAAA;cACA9C,GAAA,CAAAS,KAAA,CAAAgC,KAAA;YACA;YAEA,IAAAhC,KAAA,CAAAsC,IAAA,KAAAzD,KAAA,KAAAwB,WAAA,GAAAL,KAAA,CAAAgC,KAAA,cAAA3B,WAAA,gBAAAA,WAAA,GAAAA,WAAA,CAAAT,IAAA,cAAAS,WAAA,eAAAA,WAAA,CAAAkC,MAAA;cACAvC,KAAA,CAAAgC,KAAA,CAAAK,KAAA,GAAArC,KAAA,CAAAgC,KAAA,CAAApC,IAAA;cACAI,KAAA,CAAAwC,sBAAA;YACA;YAEA,IAAAxC,KAAA,CAAAgC,KAAA,CAAAS,QAAA;cACAzC,KAAA,CAAA0C,UAAA,CAAA1C,KAAA,CAAAgC,KAAA,CAAAS,QAAA;YACA;UAAA;UAAA;YAAA,OAAA9B,QAAA,CAAAgC,IAAA;QAAA;MAAA,GAAAvC,OAAA;IAAA;EACA;EAEAwC,IAAA,WAAAA,KAAA;IACA;MACAC,6BAAA;MACAL,sBAAA;MACAtB,WAAA;MACAG,gBAAA;IACA;EACA;EAEAyB,QAAA;IACAC,WAAA,EAAAvD,UAAA,CAAAE,YAAA;IAEAsD,gBAAA,WAAAA,iBAAA;MACA,YAAAH,6BAAA,SAAAL,sBAAA;IACA;IAEAS,aAAA,WAAAA,cAAA;MACA;IACA;IAEAC,UAAA,WAAAA,WAAA;MAAA,IAAAC,YAAA;MACA,QAAAA,YAAA,QAAAnB,KAAA,cAAAmB,YAAA,uBAAAA,YAAA,CAAAV,QAAA;IACA;IAEAW,cAAA,WAAAA,eAAA;MACA,SAAAtC,MAAA,CAAAqB,OAAA,oDAAAe,UAAA;QACA,YAAApC,MAAA,CAAAqB,OAAA,wCAAAe,UAAA;MACA;MAEA,YAAApC,MAAA,CAAAqB,OAAA;IACA;IAEA;IACAkB,cAAA,WAAAA,eAAA;MAAA,IAAAC,MAAA;MACA,IAAAC,GAAA;MAEA,IAAAC,OAAA,MAAA9B,MAAA,CAAA+B,kBAAA,MAAAvC,WAAA,GAAAuC,kBAAA,MAAApC,gBAAA,GACAqC,MAAA,WAAAC,CAAA;QAAA,OAAAA,CAAA,CAAAC,IAAA,CAAAC,MAAA,IAAAF,CAAA,CAAAnD,EAAA;MAAA,GACAsD,GAAA,WAAAH,CAAA;QAAA,OAAAA,CAAA,CAAAC,IAAA,CAAAG,WAAA,IAAAJ,CAAA,CAAAnD,EAAA;MAAA;MAEA,IAAAwD,KAAA,GAAA7E,IAAA,CAAAqE,OAAA,CAAAM,GAAA,WAAAH,CAAA;QAAA,OAAAL,MAAA,CAAAxC,MAAA,CAAAqB,OAAA,gCAAAwB,CAAA;MAAA;MAEA,UAAAZ,WAAA;QACAiB,KAAA,GAAAA,KAAA,CAAAN,MAAA,WAAAC,CAAA;UAAA,OAAAhE,YAAA,CAAAsE,QAAA,CAAAN,CAAA;QAAA;MACA;MAEA,IAAArD,MAAA,QAAAQ,MAAA,CAAAqB,OAAA,sBAAA7D,MAAA,CAAAgD,gBAAA;MAEA0C,KAAA,GAAAA,KAAA,CAAAN,MAAA,WAAA9D,IAAA;QAAA,IAAAsE,qBAAA;QACA,IAAAC,GAAA,GAAAb,MAAA,CAAAxC,MAAA,CAAAqB,OAAA,qCAAAvC,IAAA;QACA,IAAAwE,aAAA,IAAAF,qBAAA,GAAA5D,MAAA,CAAAuB,cAAA,IAAAH,MAAA,CAAAyC,GAAA,oCAAAD,qBAAA,uBAAAA,qBAAA,CAAAlD,IAAA;QAEA,KAAAoD,aAAA;UACA;QACA;QAEA,IAAAC,SAAA,GAAAf,MAAA,CAAAxC,MAAA,CAAAqB,OAAA,sBAAAiC,aAAA;QAEA,KAAAC,SAAA;UACA;QACA;QAEA,IAAAC,MAAA,GAAAD,SAAA,CAAAxC,cAAA;QAEA,OAAAyC,MAAA,IAAAC,MAAA,CAAA3C,IAAA,CAAA0C,MAAA,EAAA/B,MAAA;MACA;MAEA,IAAAjC,MAAA,CAAAuB,cAAA;QACAmC,KAAA,CAAAQ,IAAA;MACA;MAAA,IAAAC,SAAA,GAAAC,0BAAA,CAEAV,KAAA;QAAAW,KAAA;MAAA;QAAA,KAAAF,SAAA,CAAAG,CAAA,MAAAD,KAAA,GAAAF,SAAA,CAAAI,CAAA,IAAA9C,IAAA;UAAA,IAAAvB,EAAA,GAAAmE,KAAA,CAAA3C,KAAA;UACA,IAAA8C,WAAA;YAAAC,WAAA;UAEA;YACAD,WAAA,GAAAE,OAAA,mCAAAtD,MAAA,CAAAlB,EAAA;UACA,SAAAyE,CAAA;YACAH,WAAA;YACAC,WAAA,QAAAG,iBAAA,CAAA1E,EAAA;UACA;UAEA+C,GAAA,CAAAiB,IAAA;YACAhE,EAAA,EAAAA,EAAA;YACA2E,KAAA,OAAAC,WAAA,CAAAnG,IAAA,CAAAoG,iBAAA,EAAA7E,EAAA;YACAsE,WAAA,EAAAA,WAAA;YACAC,WAAA,EAAAA;UACA;QACA;MAAA,SAAAO,GAAA;QAAAb,SAAA,CAAAQ,CAAA,CAAAK,GAAA;MAAA;QAAAb,SAAA,CAAAc,CAAA;MAAA;MAEA,OAAAlG,MAAA,CAAAkE,GAAA;IACA;IAEAiC,iBAAA,WAAAA,kBAAA;MACA,YAAA1E,MAAA,CAAAqB,OAAA,cAAAnD,cAAA;IACA;IAEAyG,SAAA,WAAAA,UAAA;MACA;IACA;EACA;EAEAC,OAAA;IACAC,4BAAA,WAAAA,6BAAA;MAAA,IAAAC,YAAA;MACA,KAAApD,sBAAA,OAAAoD,YAAA,QAAA5D,KAAA,cAAA4D,YAAA,gBAAAA,YAAA,GAAAA,YAAA,CAAAvD,KAAA,cAAAuD,YAAA,eAAAA,YAAA,CAAArD,MAAA;IACA;IAEAsD,uBAAA,WAAAA,wBAAAC,MAAA;MACA,KAAAjD,6BAAA,GAAAiD,MAAA;IACA;IAEAC,cAAA,WAAAA,eAAAC,KAAA;MAAA,IAAAC,MAAA;MAAA,OAAAhG,iBAAA,cAAAC,mBAAA,CAAAC,IAAA,UAAA+F,SAAA;QAAA,IAAAC,qBAAA;QAAA,IAAAC,GAAA;QAAA,OAAAlG,mBAAA,CAAAO,IAAA,UAAA4F,UAAAC,SAAA;UAAA,kBAAAA,SAAA,CAAA1F,IAAA,GAAA0F,SAAA,CAAAzF,IAAA;YAAA;cACA,IAAAoF,MAAA,CAAAM,MAAA;gBACArH,KAAA,CAAA+G,MAAA,CAAAM,MAAA;cACA;cAAA,MAEA,SAAAJ,qBAAA,GAAAF,MAAA,CAAAO,KAAA,CAAApD,cAAA,cAAA+C,qBAAA,uBAAAA,qBAAA,CAAAM,IAAA;gBAAAH,SAAA,CAAAzF,IAAA;gBAAA;cAAA;cAAAyF,SAAA,CAAA1F,IAAA;cAAA0F,SAAA,CAAAzF,IAAA;cAAA,OAEAoF,MAAA,CAAAO,KAAA,CAAApD,cAAA,CAAAqD,IAAA;YAAA;cAAAL,GAAA,GAAAE,SAAA,CAAAnF,IAAA;cAAA,MAEA,CAAAiF,GAAA,IAAAA,GAAA,aAAAA,GAAA,eAAAA,GAAA,CAAAG,MAAA;gBAAAD,SAAA,CAAAzF,IAAA;gBAAA;cAAA;cACA,IAAAuF,GAAA,aAAAA,GAAA,eAAAA,GAAA,CAAAG,MAAA;gBACAN,MAAA,CAAAM,MAAA,GAAAH,GAAA,CAAAG,MAAA;cACA;gBACAN,MAAA,CAAAM,MAAA;cACA;cACAP,KAAA;cAAA,OAAAM,SAAA,CAAApE,MAAA;YAAA;cAAAoE,SAAA,CAAAzF,IAAA;cAAA;YAAA;cAAAyF,SAAA,CAAA1F,IAAA;cAAA0F,SAAA,CAAA3E,EAAA,GAAA2E,SAAA;cAKAL,MAAA,CAAAM,MAAA,IAAAD,SAAA,CAAA3E,EAAA;cACAqE,KAAA;cAAA,OAAAM,SAAA,CAAApE,MAAA;YAAA;cAAA,OAAAoE,SAAA,CAAApE,MAAA,WAMA+D,MAAA,CAAAS,IAAA,CAAAV,KAAA;YAAA;YAAA;cAAA,OAAAM,SAAA,CAAA3D,IAAA;UAAA;QAAA,GAAAuD,QAAA;MAAA;IACA;IAEAxD,UAAA,WAAAA,WAAA1B,IAAA;MACA,IAAA2F,MAAA;MAEA,IAAA3F,IAAA,KAAA5C,KAAA,CAAAkD,gBAAA;QACA;QACAqF,MAAA,QAAAzD,UAAA;MACA;QACAyD,MAAA,GAAA3F,IAAA;QACAA,IAAA,GAAA5C,KAAA,CAAAkD,gBAAA;MACA;MAEA,SAAAgB,IAAA,KAAA1D,OAAA;QACA,KAAAoD,KAAA,CAAA4E,aAAA,CAAA3H,IAAA,CAAAoG,iBAAA,EAAAsB,MAAA;QACA,KAAA3E,KAAA,CAAA6E,QAAA,CAAAC,YAAA;QACA,KAAA9E,KAAA,CAAA6E,QAAA,CAAAE,SAAA,GAAAvI,iBAAA;QAEA,IAAAwI,KAAA,QAAAlG,MAAA,CAAAqB,OAAA,qCAAAwE,MAAA;QAEApH,GAAA,MAAAyC,KAAA,KAAAN,MAAA,CAAAsF,KAAA;MACA;MAEA,KAAAC,IAAA,MAAAjF,KAAA,WAAAhB,IAAA;MACA,KAAAkG,KAAA,qBAAA9B,WAAA,CAAApE,IAAA,EAAA2F,MAAA;IACA;IAEAvB,WAAA,WAAAA,YAAApE,IAAA,EAAA2F,MAAA;MACA,YAAA7F,MAAA,CAAAqB,OAAA,4CAAAT,MAAA,CAAAiF,MAAA,eAAAA,MAAA;IACA;IAEAzB,iBAAA,WAAAA,kBAAAlE,IAAA;MACA,IAAAmG,QAAA,IAAA7H,OAAA,MAAA8F,WAAA,CAAApE,IAAA,SAAAoG,OAAA,mBAAApG,IAAA,EAAAqG,MAAA;MAEA,YAAAvG,MAAA,CAAAqB,OAAA,2CAAAT,MAAA,CAAAV,IAAA,eAAAmG,QAAA;IACA;EACA;AACA","ignoreList":[]}]}