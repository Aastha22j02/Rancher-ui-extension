{"remainingRequest":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js??ref--16-1!/home/ubuntu/suseconf/node_modules/@rancher/shell/models/service.js","dependencies":[{"path":"/home/ubuntu/suseconf/node_modules/@rancher/shell/models/service.js","mtime":1725338146566},{"path":"/home/ubuntu/suseconf/babel.config.js","mtime":1725343995893},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js","mtime":1725271298942}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVmbGVjdC5jb25zdHJ1Y3QuanMiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2siOwppbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzIjsKaW1wb3J0IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4iOwppbXBvcnQgX2dldFByb3RvdHlwZU9mIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2dldFByb3RvdHlwZU9mIjsKaW1wb3J0IF9pbmhlcml0cyBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9pbmhlcml0cyI7CmltcG9ydCBfcmVnZW5lcmF0b3JSdW50aW1lIGZyb20gIi9ob21lL3VidW50dS9zdXNlY29uZi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvcmVnZW5lcmF0b3IvaW5kZXguanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmpvaW4uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZS5qcyI7CmZ1bmN0aW9uIF9jYWxsU3VwZXIodCwgbywgZSkgeyByZXR1cm4gbyA9IF9nZXRQcm90b3R5cGVPZihvKSwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odCwgX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpID8gUmVmbGVjdC5jb25zdHJ1Y3QobywgZSB8fCBbXSwgX2dldFByb3RvdHlwZU9mKHQpLmNvbnN0cnVjdG9yKSA6IG8uYXBwbHkodCwgZSkpOyB9CmZ1bmN0aW9uIF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKSB7IHRyeSB7IHZhciB0ID0gIUJvb2xlYW4ucHJvdG90eXBlLnZhbHVlT2YuY2FsbChSZWZsZWN0LmNvbnN0cnVjdChCb29sZWFuLCBbXSwgZnVuY3Rpb24gKCkge30pKTsgfSBjYXRjaCAodCkge30gcmV0dXJuIChfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0ID0gZnVuY3Rpb24gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpIHsgcmV0dXJuICEhdDsgfSkoKTsgfQppbXBvcnQgZmluZCBmcm9tICdsb2Rhc2gvZmluZCc7CmltcG9ydCB7IFBPRCB9IGZyb20gJ0BzaGVsbC9jb25maWcvdHlwZXMnOwppbXBvcnQgU3RldmVNb2RlbCBmcm9tICdAc2hlbGwvcGx1Z2lucy9zdGV2ZS9zdGV2ZS1jbGFzcyc7CgovLyBpMThuLXVzZXMgc2VydmljZXNQYWdlLnNlcnZpY2VUeXBlcy5jbHVzdGVySXAuKiwgc2VydmljZXNQYWdlLnNlcnZpY2VUeXBlcy5leHRlcm5hbE5hbWUuKiwgc2VydmljZXNQYWdlLnNlcnZpY2VUeXBlcy5oZWFkbGVzcy4qCi8vIGkxOG4tdXNlcyBzZXJ2aWNlc1BhZ2Uuc2VydmljZVR5cGVzLmxvYWRCYWxhbmNlci4qLCBzZXJ2aWNlc1BhZ2Uuc2VydmljZVR5cGVzLm5vZGVQb3J0LioKZXhwb3J0IHZhciBERUZBVUxUX1NFUlZJQ0VfVFlQRVMgPSBbewogIGlkOiAnQ2x1c3RlcklQJywKICBsYWJlbDogJ3NlcnZpY2VzUGFnZS5zZXJ2aWNlVHlwZXMuY2x1c3RlcklwLmxhYmVsJywKICBkZXNjcmlwdGlvbjogJ3NlcnZpY2VzUGFnZS5zZXJ2aWNlVHlwZXMuY2x1c3RlcklwLmRlc2NyaXB0aW9uJywKICBiYW5uZXJBYmJydjogJ3NlcnZpY2VzUGFnZS5zZXJ2aWNlVHlwZXMuY2x1c3RlcklwLmFiYnJ2Jwp9LCB7CiAgaWQ6ICdFeHRlcm5hbE5hbWUnLAogIGxhYmVsOiAnc2VydmljZXNQYWdlLnNlcnZpY2VUeXBlcy5leHRlcm5hbE5hbWUubGFiZWwnLAogIGRlc2NyaXB0aW9uOiAnc2VydmljZXNQYWdlLnNlcnZpY2VUeXBlcy5leHRlcm5hbE5hbWUuZGVzY3JpcHRpb24nLAogIGJhbm5lckFiYnJ2OiAnc2VydmljZXNQYWdlLnNlcnZpY2VUeXBlcy5leHRlcm5hbE5hbWUuYWJicnYnCn0sIHsKICBpZDogJ0hlYWRsZXNzJywKICBsYWJlbDogJ3NlcnZpY2VzUGFnZS5zZXJ2aWNlVHlwZXMuaGVhZGxlc3MubGFiZWwnLAogIGRlc2NyaXB0aW9uOiAnc2VydmljZXNQYWdlLnNlcnZpY2VUeXBlcy5oZWFkbGVzcy5kZXNjcmlwdGlvbicsCiAgYmFubmVyQWJicnY6ICdzZXJ2aWNlc1BhZ2Uuc2VydmljZVR5cGVzLmhlYWRsZXNzLmFiYnJ2Jwp9LCB7CiAgaWQ6ICdMb2FkQmFsYW5jZXInLAogIGxhYmVsOiAnc2VydmljZXNQYWdlLnNlcnZpY2VUeXBlcy5sb2FkQmFsYW5jZXIubGFiZWwnLAogIGRlc2NyaXB0aW9uOiAnc2VydmljZXNQYWdlLnNlcnZpY2VUeXBlcy5sb2FkQmFsYW5jZXIuZGVzY3JpcHRpb24nLAogIGJhbm5lckFiYnJ2OiAnc2VydmljZXNQYWdlLnNlcnZpY2VUeXBlcy5sb2FkQmFsYW5jZXIuYWJicnYnCn0sIHsKICBpZDogJ05vZGVQb3J0JywKICBsYWJlbDogJ3NlcnZpY2VzUGFnZS5zZXJ2aWNlVHlwZXMubm9kZVBvcnQubGFiZWwnLAogIGRlc2NyaXB0aW9uOiAnc2VydmljZXNQYWdlLnNlcnZpY2VUeXBlcy5ub2RlUG9ydC5kZXNjcmlwdGlvbicsCiAgYmFubmVyQWJicnY6ICdzZXJ2aWNlc1BhZ2Uuc2VydmljZVR5cGVzLm5vZGVQb3J0LmFiYnJ2Jwp9XTsKZXhwb3J0IHZhciBIRUFETEVTUyA9IGZ1bmN0aW9uICgpIHsKICB2YXIgaGVhZGxlc3MgPSBmaW5kKERFRkFVTFRfU0VSVklDRV9UWVBFUywgWydpZCcsICdIZWFkbGVzcyddKTsKICByZXR1cm4gaGVhZGxlc3MuaWQ7Cn0oKTsKZXhwb3J0IHZhciBDTFVTVEVSSVAgPSBmdW5jdGlvbiAoKSB7CiAgdmFyIGNsdXN0ZXJJcCA9IGZpbmQoREVGQVVMVF9TRVJWSUNFX1RZUEVTLCBbJ2lkJywgJ0NsdXN0ZXJJUCddKTsKICByZXR1cm4gY2x1c3RlcklwLmlkOwp9KCk7CnZhciBfZGVmYXVsdCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX1N0ZXZlTW9kZWwpIHsKICBmdW5jdGlvbiBfZGVmYXVsdCgpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBfZGVmYXVsdCk7CiAgICByZXR1cm4gX2NhbGxTdXBlcih0aGlzLCBfZGVmYXVsdCwgYXJndW1lbnRzKTsKICB9CiAgX2luaGVyaXRzKF9kZWZhdWx0LCBfU3RldmVNb2RlbCk7CiAgcmV0dXJuIF9jcmVhdGVDbGFzcyhfZGVmYXVsdCwgW3sKICAgIGtleTogImN1c3RvbVZhbGlkYXRpb25SdWxlcyIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIFt7CiAgICAgICAgbnVsbGFibGU6IGZhbHNlLAogICAgICAgIHBhdGg6ICdtZXRhZGF0YS5uYW1lJywKICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICB0cmFuc2xhdGlvbktleTogJ2dlbmVyaWMubmFtZScsCiAgICAgICAgdHlwZTogJ2Ruc0xhYmVsJwogICAgICB9LCB7CiAgICAgICAgbnVsbGFibGU6IGZhbHNlLAogICAgICAgIHBhdGg6ICdzcGVjJywKICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICB0eXBlOiAnYXJyYXknLAogICAgICAgIHZhbGlkYXRvcnM6IFsnc2VydmljZVBvcnQnXQogICAgICB9LCB7CiAgICAgICAgbnVsbGFibGU6IHRydWUsCiAgICAgICAgcGF0aDogJ3NwZWMnLAogICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgIHR5cGU6ICdzdHJpbmcnLAogICAgICAgIHZhbGlkYXRvcnM6IFsnY2x1c3RlcklwJ10KICAgICAgfSwgewogICAgICAgIG51bGxhYmxlOiB0cnVlLAogICAgICAgIHBhdGg6ICdzcGVjJywKICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICB0eXBlOiAnYXJyYXknLAogICAgICAgIHZhbGlkYXRvcnM6IFsnZXh0ZXJuYWxOYW1lJ10KICAgICAgfV07CiAgICB9CiAgfSwgewogICAga2V5OiAiZGV0YWlscyIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgdmFyIF90aGlzJHNlcnZpY2VUeXBlOwogICAgICB2YXIgb3V0ID0gW3sKICAgICAgICBsYWJlbDogdGhpcy50KCdnZW5lcmljLnR5cGUnKSwKICAgICAgICBjb250ZW50OiAoKF90aGlzJHNlcnZpY2VUeXBlID0gdGhpcy5zZXJ2aWNlVHlwZSkgPT09IG51bGwgfHwgX3RoaXMkc2VydmljZVR5cGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJHNlcnZpY2VUeXBlLmlkKSB8fCB0aGlzLnNlcnZpY2VUeXBlCiAgICAgIH1dOwogICAgICB2YXIgX3RoaXMkc3BlYyA9IHRoaXMuc3BlYywKICAgICAgICBjbHVzdGVySVAgPSBfdGhpcyRzcGVjLmNsdXN0ZXJJUCwKICAgICAgICBleHRlcm5hbE5hbWUgPSBfdGhpcyRzcGVjLmV4dGVybmFsTmFtZSwKICAgICAgICBzZXNzaW9uQWZmaW5pdHkgPSBfdGhpcyRzcGVjLnNlc3Npb25BZmZpbml0eSwKICAgICAgICBsb2FkQmFsYW5jZXJJUCA9IF90aGlzJHNwZWMubG9hZEJhbGFuY2VySVA7CiAgICAgIGlmIChjbHVzdGVySVApIHsKICAgICAgICBvdXQucHVzaCh7CiAgICAgICAgICBsYWJlbDogdGhpcy50KCdzZXJ2aWNlc1BhZ2Uuc2VydmljZVR5cGVzLmNsdXN0ZXJJcC5sYWJlbCcpLAogICAgICAgICAgY29udGVudDogY2x1c3RlcklQCiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgaWYgKHRoaXMuc2VydmljZVR5cGUgPT09ICdMb2FkQmFsYW5jZXInKSB7CiAgICAgICAgdmFyIF90aGlzJHN0YXR1cyRsb2FkQmFsYTsKICAgICAgICB2YXIgc3RhdHVzSXBzID0gKF90aGlzJHN0YXR1cyRsb2FkQmFsYSA9IHRoaXMuc3RhdHVzLmxvYWRCYWxhbmNlcikgPT09IG51bGwgfHwgX3RoaXMkc3RhdHVzJGxvYWRCYWxhID09PSB2b2lkIDAgfHwgKF90aGlzJHN0YXR1cyRsb2FkQmFsYSA9IF90aGlzJHN0YXR1cyRsb2FkQmFsYS5pbmdyZXNzKSA9PT0gbnVsbCB8fCBfdGhpcyRzdGF0dXMkbG9hZEJhbGEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJHN0YXR1cyRsb2FkQmFsYS5tYXAoZnVuY3Rpb24gKGluZ3Jlc3MpIHsKICAgICAgICAgIHJldHVybiBpbmdyZXNzLmhvc3RuYW1lIHx8IGluZ3Jlc3MuaXA7CiAgICAgICAgfSkuam9pbignLCAnKTsKICAgICAgICB2YXIgbG9hZGJhbGFuY2VySW5mbyA9IGxvYWRCYWxhbmNlcklQIHx8IHN0YXR1c0lwcyB8fCAnJzsKICAgICAgICBpZiAobG9hZGJhbGFuY2VySW5mbykgewogICAgICAgICAgb3V0LnB1c2goewogICAgICAgICAgICBsYWJlbDogdGhpcy50KCdzZXJ2aWNlc1BhZ2UuaXBzLmxvYWRCYWxhbmNlci5sYWJlbCcpLAogICAgICAgICAgICBjb250ZW50OiBsb2FkYmFsYW5jZXJJbmZvCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKGV4dGVybmFsTmFtZSkgewogICAgICAgIG91dC5wdXNoKHsKICAgICAgICAgIGxhYmVsOiB0aGlzLnQoJ3NlcnZpY2VzUGFnZS5zZXJ2aWNlVHlwZXMuZXh0ZXJuYWxOYW1lLmxhYmVsJyksCiAgICAgICAgICBjb250ZW50OiBleHRlcm5hbE5hbWUKICAgICAgICB9KTsKICAgICAgfQogICAgICBpZiAoc2Vzc2lvbkFmZmluaXR5KSB7CiAgICAgICAgb3V0LnB1c2goewogICAgICAgICAgbGFiZWw6IHRoaXMudCgnc2VydmljZXNQYWdlLmFmZmluaXR5LmxhYmVsJyksCiAgICAgICAgICBjb250ZW50OiBzZXNzaW9uQWZmaW5pdHkKICAgICAgICB9KTsKICAgICAgfQogICAgICByZXR1cm4gb3V0OwogICAgfQogIH0sIHsKICAgIGtleTogInBvZFJlbGF0aW9uc2hpcCIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgdmFyIF90aGlzJG1ldGFkYXRhJHJlbGF0aSA9IHRoaXMubWV0YWRhdGEucmVsYXRpb25zaGlwcywKICAgICAgICByZWxhdGlvbnNoaXBzID0gX3RoaXMkbWV0YWRhdGEkcmVsYXRpID09PSB2b2lkIDAgPyBbXSA6IF90aGlzJG1ldGFkYXRhJHJlbGF0aTsKICAgICAgcmV0dXJuIChyZWxhdGlvbnNoaXBzIHx8IFtdKS5maWx0ZXIoZnVuY3Rpb24gKHJlbGF0aW9uc2hpcCkgewogICAgICAgIHJldHVybiByZWxhdGlvbnNoaXAudG9UeXBlID09PSBQT0Q7CiAgICAgIH0pWzBdOwogICAgfQogIH0sIHsKICAgIGtleTogImZldGNoUG9kcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2ZldGNoUG9kcyA9IF9hc3luY1RvR2VuZXJhdG9yKC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgaWYgKCF0aGlzLnBvZFJlbGF0aW9uc2hpcCkgewogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJGRpc3BhdGNoKCdjbHVzdGVyL2ZpbmRNYXRjaGluZycsIHsKICAgICAgICAgICAgICAgIHR5cGU6IFBPRCwKICAgICAgICAgICAgICAgIHNlbGVjdG9yOiB0aGlzLnBvZFJlbGF0aW9uc2hpcC5zZWxlY3RvciwKICAgICAgICAgICAgICAgIG5hbWVzcGFjZTogdGhpcy5uYW1lc3BhY2UKICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICByb290OiB0cnVlCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUsIHRoaXMpOwogICAgICB9KSk7CiAgICAgIGZ1bmN0aW9uIGZldGNoUG9kcygpIHsKICAgICAgICByZXR1cm4gX2ZldGNoUG9kcy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CiAgICAgIHJldHVybiBmZXRjaFBvZHM7CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJwb2RzIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5wb2RSZWxhdGlvbnNoaXAgPyB0aGlzLiRnZXR0ZXJzLm1hdGNoaW5nKFBPRCwgdGhpcy5wb2RSZWxhdGlvbnNoaXAuc2VsZWN0b3IsIHRoaXMubmFtZXNwYWNlKSA6IFtdOwogICAgfQogIH0sIHsKICAgIGtleTogInNlcnZpY2VUeXBlIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgX3RoaXMkc3BlYzIsIF90aGlzJHNwZWMzOwogICAgICB2YXIgc2VydmljZVR5cGUgPSAoX3RoaXMkc3BlYzIgPSB0aGlzLnNwZWMpID09PSBudWxsIHx8IF90aGlzJHNwZWMyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRzcGVjMi50eXBlOwogICAgICB2YXIgY2x1c3RlcklwID0gKF90aGlzJHNwZWMzID0gdGhpcy5zcGVjKSA9PT0gbnVsbCB8fCBfdGhpcyRzcGVjMyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkc3BlYzMuY2x1c3RlcklQOwogICAgICB2YXIgZGVmYXVsdFNlcnZpY2UgPSBmaW5kKERFRkFVTFRfU0VSVklDRV9UWVBFUywgWydpZCcsIENMVVNURVJJUF0pOwogICAgICBpZiAoc2VydmljZVR5cGUpIHsKICAgICAgICBpZiAoc2VydmljZVR5cGUgPT09IENMVVNURVJJUCAmJiBjbHVzdGVySXAgPT09ICdOb25lJykgewogICAgICAgICAgcmV0dXJuIEhFQURMRVNTOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gc2VydmljZVR5cGU7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBkZWZhdWx0U2VydmljZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJwcm94eVVybCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcHJveHlVcmwoc2NoZW1lLCBwb3J0KSB7CiAgICAgIHZhciB2aWV3ID0gdGhpcy5saW5rRm9yKCd2aWV3Jyk7CiAgICAgIHZhciBpZHggPSB2aWV3Lmxhc3RJbmRleE9mKCIvIik7CiAgICAgIHJldHVybiBwcm94eVVybEZyb21CYXNlKHZpZXcuc2xpY2UoMCwgaWR4KSwgc2NoZW1lLCB0aGlzLm1ldGFkYXRhLm5hbWUsIHBvcnQpOwogICAgfQogIH1dKTsKfShTdGV2ZU1vZGVsKTsKZXhwb3J0IHsgX2RlZmF1bHQgYXMgZGVmYXVsdCB9OwpleHBvcnQgZnVuY3Rpb24gcHJveHlVcmxGcm9tUGFydHMoY2x1c3RlcklkLCBuYW1lc3BhY2UsIG5hbWUsIHNjaGVtZSwgcG9ydCwgcGF0aCkgewogIHZhciBiYXNlID0gIi9rOHMvY2x1c3RlcnMvIi5jb25jYXQoZXNjYXBlKGNsdXN0ZXJJZCksICIvYXBpL3YxL25hbWVzcGFjZXMvIikuY29uY2F0KGVzY2FwZShuYW1lc3BhY2UpLCAiL3NlcnZpY2VzIik7CiAgcmV0dXJuIHByb3h5VXJsRnJvbUJhc2UoYmFzZSwgc2NoZW1lLCBuYW1lLCBwb3J0LCBwYXRoKTsKfQpleHBvcnQgZnVuY3Rpb24gcHJveHlVcmxGcm9tQmFzZShiYXNlLCBzY2hlbWUsIG5hbWUsIHBvcnQsIHBhdGgpIHsKICB2YXIgc2NoZW1hTmFtZVBvcnQgPSAoc2NoZW1lID8gIiIuY29uY2F0KGVzY2FwZShzY2hlbWUpLCAiOiIpIDogJycpICsgZXNjYXBlKG5hbWUpICsgKHBvcnQgPyAiOiIuY29uY2F0KGVzY2FwZShwb3J0KSkgOiAnJyk7CiAgdmFyIGNsZWFuUGF0aCA9ICIvIi5jb25jYXQoKHBhdGggfHwgJycpLnJlcGxhY2UoL15cLysvZywgJycpKTsKICB2YXIgY2xlYW5CYXNlID0gYmFzZS5yZXBsYWNlKC9cLyskL2csICcnKTsKICB2YXIgb3V0ID0gIiIuY29uY2F0KGNsZWFuQmFzZSwgIi8iKS5jb25jYXQoc2NoZW1hTmFtZVBvcnQsICIvcHJveHkiKS5jb25jYXQoY2xlYW5QYXRoKTsKICByZXR1cm4gb3V0Owp9"},{"version":3,"names":["find","POD","SteveModel","DEFAULT_SERVICE_TYPES","id","label","description","bannerAbbrv","HEADLESS","headless","CLUSTERIP","clusterIp","_default","_SteveModel","_classCallCheck","_callSuper","arguments","_inherits","_createClass","key","get","nullable","path","required","translationKey","type","validators","_this$serviceType","out","t","content","serviceType","_this$spec","spec","clusterIP","externalName","sessionAffinity","loadBalancerIP","push","_this$status$loadBala","statusIps","status","loadBalancer","ingress","map","hostname","ip","join","loadbalancerInfo","_this$metadata$relati","metadata","relationships","filter","relationship","toType","value","_fetchPods","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","podRelationship","$dispatch","selector","namespace","root","stop","fetchPods","apply","$getters","matching","_this$spec2","_this$spec3","defaultService","proxyUrl","scheme","port","view","linkFor","idx","lastIndexOf","proxyUrlFromBase","slice","name","default","proxyUrlFromParts","clusterId","base","concat","escape","schemaNamePort","cleanPath","replace","cleanBase"],"sources":["/home/ubuntu/suseconf/node_modules/@rancher/shell/models/service.js"],"sourcesContent":["import find from 'lodash/find';\nimport { POD } from '@shell/config/types';\nimport SteveModel from '@shell/plugins/steve/steve-class';\n\n// i18n-uses servicesPage.serviceTypes.clusterIp.*, servicesPage.serviceTypes.externalName.*, servicesPage.serviceTypes.headless.*\n// i18n-uses servicesPage.serviceTypes.loadBalancer.*, servicesPage.serviceTypes.nodePort.*\nexport const DEFAULT_SERVICE_TYPES = [\n  {\n    id:          'ClusterIP',\n    label:       'servicesPage.serviceTypes.clusterIp.label',\n    description: 'servicesPage.serviceTypes.clusterIp.description',\n    bannerAbbrv: 'servicesPage.serviceTypes.clusterIp.abbrv',\n  },\n  {\n    id:          'ExternalName',\n    label:       'servicesPage.serviceTypes.externalName.label',\n    description: 'servicesPage.serviceTypes.externalName.description',\n    bannerAbbrv: 'servicesPage.serviceTypes.externalName.abbrv',\n  },\n  {\n    id:          'Headless',\n    label:       'servicesPage.serviceTypes.headless.label',\n    description: 'servicesPage.serviceTypes.headless.description',\n    bannerAbbrv: 'servicesPage.serviceTypes.headless.abbrv',\n  },\n  {\n    id:          'LoadBalancer',\n    label:       'servicesPage.serviceTypes.loadBalancer.label',\n    description: 'servicesPage.serviceTypes.loadBalancer.description',\n    bannerAbbrv: 'servicesPage.serviceTypes.loadBalancer.abbrv',\n  },\n  {\n    id:          'NodePort',\n    label:       'servicesPage.serviceTypes.nodePort.label',\n    description: 'servicesPage.serviceTypes.nodePort.description',\n    bannerAbbrv: 'servicesPage.serviceTypes.nodePort.abbrv',\n  },\n];\n\nexport const HEADLESS = (() => {\n  const headless = find(DEFAULT_SERVICE_TYPES, ['id', 'Headless']);\n\n  return headless.id;\n})();\n\nexport const CLUSTERIP = (() => {\n  const clusterIp = find(DEFAULT_SERVICE_TYPES, ['id', 'ClusterIP']);\n\n  return clusterIp.id;\n})();\n\nexport default class extends SteveModel {\n  get customValidationRules() {\n    return [\n      {\n        nullable:       false,\n        path:           'metadata.name',\n        required:       true,\n        translationKey: 'generic.name',\n        type:           'dnsLabel',\n      },\n      {\n        nullable:   false,\n        path:       'spec',\n        required:   true,\n        type:       'array',\n        validators: ['servicePort'],\n      },\n      {\n        nullable:   true,\n        path:       'spec',\n        required:   true,\n        type:       'string',\n        validators: ['clusterIp'],\n      },\n      {\n        nullable:   true,\n        path:       'spec',\n        required:   true,\n        type:       'array',\n        validators: ['externalName'],\n      },\n    ];\n  }\n\n  get details() {\n    const out = [{\n      label:   this.t('generic.type'),\n      content: this.serviceType?.id || this.serviceType,\n    }];\n\n    const {\n      clusterIP, externalName, sessionAffinity, loadBalancerIP\n    } = this.spec;\n\n    if (clusterIP) {\n      out.push({\n        label:   this.t('servicesPage.serviceTypes.clusterIp.label'),\n        content: clusterIP,\n      });\n    }\n\n    if (this.serviceType === 'LoadBalancer') {\n      const statusIps = this.status.loadBalancer?.ingress?.map((ingress) => ingress.hostname || ingress.ip).join(', ');\n\n      const loadbalancerInfo = loadBalancerIP || statusIps || '';\n\n      if (loadbalancerInfo) {\n        out.push({\n          label:   this.t('servicesPage.ips.loadBalancer.label'),\n          content: loadbalancerInfo\n        });\n      }\n    }\n\n    if (externalName) {\n      out.push({\n        label:   this.t('servicesPage.serviceTypes.externalName.label'),\n        content: externalName,\n      });\n    }\n\n    if (sessionAffinity) {\n      out.push({\n        label:   this.t('servicesPage.affinity.label'),\n        content: sessionAffinity,\n      });\n    }\n\n    return out;\n  }\n\n  get podRelationship() {\n    const { metadata:{ relationships = [] } } = this;\n\n    return (relationships || []).filter((relationship) => relationship.toType === POD)[0];\n  }\n\n  async fetchPods() {\n    if (this.podRelationship) {\n      await this.$dispatch('cluster/findMatching', {\n        type:      POD,\n        selector:  this.podRelationship.selector,\n        namespace: this.namespace\n      }, { root: true });\n    }\n  }\n\n  get pods() {\n    return this.podRelationship ? this.$getters.matching( POD, this.podRelationship.selector, this.namespace ) : [];\n  }\n\n  get serviceType() {\n    const serviceType = this.spec?.type;\n    const clusterIp = this.spec?.clusterIP;\n    const defaultService = find(DEFAULT_SERVICE_TYPES, ['id', CLUSTERIP]);\n\n    if (serviceType) {\n      if (serviceType === CLUSTERIP && clusterIp === 'None') {\n        return HEADLESS;\n      } else {\n        return serviceType;\n      }\n    }\n\n    return defaultService;\n  }\n\n  proxyUrl(scheme, port) {\n    const view = this.linkFor('view');\n    const idx = view.lastIndexOf(`/`);\n\n    return proxyUrlFromBase(view.slice(0, idx), scheme, this.metadata.name, port);\n  }\n}\n\nexport function proxyUrlFromParts(clusterId, namespace, name, scheme, port, path) {\n  const base = `/k8s/clusters/${ escape(clusterId) }/api/v1/namespaces/${ escape(namespace) }/services`;\n\n  return proxyUrlFromBase(base, scheme, name, port, path);\n}\n\nexport function proxyUrlFromBase(base, scheme, name, port, path) {\n  const schemaNamePort = (scheme ? `${ escape(scheme) }:` : '') + escape(name) + (port ? `:${ escape(port) }` : '');\n\n  const cleanPath = `/${ (path || '').replace(/^\\/+/g, '') }`;\n  const cleanBase = base.replace(/\\/+$/g, '');\n\n  const out = `${ cleanBase }/${ schemaNamePort }/proxy${ cleanPath }`;\n\n  return out;\n}\n"],"mappings":"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","ignoreList":[]}]}