{"remainingRequest":"/home/ubuntu/susecon-2024-ext-demo/node_modules/babel-loader/lib/index.js??ref--16-1!/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/utils/monitoring.js","dependencies":[{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/utils/monitoring.js","mtime":1725271280091},{"path":"/home/ubuntu/susecon-2024-ext-demo/babel.config.js","mtime":1725268750245},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/babel-loader/lib/index.js","mtime":1725271298942}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgX3JlZ2VuZXJhdG9yUnVudGltZSBmcm9tICIvaG9tZS91YnVudHUvc3VzZWNvbi0yMDI0LWV4dC1kZW1vL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9yZWdlbmVyYXRvci9pbmRleC5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZsYXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkudW5zY29wYWJsZXMuZmxhdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudmFsdWVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucHJvbWlzZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwovLyBIZWxwZXJzIGZvciBkZXRlcm1pbmluZyBpZiBWMiBvciB2MSBNb25pdG9yaW5nIGFyZSBpbnN0YWxsZWQKCmltcG9ydCB7IFNDSEVNQSwgTU9OSVRPUklORywgV09SS0xPQURfVFlQRVMsIEVORFBPSU5UUyB9IGZyb20gJ0BzaGVsbC9jb25maWcvdHlwZXMnOwppbXBvcnQgeyBub3JtYWxpemVUeXBlIH0gZnJvbSAnQHNoZWxsL3BsdWdpbnMvZGFzaGJvYXJkLXN0b3JlL25vcm1hbGl6ZSc7CmltcG9ydCB7IGZpbmRCeSB9IGZyb20gJ0BzaGVsbC91dGlscy9hcnJheSc7CmltcG9ydCB7IGlzRW1wdHkgfSBmcm9tICdAc2hlbGwvdXRpbHMvb2JqZWN0JzsKCi8vIENhbiBiZSB1c2VkIGluc2lkZSBhIGNvbXBvbmVudHMnIGNvbXB1dGVkIHByb3BlcnR5CmV4cG9ydCBmdW5jdGlvbiBtb25pdG9yaW5nU3RhdHVzKCkgewogIHJldHVybiB7CiAgICBtb25pdG9yaW5nU3RhdHVzOiBmdW5jdGlvbiBtb25pdG9yaW5nU3RhdHVzKCkgewogICAgICB2YXIgc3RhdHVzID0gewogICAgICAgIHYxOiBoYXZlVjFNb25pdG9yaW5nKHRoaXMuJHN0b3JlLmdldHRlcnMpLAogICAgICAgIHYyOiBoYXZlVjJNb25pdG9yaW5nKHRoaXMuJHN0b3JlLmdldHRlcnMpCiAgICAgIH07CiAgICAgIHN0YXR1cy5pbnN0YWxsZWQgPSBzdGF0dXMudjEgfHwgc3RhdHVzLnYyOwogICAgICByZXR1cm4gc3RhdHVzOwogICAgfQogIH07Cn0KZXhwb3J0IGZ1bmN0aW9uIGhhdmVWMk1vbml0b3JpbmcoZ2V0dGVycykgewogIC8vIENhbid0IGhhdmUgVjIgYW5kIFYxIG1vbml0b3JpbmcgaW5zdGFsbGVkLCBzbyBpZiBWMSBpcyBpbnN0YWxsZWQgd2Uga25vdyB2MiBpcyBub3QKICBpZiAoaGF2ZVYxTW9uaXRvcmluZyhnZXR0ZXJzKSkgewogICAgcmV0dXJuIGZhbHNlOwogIH0KICB2YXIgaW5TdG9yZSA9IGdldHRlcnNbJ2dldFN0b3JlTmFtZUJ5UHJvZHVjdElkJ107CgogIC8vIEp1c3QgY2hlY2sgZm9yIHRoZSBwb2QgbW9uaXRvcnMgQ1JECiAgdmFyIHNjaGVtYXMgPSBnZXR0ZXJzWyIiLmNvbmNhdChpblN0b3JlLCAiL2FsbCIpXShTQ0hFTUEpOwogIHZhciBleGlzdHMgPSBmaW5kQnkoc2NoZW1hcywgJ2lkJywgbm9ybWFsaXplVHlwZShNT05JVE9SSU5HLlBPRE1PTklUT1IpKTsKICByZXR1cm4gISFleGlzdHM7Cn0KCi8vIEZvciB2MSBNb25pdG9yaW5nLCB0aGUgY2x1c3RlciBvYmplY3QgaW5kaWNhdGVzIHByZXNlbmNlIHZpYSBzdGF0dXMubW9uaXRvcmluZ1N0YXR1cwpleHBvcnQgZnVuY3Rpb24gaGF2ZVYxTW9uaXRvcmluZyhnZXR0ZXJzKSB7CiAgdmFyIF9jbHVzdGVyJHN0YXR1czsKICB2YXIgY2x1c3RlciA9IGdldHRlcnNbJ2N1cnJlbnRDbHVzdGVyJ107CiAgcmV0dXJuICEhKGNsdXN0ZXIgIT09IG51bGwgJiYgY2x1c3RlciAhPT0gdm9pZCAwICYmIChfY2x1c3RlciRzdGF0dXMgPSBjbHVzdGVyLnN0YXR1cykgIT09IG51bGwgJiYgX2NsdXN0ZXIkc3RhdHVzICE9PSB2b2lkIDAgJiYgX2NsdXN0ZXIkc3RhdHVzLm1vbml0b3JpbmdTdGF0dXMpOwp9CmV4cG9ydCB2YXIgQ0FUVExFX01PTklUT1JJTkdfTkFNRVNQQUNFID0gJ2NhdHRsZS1tb25pdG9yaW5nLXN5c3RlbSc7CmV4cG9ydCBmdW5jdGlvbiBoYXZlVjFNb25pdG9yaW5nV29ya2xvYWRzKF94KSB7CiAgcmV0dXJuIF9oYXZlVjFNb25pdG9yaW5nV29ya2xvYWRzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KZnVuY3Rpb24gX2hhdmVWMU1vbml0b3JpbmdXb3JrbG9hZHMoKSB7CiAgX2hhdmVWMU1vbml0b3JpbmdXb3JrbG9hZHMgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKHN0b3JlKSB7CiAgICB2YXIgd29ya2xvYWRzQnlUeXBlLCB3b3JrbG9hZHMsIGksIF93b3JrbG9hZCRzcGVjLCBfd29ya2xvYWQkbWV0YWRhdGEsIHdvcmtsb2FkOwogICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgIGNhc2UgMDoKICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKE9iamVjdC52YWx1ZXMoV09SS0xPQURfVFlQRVMpLm1hcChmdW5jdGlvbiAodHlwZSkgewogICAgICAgICAgICByZXR1cm4gc3RvcmUuZGlzcGF0Y2goJ2NsdXN0ZXIvZmluZEFsbCcsIHsKICAgICAgICAgICAgICB0eXBlOiB0eXBlCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSkpOwogICAgICAgIGNhc2UgMjoKICAgICAgICAgIHdvcmtsb2Fkc0J5VHlwZSA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICB3b3JrbG9hZHMgPSB3b3JrbG9hZHNCeVR5cGUuZmxhdCgpOwogICAgICAgICAgaSA9IDA7CiAgICAgICAgY2FzZSA1OgogICAgICAgICAgaWYgKCEoaSA8IHdvcmtsb2Fkcy5sZW5ndGgpKSB7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMzsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgICB3b3JrbG9hZCA9IHdvcmtsb2Fkc1tpXTsKICAgICAgICAgIGlmICghKCFpc0VtcHR5KHdvcmtsb2FkID09PSBudWxsIHx8IHdvcmtsb2FkID09PSB2b2lkIDAgfHwgKF93b3JrbG9hZCRzcGVjID0gd29ya2xvYWQuc3BlYykgPT09IG51bGwgfHwgX3dvcmtsb2FkJHNwZWMgPT09IHZvaWQgMCB8fCAoX3dvcmtsb2FkJHNwZWMgPSBfd29ya2xvYWQkc3BlYy50ZW1wbGF0ZSkgPT09IG51bGwgfHwgX3dvcmtsb2FkJHNwZWMgPT09IHZvaWQgMCB8fCAoX3dvcmtsb2FkJHNwZWMgPSBfd29ya2xvYWQkc3BlYy5zcGVjKSA9PT0gbnVsbCB8fCBfd29ya2xvYWQkc3BlYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3dvcmtsb2FkJHNwZWMuY29udGFpbmVycykgJiYgd29ya2xvYWQuc3BlYy50ZW1wbGF0ZS5zcGVjLmNvbnRhaW5lcnMuZmluZChmdW5jdGlvbiAoYykgewogICAgICAgICAgICB2YXIgX2MkaW1hZ2UsIF9jJGltYWdlMjsKICAgICAgICAgICAgcmV0dXJuICgoX2MkaW1hZ2UgPSBjLmltYWdlKSA9PT0gbnVsbCB8fCBfYyRpbWFnZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2MkaW1hZ2UuaW5jbHVkZXMoJ3F1YXkuaW8vY29yZW9zL3Byb21ldGhldXMtb3BlcmF0b3InKSkgfHwgKChfYyRpbWFnZTIgPSBjLmltYWdlKSA9PT0gbnVsbCB8fCBfYyRpbWFnZTIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jJGltYWdlMi5pbmNsdWRlcygncmFuY2hlci9jb3Jlb3MtcHJvbWV0aGV1cy1vcGVyYXRvcicpKTsKICAgICAgICAgIH0pICYmICh3b3JrbG9hZCA9PT0gbnVsbCB8fCB3b3JrbG9hZCA9PT0gdm9pZCAwIHx8IChfd29ya2xvYWQkbWV0YWRhdGEgPSB3b3JrbG9hZC5tZXRhZGF0YSkgPT09IG51bGwgfHwgX3dvcmtsb2FkJG1ldGFkYXRhID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfd29ya2xvYWQkbWV0YWRhdGEubmFtZXNwYWNlKSAhPT0gQ0FUVExFX01PTklUT1JJTkdfTkFNRVNQQUNFKSkgewogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gOTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBQcm9taXNlLnJlc29sdmUodHJ1ZSkpOwogICAgICAgIGNhc2UgOToKICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIFByb21pc2UucmVzb2x2ZShmYWxzZSkpOwogICAgICAgIGNhc2UgMTA6CiAgICAgICAgICBpKys7CiAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgMTM6CiAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgIH0KICAgIH0sIF9jYWxsZWUpOwogIH0pKTsKICByZXR1cm4gX2hhdmVWMU1vbml0b3JpbmdXb3JrbG9hZHMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQpmdW5jdGlvbiBoYXNFbmRwb2ludFN1YnNldHMoX3gyLCBfeDMpIHsKICByZXR1cm4gX2hhc0VuZHBvaW50U3Vic2V0cy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CmZ1bmN0aW9uIF9oYXNFbmRwb2ludFN1YnNldHMoKSB7CiAgX2hhc0VuZHBvaW50U3Vic2V0cyA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKHN0b3JlLCBpZCkgewogICAgdmFyIGVuZHBvaW50cywgZW5kcG9pbnQ7CiAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgIGNhc2UgMDoKICAgICAgICAgIGlmICghc3RvcmUuZ2V0dGVyc1snY2x1c3Rlci9zY2hlbWFGb3InXShFTkRQT0lOVFMpKSB7CiAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gOTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDM7CiAgICAgICAgICByZXR1cm4gc3RvcmUuZGlzcGF0Y2goJ2NsdXN0ZXIvZmluZEFsbCcsIHsKICAgICAgICAgICAgdHlwZTogRU5EUE9JTlRTCiAgICAgICAgICB9KTsKICAgICAgICBjYXNlIDM6CiAgICAgICAgICBfY29udGV4dDIudDAgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgIGlmIChfY29udGV4dDIudDApIHsKICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA2OwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAgIF9jb250ZXh0Mi50MCA9IFtdOwogICAgICAgIGNhc2UgNjoKICAgICAgICAgIGVuZHBvaW50cyA9IF9jb250ZXh0Mi50MDsKICAgICAgICAgIGVuZHBvaW50ID0gZW5kcG9pbnRzLmZpbmQoZnVuY3Rpb24gKGVwKSB7CiAgICAgICAgICAgIHJldHVybiBlcC5pZCA9PT0gaWQ7CiAgICAgICAgICB9KTsKICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCBlbmRwb2ludCAmJiAhaXNFbXB0eShlbmRwb2ludCkgJiYgIWlzRW1wdHkoZW5kcG9pbnQuc3Vic2V0cykpOwogICAgICAgIGNhc2UgOToKICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCBmYWxzZSk7CiAgICAgICAgY2FzZSAxMDoKICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgIH0KICAgIH0sIF9jYWxsZWUyKTsKICB9KSk7CiAgcmV0dXJuIF9oYXNFbmRwb2ludFN1YnNldHMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQpleHBvcnQgZnVuY3Rpb24gY2FuVmlld0dyYWZhbmFMaW5rKF94NCkgewogIHJldHVybiBfY2FuVmlld0dyYWZhbmFMaW5rLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KZnVuY3Rpb24gX2NhblZpZXdHcmFmYW5hTGluaygpIHsKICBfY2FuVmlld0dyYWZhbmFMaW5rID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoc3RvcmUpIHsKICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgY2FzZSAwOgogICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyOwogICAgICAgICAgcmV0dXJuIGhhc0VuZHBvaW50U3Vic2V0cyhzdG9yZSwgIiIuY29uY2F0KENBVFRMRV9NT05JVE9SSU5HX05BTUVTUEFDRSwgIi9yYW5jaGVyLW1vbml0b3JpbmctZ3JhZmFuYSIpKTsKICAgICAgICBjYXNlIDI6CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQzLnNlbnQpOwogICAgICAgIGNhc2UgMzoKICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgIH0KICAgIH0sIF9jYWxsZWUzKTsKICB9KSk7CiAgcmV0dXJuIF9jYW5WaWV3R3JhZmFuYUxpbmsuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQpleHBvcnQgZnVuY3Rpb24gY2FuVmlld0FsZXJ0TWFuYWdlckxpbmsoX3g1KSB7CiAgcmV0dXJuIF9jYW5WaWV3QWxlcnRNYW5hZ2VyTGluay5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CmZ1bmN0aW9uIF9jYW5WaWV3QWxlcnRNYW5hZ2VyTGluaygpIHsKICBfY2FuVmlld0FsZXJ0TWFuYWdlckxpbmsgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNChzdG9yZSkgewogICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNCQoX2NvbnRleHQ0KSB7CiAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICBjYXNlIDA6CiAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDI7CiAgICAgICAgICByZXR1cm4gaGFzRW5kcG9pbnRTdWJzZXRzKHN0b3JlLCAiIi5jb25jYXQoQ0FUVExFX01PTklUT1JJTkdfTkFNRVNQQUNFLCAiL3JhbmNoZXItbW9uaXRvcmluZy1hbGVydG1hbmFnZXIiKSk7CiAgICAgICAgY2FzZSAyOgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0NC5zZW50KTsKICAgICAgICBjYXNlIDM6CiAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgIHJldHVybiBfY29udGV4dDQuc3RvcCgpOwogICAgICB9CiAgICB9LCBfY2FsbGVlNCk7CiAgfSkpOwogIHJldHVybiBfY2FuVmlld0FsZXJ0TWFuYWdlckxpbmsuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQpleHBvcnQgZnVuY3Rpb24gY2FuVmlld1Byb21ldGhldXNMaW5rKF94NikgewogIHJldHVybiBfY2FuVmlld1Byb21ldGhldXNMaW5rLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCi8vIE90aGVyIHdheXMgd2UgY2hlY2sgZm9yIG1vbml0b3Jpbmc6CgovLyAoMSkgVXNpbmcgY291bnRzIChyZXF1aXJlcyBSQkFDIHBlcm1pc3Npb25zKQovLyByZXR1cm4gISF0aGlzLmNsdXN0ZXJDb3VudHM/LlswXT8uY291bnRzPy5bQ0FUQUxPRy5BUFBdPy5uYW1lc3BhY2VzPy5bJ2NhdHRsZS1tb25pdG9yaW5nLXN5c3RlbSddOwoKLy8gKDIpIFJldHJpZXZpbmcgYWxsIHdvcmtsb2FkcyBhbmQgbG9va2luZyBmb3IgY29udGFpbmVycyB3aXRoIGEgZ2l2ZW4gaW1hZ2UKLy8gU2VlIGNoYXJ0L21vbml0b3JpbmcvaW5kZXgudnVlCmZ1bmN0aW9uIF9jYW5WaWV3UHJvbWV0aGV1c0xpbmsoKSB7CiAgX2NhblZpZXdQcm9tZXRoZXVzTGluayA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU1KHN0b3JlKSB7CiAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU1JChfY29udGV4dDUpIHsKICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQ1LnByZXYgPSBfY29udGV4dDUubmV4dCkgewogICAgICAgIGNhc2UgMDoKICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gMjsKICAgICAgICAgIHJldHVybiBoYXNFbmRwb2ludFN1YnNldHMoc3RvcmUsICIiLmNvbmNhdChDQVRUTEVfTU9OSVRPUklOR19OQU1FU1BBQ0UsICIvcmFuY2hlci1tb25pdG9yaW5nLXByb21ldGhldXMiKSk7CiAgICAgICAgY2FzZSAyOgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0NS5zZW50KTsKICAgICAgICBjYXNlIDM6CiAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgIHJldHVybiBfY29udGV4dDUuc3RvcCgpOwogICAgICB9CiAgICB9LCBfY2FsbGVlNSk7CiAgfSkpOwogIHJldHVybiBfY2FuVmlld1Byb21ldGhldXNMaW5rLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0="},{"version":3,"names":["SCHEMA","MONITORING","WORKLOAD_TYPES","ENDPOINTS","normalizeType","findBy","isEmpty","monitoringStatus","status","v1","haveV1Monitoring","$store","getters","v2","haveV2Monitoring","installed","inStore","schemas","concat","exists","PODMONITOR","_cluster$status","cluster","CATTLE_MONITORING_NAMESPACE","haveV1MonitoringWorkloads","_x","_haveV1MonitoringWorkloads","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","store","workloadsByType","workloads","i","_workload$spec","_workload$metadata","workload","wrap","_callee$","_context","prev","next","Promise","all","Object","values","map","type","dispatch","sent","flat","length","spec","template","containers","find","c","_c$image","_c$image2","image","includes","metadata","namespace","abrupt","resolve","stop","hasEndpointSubsets","_x2","_x3","_hasEndpointSubsets","_callee2","id","endpoints","endpoint","_callee2$","_context2","t0","ep","subsets","canViewGrafanaLink","_x4","_canViewGrafanaLink","_callee3","_callee3$","_context3","canViewAlertManagerLink","_x5","_canViewAlertManagerLink","_callee4","_callee4$","_context4","canViewPrometheusLink","_x6","_canViewPrometheusLink","_callee5","_callee5$","_context5"],"sources":["/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/utils/monitoring.js"],"sourcesContent":["// Helpers for determining if V2 or v1 Monitoring are installed\n\nimport { SCHEMA, MONITORING, WORKLOAD_TYPES, ENDPOINTS } from '@shell/config/types';\nimport { normalizeType } from '@shell/plugins/dashboard-store/normalize';\nimport { findBy } from '@shell/utils/array';\nimport { isEmpty } from '@shell/utils/object';\n\n// Can be used inside a components' computed property\nexport function monitoringStatus() {\n  return {\n    monitoringStatus() {\n      const status = {\n        v1: haveV1Monitoring(this.$store.getters),\n        v2: haveV2Monitoring(this.$store.getters),\n      };\n\n      status.installed = status.v1 || status.v2;\n\n      return status;\n    }\n  };\n}\n\nexport function haveV2Monitoring(getters) {\n  // Can't have V2 and V1 monitoring installed, so if V1 is installed we know v2 is not\n  if (haveV1Monitoring(getters)) {\n    return false;\n  }\n  const inStore = getters['getStoreNameByProductId'];\n\n  // Just check for the pod monitors CRD\n  const schemas = getters[`${ inStore }/all`](SCHEMA);\n  const exists = findBy(schemas, 'id', normalizeType(MONITORING.PODMONITOR));\n\n  return !!exists;\n}\n\n// For v1 Monitoring, the cluster object indicates presence via status.monitoringStatus\nexport function haveV1Monitoring(getters) {\n  const cluster = getters['currentCluster'];\n\n  return !!cluster?.status?.monitoringStatus;\n}\n\nexport const CATTLE_MONITORING_NAMESPACE = 'cattle-monitoring-system';\n\nexport async function haveV1MonitoringWorkloads(store) {\n  const workloadsByType = await Promise.all(\n    Object.values(WORKLOAD_TYPES).map((type) => store.dispatch('cluster/findAll', { type })\n    )\n  );\n  const workloads = workloadsByType.flat();\n\n  for (let i = 0; i < workloads.length; i++) {\n    const workload = workloads[i];\n\n    if (!isEmpty(workload?.spec?.template?.spec?.containers) &&\n        workload.spec.template.spec.containers.find((c) => c.image?.includes('quay.io/coreos/prometheus-operator') ||\n          c.image?.includes('rancher/coreos-prometheus-operator')) &&\n        workload?.metadata?.namespace !== CATTLE_MONITORING_NAMESPACE) {\n      return Promise.resolve(true);\n    }\n\n    return Promise.resolve(false);\n  }\n}\n\nasync function hasEndpointSubsets(store, id) {\n  if (store.getters['cluster/schemaFor'](ENDPOINTS)) {\n    const endpoints = await store.dispatch('cluster/findAll', { type: ENDPOINTS }) || [];\n\n    const endpoint = endpoints.find((ep) => ep.id === id);\n\n    return endpoint && !isEmpty(endpoint) && !isEmpty(endpoint.subsets);\n  }\n\n  return false;\n}\n\nexport async function canViewGrafanaLink(store) {\n  return await hasEndpointSubsets(store, `${ CATTLE_MONITORING_NAMESPACE }/rancher-monitoring-grafana`);\n}\n\nexport async function canViewAlertManagerLink(store) {\n  return await hasEndpointSubsets(store, `${ CATTLE_MONITORING_NAMESPACE }/rancher-monitoring-alertmanager`);\n}\n\nexport async function canViewPrometheusLink(store) {\n  return await hasEndpointSubsets(store, `${ CATTLE_MONITORING_NAMESPACE }/rancher-monitoring-prometheus`);\n}\n\n// Other ways we check for monitoring:\n\n// (1) Using counts (requires RBAC permissions)\n// return !!this.clusterCounts?.[0]?.counts?.[CATALOG.APP]?.namespaces?.['cattle-monitoring-system'];\n\n// (2) Retrieving all workloads and looking for containers with a given image\n// See chart/monitoring/index.vue\n"],"mappings":"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","ignoreList":[]}]}