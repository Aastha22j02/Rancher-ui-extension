{"remainingRequest":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js??ref--16-1!/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/ubuntu/suseconf/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ubuntu/suseconf/node_modules/@rancher/shell/edit/provisioning.cattle.io.cluster/rke2.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/ubuntu/suseconf/node_modules/@rancher/shell/edit/provisioning.cattle.io.cluster/rke2.vue","mtime":1725338146566},{"path":"/home/ubuntu/suseconf/babel.config.js","mtime":1725343995893},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js","mtime":1725271298942},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1725271300920}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0FycmF5IGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvQXJyYXkiOwppbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5IjsKaW1wb3J0IF90eXBlb2YgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdHlwZW9mIjsKaW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90b0NvbnN1bWFibGVBcnJheSI7CmltcG9ydCBfc2xpY2VkVG9BcnJheSBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9zbGljZWRUb0FycmF5IjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwpmdW5jdGlvbiBvd25LZXlzKGUsIHIpIHsgdmFyIHQgPSBPYmplY3Qua2V5cyhlKTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIG8gPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGUpOyByICYmIChvID0gby5maWx0ZXIoZnVuY3Rpb24gKHIpIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSwgcikuZW51bWVyYWJsZTsgfSkpLCB0LnB1c2guYXBwbHkodCwgbyk7IH0gcmV0dXJuIHQ7IH0KZnVuY3Rpb24gX29iamVjdFNwcmVhZChlKSB7IGZvciAodmFyIHIgPSAxOyByIDwgYXJndW1lbnRzLmxlbmd0aDsgcisrKSB7IHZhciB0ID0gbnVsbCAhPSBhcmd1bWVudHNbcl0gPyBhcmd1bWVudHNbcl0gOiB7fTsgciAlIDIgPyBvd25LZXlzKE9iamVjdCh0KSwgITApLmZvckVhY2goZnVuY3Rpb24gKHIpIHsgX2RlZmluZVByb3BlcnR5KGUsIHIsIHRbcl0pOyB9KSA6IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzID8gT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnModCkpIDogb3duS2V5cyhPYmplY3QodCkpLmZvckVhY2goZnVuY3Rpb24gKHIpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIHIsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCwgcikpOyB9KTsgfSByZXR1cm4gZTsgfQpmdW5jdGlvbiBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihyLCBlKSB7IHZhciB0ID0gInVuZGVmaW5lZCIgIT0gdHlwZW9mIFN5bWJvbCAmJiByW1N5bWJvbC5pdGVyYXRvcl0gfHwgclsiQEBpdGVyYXRvciJdOyBpZiAoIXQpIHsgaWYgKEFycmF5LmlzQXJyYXkocikgfHwgKHQgPSBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkocikpIHx8IGUgJiYgciAmJiAibnVtYmVyIiA9PSB0eXBlb2Ygci5sZW5ndGgpIHsgdCAmJiAociA9IHQpOyB2YXIgX24gPSAwLCBGID0gZnVuY3Rpb24gRigpIHt9OyByZXR1cm4geyBzOiBGLCBuOiBmdW5jdGlvbiBuKCkgeyByZXR1cm4gX24gPj0gci5sZW5ndGggPyB7IGRvbmU6ICEwIH0gOiB7IGRvbmU6ICExLCB2YWx1ZTogcltfbisrXSB9OyB9LCBlOiBmdW5jdGlvbiBlKHIpIHsgdGhyb3cgcjsgfSwgZjogRiB9OyB9IHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBpdGVyYXRlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC4iKTsgfSB2YXIgbywgYSA9ICEwLCB1ID0gITE7IHJldHVybiB7IHM6IGZ1bmN0aW9uIHMoKSB7IHQgPSB0LmNhbGwocik7IH0sIG46IGZ1bmN0aW9uIG4oKSB7IHZhciByID0gdC5uZXh0KCk7IHJldHVybiBhID0gci5kb25lLCByOyB9LCBlOiBmdW5jdGlvbiBlKHIpIHsgdSA9ICEwLCBvID0gcjsgfSwgZjogZnVuY3Rpb24gZigpIHsgdHJ5IHsgYSB8fCBudWxsID09IHQucmV0dXJuIHx8IHQucmV0dXJuKCk7IH0gZmluYWxseSB7IGlmICh1KSB0aHJvdyBvOyB9IH0gfTsgfQpmdW5jdGlvbiBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkociwgYSkgeyBpZiAocikgeyBpZiAoInN0cmluZyIgPT0gdHlwZW9mIHIpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShyLCBhKTsgdmFyIHQgPSB7fS50b1N0cmluZy5jYWxsKHIpLnNsaWNlKDgsIC0xKTsgcmV0dXJuICJPYmplY3QiID09PSB0ICYmIHIuY29uc3RydWN0b3IgJiYgKHQgPSByLmNvbnN0cnVjdG9yLm5hbWUpLCAiTWFwIiA9PT0gdCB8fCAiU2V0IiA9PT0gdCA/IEFycmF5LmZyb20ocikgOiAiQXJndW1lbnRzIiA9PT0gdCB8fCAvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdCh0KSA/IF9hcnJheUxpa2VUb0FycmF5KHIsIGEpIDogdm9pZCAwOyB9IH0KZnVuY3Rpb24gX2FycmF5TGlrZVRvQXJyYXkociwgYSkgeyAobnVsbCA9PSBhIHx8IGEgPiByLmxlbmd0aCkgJiYgKGEgPSByLmxlbmd0aCk7IGZvciAodmFyIGUgPSAwLCBuID0gQXJyYXkoYSk7IGUgPCBhOyBlKyspIG5bZV0gPSByW2VdOyByZXR1cm4gbjsgfQppbXBvcnQgX3JlZ2VuZXJhdG9yUnVudGltZSBmcm9tICIvaG9tZS91YnVudHUvc3VzZWNvbmYvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL3JlZ2VuZXJhdG9yL2luZGV4LmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maW5kLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmpvaW4uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5kZXNjcmlwdGlvbi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZyb20uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmFzc2lnbi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5lbnRyaWVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3JzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnZhbHVlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnByb21pc2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5lbmRzLXdpdGguanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3RhcnRzLXdpdGguanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcudHJpbS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvci5qcyI7CmltcG9ydCBkaWZmZXJlbmNlIGZyb20gJ2xvZGFzaC9kaWZmZXJlbmNlJzsKaW1wb3J0IHRocm90dGxlIGZyb20gJ2xvZGFzaC90aHJvdHRsZSc7CmltcG9ydCBpc0FycmF5IGZyb20gJ2xvZGFzaC9pc0FycmF5JzsKaW1wb3J0IG1lcmdlIGZyb20gJ2xvZGFzaC9tZXJnZSc7CmltcG9ydCBDcmVhdGVFZGl0VmlldyBmcm9tICdAc2hlbGwvbWl4aW5zL2NyZWF0ZS1lZGl0LXZpZXcnOwppbXBvcnQgRm9ybVZhbGlkYXRpb24gZnJvbSAnQHNoZWxsL21peGlucy9mb3JtLXZhbGlkYXRpb24nOwppbXBvcnQgeyBub3JtYWxpemVOYW1lIH0gZnJvbSAnQHNoZWxsL3V0aWxzL2t1YmUnOwppbXBvcnQgeyBDQVBJLCBNQU5BR0VNRU5ULCBOQU1FU1BBQ0UsIE5PUk1BTiwgU0NIRU1BLCBERUZBVUxUX1dPUktTUEFDRSwgU0VDUkVULCBIQ0kgfSBmcm9tICdAc2hlbGwvY29uZmlnL3R5cGVzJzsKaW1wb3J0IHsgX0NSRUFURSwgX0VESVQsIF9WSUVXIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy9xdWVyeS1wYXJhbXMnOwppbXBvcnQgeyBmaW5kQnksIHJlbW92ZU9iamVjdCwgY2xlYXIgfSBmcm9tICdAc2hlbGwvdXRpbHMvYXJyYXknOwppbXBvcnQgeyBjcmVhdGVZYW1sIH0gZnJvbSAnQHNoZWxsL3V0aWxzL2NyZWF0ZS15YW1sJzsKaW1wb3J0IHsgY2xvbmUsIGRpZmYsIHNldCwgZ2V0LCBpc0VtcHR5IH0gZnJvbSAnQHNoZWxsL3V0aWxzL29iamVjdCc7CmltcG9ydCB7IGFsbEhhc2ggfSBmcm9tICdAc2hlbGwvdXRpbHMvcHJvbWlzZSc7CmltcG9ydCB7IHNvcnRCeSB9IGZyb20gJ0BzaGVsbC91dGlscy9zb3J0JzsKaW1wb3J0IHsgdnNwaGVyZVBvb2xDb25maWdNZXJnZSB9IGZyb20gJ0BzaGVsbC9tYWNoaW5lLWNvbmZpZy92bXdhcmV2c3BoZXJlLXBvb2wtY29uZmlnLW1lcmdlJzsKaW1wb3J0IHsgY29tcGFyZSwgc29ydGFibGUgfSBmcm9tICdAc2hlbGwvdXRpbHMvdmVyc2lvbic7CmltcG9ydCB7IGlzSGFydmVzdGVyU2F0aXNmaWVzVmVyc2lvbiB9IGZyb20gJ0BzaGVsbC91dGlscy9jbHVzdGVyJzsKaW1wb3J0IHsgQmFkZ2VTdGF0ZSB9IGZyb20gJ0Bjb21wb25lbnRzL0JhZGdlU3RhdGUnOwppbXBvcnQgeyBCYW5uZXIgfSBmcm9tICdAY29tcG9uZW50cy9CYW5uZXInOwppbXBvcnQgQ3J1UmVzb3VyY2UsIHsgQ09OVEVYVF9IT09LX0VESVRfWUFNTCB9IGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL0NydVJlc291cmNlJzsKaW1wb3J0IExvYWRpbmcgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvTG9hZGluZyc7CmltcG9ydCBOYW1lTnNEZXNjcmlwdGlvbiBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9mb3JtL05hbWVOc0Rlc2NyaXB0aW9uJzsKaW1wb3J0IFRhYiBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9UYWJiZWQvVGFiJzsKaW1wb3J0IFRhYmJlZCBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9UYWJiZWQnOwppbXBvcnQgeyBjYW5WaWV3Q2x1c3Rlck1lbWJlcnNoaXBFZGl0b3IgfSBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9mb3JtL01lbWJlcnMvQ2x1c3Rlck1lbWJlcnNoaXBFZGl0b3InOwppbXBvcnQgc2VtdmVyIGZyb20gJ3NlbXZlcic7CmltcG9ydCB7IFNFVFRJTkcgfSBmcm9tICdAc2hlbGwvY29uZmlnL3NldHRpbmdzJzsKaW1wb3J0IHsgYmFzZTY0RW5jb2RlIH0gZnJvbSAnQHNoZWxsL3V0aWxzL2NyeXB0byc7CmltcG9ydCB7IENBUEkgYXMgQ0FQSV9BTk5PVEFUSU9OUywgQ0xVU1RFUl9CQURHRSB9IGZyb20gJ0BzaGVsbC9jb25maWcvbGFiZWxzLWFubm90YXRpb25zJzsKaW1wb3J0IEFnZW50RW52IGZyb20gJ0BzaGVsbC9lZGl0L3Byb3Zpc2lvbmluZy5jYXR0bGUuaW8uY2x1c3Rlci9BZ2VudEVudic7CmltcG9ydCBMYWJlbHMgZnJvbSAnQHNoZWxsL2VkaXQvcHJvdmlzaW9uaW5nLmNhdHRsZS5pby5jbHVzdGVyL0xhYmVscyc7CmltcG9ydCBNYWNoaW5lUG9vbCBmcm9tICdAc2hlbGwvZWRpdC9wcm92aXNpb25pbmcuY2F0dGxlLmlvLmNsdXN0ZXIvdGFicy9NYWNoaW5lUG9vbCc7CmltcG9ydCBTZWxlY3RDcmVkZW50aWFsIGZyb20gJy4vU2VsZWN0Q3JlZGVudGlhbCc7CmltcG9ydCB7IEVMRU1FTlRBTF9TQ0hFTUFfSURTLCBLSU5ELCBFTEVNRU5UQUxfQ0xVU1RFUl9QUk9WSURFUiB9IGZyb20gJy4uLy4uL2NvbmZpZy9lbGVtZW50YWwtdHlwZXMnOwppbXBvcnQgQWdlbnRDb25maWd1cmF0aW9uIGZyb20gJ0BzaGVsbC9lZGl0L3Byb3Zpc2lvbmluZy5jYXR0bGUuaW8uY2x1c3Rlci90YWJzL0FnZW50Q29uZmlndXJhdGlvbic7CmltcG9ydCB7IGdldEFwcGxpY2FibGVFeHRlbnNpb25FbmhhbmNlbWVudHMgfSBmcm9tICdAc2hlbGwvY29yZS9wbHVnaW4taGVscGVycyc7CmltcG9ydCB7IEV4dGVuc2lvblBvaW50LCBUYWJMb2NhdGlvbiB9IGZyb20gJ0BzaGVsbC9jb3JlL3R5cGVzJzsKaW1wb3J0IE1lbWJlclJvbGVzIGZyb20gJ0BzaGVsbC9lZGl0L3Byb3Zpc2lvbmluZy5jYXR0bGUuaW8uY2x1c3Rlci90YWJzL01lbWJlclJvbGVzJzsKaW1wb3J0IEJhc2ljcyBmcm9tICdAc2hlbGwvZWRpdC9wcm92aXNpb25pbmcuY2F0dGxlLmlvLmNsdXN0ZXIvdGFicy9CYXNpY3MnOwppbXBvcnQgRXRjZCBmcm9tICdAc2hlbGwvZWRpdC9wcm92aXNpb25pbmcuY2F0dGxlLmlvLmNsdXN0ZXIvdGFicy9ldGNkJzsKaW1wb3J0IE5ldHdvcmtpbmcgZnJvbSAnQHNoZWxsL2VkaXQvcHJvdmlzaW9uaW5nLmNhdHRsZS5pby5jbHVzdGVyL3RhYnMvbmV0d29ya2luZyc7CmltcG9ydCBVcGdyYWRlIGZyb20gJ0BzaGVsbC9lZGl0L3Byb3Zpc2lvbmluZy5jYXR0bGUuaW8uY2x1c3Rlci90YWJzL3VwZ3JhZGUnOwppbXBvcnQgUmVnaXN0cmllcyBmcm9tICdAc2hlbGwvZWRpdC9wcm92aXNpb25pbmcuY2F0dGxlLmlvLmNsdXN0ZXIvdGFicy9yZWdpc3RyaWVzJzsKaW1wb3J0IEFkZE9uQ29uZmlnIGZyb20gJ0BzaGVsbC9lZGl0L3Byb3Zpc2lvbmluZy5jYXR0bGUuaW8uY2x1c3Rlci90YWJzL0FkZE9uQ29uZmlnJzsKaW1wb3J0IEFkdmFuY2VkIGZyb20gJ0BzaGVsbC9lZGl0L3Byb3Zpc2lvbmluZy5jYXR0bGUuaW8uY2x1c3Rlci90YWJzL0FkdmFuY2VkJzsKaW1wb3J0IENsdXN0ZXJBcHBlYXJhbmNlIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL2Zvcm0vQ2x1c3RlckFwcGVhcmFuY2UnOwp2YXIgSEFSVkVTVEVSID0gJ2hhcnZlc3Rlcic7CnZhciBIQVJWRVNURVJfQ0xPVURfUFJPVklERVIgPSAnaGFydmVzdGVyLWNsb3VkLXByb3ZpZGVyJzsKdmFyIE5FVEJJT1NfVFJVTkNBVElPTl9MRU5HVEggPSAxNTsKdmFyIFZNV0FSRV9WU1BIRVJFID0gJ3Ztd2FyZXZzcGhlcmUnOwoKLyoqCiAqIENsYXNzZXMgdG8gYmUgYWRvcHRlZCBieSB0aGUgbm9kZSBiYWRnZXMgaW4gTWFjaGluZSBwb29scwogKi8KdmFyIE5PREVfVE9UQUwgPSB7CiAgZXJyb3I6IHsKICAgIGNvbG9yOiAnYmctZXJyb3InLAogICAgaWNvbjogJ2ljb24teCcKICB9LAogIHdhcm5pbmc6IHsKICAgIGNvbG9yOiAnYmctd2FybmluZycsCiAgICBpY29uOiAnaWNvbi13YXJuaW5nJwogIH0sCiAgc3VjY2VzczogewogICAgY29sb3I6ICdiZy1zdWNjZXNzJywKICAgIGljb246ICdpY29uLWNoZWNrbWFyaycKICB9Cn07CnZhciBDTFVTVEVSX0FHRU5UX0NVU1RPTUlaQVRJT04gPSAnY2x1c3RlckFnZW50RGVwbG95bWVudEN1c3RvbWl6YXRpb24nOwp2YXIgRkxFRVRfQUdFTlRfQ1VTVE9NSVpBVElPTiA9ICdmbGVldEFnZW50RGVwbG95bWVudEN1c3RvbWl6YXRpb24nOwpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgQWdlbnRFbnY6IEFnZW50RW52LAogICAgQmFkZ2VTdGF0ZTogQmFkZ2VTdGF0ZSwKICAgIEJhbm5lcjogQmFubmVyLAogICAgQWdlbnRDb25maWd1cmF0aW9uOiBBZ2VudENvbmZpZ3VyYXRpb24sCiAgICBDcnVSZXNvdXJjZTogQ3J1UmVzb3VyY2UsCiAgICBMYWJlbHM6IExhYmVscywKICAgIExvYWRpbmc6IExvYWRpbmcsCiAgICBNYWNoaW5lUG9vbDogTWFjaGluZVBvb2wsCiAgICBOYW1lTnNEZXNjcmlwdGlvbjogTmFtZU5zRGVzY3JpcHRpb24sCiAgICBTZWxlY3RDcmVkZW50aWFsOiBTZWxlY3RDcmVkZW50aWFsLAogICAgVGFiOiBUYWIsCiAgICBUYWJiZWQ6IFRhYmJlZCwKICAgIE1lbWJlclJvbGVzOiBNZW1iZXJSb2xlcywKICAgIEJhc2ljczogQmFzaWNzLAogICAgRXRjZDogRXRjZCwKICAgIE5ldHdvcmtpbmc6IE5ldHdvcmtpbmcsCiAgICBVcGdyYWRlOiBVcGdyYWRlLAogICAgUmVnaXN0cmllczogUmVnaXN0cmllcywKICAgIEFkZE9uQ29uZmlnOiBBZGRPbkNvbmZpZywKICAgIEFkdmFuY2VkOiBBZHZhbmNlZCwKICAgIENsdXN0ZXJBcHBlYXJhbmNlOiBDbHVzdGVyQXBwZWFyYW5jZQogIH0sCiAgbWl4aW5zOiBbQ3JlYXRlRWRpdFZpZXcsIEZvcm1WYWxpZGF0aW9uXSwKICBwcm9wczogewogICAgbW9kZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICB9LAogICAgdmFsdWU6IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICByZXF1aXJlZDogdHJ1ZQogICAgfSwKICAgIHByb3ZpZGVyOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0sCiAgICBwcm92aWRlckNvbmZpZzogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIGRlZmF1bHQ6IGZ1bmN0aW9uIF9kZWZhdWx0KCkgewogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CiAgICB9CiAgfSwKICBmZXRjaDogZnVuY3Rpb24gZmV0Y2goKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICByZXR1cm4gX3RoaXMuZmV0Y2hSa2UyVmVyc2lvbnMoKTsKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ7CiAgICAgICAgICAgIHJldHVybiBfdGhpcy5pbml0U3BlY3MoKTsKICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDY7CiAgICAgICAgICAgIHJldHVybiBfdGhpcy5pbml0QWRkb25zKCk7CiAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA4OwogICAgICAgICAgICByZXR1cm4gX3RoaXMuaW5pdFJlZ2lzdHJ5KCk7CiAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgIE9iamVjdC5lbnRyaWVzKF90aGlzLmNoYXJ0VmFsdWVzKS5mb3JFYWNoKGZ1bmN0aW9uIChfcmVmKSB7CiAgICAgICAgICAgICAgdmFyIF9yZWYyID0gX3NsaWNlZFRvQXJyYXkoX3JlZiwgMiksCiAgICAgICAgICAgICAgICBuYW1lID0gX3JlZjJbMF0sCiAgICAgICAgICAgICAgICB2YWx1ZSA9IF9yZWYyWzFdOwogICAgICAgICAgICAgIHZhciBrZXkgPSBfdGhpcy5jaGFydFZlcnNpb25LZXkobmFtZSk7CiAgICAgICAgICAgICAgX3RoaXMudXNlckNoYXJ0VmFsdWVzW2tleV0gPSB2YWx1ZTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIF90aGlzLnNldEFnZW50Q29uZmlndXJhdGlvbigpOwogICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlKTsKICAgIH0pKSgpOwogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHZhciBfdGhpcyR2YWx1ZSRzcGVjJHJrZUM7CiAgICBpZiAoIXRoaXMudmFsdWUuc3BlYy5ya2VDb25maWcpIHsKICAgICAgc2V0KHRoaXMudmFsdWUuc3BlYywgJ3JrZUNvbmZpZycsIHt9KTsKICAgIH0KICAgIGlmICghdGhpcy52YWx1ZS5zcGVjLnJrZUNvbmZpZy5jaGFydFZhbHVlcykgewogICAgICBzZXQodGhpcy52YWx1ZS5zcGVjLnJrZUNvbmZpZywgJ2NoYXJ0VmFsdWVzJywge30pOwogICAgfQogICAgaWYgKCF0aGlzLnZhbHVlLnNwZWMucmtlQ29uZmlnLnVwZ3JhZGVTdHJhdGVneSkgewogICAgICBzZXQodGhpcy52YWx1ZS5zcGVjLnJrZUNvbmZpZywgJ3VwZ3JhZGVTdHJhdGVneScsIHsKICAgICAgICBjb250cm9sUGxhbmVDb25jdXJyZW5jeTogJzEnLAogICAgICAgIGNvbnRyb2xQbGFuZURyYWluT3B0aW9uczoge30sCiAgICAgICAgd29ya2VyQ29uY3VycmVuY3k6ICcxJywKICAgICAgICB3b3JrZXJEcmFpbk9wdGlvbnM6IHt9CiAgICAgIH0pOwogICAgfQogICAgaWYgKCF0aGlzLnZhbHVlLnNwZWMucmtlQ29uZmlnLmRhdGFEaXJlY3RvcmllcykgewogICAgICBzZXQodGhpcy52YWx1ZS5zcGVjLnJrZUNvbmZpZywgJ2RhdGFEaXJlY3RvcmllcycsIHsKICAgICAgICBzeXN0ZW1BZ2VudDogJycsCiAgICAgICAgcHJvdmlzaW9uaW5nOiAnJywKICAgICAgICBrOHNEaXN0cm86ICcnCiAgICAgIH0pOwogICAgfQogICAgaWYgKCF0aGlzLnZhbHVlLnNwZWMucmtlQ29uZmlnLm1hY2hpbmVHbG9iYWxDb25maWcpIHsKICAgICAgc2V0KHRoaXMudmFsdWUuc3BlYywgJ3JrZUNvbmZpZy5tYWNoaW5lR2xvYmFsQ29uZmlnJywge30pOwogICAgfQogICAgaWYgKCEoKF90aGlzJHZhbHVlJHNwZWMkcmtlQyA9IHRoaXMudmFsdWUuc3BlYy5ya2VDb25maWcubWFjaGluZVNlbGVjdG9yQ29uZmlnKSAhPT0gbnVsbCAmJiBfdGhpcyR2YWx1ZSRzcGVjJHJrZUMgIT09IHZvaWQgMCAmJiBfdGhpcyR2YWx1ZSRzcGVjJHJrZUMubGVuZ3RoKSkgewogICAgICBzZXQodGhpcy52YWx1ZS5zcGVjLCAncmtlQ29uZmlnLm1hY2hpbmVTZWxlY3RvckNvbmZpZycsIFt7CiAgICAgICAgY29uZmlnOiB7fQogICAgICB9XSk7CiAgICB9CiAgICB2YXIgdHJ1bmNhdGVMaW1pdCA9IHRoaXMudmFsdWUuZGVmYXVsdEhvc3RuYW1lTGVuZ3RoTGltaXQgfHwgMDsKICAgIHJldHVybiB7CiAgICAgIGxvYWRlZE9uY2U6IGZhbHNlLAogICAgICBsYXN0SWR4OiAwLAogICAgICBhbGxQU0FzOiBbXSwKICAgICAgY3JlZGVudGlhbElkOiAnJywKICAgICAgY3JlZGVudGlhbDogbnVsbCwKICAgICAgbWFjaGluZVBvb2xzOiBudWxsLAogICAgICBya2UyVmVyc2lvbnM6IG51bGwsCiAgICAgIGszc1ZlcnNpb25zOiBudWxsLAogICAgICBkZWZhdWx0UmtlMjogJycsCiAgICAgIGRlZmF1bHRLM3M6ICcnLAogICAgICBzM0JhY2t1cDogZmFsc2UsCiAgICAgIC8qKgogICAgICAgKiBBbGwgaW5mbyByZWxhdGVkIHRvIGEgc3BlY2lmaWMgdmVyc2lvbiBvZiB0aGUgY2hhcnQKICAgICAgICoKICAgICAgICogVGhpcyBpbmNsdWRlcyBjaGFydCBpdHNlbGYsIFJFQURNRSBhbmQgdmFsdWVzCiAgICAgICAqCiAgICAgICAqIHsgW2NoYXJ0TmFtZTpzdHJpbmddOiB7IGNoYXJ0OiBqc29uLCByZWFkbWU6IHN0cmluZywgdmFsdWVzOiBqc29uIH0gfQogICAgICAgKi8KICAgICAgdmVyc2lvbkluZm86IHt9LAogICAgICBtZW1iZXJzaGlwVXBkYXRlOiB7fSwKICAgICAgc2hvd0RlcHJlY2F0ZWRQYXRjaFZlcnNpb25zOiBmYWxzZSwKICAgICAgc3lzdGVtUmVnaXN0cnk6IG51bGwsCiAgICAgIHJlZ2lzdHJ5SG9zdDogbnVsbCwKICAgICAgc2hvd0N1c3RvbVJlZ2lzdHJ5SW5wdXQ6IGZhbHNlLAogICAgICBzaG93Q3VzdG9tUmVnaXN0cnlBZHZhbmNlZElucHV0OiBmYWxzZSwKICAgICAgcmVnaXN0cnlTZWNyZXQ6IG51bGwsCiAgICAgIHVzZXJDaGFydFZhbHVlczoge30sCiAgICAgIHVzZXJDaGFydFZhbHVlc1RlbXA6IHt9LAogICAgICBhZGRvbnNSZXY6IDAsCiAgICAgIGZ2Rm9ybVJ1bGVTZXRzOiBbewogICAgICAgIHBhdGg6ICdtZXRhZGF0YS5uYW1lJywKICAgICAgICBydWxlczogWydzdWJEb21haW4nXSwKICAgICAgICB0cmFuc2xhdGlvbktleTogJ25hbWVOc0Rlc2NyaXB0aW9uLm5hbWUubGFiZWwnCiAgICAgIH1dLAogICAgICBoYXJ2ZXN0ZXJWZXJzaW9uUmFuZ2U6IHt9LAogICAgICBjaXNPdmVycmlkZTogZmFsc2UsCiAgICAgIHRydW5jYXRlTGltaXQ6IHRydW5jYXRlTGltaXQsCiAgICAgIGJ1c3k6IGZhbHNlLAogICAgICBtYWNoaW5lUG9vbFZhbGlkYXRpb246IHt9LAogICAgICAvLyBtYXAgb2YgdmFsaWRhdGlvbiBzdGF0ZXMgZm9yIGVhY2ggbWFjaGluZSBwb29sCiAgICAgIG1hY2hpbmVQb29sRXJyb3JzOiB7fSwKICAgICAgYWxsTmFtZXNwYWNlczogW10sCiAgICAgIGV4dGVuc2lvblRhYnM6IGdldEFwcGxpY2FibGVFeHRlbnNpb25FbmhhbmNlbWVudHModGhpcywgRXh0ZW5zaW9uUG9pbnQuVEFCLCBUYWJMb2NhdGlvbi5DTFVTVEVSX0NSRUFURV9SS0UyLCB0aGlzLiRyb3V0ZSwgdGhpcykKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgY2x1c3Rlck5hbWU6IGZ1bmN0aW9uIGNsdXN0ZXJOYW1lKCkgewogICAgICB2YXIgX3RoaXMkdmFsdWUkbWV0YWRhdGE7CiAgICAgIHJldHVybiAoKF90aGlzJHZhbHVlJG1ldGFkYXRhID0gdGhpcy52YWx1ZS5tZXRhZGF0YSkgPT09IG51bGwgfHwgX3RoaXMkdmFsdWUkbWV0YWRhdGEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJHZhbHVlJG1ldGFkYXRhLm5hbWUpIHx8ICcnOwogICAgfSwKICAgIHNob3dDbHVzdGVyQXBwZWFyYW5jZTogZnVuY3Rpb24gc2hvd0NsdXN0ZXJBcHBlYXJhbmNlKCkgewogICAgICByZXR1cm4gdGhpcy5tb2RlID09PSBfQ1JFQVRFOwogICAgfSwKICAgIGNsdXN0ZXJCYWRnZUFiYnJldmlhdGlvbjogZnVuY3Rpb24gY2x1c3RlckJhZGdlQWJicmV2aWF0aW9uKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuZ2V0dGVyc1snY3VzdG9taXNhdGlvbi9nZXRQcmV2aWV3Q2x1c3RlciddOwogICAgfSwKICAgIHJrZUNvbmZpZzogZnVuY3Rpb24gcmtlQ29uZmlnKCkgewogICAgICByZXR1cm4gdGhpcy52YWx1ZS5zcGVjLnJrZUNvbmZpZzsKICAgIH0sCiAgICBpc0VsZW1lbnRhbENsdXN0ZXI6IGZ1bmN0aW9uIGlzRWxlbWVudGFsQ2x1c3RlcigpIHsKICAgICAgdmFyIF90aGlzJHZhbHVlOwogICAgICByZXR1cm4gdGhpcy5wcm92aWRlciA9PT0gRUxFTUVOVEFMX0NMVVNURVJfUFJPVklERVIgfHwgKChfdGhpcyR2YWx1ZSA9IHRoaXMudmFsdWUpID09PSBudWxsIHx8IF90aGlzJHZhbHVlID09PSB2b2lkIDAgfHwgKF90aGlzJHZhbHVlID0gX3RoaXMkdmFsdWUubWFjaGluZVByb3ZpZGVyKSA9PT0gbnVsbCB8fCBfdGhpcyR2YWx1ZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkdmFsdWUudG9Mb3dlckNhc2UoKSkgPT09IEtJTkQuTUFDSElORV9JTlZfU0VMRUNUT1JfVEVNUExBVEVTLnRvTG93ZXJDYXNlKCk7CiAgICB9LAogICAgY2hhcnRWYWx1ZXM6IGZ1bmN0aW9uIGNoYXJ0VmFsdWVzKCkgewogICAgICByZXR1cm4gdGhpcy52YWx1ZS5zcGVjLnJrZUNvbmZpZy5jaGFydFZhbHVlczsKICAgIH0sCiAgICBzZXJ2ZXJDb25maWc6IGZ1bmN0aW9uIHNlcnZlckNvbmZpZygpIHsKICAgICAgcmV0dXJuIHRoaXMudmFsdWUuc3BlYy5ya2VDb25maWcubWFjaGluZUdsb2JhbENvbmZpZzsKICAgIH0sCiAgICBhZ2VudENvbmZpZzogZnVuY3Rpb24gYWdlbnRDb25maWcoKSB7CiAgICAgIHJldHVybiB0aGlzLnZhbHVlLmFnZW50Q29uZmlnOwogICAgfSwKICAgIHVuc3VwcG9ydGVkU2VsZWN0b3JDb25maWc6IGZ1bmN0aW9uIHVuc3VwcG9ydGVkU2VsZWN0b3JDb25maWcoKSB7CiAgICAgIHZhciBfdGhpcyR2YWx1ZSRzcGVjOwogICAgICB2YXIgZ2xvYmFsID0gMDsKICAgICAgdmFyIGt1YmVsZXRPbmx5ID0gMDsKICAgICAgdmFyIG90aGVyID0gMDsKCiAgICAgIC8vIFRoZSBmb3JtIHN1cHBvcnRzIG9uZSBjb25maWcgdGhhdCBoYXMgbm8gc2VsZWN0b3IgZm9yIGFsbCB0aGUgbWFpbiBwYXJ0cwogICAgICAvLyBBbmQgb25lIG9yIG1vcmUgY29uZmlncyB0aGF0IGhhdmUgYSBzZWxlY3RvciBhbmQgZXhhY3RseSBvbmx5IGt1YmVsZXQtYXJncy4KICAgICAgLy8gSWYgdGhlcmUgYXJlIGFueSBvdGhlciBwcm9wZXJ0aWVzIHNldCwgb3IgbXVsdGlwbGUgY29uZmlncyB3aXRoIG5vIHNlbGVjdG9yCiAgICAgIC8vIHNob3cgYSB3YXJuaW5nIHRoYXQgeW91J3JlIGVkaXRpbmcgb25seSBwYXJ0IG9mIHRoZSBjb25maWcgaW4gdGhlIFVJLgogICAgICB2YXIgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIoKF90aGlzJHZhbHVlJHNwZWMgPSB0aGlzLnZhbHVlLnNwZWMpID09PSBudWxsIHx8IF90aGlzJHZhbHVlJHNwZWMgPT09IHZvaWQgMCB8fCAoX3RoaXMkdmFsdWUkc3BlYyA9IF90aGlzJHZhbHVlJHNwZWMucmtlQ29uZmlnKSA9PT0gbnVsbCB8fCBfdGhpcyR2YWx1ZSRzcGVjID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyR2YWx1ZSRzcGVjLm1hY2hpbmVTZWxlY3RvckNvbmZpZyksCiAgICAgICAgX3N0ZXA7CiAgICAgIHRyeSB7CiAgICAgICAgZm9yIChfaXRlcmF0b3IucygpOyAhKF9zdGVwID0gX2l0ZXJhdG9yLm4oKSkuZG9uZTspIHsKICAgICAgICAgIHZhciBjb25mID0gX3N0ZXAudmFsdWU7CiAgICAgICAgICBpZiAoY29uZi5tYWNoaW5lTGFiZWxTZWxlY3RvcikgewogICAgICAgICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGNvbmYuY29uZmlnIHx8IHt9KTsKICAgICAgICAgICAgaWYgKGtleXMubGVuZ3RoID09PSAwIHx8IGtleXMubGVuZ3RoID09PSAxICYmIGtleXNbMF0gPT09ICdrdWJlbGV0LWFyZycpIHsKICAgICAgICAgICAgICBrdWJlbGV0T25seSsrOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIG90aGVyKys7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGdsb2JhbCsrOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGUKICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgX2l0ZXJhdG9yLmUoZXJyKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICBfaXRlcmF0b3IuZigpOwogICAgICB9CiAgICAgIGNvbnNvbGUubG9nKCJHbG9iYWw6ICIuY29uY2F0KGdsb2JhbCwgIiwgS3ViZWxldCBPbmx5OiAiKS5jb25jYXQoa3ViZWxldE9ubHksICIsIE90aGVyOiAiKS5jb25jYXQob3RoZXIpKTsKICAgICAgcmV0dXJuIGdsb2JhbCA+IDEgfHwgb3RoZXIgPiAwOwogICAgfSwKICAgIHZlcnNpb25PcHRpb25zOiBmdW5jdGlvbiB2ZXJzaW9uT3B0aW9ucygpIHsKICAgICAgdmFyIF90aGlzJGxpdmVWYWx1ZTsKICAgICAgdmFyIGN1ciA9ICgoX3RoaXMkbGl2ZVZhbHVlID0gdGhpcy5saXZlVmFsdWUpID09PSBudWxsIHx8IF90aGlzJGxpdmVWYWx1ZSA9PT0gdm9pZCAwIHx8IChfdGhpcyRsaXZlVmFsdWUgPSBfdGhpcyRsaXZlVmFsdWUuc3BlYykgPT09IG51bGwgfHwgX3RoaXMkbGl2ZVZhbHVlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRsaXZlVmFsdWUua3ViZXJuZXRlc1ZlcnNpb24pIHx8ICcnOwogICAgICB2YXIgZXhpc3RpbmdSa2UyID0gdGhpcy5tb2RlID09PSBfRURJVCAmJiBjdXIuaW5jbHVkZXMoJ3JrZTInKTsKICAgICAgdmFyIGV4aXN0aW5nSzNzID0gdGhpcy5tb2RlID09PSBfRURJVCAmJiBjdXIuaW5jbHVkZXMoJ2szcycpOwogICAgICB2YXIgYWxsVmFsaWRSa2UyVmVyc2lvbnMgPSB0aGlzLmdldEFsbE9wdGlvbnNBZnRlckN1cnJlbnRWZXJzaW9uKHRoaXMucmtlMlZlcnNpb25zLCBleGlzdGluZ1JrZTIgPyBjdXIgOiBudWxsLCB0aGlzLmRlZmF1bHRSa2UyKTsKICAgICAgdmFyIGFsbFZhbGlkSzNzVmVyc2lvbnMgPSB0aGlzLmdldEFsbE9wdGlvbnNBZnRlckN1cnJlbnRWZXJzaW9uKHRoaXMuazNzVmVyc2lvbnMsIGV4aXN0aW5nSzNzID8gY3VyIDogbnVsbCwgdGhpcy5kZWZhdWx0SzNzKTsKICAgICAgaWYgKCF0aGlzLnNob3dEZXByZWNhdGVkUGF0Y2hWZXJzaW9ucykgewogICAgICAgIC8vIE5vcm1hbGx5LCB3ZSBvbmx5IHdhbnQgdG8gc2hvdyB0aGUgbW9zdCByZWNlbnQgcGF0Y2ggdmVyc2lvbgogICAgICAgIC8vIGZvciBlYWNoIEt1YmVybmV0ZXMgbWlub3IgdmVyc2lvbi4gSG93ZXZlciwgaWYgdGhlIHVzZXIKICAgICAgICAvLyBvcHRzIGluIHRvIHNob3dpbmcgZGVwcmVjYXRlZCB2ZXJzaW9ucywgd2UgZG9uJ3QgZmlsdGVyIHRoZW0uCiAgICAgICAgYWxsVmFsaWRSa2UyVmVyc2lvbnMgPSB0aGlzLmZpbHRlck91dERlcHJlY2F0ZWRQYXRjaFZlcnNpb25zKGFsbFZhbGlkUmtlMlZlcnNpb25zLCBjdXIpOwogICAgICAgIGFsbFZhbGlkSzNzVmVyc2lvbnMgPSB0aGlzLmZpbHRlck91dERlcHJlY2F0ZWRQYXRjaFZlcnNpb25zKGFsbFZhbGlkSzNzVmVyc2lvbnMsIGN1cik7CiAgICAgIH0KICAgICAgdmFyIHNob3dSa2UyID0gYWxsVmFsaWRSa2UyVmVyc2lvbnMubGVuZ3RoICYmICFleGlzdGluZ0szczsKICAgICAgdmFyIHNob3dLM3MgPSBhbGxWYWxpZEszc1ZlcnNpb25zLmxlbmd0aCAmJiAhZXhpc3RpbmdSa2UyOwogICAgICB2YXIgb3V0ID0gW107CiAgICAgIGlmIChzaG93UmtlMikgewogICAgICAgIGlmIChzaG93SzNzKSB7CiAgICAgICAgICBvdXQucHVzaCh7CiAgICAgICAgICAgIGtpbmQ6ICdncm91cCcsCiAgICAgICAgICAgIGxhYmVsOiB0aGlzLnQoJ2NsdXN0ZXIucHJvdmlkZXIucmtlMicpCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgb3V0LnB1c2guYXBwbHkob3V0LCBfdG9Db25zdW1hYmxlQXJyYXkoYWxsVmFsaWRSa2UyVmVyc2lvbnMpKTsKICAgICAgfQogICAgICBpZiAoc2hvd0szcykgewogICAgICAgIGlmIChzaG93UmtlMikgewogICAgICAgICAgb3V0LnB1c2goewogICAgICAgICAgICBraW5kOiAnZ3JvdXAnLAogICAgICAgICAgICBsYWJlbDogdGhpcy50KCdjbHVzdGVyLnByb3ZpZGVyLmszcycpCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgb3V0LnB1c2guYXBwbHkob3V0LCBfdG9Db25zdW1hYmxlQXJyYXkoYWxsVmFsaWRLM3NWZXJzaW9ucykpOwogICAgICB9CiAgICAgIGlmIChjdXIpIHsKICAgICAgICB2YXIgZXhpc3RpbmcgPSBvdXQuZmluZChmdW5jdGlvbiAoeCkgewogICAgICAgICAgcmV0dXJuIHgudmFsdWUgPT09IGN1cjsKICAgICAgICB9KTsKICAgICAgICBpZiAoZXhpc3RpbmcpIHsKICAgICAgICAgIGV4aXN0aW5nLmRpc2FibGVkID0gZmFsc2U7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBvdXQ7CiAgICB9LAogICAgLyoqCiAgICAgKiBLdWJlIFZlcnNpb24KICAgICAqLwogICAgc2VsZWN0ZWRWZXJzaW9uOiBmdW5jdGlvbiBzZWxlY3RlZFZlcnNpb24oKSB7CiAgICAgIHZhciBfb3V0JHNlcnZlckFyZ3MsIF9vdXQkc2VydmVyQXJnczI7CiAgICAgIHZhciBzdHIgPSB0aGlzLnZhbHVlLnNwZWMua3ViZXJuZXRlc1ZlcnNpb247CiAgICAgIGlmICghc3RyKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHZhciBvdXQgPSBmaW5kQnkodGhpcy52ZXJzaW9uT3B0aW9ucywgJ3ZhbHVlJywgc3RyKTsKCiAgICAgIC8vIEFkZGluZyB0aGUgb3B0aW9uICdub25lJyB0byBDb250YWluZXIgTmV0d29yayBzZWxlY3QgKHVzZWQgaW4gQmFzaWNzIGNvbXBvbmVudCkKICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3JhbmNoZXIvZGFzaGJvYXJkL2lzc3Vlcy8xMDMzOAogICAgICAvLyB0aGVyZSdzIGFuIHVwZGF0ZSBsb29wIG9uIHJlZnJlc2ggdGhhdCBtaWdodCBpbmNsdWRlICdub25lJwogICAgICAvLyBtdWx0aXBsZSB0aW1lcy4uLiBQcmV2ZW50IHRoYXQKICAgICAgaWYgKChfb3V0JHNlcnZlckFyZ3MgPSBvdXQuc2VydmVyQXJncykgIT09IG51bGwgJiYgX291dCRzZXJ2ZXJBcmdzICE9PSB2b2lkIDAgJiYgKF9vdXQkc2VydmVyQXJncyA9IF9vdXQkc2VydmVyQXJncy5jbmkpICE9PSBudWxsICYmIF9vdXQkc2VydmVyQXJncyAhPT0gdm9pZCAwICYmIF9vdXQkc2VydmVyQXJncy5vcHRpb25zICYmICEoKF9vdXQkc2VydmVyQXJnczIgPSBvdXQuc2VydmVyQXJncykgIT09IG51bGwgJiYgX291dCRzZXJ2ZXJBcmdzMiAhPT0gdm9pZCAwICYmIChfb3V0JHNlcnZlckFyZ3MyID0gX291dCRzZXJ2ZXJBcmdzMi5jbmkpICE9PSBudWxsICYmIF9vdXQkc2VydmVyQXJnczIgIT09IHZvaWQgMCAmJiBfb3V0JHNlcnZlckFyZ3MyLm9wdGlvbnMuaW5jbHVkZXMoJ25vbmUnKSkpIHsKICAgICAgICBvdXQuc2VydmVyQXJncy5jbmkub3B0aW9ucy5wdXNoKCdub25lJyk7CiAgICAgIH0KICAgICAgcmV0dXJuIG91dDsKICAgIH0sCiAgICBoYXZlQXJnSW5mbzogZnVuY3Rpb24gaGF2ZUFyZ0luZm8oKSB7CiAgICAgIHZhciBfdGhpcyRzZWxlY3RlZFZlcnNpb24sIF90aGlzJHNlbGVjdGVkVmVyc2lvbjI7CiAgICAgIHJldHVybiBCb29sZWFuKCgoX3RoaXMkc2VsZWN0ZWRWZXJzaW9uID0gdGhpcy5zZWxlY3RlZFZlcnNpb24pID09PSBudWxsIHx8IF90aGlzJHNlbGVjdGVkVmVyc2lvbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkc2VsZWN0ZWRWZXJzaW9uLnNlcnZlckFyZ3MpICYmICgoX3RoaXMkc2VsZWN0ZWRWZXJzaW9uMiA9IHRoaXMuc2VsZWN0ZWRWZXJzaW9uKSA9PT0gbnVsbCB8fCBfdGhpcyRzZWxlY3RlZFZlcnNpb24yID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRzZWxlY3RlZFZlcnNpb24yLmFnZW50QXJncykpOwogICAgfSwKICAgIHNlcnZlckFyZ3M6IGZ1bmN0aW9uIHNlcnZlckFyZ3MoKSB7CiAgICAgIHZhciBfdGhpcyRzZWxlY3RlZFZlcnNpb24zOwogICAgICByZXR1cm4gKChfdGhpcyRzZWxlY3RlZFZlcnNpb24zID0gdGhpcy5zZWxlY3RlZFZlcnNpb24pID09PSBudWxsIHx8IF90aGlzJHNlbGVjdGVkVmVyc2lvbjMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJHNlbGVjdGVkVmVyc2lvbjMuc2VydmVyQXJncykgfHwge307CiAgICB9LAogICAgYWdlbnRBcmdzOiBmdW5jdGlvbiBhZ2VudEFyZ3MoKSB7CiAgICAgIHZhciBfdGhpcyRzZWxlY3RlZFZlcnNpb240OwogICAgICByZXR1cm4gKChfdGhpcyRzZWxlY3RlZFZlcnNpb240ID0gdGhpcy5zZWxlY3RlZFZlcnNpb24pID09PSBudWxsIHx8IF90aGlzJHNlbGVjdGVkVmVyc2lvbjQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJHNlbGVjdGVkVmVyc2lvbjQuYWdlbnRBcmdzKSB8fCB7fTsKICAgIH0sCiAgICAvKioKICAgICAqIFRoZSBhZGRvbnMgKGt1YmUgY2hhcnRzKSBhcHBsaWNhYmxlIGZvciB0aGUgc2VsZWN0ZWQga3ViZSB2ZXJzaW9uCiAgICAgKgogICAgICogeyBbY2hhcnROYW1lOnN0cmluZ106IHsgcmVwbzogc3RyaW5nLCB2ZXJzaW9uOiBzdHJpbmcgfSB9CiAgICAgKi8KICAgIGNoYXJ0VmVyc2lvbnM6IGZ1bmN0aW9uIGNoYXJ0VmVyc2lvbnMoKSB7CiAgICAgIHZhciBfdGhpcyRzZWxlY3RlZFZlcnNpb241OwogICAgICByZXR1cm4gKChfdGhpcyRzZWxlY3RlZFZlcnNpb241ID0gdGhpcy5zZWxlY3RlZFZlcnNpb24pID09PSBudWxsIHx8IF90aGlzJHNlbGVjdGVkVmVyc2lvbjUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJHNlbGVjdGVkVmVyc2lvbjUuY2hhcnRzKSB8fCB7fTsKICAgIH0sCiAgICBuZWVkQ3JlZGVudGlhbDogZnVuY3Rpb24gbmVlZENyZWRlbnRpYWwoKSB7CiAgICAgIHZhciBfdGhpcyRwcm92aWRlckNvbmZpZywgX3RoaXMkcHJvdmlkZXJDb25maWcyOwogICAgICBpZiAodGhpcy5wcm92aWRlciA9PT0gJ2N1c3RvbScgfHwgdGhpcy5wcm92aWRlciA9PT0gJ2ltcG9ydCcgfHwgdGhpcy5pc0VsZW1lbnRhbENsdXN0ZXIgfHwgdGhpcy5tb2RlID09PSBfVklFVyB8fCAoKF90aGlzJHByb3ZpZGVyQ29uZmlnID0gdGhpcy5wcm92aWRlckNvbmZpZykgPT09IG51bGwgfHwgX3RoaXMkcHJvdmlkZXJDb25maWcgPT09IHZvaWQgMCB8fCAoX3RoaXMkcHJvdmlkZXJDb25maWcgPSBfdGhpcyRwcm92aWRlckNvbmZpZy5zcGVjKSA9PT0gbnVsbCB8fCBfdGhpcyRwcm92aWRlckNvbmZpZyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkcHJvdmlkZXJDb25maWcuYnVpbHRpbikgPT09IGZhbHNlICYmICgoX3RoaXMkcHJvdmlkZXJDb25maWcyID0gdGhpcy5wcm92aWRlckNvbmZpZykgPT09IG51bGwgfHwgX3RoaXMkcHJvdmlkZXJDb25maWcyID09PSB2b2lkIDAgfHwgKF90aGlzJHByb3ZpZGVyQ29uZmlnMiA9IF90aGlzJHByb3ZpZGVyQ29uZmlnMi5zcGVjKSA9PT0gbnVsbCB8fCBfdGhpcyRwcm92aWRlckNvbmZpZzIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJHByb3ZpZGVyQ29uZmlnMi5hZGRDbG91ZENyZWRlbnRpYWwpID09PSBmYWxzZSkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICBpZiAodGhpcy5jdXN0b21DcmVkZW50aWFsQ29tcG9uZW50UmVxdWlyZWQgPT09IGZhbHNlKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIHJldHVybiB0cnVlOwogICAgfSwKICAgIC8qKgogICAgICogT25seSBmb3IgZXh0ZW5zaW9ucyAtIGV4dGVuc2lvbiBjYW4gcmVnaXN0ZXIgYSAnZmFsc2UnIGNsb3VkIGNyZWRlbnRpYWwgdG8gaW5kaWNhdGUgdGhhdCBhIGNsb3VkIGNyZWRlbnRpYWwgaXMgbm90IG5lZWRlZAogICAgICovCiAgICBjdXN0b21DcmVkZW50aWFsQ29tcG9uZW50UmVxdWlyZWQ6IGZ1bmN0aW9uIGN1c3RvbUNyZWRlbnRpYWxDb21wb25lbnRSZXF1aXJlZCgpIHsKICAgICAgcmV0dXJuIHRoaXMuJHBsdWdpbi5nZXREeW5hbWljKCdjbG91ZC1jcmVkZW50aWFsJywgdGhpcy5wcm92aWRlcik7CiAgICB9LAogICAgaGFzTWFjaGluZVBvb2xzOiBmdW5jdGlvbiBoYXNNYWNoaW5lUG9vbHMoKSB7CiAgICAgIGlmICh0aGlzLnByb3ZpZGVyID09PSAnY3VzdG9tJyB8fCB0aGlzLnByb3ZpZGVyID09PSAnaW1wb3J0JykgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0sCiAgICB1bnJlbW92ZWRNYWNoaW5lUG9vbHM6IGZ1bmN0aW9uIHVucmVtb3ZlZE1hY2hpbmVQb29scygpIHsKICAgICAgcmV0dXJuICh0aGlzLm1hY2hpbmVQb29scyB8fCBbXSkuZmlsdGVyKGZ1bmN0aW9uICh4KSB7CiAgICAgICAgcmV0dXJuICF4LnJlbW92ZTsKICAgICAgfSk7CiAgICB9LAogICAgLyoqCiAgICAgKiBFeHRlbnNpb24gcHJvdmlkZXIgd2hlcmUgYmVpbmcgcHJvdmlzaW9uZWQgYnkgYW4gZXh0ZW5zaW9uCiAgICAgKi8KICAgIGV4dGVuc2lvblByb3ZpZGVyOiBmdW5jdGlvbiBleHRlbnNpb25Qcm92aWRlcigpIHsKICAgICAgdmFyIGV4dENsYXNzID0gdGhpcy4kcGx1Z2luLmdldER5bmFtaWMoJ3Byb3Zpc2lvbmVyJywgdGhpcy5wcm92aWRlcik7CiAgICAgIGlmIChleHRDbGFzcykgewogICAgICAgIHJldHVybiBuZXcgZXh0Q2xhc3MoewogICAgICAgICAgZGlzcGF0Y2g6IHRoaXMuJHN0b3JlLmRpc3BhdGNoLAogICAgICAgICAgZ2V0dGVyczogdGhpcy4kc3RvcmUuZ2V0dGVycywKICAgICAgICAgIGF4aW9zOiB0aGlzLiRzdG9yZS4kYXhpb3MsCiAgICAgICAgICAkcGx1Z2luOiB0aGlzLiRzdG9yZS5hcHAuJHBsdWdpbiwKICAgICAgICAgICR0OiB0aGlzLnQsCiAgICAgICAgICBpc0NyZWF0ZTogdGhpcy5pc0NyZWF0ZQogICAgICAgIH0pOwogICAgICB9CiAgICAgIHJldHVybiB1bmRlZmluZWQ7CiAgICB9LAogICAgLyoqCiAgICAgKiBJcyBhIG5hbWVzcGFjZSBuZWVkZWQ/IE9ubHkgc3VwcG9ydGVkIGZvciBwcm92aWRlcnMgZnJvbSBleHRlbnNpb25zLCBvdGhlcndpc2UgZGVmYXVsdCBpcyBubwogICAgICovCiAgICBuZWVkc05hbWVzcGFjZTogZnVuY3Rpb24gbmVlZHNOYW1lc3BhY2UoKSB7CiAgICAgIHJldHVybiB0aGlzLmV4dGVuc2lvblByb3ZpZGVyID8gISF0aGlzLmV4dGVuc2lvblByb3ZpZGVyLm5hbWVzcGFjZWQgOiBmYWxzZTsKICAgIH0sCiAgICBtYWNoaW5lQ29uZmlnU2NoZW1hOiBmdW5jdGlvbiBtYWNoaW5lQ29uZmlnU2NoZW1hKCkgewogICAgICB2YXIgX3RoaXMkZXh0ZW5zaW9uUHJvdmlkOwogICAgICB2YXIgc2NoZW1hOwogICAgICBpZiAoIXRoaXMuaGFzTWFjaGluZVBvb2xzKSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0gZWxzZSBpZiAodGhpcy5pc0VsZW1lbnRhbENsdXN0ZXIpIHsKICAgICAgICBzY2hlbWEgPSBFTEVNRU5UQUxfU0NIRU1BX0lEUy5NQUNISU5FX0lOVl9TRUxFQ1RPUl9URU1QTEFURVM7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgc2NoZW1hID0gIiIuY29uY2F0KENBUEkuTUFDSElORV9DT05GSUdfR1JPVVAsICIuIikuY29uY2F0KHRoaXMucHJvdmlkZXIsICJjb25maWciKTsKICAgICAgfQoKICAgICAgLy8gSWYgdGhpcyBpcyBhbiBleHRlbnNpb24gcHJvdmlkZXIgdGhlbiB0aGUgZXh0ZW5zaW9uIGNhbiBwcm92aWRlIHRoZSBzY2hlbWEKICAgICAgdmFyIGV4dGVuc2lvblNjaGVtYSA9IChfdGhpcyRleHRlbnNpb25Qcm92aWQgPSB0aGlzLmV4dGVuc2lvblByb3ZpZGVyKSA9PT0gbnVsbCB8fCBfdGhpcyRleHRlbnNpb25Qcm92aWQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJGV4dGVuc2lvblByb3ZpZC5tYWNoaW5lQ29uZmlnU2NoZW1hOwogICAgICBpZiAoZXh0ZW5zaW9uU2NoZW1hKSB7CiAgICAgICAgLy8gbWFjaGluZUNvbmZpZ1NjaGVtYSBjYW4gZWl0aGVyIGJlIHRoZSBzY2hlbWEgbmFtZSAoc3RyaW5nKSBvciB0aGUgc2NoZW1hIGl0c2VsZiAob2JqZWN0KQogICAgICAgIGlmIChfdHlwZW9mKGV4dGVuc2lvblNjaGVtYSkgPT09ICdvYmplY3QnKSB7CiAgICAgICAgICByZXR1cm4gZXh0ZW5zaW9uU2NoZW1hOwogICAgICAgIH0KCiAgICAgICAgLy8gTmFtZSBvZiBzY2hlbWEgdG8gdXNlCiAgICAgICAgc2NoZW1hID0gZXh0ZW5zaW9uU2NoZW1hOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5nZXR0ZXJzWydtYW5hZ2VtZW50L3NjaGVtYUZvciddKHNjaGVtYSk7CiAgICB9LAogICAgbm9kZVRvdGFsczogZnVuY3Rpb24gbm9kZVRvdGFscygpIHsKICAgICAgdmFyIHJvbGVzID0gWydldGNkJywgJ2NvbnRyb2xQbGFuZScsICd3b3JrZXInXTsKICAgICAgdmFyIGNvdW50cyA9IHt9OwogICAgICB2YXIgb3V0ID0gewogICAgICAgIGNvbG9yOiB7fSwKICAgICAgICBsYWJlbDoge30sCiAgICAgICAgaWNvbjoge30sCiAgICAgICAgdG9vbHRpcDoge30KICAgICAgfTsKICAgICAgZm9yICh2YXIgX2kgPSAwLCBfcm9sZXMgPSByb2xlczsgX2kgPCBfcm9sZXMubGVuZ3RoOyBfaSsrKSB7CiAgICAgICAgdmFyIHJvbGUgPSBfcm9sZXNbX2ldOwogICAgICAgIGNvdW50c1tyb2xlXSA9IDA7CiAgICAgICAgb3V0LmNvbG9yW3JvbGVdID0gTk9ERV9UT1RBTC5zdWNjZXNzLmNvbG9yOwogICAgICAgIG91dC5pY29uW3JvbGVdID0gTk9ERV9UT1RBTC5zdWNjZXNzLmljb247CiAgICAgIH0KICAgICAgdmFyIF9pdGVyYXRvcjIgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcih0aGlzLm1hY2hpbmVQb29scyB8fCBbXSksCiAgICAgICAgX3N0ZXAyOwogICAgICB0cnkgewogICAgICAgIGZvciAoX2l0ZXJhdG9yMi5zKCk7ICEoX3N0ZXAyID0gX2l0ZXJhdG9yMi5uKCkpLmRvbmU7KSB7CiAgICAgICAgICB2YXIgcm93ID0gX3N0ZXAyLnZhbHVlOwogICAgICAgICAgaWYgKHJvdy5yZW1vdmUpIHsKICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICB9CiAgICAgICAgICB2YXIgcXR5ID0gcGFyc2VJbnQocm93LnBvb2wucXVhbnRpdHksIDEwKTsKICAgICAgICAgIGlmIChpc05hTihxdHkpKSB7CiAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgfQogICAgICAgICAgdmFyIF9pdGVyYXRvcjMgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihyb2xlcyksCiAgICAgICAgICAgIF9zdGVwMzsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIGZvciAoX2l0ZXJhdG9yMy5zKCk7ICEoX3N0ZXAzID0gX2l0ZXJhdG9yMy5uKCkpLmRvbmU7KSB7CiAgICAgICAgICAgICAgdmFyIF9yb2xlMiA9IF9zdGVwMy52YWx1ZTsKICAgICAgICAgICAgICBjb3VudHNbX3JvbGUyXSA9IGNvdW50c1tfcm9sZTJdICsgKHJvdy5wb29sWyIiLmNvbmNhdChfcm9sZTIsICJSb2xlIildID8gcXR5IDogMCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgICBfaXRlcmF0b3IzLmUoZXJyKTsKICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgIF9pdGVyYXRvcjMuZigpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgX2l0ZXJhdG9yMi5lKGVycik7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgX2l0ZXJhdG9yMi5mKCk7CiAgICAgIH0KICAgICAgZm9yICh2YXIgX2kyID0gMCwgX3JvbGVzMiA9IHJvbGVzOyBfaTIgPCBfcm9sZXMyLmxlbmd0aDsgX2kyKyspIHsKICAgICAgICB2YXIgX3JvbGUgPSBfcm9sZXMyW19pMl07CiAgICAgICAgb3V0LmxhYmVsW19yb2xlXSA9IHRoaXMudCgiY2x1c3Rlci5tYWNoaW5lUG9vbC5ub2RlVG90YWxzLmxhYmVsLiIuY29uY2F0KF9yb2xlKSwgewogICAgICAgICAgY291bnQ6IGNvdW50c1tfcm9sZV0KICAgICAgICB9KTsKICAgICAgICBvdXQudG9vbHRpcFtfcm9sZV0gPSB0aGlzLnQoImNsdXN0ZXIubWFjaGluZVBvb2wubm9kZVRvdGFscy50b29sdGlwLiIuY29uY2F0KF9yb2xlKSwgewogICAgICAgICAgY291bnQ6IGNvdW50c1tfcm9sZV0KICAgICAgICB9KTsKICAgICAgfQogICAgICBpZiAoY291bnRzLmV0Y2QgPT09IDApIHsKICAgICAgICBvdXQuY29sb3IuZXRjZCA9IE5PREVfVE9UQUwuZXJyb3IuY29sb3I7CiAgICAgICAgb3V0Lmljb24uZXRjZCA9IE5PREVfVE9UQUwuZXJyb3IuaWNvbjsKICAgICAgfSBlbHNlIGlmIChjb3VudHMuZXRjZCA9PT0gMSB8fCBjb3VudHMuZXRjZCAlIDIgPT09IDAgfHwgY291bnRzLmV0Y2QgPiA3KSB7CiAgICAgICAgb3V0LmNvbG9yLmV0Y2QgPSBOT0RFX1RPVEFMLndhcm5pbmcuY29sb3I7CiAgICAgICAgb3V0Lmljb24uZXRjZCA9IE5PREVfVE9UQUwud2FybmluZy5pY29uOwogICAgICB9CiAgICAgIGlmIChjb3VudHMuY29udHJvbFBsYW5lID09PSAwKSB7CiAgICAgICAgb3V0LmNvbG9yLmNvbnRyb2xQbGFuZSA9IE5PREVfVE9UQUwuZXJyb3IuY29sb3I7CiAgICAgICAgb3V0Lmljb24uY29udHJvbFBsYW5lID0gTk9ERV9UT1RBTC5lcnJvci5pY29uOwogICAgICB9IGVsc2UgaWYgKGNvdW50cy5jb250cm9sUGxhbmUgPT09IDEpIHsKICAgICAgICBvdXQuY29sb3IuY29udHJvbFBsYW5lID0gTk9ERV9UT1RBTC53YXJuaW5nLmNvbG9yOwogICAgICAgIG91dC5pY29uLmNvbnRyb2xQbGFuZSA9IE5PREVfVE9UQUwud2FybmluZy5pY29uOwogICAgICB9CiAgICAgIGlmIChjb3VudHMud29ya2VyID09PSAwKSB7CiAgICAgICAgb3V0LmNvbG9yLndvcmtlciA9IE5PREVfVE9UQUwuZXJyb3IuY29sb3I7CiAgICAgICAgb3V0Lmljb24ud29ya2VyID0gTk9ERV9UT1RBTC5lcnJvci5pY29uOwogICAgICB9IGVsc2UgaWYgKGNvdW50cy53b3JrZXIgPT09IDEpIHsKICAgICAgICBvdXQuY29sb3Iud29ya2VyID0gTk9ERV9UT1RBTC53YXJuaW5nLmNvbG9yOwogICAgICAgIG91dC5pY29uLndvcmtlciA9IE5PREVfVE9UQUwud2FybmluZy5pY29uOwogICAgICB9CiAgICAgIHJldHVybiBvdXQ7CiAgICB9LAogICAgc2hvd0NuaTogZnVuY3Rpb24gc2hvd0NuaSgpIHsKICAgICAgcmV0dXJuICEhdGhpcy5zZXJ2ZXJBcmdzLmNuaTsKICAgIH0sCiAgICBzaG93Q2xvdWRQcm92aWRlcjogZnVuY3Rpb24gc2hvd0Nsb3VkUHJvdmlkZXIoKSB7CiAgICAgIHJldHVybiAhIXRoaXMuYWdlbnRBcmdzWydjbG91ZC1wcm92aWRlci1uYW1lJ107CiAgICB9LAogICAgLyoqCiAgICAgKiBUaGUgY2hhcnQgbmFtZXMgb2YgdGhlIGFkZG9ucyBhcHBsaWNhYmxlIHRvIHRoZSBjdXJyZW50IGt1YmUgdmVyc2lvbiBhbmQgc2VsZWN0ZWQgY2xvdWQgcHJvdmlkZXIKICAgICAqLwogICAgYWRkb25OYW1lczogZnVuY3Rpb24gYWRkb25OYW1lcygpIHsKICAgICAgdmFyIG5hbWVzID0gW107CiAgICAgIHZhciBjbmkgPSB0aGlzLnNlcnZlckNvbmZpZy5jbmk7CiAgICAgIGlmICh0eXBlb2YgY25pID09PSAnc3RyaW5nJykgewogICAgICAgIG5hbWVzLnB1c2guYXBwbHkobmFtZXMsIF90b0NvbnN1bWFibGVBcnJheShjbmkuc3BsaXQoJywnKS5tYXAoZnVuY3Rpb24gKHgpIHsKICAgICAgICAgIHJldHVybiAicmtlMi0iLmNvbmNhdCh4KTsKICAgICAgICB9KSkpOwogICAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoY25pKSkgewogICAgICAgIG5hbWVzLnB1c2guYXBwbHkobmFtZXMsIF90b0NvbnN1bWFibGVBcnJheShjbmkubWFwKGZ1bmN0aW9uICh4KSB7CiAgICAgICAgICByZXR1cm4gInJrZTItIi5jb25jYXQoeCk7CiAgICAgICAgfSkpKTsKICAgICAgfQogICAgICBpZiAodGhpcy5zaG93Q2xvdWRQcm92aWRlcikgewogICAgICAgIHZhciBfdGhpcyRhZ2VudENvbmZpZywgX3RoaXMkYWdlbnRDb25maWcyOwogICAgICAgIC8vIFNob3VsZG4ndCBiZSByZW1vdmVkIHN1Y2ggdGhhdCBjaGFuZ2VzIHRvIGl0IHdpbGwgcmUtdHJpZ2dlciB0aGlzIHdhdGNoCiAgICAgICAgaWYgKCgoX3RoaXMkYWdlbnRDb25maWcgPSB0aGlzLmFnZW50Q29uZmlnKSA9PT0gbnVsbCB8fCBfdGhpcyRhZ2VudENvbmZpZyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkYWdlbnRDb25maWdbJ2Nsb3VkLXByb3ZpZGVyLW5hbWUnXSkgPT09ICdyYW5jaGVyLXZzcGhlcmUnKSB7CiAgICAgICAgICBuYW1lcy5wdXNoKCdyYW5jaGVyLXZzcGhlcmUtY3BpJywgJ3JhbmNoZXItdnNwaGVyZS1jc2knKTsKICAgICAgICB9CiAgICAgICAgaWYgKCgoX3RoaXMkYWdlbnRDb25maWcyID0gdGhpcy5hZ2VudENvbmZpZykgPT09IG51bGwgfHwgX3RoaXMkYWdlbnRDb25maWcyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRhZ2VudENvbmZpZzJbJ2Nsb3VkLXByb3ZpZGVyLW5hbWUnXSkgPT09IEhBUlZFU1RFUikgewogICAgICAgICAgbmFtZXMucHVzaChIQVJWRVNURVJfQ0xPVURfUFJPVklERVIpOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gbmFtZXM7CiAgICB9LAogICAgLyoqCiAgICAgKiBUaGUgY2hhcnRzIG9mIHRoZSBhZGRvbnMgYXBwbGljYWJsZSB0byB0aGUgY3VycmVudCBrdWJlIHZlcnNpb24gYW5kIHNlbGVjdGVkIGNsb3VkIHByb3ZpZGVyCiAgICAgKgogICAgICogVGhlc2UgYXJlIHRoZSBjaGFydHMgdGhlbXNlbHZlcyBhbmQgZG8gbm90IGluY2x1ZGUgY2hhcnQgcmVhZG1lIG9yIHZhbHVlcwogICAgICovCiAgICBhZGRvblZlcnNpb25zOiBmdW5jdGlvbiBhZGRvblZlcnNpb25zKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKICAgICAgdmFyIHZlcnNpb25zID0gdGhpcy5hZGRvbk5hbWVzLm1hcChmdW5jdGlvbiAobmFtZSkgewogICAgICAgIHZhciBfdGhpczIkdmVyc2lvbkluZm8kbmE7CiAgICAgICAgcmV0dXJuIChfdGhpczIkdmVyc2lvbkluZm8kbmEgPSBfdGhpczIudmVyc2lvbkluZm9bbmFtZV0pID09PSBudWxsIHx8IF90aGlzMiR2ZXJzaW9uSW5mbyRuYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMyJHZlcnNpb25JbmZvJG5hLmNoYXJ0OwogICAgICB9KTsKICAgICAgcmV0dXJuIHZlcnNpb25zLmZpbHRlcihmdW5jdGlvbiAoeCkgewogICAgICAgIHJldHVybiAhIXg7CiAgICAgIH0pOwogICAgfSwKICAgIGNsb3VkUHJvdmlkZXJPcHRpb25zOiBmdW5jdGlvbiBjbG91ZFByb3ZpZGVyT3B0aW9ucygpIHsKICAgICAgdmFyIF90aGlzJGFnZW50QXJncyRjbG91ZCwgX3RoaXMkYWdlbnRDb25maWczOwogICAgICB2YXIgb3V0ID0gW3sKICAgICAgICBsYWJlbDogdGhpcy4kc3RvcmUuZ2V0dGVyc1snaTE4bi90J10oJ2NsdXN0ZXIucmtlMi5jbG91ZFByb3ZpZGVyLmRlZmF1bHRWYWx1ZS5sYWJlbCcpLAogICAgICAgIHZhbHVlOiAnJwogICAgICB9XTsKICAgICAgaWYgKCEhKChfdGhpcyRhZ2VudEFyZ3MkY2xvdWQgPSB0aGlzLmFnZW50QXJnc1snY2xvdWQtcHJvdmlkZXItbmFtZSddKSAhPT0gbnVsbCAmJiBfdGhpcyRhZ2VudEFyZ3MkY2xvdWQgIT09IHZvaWQgMCAmJiBfdGhpcyRhZ2VudEFyZ3MkY2xvdWQub3B0aW9ucykpIHsKICAgICAgICB2YXIgX3RoaXMkYWdlbnRBcmdzJGNsb3VkMjsKICAgICAgICB2YXIgcHJlZmVycmVkID0gdGhpcy4kc3RvcmUuZ2V0dGVyc1sncGx1Z2lucy9jbG91ZFByb3ZpZGVyRm9yRHJpdmVyJ10odGhpcy5wcm92aWRlcik7CiAgICAgICAgdmFyIF9pdGVyYXRvcjQgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcigoX3RoaXMkYWdlbnRBcmdzJGNsb3VkMiA9IHRoaXMuYWdlbnRBcmdzWydjbG91ZC1wcm92aWRlci1uYW1lJ10pID09PSBudWxsIHx8IF90aGlzJGFnZW50QXJncyRjbG91ZDIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJGFnZW50QXJncyRjbG91ZDIub3B0aW9ucyksCiAgICAgICAgICBfc3RlcDQ7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIGZvciAoX2l0ZXJhdG9yNC5zKCk7ICEoX3N0ZXA0ID0gX2l0ZXJhdG9yNC5uKCkpLmRvbmU7KSB7CiAgICAgICAgICAgIHZhciBvcHQgPSBfc3RlcDQudmFsdWU7CiAgICAgICAgICAgIC8vIElmIHdlIGRvbid0IGhhdmUgYSBwcmVmZXJyZWQgcHJvdmlkZXIuLi4gc2hvdyBhbGwgb3B0aW9ucwogICAgICAgICAgICB2YXIgc2hvd0FsbE9wdGlvbnMgPSBwcmVmZXJyZWQgPT09IHVuZGVmaW5lZDsKICAgICAgICAgICAgLy8gSWYgd2UgaGF2ZSBhIHByZWZlcnJlZCBwcm92aWRlci4uLiBvbmx5IHNob3cgZGVmYXVsdCwgcHJlZmVycmVkIGFuZCBleHRlcm5hbAogICAgICAgICAgICB2YXIgaXNQcmVmZXJyZWQgPSBvcHQgPT09IHByZWZlcnJlZDsKICAgICAgICAgICAgdmFyIGlzRXh0ZXJuYWwgPSBvcHQgPT09ICdleHRlcm5hbCc7CiAgICAgICAgICAgIHZhciBkaXNhYmxlZCA9IGZhbHNlOwogICAgICAgICAgICBpZiAoKHRoaXMuaXNIYXJ2ZXN0ZXJFeHRlcm5hbENyZWRlbnRpYWwgfHwgdGhpcy5pc0hhcnZlc3RlckluY29tcGF0aWJsZSkgJiYgaXNQcmVmZXJyZWQpIHsKICAgICAgICAgICAgICBkaXNhYmxlZCA9IHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHNob3dBbGxPcHRpb25zIHx8IGlzUHJlZmVycmVkIHx8IGlzRXh0ZXJuYWwpIHsKICAgICAgICAgICAgICBvdXQucHVzaCh7CiAgICAgICAgICAgICAgICBsYWJlbDogdGhpcy4kc3RvcmUuZ2V0dGVyc1snaTE4bi93aXRoRmFsbGJhY2snXSgiY2x1c3Rlci5jbG91ZFByb3ZpZGVyLlwiIi5jb25jYXQob3B0LCAiXCIubGFiZWwiKSwgbnVsbCwgb3B0KSwKICAgICAgICAgICAgICAgIHZhbHVlOiBvcHQsCiAgICAgICAgICAgICAgICBkaXNhYmxlZDogZGlzYWJsZWQKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgX2l0ZXJhdG9yNC5lKGVycik7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgIF9pdGVyYXRvcjQuZigpOwogICAgICAgIH0KICAgICAgfQogICAgICB2YXIgY3VyID0gKF90aGlzJGFnZW50Q29uZmlnMyA9IHRoaXMuYWdlbnRDb25maWcpID09PSBudWxsIHx8IF90aGlzJGFnZW50Q29uZmlnMyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkYWdlbnRDb25maWczWydjbG91ZC1wcm92aWRlci1uYW1lJ107CiAgICAgIGlmIChjdXIgJiYgIW91dC5maW5kKGZ1bmN0aW9uICh4KSB7CiAgICAgICAgcmV0dXJuIHgudmFsdWUgPT09IGN1cjsKICAgICAgfSkpIHsKICAgICAgICBvdXQudW5zaGlmdCh7CiAgICAgICAgICBsYWJlbDogIiIuY29uY2F0KGN1ciwgIiAoQ3VycmVudCkiKSwKICAgICAgICAgIHZhbHVlOiBjdXIKICAgICAgICB9KTsKICAgICAgfQogICAgICByZXR1cm4gb3V0OwogICAgfSwKICAgIGNhbk1hbmFnZU1lbWJlcnM6IGZ1bmN0aW9uIGNhbk1hbmFnZU1lbWJlcnMoKSB7CiAgICAgIHJldHVybiBjYW5WaWV3Q2x1c3Rlck1lbWJlcnNoaXBFZGl0b3IodGhpcy4kc3RvcmUpOwogICAgfSwKICAgIGlzSGFydmVzdGVyRHJpdmVyOiBmdW5jdGlvbiBpc0hhcnZlc3RlckRyaXZlcigpIHsKICAgICAgcmV0dXJuIHRoaXMuJHJvdXRlLnF1ZXJ5LnR5cGUgPT09IEhBUlZFU1RFUjsKICAgIH0sCiAgICBkZWZhdWx0VmVyc2lvbjogZnVuY3Rpb24gZGVmYXVsdFZlcnNpb24oKSB7CiAgICAgIHZhciBfYWxsJCwKICAgICAgICBfYWxsJGZpbmQsCiAgICAgICAgX3RoaXMzID0gdGhpczsKICAgICAgdmFyIGFsbCA9IHRoaXMudmVyc2lvbk9wdGlvbnMuZmlsdGVyKGZ1bmN0aW9uICh4KSB7CiAgICAgICAgcmV0dXJuICEheC52YWx1ZTsKICAgICAgfSk7CiAgICAgIHZhciBmaXJzdCA9IChfYWxsJCA9IGFsbFswXSkgPT09IG51bGwgfHwgX2FsbCQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hbGwkLnZhbHVlOwogICAgICB2YXIgcHJlZmVycmVkID0gKF9hbGwkZmluZCA9IGFsbC5maW5kKGZ1bmN0aW9uICh4KSB7CiAgICAgICAgcmV0dXJuIHgudmFsdWUgPT09IF90aGlzMy5kZWZhdWx0UmtlMjsKICAgICAgfSkpID09PSBudWxsIHx8IF9hbGwkZmluZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2FsbCRmaW5kLnZhbHVlOwogICAgICB2YXIgcmtlMiA9IHRoaXMuZ2V0QWxsT3B0aW9uc0FmdGVyQ3VycmVudFZlcnNpb24odGhpcy5ya2UyVmVyc2lvbnMsIG51bGwpOwogICAgICB2YXIgc2hvd1JrZTIgPSBya2UyLmxlbmd0aDsKICAgICAgdmFyIG91dDsKICAgICAgaWYgKHRoaXMuaXNIYXJ2ZXN0ZXJEcml2ZXIgJiYgc2hvd1JrZTIpIHsKICAgICAgICB2YXIgc2F0aXNmaWVzVmVyc2lvbiA9IHJrZTIuZmlsdGVyKGZ1bmN0aW9uICh2KSB7CiAgICAgICAgICByZXR1cm4gaXNIYXJ2ZXN0ZXJTYXRpc2ZpZXNWZXJzaW9uKHYudmFsdWUpOwogICAgICAgIH0pIHx8IFtdOwogICAgICAgIGlmIChzYXRpc2ZpZXNWZXJzaW9uLmxlbmd0aCA+IDApIHsKICAgICAgICAgIHZhciBfc2F0aXNmaWVzVmVyc2lvbiQ7CiAgICAgICAgICBvdXQgPSAoX3NhdGlzZmllc1ZlcnNpb24kID0gc2F0aXNmaWVzVmVyc2lvblswXSkgPT09IG51bGwgfHwgX3NhdGlzZmllc1ZlcnNpb24kID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfc2F0aXNmaWVzVmVyc2lvbiQudmFsdWU7CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmICghb3V0KSB7CiAgICAgICAgb3V0ID0gcHJlZmVycmVkIHx8IGZpcnN0OwogICAgICB9CiAgICAgIHJldHVybiBvdXQ7CiAgICB9LAogICAgYXBwc09TV2FybmluZzogZnVuY3Rpb24gYXBwc09TV2FybmluZygpIHsKICAgICAgdmFyIF90aGlzJHZhbHVlMjsKICAgICAgaWYgKHRoaXMubW9kZSAhPT0gX0VESVQpIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQogICAgICB2YXIgX3JlZjMgPSAoKF90aGlzJHZhbHVlMiA9IHRoaXMudmFsdWUpID09PSBudWxsIHx8IF90aGlzJHZhbHVlMiA9PT0gdm9pZCAwIHx8IChfdGhpcyR2YWx1ZTIgPSBfdGhpcyR2YWx1ZTIubWdtdCkgPT09IG51bGwgfHwgX3RoaXMkdmFsdWUyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyR2YWx1ZTIuc3RhdHVzKSB8fCB7fSwKICAgICAgICBsaW51eFdvcmtlckNvdW50ID0gX3JlZjMubGludXhXb3JrZXJDb3VudCwKICAgICAgICB3aW5kb3dzV29ya2VyQ291bnQgPSBfcmVmMy53aW5kb3dzV29ya2VyQ291bnQ7CiAgICAgIGlmICghd2luZG93c1dvcmtlckNvdW50KSB7CiAgICAgICAgaWYgKCEhdGhpcy5tYWNoaW5lUG9vbHMuZmluZChmdW5jdGlvbiAocG9vbCkgewogICAgICAgICAgdmFyIF9wb29sJGNvbmZpZzsKICAgICAgICAgIHJldHVybiAocG9vbCA9PT0gbnVsbCB8fCBwb29sID09PSB2b2lkIDAgfHwgKF9wb29sJGNvbmZpZyA9IHBvb2wuY29uZmlnKSA9PT0gbnVsbCB8fCBfcG9vbCRjb25maWcgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9wb29sJGNvbmZpZy5vcykgPT09ICd3aW5kb3dzJzsKICAgICAgICB9KSkgewogICAgICAgICAgcmV0dXJuIHRoaXMudCgnY2x1c3Rlci5iYW5uZXIub3MnLCB7CiAgICAgICAgICAgIG5ld09TOiAnV2luZG93cycsCiAgICAgICAgICAgIGV4aXN0aW5nT1M6ICdMaW51eCcKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmICghbGludXhXb3JrZXJDb3VudCkgewogICAgICAgIGlmICh0aGlzLm1hY2hpbmVQb29scy5maW5kKGZ1bmN0aW9uIChwb29sKSB7CiAgICAgICAgICB2YXIgX3Bvb2wkY29uZmlnMjsKICAgICAgICAgIHJldHVybiAocG9vbCA9PT0gbnVsbCB8fCBwb29sID09PSB2b2lkIDAgfHwgKF9wb29sJGNvbmZpZzIgPSBwb29sLmNvbmZpZykgPT09IG51bGwgfHwgX3Bvb2wkY29uZmlnMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3Bvb2wkY29uZmlnMi5vcykgPT09ICdsaW51eCc7CiAgICAgICAgfSkpIHsKICAgICAgICAgIHJldHVybiB0aGlzLnQoJ2NsdXN0ZXIuYmFubmVyLm9zJywgewogICAgICAgICAgICBuZXdPUzogJ0xpbnV4JywKICAgICAgICAgICAgZXhpc3RpbmdPUzogJ1dpbmRvd3MnCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIG51bGw7CiAgICB9LAogICAgc2hvd0Zvcm06IGZ1bmN0aW9uIHNob3dGb3JtKCkgewogICAgICByZXR1cm4gISF0aGlzLmNyZWRlbnRpYWxJZCB8fCAhdGhpcy5uZWVkQ3JlZGVudGlhbDsKICAgIH0sCiAgICBpc0hhcnZlc3RlckV4dGVybmFsQ3JlZGVudGlhbDogZnVuY3Rpb24gaXNIYXJ2ZXN0ZXJFeHRlcm5hbENyZWRlbnRpYWwoKSB7CiAgICAgIHZhciBfdGhpcyRjcmVkZW50aWFsOwogICAgICByZXR1cm4gKChfdGhpcyRjcmVkZW50aWFsID0gdGhpcy5jcmVkZW50aWFsKSA9PT0gbnVsbCB8fCBfdGhpcyRjcmVkZW50aWFsID09PSB2b2lkIDAgfHwgKF90aGlzJGNyZWRlbnRpYWwgPSBfdGhpcyRjcmVkZW50aWFsLmhhcnZlc3RlcmNyZWRlbnRpYWxDb25maWcpID09PSBudWxsIHx8IF90aGlzJGNyZWRlbnRpYWwgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJGNyZWRlbnRpYWwuY2x1c3RlclR5cGUpID09PSAnZXh0ZXJuYWwnOwogICAgfSwKICAgIGlzSGFydmVzdGVySW5jb21wYXRpYmxlOiBmdW5jdGlvbiBpc0hhcnZlc3RlckluY29tcGF0aWJsZSgpIHsKICAgICAgdmFyIF90aGlzJGhhcnZlc3RlclZlcnNpbywgX3RoaXMkaGFydmVzdGVyVmVyc2lvMjsKICAgICAgdmFyIGNjbVJrZTJWZXJzaW9uID0gKHRoaXMuY2hhcnRWZXJzaW9uc1snaGFydmVzdGVyLWNsb3VkLXByb3ZpZGVyJ10gfHwge30pWyd2ZXJzaW9uJ107CiAgICAgIHZhciBjc2lSa2UyVmVyc2lvbiA9ICh0aGlzLmNoYXJ0VmVyc2lvbnNbJ2hhcnZlc3Rlci1jc2ktZHJpdmVyJ10gfHwge30pWyd2ZXJzaW9uJ107CiAgICAgIHZhciBjY21WZXJzaW9uID0gKF90aGlzJGhhcnZlc3RlclZlcnNpbyA9IHRoaXMuaGFydmVzdGVyVmVyc2lvblJhbmdlKSA9PT0gbnVsbCB8fCBfdGhpcyRoYXJ2ZXN0ZXJWZXJzaW8gPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJGhhcnZlc3RlclZlcnNpb1snaGFydmVzdGVyLWNsb3VkLXByb3ZpZGVyJ107CiAgICAgIHZhciBjc2lWZXJzaW9uID0gKF90aGlzJGhhcnZlc3RlclZlcnNpbzIgPSB0aGlzLmhhcnZlc3RlclZlcnNpb25SYW5nZSkgPT09IG51bGwgfHwgX3RoaXMkaGFydmVzdGVyVmVyc2lvMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkaGFydmVzdGVyVmVyc2lvMlsnaGFydmVzdGVyLWNzaS1wcm92aWRlciddOwogICAgICBpZiAoKGNjbVJrZTJWZXJzaW9uIHx8ICcnKS5lbmRzV2l0aCgnMDAnKSkgewogICAgICAgIGNjbVJrZTJWZXJzaW9uID0gY2NtUmtlMlZlcnNpb24uc2xpY2UoMCwgLTIpOwogICAgICB9CiAgICAgIGlmICgoY3NpUmtlMlZlcnNpb24gfHwgJycpLmVuZHNXaXRoKCcwMCcpKSB7CiAgICAgICAgY3NpUmtlMlZlcnNpb24gPSBjc2lSa2UyVmVyc2lvbi5zbGljZSgwLCAtMik7CiAgICAgIH0KICAgICAgaWYgKGNjbVZlcnNpb24gJiYgY3NpVmVyc2lvbikgewogICAgICAgIGlmIChzZW12ZXIuc2F0aXNmaWVzKGNjbVJrZTJWZXJzaW9uLCBjY21WZXJzaW9uKSAmJiBzZW12ZXIuc2F0aXNmaWVzKGNzaVJrZTJWZXJzaW9uLCBjc2lWZXJzaW9uKSkgewogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICB9LAogICAgdmFsaWRhdGlvblBhc3NlZDogZnVuY3Rpb24gdmFsaWRhdGlvblBhc3NlZCgpIHsKICAgICAgdmFyIHZhbGlkUmVxdWlyZWRQb29scyA9IHRoaXMuaGFzTWFjaGluZVBvb2xzID8gdGhpcy5oYXNSZXF1aXJlZE5vZGVzKCkgOiB0cnVlOwogICAgICB2YXIgYmFzZSA9IHRoaXMucHJvdmlkZXIgPT09ICdjdXN0b20nIHx8IHRoaXMuaXNFbGVtZW50YWxDbHVzdGVyIHx8ICEhdGhpcy5jcmVkZW50aWFsSWQgfHwgIXRoaXMubmVlZENyZWRlbnRpYWw7CgogICAgICAvLyBhbmQgaW4gYWxsIG9mIHRoZSB2YWxpZGF0aW9uIHN0YXR1c2VzIGZvciBlYWNoIG1hY2hpbmUgcG9vbAogICAgICBPYmplY3QudmFsdWVzKHRoaXMubWFjaGluZVBvb2xWYWxpZGF0aW9uKS5mb3JFYWNoKGZ1bmN0aW9uICh2KSB7CiAgICAgICAgcmV0dXJuIGJhc2UgPSBiYXNlICYmIHY7CiAgICAgIH0pOwogICAgICByZXR1cm4gdmFsaWRSZXF1aXJlZFBvb2xzICYmIGJhc2U7CiAgICB9LAogICAgY3VycmVudENsdXN0ZXI6IGZ1bmN0aW9uIGN1cnJlbnRDbHVzdGVyKCkgewogICAgICBpZiAodGhpcy5tb2RlID09PSBfRURJVCkgewogICAgICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKHt9LCB0aGlzLnZhbHVlKTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gdGhpcy4kc3RvcmUuZ2V0dGVyc1snY3VzdG9taXNhdGlvbi9nZXRQcmV2aWV3Q2x1c3RlciddOwogICAgICB9CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgY2x1c3RlckJhZGdlQWJicmV2aWF0aW9uOiB7CiAgICAgIGltbWVkaWF0ZTogdHJ1ZSwKICAgICAgaGFuZGxlcjogZnVuY3Rpb24gaGFuZGxlcihuZXUpIHsKICAgICAgICBpZiAoIW5ldSkgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBpZiAoT2JqZWN0LmtleXMobmV1LmJhZGdlKS5sZW5ndGggPD0gMCkgewogICAgICAgICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoe30sIHRoaXMudmFsdWUpOwogICAgICAgIH0KICAgICAgICB2YXIgb2JqID0gX2RlZmluZVByb3BlcnR5KF9kZWZpbmVQcm9wZXJ0eShfZGVmaW5lUHJvcGVydHkoe30sIENMVVNURVJfQkFER0UuSUNPTl9URVhULCBuZXUuYmFkZ2UuaWNvblRleHQpLCBDTFVTVEVSX0JBREdFLkNPTE9SLCBuZXUuYmFkZ2UuY29sb3IpLCBDTFVTVEVSX0JBREdFLlRFWFQsIG5ldS5iYWRnZS50ZXh0KTsKICAgICAgICB0aGlzLnZhbHVlLm1ldGFkYXRhLmFubm90YXRpb25zID0gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCB0aGlzLnZhbHVlLm1ldGFkYXRhLmFubm90YXRpb25zKSwgb2JqKTsKICAgICAgfQogICAgfSwKICAgIGNyZWRlbnRpYWxJZDogZnVuY3Rpb24gY3JlZGVudGlhbElkKHZhbCkgewogICAgICBpZiAodmFsKSB7CiAgICAgICAgdGhpcy5jcmVkZW50aWFsID0gdGhpcy4kc3RvcmUuZ2V0dGVyc1sncmFuY2hlci9ieUlkJ10oTk9STUFOLkNMT1VEX0NSRURFTlRJQUwsIHRoaXMuY3JlZGVudGlhbElkKTsKICAgICAgICBpZiAodGhpcy5pc0hhcnZlc3RlckRyaXZlcikgewogICAgICAgICAgdGhpcy5zZXRIYXJ2ZXN0ZXJWZXJzaW9uUmFuZ2UoKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5jcmVkZW50aWFsID0gbnVsbDsKICAgICAgfQogICAgICB0aGlzLnZhbHVlLnNwZWMuY2xvdWRDcmVkZW50aWFsU2VjcmV0TmFtZSA9IHZhbDsKICAgIH0sCiAgICBhZGRvbk5hbWVzOiBmdW5jdGlvbiBhZGRvbk5hbWVzKG5ldSwgb2xkKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwogICAgICAvLyBUbyBjYXRjaCB0aGUgJ3NvbWUgYWRkb25zJyAtLT4gJ25vIGFkZG9ucycgY2FzZSBhbHNvIGNoZWNrIGFycmF5IGxlbmd0aCAoYGRpZmZlcmVuY2UoW10sIFsxLDIsM10pID09PSBbXWApCiAgICAgIHZhciBkaWZmID0gb2xkLmxlbmd0aCAhPT0gbmV1Lmxlbmd0aCB8fCBkaWZmZXJlbmNlKG5ldSwgb2xkKS5sZW5ndGg7CiAgICAgIGlmIChkaWZmKSB7CiAgICAgICAgLy8gQWxsb3cgdGltZSBmb3IgYWRkb25OYW1lcyB0byB1cGRhdGUuLi4gdGhlbiBmZXRjaCBhbnkgbWlzc2luZyBhZGRvbnMKICAgICAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gX3RoaXM0LmluaXRBZGRvbnMoKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIHNlbGVjdGVkVmVyc2lvbjogZnVuY3Rpb24gc2VsZWN0ZWRWZXJzaW9uKCkgewogICAgICB2YXIgX3RoaXM1ID0gdGhpczsKICAgICAgdGhpcy52ZXJzaW9uSW5mbyA9IHt9OyAvLyBJbnZhbGlkYXRlIGNhY2hlIHN1Y2ggdGhhdCB2ZXJzaW9uIGluZm8gcmVsZXZlbnQgdG8gc2VsZWN0ZWQga3ViZSB2ZXJzaW9uIGlzIHVwZGF0ZWQKCiAgICAgIC8vIEFsbG93IHRpbWUgZm9yIGFkZG9uTmFtZXMgdG8gdXBkYXRlLi4uIHRoZW4gZmV0Y2ggYW55IG1pc3NpbmcgYWRkb25zCiAgICAgIHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gX3RoaXM1LmluaXRBZGRvbnMoKTsKICAgICAgfSk7CiAgICAgIGlmICh0aGlzLm1vZGUgPT09IF9DUkVBVEUpIHsKICAgICAgICB0aGlzLmluaXRTZXJ2ZXJBZ2VudEFyZ3MoKTsKICAgICAgfQogICAgfSwKICAgIHNob3dDbmk6IGZ1bmN0aW9uIHNob3dDbmkobmV1KSB7CiAgICAgIC8vIFVwZGF0ZSBgc2VydmVyQ29uZmlnLmNuaSB0byByZWNhbGN1bGF0ZSBhZGRvbk5hbWVzLi4uCiAgICAgIC8vIC4uLiB3aGljaCB3aWxsIGV2ZW50dWFsbHkgdXBkYXRlIGB2YWx1ZS5zcGVjLnJrZUNvbmZpZy5jaGFydFZhbHVlc2AKICAgICAgaWYgKG5ldSkgewogICAgICAgIC8vIFR5cGUgc3VwcG9ydHMgQ05JLCBhc3NpZ24gZGVmYXVsdCBpZiB3ZSBjYW4KICAgICAgICBpZiAoIXRoaXMuc2VydmVyQ29uZmlnLmNuaSkgewogICAgICAgICAgdmFyIGRlZiA9IHRoaXMuc2VydmVyQXJncy5jbmkuZGVmYXVsdDsKICAgICAgICAgIHNldCh0aGlzLnNlcnZlckNvbmZpZywgJ2NuaScsIGRlZik7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIC8vIFR5cGUgZG9lc24ndCBzdXBwb3J0IGNuaSwgY2xlYXIgYGNuaWAKICAgICAgICBzZXQodGhpcy5zZXJ2ZXJDb25maWcsICdjbmknLCB1bmRlZmluZWQpOwogICAgICB9CiAgICB9LAogICAgc2hvd0Nsb3VkUHJvdmlkZXI6IGZ1bmN0aW9uIHNob3dDbG91ZFByb3ZpZGVyKG5ldSkgewogICAgICBpZiAoIW5ldSkgewogICAgICAgIC8vIE5vIGNsb3VkIHByb3ZpZGVyIGF2YWlsYWJsZT8gVGhlbiBjbGVhciBjbG91ZCBwcm92aWRlciBzZXR0aW5nLiBUaGlzIHdpbGwgcmVjYWxjdWxhdGUgYWRkb25OYW1lcy4uLgogICAgICAgIC8vIC4uLiB3aGljaCB3aWxsIGV2ZW50dWFsbHkgdXBkYXRlIGB2YWx1ZS5zcGVjLnJrZUNvbmZpZy5jaGFydFZhbHVlc2AKICAgICAgICBzZXQodGhpcy5hZ2VudENvbmZpZywgJ2Nsb3VkLXByb3ZpZGVyLW5hbWUnLCB1bmRlZmluZWQpOwogICAgICB9CiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdmFyIF90aGlzJGV4dGVuc2lvblByb3ZpZDI7CiAgICB0aGlzLnJlZ2lzdGVyQmVmb3JlSG9vayh0aGlzLnNhdmVNYWNoaW5lUG9vbHMsICdzYXZlLW1hY2hpbmUtcG9vbHMnLCAxKTsKICAgIHRoaXMucmVnaXN0ZXJCZWZvcmVIb29rKHRoaXMuc2V0UmVnaXN0cnlDb25maWcsICdzZXQtcmVnaXN0cnktY29uZmlnJyk7CiAgICB0aGlzLnJlZ2lzdGVyQWZ0ZXJIb29rKHRoaXMuY2xlYW51cE1hY2hpbmVQb29scywgJ2NsZWFudXAtbWFjaGluZS1wb29scycpOwogICAgdGhpcy5yZWdpc3RlckFmdGVySG9vayh0aGlzLnNhdmVSb2xlQmluZGluZ3MsICdzYXZlLXJvbGUtYmluZGluZ3MnKTsKCiAgICAvLyBSZWdpc3RlciBhbnkgaG9va3MgZm9yIHRoaXMgZXh0ZW5zaW9uIHByb3ZpZGVyCiAgICBpZiAoKF90aGlzJGV4dGVuc2lvblByb3ZpZDIgPSB0aGlzLmV4dGVuc2lvblByb3ZpZGVyKSAhPT0gbnVsbCAmJiBfdGhpcyRleHRlbnNpb25Qcm92aWQyICE9PSB2b2lkIDAgJiYgX3RoaXMkZXh0ZW5zaW9uUHJvdmlkMi5yZWdpc3RlclNhdmVIb29rcykgewogICAgICB0aGlzLmV4dGVuc2lvblByb3ZpZGVyLnJlZ2lzdGVyU2F2ZUhvb2tzKHRoaXMucmVnaXN0ZXJCZWZvcmVIb29rLCB0aGlzLnJlZ2lzdGVyQWZ0ZXJIb29rLCB0aGlzLnZhbHVlKTsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIHNldDogc2V0LAogICAgLyoqCiAgICAgKiBJbml0aWFsaXplIGFsbCB0aGUgY2x1c3RlciBzcGVjcwogICAgICovCiAgICBpbml0U3BlY3M6IGZ1bmN0aW9uIGluaXRTcGVjcygpIHsKICAgICAgdmFyIF90aGlzNiA9IHRoaXM7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvcigvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHZhciBfdGhpczYkcmtlQ29uZmlnJGV0Y2Q7CiAgICAgICAgdmFyIGRpc2FibGVTbmFwc2hvdHM7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBpZiAoIV90aGlzNi52YWx1ZS5zcGVjKSB7CiAgICAgICAgICAgICAgICBzZXQoX3RoaXM2LnZhbHVlLCAnc3BlYycsIHt9KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKCFfdGhpczYudmFsdWUuc3BlYy5tYWNoaW5lU2VsZWN0b3JDb25maWcpIHsKICAgICAgICAgICAgICAgIHNldChfdGhpczYudmFsdWUuc3BlYywgJ21hY2hpbmVTZWxlY3RvckNvbmZpZycsIFtdKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKCFfdGhpczYudmFsdWUuc3BlYy5tYWNoaW5lU2VsZWN0b3JDb25maWcuZmluZChmdW5jdGlvbiAoeCkgewogICAgICAgICAgICAgICAgcmV0dXJuICF4Lm1hY2hpbmVMYWJlbFNlbGVjdG9yOwogICAgICAgICAgICAgIH0pKSB7CiAgICAgICAgICAgICAgICBfdGhpczYudmFsdWUuc3BlYy5tYWNoaW5lU2VsZWN0b3JDb25maWcudW5zaGlmdCh7CiAgICAgICAgICAgICAgICAgIGNvbmZpZzoge30KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAoIV90aGlzNi52YWx1ZS5zcGVjLmNsb3VkQ3JlZGVudGlhbFNlY3JldE5hbWUpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNzsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDY7CiAgICAgICAgICAgICAgcmV0dXJuIF90aGlzNi4kc3RvcmUuZGlzcGF0Y2goJ3JhbmNoZXIvZmluZEFsbCcsIHsKICAgICAgICAgICAgICAgIHR5cGU6IE5PUk1BTi5DTE9VRF9DUkVERU5USUFMCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICBfdGhpczYuY3JlZGVudGlhbElkID0gIiIuY29uY2F0KF90aGlzNi52YWx1ZS5zcGVjLmNsb3VkQ3JlZGVudGlhbFNlY3JldE5hbWUpOwogICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgaWYgKCFfdGhpczYudmFsdWUuc3BlYy5rdWJlcm5ldGVzVmVyc2lvbikgewogICAgICAgICAgICAgICAgc2V0KF90aGlzNi52YWx1ZS5zcGVjLCAna3ViZXJuZXRlc1ZlcnNpb24nLCBfdGhpczYuZGVmYXVsdFZlcnNpb24pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAoKF90aGlzNiRya2VDb25maWckZXRjZCA9IF90aGlzNi5ya2VDb25maWcuZXRjZCkgIT09IG51bGwgJiYgX3RoaXM2JHJrZUNvbmZpZyRldGNkICE9PSB2b2lkIDAgJiYgKF90aGlzNiRya2VDb25maWckZXRjZCA9IF90aGlzNiRya2VDb25maWckZXRjZC5zMykgIT09IG51bGwgJiYgX3RoaXM2JHJrZUNvbmZpZyRldGNkICE9PSB2b2lkIDAgJiYgX3RoaXM2JHJrZUNvbmZpZyRldGNkLmJ1Y2tldCkgewogICAgICAgICAgICAgICAgX3RoaXM2LnMzQmFja3VwID0gdHJ1ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKCFfdGhpczYucmtlQ29uZmlnLmV0Y2QpIHsKICAgICAgICAgICAgICAgIHNldChfdGhpczYucmtlQ29uZmlnLCAnZXRjZCcsIHsKICAgICAgICAgICAgICAgICAgZGlzYWJsZVNuYXBzaG90czogZmFsc2UsCiAgICAgICAgICAgICAgICAgIHMzOiBudWxsLAogICAgICAgICAgICAgICAgICBzbmFwc2hvdFJldGVudGlvbjogNSwKICAgICAgICAgICAgICAgICAgc25hcHNob3RTY2hlZHVsZUNyb246ICcwICovNSAqICogKicKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIF90aGlzNi5ya2VDb25maWcuZXRjZC5kaXNhYmxlU25hcHNob3RzID09PSAndW5kZWZpbmVkJykgewogICAgICAgICAgICAgICAgZGlzYWJsZVNuYXBzaG90cyA9ICFfdGhpczYucmtlQ29uZmlnLmV0Y2Quc25hcHNob3RSZXRlbnRpb24gJiYgIV90aGlzNi5ya2VDb25maWcuZXRjZC5zbmFwc2hvdFNjaGVkdWxlQ3JvbjsKICAgICAgICAgICAgICAgIHNldChfdGhpczYucmtlQ29uZmlnLmV0Y2QsICdkaXNhYmxlU25hcHNob3RzJywgZGlzYWJsZVNuYXBzaG90cyk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAvLyBOYW1lc3BhY2VzIGlmIHJlcXVpcmVkIC0gdGhpcyBpcyBtYWlubHkgZm9yIGN1c3RvbSBwcm92aXNpb25lcnMgdmlhIGV4dGVuc2lvbnMgdGhhdCB3YW50CiAgICAgICAgICAgICAgLy8gdG8gYWxsb3cgY3JlYXRpbmcgdGhlaXIgcmVzb3VyY2VzIGluIGEgZGlmZmVyZW50IG5hbWVzcGFjZQogICAgICAgICAgICAgIGlmICghX3RoaXM2Lm5lZWRzTmFtZXNwYWNlKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDE0OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTM7CiAgICAgICAgICAgICAgcmV0dXJuIF90aGlzNi4kc3RvcmUuZGlzcGF0Y2goJ21hbmFnZW1lbnQvZmluZEFsbCcsIHsKICAgICAgICAgICAgICAgIHR5cGU6IE5BTUVTUEFDRQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgIF90aGlzNi5hbGxOYW1lc3BhY2VzID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgICAgaWYgKF90aGlzNi5tYWNoaW5lUG9vbHMpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjA7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxNzsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXM2LmluaXRNYWNoaW5lUG9vbHMoX3RoaXM2LnZhbHVlLnNwZWMucmtlQ29uZmlnLm1hY2hpbmVQb29scyk7CiAgICAgICAgICAgIGNhc2UgMTc6CiAgICAgICAgICAgICAgaWYgKCEoX3RoaXM2Lm1vZGUgPT09IF9DUkVBVEUgJiYgIV90aGlzNi5tYWNoaW5lUG9vbHMubGVuZ3RoKSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAyMDsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDIwOwogICAgICAgICAgICAgIHJldHVybiBfdGhpczYuYWRkTWFjaGluZVBvb2woKTsKICAgICAgICAgICAgY2FzZSAyMDoKICAgICAgICAgICAgICBpZiAoX3RoaXM2LnZhbHVlLnNwZWMuZGVmYXVsdFBvZFNlY3VyaXR5QWRtaXNzaW9uQ29uZmlndXJhdGlvblRlbXBsYXRlTmFtZSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICBzZXQoX3RoaXM2LnZhbHVlLnNwZWMsICdkZWZhdWx0UG9kU2VjdXJpdHlBZG1pc3Npb25Db25maWd1cmF0aW9uVGVtcGxhdGVOYW1lJywgJycpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgY2FzZSAyMToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIC8qKgogICAgICogRmV0Y2ggUktFIHZlcnNpb25zIGFuZCB0aGVpciBjb25maWd1cmF0aW9ucyB0byBiZSBtYXBwZWQgdG8gdGhlIGZvcm0KICAgICAqLwogICAgZmV0Y2hSa2UyVmVyc2lvbnM6IGZ1bmN0aW9uIGZldGNoUmtlMlZlcnNpb25zKCkgewogICAgICB2YXIgX3RoaXM3ID0gdGhpczsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgICAgdmFyIGhhc2gsIGdsb2JhbFNldHRpbmdzLCBkZWZhdWx0UmtlMlNldHRpbmcsIGRlZmF1bHRLM3NTZXR0aW5nLCBkZWZhdWx0UmtlMiwgZGVmYXVsdEszcywgcmVzLCBfcmtlMkNoYW5uZWxzJGZpbmQsIHJrZTJDaGFubmVscywgX2szc0NoYW5uZWxzJGZpbmQsIGszc0NoYW5uZWxzOwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgaWYgKF90aGlzNy5ya2UyVmVyc2lvbnMpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMzA7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaGFzaCA9IHsKICAgICAgICAgICAgICAgIHJrZTJWZXJzaW9uczogX3RoaXM3LiRzdG9yZS5kaXNwYXRjaCgnbWFuYWdlbWVudC9yZXF1ZXN0JywgewogICAgICAgICAgICAgICAgICB1cmw6ICcvdjEtcmtlMi1yZWxlYXNlL3JlbGVhc2VzJwogICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICBrM3NWZXJzaW9uczogX3RoaXM3LiRzdG9yZS5kaXNwYXRjaCgnbWFuYWdlbWVudC9yZXF1ZXN0JywgewogICAgICAgICAgICAgICAgICB1cmw6ICcvdjEtazNzLXJlbGVhc2UvcmVsZWFzZXMnCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgaWYgKCFfdGhpczcuJHN0b3JlLmdldHRlcnNbJ21hbmFnZW1lbnQvY2FuTGlzdCddKE1BTkFHRU1FTlQuUFNBKSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA2OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNTsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXM3LiRzdG9yZS5kaXNwYXRjaCgnbWFuYWdlbWVudC9maW5kQWxsJywgewogICAgICAgICAgICAgICAgdHlwZTogTUFOQUdFTUVOVC5QU0EKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIGhhc2guYWxsUFNBcyA9IF9jb250ZXh0My5zZW50OwogICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA4OwogICAgICAgICAgICAgIHJldHVybiBfdGhpczcuJHN0b3JlLmdldHRlcnNbJ21hbmFnZW1lbnQvYWxsJ10oTUFOQUdFTUVOVC5TRVRUSU5HKTsKICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgIF9jb250ZXh0My50MCA9IF9jb250ZXh0My5zZW50OwogICAgICAgICAgICAgIGlmIChfY29udGV4dDMudDApIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgX2NvbnRleHQzLnQwID0gW107CiAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgZ2xvYmFsU2V0dGluZ3MgPSBfY29udGV4dDMudDA7CiAgICAgICAgICAgICAgZGVmYXVsdFJrZTJTZXR0aW5nID0gZ2xvYmFsU2V0dGluZ3MuZmluZChmdW5jdGlvbiAoc2V0dGluZykgewogICAgICAgICAgICAgICAgcmV0dXJuIHNldHRpbmcuaWQgPT09ICdya2UyLWRlZmF1bHQtdmVyc2lvbic7CiAgICAgICAgICAgICAgfSkgfHwge307CiAgICAgICAgICAgICAgZGVmYXVsdEszc1NldHRpbmcgPSBnbG9iYWxTZXR0aW5ncy5maW5kKGZ1bmN0aW9uIChzZXR0aW5nKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gc2V0dGluZy5pZCA9PT0gJ2szcy1kZWZhdWx0LXZlcnNpb24nOwogICAgICAgICAgICAgIH0pIHx8IHt9OwogICAgICAgICAgICAgIGRlZmF1bHRSa2UyID0gKGRlZmF1bHRSa2UyU2V0dGluZyA9PT0gbnVsbCB8fCBkZWZhdWx0UmtlMlNldHRpbmcgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGRlZmF1bHRSa2UyU2V0dGluZy52YWx1ZSkgfHwgKGRlZmF1bHRSa2UyU2V0dGluZyA9PT0gbnVsbCB8fCBkZWZhdWx0UmtlMlNldHRpbmcgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGRlZmF1bHRSa2UyU2V0dGluZy5kZWZhdWx0KTsKICAgICAgICAgICAgICBkZWZhdWx0SzNzID0gKGRlZmF1bHRLM3NTZXR0aW5nID09PSBudWxsIHx8IGRlZmF1bHRLM3NTZXR0aW5nID09PSB2b2lkIDAgPyB2b2lkIDAgOiBkZWZhdWx0SzNzU2V0dGluZy52YWx1ZSkgfHwgKGRlZmF1bHRLM3NTZXR0aW5nID09PSBudWxsIHx8IGRlZmF1bHRLM3NTZXR0aW5nID09PSB2b2lkIDAgPyB2b2lkIDAgOiBkZWZhdWx0SzNzU2V0dGluZy5kZWZhdWx0KTsgLy8gUktFMjogVXNlIHRoZSBjaGFubmVsIGlmIHdlIGNhbiBub3QgZ2V0IHRoZSB2ZXJzaW9uIGZyb20gdGhlIHNldHRpbmdzCiAgICAgICAgICAgICAgaWYgKCFkZWZhdWx0UmtlMikgewogICAgICAgICAgICAgICAgaGFzaC5ya2UyQ2hhbm5lbHMgPSBfdGhpczcuJHN0b3JlLmRpc3BhdGNoKCdtYW5hZ2VtZW50L3JlcXVlc3QnLCB7CiAgICAgICAgICAgICAgICAgIHVybDogJy92MS1ya2UyLXJlbGVhc2UvY2hhbm5lbHMnCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIC8vIEszUzogVXNlIHRoZSBjaGFubmVsIGlmIHdlIGNhbiBub3QgZ2V0IHRoZSB2ZXJzaW9uIGZyb20gdGhlIHNldHRpbmdzCiAgICAgICAgICAgICAgaWYgKCFkZWZhdWx0SzNzKSB7CiAgICAgICAgICAgICAgICBoYXNoLmszc0NoYW5uZWxzID0gX3RoaXM3LiRzdG9yZS5kaXNwYXRjaCgnbWFuYWdlbWVudC9yZXF1ZXN0JywgewogICAgICAgICAgICAgICAgICB1cmw6ICcvdjEtazNzLXJlbGVhc2UvY2hhbm5lbHMnCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyMDsKICAgICAgICAgICAgICByZXR1cm4gYWxsSGFzaChoYXNoKTsKICAgICAgICAgICAgY2FzZSAyMDoKICAgICAgICAgICAgICByZXMgPSBfY29udGV4dDMuc2VudDsKICAgICAgICAgICAgICBfdGhpczcuYWxsUFNBcyA9IHJlcy5hbGxQU0FzIHx8IFtdOwogICAgICAgICAgICAgIF90aGlzNy5ya2UyVmVyc2lvbnMgPSByZXMucmtlMlZlcnNpb25zLmRhdGEgfHwgW107CiAgICAgICAgICAgICAgX3RoaXM3Lmszc1ZlcnNpb25zID0gcmVzLmszc1ZlcnNpb25zLmRhdGEgfHwgW107CiAgICAgICAgICAgICAgaWYgKCFkZWZhdWx0UmtlMikgewogICAgICAgICAgICAgICAgcmtlMkNoYW5uZWxzID0gcmVzLnJrZTJDaGFubmVscy5kYXRhIHx8IFtdOwogICAgICAgICAgICAgICAgZGVmYXVsdFJrZTIgPSAoX3JrZTJDaGFubmVscyRmaW5kID0gcmtlMkNoYW5uZWxzLmZpbmQoZnVuY3Rpb24gKHgpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHguaWQgPT09ICdkZWZhdWx0JzsKICAgICAgICAgICAgICAgIH0pKSA9PT0gbnVsbCB8fCBfcmtlMkNoYW5uZWxzJGZpbmQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9ya2UyQ2hhbm5lbHMkZmluZC5sYXRlc3Q7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmICghZGVmYXVsdEszcykgewogICAgICAgICAgICAgICAgazNzQ2hhbm5lbHMgPSByZXMuazNzQ2hhbm5lbHMuZGF0YSB8fCBbXTsKICAgICAgICAgICAgICAgIGRlZmF1bHRLM3MgPSAoX2szc0NoYW5uZWxzJGZpbmQgPSBrM3NDaGFubmVscy5maW5kKGZ1bmN0aW9uICh4KSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiB4LmlkID09PSAnZGVmYXVsdCc7CiAgICAgICAgICAgICAgICB9KSkgPT09IG51bGwgfHwgX2szc0NoYW5uZWxzJGZpbmQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9rM3NDaGFubmVscyRmaW5kLmxhdGVzdDsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKCEoIV90aGlzNy5ya2UyVmVyc2lvbnMubGVuZ3RoICYmICFfdGhpczcuazNzVmVyc2lvbnMubGVuZ3RoKSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyODsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIHZlcnNpb24gaW5mbyBmb3VuZCBpbiBLRE0nKTsKICAgICAgICAgICAgY2FzZSAyODoKICAgICAgICAgICAgICAvLyBTdG9yZSBkZWZhdWx0IHZlcnNpb25zCiAgICAgICAgICAgICAgX3RoaXM3LmRlZmF1bHRSa2UyID0gZGVmYXVsdFJrZTI7CiAgICAgICAgICAgICAgX3RoaXM3LmRlZmF1bHRLM3MgPSBkZWZhdWx0SzNzOwogICAgICAgICAgICBjYXNlIDMwOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUzKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgY2xlYW5BZ2VudENvbmZpZ3VyYXRpb246IGZ1bmN0aW9uIGNsZWFuQWdlbnRDb25maWd1cmF0aW9uKG1vZGVsLCBrZXkpIHsKICAgICAgdmFyIF90aGlzOCA9IHRoaXM7CiAgICAgIGlmICghbW9kZWwgfHwgIW1vZGVsW2tleV0pIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdmFyIHYgPSBtb2RlbFtrZXldOwogICAgICBpZiAoQXJyYXkuaXNBcnJheSh2KSAmJiB2Lmxlbmd0aCA9PT0gMCkgewogICAgICAgIGRlbGV0ZSBtb2RlbFtrZXldOwogICAgICB9IGVsc2UgaWYgKHYgJiYgX3R5cGVvZih2KSA9PT0gJ29iamVjdCcpIHsKICAgICAgICBPYmplY3Qua2V5cyh2KS5mb3JFYWNoKGZ1bmN0aW9uIChrKSB7CiAgICAgICAgICAvLyBkZWxldGUgdGhlc2UgYXV4aWxpYXJ5IHByb3BzIHVzZWQgaW4gcG9kQWZmaW5pdHkgYW5kIG5vZGVBZmZpbml0eSB0aGF0IHNob3VsZG4ndCBiZSBzZW50IHRvIHRoZSBzZXJ2ZXIKICAgICAgICAgIGlmIChrID09PSAnX25hbWVzcGFjZU9wdGlvbicgfHwgayA9PT0gJ19uYW1lc3BhY2VzJyB8fCBrID09PSAnX2FudGknIHx8IGsgPT09ICdfaWQnKSB7CiAgICAgICAgICAgIGRlbGV0ZSB2W2tdOwogICAgICAgICAgfQoKICAgICAgICAgIC8vIHByZXZlbnQgY2xlYW51cCBvZiAibmFtZXNwYWNlU2VsZWN0b3IiIHdoZW4gYW4gZW1wdHkgb2JqZWN0IGJlY2F1c2UgaXQgcmVwcmVzZW50cyBhbGwgbmFtZXNwYWNlcyBpbiBwb2Qvbm9kZSBhZmZpbml0eQogICAgICAgICAgLy8gaHR0cHM6Ly9rdWJlcm5ldGVzLmlvL2RvY3MvcmVmZXJlbmNlL2dlbmVyYXRlZC9rdWJlcm5ldGVzLWFwaS92MS4yNS8jcG9kYWZmaW5pdHl0ZXJtLXYxLWNvcmUKICAgICAgICAgIGlmIChrICE9PSAnbmFtZXNwYWNlU2VsZWN0b3InKSB7CiAgICAgICAgICAgIF90aGlzOC5jbGVhbkFnZW50Q29uZmlndXJhdGlvbih2LCBrKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICBpZiAoT2JqZWN0LmtleXModikubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICBkZWxldGUgbW9kZWxba2V5XTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICAvKioKICAgICAqIENsZWFuIGFnZW50IGNvbmZpZ3VyYXRpb24gb2JqZWN0cywgc28gd2Ugb25seSBzZW5kIHZhbHVlcyB3aGVuIHRoZSB1c2VyIGhhcyBjb25maWd1cmVkIHNvbWV0aGluZwogICAgICovCiAgICBhZ2VudENvbmZpZ3VyYXRpb25DbGVhbnVwOiBmdW5jdGlvbiBhZ2VudENvbmZpZ3VyYXRpb25DbGVhbnVwKCkgewogICAgICB0aGlzLmNsZWFuQWdlbnRDb25maWd1cmF0aW9uKHRoaXMudmFsdWUuc3BlYywgQ0xVU1RFUl9BR0VOVF9DVVNUT01JWkFUSU9OKTsKICAgICAgdGhpcy5jbGVhbkFnZW50Q29uZmlndXJhdGlvbih0aGlzLnZhbHVlLnNwZWMsIEZMRUVUX0FHRU5UX0NVU1RPTUlaQVRJT04pOwogICAgfSwKICAgIC8qKgogICAgICogRW5zdXJlIHdlIGhhdmUgZW1wdHkgbW9kZWxzIGZvciB0aGUgdHdvIGFnZW50IGNvbmZpZ3VyYXRpb25zCiAgICAgKi8KICAgIHNldEFnZW50Q29uZmlndXJhdGlvbjogZnVuY3Rpb24gc2V0QWdlbnRDb25maWd1cmF0aW9uKCkgewogICAgICAvLyBDbHVzdGVyIEFnZW50IENvbmZpZ3VyYXRpb24KICAgICAgaWYgKCF0aGlzLnZhbHVlLnNwZWNbQ0xVU1RFUl9BR0VOVF9DVVNUT01JWkFUSU9OXSkgewogICAgICAgIHNldCh0aGlzLnZhbHVlLnNwZWMsIENMVVNURVJfQUdFTlRfQ1VTVE9NSVpBVElPTiwge30pOwogICAgICB9CgogICAgICAvLyBGbGVldCBBZ2VudCBDb25maWd1cmF0aW9uCiAgICAgIGlmICghdGhpcy52YWx1ZS5zcGVjW0ZMRUVUX0FHRU5UX0NVU1RPTUlaQVRJT05dKSB7CiAgICAgICAgc2V0KHRoaXMudmFsdWUuc3BlYywgRkxFRVRfQUdFTlRfQ1VTVE9NSVpBVElPTiwge30pOwogICAgICB9CiAgICB9LAogICAgLyoqCiAgICAgKiBzZXQgaW5zdGFuY2VOYW1lTGltaXQgdG8gMTUgdG8gYWxsIHBvb2wgbWFjaGluZSBpZiB0cnVuY2F0ZUhvc3RuYW1lcyBjaGVja2JveCBpcyBjbGlja2VkCiAgICAgKi8KICAgIHRydW5jYXRlSG9zdG5hbWU6IGZ1bmN0aW9uIHRydW5jYXRlSG9zdG5hbWUobmV1KSB7CiAgICAgIGlmIChuZXUpIHsKICAgICAgICB0aGlzLnZhbHVlLmRlZmF1bHRIb3N0bmFtZUxlbmd0aExpbWl0ID0gTkVUQklPU19UUlVOQ0FUSU9OX0xFTkdUSDsKICAgICAgICB0aGlzLnRydW5jYXRlTGltaXQgPSBORVRCSU9TX1RSVU5DQVRJT05fTEVOR1RIOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMudHJ1bmNhdGVMaW1pdCA9IDA7CiAgICAgICAgdGhpcy52YWx1ZS5yZW1vdmVEZWZhdWx0SG9zdG5hbWVMZW5ndGhMaW1pdCgpOwogICAgICB9CiAgICB9LAogICAgLyoqCiAgICAgKiBHZXQgbWFjaGluZSBwb29scyBmcm9tIHRoZSBjbHVzdGVyIGNvbmZpZ3VyYXRpb24KICAgICAqIHRoaXMudmFsdWUuc3BlYy5ya2VDb25maWcubWFjaGluZVBvb2xzCiAgICAgKi8KICAgIGluaXRNYWNoaW5lUG9vbHM6IGZ1bmN0aW9uIGluaXRNYWNoaW5lUG9vbHMoZXhpc3RpbmcpIHsKICAgICAgdmFyIF90aGlzOSA9IHRoaXM7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvcigvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU0KCkgewogICAgICAgIHZhciBvdXQsIF9pdGVyYXRvcjUsIF9zdGVwNSwgcG9vbCwgdHlwZSwgY29uZmlnLCBjb25maWdNaXNzaW5nLCBpZDsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU0JChfY29udGV4dDQpIHsKICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIG91dCA9IFtdOwogICAgICAgICAgICAgIGlmICghKGV4aXN0aW5nICE9PSBudWxsICYmIGV4aXN0aW5nICE9PSB2b2lkIDAgJiYgZXhpc3RpbmcubGVuZ3RoKSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSA0NjsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBfaXRlcmF0b3I1ID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIoZXhpc3RpbmcpOwogICAgICAgICAgICAgIF9jb250ZXh0NC5wcmV2ID0gMzsKICAgICAgICAgICAgICBfaXRlcmF0b3I1LnMoKTsKICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIGlmICgoX3N0ZXA1ID0gX2l0ZXJhdG9yNS5uKCkpLmRvbmUpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMzg7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgcG9vbCA9IF9zdGVwNS52YWx1ZTsKICAgICAgICAgICAgICB0eXBlID0gdm9pZCAwOwogICAgICAgICAgICAgIGlmIChfdGhpczkuaXNFbGVtZW50YWxDbHVzdGVyKSB7CiAgICAgICAgICAgICAgICB0eXBlID0gRUxFTUVOVEFMX1NDSEVNQV9JRFMuTUFDSElORV9JTlZfU0VMRUNUT1JfVEVNUExBVEVTOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB0eXBlID0gIiIuY29uY2F0KENBUEkuTUFDSElORV9DT05GSUdfR1JPVVAsICIuIikuY29uY2F0KHBvb2wubWFjaGluZUNvbmZpZ1JlZi5raW5kLnRvTG93ZXJDYXNlKCkpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBjb25maWcgPSB2b2lkIDA7CiAgICAgICAgICAgICAgY29uZmlnTWlzc2luZyA9IGZhbHNlOwogICAgICAgICAgICAgIGlmICghX3RoaXM5LiRzdG9yZS5nZXR0ZXJzWydtYW5hZ2VtZW50L2Nhbkxpc3QnXSh0eXBlKSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAyMTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBfY29udGV4dDQucHJldiA9IDEyOwogICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMTU7CiAgICAgICAgICAgICAgcmV0dXJuIF90aGlzOS4kc3RvcmUuZGlzcGF0Y2goJ21hbmFnZW1lbnQvZmluZCcsIHsKICAgICAgICAgICAgICAgIHR5cGU6IHR5cGUsCiAgICAgICAgICAgICAgICBpZDogIiIuY29uY2F0KF90aGlzOS52YWx1ZS5tZXRhZGF0YS5uYW1lc3BhY2UsICIvIikuY29uY2F0KHBvb2wubWFjaGluZUNvbmZpZ1JlZi5uYW1lKQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICAgIGNvbmZpZyA9IF9jb250ZXh0NC5zZW50OwogICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMjE7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMTg6CiAgICAgICAgICAgICAgX2NvbnRleHQ0LnByZXYgPSAxODsKICAgICAgICAgICAgICBfY29udGV4dDQudDAgPSBfY29udGV4dDRbImNhdGNoIl0oMTIpOwogICAgICAgICAgICAgIC8vIFNvbWUgdXNlcnMgY2FuJ3Qgc2VlIHRoZSBjb25maWcsIHRoYXQncyBvay4KICAgICAgICAgICAgICAvLyB3ZSB3aWxsIGRpc3BsYXkgYSBiYW5uZXIgZm9yIGEgNDA0IG9ubHkgZm9yIGVsZW1lbnRhbAogICAgICAgICAgICAgIGlmICgoX2NvbnRleHQ0LnQwID09PSBudWxsIHx8IF9jb250ZXh0NC50MCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2NvbnRleHQ0LnQwLnN0YXR1cykgPT09IDQwNCkgewogICAgICAgICAgICAgICAgaWYgKF90aGlzOS5pc0VsZW1lbnRhbENsdXN0ZXIpIHsKICAgICAgICAgICAgICAgICAgY29uZmlnTWlzc2luZyA9IHRydWU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICBjYXNlIDIxOgogICAgICAgICAgICAgIC8vIEBUT0RPIHdoYXQgaWYgdGhlIHBvb2wgaXMgbWlzc2luZz8KICAgICAgICAgICAgICBpZCA9ICJwb29sIi5jb25jYXQoKytfdGhpczkubGFzdElkeCk7CiAgICAgICAgICAgICAgX2NvbnRleHQ0LnQxID0gb3V0OwogICAgICAgICAgICAgIF9jb250ZXh0NC50MiA9IGlkOwogICAgICAgICAgICAgIF9jb250ZXh0NC50MyA9IGNsb25lKHBvb2wpOwogICAgICAgICAgICAgIGlmICghY29uZmlnKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDMxOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMjg7CiAgICAgICAgICAgICAgcmV0dXJuIF90aGlzOS4kc3RvcmUuZGlzcGF0Y2goJ21hbmFnZW1lbnQvY2xvbmUnLCB7CiAgICAgICAgICAgICAgICByZXNvdXJjZTogY29uZmlnCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNhc2UgMjg6CiAgICAgICAgICAgICAgX2NvbnRleHQ0LnQ0ID0gX2NvbnRleHQ0LnNlbnQ7CiAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAzMjsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAzMToKICAgICAgICAgICAgICBfY29udGV4dDQudDQgPSBudWxsOwogICAgICAgICAgICBjYXNlIDMyOgogICAgICAgICAgICAgIF9jb250ZXh0NC50NSA9IF9jb250ZXh0NC50NDsKICAgICAgICAgICAgICBfY29udGV4dDQudDYgPSBjb25maWdNaXNzaW5nOwogICAgICAgICAgICAgIF9jb250ZXh0NC50NyA9IHsKICAgICAgICAgICAgICAgIGlkOiBfY29udGV4dDQudDIsCiAgICAgICAgICAgICAgICByZW1vdmU6IGZhbHNlLAogICAgICAgICAgICAgICAgY3JlYXRlOiBmYWxzZSwKICAgICAgICAgICAgICAgIHVwZGF0ZTogdHJ1ZSwKICAgICAgICAgICAgICAgIHBvb2w6IF9jb250ZXh0NC50MywKICAgICAgICAgICAgICAgIGNvbmZpZzogX2NvbnRleHQ0LnQ1LAogICAgICAgICAgICAgICAgY29uZmlnTWlzc2luZzogX2NvbnRleHQ0LnQ2CiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICBfY29udGV4dDQudDEucHVzaC5jYWxsKF9jb250ZXh0NC50MSwgX2NvbnRleHQ0LnQ3KTsKICAgICAgICAgICAgY2FzZSAzNjoKICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDU7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMzg6CiAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSA0MzsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSA0MDoKICAgICAgICAgICAgICBfY29udGV4dDQucHJldiA9IDQwOwogICAgICAgICAgICAgIF9jb250ZXh0NC50OCA9IF9jb250ZXh0NFsiY2F0Y2giXSgzKTsKICAgICAgICAgICAgICBfaXRlcmF0b3I1LmUoX2NvbnRleHQ0LnQ4KTsKICAgICAgICAgICAgY2FzZSA0MzoKICAgICAgICAgICAgICBfY29udGV4dDQucHJldiA9IDQzOwogICAgICAgICAgICAgIF9pdGVyYXRvcjUuZigpOwogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuZmluaXNoKDQzKTsKICAgICAgICAgICAgY2FzZSA0NjoKICAgICAgICAgICAgICBfdGhpczkubWFjaGluZVBvb2xzID0gb3V0OwogICAgICAgICAgICBjYXNlIDQ3OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU0LCBudWxsLCBbWzMsIDQwLCA0MywgNDZdLCBbMTIsIDE4XV0pOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBhZGRNYWNoaW5lUG9vbDogZnVuY3Rpb24gYWRkTWFjaGluZVBvb2woaWR4KSB7CiAgICAgIHZhciBfdGhpczEwID0gdGhpczsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTUoKSB7CiAgICAgICAgdmFyIF90aGlzMTAkZXh0ZW5zaW9uUHJvdiwgX3RoaXMxMCRtYWNoaW5lQ29uZmlnOwogICAgICAgIHZhciBudW1DdXJyZW50UG9vbHMsIGNvbmZpZywgbmFtZSwgcG9vbDsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU1JChfY29udGV4dDUpIHsKICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0NS5wcmV2ID0gX2NvbnRleHQ1Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGlmIChfdGhpczEwLm1hY2hpbmVDb25maWdTY2hlbWEpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LmFicnVwdCgicmV0dXJuIik7CiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICBudW1DdXJyZW50UG9vbHMgPSBfdGhpczEwLm1hY2hpbmVQb29scy5sZW5ndGggfHwgMDsKICAgICAgICAgICAgICBpZiAoISgoX3RoaXMxMCRleHRlbnNpb25Qcm92ID0gX3RoaXMxMC5leHRlbnNpb25Qcm92aWRlcikgIT09IG51bGwgJiYgX3RoaXMxMCRleHRlbnNpb25Qcm92ICE9PSB2b2lkIDAgJiYgX3RoaXMxMCRleHRlbnNpb25Qcm92LmNyZWF0ZU1hY2hpbmVQb29sTWFjaGluZUNvbmZpZykpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gOTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDY7CiAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMTAuZXh0ZW5zaW9uUHJvdmlkZXIuY3JlYXRlTWFjaGluZVBvb2xNYWNoaW5lQ29uZmlnKGlkeCwgX3RoaXMxMC5tYWNoaW5lUG9vbHMsIF90aGlzMTAudmFsdWUpOwogICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgY29uZmlnID0gX2NvbnRleHQ1LnNlbnQ7CiAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSAxMzsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMTAuJHN0b3JlLmRpc3BhdGNoKCdtYW5hZ2VtZW50L2NyZWF0ZVBvcHVsYXRlZCcsIHsKICAgICAgICAgICAgICAgIHR5cGU6IF90aGlzMTAubWFjaGluZUNvbmZpZ1NjaGVtYS5pZCwKICAgICAgICAgICAgICAgIG1ldGFkYXRhOiB7CiAgICAgICAgICAgICAgICAgIG5hbWVzcGFjZTogREVGQVVMVF9XT1JLU1BBQ0UKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICBjb25maWcgPSBfY29udGV4dDUuc2VudDsKICAgICAgICAgICAgICAvLyBJZiB0aGVyZSBpcyBubyBzcGVjaWZpYyBtb2RlbCwgdGhlIGFwcGx5RGVmYXVsdHMgZG9lcyBub3RoaW5nIGJ5IGRlZmF1bHQKICAgICAgICAgICAgICBjb25maWcuYXBwbHlEZWZhdWx0cyhpZHgsIF90aGlzMTAubWFjaGluZVBvb2xzKTsKICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICBuYW1lID0gInBvb2wiLmNvbmNhdCgrK190aGlzMTAubGFzdElkeCk7CiAgICAgICAgICAgICAgcG9vbCA9IHsKICAgICAgICAgICAgICAgIGlkOiBuYW1lLAogICAgICAgICAgICAgICAgY29uZmlnOiBjb25maWcsCiAgICAgICAgICAgICAgICByZW1vdmU6IGZhbHNlLAogICAgICAgICAgICAgICAgY3JlYXRlOiB0cnVlLAogICAgICAgICAgICAgICAgdXBkYXRlOiBmYWxzZSwKICAgICAgICAgICAgICAgIHVpZDogbmFtZSwKICAgICAgICAgICAgICAgIHBvb2w6IHsKICAgICAgICAgICAgICAgICAgbmFtZTogbmFtZSwKICAgICAgICAgICAgICAgICAgZXRjZFJvbGU6IG51bUN1cnJlbnRQb29scyA9PT0gMCwKICAgICAgICAgICAgICAgICAgY29udHJvbFBsYW5lUm9sZTogbnVtQ3VycmVudFBvb2xzID09PSAwLAogICAgICAgICAgICAgICAgICB3b3JrZXJSb2xlOiB0cnVlLAogICAgICAgICAgICAgICAgICBob3N0bmFtZVByZWZpeDogJycsCiAgICAgICAgICAgICAgICAgIGxhYmVsczoge30sCiAgICAgICAgICAgICAgICAgIHF1YW50aXR5OiAxLAogICAgICAgICAgICAgICAgICB1bmhlYWx0aHlOb2RlVGltZW91dDogJzBtJywKICAgICAgICAgICAgICAgICAgbWFjaGluZUNvbmZpZ1JlZjogewogICAgICAgICAgICAgICAgICAgIGtpbmQ6IChfdGhpczEwJG1hY2hpbmVDb25maWcgPSBfdGhpczEwLm1hY2hpbmVDb25maWdTY2hlbWEuYXR0cmlidXRlcykgPT09IG51bGwgfHwgX3RoaXMxMCRtYWNoaW5lQ29uZmlnID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpczEwJG1hY2hpbmVDb25maWcua2luZCwKICAgICAgICAgICAgICAgICAgICBuYW1lOiBudWxsCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIGRyYWluQmVmb3JlRGVsZXRlOiB0cnVlCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICBpZiAoX3RoaXMxMC5wcm92aWRlciA9PT0gVk1XQVJFX1ZTUEhFUkUpIHsKICAgICAgICAgICAgICAgIHBvb2wucG9vbC5tYWNoaW5lT1MgPSAnbGludXgnOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAoX3RoaXMxMC5pc0VsZW1lbnRhbENsdXN0ZXIpIHsKICAgICAgICAgICAgICAgIHBvb2wucG9vbC5tYWNoaW5lQ29uZmlnUmVmLmFwaVZlcnNpb24gPSAiIi5jb25jYXQoX3RoaXMxMC5tYWNoaW5lQ29uZmlnU2NoZW1hLmF0dHJpYnV0ZXMuZ3JvdXAsICIvIikuY29uY2F0KF90aGlzMTAubWFjaGluZUNvbmZpZ1NjaGVtYS5hdHRyaWJ1dGVzLnZlcnNpb24pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBfdGhpczEwLm1hY2hpbmVQb29scy5wdXNoKHBvb2wpOwogICAgICAgICAgICAgIF90aGlzMTAuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHZhciBfdGhpczEwJCRyZWZzJHBvb2xzOwogICAgICAgICAgICAgICAgaWYgKChfdGhpczEwJCRyZWZzJHBvb2xzID0gX3RoaXMxMC4kcmVmcy5wb29scykgIT09IG51bGwgJiYgX3RoaXMxMCQkcmVmcyRwb29scyAhPT0gdm9pZCAwICYmIF90aGlzMTAkJHJlZnMkcG9vbHMuc2VsZWN0KSB7CiAgICAgICAgICAgICAgICAgIF90aGlzMTAuJHJlZnMucG9vbHMuc2VsZWN0KG5hbWUpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjYXNlIDE5OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU1KTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgcmVtb3ZlTWFjaGluZVBvb2w6IGZ1bmN0aW9uIHJlbW92ZU1hY2hpbmVQb29sKGlkeCkgewogICAgICB2YXIgZW50cnkgPSB0aGlzLm1hY2hpbmVQb29sc1tpZHhdOwogICAgICBpZiAoIWVudHJ5KSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGlmIChlbnRyeS5jcmVhdGUpIHsKICAgICAgICAvLyBJZiB0aGlzIGlzIGEgbmV3IHBvb2wgdGhhdCBpc24ndCBzYXZlZCB5ZXQsIGl0IGNhbiBqdXN0IGJlIGRyb3BwZWQKICAgICAgICByZW1vdmVPYmplY3QodGhpcy5tYWNoaW5lUG9vbHMsIGVudHJ5KTsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBNYXJrIGZvciByZW1vdmFsIG9uIHNhdmUKICAgICAgICBlbnRyeS5yZW1vdmUgPSB0cnVlOwogICAgICB9CiAgICB9LAogICAgc3luY01hY2hpbmVDb25maWdXaXRoTGF0ZXN0OiBmdW5jdGlvbiBzeW5jTWFjaGluZUNvbmZpZ1dpdGhMYXRlc3QobWFjaGluZVBvb2wpIHsKICAgICAgdmFyIF90aGlzMTEgPSB0aGlzOwogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNigpIHsKICAgICAgICB2YXIgX21hY2hpbmVQb29sJGNvbmZpZzsKICAgICAgICB2YXIgX2xhdGVzdENvbmZpZywgbGF0ZXN0Q29uZmlnLCBjbG9uZWRDdXJyZW50Q29uZmlnLCBjbG9uZWRMYXRlc3RDb25maWc7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNiQoX2NvbnRleHQ2KSB7CiAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDYucHJldiA9IF9jb250ZXh0Ni5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBpZiAoIShtYWNoaW5lUG9vbCAhPT0gbnVsbCAmJiBtYWNoaW5lUG9vbCAhPT0gdm9pZCAwICYmIChfbWFjaGluZVBvb2wkY29uZmlnID0gbWFjaGluZVBvb2wuY29uZmlnKSAhPT0gbnVsbCAmJiBfbWFjaGluZVBvb2wkY29uZmlnICE9PSB2b2lkIDAgJiYgX21hY2hpbmVQb29sJGNvbmZpZy5pZCkpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gMTU7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSAzOwogICAgICAgICAgICAgIHJldHVybiBfdGhpczExLiRzdG9yZS5kaXNwYXRjaCgnbWFuYWdlbWVudC9yZXF1ZXN0JywgewogICAgICAgICAgICAgICAgdXJsOiAiL3YxLyIuY29uY2F0KG1hY2hpbmVQb29sLmNvbmZpZy50eXBlLCAicy8iKS5jb25jYXQobWFjaGluZVBvb2wuY29uZmlnLmlkKQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgX2xhdGVzdENvbmZpZyA9IF9jb250ZXh0Ni5zZW50OwogICAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gNjsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXMxMS4kc3RvcmUuZGlzcGF0Y2goJ21hbmFnZW1lbnQvY3JlYXRlJywgX2xhdGVzdENvbmZpZyk7CiAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICBsYXRlc3RDb25maWcgPSBfY29udGV4dDYuc2VudDsKICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDk7CiAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMTEuJHN0b3JlLmRpc3BhdGNoKCdtYW5hZ2VtZW50L2Nsb25lJywgewogICAgICAgICAgICAgICAgcmVzb3VyY2U6IG1hY2hpbmVQb29sLmNvbmZpZwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgY2xvbmVkQ3VycmVudENvbmZpZyA9IF9jb250ZXh0Ni5zZW50OwogICAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMTEuJHN0b3JlLmRpc3BhdGNoKCdtYW5hZ2VtZW50L2Nsb25lJywgewogICAgICAgICAgICAgICAgcmVzb3VyY2U6IGxhdGVzdENvbmZpZwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgIGNsb25lZExhdGVzdENvbmZpZyA9IF9jb250ZXh0Ni5zZW50OwogICAgICAgICAgICAgIC8vIFdlIGRvbid0IGFsbG93IHRoZSB1c2VyIHRvIGVkaXQgYW55IG9mIHRoZSBmaWVsZHMgaW4gbWV0YWRhdGEgZnJvbSB0aGUgVUkgc28gaXQncyBzYWZlIHRvIG92ZXJyaWRlIGl0IHdpdGggdGhlCiAgICAgICAgICAgICAgLy8gbWV0YWRhdGEgZGVmaW5lZCBieSB0aGUgbGF0ZXN0IGJhY2tlbmQgdmFsdWUuIFRoaXMgaXMgcHJpbWFyaWx5IHVzZWQgdG8gZW5zdXJlIHRoZSByZXNvdXJjZVZlcnNpb24gaXMgdXAgdG8gZGF0ZS4KICAgICAgICAgICAgICBkZWxldGUgY2xvbmVkQ3VycmVudENvbmZpZy5tZXRhZGF0YTsKICAgICAgICAgICAgICBpZiAoX3RoaXMxMS5wcm92aWRlciA9PT0gVk1XQVJFX1ZTUEhFUkUpIHsKICAgICAgICAgICAgICAgIG1hY2hpbmVQb29sLmNvbmZpZyA9IHZzcGhlcmVQb29sQ29uZmlnTWVyZ2UoY2xvbmVkTGF0ZXN0Q29uZmlnLCBjbG9uZWRDdXJyZW50Q29uZmlnKTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgbWFjaGluZVBvb2wuY29uZmlnID0gbWVyZ2UoY2xvbmVkTGF0ZXN0Q29uZmlnLCBjbG9uZWRDdXJyZW50Q29uZmlnKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTYpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBzYXZlTWFjaGluZVBvb2xzOiBmdW5jdGlvbiBzYXZlTWFjaGluZVBvb2xzKGhvb2tDb250ZXh0KSB7CiAgICAgIHZhciBfdGhpczEyID0gdGhpczsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTgoKSB7CiAgICAgICAgdmFyIF90aGlzMTIkZXh0ZW5zaW9uUHJvdjsKICAgICAgICB2YXIgZmluYWxQb29scywgX2l0ZXJhdG9yNiwgX3N0ZXA2LCBlbnRyeSwgcHJlZml4LCBfZW50cnkkY29uZmlnJG1ldGFkYXQsIG5ldTsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU4JChfY29udGV4dDgpIHsKICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0OC5wcmV2ID0gX2NvbnRleHQ4Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGlmICghKGhvb2tDb250ZXh0ID09PSBDT05URVhUX0hPT0tfRURJVF9ZQU1MKSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQ4Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIF9jb250ZXh0OC5uZXh0ID0gMzsKICAgICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgICAgICAgICAgX3RoaXMxMi4kc3RvcmUuZGlzcGF0Y2goJ2NsdXN0ZXIvcHJvbXB0TW9kYWwnLCB7CiAgICAgICAgICAgICAgICAgIGNvbXBvbmVudDogJ0dlbmVyaWNQcm9tcHQnLAogICAgICAgICAgICAgICAgICBjb21wb25lbnRQcm9wczogewogICAgICAgICAgICAgICAgICAgIHRpdGxlOiBfdGhpczEyLnQoJ2NsdXN0ZXIucmtlMi5tb2RhbC5lZGl0WWFtbE1hY2hpbmVQb29sLnRpdGxlJyksCiAgICAgICAgICAgICAgICAgICAgYm9keTogX3RoaXMxMi50KCdjbHVzdGVyLnJrZTIubW9kYWwuZWRpdFlhbWxNYWNoaW5lUG9vbC5ib2R5JyksCiAgICAgICAgICAgICAgICAgICAgYXBwbHlNb2RlOiAnZWRpdEFuZENvbnRpbnVlJywKICAgICAgICAgICAgICAgICAgICBjb25maXJtOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICB2YXIgX2NvbmZpcm0gPSBfYXN5bmNUb0dlbmVyYXRvcigvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU3KGNvbmZpcm1lZCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU3JChfY29udGV4dDcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDcucHJldiA9IF9jb250ZXh0Ny5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY29uZmlybWVkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSA3OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gMzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMTIudmFsaWRhdGVNYWNoaW5lUG9vbCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMxMi5lcnJvcnMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcignTWFjaGluZSBQb29sIHZhbGlkYXRpb24gZXJyb3JzJykpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSA4OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcignVXNlciBDYW5jZWxsZWQnKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ3LnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWU3KTsKICAgICAgICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGNvbmZpcm0oX3gpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb25maXJtLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29uZmlybTsKICAgICAgICAgICAgICAgICAgICB9KCkKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICBmaW5hbFBvb2xzID0gW107IC8vIElmIHRoZSBleHRlbnNpb24gcHJvdmlkZXIgd2FudHMgdG8gZG8gdGhpcywgbGV0IHRoZW0KICAgICAgICAgICAgICBpZiAoISgoX3RoaXMxMiRleHRlbnNpb25Qcm92ID0gX3RoaXMxMi5leHRlbnNpb25Qcm92aWRlcikgIT09IG51bGwgJiYgX3RoaXMxMiRleHRlbnNpb25Qcm92ICE9PSB2b2lkIDAgJiYgX3RoaXMxMiRleHRlbnNpb25Qcm92LnNhdmVNYWNoaW5lUG9vbENvbmZpZ3MpKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDgubmV4dCA9IDg7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgX2NvbnRleHQ4Lm5leHQgPSA3OwogICAgICAgICAgICAgIHJldHVybiBfdGhpczEyLmV4dGVuc2lvblByb3ZpZGVyLnNhdmVNYWNoaW5lUG9vbENvbmZpZ3MoX3RoaXMxMi5tYWNoaW5lUG9vbHMsIF90aGlzMTIudmFsdWUpOwogICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OC5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0OC5zZW50KTsKICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgIF9pdGVyYXRvcjYgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihfdGhpczEyLm1hY2hpbmVQb29scyk7CiAgICAgICAgICAgICAgX2NvbnRleHQ4LnByZXYgPSA5OwogICAgICAgICAgICAgIF9pdGVyYXRvcjYucygpOwogICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgIGlmICgoX3N0ZXA2ID0gX2l0ZXJhdG9yNi5uKCkpLmRvbmUpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0OC5uZXh0ID0gMzg7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgZW50cnkgPSBfc3RlcDYudmFsdWU7CiAgICAgICAgICAgICAgaWYgKCFlbnRyeS5yZW1vdmUpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0OC5uZXh0ID0gMTU7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OC5hYnJ1cHQoImNvbnRpbnVlIiwgMzYpOwogICAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICAgIF9jb250ZXh0OC5uZXh0ID0gMTc7CiAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMTIuc3luY01hY2hpbmVDb25maWdXaXRoTGF0ZXN0KGVudHJ5KTsKICAgICAgICAgICAgY2FzZSAxNzoKICAgICAgICAgICAgICAvLyBDYXBpdGFscyBhbmQgc3VjaCBhcmVuJ3QgYWxsb3dlZDsKICAgICAgICAgICAgICBzZXQoZW50cnkucG9vbCwgJ25hbWUnLCBub3JtYWxpemVOYW1lKGVudHJ5LnBvb2wubmFtZSkgfHwgJ3Bvb2wnKTsKICAgICAgICAgICAgICBwcmVmaXggPSAiIi5jb25jYXQoX3RoaXMxMi52YWx1ZS5tZXRhZGF0YS5uYW1lLCAiLSIpLmNvbmNhdChlbnRyeS5wb29sLm5hbWUpLnN1YnN0cigwLCA1MCkudG9Mb3dlckNhc2UoKTsKICAgICAgICAgICAgICBpZiAoIWVudHJ5LmNyZWF0ZSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQ4Lm5leHQgPSAzMDsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAoISgoX2VudHJ5JGNvbmZpZyRtZXRhZGF0ID0gZW50cnkuY29uZmlnLm1ldGFkYXRhKSAhPT0gbnVsbCAmJiBfZW50cnkkY29uZmlnJG1ldGFkYXQgIT09IHZvaWQgMCAmJiBfZW50cnkkY29uZmlnJG1ldGFkYXQubmFtZSkpIHsKICAgICAgICAgICAgICAgIGVudHJ5LmNvbmZpZy5tZXRhZGF0YS5nZW5lcmF0ZU5hbWUgPSAibmMtIi5jb25jYXQocHJlZml4LCAiLSIpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBfY29udGV4dDgubmV4dCA9IDIzOwogICAgICAgICAgICAgIHJldHVybiBlbnRyeS5jb25maWcuc2F2ZSgpOwogICAgICAgICAgICBjYXNlIDIzOgogICAgICAgICAgICAgIG5ldSA9IF9jb250ZXh0OC5zZW50OwogICAgICAgICAgICAgIGVudHJ5LmNvbmZpZyA9IG5ldTsKICAgICAgICAgICAgICBlbnRyeS5wb29sLm1hY2hpbmVDb25maWdSZWYubmFtZSA9IG5ldS5tZXRhZGF0YS5uYW1lOwogICAgICAgICAgICAgIGVudHJ5LmNyZWF0ZSA9IGZhbHNlOwogICAgICAgICAgICAgIGVudHJ5LnVwZGF0ZSA9IHRydWU7CiAgICAgICAgICAgICAgX2NvbnRleHQ4Lm5leHQgPSAzNDsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAzMDoKICAgICAgICAgICAgICBpZiAoIWVudHJ5LnVwZGF0ZSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQ4Lm5leHQgPSAzNDsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBfY29udGV4dDgubmV4dCA9IDMzOwogICAgICAgICAgICAgIHJldHVybiBlbnRyeS5jb25maWcuc2F2ZSgpOwogICAgICAgICAgICBjYXNlIDMzOgogICAgICAgICAgICAgIGVudHJ5LmNvbmZpZyA9IF9jb250ZXh0OC5zZW50OwogICAgICAgICAgICBjYXNlIDM0OgogICAgICAgICAgICAgIC8vIEVuc3VyZSBFbGVtZW50YWwgY2x1c3RlcnMgaGF2ZSBhIGhvc3RuYW1lIHByZWZpeAogICAgICAgICAgICAgIGlmIChfdGhpczEyLmlzRWxlbWVudGFsQ2x1c3RlciAmJiAhZW50cnkucG9vbC5ob3N0bmFtZVByZWZpeCkgewogICAgICAgICAgICAgICAgZW50cnkucG9vbC5ob3N0bmFtZVByZWZpeCA9ICIiLmNvbmNhdChwcmVmaXgsICItIik7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGZpbmFsUG9vbHMucHVzaChlbnRyeS5wb29sKTsKICAgICAgICAgICAgY2FzZSAzNjoKICAgICAgICAgICAgICBfY29udGV4dDgubmV4dCA9IDExOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDM4OgogICAgICAgICAgICAgIF9jb250ZXh0OC5uZXh0ID0gNDM7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgNDA6CiAgICAgICAgICAgICAgX2NvbnRleHQ4LnByZXYgPSA0MDsKICAgICAgICAgICAgICBfY29udGV4dDgudDAgPSBfY29udGV4dDhbImNhdGNoIl0oOSk7CiAgICAgICAgICAgICAgX2l0ZXJhdG9yNi5lKF9jb250ZXh0OC50MCk7CiAgICAgICAgICAgIGNhc2UgNDM6CiAgICAgICAgICAgICAgX2NvbnRleHQ4LnByZXYgPSA0MzsKICAgICAgICAgICAgICBfaXRlcmF0b3I2LmYoKTsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ4LmZpbmlzaCg0Myk7CiAgICAgICAgICAgIGNhc2UgNDY6CiAgICAgICAgICAgICAgX3RoaXMxMi52YWx1ZS5zcGVjLnJrZUNvbmZpZy5tYWNoaW5lUG9vbHMgPSBmaW5hbFBvb2xzOwogICAgICAgICAgICBjYXNlIDQ3OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDguc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU4LCBudWxsLCBbWzksIDQwLCA0MywgNDZdXSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGNsZWFudXBNYWNoaW5lUG9vbHM6IGZ1bmN0aW9uIGNsZWFudXBNYWNoaW5lUG9vbHMoKSB7CiAgICAgIHZhciBfdGhpczEzID0gdGhpczsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTkoKSB7CiAgICAgICAgdmFyIF9pdGVyYXRvcjcsIF9zdGVwNywgZW50cnk7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlOSQoX2NvbnRleHQ5KSB7CiAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDkucHJldiA9IF9jb250ZXh0OS5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfaXRlcmF0b3I3ID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIoX3RoaXMxMy5tYWNoaW5lUG9vbHMpOwogICAgICAgICAgICAgIF9jb250ZXh0OS5wcmV2ID0gMTsKICAgICAgICAgICAgICBfaXRlcmF0b3I3LnMoKTsKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIGlmICgoX3N0ZXA3ID0gX2l0ZXJhdG9yNy5uKCkpLmRvbmUpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0OS5uZXh0ID0gMTU7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgZW50cnkgPSBfc3RlcDcudmFsdWU7CiAgICAgICAgICAgICAgaWYgKCEoZW50cnkucmVtb3ZlICYmIGVudHJ5LmNvbmZpZykpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0OS5uZXh0ID0gMTM7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgX2NvbnRleHQ5LnByZXYgPSA2OwogICAgICAgICAgICAgIF9jb250ZXh0OS5uZXh0ID0gOTsKICAgICAgICAgICAgICByZXR1cm4gZW50cnkuY29uZmlnLnJlbW92ZSgpOwogICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgX2NvbnRleHQ5Lm5leHQgPSAxMzsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICBfY29udGV4dDkucHJldiA9IDExOwogICAgICAgICAgICAgIF9jb250ZXh0OS50MCA9IF9jb250ZXh0OVsiY2F0Y2giXSg2KTsKICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICBfY29udGV4dDkubmV4dCA9IDM7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgICAgX2NvbnRleHQ5Lm5leHQgPSAyMDsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAxNzoKICAgICAgICAgICAgICBfY29udGV4dDkucHJldiA9IDE3OwogICAgICAgICAgICAgIF9jb250ZXh0OS50MSA9IF9jb250ZXh0OVsiY2F0Y2giXSgxKTsKICAgICAgICAgICAgICBfaXRlcmF0b3I3LmUoX2NvbnRleHQ5LnQxKTsKICAgICAgICAgICAgY2FzZSAyMDoKICAgICAgICAgICAgICBfY29udGV4dDkucHJldiA9IDIwOwogICAgICAgICAgICAgIF9pdGVyYXRvcjcuZigpOwogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDkuZmluaXNoKDIwKTsKICAgICAgICAgICAgY2FzZSAyMzoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ5LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlOSwgbnVsbCwgW1sxLCAxNywgMjAsIDIzXSwgWzYsIDExXV0pOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBzYXZlUm9sZUJpbmRpbmdzOiBmdW5jdGlvbiBzYXZlUm9sZUJpbmRpbmdzKCkgewogICAgICB2YXIgX3RoaXMxNCA9IHRoaXM7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvcigvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxMCgpIHsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMCQoX2NvbnRleHQxMCkgewogICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQxMC5wcmV2ID0gX2NvbnRleHQxMC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dDEwLm5leHQgPSAyOwogICAgICAgICAgICAgIHJldHVybiBfdGhpczE0LnZhbHVlLndhaXRGb3JNZ210KCk7CiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICBpZiAoIV90aGlzMTQubWVtYmVyc2hpcFVwZGF0ZS5zYXZlKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDEwLm5leHQgPSA1OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIF9jb250ZXh0MTAubmV4dCA9IDU7CiAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMTQubWVtYmVyc2hpcFVwZGF0ZS5zYXZlKF90aGlzMTQudmFsdWUubWdtdC5pZCk7CiAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTEwKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgLyoqCiAgICAgKiBFbnN1cmUgdGhhdCBhbGwgdGhlIGV4aXN0aW5nIG5vZGUgcm9sZXMgcG9vbCBhcmUgYXQgbGVhc3QgMSBlYWNoCiAgICAgKi8KICAgIGhhc1JlcXVpcmVkTm9kZXM6IGZ1bmN0aW9uIGhhc1JlcXVpcmVkTm9kZXMoKSB7CiAgICAgIHZhciBfdGhpcyRub2RlVG90YWxzOwogICAgICByZXR1cm4gKChfdGhpcyRub2RlVG90YWxzID0gdGhpcy5ub2RlVG90YWxzKSA9PT0gbnVsbCB8fCBfdGhpcyRub2RlVG90YWxzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRub2RlVG90YWxzLmNvbG9yKSAmJiBPYmplY3QudmFsdWVzKHRoaXMubm9kZVRvdGFscy5jb2xvcikuZXZlcnkoZnVuY3Rpb24gKGNvbG9yKSB7CiAgICAgICAgcmV0dXJuIGNvbG9yICE9PSBOT0RFX1RPVEFMLmVycm9yLmNvbG9yOwogICAgICB9KTsKICAgIH0sCiAgICBjYW5jZWxDcmVkZW50aWFsOiBmdW5jdGlvbiBjYW5jZWxDcmVkZW50aWFsKCkgewogICAgICBpZiAodGhpcy4kcmVmcy5jcnVyZXNvdXJjZSkgewogICAgICAgIHRoaXMuJHJlZnMuY3J1cmVzb3VyY2UuZW1pdE9yUm91dGUoKTsKICAgICAgfQogICAgfSwKICAgIGRvbmU6IGZ1bmN0aW9uIGRvbmUoKSB7CiAgICAgIHZhciByb3V0ZU5hbWUgPSAnYy1jbHVzdGVyLXByb2R1Y3QtcmVzb3VyY2UnOwogICAgICBpZiAodGhpcy5tb2RlID09PSBfQ1JFQVRFICYmICh0aGlzLnByb3ZpZGVyID09PSAnaW1wb3J0JyB8fCB0aGlzLnByb3ZpZGVyID09PSAnY3VzdG9tJykpIHsKICAgICAgICAvLyBHbyBzaG93IHRoZSByZWdpc3RyYXRpb24gY29tbWFuZAogICAgICAgIHJvdXRlTmFtZSA9ICdjLWNsdXN0ZXItcHJvZHVjdC1yZXNvdXJjZS1uYW1lc3BhY2UtaWQnOwogICAgICB9CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICBuYW1lOiByb3V0ZU5hbWUsCiAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICBjbHVzdGVyOiB0aGlzLiRyb3V0ZS5wYXJhbXMuY2x1c3RlciwKICAgICAgICAgIHByb2R1Y3Q6IHRoaXMuJHN0b3JlLmdldHRlcnNbJ3Byb2R1Y3RJZCddLAogICAgICAgICAgcmVzb3VyY2U6IENBUEkuUkFOQ0hFUl9DTFVTVEVSLAogICAgICAgICAgbmFtZXNwYWNlOiB0aGlzLnZhbHVlLm1ldGFkYXRhLm5hbWVzcGFjZSwKICAgICAgICAgIGlkOiB0aGlzLnZhbHVlLm1ldGFkYXRhLm5hbWUKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIHNob3dBZGRvbkNvbmZpcm1hdGlvbjogZnVuY3Rpb24gc2hvd0FkZG9uQ29uZmlybWF0aW9uKCkgewogICAgICB2YXIgX3RoaXMxNSA9IHRoaXM7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgX3RoaXMxNS4kc3RvcmUuZGlzcGF0Y2goJ2NsdXN0ZXIvcHJvbXB0TW9kYWwnLCB7CiAgICAgICAgICBjb21wb25lbnQ6ICdBZGRvbkNvbmZpZ0NvbmZpcm1hdGlvbkRpYWxvZycsCiAgICAgICAgICByZXNvdXJjZXM6IFtmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUodmFsdWUpOwogICAgICAgICAgfV0KICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgLy8gU2V0IGJ1c3kgYmVmb3JlIHNhdmUgYW5kIGNsZWFyIGFmdGVyIHNhdmUKICAgIHNhdmVPdmVycmlkZTogZnVuY3Rpb24gc2F2ZU92ZXJyaWRlKGJ0bkNiKSB7CiAgICAgIHZhciBfdGhpczE2ID0gdGhpczsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTExKCkgewogICAgICAgIHZhciBfdGhpczE2JGV4dGVuc2lvblByb3Y7CiAgICAgICAgdmFyIF90aGlzMTYkZXh0ZW5zaW9uUHJvdjIsIGVycm9ycywgb2theTsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMSQoX2NvbnRleHQxMSkgewogICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQxMS5wcmV2ID0gX2NvbnRleHQxMS5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfdGhpczE2LiRzZXQoX3RoaXMxNiwgJ2J1c3knLCB0cnVlKTsKCiAgICAgICAgICAgICAgLy8gSWYgdGhlIHByb3ZpZGVyIGlzIGZyb20gYW4gZXh0ZW5zaW9uLCBsZXQgaXQgZG8gdGhlIHByb3Zpc2lvbiBzdGVwCiAgICAgICAgICAgICAgaWYgKCEoKF90aGlzMTYkZXh0ZW5zaW9uUHJvdiA9IF90aGlzMTYuZXh0ZW5zaW9uUHJvdmlkZXIpICE9PSBudWxsICYmIF90aGlzMTYkZXh0ZW5zaW9uUHJvdiAhPT0gdm9pZCAwICYmIF90aGlzMTYkZXh0ZW5zaW9uUHJvdi5wcm92aXNpb24pKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDExLm5leHQgPSAxMTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBfY29udGV4dDExLm5leHQgPSA0OwogICAgICAgICAgICAgIHJldHVybiAoX3RoaXMxNiRleHRlbnNpb25Qcm92MiA9IF90aGlzMTYuZXh0ZW5zaW9uUHJvdmlkZXIpID09PSBudWxsIHx8IF90aGlzMTYkZXh0ZW5zaW9uUHJvdjIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzMTYkZXh0ZW5zaW9uUHJvdjIucHJvdmlzaW9uKF90aGlzMTYudmFsdWUsIF90aGlzMTYubWFjaGluZVBvb2xzKTsKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIGVycm9ycyA9IF9jb250ZXh0MTEuc2VudDsKICAgICAgICAgICAgICBva2F5ID0gKGVycm9ycyB8fCBbXSkubGVuZ3RoID09PSAwOwogICAgICAgICAgICAgIF90aGlzMTYuZXJyb3JzID0gZXJyb3JzOwogICAgICAgICAgICAgIF90aGlzMTYuJHNldChfdGhpczE2LCAnYnVzeScsIGZhbHNlKTsKICAgICAgICAgICAgICBidG5DYihva2F5KTsKICAgICAgICAgICAgICBpZiAoIW9rYXkpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0MTEubmV4dCA9IDExOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDExLmFicnVwdCgicmV0dXJuIiwgX3RoaXMxNi5kb25lKCkpOwogICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDExLmFicnVwdCgicmV0dXJuIiwgX3RoaXMxNi5fZG9TYXZlT3ZlcnJpZGUoZnVuY3Rpb24gKGRvbmUpIHsKICAgICAgICAgICAgICAgIF90aGlzMTYuJHNldChfdGhpczE2LCAnYnVzeScsIGZhbHNlKTsKICAgICAgICAgICAgICAgIHJldHVybiBidG5DYihkb25lKTsKICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTEuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUxMSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIF9kb1NhdmVPdmVycmlkZTogZnVuY3Rpb24gX2RvU2F2ZU92ZXJyaWRlKGJ0bkNiKSB7CiAgICAgIHZhciBfdGhpczE3ID0gdGhpczsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTEyKCkgewogICAgICAgIHZhciBfdGhpczE3JGxpdmVWYWx1ZSwgX3RoaXMxNyR2YWx1ZSwgX3RoaXMxNyR2YWx1ZSRzcGVjLCBfdGhpczE3JGVycm9yczsKICAgICAgICB2YXIgaXNFZGl0VmVyc2lvbiwgc2hvdWxkQ29udGludWUsIF90aGlzMTckbGl2ZVZhbHVlMiwgX3RoaXMxNyR2YWx1ZTIsIF90aGlzMTckYWdlbnRDb25maWcsIGNsdXN0ZXJJZCwgaXNVcGdyYWRlLCBfdGhpczE3JG1hY2hpbmVQb29scywgX2hhcnZlc3Rlckt1YmVjb25maWdTLCBfdGhpczE3JHZhbHVlMywgX3RoaXMxNyR2YWx1ZTQsIG5hbWVzcGFjZSwgcmVzLCBrdWJlY29uZmlnLCBoYXJ2ZXN0ZXJLdWJlY29uZmlnU2VjcmV0LCBkaXN0cm9Sb290LCBjbHVzdGVyQWdlbnREZXBsb3ltZW50Q3VzdG9taXphdGlvbiwgZmxlZXRBZ2VudERlcGxveW1lbnRDdXN0b21pemF0aW9uOwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTEyJChfY29udGV4dDEyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDEyLnByZXYgPSBfY29udGV4dDEyLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIC8vIFdlIGNhbm5vdCB1c2UgdGhlIGhvb2ssIGJlY2F1c2UgaXQgaXMgdHJpZ2dlcmVkIG9uIFlBTUwgdG9nZ2xlIHdpdGhvdXQgcmVzdG9yZSBpbml0aWFsaXplZCBkYXRhCiAgICAgICAgICAgICAgX3RoaXMxNy5hZ2VudENvbmZpZ3VyYXRpb25DbGVhbnVwKCk7CiAgICAgICAgICAgICAgaXNFZGl0VmVyc2lvbiA9IF90aGlzMTcuaXNFZGl0ICYmICgoX3RoaXMxNyRsaXZlVmFsdWUgPSBfdGhpczE3LmxpdmVWYWx1ZSkgPT09IG51bGwgfHwgX3RoaXMxNyRsaXZlVmFsdWUgPT09IHZvaWQgMCB8fCAoX3RoaXMxNyRsaXZlVmFsdWUgPSBfdGhpczE3JGxpdmVWYWx1ZS5zcGVjKSA9PT0gbnVsbCB8fCBfdGhpczE3JGxpdmVWYWx1ZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMxNyRsaXZlVmFsdWUua3ViZXJuZXRlc1ZlcnNpb24pICE9PSAoKF90aGlzMTckdmFsdWUgPSBfdGhpczE3LnZhbHVlKSA9PT0gbnVsbCB8fCBfdGhpczE3JHZhbHVlID09PSB2b2lkIDAgfHwgKF90aGlzMTckdmFsdWUgPSBfdGhpczE3JHZhbHVlLnNwZWMpID09PSBudWxsIHx8IF90aGlzMTckdmFsdWUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzMTckdmFsdWUua3ViZXJuZXRlc1ZlcnNpb24pOwogICAgICAgICAgICAgIGlmICghaXNFZGl0VmVyc2lvbikgewogICAgICAgICAgICAgICAgX2NvbnRleHQxMi5uZXh0ID0gODsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBfY29udGV4dDEyLm5leHQgPSA1OwogICAgICAgICAgICAgIHJldHVybiBfdGhpczE3LnNob3dBZGRvbkNvbmZpcm1hdGlvbigpOwogICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgc2hvdWxkQ29udGludWUgPSBfY29udGV4dDEyLnNlbnQ7CiAgICAgICAgICAgICAgaWYgKHNob3VsZENvbnRpbnVlKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDEyLm5leHQgPSA4OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEyLmFicnVwdCgicmV0dXJuIiwgYnRuQ2IoJ2NhbmNlbGxlZCcpKTsKICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgIF90aGlzMTcudmFsaWRhdGVDbHVzdGVyTmFtZSgpOwogICAgICAgICAgICAgIF9jb250ZXh0MTIubmV4dCA9IDExOwogICAgICAgICAgICAgIHJldHVybiBfdGhpczE3LnZhbGlkYXRlTWFjaGluZVBvb2woKTsKICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICBpZiAoIV90aGlzMTcuZXJyb3JzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgX2NvbnRleHQxMi5uZXh0ID0gMTQ7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgYnRuQ2IoZmFsc2UpOwogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEyLmFicnVwdCgicmV0dXJuIik7CiAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgICAgX2NvbnRleHQxMi5wcmV2ID0gMTQ7CiAgICAgICAgICAgICAgY2x1c3RlcklkID0gZ2V0KF90aGlzMTcuY3JlZGVudGlhbCwgJ2RlY29kZWREYXRhLmNsdXN0ZXJJZCcpIHx8ICcnOwogICAgICAgICAgICAgIF90aGlzMTcuYXBwbHlDaGFydFZhbHVlcyhfdGhpczE3LnZhbHVlLnNwZWMucmtlQ29uZmlnKTsKICAgICAgICAgICAgICBpc1VwZ3JhZGUgPSBfdGhpczE3LmlzRWRpdCAmJiAoKF90aGlzMTckbGl2ZVZhbHVlMiA9IF90aGlzMTcubGl2ZVZhbHVlKSA9PT0gbnVsbCB8fCBfdGhpczE3JGxpdmVWYWx1ZTIgPT09IHZvaWQgMCB8fCAoX3RoaXMxNyRsaXZlVmFsdWUyID0gX3RoaXMxNyRsaXZlVmFsdWUyLnNwZWMpID09PSBudWxsIHx8IF90aGlzMTckbGl2ZVZhbHVlMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMxNyRsaXZlVmFsdWUyLmt1YmVybmV0ZXNWZXJzaW9uKSAhPT0gKChfdGhpczE3JHZhbHVlMiA9IF90aGlzMTcudmFsdWUpID09PSBudWxsIHx8IF90aGlzMTckdmFsdWUyID09PSB2b2lkIDAgfHwgKF90aGlzMTckdmFsdWUyID0gX3RoaXMxNyR2YWx1ZTIuc3BlYykgPT09IG51bGwgfHwgX3RoaXMxNyR2YWx1ZTIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzMTckdmFsdWUyLmt1YmVybmV0ZXNWZXJzaW9uKTsKICAgICAgICAgICAgICBpZiAoISgoKF90aGlzMTckYWdlbnRDb25maWcgPSBfdGhpczE3LmFnZW50Q29uZmlnKSA9PT0gbnVsbCB8fCBfdGhpczE3JGFnZW50Q29uZmlnID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpczE3JGFnZW50Q29uZmlnWydjbG91ZC1wcm92aWRlci1uYW1lJ10pID09PSBIQVJWRVNURVIgJiYgY2x1c3RlcklkICYmIChfdGhpczE3LmlzQ3JlYXRlIHx8IGlzVXBncmFkZSkpKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDEyLm5leHQgPSAzMTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBuYW1lc3BhY2UgPSAoX3RoaXMxNyRtYWNoaW5lUG9vbHMgPSBfdGhpczE3Lm1hY2hpbmVQb29scykgPT09IG51bGwgfHwgX3RoaXMxNyRtYWNoaW5lUG9vbHMgPT09IHZvaWQgMCB8fCAoX3RoaXMxNyRtYWNoaW5lUG9vbHMgPSBfdGhpczE3JG1hY2hpbmVQb29sc1swXSkgPT09IG51bGwgfHwgX3RoaXMxNyRtYWNoaW5lUG9vbHMgPT09IHZvaWQgMCB8fCAoX3RoaXMxNyRtYWNoaW5lUG9vbHMgPSBfdGhpczE3JG1hY2hpbmVQb29scy5jb25maWcpID09PSBudWxsIHx8IF90aGlzMTckbWFjaGluZVBvb2xzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpczE3JG1hY2hpbmVQb29scy52bU5hbWVzcGFjZTsKICAgICAgICAgICAgICBfY29udGV4dDEyLm5leHQgPSAyMjsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXMxNy4kc3RvcmUuZGlzcGF0Y2goJ21hbmFnZW1lbnQvcmVxdWVzdCcsIHsKICAgICAgICAgICAgICAgIHVybDogIi9rOHMvY2x1c3RlcnMvIi5jb25jYXQoY2x1c3RlcklkLCAiL3YxL2hhcnZlc3Rlci9rdWJlY29uZmlnIiksCiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywKICAgICAgICAgICAgICAgIGRhdGE6IHsKICAgICAgICAgICAgICAgICAgY3NpQ2x1c3RlclJvbGVOYW1lOiAnaGFydmVzdGVyaGNpLmlvOmNzaS1kcml2ZXInLAogICAgICAgICAgICAgICAgICBjbHVzdGVyUm9sZU5hbWU6ICdoYXJ2ZXN0ZXJoY2kuaW86Y2xvdWRwcm92aWRlcicsCiAgICAgICAgICAgICAgICAgIG5hbWVzcGFjZTogbmFtZXNwYWNlLAogICAgICAgICAgICAgICAgICBzZXJ2aWNlQWNjb3VudE5hbWU6IF90aGlzMTcudmFsdWUubWV0YWRhdGEubmFtZQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjYXNlIDIyOgogICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0MTIuc2VudDsKICAgICAgICAgICAgICBrdWJlY29uZmlnID0gcmVzLmRhdGE7CiAgICAgICAgICAgICAgX2NvbnRleHQxMi5uZXh0ID0gMjY7CiAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMTcuY3JlYXRlS3ViZWNvbmZpZ1NlY3JldChrdWJlY29uZmlnKTsKICAgICAgICAgICAgY2FzZSAyNjoKICAgICAgICAgICAgICBoYXJ2ZXN0ZXJLdWJlY29uZmlnU2VjcmV0ID0gX2NvbnRleHQxMi5zZW50OwogICAgICAgICAgICAgIHNldChfdGhpczE3LmFnZW50Q29uZmlnLCAnY2xvdWQtcHJvdmlkZXItY29uZmlnJywgInNlY3JldDovL2ZsZWV0LWRlZmF1bHQ6Ii5jb25jYXQoaGFydmVzdGVyS3ViZWNvbmZpZ1NlY3JldCA9PT0gbnVsbCB8fCBoYXJ2ZXN0ZXJLdWJlY29uZmlnU2VjcmV0ID09PSB2b2lkIDAgfHwgKF9oYXJ2ZXN0ZXJLdWJlY29uZmlnUyA9IGhhcnZlc3Rlckt1YmVjb25maWdTZWNyZXQubWV0YWRhdGEpID09PSBudWxsIHx8IF9oYXJ2ZXN0ZXJLdWJlY29uZmlnUyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2hhcnZlc3Rlckt1YmVjb25maWdTLm5hbWUpKTsKICAgICAgICAgICAgICBpZiAoX3RoaXMxNy5pc0NyZWF0ZSkgewogICAgICAgICAgICAgICAgc2V0KF90aGlzMTcuY2hhcnRWYWx1ZXMsICIiLmNvbmNhdChIQVJWRVNURVJfQ0xPVURfUFJPVklERVIsICIuZ2xvYmFsLmNhdHRsZS5jbHVzdGVyTmFtZSIpLCBfdGhpczE3LnZhbHVlLm1ldGFkYXRhLm5hbWUpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBkaXN0cm9Sb290ID0gKF90aGlzMTckdmFsdWUzID0gX3RoaXMxNy52YWx1ZSkgIT09IG51bGwgJiYgX3RoaXMxNyR2YWx1ZTMgIT09IHZvaWQgMCAmJiAoX3RoaXMxNyR2YWx1ZTMgPSBfdGhpczE3JHZhbHVlMy5zcGVjKSAhPT0gbnVsbCAmJiBfdGhpczE3JHZhbHVlMyAhPT0gdm9pZCAwICYmIChfdGhpczE3JHZhbHVlMyA9IF90aGlzMTckdmFsdWUzLnJrZUNvbmZpZykgIT09IG51bGwgJiYgX3RoaXMxNyR2YWx1ZTMgIT09IHZvaWQgMCAmJiAoX3RoaXMxNyR2YWx1ZTMgPSBfdGhpczE3JHZhbHVlMy5kYXRhRGlyZWN0b3JpZXMpICE9PSBudWxsICYmIF90aGlzMTckdmFsdWUzICE9PSB2b2lkIDAgJiYgKF90aGlzMTckdmFsdWUzID0gX3RoaXMxNyR2YWx1ZTMuazhzRGlzdHJvKSAhPT0gbnVsbCAmJiBfdGhpczE3JHZhbHVlMyAhPT0gdm9pZCAwICYmIF90aGlzMTckdmFsdWUzLmxlbmd0aCA/IChfdGhpczE3JHZhbHVlNCA9IF90aGlzMTcudmFsdWUpID09PSBudWxsIHx8IF90aGlzMTckdmFsdWU0ID09PSB2b2lkIDAgfHwgKF90aGlzMTckdmFsdWU0ID0gX3RoaXMxNyR2YWx1ZTQuc3BlYykgPT09IG51bGwgfHwgX3RoaXMxNyR2YWx1ZTQgPT09IHZvaWQgMCB8fCAoX3RoaXMxNyR2YWx1ZTQgPSBfdGhpczE3JHZhbHVlNC5ya2VDb25maWcpID09PSBudWxsIHx8IF90aGlzMTckdmFsdWU0ID09PSB2b2lkIDAgfHwgKF90aGlzMTckdmFsdWU0ID0gX3RoaXMxNyR2YWx1ZTQuZGF0YURpcmVjdG9yaWVzKSA9PT0gbnVsbCB8fCBfdGhpczE3JHZhbHVlNCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMxNyR2YWx1ZTQuazhzRGlzdHJvIDogJy92YXIvbGliL3JhbmNoZXIvcmtlMic7CiAgICAgICAgICAgICAgc2V0KF90aGlzMTcuY2hhcnRWYWx1ZXMsICIiLmNvbmNhdChIQVJWRVNURVJfQ0xPVURfUFJPVklERVIsICIuY2xvdWRDb25maWdQYXRoIiksICIiLmNvbmNhdChkaXN0cm9Sb290LCAiL2V0Yy9jb25maWctZmlsZXMvY2xvdWQtcHJvdmlkZXItY29uZmlnIikpOwogICAgICAgICAgICBjYXNlIDMxOgogICAgICAgICAgICAgIF9jb250ZXh0MTIubmV4dCA9IDM4OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDMzOgogICAgICAgICAgICAgIF9jb250ZXh0MTIucHJldiA9IDMzOwogICAgICAgICAgICAgIF9jb250ZXh0MTIudDAgPSBfY29udGV4dDEyWyJjYXRjaCJdKDE0KTsKICAgICAgICAgICAgICBfdGhpczE3LmVycm9ycy5wdXNoKF9jb250ZXh0MTIudDApOwogICAgICAgICAgICAgIGJ0bkNiKGZhbHNlKTsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMi5hYnJ1cHQoInJldHVybiIpOwogICAgICAgICAgICBjYXNlIDM4OgogICAgICAgICAgICAgIC8vIFJlbW92ZSBudWxsIHByb2ZpbGUgb24gbWFjaGluZUdsb2JhbENvbmZpZyAtIGh0dHBzOi8vZ2l0aHViLmNvbS9yYW5jaGVyL2Rhc2hib2FyZC9pc3N1ZXMvODQ4MAogICAgICAgICAgICAgIGlmICgoKF90aGlzMTckdmFsdWUkc3BlYyA9IF90aGlzMTcudmFsdWUuc3BlYykgPT09IG51bGwgfHwgX3RoaXMxNyR2YWx1ZSRzcGVjID09PSB2b2lkIDAgfHwgKF90aGlzMTckdmFsdWUkc3BlYyA9IF90aGlzMTckdmFsdWUkc3BlYy5ya2VDb25maWcpID09PSBudWxsIHx8IF90aGlzMTckdmFsdWUkc3BlYyA9PT0gdm9pZCAwIHx8IChfdGhpczE3JHZhbHVlJHNwZWMgPSBfdGhpczE3JHZhbHVlJHNwZWMubWFjaGluZUdsb2JhbENvbmZpZykgPT09IG51bGwgfHwgX3RoaXMxNyR2YWx1ZSRzcGVjID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpczE3JHZhbHVlJHNwZWMucHJvZmlsZSkgPT09IG51bGwpIHsKICAgICAgICAgICAgICAgIGRlbGV0ZSBfdGhpczE3LnZhbHVlLnNwZWMucmtlQ29uZmlnLm1hY2hpbmVHbG9iYWxDb25maWcucHJvZmlsZTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIC8vIFN0b3JlIHRoZSBjdXJyZW50IGRhdGEgZm9yIGZsZWV0IGFuZCBjbHVzdGVyIGFnZW50IHNvIHRoYXQgd2UgY2FuIHJlLWFwcGx5IGl0IGxhdGVyIGlmIHRoZSBzYXZlIGZhaWxzCiAgICAgICAgICAgICAgLy8gVGhlIGNsZWFudXAgb2NjdXJzIGJlZm9yZSBzYXZlIHdpdGggYWdlbnRDb25maWd1cmF0aW9uQ2xlYW51cCgpCiAgICAgICAgICAgICAgY2x1c3RlckFnZW50RGVwbG95bWVudEN1c3RvbWl6YXRpb24gPSBfdGhpczE3LnZhbHVlLnNwZWNbQ0xVU1RFUl9BR0VOVF9DVVNUT01JWkFUSU9OXSA/IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoX3RoaXMxNy52YWx1ZS5zcGVjW0NMVVNURVJfQUdFTlRfQ1VTVE9NSVpBVElPTl0pKSA6IG51bGw7CiAgICAgICAgICAgICAgZmxlZXRBZ2VudERlcGxveW1lbnRDdXN0b21pemF0aW9uID0gX3RoaXMxNy52YWx1ZS5zcGVjW0ZMRUVUX0FHRU5UX0NVU1RPTUlaQVRJT05dID8gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShfdGhpczE3LnZhbHVlLnNwZWNbRkxFRVRfQUdFTlRfQ1VTVE9NSVpBVElPTl0pKSA6IG51bGw7CiAgICAgICAgICAgICAgX2NvbnRleHQxMi5uZXh0ID0gNDM7CiAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMTcuc2F2ZShidG5DYik7CiAgICAgICAgICAgIGNhc2UgNDM6CiAgICAgICAgICAgICAgLy8gY29tZXMgZnJvbSBjcmVhdGVFZGl0VmlldyBtaXhpbgogICAgICAgICAgICAgIC8vIGlmIHRoZXJlIGFyZSBhbnkgZXJyb3JzIHNhdmluZywgcmVzdG9yZSB0aGUgYWdlbnQgY29uZmlnIGRhdGEKICAgICAgICAgICAgICBpZiAoKF90aGlzMTckZXJyb3JzID0gX3RoaXMxNy5lcnJvcnMpICE9PSBudWxsICYmIF90aGlzMTckZXJyb3JzICE9PSB2b2lkIDAgJiYgX3RoaXMxNyRlcnJvcnMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAvLyBFbnN1cmUgdGhlIGFnZW50IGNvbmZpZ3VyYXRpb24gaXMgc2V0IGJhY2sgdG8gdGhlIHZhbHVlcyBiZWZvcmUgd2UgY2hhbmdlZCAoY2xlYW5lZCkgaXQKICAgICAgICAgICAgICAgIHNldChfdGhpczE3LnZhbHVlLnNwZWMsIENMVVNURVJfQUdFTlRfQ1VTVE9NSVpBVElPTiwgY2x1c3RlckFnZW50RGVwbG95bWVudEN1c3RvbWl6YXRpb24pOwogICAgICAgICAgICAgICAgc2V0KF90aGlzMTcudmFsdWUuc3BlYywgRkxFRVRfQUdFTlRfQ1VTVE9NSVpBVElPTiwgZmxlZXRBZ2VudERlcGxveW1lbnRDdXN0b21pemF0aW9uKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIGNhc2UgNDQ6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTIuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUxMiwgbnVsbCwgW1sxNCwgMzNdXSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGFjdHVhbGx5U2F2ZTogZnVuY3Rpb24gYWN0dWFsbHlTYXZlKHVybCkgewogICAgICB2YXIgX3RoaXMxOCA9IHRoaXM7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvcigvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxMygpIHsKICAgICAgICB2YXIgX3RoaXMxOCRleHRlbnNpb25Qcm92OwogICAgICAgIHZhciBfdGhpczE4JGV4dGVuc2lvblByb3YyLCByZXM7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTMkKF9jb250ZXh0MTMpIHsKICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0MTMucHJldiA9IF9jb250ZXh0MTMubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgaWYgKCEoKF90aGlzMTgkZXh0ZW5zaW9uUHJvdiA9IF90aGlzMTguZXh0ZW5zaW9uUHJvdmlkZXIpICE9PSBudWxsICYmIF90aGlzMTgkZXh0ZW5zaW9uUHJvdiAhPT0gdm9pZCAwICYmIF90aGlzMTgkZXh0ZW5zaW9uUHJvdi5zYXZlQ2x1c3RlcikpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0MTMubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgX2NvbnRleHQxMy5uZXh0ID0gMzsKICAgICAgICAgICAgICByZXR1cm4gKF90aGlzMTgkZXh0ZW5zaW9uUHJvdjIgPSBfdGhpczE4LmV4dGVuc2lvblByb3ZpZGVyKSA9PT0gbnVsbCB8fCBfdGhpczE4JGV4dGVuc2lvblByb3YyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpczE4JGV4dGVuc2lvblByb3YyLnNhdmVDbHVzdGVyKF90aGlzMTgudmFsdWUsIF90aGlzMTguc2NoZW1hKTsKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEzLmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQxMy5zZW50KTsKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIGlmICghX3RoaXMxOC5pc0NyZWF0ZSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQxMy5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgdXJsID0gdXJsIHx8IF90aGlzMTguc2NoZW1hLmxpbmtGb3IoJ2NvbGxlY3Rpb24nKTsKICAgICAgICAgICAgICBfY29udGV4dDEzLm5leHQgPSA4OwogICAgICAgICAgICAgIHJldHVybiBfdGhpczE4LnZhbHVlLnNhdmUoewogICAgICAgICAgICAgICAgdXJsOiB1cmwKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0MTMuc2VudDsKICAgICAgICAgICAgICBpZiAocmVzKSB7CiAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKF90aGlzMTgudmFsdWUsIHJlcyk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIF9jb250ZXh0MTMubmV4dCA9IDE0OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgIF9jb250ZXh0MTMubmV4dCA9IDE0OwogICAgICAgICAgICAgIHJldHVybiBfdGhpczE4LnZhbHVlLnNhdmUoKTsKICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMy5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTEzKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgLy8gY3JlYXRlIGEgc2VjcmV0IHRvIHJlZmVyZW5jZSB0aGUgaGFydmVzdGVyIGNsdXN0ZXIga3ViZWNvbmZpZyBpbiBya2VDb25maWcKICAgIGNyZWF0ZUt1YmVjb25maWdTZWNyZXQ6IGZ1bmN0aW9uIGNyZWF0ZUt1YmVjb25maWdTZWNyZXQoKSB7CiAgICAgIHZhciBfYXJndW1lbnRzID0gYXJndW1lbnRzLAogICAgICAgIF90aGlzMTkgPSB0aGlzOwogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTQoKSB7CiAgICAgICAgdmFyIGt1YmVjb25maWcsIGNsdXN0ZXJOYW1lLCBzZWNyZXQ7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTQkKF9jb250ZXh0MTQpIHsKICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0MTQucHJldiA9IF9jb250ZXh0MTQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAga3ViZWNvbmZpZyA9IF9hcmd1bWVudHMubGVuZ3RoID4gMCAmJiBfYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBfYXJndW1lbnRzWzBdIDogJyc7CiAgICAgICAgICAgICAgY2x1c3Rlck5hbWUgPSBfdGhpczE5LnZhbHVlLm1ldGFkYXRhLm5hbWU7CiAgICAgICAgICAgICAgX2NvbnRleHQxNC5uZXh0ID0gNDsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXMxOS4kc3RvcmUuZGlzcGF0Y2goJ21hbmFnZW1lbnQvY3JlYXRlJywgewogICAgICAgICAgICAgICAgdHlwZTogU0VDUkVULAogICAgICAgICAgICAgICAgbWV0YWRhdGE6IHsKICAgICAgICAgICAgICAgICAgbmFtZXNwYWNlOiAnZmxlZXQtZGVmYXVsdCcsCiAgICAgICAgICAgICAgICAgIGdlbmVyYXRlTmFtZTogJ2hhcnZlc3RlcmNvbmZpZycsCiAgICAgICAgICAgICAgICAgIGFubm90YXRpb25zOiBfZGVmaW5lUHJvcGVydHkoX2RlZmluZVByb3BlcnR5KHt9LCBDQVBJX0FOTk9UQVRJT05TLlNFQ1JFVF9BVVRILCBjbHVzdGVyTmFtZSksIENBUElfQU5OT1RBVElPTlMuU0VDUkVUX1dJTExfREVMRVRFLCAndHJ1ZScpCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgZGF0YTogewogICAgICAgICAgICAgICAgICBjcmVkZW50aWFsOiBiYXNlNjRFbmNvZGUoa3ViZWNvbmZpZykKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIHNlY3JldCA9IF9jb250ZXh0MTQuc2VudDsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNC5hYnJ1cHQoInJldHVybiIsIHNlY3JldC5zYXZlKHsKICAgICAgICAgICAgICAgIHVybDogJy92MS9zZWNyZXRzJywKICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnCiAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUxNCk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGNhbmNlbDogZnVuY3Rpb24gY2FuY2VsKCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgbmFtZTogJ2MtY2x1c3Rlci1wcm9kdWN0LXJlc291cmNlJywKICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgIGNsdXN0ZXI6IHRoaXMuJHJvdXRlLnBhcmFtcy5jbHVzdGVyLAogICAgICAgICAgcHJvZHVjdDogdGhpcy4kc3RvcmUuZ2V0dGVyc1sncHJvZHVjdElkJ10sCiAgICAgICAgICByZXNvdXJjZTogQ0FQSS5SQU5DSEVSX0NMVVNURVIKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIC8qKgogICAgICogRW5zdXJlIGFsbCBjaGFydCBpbmZvcm1hdGlvbiByZXF1aXJlZCB0byBzaG93IGFkZG9ucyBpcyBhdmFpbGFibGUKICAgICAqCiAgICAgKiBUaGlzIGJhc2ljYWxseSBtZWFucwogICAgICogMSkgVGhhdCB0aGUgZnVsbCBjaGFydCByZWxhdGluZyB0byB0aGUgYWRkb24gaXMgZmV0Y2hlZCAod2hpY2ggaW5jbHVkZXMgY29yZSBjaGFydCwgcmVhZG1lIGFuZCB2YWx1ZXMpCiAgICAgKiAyKSBXZSdyZSByZWFkeSB0byBjYWNoZSBhbnkgdmFsdWVzIHRoZSB1c2VyIHByb3ZpZGVzIGZvciBlYWNoIGFkZG9uCiAgICAgKi8KICAgIGluaXRBZGRvbnM6IGZ1bmN0aW9uIGluaXRBZGRvbnMoKSB7CiAgICAgIHZhciBfdGhpczIwID0gdGhpczsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTE1KCkgewogICAgICAgIHZhciBfaXRlcmF0b3I4LCBfc3RlcDgsIGNoYXJ0TmFtZSwgZW50cnksIHJlcywga2V5OwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTE1JChfY29udGV4dDE1KSB7CiAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDE1LnByZXYgPSBfY29udGV4dDE1Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF9pdGVyYXRvcjggPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihfdGhpczIwLmFkZG9uTmFtZXMpOwogICAgICAgICAgICAgIF9jb250ZXh0MTUucHJldiA9IDE7CiAgICAgICAgICAgICAgX2l0ZXJhdG9yOC5zKCk7CiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICBpZiAoKF9zdGVwOCA9IF9pdGVyYXRvcjgubigpKS5kb25lKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDE1Lm5leHQgPSAyMjsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBjaGFydE5hbWUgPSBfc3RlcDgudmFsdWU7CiAgICAgICAgICAgICAgZW50cnkgPSBfdGhpczIwLmNoYXJ0VmVyc2lvbnNbY2hhcnROYW1lXTsgLy8gcHJldmVudCBmZXRjaGluZyBvZiBhZGRvbiBjb25maWcgZm9yICdub25lJyBDTkkgb3B0aW9uCiAgICAgICAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3JhbmNoZXIvZGFzaGJvYXJkL2lzc3Vlcy8xMDMzOAogICAgICAgICAgICAgIGlmICghKF90aGlzMjAudmVyc2lvbkluZm9bY2hhcnROYW1lXSB8fCBjaGFydE5hbWUuaW5jbHVkZXMoJ25vbmUnKSkpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0MTUubmV4dCA9IDg7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTUuYWJydXB0KCJjb250aW51ZSIsIDIwKTsKICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgIF9jb250ZXh0MTUucHJldiA9IDg7CiAgICAgICAgICAgICAgX2NvbnRleHQxNS5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMjAuJHN0b3JlLmRpc3BhdGNoKCdjYXRhbG9nL2dldFZlcnNpb25JbmZvJywgewogICAgICAgICAgICAgICAgcmVwb1R5cGU6ICdjbHVzdGVyJywKICAgICAgICAgICAgICAgIHJlcG9OYW1lOiBlbnRyeS5yZXBvLAogICAgICAgICAgICAgICAgY2hhcnROYW1lOiBjaGFydE5hbWUsCiAgICAgICAgICAgICAgICB2ZXJzaW9uTmFtZTogZW50cnkudmVyc2lvbgogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0MTUuc2VudDsKICAgICAgICAgICAgICBzZXQoX3RoaXMyMC52ZXJzaW9uSW5mbywgY2hhcnROYW1lLCByZXMpOwogICAgICAgICAgICAgIGtleSA9IF90aGlzMjAuY2hhcnRWZXJzaW9uS2V5KGNoYXJ0TmFtZSk7CiAgICAgICAgICAgICAgaWYgKCFfdGhpczIwLnVzZXJDaGFydFZhbHVlc1trZXldKSB7CiAgICAgICAgICAgICAgICBfdGhpczIwLnVzZXJDaGFydFZhbHVlc1trZXldID0ge307CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIF9jb250ZXh0MTUubmV4dCA9IDIwOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDE3OgogICAgICAgICAgICAgIF9jb250ZXh0MTUucHJldiA9IDE3OwogICAgICAgICAgICAgIF9jb250ZXh0MTUudDAgPSBfY29udGV4dDE1WyJjYXRjaCJdKDgpOwogICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIkZhaWxlZCB0byBmZXRjaCBvciBwcm9jZXNzIGNoYXJ0IGluZm8gZm9yICIuY29uY2F0KGNoYXJ0TmFtZSkpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnNvbGUKICAgICAgICAgICAgY2FzZSAyMDoKICAgICAgICAgICAgICBfY29udGV4dDE1Lm5leHQgPSAzOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDIyOgogICAgICAgICAgICAgIF9jb250ZXh0MTUubmV4dCA9IDI3OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDI0OgogICAgICAgICAgICAgIF9jb250ZXh0MTUucHJldiA9IDI0OwogICAgICAgICAgICAgIF9jb250ZXh0MTUudDEgPSBfY29udGV4dDE1WyJjYXRjaCJdKDEpOwogICAgICAgICAgICAgIF9pdGVyYXRvcjguZShfY29udGV4dDE1LnQxKTsKICAgICAgICAgICAgY2FzZSAyNzoKICAgICAgICAgICAgICBfY29udGV4dDE1LnByZXYgPSAyNzsKICAgICAgICAgICAgICBfaXRlcmF0b3I4LmYoKTsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNS5maW5pc2goMjcpOwogICAgICAgICAgICBjYXNlIDMwOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE1LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMTUsIG51bGwsIFtbMSwgMjQsIDI3LCAzMF0sIFs4LCAxN11dKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgc2hvd0FkZG9uczogZnVuY3Rpb24gc2hvd0FkZG9ucyhrZXkpIHsKICAgICAgdmFyIF90aGlzMjEgPSB0aGlzOwogICAgICB0aGlzLmFkZG9uc1JldisrOwogICAgICB0aGlzLmFkZG9uTmFtZXMuZm9yRWFjaChmdW5jdGlvbiAobmFtZSkgewogICAgICAgIHZhciBfdGhpczIxJHZlcnNpb25JbmZvJG47CiAgICAgICAgdmFyIGNoYXJ0VmFsdWVzID0gKF90aGlzMjEkdmVyc2lvbkluZm8kbiA9IF90aGlzMjEudmVyc2lvbkluZm9bbmFtZV0pICE9PSBudWxsICYmIF90aGlzMjEkdmVyc2lvbkluZm8kbiAhPT0gdm9pZCAwICYmIF90aGlzMjEkdmVyc2lvbkluZm8kbi5xdWVzdGlvbnMgPyBfdGhpczIxLmluaXRZYW1sRWRpdG9yKG5hbWUpIDoge307CiAgICAgICAgc2V0KF90aGlzMjEudXNlckNoYXJ0VmFsdWVzVGVtcCwgbmFtZSwgY2hhcnRWYWx1ZXMpOwogICAgICB9KTsKICAgICAgdGhpcy5yZWZyZXNoQ29tcG9uZW50V2l0aFlhbWxzKGtleSk7CiAgICB9LAogICAgcmVmcmVzaENvbXBvbmVudFdpdGhZYW1sczogZnVuY3Rpb24gcmVmcmVzaENvbXBvbmVudFdpdGhZYW1scyhrZXkpIHsKICAgICAgdmFyIGNvbXBvbmVudCA9IHRoaXMuJHJlZnNba2V5XTsKICAgICAgaWYgKGNvbXBvbmVudCkgewogICAgICAgIHRoaXMucmVmcmVzaFlhbWxzKGNvbXBvbmVudC4kcmVmcyk7CiAgICAgIH0KICAgIH0sCiAgICByZWZyZXNoWWFtbHM6IGZ1bmN0aW9uIHJlZnJlc2hZYW1scyhyZWZzKSB7CiAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMocmVmcykuZmlsdGVyKGZ1bmN0aW9uICh4KSB7CiAgICAgICAgcmV0dXJuIHguc3RhcnRzV2l0aCgneWFtbCcpOwogICAgICB9KTsKICAgICAgdmFyIF9pdGVyYXRvcjkgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihrZXlzKSwKICAgICAgICBfc3RlcDk7CiAgICAgIHRyeSB7CiAgICAgICAgZm9yIChfaXRlcmF0b3I5LnMoKTsgIShfc3RlcDkgPSBfaXRlcmF0b3I5Lm4oKSkuZG9uZTspIHsKICAgICAgICAgIHZhciBrID0gX3N0ZXA5LnZhbHVlOwogICAgICAgICAgdmFyIGVudHJ5ID0gcmVmc1trXTsKICAgICAgICAgIHZhciBsaXN0ID0gaXNBcnJheShlbnRyeSkgPyBlbnRyeSA6IFtlbnRyeV07CiAgICAgICAgICB2YXIgX2l0ZXJhdG9yMTAgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihsaXN0KSwKICAgICAgICAgICAgX3N0ZXAxMDsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIGZvciAoX2l0ZXJhdG9yMTAucygpOyAhKF9zdGVwMTAgPSBfaXRlcmF0b3IxMC5uKCkpLmRvbmU7KSB7CiAgICAgICAgICAgICAgdmFyIGNvbXBvbmVudCA9IF9zdGVwMTAudmFsdWU7CiAgICAgICAgICAgICAgY29tcG9uZW50ID09PSBudWxsIHx8IGNvbXBvbmVudCA9PT0gdm9pZCAwIHx8IGNvbXBvbmVudC5yZWZyZXNoKCk7IC8vIGB5YW1sYCByZWYgY2FuIGJlIHVuZGVmaW5lZCBvbiBzd2l0Y2hpbmcgZnJvbSBCYXNpYyB0byBBZGRvbiB0YWIgKEF6dXJlIC0tPiBBbWF6b24gLS0+IGFkZG9uKQogICAgICAgICAgICB9CiAgICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgX2l0ZXJhdG9yMTAuZShlcnIpOwogICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgX2l0ZXJhdG9yMTAuZigpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgX2l0ZXJhdG9yOS5lKGVycik7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgX2l0ZXJhdG9yOS5mKCk7CiAgICAgIH0KICAgIH0sCiAgICB1cGRhdGVWYWx1ZXM6IGZ1bmN0aW9uIHVwZGF0ZVZhbHVlcyhuYW1lLCB2YWx1ZXMpIHsKICAgICAgc2V0KHRoaXMudXNlckNoYXJ0VmFsdWVzVGVtcCwgbmFtZSwgdmFsdWVzKTsKICAgICAgdGhpcy5zeW5jQ2hhcnRWYWx1ZXMobmFtZSk7CiAgICB9LAogICAgc3luY0NoYXJ0VmFsdWVzOiB0aHJvdHRsZShmdW5jdGlvbiAobmFtZSkgewogICAgICB2YXIgX3RoaXMkdmVyc2lvbkluZm8kbmFtOwogICAgICB2YXIgZnJvbUNoYXJ0ID0gKF90aGlzJHZlcnNpb25JbmZvJG5hbSA9IHRoaXMudmVyc2lvbkluZm9bbmFtZV0pID09PSBudWxsIHx8IF90aGlzJHZlcnNpb25JbmZvJG5hbSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkdmVyc2lvbkluZm8kbmFtLnZhbHVlczsKICAgICAgdmFyIGZyb21Vc2VyID0gdGhpcy51c2VyQ2hhcnRWYWx1ZXNUZW1wW25hbWVdOwogICAgICB2YXIgZGlmZmVyZW50ID0gZGlmZihmcm9tQ2hhcnQsIGZyb21Vc2VyKTsKICAgICAgdGhpcy51c2VyQ2hhcnRWYWx1ZXNbdGhpcy5jaGFydFZlcnNpb25LZXkobmFtZSldID0gZGlmZmVyZW50OwogICAgfSwgMjUwLCB7CiAgICAgIGxlYWRpbmc6IHRydWUKICAgIH0pLAogICAgaW5pdFlhbWxFZGl0b3I6IGZ1bmN0aW9uIGluaXRZYW1sRWRpdG9yKG5hbWUpIHsKICAgICAgdmFyIGRlZmF1bHRDaGFydFZhbHVlID0gdGhpcy52ZXJzaW9uSW5mb1tuYW1lXTsKICAgICAgdmFyIGtleSA9IHRoaXMuY2hhcnRWZXJzaW9uS2V5KG5hbWUpOwogICAgICByZXR1cm4gbWVyZ2Uoe30sIChkZWZhdWx0Q2hhcnRWYWx1ZSA9PT0gbnVsbCB8fCBkZWZhdWx0Q2hhcnRWYWx1ZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZGVmYXVsdENoYXJ0VmFsdWUudmFsdWVzKSB8fCB7fSwgdGhpcy51c2VyQ2hhcnRWYWx1ZXNba2V5XSB8fCB7fSk7CiAgICB9LAogICAgaW5pdFNlcnZlckFnZW50QXJnczogZnVuY3Rpb24gaW5pdFNlcnZlckFnZW50QXJncygpIHsKICAgICAgdmFyIF90aGlzJHNlcnZlckNvbmZpZzsKICAgICAgZm9yICh2YXIgayBpbiB0aGlzLnNlcnZlckFyZ3MpIHsKICAgICAgICBpZiAodGhpcy5zZXJ2ZXJDb25maWdba10gPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgdmFyIGRlZiA9IHRoaXMuc2VydmVyQXJnc1trXS5kZWZhdWx0OwogICAgICAgICAgc2V0KHRoaXMuc2VydmVyQ29uZmlnLCBrLCBkZWYgIT09IHVuZGVmaW5lZCA/IGRlZiA6IHVuZGVmaW5lZCk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGZvciAodmFyIF9rIGluIHRoaXMuYWdlbnRBcmdzKSB7CiAgICAgICAgdmFyIF90aGlzJGFnZW50Q29uZmlnNDsKICAgICAgICBpZiAoKChfdGhpcyRhZ2VudENvbmZpZzQgPSB0aGlzLmFnZW50Q29uZmlnKSA9PT0gbnVsbCB8fCBfdGhpcyRhZ2VudENvbmZpZzQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJGFnZW50Q29uZmlnNFtfa10pID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgIHZhciBfZGVmID0gdGhpcy5hZ2VudEFyZ3NbX2tdLmRlZmF1bHQ7CiAgICAgICAgICBzZXQodGhpcy5hZ2VudENvbmZpZywgX2ssIF9kZWYgIT09IHVuZGVmaW5lZCA/IF9kZWYgOiB1bmRlZmluZWQpOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAoISgoX3RoaXMkc2VydmVyQ29uZmlnID0gdGhpcy5zZXJ2ZXJDb25maWcpICE9PSBudWxsICYmIF90aGlzJHNlcnZlckNvbmZpZyAhPT0gdm9pZCAwICYmIF90aGlzJHNlcnZlckNvbmZpZy5wcm9maWxlKSkgewogICAgICAgIHNldCh0aGlzLnNlcnZlckNvbmZpZywgJ3Byb2ZpbGUnLCBudWxsKTsKICAgICAgfQogICAgfSwKICAgIGNoYXJ0VmVyc2lvbktleTogZnVuY3Rpb24gY2hhcnRWZXJzaW9uS2V5KG5hbWUpIHsKICAgICAgdmFyIGFkZG9uVmVyc2lvbiA9IHRoaXMuYWRkb25WZXJzaW9ucy5maW5kKGZ1bmN0aW9uIChhdikgewogICAgICAgIHJldHVybiBhdi5uYW1lID09PSBuYW1lOwogICAgICB9KTsKICAgICAgcmV0dXJuIGFkZG9uVmVyc2lvbiA/ICIiLmNvbmNhdChuYW1lLCAiLSIpLmNvbmNhdChhZGRvblZlcnNpb24udmVyc2lvbikgOiBuYW1lOwogICAgfSwKICAgIG9uTWVtYmVyc2hpcFVwZGF0ZTogZnVuY3Rpb24gb25NZW1iZXJzaGlwVXBkYXRlKHVwZGF0ZSkgewogICAgICB0aGlzLiRzZXQodGhpcywgJ21lbWJlcnNoaXBVcGRhdGUnLCB1cGRhdGUpOwogICAgfSwKICAgIGluaXRSZWdpc3RyeTogZnVuY3Rpb24gaW5pdFJlZ2lzdHJ5KCkgewogICAgICB2YXIgX3RoaXMyMiA9IHRoaXM7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvcigvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxNigpIHsKICAgICAgICB2YXIgX3RoaXMyMiRhZ2VudENvbmZpZzsKICAgICAgICB2YXIgY2x1c3RlclJlZ2lzdHJ5LCByZWdpc3RyeVNlY3JldCwgcmVncywgY29uZmlnLCBoYXNNaXJyb3JzT3JBdXRoQ29uZmlnOwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTE2JChfY29udGV4dDE2KSB7CiAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDE2LnByZXYgPSBfY29udGV4dDE2Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIC8vIENoZWNrIGZvciBhbiBleGlzdGluZyBjbHVzdGVyIHNjb3BlZCByZWdpc3RyeQogICAgICAgICAgICAgIGNsdXN0ZXJSZWdpc3RyeSA9ICgoX3RoaXMyMiRhZ2VudENvbmZpZyA9IF90aGlzMjIuYWdlbnRDb25maWcpID09PSBudWxsIHx8IF90aGlzMjIkYWdlbnRDb25maWcgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzMjIkYWdlbnRDb25maWdbJ3N5c3RlbS1kZWZhdWx0LXJlZ2lzdHJ5J10pIHx8ICcnOyAvLyBDaGVjayBmb3IgdGhlIGdsb2JhbCByZWdpc3RyeQogICAgICAgICAgICAgIF9jb250ZXh0MTYubmV4dCA9IDM7CiAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMjIuJHN0b3JlLmRpc3BhdGNoKCdtYW5hZ2VtZW50L2ZpbmQnLCB7CiAgICAgICAgICAgICAgICB0eXBlOiBNQU5BR0VNRU5ULlNFVFRJTkcsCiAgICAgICAgICAgICAgICBpZDogU0VUVElORy5TWVNURU1fREVGQVVMVF9SRUdJU1RSWQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgX2NvbnRleHQxNi50MCA9IF9jb250ZXh0MTYuc2VudC52YWx1ZTsKICAgICAgICAgICAgICBpZiAoX2NvbnRleHQxNi50MCkgewogICAgICAgICAgICAgICAgX2NvbnRleHQxNi5uZXh0ID0gNjsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBfY29udGV4dDE2LnQwID0gJyc7CiAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICBfdGhpczIyLnN5c3RlbVJlZ2lzdHJ5ID0gX2NvbnRleHQxNi50MDsKICAgICAgICAgICAgICAvLyBUaGUgb3JkZXIgb2YgcHJlY2VkZW5jZSBpcyB0byB1c2UgdGhlIGNsdXN0ZXIgc2NvcGVkIHJlZ2lzdHJ5CiAgICAgICAgICAgICAgLy8gaWYgaXQgZXhpc3RzLCB0aGVuIHVzZSB0aGUgZ2xvYmFsIHNjb3BlZCByZWdpc3RyeSBhcyBhIGZhbGxiYWNrCiAgICAgICAgICAgICAgaWYgKGNsdXN0ZXJSZWdpc3RyeSkgewogICAgICAgICAgICAgICAgX3RoaXMyMi5yZWdpc3RyeUhvc3QgPSBjbHVzdGVyUmVnaXN0cnk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIF90aGlzMjIucmVnaXN0cnlIb3N0ID0gX3RoaXMyMi5zeXN0ZW1SZWdpc3RyeTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgcmVnaXN0cnlTZWNyZXQgPSBudWxsOwogICAgICAgICAgICAgIHJlZ3MgPSBfdGhpczIyLnJrZUNvbmZpZy5yZWdpc3RyaWVzOwogICAgICAgICAgICAgIGlmICghcmVncykgewogICAgICAgICAgICAgICAgcmVncyA9IHt9OwogICAgICAgICAgICAgICAgc2V0KF90aGlzMjIucmtlQ29uZmlnLCAncmVnaXN0cmllcycsIHJlZ3MpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAoIXJlZ3MuY29uZmlncykgewogICAgICAgICAgICAgICAgc2V0KHJlZ3MsICdjb25maWdzJywge30pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAoIXJlZ3MubWlycm9ycykgewogICAgICAgICAgICAgICAgc2V0KHJlZ3MsICdtaXJyb3JzJywge30pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBjb25maWcgPSByZWdzLmNvbmZpZ3NbX3RoaXMyMi5yZWdpc3RyeUhvc3RdOwogICAgICAgICAgICAgIGlmIChjb25maWcpIHsKICAgICAgICAgICAgICAgIHJlZ2lzdHJ5U2VjcmV0ID0gY29uZmlnLmF1dGhDb25maWdTZWNyZXROYW1lOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBfdGhpczIyLnJlZ2lzdHJ5U2VjcmV0ID0gcmVnaXN0cnlTZWNyZXQ7CiAgICAgICAgICAgICAgaGFzTWlycm9yc09yQXV0aENvbmZpZyA9IE9iamVjdC5rZXlzKHJlZ3MuY29uZmlncykubGVuZ3RoID4gMCB8fCBPYmplY3Qua2V5cyhyZWdzLm1pcnJvcnMpLmxlbmd0aCA+IDA7CiAgICAgICAgICAgICAgaWYgKF90aGlzMjIucmVnaXN0cnlIb3N0IHx8IHJlZ2lzdHJ5U2VjcmV0IHx8IGhhc01pcnJvcnNPckF1dGhDb25maWcpIHsKICAgICAgICAgICAgICAgIF90aGlzMjIuc2hvd0N1c3RvbVJlZ2lzdHJ5SW5wdXQgPSB0cnVlOwogICAgICAgICAgICAgICAgaWYgKGhhc01pcnJvcnNPckF1dGhDb25maWcpIHsKICAgICAgICAgICAgICAgICAgX3RoaXMyMi5zaG93Q3VzdG9tUmVnaXN0cnlBZHZhbmNlZElucHV0ID0gdHJ1ZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIGNhc2UgMTg6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTYuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUxNik7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIHNldFJlZ2lzdHJ5Q29uZmlnOiBmdW5jdGlvbiBzZXRSZWdpc3RyeUNvbmZpZygpIHsKICAgICAgdmFyIGhvc3RuYW1lID0gKHRoaXMucmVnaXN0cnlIb3N0IHx8ICcnKS50cmltKCk7CiAgICAgIGlmICh0aGlzLnN5c3RlbVJlZ2lzdHJ5KSB7CiAgICAgICAgLy8gRW1wdHkgc3RyaW5nIG92ZXJyaWRlcyB0aGUgc3lzdGVtIGRlZmF1bHQgdG8gbm90aGluZwogICAgICAgIHNldCh0aGlzLmFnZW50Q29uZmlnLCAnc3lzdGVtLWRlZmF1bHQtcmVnaXN0cnknLCAnJyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gTm8gbmVlZCB0byBzZXQgYW55dGhpbmcKICAgICAgICBzZXQodGhpcy5hZ2VudENvbmZpZywgJ3N5c3RlbS1kZWZhdWx0LXJlZ2lzdHJ5JywgdW5kZWZpbmVkKTsKICAgICAgfQogICAgICBpZiAoIWhvc3RuYW1lIHx8IGhvc3RuYW1lID09PSB0aGlzLnN5c3RlbVJlZ2lzdHJ5KSB7CiAgICAgICAgLy8gVW5kZWZpbmVkIHJlbW92ZXMgdGhlIGtleSB3aGljaCB1c2VzIHRoZSBnbG9iYWwgc2V0dGluZyB3aXRob3V0IGhhcmRjb2RpbmcgaXQgaW50byB0aGUgY29uZmlnCiAgICAgICAgc2V0KHRoaXMuYWdlbnRDb25maWcsICdzeXN0ZW0tZGVmYXVsdC1yZWdpc3RyeScsIHVuZGVmaW5lZCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgc2V0KHRoaXMuYWdlbnRDb25maWcsICdzeXN0ZW0tZGVmYXVsdC1yZWdpc3RyeScsIGhvc3RuYW1lKTsKICAgICAgfQogICAgICBpZiAoaG9zdG5hbWUgJiYgdGhpcy5yZWdpc3RyeVNlY3JldCkgewogICAgICAgIC8vIEZvciBhIHJlZ2lzdHJ5IHdpdGggYmFzaWMgYXV0aCwgYnV0IG5vIG1pcnJvcnMsCiAgICAgICAgLy8gYWRkIGEgc2luZ2xlIHJlZ2lzdHJ5IGNvbmZpZyB3aXRoIHRoZSBiYXNpYyBhdXRoIHNlY3JldC4KICAgICAgICB2YXIgYmFzaWNBdXRoQ29uZmlnID0gX2RlZmluZVByb3BlcnR5KHt9LCBob3N0bmFtZSwgewogICAgICAgICAgYXV0aENvbmZpZ1NlY3JldE5hbWU6IHRoaXMucmVnaXN0cnlTZWNyZXQsCiAgICAgICAgICBjYUJ1bmRsZTogbnVsbCwKICAgICAgICAgIGluc2VjdXJlU2tpcFZlcmlmeTogZmFsc2UsCiAgICAgICAgICB0bHNTZWNyZXROYW1lOiBudWxsCiAgICAgICAgfSk7CiAgICAgICAgdmFyIHJrZUNvbmZpZyA9IHRoaXMudmFsdWUuc3BlYy5ya2VDb25maWc7CiAgICAgICAgaWYgKCFya2VDb25maWcpIHsKICAgICAgICAgIHRoaXMudmFsdWUuc3BlYy5ya2VDb25maWcgPSB7CiAgICAgICAgICAgIHJlZ2lzdHJpZXM6IHsKICAgICAgICAgICAgICBjb25maWdzOiBiYXNpY0F1dGhDb25maWcKICAgICAgICAgICAgfQogICAgICAgICAgfTsKICAgICAgICB9IGVsc2UgaWYgKHJrZUNvbmZpZy5yZWdpc3RyaWVzLmNvbmZpZ3MgJiYgT2JqZWN0LmtleXMocmtlQ29uZmlnLnJlZ2lzdHJpZXMuY29uZmlncykubGVuZ3RoID4gMCkgewogICAgICAgICAgLy8gSWYgc29tZSBleGlzdGluZyBhdXRoZW50aWNhdGlvbiBzZWNyZXRzIGFyZSBhbHJlYWR5IGNvbmZpZ3VyZWQKICAgICAgICAgIC8vIGZvciByZWdpc3RyeSBtaXJyb3JzLCB0aGUgYmFzaWMgYXV0aCBpcyBhZGRlZCB0byB0aGUgZXhpc3Rpbmcgb25lcy4KICAgICAgICAgIHZhciBleGlzdGluZ0NvbmZpZ3MgPSBya2VDb25maWcucmVnaXN0cmllcy5jb25maWdzOwogICAgICAgICAgdGhpcy52YWx1ZS5zcGVjLnJrZUNvbmZpZy5yZWdpc3RyaWVzLmNvbmZpZ3MgPSBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGJhc2ljQXV0aENvbmZpZyksIGV4aXN0aW5nQ29uZmlncyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHZhciBleGlzdGluZ01pcnJvckFuZEF1dGhDb25maWcgPSB0aGlzLnZhbHVlLnNwZWMucmtlQ29uZmlnLnJlZ2lzdHJpZXM7CiAgICAgICAgICB0aGlzLnZhbHVlLnNwZWMucmtlQ29uZmlnLnJlZ2lzdHJpZXMgPSBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGV4aXN0aW5nTWlycm9yQW5kQXV0aENvbmZpZyksIHt9LCB7CiAgICAgICAgICAgIGNvbmZpZ3M6IGJhc2ljQXV0aENvbmZpZwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgdXBkYXRlQ29uZmlnczogZnVuY3Rpb24gdXBkYXRlQ29uZmlncyhjb25maWdzKSB7CiAgICAgIHZhciBfdGhpcyR2YWx1ZSRzcGVjMjsKICAgICAgLy8gVXBkYXRlIGF1dGhlbnRpY2F0aW9uIGNvbmZpZ3VyYXRpb24KICAgICAgLy8gZm9yIGVhY2ggbWlycm9yCiAgICAgIGlmICghKChfdGhpcyR2YWx1ZSRzcGVjMiA9IHRoaXMudmFsdWUuc3BlYykgIT09IG51bGwgJiYgX3RoaXMkdmFsdWUkc3BlYzIgIT09IHZvaWQgMCAmJiBfdGhpcyR2YWx1ZSRzcGVjMi5ya2VDb25maWcpKSB7CiAgICAgICAgdGhpcy52YWx1ZS5zcGVjLnJrZUNvbmZpZyA9IHsKICAgICAgICAgIHJlZ2lzdHJpZXM6IHt9CiAgICAgICAgfTsKICAgICAgfQogICAgICBzZXQodGhpcy52YWx1ZS5zcGVjLnJrZUNvbmZpZy5yZWdpc3RyaWVzLCAnY29uZmlncycsIGNvbmZpZ3MpOwogICAgfSwKICAgIGdldEFsbE9wdGlvbnNBZnRlckN1cnJlbnRWZXJzaW9uOiBmdW5jdGlvbiBnZXRBbGxPcHRpb25zQWZ0ZXJDdXJyZW50VmVyc2lvbih2ZXJzaW9ucywgY3VycmVudFZlcnNpb24sIGRlZmF1bHRWZXJzaW9uKSB7CiAgICAgIHZhciBfdGhpczIzID0gdGhpczsKICAgICAgdmFyIG91dCA9ICh2ZXJzaW9ucyB8fCBbXSkuZmlsdGVyKGZ1bmN0aW9uIChvYmopIHsKICAgICAgICByZXR1cm4gISFvYmouc2VydmVyQXJnczsKICAgICAgfSkubWFwKGZ1bmN0aW9uIChvYmopIHsKICAgICAgICB2YXIgZGlzYWJsZWQgPSBmYWxzZTsKICAgICAgICB2YXIgZXhwZXJpbWVudGFsID0gZmFsc2U7CiAgICAgICAgdmFyIGlzQ3VycmVudFZlcnNpb24gPSBmYWxzZTsKICAgICAgICB2YXIgbGFiZWwgPSBvYmouaWQ7CiAgICAgICAgaWYgKGN1cnJlbnRWZXJzaW9uKSB7CiAgICAgICAgICBkaXNhYmxlZCA9IGNvbXBhcmUob2JqLmlkLCBjdXJyZW50VmVyc2lvbikgPCAwOwogICAgICAgICAgaXNDdXJyZW50VmVyc2lvbiA9IGNvbXBhcmUob2JqLmlkLCBjdXJyZW50VmVyc2lvbikgPT09IDA7CiAgICAgICAgfQogICAgICAgIGlmIChkZWZhdWx0VmVyc2lvbikgewogICAgICAgICAgZXhwZXJpbWVudGFsID0gY29tcGFyZShkZWZhdWx0VmVyc2lvbiwgb2JqLmlkKSA8IDA7CiAgICAgICAgfQogICAgICAgIGlmIChpc0N1cnJlbnRWZXJzaW9uKSB7CiAgICAgICAgICBsYWJlbCA9ICIiLmNvbmNhdChsYWJlbCwgIiAiKS5jb25jYXQoX3RoaXMyMy50KCdjbHVzdGVyLmt1YmVybmV0ZXNWZXJzaW9uLmN1cnJlbnQnKSk7CiAgICAgICAgfQogICAgICAgIGlmIChleHBlcmltZW50YWwpIHsKICAgICAgICAgIGxhYmVsID0gIiIuY29uY2F0KGxhYmVsLCAiICIpLmNvbmNhdChfdGhpczIzLnQoJ2NsdXN0ZXIua3ViZXJuZXRlc1ZlcnNpb24uZXhwZXJpbWVudGFsJykpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gewogICAgICAgICAgbGFiZWw6IGxhYmVsLAogICAgICAgICAgdmFsdWU6IG9iai5pZCwKICAgICAgICAgIHNvcnQ6IHNvcnRhYmxlKG9iai5pZCksCiAgICAgICAgICBzZXJ2ZXJBcmdzOiBvYmouc2VydmVyQXJncywKICAgICAgICAgIGFnZW50QXJnczogb2JqLmFnZW50QXJncywKICAgICAgICAgIGNoYXJ0czogb2JqLmNoYXJ0cywKICAgICAgICAgIGRpc2FibGVkOiBkaXNhYmxlZAogICAgICAgIH07CiAgICAgIH0pOwogICAgICBpZiAoY3VycmVudFZlcnNpb24gJiYgIW91dC5maW5kKGZ1bmN0aW9uIChvYmopIHsKICAgICAgICByZXR1cm4gb2JqLnZhbHVlID09PSBjdXJyZW50VmVyc2lvbjsKICAgICAgfSkpIHsKICAgICAgICBvdXQucHVzaCh7CiAgICAgICAgICBsYWJlbDogIiIuY29uY2F0KGN1cnJlbnRWZXJzaW9uLCAiICIpLmNvbmNhdCh0aGlzLnQoJ2NsdXN0ZXIua3ViZXJuZXRlc1ZlcnNpb24uY3VycmVudCcpKSwKICAgICAgICAgIHZhbHVlOiBjdXJyZW50VmVyc2lvbiwKICAgICAgICAgIHNvcnQ6IHNvcnRhYmxlKGN1cnJlbnRWZXJzaW9uKQogICAgICAgIH0pOwogICAgICB9CiAgICAgIHZhciBzb3J0ZWQgPSBzb3J0Qnkob3V0LCAnc29ydDpkZXNjJyk7CiAgICAgIHZhciBtb3N0UmVjZW50UGF0Y2hWZXJzaW9ucyA9IHRoaXMuZ2V0TW9zdFJlY2VudFBhdGNoVmVyc2lvbnMoc29ydGVkKTsKICAgICAgdmFyIHNvcnRlZFdpdGhEZXByZWNhdGVkTGFiZWwgPSBzb3J0ZWQubWFwKGZ1bmN0aW9uIChvcHRpb25EYXRhKSB7CiAgICAgICAgdmFyIG1ham9yTWlub3IgPSAiIi5jb25jYXQoc2VtdmVyLm1ham9yKG9wdGlvbkRhdGEudmFsdWUpLCAiLiIpLmNvbmNhdChzZW12ZXIubWlub3Iob3B0aW9uRGF0YS52YWx1ZSkpOwogICAgICAgIGlmIChtb3N0UmVjZW50UGF0Y2hWZXJzaW9uc1ttYWpvck1pbm9yXSA9PT0gb3B0aW9uRGF0YS52YWx1ZSkgewogICAgICAgICAgcmV0dXJuIG9wdGlvbkRhdGE7CiAgICAgICAgfQogICAgICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIG9wdGlvbkRhdGEpLCB7fSwgewogICAgICAgICAgbGFiZWw6ICIiLmNvbmNhdChvcHRpb25EYXRhLmxhYmVsLCAiICIpLmNvbmNhdChfdGhpczIzLnQoJ2NsdXN0ZXIua3ViZXJuZXRlc1ZlcnNpb24uZGVwcmVjYXRlZCcpKQogICAgICAgIH0pOwogICAgICB9KTsKICAgICAgcmV0dXJuIHNvcnRlZFdpdGhEZXByZWNhdGVkTGFiZWw7CiAgICB9LAogICAgZ2V0TW9zdFJlY2VudFBhdGNoVmVyc2lvbnM6IGZ1bmN0aW9uIGdldE1vc3RSZWNlbnRQYXRjaFZlcnNpb25zKHNvcnRlZFZlcnNpb25zKSB7CiAgICAgIC8vIEdldCB0aGUgbW9zdCByZWNlbnQgcGF0Y2ggdmVyc2lvbiBmb3IgZWFjaCBLdWJlcm5ldGVzIG1pbm9yIHZlcnNpb24uCiAgICAgIHZhciB2ZXJzaW9uTWFwID0ge307CiAgICAgIHNvcnRlZFZlcnNpb25zLmZvckVhY2goZnVuY3Rpb24gKHZlcnNpb24pIHsKICAgICAgICB2YXIgbWFqb3JNaW5vciA9ICIiLmNvbmNhdChzZW12ZXIubWFqb3IodmVyc2lvbi52YWx1ZSksICIuIikuY29uY2F0KHNlbXZlci5taW5vcih2ZXJzaW9uLnZhbHVlKSk7CiAgICAgICAgaWYgKCF2ZXJzaW9uTWFwW21ham9yTWlub3JdKSB7CiAgICAgICAgICAvLyBCZWNhdXNlIHdlIHN0YXJ0IHdpdGggYSBzb3J0ZWQgbGlzdCBvZiB2ZXJzaW9ucywgd2Uga25vdyB0aGUKICAgICAgICAgIC8vIGhpZ2hlc3QgcGF0Y2ggdmVyc2lvbiBpcyBmaXJzdCBpbiB0aGUgbGlzdCwgc28gd2Ugb25seSBrZWVwIHRoZQogICAgICAgICAgLy8gZmlyc3Qgb2YgZWFjaCBtaW5vciB2ZXJzaW9uIGluIHRoZSBsaXN0LgogICAgICAgICAgdmVyc2lvbk1hcFttYWpvck1pbm9yXSA9IHZlcnNpb24udmFsdWU7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgcmV0dXJuIHZlcnNpb25NYXA7CiAgICB9LAogICAgZmlsdGVyT3V0RGVwcmVjYXRlZFBhdGNoVmVyc2lvbnM6IGZ1bmN0aW9uIGZpbHRlck91dERlcHJlY2F0ZWRQYXRjaFZlcnNpb25zKGFsbFZlcnNpb25zLCBjdXJyZW50VmVyc2lvbikgewogICAgICAvLyBHZXQgdGhlIG1vc3QgcmVjZW50IHBhdGNoIHZlcnNpb24gZm9yIGVhY2ggS3ViZXJuZXRlcyBtaW5vciB2ZXJzaW9uLgogICAgICB2YXIgbW9zdFJlY2VudFBhdGNoVmVyc2lvbnMgPSB0aGlzLmdldE1vc3RSZWNlbnRQYXRjaFZlcnNpb25zKGFsbFZlcnNpb25zKTsKICAgICAgdmFyIGZpbHRlcmVkVmVyc2lvbnMgPSBhbGxWZXJzaW9ucy5maWx0ZXIoZnVuY3Rpb24gKHZlcnNpb24pIHsKICAgICAgICAvLyBBbHdheXMgc2hvdyBwcmUtcmVsZWFzZXMKICAgICAgICBpZiAoc2VtdmVyLnByZXJlbGVhc2UodmVyc2lvbi52YWx1ZSkpIHsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgICB2YXIgbWFqb3JNaW5vciA9ICIiLmNvbmNhdChzZW12ZXIubWFqb3IodmVyc2lvbi52YWx1ZSksICIuIikuY29uY2F0KHNlbXZlci5taW5vcih2ZXJzaW9uLnZhbHVlKSk7CgogICAgICAgIC8vIEFsd2F5cyBzaG93IGN1cnJlbnQgdmVyc2lvbiwgZWxzZSBzaG93IGlmIHdlIGhhdmVuJ3Qgc2hvd24gYW55dGhpbmcgZm9yIHRoaXMgbWFqb3IubWlub3IgdmVyc2lvbiB5ZXQKICAgICAgICBpZiAodmVyc2lvbi52YWx1ZSA9PT0gY3VycmVudFZlcnNpb24gfHwgbW9zdFJlY2VudFBhdGNoVmVyc2lvbnNbbWFqb3JNaW5vcl0gPT09IHZlcnNpb24udmFsdWUpIHsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0pOwogICAgICByZXR1cm4gZmlsdGVyZWRWZXJzaW9uczsKICAgIH0sCiAgICBnZW5lcmF0ZVlhbWw6IGZ1bmN0aW9uIGdlbmVyYXRlWWFtbCgpIHsKICAgICAgdmFyIHJlc291cmNlID0gdGhpcy52YWx1ZTsKICAgICAgdmFyIGluU3RvcmUgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzWydjdXJyZW50U3RvcmUnXShyZXNvdXJjZSk7CiAgICAgIHZhciBzY2hlbWFzID0gdGhpcy4kc3RvcmUuZ2V0dGVyc1siIi5jb25jYXQoaW5TdG9yZSwgIi9hbGwiKV0oU0NIRU1BKTsKICAgICAgdmFyIGNsb25lZFJlc291cmNlID0gY2xvbmUocmVzb3VyY2UpOwogICAgICB0aGlzLmFwcGx5Q2hhcnRWYWx1ZXMoY2xvbmVkUmVzb3VyY2Uuc3BlYy5ya2VDb25maWcpOwogICAgICB2YXIgb3V0ID0gY3JlYXRlWWFtbChzY2hlbWFzLCByZXNvdXJjZS50eXBlLCBjbG9uZWRSZXNvdXJjZSk7CiAgICAgIHJldHVybiBvdXQ7CiAgICB9LAogICAgYXBwbHlDaGFydFZhbHVlczogZnVuY3Rpb24gYXBwbHlDaGFydFZhbHVlcyhya2VDb25maWcpIHsKICAgICAgdmFyIF90aGlzMjQgPSB0aGlzOwogICAgICBya2VDb25maWcuY2hhcnRWYWx1ZXMgPSB7fTsKICAgICAgdGhpcy5hZGRvbk5hbWVzLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHsKICAgICAgICB2YXIga2V5ID0gX3RoaXMyNC5jaGFydFZlcnNpb25LZXkobmFtZSk7CiAgICAgICAgdmFyIHVzZXJWYWx1ZXMgPSBfdGhpczI0LnVzZXJDaGFydFZhbHVlc1trZXldOwogICAgICAgIGlmICh1c2VyVmFsdWVzKSB7CiAgICAgICAgICBzZXQocmtlQ29uZmlnLmNoYXJ0VmFsdWVzLCBuYW1lLCB1c2VyVmFsdWVzKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGdldDogZ2V0LAogICAgc2V0SGFydmVzdGVyRGVmYXVsdENsb3VkUHJvdmlkZXI6IGZ1bmN0aW9uIHNldEhhcnZlc3RlckRlZmF1bHRDbG91ZFByb3ZpZGVyKCkgewogICAgICBpZiAodGhpcy5pc0hhcnZlc3RlckRyaXZlciAmJiB0aGlzLm1vZGUgPT09IF9DUkVBVEUgJiYgdGhpcy5hZ2VudENvbmZpZyAmJiAhdGhpcy5hZ2VudENvbmZpZ1snY2xvdWQtcHJvdmlkZXItbmFtZSddICYmICF0aGlzLmlzSGFydmVzdGVyRXh0ZXJuYWxDcmVkZW50aWFsICYmICF0aGlzLmlzSGFydmVzdGVySW5jb21wYXRpYmxlKSB7CiAgICAgICAgdGhpcy5hZ2VudENvbmZpZ1snY2xvdWQtcHJvdmlkZXItbmFtZSddID0gSEFSVkVTVEVSOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuYWdlbnRDb25maWdbJ2Nsb3VkLXByb3ZpZGVyLW5hbWUnXSA9ICcnOwogICAgICB9CiAgICB9LAogICAgc2V0SGFydmVzdGVyVmVyc2lvblJhbmdlOiBmdW5jdGlvbiBzZXRIYXJ2ZXN0ZXJWZXJzaW9uUmFuZ2UoKSB7CiAgICAgIHZhciBfdGhpczI1ID0gdGhpczsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTE3KCkgewogICAgICAgIHZhciBfdGhpczI1JGNyZWRlbnRpYWwsIF90aGlzMjUkY3JlZGVudGlhbDI7CiAgICAgICAgdmFyIGNsdXN0ZXJJZCwgY2x1c3RlclR5cGUsIHVybCwgcmVzLCB2ZXJzaW9uOwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTE3JChfY29udGV4dDE3KSB7CiAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDE3LnByZXYgPSBfY29udGV4dDE3Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGNsdXN0ZXJJZCA9IChfdGhpczI1JGNyZWRlbnRpYWwgPSBfdGhpczI1LmNyZWRlbnRpYWwpID09PSBudWxsIHx8IF90aGlzMjUkY3JlZGVudGlhbCA9PT0gdm9pZCAwIHx8IChfdGhpczI1JGNyZWRlbnRpYWwgPSBfdGhpczI1JGNyZWRlbnRpYWwuZGVjb2RlZERhdGEpID09PSBudWxsIHx8IF90aGlzMjUkY3JlZGVudGlhbCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMyNSRjcmVkZW50aWFsLmNsdXN0ZXJJZDsKICAgICAgICAgICAgICBjbHVzdGVyVHlwZSA9IChfdGhpczI1JGNyZWRlbnRpYWwyID0gX3RoaXMyNS5jcmVkZW50aWFsKSA9PT0gbnVsbCB8fCBfdGhpczI1JGNyZWRlbnRpYWwyID09PSB2b2lkIDAgfHwgKF90aGlzMjUkY3JlZGVudGlhbDIgPSBfdGhpczI1JGNyZWRlbnRpYWwyLmRlY29kZWREYXRhKSA9PT0gbnVsbCB8fCBfdGhpczI1JGNyZWRlbnRpYWwyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpczI1JGNyZWRlbnRpYWwyLmNsdXN0ZXJUeXBlOwogICAgICAgICAgICAgIGlmICghKGNsdXN0ZXJJZCAmJiBjbHVzdGVyVHlwZSA9PT0gJ2ltcG9ydGVkJykpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0MTcubmV4dCA9IDk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgdXJsID0gIi9rOHMvY2x1c3RlcnMvIi5jb25jYXQoY2x1c3RlcklkLCAiL3YxIik7CiAgICAgICAgICAgICAgX2NvbnRleHQxNy5uZXh0ID0gNjsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXMyNS4kc3RvcmUuZGlzcGF0Y2goJ2NsdXN0ZXIvcmVxdWVzdCcsIHsKICAgICAgICAgICAgICAgIHVybDogIiIuY29uY2F0KHVybCwgIi8iKS5jb25jYXQoSENJLlNFVFRJTkcsICJzIikKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0MTcuc2VudDsKICAgICAgICAgICAgICB2ZXJzaW9uID0gKChyZXMgPT09IG51bGwgfHwgcmVzID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXMuZGF0YSkgfHwgW10pLmZpbmQoZnVuY3Rpb24gKHMpIHsKICAgICAgICAgICAgICAgIHJldHVybiBzLmlkID09PSAnaGFydmVzdGVyLWNzaS1jY20tdmVyc2lvbnMnOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIGlmICh2ZXJzaW9uKSB7CiAgICAgICAgICAgICAgICBfdGhpczI1LmhhcnZlc3RlclZlcnNpb25SYW5nZSA9IEpTT04ucGFyc2UodmVyc2lvbi52YWx1ZSB8fCB2ZXJzaW9uLmRlZmF1bHQgfHwgJ3t9Jyk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIF90aGlzMjUuaGFydmVzdGVyVmVyc2lvblJhbmdlID0ge307CiAgICAgICAgICAgICAgfQogICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgX3RoaXMyNS5zZXRIYXJ2ZXN0ZXJEZWZhdWx0Q2xvdWRQcm92aWRlcigpOwogICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE3LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMTcpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICB0b2dnbGVDdXN0b21SZWdpc3RyeTogZnVuY3Rpb24gdG9nZ2xlQ3VzdG9tUmVnaXN0cnkobmV1KSB7CiAgICAgIHRoaXMuc2hvd0N1c3RvbVJlZ2lzdHJ5SW5wdXQgPSBuZXU7CiAgICAgIGlmICh0aGlzLnJlZ2lzdHJ5SG9zdCkgewogICAgICAgIHRoaXMucmVnaXN0cnlIb3N0ID0gbnVsbDsKICAgICAgICB0aGlzLnJlZ2lzdHJ5U2VjcmV0ID0gbnVsbDsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmluaXRSZWdpc3RyeSgpOwogICAgICB9CiAgICB9LAogICAgLyoqCiAgICAgKiBSZXNldCBQU0Egb24gc2V2ZXJhbCBpbnB1dCBjaGFuZ2VzIGZvciBnaXZlbiBjb25kaXRpb25zCiAgICAgKi8KICAgIHRvZ2dsZVBzYURlZmF1bHQ6IGZ1bmN0aW9uIHRvZ2dsZVBzYURlZmF1bHQoKSB7CiAgICAgIHZhciBfdGhpcyRhZ2VudENvbmZpZzUsIF90aGlzJHNlcnZlckNvbmZpZzI7CiAgICAgIC8vIFRoaXMgb3B0aW9uIGlzIGNyZWF0ZWQgZnJvbSB0aGUgc2VydmVyIGFuZCBpcyBndWFyYW50ZWVkIHRvIGV4aXN0ICM4MDMyCiAgICAgIHZhciBoYXJkY29kZWRUZW1wbGF0ZSA9ICdyYW5jaGVyLXJlc3RyaWN0ZWQnOwogICAgICB2YXIgY2lzVmFsdWUgPSAoKF90aGlzJGFnZW50Q29uZmlnNSA9IHRoaXMuYWdlbnRDb25maWcpID09PSBudWxsIHx8IF90aGlzJGFnZW50Q29uZmlnNSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkYWdlbnRDb25maWc1LnByb2ZpbGUpIHx8ICgoX3RoaXMkc2VydmVyQ29uZmlnMiA9IHRoaXMuc2VydmVyQ29uZmlnKSA9PT0gbnVsbCB8fCBfdGhpcyRzZXJ2ZXJDb25maWcyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRzZXJ2ZXJDb25maWcyLnByb2ZpbGUpOwogICAgICBpZiAoIXRoaXMuY2lzT3ZlcnJpZGUpIHsKICAgICAgICBpZiAoY2lzVmFsdWUpIHsKICAgICAgICAgIHNldCh0aGlzLnZhbHVlLnNwZWMsICdkZWZhdWx0UG9kU2VjdXJpdHlBZG1pc3Npb25Db25maWd1cmF0aW9uVGVtcGxhdGVOYW1lJywgaGFyZGNvZGVkVGVtcGxhdGUpOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIGhhbmRsZUNpc0NoYW5nZTogZnVuY3Rpb24gaGFuZGxlQ2lzQ2hhbmdlKCkgewogICAgICB0aGlzLnRvZ2dsZVBzYURlZmF1bHQoKTsKICAgICAgdGhpcy51cGRhdGVDaXNQcm9maWxlKCk7CiAgICB9LAogICAgdXBkYXRlQ2lzUHJvZmlsZTogZnVuY3Rpb24gdXBkYXRlQ2lzUHJvZmlsZSgpIHsKICAgICAgdmFyIF90aGlzJGFnZW50Q29uZmlnNjsKICAgICAgLy8gSWYgdGhlIHVzZXIgc2VsZWN0cyBhbnkgV29ya2VyIENJUyBQcm9maWxlLAogICAgICAvLyBwcm90ZWN0LWtlcm5lbC1kZWZhdWx0cyBzaG91bGQgYmUgc2V0IHRvIGZhbHNlCiAgICAgIC8vIGluIHRoZSBSS0UyIHdvcmtlci9hZ2VudCBjb25maWcuCiAgICAgIHZhciBzZWxlY3RlZENpc1Byb2ZpbGUgPSAoX3RoaXMkYWdlbnRDb25maWc2ID0gdGhpcy5hZ2VudENvbmZpZykgPT09IG51bGwgfHwgX3RoaXMkYWdlbnRDb25maWc2ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRhZ2VudENvbmZpZzYucHJvZmlsZTsKICAgICAgaWYgKHNlbGVjdGVkQ2lzUHJvZmlsZSkgewogICAgICAgIHNldCh0aGlzLmFnZW50Q29uZmlnLCAncHJvdGVjdC1rZXJuZWwtZGVmYXVsdHMnLCB0cnVlKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBzZXQodGhpcy5hZ2VudENvbmZpZywgJ3Byb3RlY3Qta2VybmVsLWRlZmF1bHRzJywgZmFsc2UpOwogICAgICB9CiAgICB9LAogICAgdXBkYXRlQWRkaXRpb25hbE1hbmlmZXN0OiBmdW5jdGlvbiB1cGRhdGVBZGRpdGlvbmFsTWFuaWZlc3QobmV1KSB7CiAgICAgIHRoaXMudmFsdWUuc3BlYy5ya2VDb25maWcuYWRkaXRpb25hbE1hbmlmZXN0ID0gbmV1OwogICAgfSwKICAgIC8qKgogICAgICogSGFuZGxlIGs4cyBjaGFuZ2VzIHNpZGUgZWZmZWN0cywgbGlrZSBQU0EgcmVzZXRzCiAgICAgKi8KICAgIGhhbmRsZUt1YmVybmV0ZXNDaGFuZ2U6IGZ1bmN0aW9uIGhhbmRsZUt1YmVybmV0ZXNDaGFuZ2UodmFsdWUsIG9sZCkgewogICAgICBpZiAodmFsdWUpIHsKICAgICAgICB0aGlzLnRvZ2dsZVBzYURlZmF1bHQoKTsKCiAgICAgICAgLy8gSWYgSGFydmVzdGVyIGRyaXZlciwgcmVzZXQgY2xvdWQgcHJvdmlkZXIgaWYgbm90IGNvbXBhdGlibGUKICAgICAgICBpZiAodGhpcy5pc0hhcnZlc3RlckRyaXZlciAmJiB0aGlzLm1vZGUgPT09IF9DUkVBVEUgJiYgdGhpcy5pc0hhcnZlc3RlckluY29tcGF0aWJsZSkgewogICAgICAgICAgdGhpcy5zZXRIYXJ2ZXN0ZXJEZWZhdWx0Q2xvdWRQcm92aWRlcigpOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIGhhbmRsZVNob3dEZXByZWNhdGVkUGF0Y2hWZXJzaW9uc0NoYW5nZWQ6IGZ1bmN0aW9uIGhhbmRsZVNob3dEZXByZWNhdGVkUGF0Y2hWZXJzaW9uc0NoYW5nZWQodmFsdWUpIHsKICAgICAgdGhpcy5zaG93RGVwcmVjYXRlZFBhdGNoVmVyc2lvbnMgPSB2YWx1ZTsKICAgIH0sCiAgICAvKioKICAgICAqIFRyYWNrIE1hY2hpbmUgUG9vbCB2YWxpZGF0aW9uIHN0YXR1cwogICAgICovCiAgICBtYWNoaW5lUG9vbFZhbGlkYXRpb25DaGFuZ2VkOiBmdW5jdGlvbiBtYWNoaW5lUG9vbFZhbGlkYXRpb25DaGFuZ2VkKGlkLCB2YWx1ZSkgewogICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkgewogICAgICAgIHRoaXMuJGRlbGV0ZSh0aGlzLm1hY2hpbmVQb29sVmFsaWRhdGlvbiwgaWQpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJHNldCh0aGlzLm1hY2hpbmVQb29sVmFsaWRhdGlvbiwgaWQsIHZhbHVlKTsKICAgICAgfQogICAgfSwKICAgIGhhbmRsZUVuYWJsZWRTeXN0ZW1TZXJ2aWNlc0NoYW5nZWQ6IGZ1bmN0aW9uIGhhbmRsZUVuYWJsZWRTeXN0ZW1TZXJ2aWNlc0NoYW5nZWQodmFsKSB7CiAgICAgIHNldCh0aGlzLnNlcnZlckNvbmZpZywgJ2Rpc2FibGUnLCB2YWwpOwogICAgfSwKICAgIGhhbmRsZUNpbGl1bVZhbHVlc0NoYW5nZWQ6IGZ1bmN0aW9uIGhhbmRsZUNpbGl1bVZhbHVlc0NoYW5nZWQobmV1KSB7CiAgICAgIGlmIChuZXUgPT09IHVuZGVmaW5lZCkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB2YXIgbmFtZSA9IHRoaXMuY2hhcnRWZXJzaW9uS2V5KCdya2UyLWNpbGl1bScpOwogICAgICBzZXQodGhpcywgJ3VzZXJDaGFydFZhbHVlcycsIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgdGhpcy51c2VyQ2hhcnRWYWx1ZXMpLCB7fSwgX2RlZmluZVByb3BlcnR5KHt9LCBuYW1lLCBfb2JqZWN0U3ByZWFkKHt9LCBuZXUpKSkpOwogICAgfSwKICAgIGhhbmRsZUNpc0NoYW5nZWQ6IGZ1bmN0aW9uIGhhbmRsZUNpc0NoYW5nZWQoKSB7CiAgICAgIHRoaXMuaGFuZGxlQ2lzQ2hhbmdlKCk7CiAgICB9LAogICAgaGFuZGxlUHNhRGVmYXVsdENoYW5nZWQ6IGZ1bmN0aW9uIGhhbmRsZVBzYURlZmF1bHRDaGFuZ2VkKCkgewogICAgICB0aGlzLnRvZ2dsZVBzYURlZmF1bHQoKTsKICAgIH0sCiAgICBoYW5kbGVNYWNoaW5lUG9vbEVycm9yOiBmdW5jdGlvbiBoYW5kbGVNYWNoaW5lUG9vbEVycm9yKGVycm9yKSB7CiAgICAgIHZhciBfdGhpczI2ID0gdGhpczsKICAgICAgdGhpcy5tYWNoaW5lUG9vbEVycm9ycyA9IG1lcmdlKHRoaXMubWFjaGluZVBvb2xFcnJvcnMsIGVycm9yKTsKICAgICAgdmFyIGVycm9ycyA9IE9iamVjdC5lbnRyaWVzKHRoaXMubWFjaGluZVBvb2xFcnJvcnMpLm1hcChmdW5jdGlvbiAoeCkgewogICAgICAgIGlmICgheFsxXS5sZW5ndGgpIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgdmFyIGZvcm1hdHRlZEZpZWxkcyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHN3aXRjaCAoeFsxXS5sZW5ndGgpIHsKICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgIHJldHVybiB4WzFdWzBdOwogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgcmV0dXJuICIiLmNvbmNhdCh4WzFdWzBdLCAiIGFuZCAiKS5jb25jYXQoeFsxXVsxXSk7CiAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdmFyIF94JCA9IF90b0FycmF5KHhbMV0pLAogICAgICAgICAgICAgICAgICBoZWFkID0gX3gkWzBdLAogICAgICAgICAgICAgICAgICByZXN0ID0gX3gkLnNsaWNlKDEpOwogICAgICAgICAgICAgICAgcmV0dXJuICIiLmNvbmNhdChyZXN0LmpvaW4oJywgJyksICIsIGFuZCAiKS5jb25jYXQoaGVhZCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0oKTsKICAgICAgICByZXR1cm4gX3RoaXMyNi50KCdjbHVzdGVyLmJhbm5lci5tYWNoaW5lUG9vbEVycm9yJywgewogICAgICAgICAgY291bnQ6IHhbMV0ubGVuZ3RoLAogICAgICAgICAgcG9vbF9uYW1lOiB4WzBdLAogICAgICAgICAgZmllbGRzOiBmb3JtYXR0ZWRGaWVsZHMKICAgICAgICB9LCB0cnVlKTsKICAgICAgfSkuZmlsdGVyKGZ1bmN0aW9uICh4KSB7CiAgICAgICAgcmV0dXJuIHg7CiAgICAgIH0pOwogICAgICBpZiAoIWVycm9ycykgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB0aGlzLmVycm9ycyA9IGVycm9yczsKICAgIH0sCiAgICBoYW5kbGVTM0JhY2t1cENoYW5nZWQ6IGZ1bmN0aW9uIGhhbmRsZVMzQmFja3VwQ2hhbmdlZChuZXUpIHsKICAgICAgdGhpcy5zM0JhY2t1cCA9IG5ldTsKICAgICAgaWYgKG5ldSkgewogICAgICAgIHZhciBfdGhpcyRya2VDb25maWckZXRjZDsKICAgICAgICAvLyBXZSBuZWVkIHRvIG1ha2Ugc3VyZSB0aGF0IHMzIGRvZXNuJ3QgYWxyZWFkeSBoYXZlIGFuIGV4aXN0aW5nIHZhbHVlIG90aGVyd2lzZSB3aGVuIGVkaXRpbmcgYSBjbHVzdGVyIHdpdGggczMgZGVmaW5lZCB0aGlzIHdpbGwgY2xlYXIgczMuCiAgICAgICAgaWYgKGlzRW1wdHkoKF90aGlzJHJrZUNvbmZpZyRldGNkID0gdGhpcy5ya2VDb25maWcuZXRjZCkgPT09IG51bGwgfHwgX3RoaXMkcmtlQ29uZmlnJGV0Y2QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJHJrZUNvbmZpZyRldGNkLnMzKSkgewogICAgICAgICAgc2V0KHRoaXMucmtlQ29uZmlnLmV0Y2QsICdzMycsIHt9KTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgc2V0KHRoaXMucmtlQ29uZmlnLmV0Y2QsICdzMycsIG51bGwpOwogICAgICB9CiAgICB9LAogICAgaGFuZGxlQ29uZmlnRXRjZEV4cG9zZU1ldHJpY3NDaGFuZ2VkOiBmdW5jdGlvbiBoYW5kbGVDb25maWdFdGNkRXhwb3NlTWV0cmljc0NoYW5nZWQobmV1KSB7CiAgICAgIHNldCh0aGlzLnNlcnZlckNvbmZpZywgJ2V0Y2QtZXhwb3NlLW1ldHJpY3MnLCBuZXUpOwogICAgfSwKICAgIGhhbmRsZVJlZ2lzdHJ5SG9zdENoYW5nZWQ6IGZ1bmN0aW9uIGhhbmRsZVJlZ2lzdHJ5SG9zdENoYW5nZWQobmV1KSB7CiAgICAgIHRoaXMucmVnaXN0cnlIb3N0ID0gbmV1OwogICAgfSwKICAgIGhhbmRsZVJlZ2lzdHJ5U2VjcmV0Q2hhbmdlZDogZnVuY3Rpb24gaGFuZGxlUmVnaXN0cnlTZWNyZXRDaGFuZ2VkKG5ldSkgewogICAgICB0aGlzLnJlZ2lzdHJ5U2VjcmV0ID0gbmV1OwogICAgfSwKICAgIHZhbGlkYXRlQ2x1c3Rlck5hbWU6IGZ1bmN0aW9uIHZhbGlkYXRlQ2x1c3Rlck5hbWUoKSB7CiAgICAgIHZhciBfdGhpcyRhZ2VudENvbmZpZzc7CiAgICAgIGlmICghdGhpcy52YWx1ZS5tZXRhZGF0YS5uYW1lICYmICgoX3RoaXMkYWdlbnRDb25maWc3ID0gdGhpcy5hZ2VudENvbmZpZykgPT09IG51bGwgfHwgX3RoaXMkYWdlbnRDb25maWc3ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRhZ2VudENvbmZpZzdbJ2Nsb3VkLXByb3ZpZGVyLW5hbWUnXSkgPT09IEhBUlZFU1RFUikgewogICAgICAgIHRoaXMuZXJyb3JzLnB1c2godGhpcy50KCd2YWxpZGF0aW9uLnJlcXVpcmVkJywgewogICAgICAgICAga2V5OiB0aGlzLnQoJ2NsdXN0ZXIubmFtZS5sYWJlbCcpCiAgICAgICAgfSwgdHJ1ZSkpOwogICAgICB9CiAgICB9LAogICAgdmFsaWRhdGVNYWNoaW5lUG9vbDogZnVuY3Rpb24gdmFsaWRhdGVNYWNoaW5lUG9vbCgpIHsKICAgICAgdmFyIF90aGlzMjcgPSB0aGlzOwogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTgoKSB7CiAgICAgICAgdmFyIG1pc3NpbmdQcm9maWxlTmFtZSwgX2l0ZXJhdG9yMTEsIF9zdGVwMTEsIF90aGlzMjckJHJlZnMkcG9vbCRpbiwgX3N0ZXAxMSR2YWx1ZSwgaW5kZXgsIHJlcywgX3RoaXMyNyRlcnJvcnM7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTgkKF9jb250ZXh0MTgpIHsKICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0MTgucHJldiA9IF9jb250ZXh0MTgubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgaWYgKF90aGlzMjcuZXJyb3JzKSB7CiAgICAgICAgICAgICAgICBjbGVhcihfdGhpczI3LmVycm9ycyk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmIChfdGhpczI3LnZhbHVlLmNsb3VkUHJvdmlkZXIgPT09ICdhd3MnKSB7CiAgICAgICAgICAgICAgICBtaXNzaW5nUHJvZmlsZU5hbWUgPSBfdGhpczI3Lm1hY2hpbmVQb29scy5zb21lKGZ1bmN0aW9uIChtcCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gIW1wLmNvbmZpZy5pYW1JbnN0YW5jZVByb2ZpbGU7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGlmIChtaXNzaW5nUHJvZmlsZU5hbWUpIHsKICAgICAgICAgICAgICAgICAgX3RoaXMyNy5lcnJvcnMucHVzaChfdGhpczI3LnQoJ2NsdXN0ZXIudmFsaWRhdGlvbi5pYW1JbnN0YW5jZVByb2ZpbGVOYW1lJywge30sIHRydWUpKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgX2l0ZXJhdG9yMTEgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihfdGhpczI3Lm1hY2hpbmVQb29scy5lbnRyaWVzKCkpOwogICAgICAgICAgICAgIF9jb250ZXh0MTgucHJldiA9IDM7CiAgICAgICAgICAgICAgX2l0ZXJhdG9yMTEucygpOwogICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgaWYgKChfc3RlcDExID0gX2l0ZXJhdG9yMTEubigpKS5kb25lKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDE4Lm5leHQgPSAyMDsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBfc3RlcDExJHZhbHVlID0gX3NsaWNlZFRvQXJyYXkoX3N0ZXAxMS52YWx1ZSwgMSksIGluZGV4ID0gX3N0ZXAxMSR2YWx1ZVswXTsKICAgICAgICAgICAgICBpZiAoISh0eXBlb2YgKChfdGhpczI3JCRyZWZzJHBvb2wkaW4gPSBfdGhpczI3LiRyZWZzLnBvb2xbaW5kZXhdKSA9PT0gbnVsbCB8fCBfdGhpczI3JCRyZWZzJHBvb2wkaW4gPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzMjckJHJlZnMkcG9vbCRpbi50ZXN0KSA9PT0gJ2Z1bmN0aW9uJykpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0MTgubmV4dCA9IDE4OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIF9jb250ZXh0MTgucHJldiA9IDg7CiAgICAgICAgICAgICAgX2NvbnRleHQxOC5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMjcuJHJlZnMucG9vbFtpbmRleF0udGVzdCgpOwogICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0MTguc2VudDsKICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShyZXMpICYmIHJlcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAoX3RoaXMyNyRlcnJvcnMgPSBfdGhpczI3LmVycm9ycykucHVzaC5hcHBseShfdGhpczI3JGVycm9ycywgX3RvQ29uc3VtYWJsZUFycmF5KHJlcykpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBfY29udGV4dDE4Lm5leHQgPSAxODsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgICBfY29udGV4dDE4LnByZXYgPSAxNTsKICAgICAgICAgICAgICBfY29udGV4dDE4LnQwID0gX2NvbnRleHQxOFsiY2F0Y2giXSg4KTsKICAgICAgICAgICAgICBfdGhpczI3LmVycm9ycy5wdXNoKF9jb250ZXh0MTgudDApOwogICAgICAgICAgICBjYXNlIDE4OgogICAgICAgICAgICAgIF9jb250ZXh0MTgubmV4dCA9IDU7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMjA6CiAgICAgICAgICAgICAgX2NvbnRleHQxOC5uZXh0ID0gMjU7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMjI6CiAgICAgICAgICAgICAgX2NvbnRleHQxOC5wcmV2ID0gMjI7CiAgICAgICAgICAgICAgX2NvbnRleHQxOC50MSA9IF9jb250ZXh0MThbImNhdGNoIl0oMyk7CiAgICAgICAgICAgICAgX2l0ZXJhdG9yMTEuZShfY29udGV4dDE4LnQxKTsKICAgICAgICAgICAgY2FzZSAyNToKICAgICAgICAgICAgICBfY29udGV4dDE4LnByZXYgPSAyNTsKICAgICAgICAgICAgICBfaXRlcmF0b3IxMS5mKCk7CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTguZmluaXNoKDI1KTsKICAgICAgICAgICAgY2FzZSAyODoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxOC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTE4LCBudWxsLCBbWzMsIDIyLCAyNSwgMjhdLCBbOCwgMTVdXSk7CiAgICAgIH0pKSgpOwogICAgfQogIH0KfTs="},{"version":3,"names":["difference","throttle","isArray","merge","CreateEditView","FormValidation","normalizeName","CAPI","MANAGEMENT","NAMESPACE","NORMAN","SCHEMA","DEFAULT_WORKSPACE","SECRET","HCI","_CREATE","_EDIT","_VIEW","findBy","removeObject","clear","createYaml","clone","diff","set","get","isEmpty","allHash","sortBy","vspherePoolConfigMerge","compare","sortable","isHarvesterSatisfiesVersion","BadgeState","Banner","CruResource","CONTEXT_HOOK_EDIT_YAML","Loading","NameNsDescription","Tab","Tabbed","canViewClusterMembershipEditor","semver","SETTING","base64Encode","CAPI_ANNOTATIONS","CLUSTER_BADGE","AgentEnv","Labels","MachinePool","SelectCredential","ELEMENTAL_SCHEMA_IDS","KIND","ELEMENTAL_CLUSTER_PROVIDER","AgentConfiguration","getApplicableExtensionEnhancements","ExtensionPoint","TabLocation","MemberRoles","Basics","Etcd","Networking","Upgrade","Registries","AddOnConfig","Advanced","ClusterAppearance","HARVESTER","HARVESTER_CLOUD_PROVIDER","NETBIOS_TRUNCATION_LENGTH","VMWARE_VSPHERE","NODE_TOTAL","error","color","icon","warning","success","CLUSTER_AGENT_CUSTOMIZATION","FLEET_AGENT_CUSTOMIZATION","components","mixins","props","mode","type","String","required","value","Object","provider","providerConfig","default","fetch","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","fetchRke2Versions","initSpecs","initAddons","initRegistry","entries","chartValues","forEach","_ref","_ref2","_slicedToArray","name","key","chartVersionKey","userChartValues","setAgentConfiguration","stop","data","_this$value$spec$rkeC","spec","rkeConfig","upgradeStrategy","controlPlaneConcurrency","controlPlaneDrainOptions","workerConcurrency","workerDrainOptions","dataDirectories","systemAgent","provisioning","k8sDistro","machineGlobalConfig","machineSelectorConfig","length","config","truncateLimit","defaultHostnameLengthLimit","loadedOnce","lastIdx","allPSAs","credentialId","credential","machinePools","rke2Versions","k3sVersions","defaultRke2","defaultK3s","s3Backup","versionInfo","membershipUpdate","showDeprecatedPatchVersions","systemRegistry","registryHost","showCustomRegistryInput","showCustomRegistryAdvancedInput","registrySecret","userChartValuesTemp","addonsRev","fvFormRuleSets","path","rules","translationKey","harvesterVersionRange","cisOverride","busy","machinePoolValidation","machinePoolErrors","allNamespaces","extensionTabs","TAB","CLUSTER_CREATE_RKE2","$route","computed","clusterName","_this$value$metadata","metadata","showClusterAppearance","clusterBadgeAbbreviation","$store","getters","isElementalCluster","_this$value","machineProvider","toLowerCase","MACHINE_INV_SELECTOR_TEMPLATES","serverConfig","agentConfig","unsupportedSelectorConfig","_this$value$spec","global","kubeletOnly","other","_iterator","_createForOfIteratorHelper","_step","s","n","done","conf","machineLabelSelector","keys","err","e","f","console","log","concat","versionOptions","_this$liveValue","cur","liveValue","kubernetesVersion","existingRke2","includes","existingK3s","allValidRke2Versions","getAllOptionsAfterCurrentVersion","allValidK3sVersions","filterOutDeprecatedPatchVersions","showRke2","showK3s","out","push","kind","label","t","apply","_toConsumableArray","existing","find","x","disabled","selectedVersion","_out$serverArgs","_out$serverArgs2","str","serverArgs","cni","options","haveArgInfo","_this$selectedVersion","_this$selectedVersion2","Boolean","agentArgs","_this$selectedVersion3","_this$selectedVersion4","chartVersions","_this$selectedVersion5","charts","needCredential","_this$providerConfig","_this$providerConfig2","builtin","addCloudCredential","customCredentialComponentRequired","$plugin","getDynamic","hasMachinePools","unremovedMachinePools","filter","remove","extensionProvider","extClass","dispatch","axios","$axios","app","$t","isCreate","undefined","needsNamespace","namespaced","machineConfigSchema","_this$extensionProvid","schema","MACHINE_CONFIG_GROUP","extensionSchema","_typeof","nodeTotals","roles","counts","tooltip","_i","_roles","role","_iterator2","_step2","row","qty","parseInt","pool","quantity","isNaN","_iterator3","_step3","_i2","_roles2","count","etcd","controlPlane","worker","showCni","showCloudProvider","addonNames","names","split","map","Array","_this$agentConfig","_this$agentConfig2","addonVersions","_this2","versions","_this2$versionInfo$na","chart","cloudProviderOptions","_this$agentArgs$cloud","_this$agentConfig3","_this$agentArgs$cloud2","preferred","_iterator4","_step4","opt","showAllOptions","isPreferred","isExternal","isHarvesterExternalCredential","isHarvesterIncompatible","unshift","canManageMembers","isHarvesterDriver","query","defaultVersion","_all$","_all$find","_this3","all","first","rke2","satisfiesVersion","v","_satisfiesVersion$","appsOSWarning","_this$value2","_ref3","mgmt","status","linuxWorkerCount","windowsWorkerCount","_pool$config","os","newOS","existingOS","_pool$config2","showForm","_this$credential","harvestercredentialConfig","clusterType","_this$harvesterVersio","_this$harvesterVersio2","ccmRke2Version","csiRke2Version","ccmVersion","csiVersion","endsWith","slice","satisfies","validationPassed","validRequiredPools","hasRequiredNodes","base","values","currentCluster","_objectSpread","watch","immediate","handler","neu","badge","obj","_defineProperty","ICON_TEXT","iconText","COLOR","TEXT","text","annotations","val","CLOUD_CREDENTIAL","setHarvesterVersionRange","cloudCredentialSecretName","old","_this4","$nextTick","_this5","initServerAgentArgs","def","created","_this$extensionProvid2","registerBeforeHook","saveMachinePools","setRegistryConfig","registerAfterHook","cleanupMachinePools","saveRoleBindings","registerSaveHooks","methods","_this6","_callee2","_this6$rkeConfig$etcd","disableSnapshots","_callee2$","_context2","s3","bucket","snapshotRetention","snapshotScheduleCron","sent","initMachinePools","addMachinePool","defaultPodSecurityAdmissionConfigurationTemplateName","_this7","_callee3","hash","globalSettings","defaultRke2Setting","defaultK3sSetting","res","_rke2Channels$find","rke2Channels","_k3sChannels$find","k3sChannels","_callee3$","_context3","url","PSA","t0","setting","id","latest","Error","cleanAgentConfiguration","model","_this8","k","agentConfigurationCleanup","truncateHostname","removeDefaultHostnameLengthLimit","_this9","_callee4","_iterator5","_step5","configMissing","_callee4$","_context4","machineConfigRef","namespace","t1","t2","t3","resource","t4","t5","t6","t7","create","update","call","t8","finish","idx","_this10","_callee5","_this10$extensionProv","_this10$machineConfig","numCurrentPools","_callee5$","_context5","abrupt","createMachinePoolMachineConfig","applyDefaults","uid","etcdRole","controlPlaneRole","workerRole","hostnamePrefix","labels","unhealthyNodeTimeout","attributes","drainBeforeDelete","machineOS","apiVersion","group","version","_this10$$refs$pools","$refs","pools","select","removeMachinePool","entry","syncMachineConfigWithLatest","machinePool","_this11","_callee6","_machinePool$config","_latestConfig","latestConfig","clonedCurrentConfig","clonedLatestConfig","_callee6$","_context6","hookContext","_this12","_callee8","_this12$extensionProv","finalPools","_iterator6","_step6","prefix","_entry$config$metadat","_callee8$","_context8","Promise","resolve","reject","component","componentProps","title","body","applyMode","confirm","_confirm","_callee7","confirmed","_callee7$","_context7","validateMachinePool","errors","_x","arguments","saveMachinePoolConfigs","substr","generateName","save","_this13","_callee9","_iterator7","_step7","_callee9$","_context9","_this14","_callee10","_callee10$","_context10","waitForMgmt","_this$nodeTotals","every","cancelCredential","cruresource","emitOrRoute","routeName","$router","params","cluster","product","RANCHER_CLUSTER","showAddonConfirmation","_this15","resources","saveOverride","btnCb","_this16","_callee11","_this16$extensionProv","_this16$extensionProv2","okay","_callee11$","_context11","$set","provision","_doSaveOverride","_this17","_callee12","_this17$liveValue","_this17$value","_this17$value$spec","_this17$errors","isEditVersion","shouldContinue","_this17$liveValue2","_this17$value2","_this17$agentConfig","clusterId","isUpgrade","_this17$machinePools","_harvesterKubeconfigS","_this17$value3","_this17$value4","kubeconfig","harvesterKubeconfigSecret","distroRoot","clusterAgentDeploymentCustomization","fleetAgentDeploymentCustomization","_callee12$","_context12","isEdit","validateClusterName","applyChartValues","vmNamespace","method","csiClusterRoleName","clusterRoleName","serviceAccountName","createKubeconfigSecret","profile","JSON","parse","stringify","actuallySave","_this18","_callee13","_this18$extensionProv","_this18$extensionProv2","_callee13$","_context13","saveCluster","linkFor","assign","_arguments","_this19","_callee14","secret","_callee14$","_context14","SECRET_AUTH","SECRET_WILL_DELETE","cancel","_this20","_callee15","_iterator8","_step8","chartName","_callee15$","_context15","repoType","repoName","repo","versionName","showAddons","_this21","_this21$versionInfo$n","questions","initYamlEditor","refreshComponentWithYamls","refreshYamls","refs","startsWith","_iterator9","_step9","list","_iterator10","_step10","refresh","updateValues","syncChartValues","_this$versionInfo$nam","fromChart","fromUser","different","leading","defaultChartValue","_this$serverConfig","_this$agentConfig4","addonVersion","av","onMembershipUpdate","_this22","_callee16","_this22$agentConfig","clusterRegistry","regs","hasMirrorsOrAuthConfig","_callee16$","_context16","SYSTEM_DEFAULT_REGISTRY","registries","configs","mirrors","authConfigSecretName","hostname","trim","basicAuthConfig","caBundle","insecureSkipVerify","tlsSecretName","existingConfigs","existingMirrorAndAuthConfig","updateConfigs","_this$value$spec2","currentVersion","_this23","experimental","isCurrentVersion","sort","sorted","mostRecentPatchVersions","getMostRecentPatchVersions","sortedWithDeprecatedLabel","optionData","majorMinor","major","minor","sortedVersions","versionMap","allVersions","filteredVersions","prerelease","generateYaml","inStore","schemas","clonedResource","_this24","userValues","setHarvesterDefaultCloudProvider","_this25","_callee17","_this25$credential","_this25$credential2","_callee17$","_context17","decodedData","toggleCustomRegistry","togglePsaDefault","_this$agentConfig5","_this$serverConfig2","hardcodedTemplate","cisValue","handleCisChange","updateCisProfile","_this$agentConfig6","selectedCisProfile","updateAdditionalManifest","additionalManifest","handleKubernetesChange","handleShowDeprecatedPatchVersionsChanged","machinePoolValidationChanged","$delete","handleEnabledSystemServicesChanged","handleCiliumValuesChanged","handleCisChanged","handlePsaDefaultChanged","handleMachinePoolError","_this26","formattedFields","_x$","_toArray","head","rest","join","pool_name","fields","handleS3BackupChanged","_this$rkeConfig$etcd","handleConfigEtcdExposeMetricsChanged","handleRegistryHostChanged","handleRegistrySecretChanged","_this$agentConfig7","_this27","_callee18","missingProfileName","_iterator11","_step11","_this27$$refs$pool$in","_step11$value","index","_this27$errors","_callee18$","_context18","cloudProvider","some","mp","iamInstanceProfile","test"],"sources":["node_modules/@rancher/shell/edit/provisioning.cattle.io.cluster/rke2.vue"],"sourcesContent":["<script>\nimport difference from 'lodash/difference';\nimport throttle from 'lodash/throttle';\nimport isArray from 'lodash/isArray';\nimport merge from 'lodash/merge';\nimport CreateEditView from '@shell/mixins/create-edit-view';\nimport FormValidation from '@shell/mixins/form-validation';\nimport { normalizeName } from '@shell/utils/kube';\n\nimport {\n  CAPI,\n  MANAGEMENT,\n  NAMESPACE,\n  NORMAN,\n  SCHEMA,\n  DEFAULT_WORKSPACE,\n  SECRET,\n  HCI,\n} from '@shell/config/types';\nimport { _CREATE, _EDIT, _VIEW } from '@shell/config/query-params';\n\nimport { findBy, removeObject, clear } from '@shell/utils/array';\nimport { createYaml } from '@shell/utils/create-yaml';\nimport {\n  clone, diff, set, get, isEmpty\n} from '@shell/utils/object';\nimport { allHash } from '@shell/utils/promise';\nimport { sortBy } from '@shell/utils/sort';\nimport { vspherePoolConfigMerge } from '@shell/machine-config/vmwarevsphere-pool-config-merge';\n\nimport { compare, sortable } from '@shell/utils/version';\nimport { isHarvesterSatisfiesVersion } from '@shell/utils/cluster';\n\nimport { BadgeState } from '@components/BadgeState';\nimport { Banner } from '@components/Banner';\nimport CruResource, { CONTEXT_HOOK_EDIT_YAML } from '@shell/components/CruResource';\nimport Loading from '@shell/components/Loading';\nimport NameNsDescription from '@shell/components/form/NameNsDescription';\nimport Tab from '@shell/components/Tabbed/Tab';\nimport Tabbed from '@shell/components/Tabbed';\n\nimport { canViewClusterMembershipEditor } from '@shell/components/form/Members/ClusterMembershipEditor';\nimport semver from 'semver';\n\nimport { SETTING } from '@shell/config/settings';\nimport { base64Encode } from '@shell/utils/crypto';\nimport { CAPI as CAPI_ANNOTATIONS, CLUSTER_BADGE } from '@shell/config/labels-annotations';\nimport AgentEnv from '@shell/edit/provisioning.cattle.io.cluster/AgentEnv';\nimport Labels from '@shell/edit/provisioning.cattle.io.cluster/Labels';\nimport MachinePool from '@shell/edit/provisioning.cattle.io.cluster/tabs/MachinePool';\nimport SelectCredential from './SelectCredential';\nimport { ELEMENTAL_SCHEMA_IDS, KIND, ELEMENTAL_CLUSTER_PROVIDER } from '../../config/elemental-types';\nimport AgentConfiguration from '@shell/edit/provisioning.cattle.io.cluster/tabs/AgentConfiguration';\nimport { getApplicableExtensionEnhancements } from '@shell/core/plugin-helpers';\nimport { ExtensionPoint, TabLocation } from '@shell/core/types';\nimport MemberRoles from '@shell/edit/provisioning.cattle.io.cluster/tabs/MemberRoles';\nimport Basics from '@shell/edit/provisioning.cattle.io.cluster/tabs/Basics';\nimport Etcd from '@shell/edit/provisioning.cattle.io.cluster/tabs/etcd';\nimport Networking from '@shell/edit/provisioning.cattle.io.cluster/tabs/networking';\nimport Upgrade from '@shell/edit/provisioning.cattle.io.cluster/tabs/upgrade';\nimport Registries from '@shell/edit/provisioning.cattle.io.cluster/tabs/registries';\nimport AddOnConfig from '@shell/edit/provisioning.cattle.io.cluster/tabs/AddOnConfig';\nimport Advanced from '@shell/edit/provisioning.cattle.io.cluster/tabs/Advanced';\nimport ClusterAppearance from '@shell/components/form/ClusterAppearance';\n\nconst HARVESTER = 'harvester';\nconst HARVESTER_CLOUD_PROVIDER = 'harvester-cloud-provider';\nconst NETBIOS_TRUNCATION_LENGTH = 15;\n\nconst VMWARE_VSPHERE = 'vmwarevsphere';\n\n/**\n * Classes to be adopted by the node badges in Machine pools\n */\nconst NODE_TOTAL = {\n  error: {\n    color: 'bg-error',\n    icon:  'icon-x',\n  },\n  warning: {\n    color: 'bg-warning',\n    icon:  'icon-warning',\n  },\n  success: {\n    color: 'bg-success',\n    icon:  'icon-checkmark'\n  }\n};\nconst CLUSTER_AGENT_CUSTOMIZATION = 'clusterAgentDeploymentCustomization';\nconst FLEET_AGENT_CUSTOMIZATION = 'fleetAgentDeploymentCustomization';\n\nexport default {\n  components: {\n    AgentEnv,\n    BadgeState,\n    Banner,\n    AgentConfiguration,\n    CruResource,\n    Labels,\n    Loading,\n    MachinePool,\n    NameNsDescription,\n    SelectCredential,\n    Tab,\n    Tabbed,\n    MemberRoles,\n    Basics,\n    Etcd,\n    Networking,\n    Upgrade,\n    Registries,\n    AddOnConfig,\n    Advanced,\n    ClusterAppearance\n  },\n\n  mixins: [CreateEditView, FormValidation],\n\n  props: {\n    mode: {\n      type:     String,\n      required: true,\n    },\n\n    value: {\n      type:     Object,\n      required: true,\n    },\n\n    provider: {\n      type:     String,\n      required: true,\n    },\n\n    providerConfig: {\n      type:    Object,\n      default: () => null\n    }\n  },\n\n  async fetch() {\n    await this.fetchRke2Versions();\n    await this.initSpecs();\n    await this.initAddons();\n    await this.initRegistry();\n\n    Object.entries(this.chartValues).forEach(([name, value]) => {\n      const key = this.chartVersionKey(name);\n\n      this.userChartValues[key] = value;\n    });\n\n    this.setAgentConfiguration();\n  },\n\n  data() {\n    if (!this.value.spec.rkeConfig) {\n      set(this.value.spec, 'rkeConfig', {});\n    }\n\n    if (!this.value.spec.rkeConfig.chartValues) {\n      set(this.value.spec.rkeConfig, 'chartValues', {});\n    }\n\n    if (!this.value.spec.rkeConfig.upgradeStrategy) {\n      set(this.value.spec.rkeConfig, 'upgradeStrategy', {\n        controlPlaneConcurrency:  '1',\n        controlPlaneDrainOptions: {},\n        workerConcurrency:        '1',\n        workerDrainOptions:       {},\n      });\n    }\n\n    if (!this.value.spec.rkeConfig.dataDirectories) {\n      set(this.value.spec.rkeConfig, 'dataDirectories', {\n        systemAgent:  '',\n        provisioning: '',\n        k8sDistro:    '',\n      });\n    }\n\n    if (!this.value.spec.rkeConfig.machineGlobalConfig) {\n      set(this.value.spec, 'rkeConfig.machineGlobalConfig', {});\n    }\n\n    if (!this.value.spec.rkeConfig.machineSelectorConfig?.length) {\n      set(this.value.spec, 'rkeConfig.machineSelectorConfig', [{ config: {} }]);\n    }\n\n    const truncateLimit = this.value.defaultHostnameLengthLimit || 0;\n\n    return {\n      loadedOnce:                      false,\n      lastIdx:                         0,\n      allPSAs:                         [],\n      credentialId:                    '',\n      credential:                      null,\n      machinePools:                    null,\n      rke2Versions:                    null,\n      k3sVersions:                     null,\n      defaultRke2:                     '',\n      defaultK3s:                      '',\n      s3Backup:                        false,\n      /**\n       * All info related to a specific version of the chart\n       *\n       * This includes chart itself, README and values\n       *\n       * { [chartName:string]: { chart: json, readme: string, values: json } }\n       */\n      versionInfo:                     {},\n      membershipUpdate:                {},\n      showDeprecatedPatchVersions:     false,\n      systemRegistry:                  null,\n      registryHost:                    null,\n      showCustomRegistryInput:         false,\n      showCustomRegistryAdvancedInput: false,\n      registrySecret:                  null,\n      userChartValues:                 {},\n      userChartValuesTemp:             {},\n      addonsRev:                       0,\n      fvFormRuleSets:                  [{\n        path: 'metadata.name', rules: ['subDomain'], translationKey: 'nameNsDescription.name.label'\n      }],\n      harvesterVersionRange: {},\n      cisOverride:           false,\n      truncateLimit,\n      busy:                  false,\n      machinePoolValidation: {}, // map of validation states for each machine pool\n      machinePoolErrors:     {},\n      allNamespaces:         [],\n      extensionTabs:         getApplicableExtensionEnhancements(this, ExtensionPoint.TAB, TabLocation.CLUSTER_CREATE_RKE2, this.$route, this),\n    };\n  },\n\n  computed: {\n    clusterName() {\n      return this.value.metadata?.name || '';\n    },\n    showClusterAppearance() {\n      return this.mode === _CREATE;\n    },\n    clusterBadgeAbbreviation() {\n      return this.$store.getters['customisation/getPreviewCluster'];\n    },\n    rkeConfig() {\n      return this.value.spec.rkeConfig;\n    },\n\n    isElementalCluster() {\n      return this.provider === ELEMENTAL_CLUSTER_PROVIDER || this.value?.machineProvider?.toLowerCase() === KIND.MACHINE_INV_SELECTOR_TEMPLATES.toLowerCase();\n    },\n\n    chartValues() {\n      return this.value.spec.rkeConfig.chartValues;\n    },\n\n    serverConfig() {\n      return this.value.spec.rkeConfig.machineGlobalConfig;\n    },\n\n    agentConfig() {\n      return this.value.agentConfig;\n    },\n\n    unsupportedSelectorConfig() {\n      let global = 0;\n      let kubeletOnly = 0;\n      let other = 0;\n\n      // The form supports one config that has no selector for all the main parts\n      // And one or more configs that have a selector and exactly only kubelet-args.\n      // If there are any other properties set, or multiple configs with no selector\n      // show a warning that you're editing only part of the config in the UI.\n\n      for (const conf of this.value.spec?.rkeConfig?.machineSelectorConfig) {\n        if (conf.machineLabelSelector) {\n          const keys = Object.keys(conf.config || {});\n\n          if (keys.length === 0 || (keys.length === 1 && keys[0] === 'kubelet-arg')) {\n            kubeletOnly++;\n          } else {\n            other++;\n          }\n        } else {\n          global++;\n        }\n      }\n\n      // eslint-disable-next-line no-console\n      console.log(`Global: ${ global }, Kubelet Only: ${ kubeletOnly }, Other: ${ other }`);\n\n      return (global > 1 || other > 0);\n    },\n\n    versionOptions() {\n      const cur = this.liveValue?.spec?.kubernetesVersion || '';\n      const existingRke2 = this.mode === _EDIT && cur.includes('rke2');\n      const existingK3s = this.mode === _EDIT && cur.includes('k3s');\n\n      let allValidRke2Versions = this.getAllOptionsAfterCurrentVersion(this.rke2Versions, (existingRke2 ? cur : null), this.defaultRke2);\n      let allValidK3sVersions = this.getAllOptionsAfterCurrentVersion(this.k3sVersions, (existingK3s ? cur : null), this.defaultK3s);\n\n      if (!this.showDeprecatedPatchVersions) {\n        // Normally, we only want to show the most recent patch version\n        // for each Kubernetes minor version. However, if the user\n        // opts in to showing deprecated versions, we don't filter them.\n        allValidRke2Versions = this.filterOutDeprecatedPatchVersions(allValidRke2Versions, cur);\n        allValidK3sVersions = this.filterOutDeprecatedPatchVersions(allValidK3sVersions, cur);\n      }\n\n      const showRke2 = allValidRke2Versions.length && !existingK3s;\n      const showK3s = allValidK3sVersions.length && !existingRke2;\n      const out = [];\n\n      if (showRke2) {\n        if (showK3s) {\n          out.push({ kind: 'group', label: this.t('cluster.provider.rke2') });\n        }\n\n        out.push(...allValidRke2Versions);\n      }\n\n      if (showK3s) {\n        if (showRke2) {\n          out.push({ kind: 'group', label: this.t('cluster.provider.k3s') });\n        }\n\n        out.push(...allValidK3sVersions);\n      }\n\n      if (cur) {\n        const existing = out.find((x) => x.value === cur);\n\n        if (existing) {\n          existing.disabled = false;\n        }\n      }\n\n      return out;\n    },\n\n    /**\n     * Kube Version\n     */\n    selectedVersion() {\n      const str = this.value.spec.kubernetesVersion;\n\n      if (!str) {\n        return;\n      }\n\n      const out = findBy(this.versionOptions, 'value', str);\n\n      // Adding the option 'none' to Container Network select (used in Basics component)\n      // https://github.com/rancher/dashboard/issues/10338\n      // there's an update loop on refresh that might include 'none'\n      // multiple times... Prevent that\n      if (out.serverArgs?.cni?.options && !out.serverArgs?.cni?.options.includes('none')) {\n        out.serverArgs.cni.options.push('none');\n      }\n\n      return out;\n    },\n\n    haveArgInfo() {\n      return Boolean(this.selectedVersion?.serverArgs && this.selectedVersion?.agentArgs);\n    },\n\n    serverArgs() {\n      return this.selectedVersion?.serverArgs || {};\n    },\n\n    agentArgs() {\n      return this.selectedVersion?.agentArgs || {};\n    },\n\n    /**\n     * The addons (kube charts) applicable for the selected kube version\n     *\n     * { [chartName:string]: { repo: string, version: string } }\n     */\n    chartVersions() {\n      return this.selectedVersion?.charts || {};\n    },\n\n    needCredential() {\n      if (this.provider === 'custom' || this.provider === 'import' || this.isElementalCluster || this.mode === _VIEW || (this.providerConfig?.spec?.builtin === false && this.providerConfig?.spec?.addCloudCredential === false)) {\n        return false;\n      }\n\n      if (this.customCredentialComponentRequired === false) {\n        return false;\n      }\n\n      return true;\n    },\n\n    /**\n     * Only for extensions - extension can register a 'false' cloud credential to indicate that a cloud credential is not needed\n     */\n    customCredentialComponentRequired() {\n      return this.$plugin.getDynamic('cloud-credential', this.provider);\n    },\n\n    hasMachinePools() {\n      if (this.provider === 'custom' || this.provider === 'import') {\n        return false;\n      }\n\n      return true;\n    },\n\n    unremovedMachinePools() {\n      return (this.machinePools || []).filter((x) => !x.remove);\n    },\n\n    /**\n     * Extension provider where being provisioned by an extension\n     */\n    extensionProvider() {\n      const extClass = this.$plugin.getDynamic('provisioner', this.provider);\n\n      if (extClass) {\n        return new extClass({\n          dispatch: this.$store.dispatch,\n          getters:  this.$store.getters,\n          axios:    this.$store.$axios,\n          $plugin:  this.$store.app.$plugin,\n          $t:       this.t,\n          isCreate: this.isCreate\n        });\n      }\n\n      return undefined;\n    },\n\n    /**\n     * Is a namespace needed? Only supported for providers from extensions, otherwise default is no\n     */\n    needsNamespace() {\n      return this.extensionProvider ? !!this.extensionProvider.namespaced : false;\n    },\n\n    machineConfigSchema() {\n      let schema;\n\n      if (!this.hasMachinePools) {\n        return null;\n      } else if (this.isElementalCluster) {\n        schema = ELEMENTAL_SCHEMA_IDS.MACHINE_INV_SELECTOR_TEMPLATES;\n      } else {\n        schema = `${ CAPI.MACHINE_CONFIG_GROUP }.${ this.provider }config`;\n      }\n\n      // If this is an extension provider then the extension can provide the schema\n      const extensionSchema = this.extensionProvider?.machineConfigSchema;\n\n      if (extensionSchema) {\n        // machineConfigSchema can either be the schema name (string) or the schema itself (object)\n        if (typeof extensionSchema === 'object') {\n          return extensionSchema;\n        }\n\n        // Name of schema to use\n        schema = extensionSchema;\n      }\n\n      return this.$store.getters['management/schemaFor'](schema);\n    },\n\n    nodeTotals() {\n      const roles = ['etcd', 'controlPlane', 'worker'];\n      const counts = {};\n      const out = {\n        color:   {},\n        label:   {},\n        icon:    {},\n        tooltip: {},\n      };\n\n      for (const role of roles) {\n        counts[role] = 0;\n        out.color[role] = NODE_TOTAL.success.color;\n        out.icon[role] = NODE_TOTAL.success.icon;\n      }\n\n      for (const row of this.machinePools || []) {\n        if (row.remove) {\n          continue;\n        }\n\n        const qty = parseInt(row.pool.quantity, 10);\n\n        if (isNaN(qty)) {\n          continue;\n        }\n\n        for (const role of roles) {\n          counts[role] = counts[role] + (row.pool[`${ role }Role`] ? qty : 0);\n        }\n      }\n\n      for (const role of roles) {\n        out.label[role] = this.t(`cluster.machinePool.nodeTotals.label.${ role }`, { count: counts[role] });\n        out.tooltip[role] = this.t(`cluster.machinePool.nodeTotals.tooltip.${ role }`, { count: counts[role] });\n      }\n\n      if (counts.etcd === 0) {\n        out.color.etcd = NODE_TOTAL.error.color;\n        out.icon.etcd = NODE_TOTAL.error.icon;\n      } else if (counts.etcd === 1 || counts.etcd % 2 === 0 || counts.etcd > 7) {\n        out.color.etcd = NODE_TOTAL.warning.color;\n        out.icon.etcd = NODE_TOTAL.warning.icon;\n      }\n\n      if (counts.controlPlane === 0) {\n        out.color.controlPlane = NODE_TOTAL.error.color;\n        out.icon.controlPlane = NODE_TOTAL.error.icon;\n      } else if (counts.controlPlane === 1) {\n        out.color.controlPlane = NODE_TOTAL.warning.color;\n        out.icon.controlPlane = NODE_TOTAL.warning.icon;\n      }\n\n      if (counts.worker === 0) {\n        out.color.worker = NODE_TOTAL.error.color;\n        out.icon.worker = NODE_TOTAL.error.icon;\n      } else if (counts.worker === 1) {\n        out.color.worker = NODE_TOTAL.warning.color;\n        out.icon.worker = NODE_TOTAL.warning.icon;\n      }\n\n      return out;\n    },\n\n    showCni() {\n      return !!this.serverArgs.cni;\n    },\n\n    showCloudProvider() {\n      return !!this.agentArgs['cloud-provider-name'];\n    },\n\n    /**\n     * The chart names of the addons applicable to the current kube version and selected cloud provider\n     */\n    addonNames() {\n      const names = [];\n      const cni = this.serverConfig.cni;\n\n      if (typeof cni === 'string') {\n        names.push(...cni.split(',').map((x) => `rke2-${ x }`));\n      } else if (Array.isArray(cni)) {\n        names.push(...cni.map((x) => `rke2-${ x }`));\n      }\n\n      if (this.showCloudProvider) { // Shouldn't be removed such that changes to it will re-trigger this watch\n        if (this.agentConfig?.['cloud-provider-name'] === 'rancher-vsphere') {\n          names.push('rancher-vsphere-cpi', 'rancher-vsphere-csi');\n        }\n\n        if (this.agentConfig?.['cloud-provider-name'] === HARVESTER) {\n          names.push(HARVESTER_CLOUD_PROVIDER);\n        }\n      }\n\n      return names;\n    },\n\n    /**\n     * The charts of the addons applicable to the current kube version and selected cloud provider\n     *\n     * These are the charts themselves and do not include chart readme or values\n     */\n    addonVersions() {\n      const versions = this.addonNames.map((name) => this.versionInfo[name]?.chart);\n\n      return versions.filter((x) => !!x);\n    },\n\n    cloudProviderOptions() {\n      const out = [{\n        label: this.$store.getters['i18n/t']('cluster.rke2.cloudProvider.defaultValue.label'),\n        value: '',\n      }];\n\n      if (!!this.agentArgs['cloud-provider-name']?.options) {\n        const preferred = this.$store.getters['plugins/cloudProviderForDriver'](this.provider);\n\n        for (const opt of this.agentArgs['cloud-provider-name']?.options) {\n          // If we don't have a preferred provider... show all options\n          const showAllOptions = preferred === undefined;\n          // If we have a preferred provider... only show default, preferred and external\n          const isPreferred = opt === preferred;\n          const isExternal = opt === 'external';\n          let disabled = false;\n\n          if ((this.isHarvesterExternalCredential || this.isHarvesterIncompatible) && isPreferred) {\n            disabled = true;\n          }\n\n          if (showAllOptions || isPreferred || isExternal) {\n            out.push({\n              label: this.$store.getters['i18n/withFallback'](`cluster.cloudProvider.\"${ opt }\".label`, null, opt),\n              value: opt,\n              disabled,\n            });\n          }\n        }\n      }\n\n      const cur = this.agentConfig?.['cloud-provider-name'];\n\n      if (cur && !out.find((x) => x.value === cur)) {\n        out.unshift({ label: `${ cur } (Current)`, value: cur });\n      }\n\n      return out;\n    },\n\n    canManageMembers() {\n      return canViewClusterMembershipEditor(this.$store);\n    },\n\n    isHarvesterDriver() {\n      return this.$route.query.type === HARVESTER;\n    },\n\n    defaultVersion() {\n      const all = this.versionOptions.filter((x) => !!x.value);\n      const first = all[0]?.value;\n      const preferred = all.find((x) => x.value === this.defaultRke2)?.value;\n\n      const rke2 = this.getAllOptionsAfterCurrentVersion(this.rke2Versions, null);\n      const showRke2 = rke2.length;\n      let out;\n\n      if (this.isHarvesterDriver && showRke2) {\n        const satisfiesVersion = rke2.filter((v) => {\n          return isHarvesterSatisfiesVersion(v.value);\n        }) || [];\n\n        if (satisfiesVersion.length > 0) {\n          out = satisfiesVersion[0]?.value;\n        }\n      }\n\n      if (!out) {\n        out = preferred || first;\n      }\n\n      return out;\n    },\n\n    appsOSWarning() {\n      if (this.mode !== _EDIT) {\n        return null;\n      }\n      const { linuxWorkerCount, windowsWorkerCount } = this.value?.mgmt?.status || {};\n\n      if (!windowsWorkerCount) {\n        if (!!this.machinePools.find((pool) => {\n          return pool?.config?.os === 'windows';\n        })) {\n          return this.t('cluster.banner.os', { newOS: 'Windows', existingOS: 'Linux' });\n        }\n      } else if (!linuxWorkerCount) {\n        if (this.machinePools.find((pool) => {\n          return pool?.config?.os === 'linux';\n        })) {\n          return this.t('cluster.banner.os', { newOS: 'Linux', existingOS: 'Windows' });\n        }\n      }\n\n      return null;\n    },\n\n    showForm() {\n      return !!this.credentialId || !this.needCredential;\n    },\n\n    isHarvesterExternalCredential() {\n      return this.credential?.harvestercredentialConfig?.clusterType === 'external';\n    },\n\n    isHarvesterIncompatible() {\n      let ccmRke2Version = (this.chartVersions['harvester-cloud-provider'] || {})['version'];\n      let csiRke2Version = (this.chartVersions['harvester-csi-driver'] || {})['version'];\n\n      const ccmVersion = this.harvesterVersionRange?.['harvester-cloud-provider'];\n      const csiVersion = this.harvesterVersionRange?.['harvester-csi-provider'];\n\n      if ((ccmRke2Version || '').endsWith('00')) {\n        ccmRke2Version = ccmRke2Version.slice(0, -2);\n      }\n\n      if ((csiRke2Version || '').endsWith('00')) {\n        csiRke2Version = csiRke2Version.slice(0, -2);\n      }\n\n      if (ccmVersion && csiVersion) {\n        if (semver.satisfies(ccmRke2Version, ccmVersion) &&\n          semver.satisfies(csiRke2Version, csiVersion)) {\n          return false;\n        } else {\n          return true;\n        }\n      } else {\n        return false;\n      }\n    },\n\n    validationPassed() {\n      const validRequiredPools = this.hasMachinePools ? this.hasRequiredNodes() : true;\n\n      let base = (this.provider === 'custom' || this.isElementalCluster || !!this.credentialId || !this.needCredential);\n\n      // and in all of the validation statuses for each machine pool\n      Object.values(this.machinePoolValidation).forEach((v) => (base = base && v));\n\n      return validRequiredPools && base;\n    },\n    currentCluster() {\n      if (this.mode === _EDIT) {\n        return { ...this.value };\n      } else {\n        return this.$store.getters['customisation/getPreviewCluster'];\n      }\n    }\n  },\n\n  watch: {\n    clusterBadgeAbbreviation: {\n      immediate: true,\n      handler(neu) {\n        if (!neu) {\n          return;\n        }\n\n        if (Object.keys(neu.badge).length <= 0) {\n          return { ...this.value };\n        }\n\n        const obj = {\n          [CLUSTER_BADGE.ICON_TEXT]: neu.badge.iconText, [CLUSTER_BADGE.COLOR]: neu.badge.color, [CLUSTER_BADGE.TEXT]: neu.badge.text\n        };\n\n        this.value.metadata.annotations = {\n          ...this.value.metadata.annotations,\n          ...obj\n        };\n      }\n    },\n\n    credentialId(val) {\n      if (val) {\n        this.credential = this.$store.getters['rancher/byId'](NORMAN.CLOUD_CREDENTIAL, this.credentialId);\n\n        if (this.isHarvesterDriver) {\n          this.setHarvesterVersionRange();\n        }\n      } else {\n        this.credential = null;\n      }\n\n      this.value.spec.cloudCredentialSecretName = val;\n    },\n\n    addonNames(neu, old) {\n      // To catch the 'some addons' --> 'no addons' case also check array length (`difference([], [1,2,3]) === []`)\n      const diff = old.length !== neu.length || difference(neu, old).length;\n\n      if (diff) {\n        // Allow time for addonNames to update... then fetch any missing addons\n        this.$nextTick(() => this.initAddons());\n      }\n    },\n\n    selectedVersion() {\n      this.versionInfo = {}; // Invalidate cache such that version info relevent to selected kube version is updated\n\n      // Allow time for addonNames to update... then fetch any missing addons\n      this.$nextTick(() => this.initAddons());\n      if (this.mode === _CREATE) {\n        this.initServerAgentArgs();\n      }\n    },\n\n    showCni(neu) {\n      // Update `serverConfig.cni to recalculate addonNames...\n      // ... which will eventually update `value.spec.rkeConfig.chartValues`\n      if (neu) {\n        // Type supports CNI, assign default if we can\n        if (!this.serverConfig.cni) {\n          const def = this.serverArgs.cni.default;\n\n          set(this.serverConfig, 'cni', def);\n        }\n      } else {\n        // Type doesn't support cni, clear `cni`\n        set(this.serverConfig, 'cni', undefined);\n      }\n    },\n\n    showCloudProvider(neu) {\n      if (!neu) {\n        // No cloud provider available? Then clear cloud provider setting. This will recalculate addonNames...\n        // ... which will eventually update `value.spec.rkeConfig.chartValues`\n        set(this.agentConfig, 'cloud-provider-name', undefined);\n      }\n    },\n  },\n\n  created() {\n    this.registerBeforeHook(this.saveMachinePools, 'save-machine-pools', 1);\n    this.registerBeforeHook(this.setRegistryConfig, 'set-registry-config');\n    this.registerAfterHook(this.cleanupMachinePools, 'cleanup-machine-pools');\n    this.registerAfterHook(this.saveRoleBindings, 'save-role-bindings');\n\n    // Register any hooks for this extension provider\n    if (this.extensionProvider?.registerSaveHooks) {\n      this.extensionProvider.registerSaveHooks(this.registerBeforeHook, this.registerAfterHook, this.value);\n    }\n  },\n\n  methods: {\n    set,\n\n    /**\n     * Initialize all the cluster specs\n     */\n    async initSpecs() {\n      if (!this.value.spec) {\n        set(this.value, 'spec', {});\n      }\n\n      if (!this.value.spec.machineSelectorConfig) {\n        set(this.value.spec, 'machineSelectorConfig', []);\n      }\n\n      if (!this.value.spec.machineSelectorConfig.find((x) => !x.machineLabelSelector)) {\n        this.value.spec.machineSelectorConfig.unshift({ config: {} });\n      }\n\n      if (this.value.spec.cloudCredentialSecretName) {\n        await this.$store.dispatch('rancher/findAll', { type: NORMAN.CLOUD_CREDENTIAL });\n        this.credentialId = `${ this.value.spec.cloudCredentialSecretName }`;\n      }\n\n      if (!this.value.spec.kubernetesVersion) {\n        set(this.value.spec, 'kubernetesVersion', this.defaultVersion);\n      }\n\n      if (this.rkeConfig.etcd?.s3?.bucket) {\n        this.s3Backup = true;\n      }\n\n      if (!this.rkeConfig.etcd) {\n        set(this.rkeConfig, 'etcd', {\n          disableSnapshots:     false,\n          s3:                   null,\n          snapshotRetention:    5,\n          snapshotScheduleCron: '0 */5 * * *',\n        });\n      } else if (typeof this.rkeConfig.etcd.disableSnapshots === 'undefined') {\n        const disableSnapshots = !this.rkeConfig.etcd.snapshotRetention && !this.rkeConfig.etcd.snapshotScheduleCron;\n\n        set(this.rkeConfig.etcd, 'disableSnapshots', disableSnapshots);\n      }\n\n      // Namespaces if required - this is mainly for custom provisioners via extensions that want\n      // to allow creating their resources in a different namespace\n      if (this.needsNamespace) {\n        this.allNamespaces = await this.$store.dispatch('management/findAll', { type: NAMESPACE });\n      }\n\n      if (!this.machinePools) {\n        await this.initMachinePools(this.value.spec.rkeConfig.machinePools);\n        if (this.mode === _CREATE && !this.machinePools.length) {\n          await this.addMachinePool();\n        }\n      }\n\n      if (this.value.spec.defaultPodSecurityAdmissionConfigurationTemplateName === undefined) {\n        set(this.value.spec, 'defaultPodSecurityAdmissionConfigurationTemplateName', '');\n      }\n    },\n\n    /**\n     * Fetch RKE versions and their configurations to be mapped to the form\n     */\n    async fetchRke2Versions() {\n      if (!this.rke2Versions) {\n        const hash = {\n          rke2Versions: this.$store.dispatch('management/request', { url: '/v1-rke2-release/releases' }),\n          k3sVersions:  this.$store.dispatch('management/request', { url: '/v1-k3s-release/releases' }),\n        };\n\n        if (this.$store.getters['management/canList'](MANAGEMENT.PSA)) {\n          hash.allPSAs = await this.$store.dispatch('management/findAll', { type: MANAGEMENT.PSA });\n        }\n\n        // Get the latest versions from the global settings if possible\n        const globalSettings = await this.$store.getters['management/all'](MANAGEMENT.SETTING) || [];\n        const defaultRke2Setting = globalSettings.find((setting) => setting.id === 'rke2-default-version') || {};\n        const defaultK3sSetting = globalSettings.find((setting) => setting.id === 'k3s-default-version') || {};\n\n        let defaultRke2 = defaultRke2Setting?.value || defaultRke2Setting?.default;\n        let defaultK3s = defaultK3sSetting?.value || defaultK3sSetting?.default;\n\n        // RKE2: Use the channel if we can not get the version from the settings\n        if (!defaultRke2) {\n          hash.rke2Channels = this.$store.dispatch('management/request', { url: '/v1-rke2-release/channels' });\n        }\n\n        // K3S: Use the channel if we can not get the version from the settings\n        if (!defaultK3s) {\n          hash.k3sChannels = this.$store.dispatch('management/request', { url: '/v1-k3s-release/channels' });\n        }\n\n        const res = await allHash(hash);\n\n        this.allPSAs = res.allPSAs || [];\n        this.rke2Versions = res.rke2Versions.data || [];\n        this.k3sVersions = res.k3sVersions.data || [];\n\n        if (!defaultRke2) {\n          const rke2Channels = res.rke2Channels.data || [];\n\n          defaultRke2 = rke2Channels.find((x) => x.id === 'default')?.latest;\n        }\n\n        if (!defaultK3s) {\n          const k3sChannels = res.k3sChannels.data || [];\n\n          defaultK3s = k3sChannels.find((x) => x.id === 'default')?.latest;\n        }\n\n        if (!this.rke2Versions.length && !this.k3sVersions.length) {\n          throw new Error('No version info found in KDM');\n        }\n\n        // Store default versions\n        this.defaultRke2 = defaultRke2;\n        this.defaultK3s = defaultK3s;\n      }\n    },\n\n    cleanAgentConfiguration(model, key) {\n      if (!model || !model[key]) {\n        return;\n      }\n\n      const v = model[key];\n\n      if (Array.isArray(v) && v.length === 0) {\n        delete model[key];\n      } else if (v && typeof v === 'object') {\n        Object.keys(v).forEach((k) => {\n          // delete these auxiliary props used in podAffinity and nodeAffinity that shouldn't be sent to the server\n          if (k === '_namespaceOption' || k === '_namespaces' || k === '_anti' || k === '_id') {\n            delete v[k];\n          }\n\n          // prevent cleanup of \"namespaceSelector\" when an empty object because it represents all namespaces in pod/node affinity\n          // https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.25/#podaffinityterm-v1-core\n          if (k !== 'namespaceSelector') {\n            this.cleanAgentConfiguration(v, k);\n          }\n        });\n\n        if (Object.keys(v).length === 0) {\n          delete model[key];\n        }\n      }\n    },\n\n    /**\n     * Clean agent configuration objects, so we only send values when the user has configured something\n     */\n    agentConfigurationCleanup() {\n      this.cleanAgentConfiguration(this.value.spec, CLUSTER_AGENT_CUSTOMIZATION);\n      this.cleanAgentConfiguration(this.value.spec, FLEET_AGENT_CUSTOMIZATION);\n    },\n\n    /**\n     * Ensure we have empty models for the two agent configurations\n     */\n    setAgentConfiguration() {\n      // Cluster Agent Configuration\n      if (!this.value.spec[CLUSTER_AGENT_CUSTOMIZATION]) {\n        set(this.value.spec, CLUSTER_AGENT_CUSTOMIZATION, {});\n      }\n\n      // Fleet Agent Configuration\n      if (!this.value.spec[FLEET_AGENT_CUSTOMIZATION]) {\n        set(this.value.spec, FLEET_AGENT_CUSTOMIZATION, {});\n      }\n    },\n\n    /**\n     * set instanceNameLimit to 15 to all pool machine if truncateHostnames checkbox is clicked\n     */\n    truncateHostname(neu) {\n      if (neu) {\n        this.value.defaultHostnameLengthLimit = NETBIOS_TRUNCATION_LENGTH;\n        this.truncateLimit = NETBIOS_TRUNCATION_LENGTH;\n      } else {\n        this.truncateLimit = 0;\n        this.value.removeDefaultHostnameLengthLimit();\n      }\n    },\n\n    /**\n     * Get machine pools from the cluster configuration\n     * this.value.spec.rkeConfig.machinePools\n     */\n    async initMachinePools(existing) {\n      const out = [];\n\n      if (existing?.length) {\n        for (const pool of existing) {\n          let type;\n\n          if (this.isElementalCluster) {\n            type = ELEMENTAL_SCHEMA_IDS.MACHINE_INV_SELECTOR_TEMPLATES;\n          } else {\n            type = `${ CAPI.MACHINE_CONFIG_GROUP }.${ pool.machineConfigRef.kind.toLowerCase() }`;\n          }\n\n          let config;\n          let configMissing = false;\n\n          if (this.$store.getters['management/canList'](type)) {\n            try {\n              config = await this.$store.dispatch('management/find', {\n                type,\n                id: `${ this.value.metadata.namespace }/${ pool.machineConfigRef.name }`,\n              });\n            } catch (e) {\n              // Some users can't see the config, that's ok.\n              // we will display a banner for a 404 only for elemental\n              if (e?.status === 404) {\n                if (this.isElementalCluster) {\n                  configMissing = true;\n                }\n              }\n            }\n          }\n\n          // @TODO what if the pool is missing?\n          const id = `pool${ ++this.lastIdx }`;\n\n          out.push({\n            id,\n            remove: false,\n            create: false,\n            update: true,\n            pool:   clone(pool),\n            config: config ? await this.$store.dispatch('management/clone', { resource: config }) : null,\n            configMissing\n          });\n        }\n      }\n\n      this.machinePools = out;\n    },\n\n    async addMachinePool(idx) {\n      // this.machineConfigSchema is the schema for the Machine Pool's machine configuration for the given provider\n      if (!this.machineConfigSchema) {\n        return;\n      }\n\n      const numCurrentPools = this.machinePools.length || 0;\n\n      let config;\n\n      if (this.extensionProvider?.createMachinePoolMachineConfig) {\n        config = await this.extensionProvider.createMachinePoolMachineConfig(idx, this.machinePools, this.value);\n      } else {\n        // Default - use the schema\n        config = await this.$store.dispatch('management/createPopulated', {\n          type:     this.machineConfigSchema.id,\n          metadata: { namespace: DEFAULT_WORKSPACE }\n        });\n\n        // If there is no specific model, the applyDefaults does nothing by default\n        config.applyDefaults(idx, this.machinePools);\n      }\n\n      const name = `pool${ ++this.lastIdx }`;\n\n      const pool = {\n        id:     name,\n        config,\n        remove: false,\n        create: true,\n        update: false,\n        uid:    name,\n        pool:   {\n          name,\n          etcdRole:             numCurrentPools === 0,\n          controlPlaneRole:     numCurrentPools === 0,\n          workerRole:           true,\n          hostnamePrefix:       '',\n          labels:               {},\n          quantity:             1,\n          unhealthyNodeTimeout: '0m',\n          machineConfigRef:     {\n            kind: this.machineConfigSchema.attributes?.kind,\n            name: null,\n          },\n          drainBeforeDelete: true\n        },\n      };\n\n      if (this.provider === VMWARE_VSPHERE) {\n        pool.pool.machineOS = 'linux';\n      }\n\n      if (this.isElementalCluster) {\n        pool.pool.machineConfigRef.apiVersion = `${ this.machineConfigSchema.attributes.group }/${ this.machineConfigSchema.attributes.version }`;\n      }\n\n      this.machinePools.push(pool);\n\n      this.$nextTick(() => {\n        if (this.$refs.pools?.select) {\n          this.$refs.pools.select(name);\n        }\n      });\n    },\n\n    removeMachinePool(idx) {\n      const entry = this.machinePools[idx];\n\n      if (!entry) {\n        return;\n      }\n\n      if (entry.create) {\n        // If this is a new pool that isn't saved yet, it can just be dropped\n        removeObject(this.machinePools, entry);\n      } else {\n        // Mark for removal on save\n        entry.remove = true;\n      }\n    },\n\n    async syncMachineConfigWithLatest(machinePool) {\n      if (machinePool?.config?.id) {\n        // Use management/request instead of management/find to avoid overwriting the current machine pool in the store\n        const _latestConfig = await this.$store.dispatch('management/request', { url: `/v1/${ machinePool.config.type }s/${ machinePool.config.id }` });\n        const latestConfig = await this.$store.dispatch('management/create', _latestConfig);\n\n        const clonedCurrentConfig = await this.$store.dispatch('management/clone', { resource: machinePool.config });\n        const clonedLatestConfig = await this.$store.dispatch('management/clone', { resource: latestConfig });\n\n        // We don't allow the user to edit any of the fields in metadata from the UI so it's safe to override it with the\n        // metadata defined by the latest backend value. This is primarily used to ensure the resourceVersion is up to date.\n        delete clonedCurrentConfig.metadata;\n\n        if (this.provider === VMWARE_VSPHERE) {\n          machinePool.config = vspherePoolConfigMerge(clonedLatestConfig, clonedCurrentConfig);\n        } else {\n          machinePool.config = merge(clonedLatestConfig, clonedCurrentConfig);\n        }\n      }\n    },\n\n    async saveMachinePools(hookContext) {\n      if (hookContext === CONTEXT_HOOK_EDIT_YAML) {\n        await new Promise((resolve, reject) => {\n          this.$store.dispatch('cluster/promptModal', {\n            component:      'GenericPrompt',\n            componentProps: {\n              title:     this.t('cluster.rke2.modal.editYamlMachinePool.title'),\n              body:      this.t('cluster.rke2.modal.editYamlMachinePool.body'),\n              applyMode: 'editAndContinue',\n              confirm:   async(confirmed) => {\n                if (confirmed) {\n                  await this.validateMachinePool();\n\n                  if (this.errors.length) {\n                    reject(new Error('Machine Pool validation errors'));\n                  }\n\n                  resolve();\n                } else {\n                  reject(new Error('User Cancelled'));\n                }\n              }\n            },\n          });\n        });\n      }\n\n      const finalPools = [];\n\n      // If the extension provider wants to do this, let them\n      if (this.extensionProvider?.saveMachinePoolConfigs) {\n        return await this.extensionProvider.saveMachinePoolConfigs(this.machinePools, this.value);\n      }\n\n      for (const entry of this.machinePools) {\n        if (entry.remove) {\n          continue;\n        }\n\n        await this.syncMachineConfigWithLatest(entry);\n\n        // Capitals and such aren't allowed;\n        set(entry.pool, 'name', normalizeName(entry.pool.name) || 'pool');\n\n        const prefix = `${ this.value.metadata.name }-${ entry.pool.name }`.substr(0, 50).toLowerCase();\n\n        if (entry.create) {\n          if (!entry.config.metadata?.name) {\n            entry.config.metadata.generateName = `nc-${ prefix }-`;\n          }\n\n          const neu = await entry.config.save();\n\n          entry.config = neu;\n          entry.pool.machineConfigRef.name = neu.metadata.name;\n          entry.create = false;\n          entry.update = true;\n        } else if (entry.update) {\n          entry.config = await entry.config.save();\n        }\n\n        // Ensure Elemental clusters have a hostname prefix\n        if (this.isElementalCluster && !entry.pool.hostnamePrefix) {\n          entry.pool.hostnamePrefix = `${ prefix }-`;\n        }\n\n        finalPools.push(entry.pool);\n      }\n\n      this.value.spec.rkeConfig.machinePools = finalPools;\n    },\n\n    async cleanupMachinePools() {\n      for (const entry of this.machinePools) {\n        if (entry.remove && entry.config) {\n          try {\n            await entry.config.remove();\n          } catch (e) { }\n        }\n      }\n    },\n\n    async saveRoleBindings() {\n      await this.value.waitForMgmt();\n\n      if (this.membershipUpdate.save) {\n        await this.membershipUpdate.save(this.value.mgmt.id);\n      }\n    },\n\n    /**\n     * Ensure that all the existing node roles pool are at least 1 each\n     */\n    hasRequiredNodes() {\n      return this.nodeTotals?.color && Object.values(this.nodeTotals.color).every((color) => color !== NODE_TOTAL.error.color);\n    },\n\n    cancelCredential() {\n      if (this.$refs.cruresource) {\n        this.$refs.cruresource.emitOrRoute();\n      }\n    },\n\n    done() {\n      let routeName = 'c-cluster-product-resource';\n\n      if (this.mode === _CREATE && (this.provider === 'import' || this.provider === 'custom')) {\n        // Go show the registration command\n        routeName = 'c-cluster-product-resource-namespace-id';\n      }\n\n      this.$router.push({\n        name:   routeName,\n        params: {\n          cluster:   this.$route.params.cluster,\n          product:   this.$store.getters['productId'],\n          resource:  CAPI.RANCHER_CLUSTER,\n          namespace: this.value.metadata.namespace,\n          id:        this.value.metadata.name,\n        },\n      });\n    },\n\n    showAddonConfirmation() {\n      return new Promise((resolve, reject) => {\n        this.$store.dispatch('cluster/promptModal', {\n          component: 'AddonConfigConfirmationDialog',\n          resources: [(value) => resolve(value)]\n        });\n      });\n    },\n\n    // Set busy before save and clear after save\n    async saveOverride(btnCb) {\n      this.$set(this, 'busy', true);\n\n      // If the provider is from an extension, let it do the provision step\n      if (this.extensionProvider?.provision) {\n        const errors = await this.extensionProvider?.provision(this.value, this.machinePools);\n        const okay = (errors || []).length === 0;\n\n        this.errors = errors;\n        this.$set(this, 'busy', false);\n\n        btnCb(okay);\n\n        if (okay) {\n          // If saved okay, go to the done route\n          return this.done();\n        }\n      }\n\n      // Default save\n      return this._doSaveOverride((done) => {\n        this.$set(this, 'busy', false);\n\n        return btnCb(done);\n      });\n    },\n\n    async _doSaveOverride(btnCb) {\n      // We cannot use the hook, because it is triggered on YAML toggle without restore initialized data\n      this.agentConfigurationCleanup();\n\n      const isEditVersion = this.isEdit && this.liveValue?.spec?.kubernetesVersion !== this.value?.spec?.kubernetesVersion;\n\n      if (isEditVersion) {\n        const shouldContinue = await this.showAddonConfirmation();\n\n        if (!shouldContinue) {\n          return btnCb('cancelled');\n        }\n      }\n\n      this.validateClusterName();\n\n      await this.validateMachinePool();\n\n      if (this.errors.length) {\n        btnCb(false);\n\n        return;\n      }\n\n      try {\n        const clusterId = get(this.credential, 'decodedData.clusterId') || '';\n\n        this.applyChartValues(this.value.spec.rkeConfig);\n\n        const isUpgrade = this.isEdit && this.liveValue?.spec?.kubernetesVersion !== this.value?.spec?.kubernetesVersion;\n\n        if (this.agentConfig?.['cloud-provider-name'] === HARVESTER && clusterId && (this.isCreate || isUpgrade)) {\n          const namespace = this.machinePools?.[0]?.config?.vmNamespace;\n\n          const res = await this.$store.dispatch('management/request', {\n            url:    `/k8s/clusters/${ clusterId }/v1/harvester/kubeconfig`,\n            method: 'POST',\n            data:   {\n              csiClusterRoleName: 'harvesterhci.io:csi-driver',\n              clusterRoleName:    'harvesterhci.io:cloudprovider',\n              namespace,\n              serviceAccountName: this.value.metadata.name,\n            },\n          });\n\n          const kubeconfig = res.data;\n\n          const harvesterKubeconfigSecret = await this.createKubeconfigSecret(kubeconfig);\n\n          set(this.agentConfig, 'cloud-provider-config', `secret://fleet-default:${ harvesterKubeconfigSecret?.metadata?.name }`);\n\n          if (this.isCreate) {\n            set(this.chartValues, `${ HARVESTER_CLOUD_PROVIDER }.global.cattle.clusterName`, this.value.metadata.name);\n          }\n\n          const distroRoot = this.value?.spec?.rkeConfig?.dataDirectories?.k8sDistro?.length ? this.value?.spec?.rkeConfig?.dataDirectories?.k8sDistro : '/var/lib/rancher/rke2';\n\n          set(this.chartValues, `${ HARVESTER_CLOUD_PROVIDER }.cloudConfigPath`, `${ distroRoot }/etc/config-files/cloud-provider-config`);\n        }\n      } catch (err) {\n        this.errors.push(err);\n\n        btnCb(false);\n\n        return;\n      }\n\n      // Remove null profile on machineGlobalConfig - https://github.com/rancher/dashboard/issues/8480\n      if (this.value.spec?.rkeConfig?.machineGlobalConfig?.profile === null) {\n        delete this.value.spec.rkeConfig.machineGlobalConfig.profile;\n      }\n\n      // Store the current data for fleet and cluster agent so that we can re-apply it later if the save fails\n      // The cleanup occurs before save with agentConfigurationCleanup()\n      const clusterAgentDeploymentCustomization = this.value.spec[CLUSTER_AGENT_CUSTOMIZATION] ? JSON.parse(JSON.stringify(this.value.spec[CLUSTER_AGENT_CUSTOMIZATION])) : null;\n      const fleetAgentDeploymentCustomization = this.value.spec[FLEET_AGENT_CUSTOMIZATION] ? JSON.parse(JSON.stringify(this.value.spec[FLEET_AGENT_CUSTOMIZATION])) : null;\n\n      await this.save(btnCb);\n\n      // comes from createEditView mixin\n      // if there are any errors saving, restore the agent config data\n      if (this.errors?.length) {\n        // Ensure the agent configuration is set back to the values before we changed (cleaned) it\n        set(this.value.spec, CLUSTER_AGENT_CUSTOMIZATION, clusterAgentDeploymentCustomization);\n        set(this.value.spec, FLEET_AGENT_CUSTOMIZATION, fleetAgentDeploymentCustomization);\n      }\n    },\n\n    async actuallySave(url) {\n      if (this.extensionProvider?.saveCluster) {\n        return await this.extensionProvider?.saveCluster(this.value, this.schema);\n      }\n\n      if (this.isCreate) {\n        url = url || this.schema.linkFor('collection');\n        const res = await this.value.save({ url });\n\n        if (res) {\n          Object.assign(this.value, res);\n        }\n      } else {\n        await this.value.save();\n      }\n    },\n\n    // create a secret to reference the harvester cluster kubeconfig in rkeConfig\n    async createKubeconfigSecret(kubeconfig = '') {\n      const clusterName = this.value.metadata.name;\n      const secret = await this.$store.dispatch('management/create', {\n        type:     SECRET,\n        metadata: {\n          namespace: 'fleet-default', generateName: 'harvesterconfig', annotations: { [CAPI_ANNOTATIONS.SECRET_AUTH]: clusterName, [CAPI_ANNOTATIONS.SECRET_WILL_DELETE]: 'true' }\n        },\n        data: { credential: base64Encode(kubeconfig) }\n      });\n\n      return secret.save({ url: '/v1/secrets', method: 'POST' });\n    },\n\n    cancel() {\n      this.$router.push({\n        name:   'c-cluster-product-resource',\n        params: {\n          cluster:  this.$route.params.cluster,\n          product:  this.$store.getters['productId'],\n          resource: CAPI.RANCHER_CLUSTER,\n        },\n      });\n    },\n\n    /**\n     * Ensure all chart information required to show addons is available\n     *\n     * This basically means\n     * 1) That the full chart relating to the addon is fetched (which includes core chart, readme and values)\n     * 2) We're ready to cache any values the user provides for each addon\n     */\n    async initAddons() {\n      for (const chartName of this.addonNames) {\n        const entry = this.chartVersions[chartName];\n\n        // prevent fetching of addon config for 'none' CNI option\n        // https://github.com/rancher/dashboard/issues/10338\n        if (this.versionInfo[chartName] || chartName.includes('none')) {\n          continue;\n        }\n\n        try {\n          const res = await this.$store.dispatch('catalog/getVersionInfo', {\n            repoType:    'cluster',\n            repoName:    entry.repo,\n            chartName,\n            versionName: entry.version,\n          });\n\n          set(this.versionInfo, chartName, res);\n          const key = this.chartVersionKey(chartName);\n\n          if (!this.userChartValues[key]) {\n            this.userChartValues[key] = {};\n          }\n        } catch (e) {\n          console.error(`Failed to fetch or process chart info for ${ chartName }`); // eslint-disable-line no-console\n        }\n      }\n    },\n\n    showAddons(key) {\n      this.addonsRev++;\n      this.addonNames.forEach((name) => {\n        const chartValues = this.versionInfo[name]?.questions ? this.initYamlEditor(name) : {};\n\n        set(this.userChartValuesTemp, name, chartValues);\n      });\n      this.refreshComponentWithYamls(key);\n    },\n    refreshComponentWithYamls(key) {\n      const component = this.$refs[key];\n\n      if (component) {\n        this.refreshYamls(component.$refs);\n      }\n    },\n\n    refreshYamls(refs) {\n      const keys = Object.keys(refs).filter((x) => x.startsWith('yaml'));\n\n      for (const k of keys) {\n        const entry = refs[k];\n        const list = isArray(entry) ? entry : [entry];\n\n        for (const component of list) {\n          component?.refresh(); // `yaml` ref can be undefined on switching from Basic to Addon tab (Azure --> Amazon --> addon)\n        }\n      }\n    },\n\n    updateValues(name, values) {\n      set(this.userChartValuesTemp, name, values);\n      this.syncChartValues(name);\n    },\n\n    syncChartValues: throttle(function(name) {\n      const fromChart = this.versionInfo[name]?.values;\n      const fromUser = this.userChartValuesTemp[name];\n      const different = diff(fromChart, fromUser);\n\n      this.userChartValues[this.chartVersionKey(name)] = different;\n    }, 250, { leading: true }),\n\n    initYamlEditor(name) {\n      const defaultChartValue = this.versionInfo[name];\n      const key = this.chartVersionKey(name);\n\n      return merge({}, defaultChartValue?.values || {}, this.userChartValues[key] || {});\n    },\n\n    initServerAgentArgs() {\n      for (const k in this.serverArgs) {\n        if (this.serverConfig[k] === undefined) {\n          const def = this.serverArgs[k].default;\n\n          set(this.serverConfig, k, (def !== undefined ? def : undefined));\n        }\n      }\n\n      for (const k in this.agentArgs) {\n        if (this.agentConfig?.[k] === undefined) {\n          const def = this.agentArgs[k].default;\n\n          set(this.agentConfig, k, (def !== undefined ? def : undefined));\n        }\n      }\n\n      if (!this.serverConfig?.profile) {\n        set(this.serverConfig, 'profile', null);\n      }\n    },\n\n    chartVersionKey(name) {\n      const addonVersion = this.addonVersions.find((av) => av.name === name);\n\n      return addonVersion ? `${ name }-${ addonVersion.version }` : name;\n    },\n\n    onMembershipUpdate(update) {\n      this.$set(this, 'membershipUpdate', update);\n    },\n\n    async initRegistry() {\n      // Check for an existing cluster scoped registry\n      const clusterRegistry = this.agentConfig?.['system-default-registry'] || '';\n\n      // Check for the global registry\n      this.systemRegistry = (await this.$store.dispatch('management/find', { type: MANAGEMENT.SETTING, id: SETTING.SYSTEM_DEFAULT_REGISTRY })).value || '';\n\n      // The order of precedence is to use the cluster scoped registry\n      // if it exists, then use the global scoped registry as a fallback\n      if (clusterRegistry) {\n        this.registryHost = clusterRegistry;\n      } else {\n        this.registryHost = this.systemRegistry;\n      }\n\n      let registrySecret = null;\n      let regs = this.rkeConfig.registries;\n\n      if (!regs) {\n        regs = {};\n        set(this.rkeConfig, 'registries', regs);\n      }\n\n      if (!regs.configs) {\n        set(regs, 'configs', {});\n      }\n\n      if (!regs.mirrors) {\n        set(regs, 'mirrors', {});\n      }\n\n      const config = regs.configs[this.registryHost];\n\n      if (config) {\n        registrySecret = config.authConfigSecretName;\n      }\n\n      this.registrySecret = registrySecret;\n\n      const hasMirrorsOrAuthConfig = Object.keys(regs.configs).length > 0 || Object.keys(regs.mirrors).length > 0;\n\n      if (this.registryHost || registrySecret || hasMirrorsOrAuthConfig) {\n        this.showCustomRegistryInput = true;\n\n        if (hasMirrorsOrAuthConfig) {\n          this.showCustomRegistryAdvancedInput = true;\n        }\n      }\n    },\n\n    setRegistryConfig() {\n      const hostname = (this.registryHost || '').trim();\n\n      if (this.systemRegistry) {\n        // Empty string overrides the system default to nothing\n        set(this.agentConfig, 'system-default-registry', '');\n      } else {\n        // No need to set anything\n        set(this.agentConfig, 'system-default-registry', undefined);\n      }\n      if (!hostname || hostname === this.systemRegistry) {\n        // Undefined removes the key which uses the global setting without hardcoding it into the config\n        set(this.agentConfig, 'system-default-registry', undefined);\n      } else {\n        set(this.agentConfig, 'system-default-registry', hostname);\n      }\n\n      if (hostname && this.registrySecret) {\n        // For a registry with basic auth, but no mirrors,\n        // add a single registry config with the basic auth secret.\n        const basicAuthConfig = {\n          [hostname]: {\n            authConfigSecretName: this.registrySecret,\n            caBundle:             null,\n            insecureSkipVerify:   false,\n            tlsSecretName:        null,\n          }\n        };\n\n        const rkeConfig = this.value.spec.rkeConfig;\n\n        if (!rkeConfig) {\n          this.value.spec.rkeConfig = { registries: { configs: basicAuthConfig } };\n        } else if (rkeConfig.registries.configs && Object.keys(rkeConfig.registries.configs).length > 0) {\n          // If some existing authentication secrets are already configured\n          // for registry mirrors, the basic auth is added to the existing ones.\n          const existingConfigs = rkeConfig.registries.configs;\n\n          this.value.spec.rkeConfig.registries.configs = { ...basicAuthConfig, ...existingConfigs };\n        } else {\n          const existingMirrorAndAuthConfig = this.value.spec.rkeConfig.registries;\n\n          this.value.spec.rkeConfig.registries = {\n            ...existingMirrorAndAuthConfig,\n            configs: basicAuthConfig\n          };\n        }\n      }\n    },\n\n    updateConfigs(configs) {\n      // Update authentication configuration\n      // for each mirror\n      if (!this.value.spec?.rkeConfig) {\n        this.value.spec.rkeConfig = { registries: {} };\n      }\n      set(this.value.spec.rkeConfig.registries, 'configs', configs);\n    },\n\n    getAllOptionsAfterCurrentVersion(versions, currentVersion, defaultVersion) {\n      const out = (versions || []).filter((obj) => !!obj.serverArgs).map((obj) => {\n        let disabled = false;\n        let experimental = false;\n        let isCurrentVersion = false;\n        let label = obj.id;\n\n        if (currentVersion) {\n          disabled = compare(obj.id, currentVersion) < 0;\n          isCurrentVersion = compare(obj.id, currentVersion) === 0;\n        }\n\n        if (defaultVersion) {\n          experimental = compare(defaultVersion, obj.id) < 0;\n        }\n\n        if (isCurrentVersion) {\n          label = `${ label } ${ this.t('cluster.kubernetesVersion.current') }`;\n        }\n\n        if (experimental) {\n          label = `${ label } ${ this.t('cluster.kubernetesVersion.experimental') }`;\n        }\n\n        return {\n          label,\n          value:      obj.id,\n          sort:       sortable(obj.id),\n          serverArgs: obj.serverArgs,\n          agentArgs:  obj.agentArgs,\n          charts:     obj.charts,\n          disabled,\n        };\n      });\n\n      if (currentVersion && !out.find((obj) => obj.value === currentVersion)) {\n        out.push({\n          label: `${ currentVersion } ${ this.t('cluster.kubernetesVersion.current') }`,\n          value: currentVersion,\n          sort:  sortable(currentVersion),\n        });\n      }\n\n      const sorted = sortBy(out, 'sort:desc');\n\n      const mostRecentPatchVersions = this.getMostRecentPatchVersions(sorted);\n\n      const sortedWithDeprecatedLabel = sorted.map((optionData) => {\n        const majorMinor = `${ semver.major(optionData.value) }.${ semver.minor(optionData.value) }`;\n\n        if (mostRecentPatchVersions[majorMinor] === optionData.value) {\n          return optionData;\n        }\n\n        return {\n          ...optionData,\n          label: `${ optionData.label } ${ this.t('cluster.kubernetesVersion.deprecated') }`\n        };\n      });\n\n      return sortedWithDeprecatedLabel;\n    },\n\n    getMostRecentPatchVersions(sortedVersions) {\n      // Get the most recent patch version for each Kubernetes minor version.\n      const versionMap = {};\n\n      sortedVersions.forEach((version) => {\n        const majorMinor = `${ semver.major(version.value) }.${ semver.minor(version.value) }`;\n\n        if (!versionMap[majorMinor]) {\n          // Because we start with a sorted list of versions, we know the\n          // highest patch version is first in the list, so we only keep the\n          // first of each minor version in the list.\n          versionMap[majorMinor] = version.value;\n        }\n      });\n\n      return versionMap;\n    },\n\n    filterOutDeprecatedPatchVersions(allVersions, currentVersion) {\n      // Get the most recent patch version for each Kubernetes minor version.\n      const mostRecentPatchVersions = this.getMostRecentPatchVersions(allVersions);\n\n      const filteredVersions = allVersions.filter((version) => {\n        // Always show pre-releases\n        if (semver.prerelease(version.value)) {\n          return true;\n        }\n\n        const majorMinor = `${ semver.major(version.value) }.${ semver.minor(version.value) }`;\n\n        // Always show current version, else show if we haven't shown anything for this major.minor version yet\n        if (version.value === currentVersion || mostRecentPatchVersions[majorMinor] === version.value) {\n          return true;\n        }\n\n        return false;\n      });\n\n      return filteredVersions;\n    },\n\n    generateYaml() {\n      const resource = this.value;\n      const inStore = this.$store.getters['currentStore'](resource);\n      const schemas = this.$store.getters[`${ inStore }/all`](SCHEMA);\n      const clonedResource = clone(resource);\n\n      this.applyChartValues(clonedResource.spec.rkeConfig);\n\n      const out = createYaml(schemas, resource.type, clonedResource);\n\n      return out;\n    },\n\n    applyChartValues(rkeConfig) {\n      rkeConfig.chartValues = {};\n      this.addonNames.forEach((name) => {\n        const key = this.chartVersionKey(name);\n        const userValues = this.userChartValues[key];\n\n        if (userValues) {\n          set(rkeConfig.chartValues, name, userValues);\n        }\n      });\n    },\n    get,\n\n    setHarvesterDefaultCloudProvider() {\n      if (this.isHarvesterDriver &&\n        this.mode === _CREATE &&\n        this.agentConfig &&\n        !this.agentConfig['cloud-provider-name'] &&\n        !this.isHarvesterExternalCredential &&\n        !this.isHarvesterIncompatible\n      ) {\n        this.agentConfig['cloud-provider-name'] = HARVESTER;\n      } else {\n        this.agentConfig['cloud-provider-name'] = '';\n      }\n    },\n\n    async setHarvesterVersionRange() {\n      const clusterId = this.credential?.decodedData?.clusterId;\n      const clusterType = this.credential?.decodedData?.clusterType;\n\n      if (clusterId && clusterType === 'imported') {\n        const url = `/k8s/clusters/${ clusterId }/v1`;\n        const res = await this.$store.dispatch('cluster/request', { url: `${ url }/${ HCI.SETTING }s` });\n\n        const version = (res?.data || []).find((s) => s.id === 'harvester-csi-ccm-versions');\n\n        if (version) {\n          this.harvesterVersionRange = JSON.parse(version.value || version.default || '{}');\n        } else {\n          this.harvesterVersionRange = {};\n        }\n      }\n      this.setHarvesterDefaultCloudProvider();\n    },\n    toggleCustomRegistry(neu) {\n      this.showCustomRegistryInput = neu;\n      if (this.registryHost) {\n        this.registryHost = null;\n        this.registrySecret = null;\n      } else {\n        this.initRegistry();\n      }\n    },\n\n    /**\n     * Reset PSA on several input changes for given conditions\n     */\n    togglePsaDefault() {\n      // This option is created from the server and is guaranteed to exist #8032\n      const hardcodedTemplate = 'rancher-restricted';\n      const cisValue = this.agentConfig?.profile || this.serverConfig?.profile;\n\n      if (!this.cisOverride) {\n        if (cisValue) {\n          set(this.value.spec, 'defaultPodSecurityAdmissionConfigurationTemplateName', hardcodedTemplate);\n        }\n      }\n    },\n\n    handleCisChange() {\n      this.togglePsaDefault();\n      this.updateCisProfile();\n    },\n\n    updateCisProfile() {\n      // If the user selects any Worker CIS Profile,\n      // protect-kernel-defaults should be set to false\n      // in the RKE2 worker/agent config.\n      const selectedCisProfile = this.agentConfig?.profile;\n\n      if (selectedCisProfile) {\n        set(this.agentConfig, 'protect-kernel-defaults', true);\n      } else {\n        set(this.agentConfig, 'protect-kernel-defaults', false);\n      }\n    },\n    updateAdditionalManifest(neu) {\n      this.value.spec.rkeConfig.additionalManifest = neu;\n    },\n\n    /**\n     * Handle k8s changes side effects, like PSA resets\n     */\n    handleKubernetesChange(value, old) {\n      if (value) {\n        this.togglePsaDefault();\n\n        // If Harvester driver, reset cloud provider if not compatible\n        if (this.isHarvesterDriver && this.mode === _CREATE && this.isHarvesterIncompatible) {\n          this.setHarvesterDefaultCloudProvider();\n        }\n      }\n    },\n\n    handleShowDeprecatedPatchVersionsChanged(value) {\n      this.showDeprecatedPatchVersions = value;\n    },\n    /**\n     * Track Machine Pool validation status\n     */\n    machinePoolValidationChanged(id, value) {\n      if (value === undefined) {\n        this.$delete(this.machinePoolValidation, id);\n      } else {\n        this.$set(this.machinePoolValidation, id, value);\n      }\n    },\n    handleEnabledSystemServicesChanged(val) {\n      set(this.serverConfig, 'disable', val);\n    },\n\n    handleCiliumValuesChanged(neu) {\n      if (neu === undefined) {\n        return;\n      }\n\n      const name = this.chartVersionKey('rke2-cilium');\n\n      set(this, 'userChartValues', {\n        ...this.userChartValues,\n        [name]: { ...neu }\n      });\n    },\n\n    handleCisChanged() {\n      this.handleCisChange();\n    },\n    handlePsaDefaultChanged() {\n      this.togglePsaDefault();\n    },\n    handleMachinePoolError(error) {\n      this.machinePoolErrors = merge(this.machinePoolErrors, error);\n\n      const errors = Object.entries(this.machinePoolErrors)\n        .map((x) => {\n          if (!x[1].length) {\n            return;\n          }\n\n          const formattedFields = (() => {\n            switch (x[1].length) {\n            case 1:\n              return x[1][0];\n            case 2:\n              return `${ x[1][0] } and ${ x[1][1] }`;\n            default: {\n              const [head, ...rest] = x[1];\n\n              return `${ rest.join(', ') }, and ${ head }`;\n            }\n            }\n          })();\n\n          return this.t('cluster.banner.machinePoolError', {\n            count: x[1].length, pool_name: x[0], fields: formattedFields\n          }, true);\n        })\n        .filter((x) => x);\n\n      if (!errors) {\n        return;\n      }\n\n      this.errors = errors;\n    },\n    handleS3BackupChanged(neu) {\n      this.s3Backup = neu;\n      if (neu) {\n        // We need to make sure that s3 doesn't already have an existing value otherwise when editing a cluster with s3 defined this will clear s3.\n        if (isEmpty(this.rkeConfig.etcd?.s3)) {\n          set(this.rkeConfig.etcd, 's3', {});\n        }\n      } else {\n        set(this.rkeConfig.etcd, 's3', null);\n      }\n    },\n    handleConfigEtcdExposeMetricsChanged(neu) {\n      set(this.serverConfig, 'etcd-expose-metrics', neu);\n    },\n    handleRegistryHostChanged(neu) {\n      this.registryHost = neu;\n    },\n    handleRegistrySecretChanged(neu) {\n      this.registrySecret = neu;\n    },\n    validateClusterName() {\n      if (!this.value.metadata.name && this.agentConfig?.['cloud-provider-name'] === HARVESTER) {\n        this.errors.push(this.t('validation.required', { key: this.t('cluster.name.label') }, true));\n      }\n    },\n    async validateMachinePool() {\n      if (this.errors) {\n        clear(this.errors);\n      }\n      if (this.value.cloudProvider === 'aws') {\n        const missingProfileName = this.machinePools.some((mp) => !mp.config.iamInstanceProfile);\n\n        if (missingProfileName) {\n          this.errors.push(this.t('cluster.validation.iamInstanceProfileName', {}, true));\n        }\n      }\n\n      for (const [index] of this.machinePools.entries()) { // validator machine config\n        if (typeof this.$refs.pool[index]?.test === 'function') {\n          try {\n            const res = await this.$refs.pool[index].test();\n\n            if (Array.isArray(res) && res.length > 0) {\n              this.errors.push(...res);\n            }\n          } catch (e) {\n            this.errors.push(e);\n          }\n        }\n      }\n    }\n  }\n};\n</script>\n\n<template>\n  <Loading v-if=\"$fetchState.pending && !loadedOnce\" />\n  <Banner\n    v-else-if=\"$fetchState.error\"\n    color=\"error\"\n    :label=\"$fetchState.error\"\n  />\n  <CruResource\n    v-else\n    ref=\"cruresource\"\n    :mode=\"mode\"\n    :validation-passed=\"validationPassed && fvFormIsValid\"\n    :resource=\"value\"\n    :errors=\"errors\"\n    :cancel-event=\"true\"\n    :done-route=\"doneRoute\"\n    :apply-hooks=\"applyHooks\"\n    :generate-yaml=\"generateYaml\"\n    class=\"rke2\"\n    component-testid=\"rke2-custom-create\"\n    @done=\"done\"\n    @finish=\"saveOverride\"\n    @cancel=\"cancel\"\n    @error=\"e => errors = e\"\n  >\n    <div class=\"header-warnings\">\n      <Banner\n        v-if=\"isEdit\"\n        color=\"warning\"\n        data-testid=\"edit-cluster-reprovisioning-documentation\"\n      >\n        <span v-clean-html=\"t('cluster.banner.rke2-k3-reprovisioning', {}, true)\" />\n      </Banner>\n    </div>\n    <SelectCredential\n      v-if=\"needCredential\"\n      v-model=\"credentialId\"\n      :mode=\"mode\"\n      :provider=\"provider\"\n      :cancel=\"cancelCredential\"\n      :showing-form=\"showForm\"\n      :default-on-cancel=\"true\"\n      data-testid=\"select-credential\"\n      class=\"mt-20\"\n    />\n\n    <div\n      v-if=\"showForm\"\n      data-testid=\"form\"\n      class=\"mt-20\"\n    >\n      <NameNsDescription\n        v-if=\"!isView\"\n        v-model=\"value\"\n        :mode=\"mode\"\n        :namespaced=\"needsNamespace\"\n        :namespace-options=\"allNamespaces\"\n        name-label=\"cluster.name.label\"\n        name-placeholder=\"cluster.name.placeholder\"\n        description-label=\"cluster.description.label\"\n        description-placeholder=\"cluster.description.placeholder\"\n        :rules=\"{ name: fvGetAndReportPathRules('metadata.name') }\"\n      >\n        <template\n          slot=\"customize\"\n        >\n          <ClusterAppearance\n            :name=\"clusterName\"\n            :currentCluster=\"currentCluster\"\n            :mode=\"mode\"\n          />\n        </template>\n      </NameNsDescription>\n\n      <Banner\n        v-if=\"appsOSWarning\"\n        color=\"error\"\n      >\n        {{ appsOSWarning }}\n      </Banner>\n\n      <!-- Pools Extras -->\n      <template v-if=\"hasMachinePools\">\n        <div class=\"clearfix\">\n          <h2\n            v-t=\"'cluster.tabs.machinePools'\"\n            class=\"pull-left\"\n          />\n          <div\n            v-if=\"!isView\"\n            class=\"pull-right\"\n          >\n            <BadgeState\n              v-clean-tooltip=\"nodeTotals.tooltip.etcd\"\n              :color=\"nodeTotals.color.etcd\"\n              :icon=\"nodeTotals.icon.etcd\"\n              :label=\"nodeTotals.label.etcd\"\n              class=\"mr-10\"\n            />\n            <BadgeState\n              v-clean-tooltip=\"nodeTotals.tooltip.controlPlane\"\n              :color=\"nodeTotals.color.controlPlane\"\n              :icon=\"nodeTotals.icon.controlPlane\"\n              :label=\"nodeTotals.label.controlPlane\"\n              class=\"mr-10\"\n            />\n            <BadgeState\n              v-clean-tooltip=\"nodeTotals.tooltip.worker\"\n              :color=\"nodeTotals.color.worker\"\n              :icon=\"nodeTotals.icon.worker\"\n              :label=\"nodeTotals.label.worker\"\n            />\n          </div>\n        </div>\n\n        <!-- Extra Tabs for Machine Pool -->\n        <Tabbed\n          ref=\"pools\"\n          :side-tabs=\"true\"\n          :show-tabs-add-remove=\"!isView\"\n          @addTab=\"addMachinePool($event)\"\n          @removeTab=\"removeMachinePool($event)\"\n        >\n          <template v-for=\"(obj, idx) in machinePools\">\n            <Tab\n              v-if=\"!obj.remove\"\n              :key=\"obj.id\"\n              :name=\"obj.id\"\n              :label=\"obj.pool.name || '(Not Named)'\"\n              :show-header=\"false\"\n              :error=\"!machinePoolValidation[obj.id]\"\n            >\n              <MachinePool\n                ref=\"pool\"\n                :value=\"obj\"\n                :cluster=\"value\"\n                :mode=\"mode\"\n                :provider=\"provider\"\n                :credential-id=\"credentialId\"\n                :idx=\"idx\"\n                :machine-pools=\"machinePools\"\n                :busy=\"busy\"\n                :pool-id=\"obj.id\"\n                :pool-create-mode=\"obj.create\"\n                @error=\"handleMachinePoolError\"\n                @validationChanged=\"v => machinePoolValidationChanged(obj.id, v)\"\n              />\n            </Tab>\n          </template>\n          <div v-if=\"!unremovedMachinePools.length\">\n            {{ t('cluster.machinePool.noPoolsDisclaimer') }}\n          </div>\n        </Tabbed>\n        <div class=\"spacer\" />\n      </template>\n\n      <!-- Cluster Tabs -->\n      <h2 v-t=\"'cluster.tabs.cluster'\" />\n      <Tabbed\n        :side-tabs=\"true\"\n        class=\"min-height\"\n      >\n        <Tab\n          name=\"basic\"\n          label-key=\"cluster.tabs.basic\"\n          :weight=\"11\"\n          @active=\"refreshComponentWithYamls('tab-Basics')\"\n        >\n          <!-- Basic -->\n          <Basics\n            ref=\"tab-Basics\"\n            v-model=\"value\"\n            :live-value=\"liveValue\"\n            :mode=\"mode\"\n            :provider=\"provider\"\n            :user-chart-values=\"userChartValues\"\n            :credential=\"credential\"\n            :cis-override=\"cisOverride\"\n            :all-psas=\"allPSAs\"\n            :addon-versions=\"addonVersions\"\n            :show-deprecated-patch-versions=\"showDeprecatedPatchVersions\"\n            :selected-version=\"selectedVersion\"\n            :is-harvester-driver=\"isHarvesterDriver\"\n            :is-harvester-incompatible=\"isHarvesterIncompatible\"\n            :version-options=\"versionOptions\"\n            :is-elemental-cluster=\"isElementalCluster\"\n            :have-arg-info=\"haveArgInfo\"\n            :show-cni=\"showCni\"\n            :show-cloud-provider=\"showCloudProvider\"\n            :cloud-provider-options=\"cloudProviderOptions\"\n            @cilium-values-changed=\"handleCiliumValuesChanged\"\n            @enabled-system-services-changed=\"handleEnabledSystemServicesChanged\"\n            @kubernetes-changed=\"handleKubernetesChange\"\n            @cis-changed=\"handleCisChanged\"\n            @psa-default-changed=\"handlePsaDefaultChanged\"\n            @show-deprecated-patch-versions-changed=\"handleShowDeprecatedPatchVersionsChanged\"\n          />\n        </Tab>\n\n        <!-- Member Roles -->\n        <Tab\n          v-if=\"canManageMembers\"\n          name=\"memberRoles\"\n          label-key=\"cluster.tabs.memberRoles\"\n          :weight=\"10\"\n        >\n          <MemberRoles\n            v-model=\"value\"\n            :mode=\"mode\"\n            :on-membership-update=\"onMembershipUpdate\"\n          />\n        </Tab>\n        <!-- etcd -->\n        <Tab\n          name=\"etcd\"\n          label-key=\"cluster.tabs.etcd\"\n        >\n          <Etcd\n            v-model=\"value\"\n            :mode=\"mode\"\n            :s3-backup=\"s3Backup\"\n            :register-before-hook=\"registerBeforeHook\"\n            :selected-version=\"selectedVersion\"\n            @s3-backup-changed=\"handleS3BackupChanged\"\n            @config-etcd-expose-metrics-changed=\"handleConfigEtcdExposeMetricsChanged\"\n          />\n        </Tab>\n\n        <!-- Networking -->\n        <Tab\n          v-if=\"haveArgInfo\"\n          name=\"networking\"\n          label-key=\"cluster.tabs.networking\"\n        >\n          <Networking\n            v-model=\"value\"\n            :mode=\"mode\"\n            :selected-version=\"selectedVersion\"\n            :truncate-limit=\"truncateLimit\"\n            @truncate-hostname=\"truncateHostname\"\n          />\n        </Tab>\n\n        <!-- Upgrade -->\n        <Tab\n          name=\"upgrade\"\n          label-key=\"cluster.tabs.upgrade\"\n        >\n          <Upgrade\n            v-model=\"value\"\n            :mode=\"mode\"\n          />\n        </Tab>\n\n        <!-- Registries -->\n        <Tab\n          name=\"registry\"\n          label-key=\"cluster.tabs.registry\"\n        >\n          <Registries\n            v-model=\"value\"\n            :mode=\"mode\"\n            :register-before-hook=\"registerBeforeHook\"\n            :show-custom-registry-input=\"showCustomRegistryInput\"\n            :registry-host=\"registryHost\"\n            :registry-secret=\"registrySecret\"\n            :show-custom-registry-advanced-input=\"showCustomRegistryAdvancedInput\"\n            @update-configs-changed=\"updateConfigs\"\n            @custom-registry-changed=\"toggleCustomRegistry\"\n            @registry-host-changed=\"handleRegistryHostChanged\"\n            @registry-secret-changed=\"handleRegistrySecretChanged\"\n          />\n        </Tab>\n\n        <!-- Add-on Config -->\n        <Tab\n          name=\"addons\"\n          label-key=\"cluster.tabs.addons\"\n          @active=\"showAddons('tab-addOnConfig')\"\n        >\n          <AddOnConfig\n            ref=\"tab-addOnConfig\"\n            v-model=\"value\"\n            :mode=\"mode\"\n            :version-info=\"versionInfo\"\n            :addon-versions=\"addonVersions\"\n            :addons-rev=\"addonsRev\"\n            :user-chart-values-temp=\"userChartValuesTemp\"\n            :init-yaml-editor=\"initYamlEditor\"\n            @update-questions=\"syncChartValues\"\n            @update-values=\"updateValues\"\n            @additional-manifest-changed=\"updateAdditionalManifest\"\n          />\n        </Tab>\n\n        <!-- Cluster Agent Configuration -->\n        <Tab\n          name=\"clusteragentconfig\"\n          label-key=\"cluster.agentConfig.tabs.cluster\"\n        >\n          <AgentConfiguration\n            v-if=\"value.spec.clusterAgentDeploymentCustomization\"\n            v-model=\"value.spec.clusterAgentDeploymentCustomization\"\n            data-testid=\"rke2-cluster-agent-config\"\n            type=\"cluster\"\n            :mode=\"mode\"\n          />\n        </Tab>\n\n        <!-- Fleet Agent Configuration -->\n        <Tab\n          name=\"fleetagentconfig\"\n          label-key=\"cluster.agentConfig.tabs.fleet\"\n        >\n          <AgentConfiguration\n            v-if=\"value.spec.fleetAgentDeploymentCustomization\"\n            v-model=\"value.spec.fleetAgentDeploymentCustomization\"\n            data-testid=\"rke2-fleet-agent-config\"\n            type=\"fleet\"\n            :mode=\"mode\"\n          />\n        </Tab>\n\n        <!-- Advanced -->\n        <Tab\n          v-if=\"haveArgInfo || agentArgs['protect-kernel-defaults']\"\n          name=\"advanced\"\n          label-key=\"cluster.tabs.advanced\"\n          :weight=\"-1\"\n        >\n          <Advanced\n            v-model=\"value\"\n            :mode=\"mode\"\n            :have-arg-info=\"haveArgInfo\"\n            :selected-version=\"selectedVersion\"\n          />\n        </Tab>\n\n        <AgentEnv\n          v-model=\"value\"\n          :mode=\"mode\"\n        />\n        <Labels\n          v-model=\"value\"\n          :mode=\"mode\"\n        />\n\n        <!-- Extension tabs -->\n        <Tab\n          v-for=\"tab, i in extensionTabs\"\n          :key=\"`${tab.name}${i}`\"\n          :name=\"tab.name\"\n          :label=\"tab.label\"\n          :label-key=\"tab.labelKey\"\n          :weight=\"tab.weight\"\n          :tooltip=\"tab.tooltip\"\n          :show-header=\"tab.showHeader\"\n          :display-alert-icon=\"tab.displayAlertIcon\"\n          :error=\"tab.error\"\n          :badge=\"tab.badge\"\n        >\n          <component\n            :is=\"tab.component\"\n            :resource=\"value\"\n          />\n        </Tab>\n      </Tabbed>\n    </div>\n\n    <Banner\n      v-if=\"unsupportedSelectorConfig\"\n      color=\"warning\"\n      :label=\"t('cluster.banner.warning')\"\n    />\n\n    <template\n      v-if=\"needCredential && !credentialId\"\n      #form-footer\n    >\n      <div><!-- Hide the outer footer --></div>\n    </template>\n  </CruResource>\n</template>\n\n<style lang=\"scss\" scoped>\n.min-height {\n  min-height: 40em;\n}\n\n.patch-version {\n  margin-top: 5px;\n}\n\n.header-warnings .banner {\n  margin-bottom: 0;\n}\n</style>\n"],"mappings":"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","ignoreList":[]}]}