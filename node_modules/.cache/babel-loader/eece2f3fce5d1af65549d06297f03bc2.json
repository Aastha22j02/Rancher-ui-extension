{"remainingRequest":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js??ref--16-1!/home/ubuntu/suseconf/node_modules/@rancher/shell/utils/gatekeeper/util.js","dependencies":[{"path":"/home/ubuntu/suseconf/node_modules/@rancher/shell/utils/gatekeeper/util.js","mtime":1725338146566},{"path":"/home/ubuntu/suseconf/babel.config.js","mtime":1725343995893},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js","mtime":1725271298942}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgX3JlZ2VuZXJhdG9yUnVudGltZSBmcm9tICIvaG9tZS91YnVudHUvc3VzZWNvbmYvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL3JlZ2VuZXJhdG9yL2luZGV4LmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maW5kLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmxhdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkudW5zY29wYWJsZXMuZmxhdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5wcm9taXNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvci5qcyI7CmltcG9ydCB7IEdBVEVLRUVQRVIsIFNDSEVNQSB9IGZyb20gJ0BzaGVsbC9jb25maWcvdHlwZXMnOwpleHBvcnQgZnVuY3Rpb24gZmluZEFsbENvbnN0cmFpbnRzKF94KSB7CiAgcmV0dXJuIF9maW5kQWxsQ29uc3RyYWludHMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQpmdW5jdGlvbiBfZmluZEFsbENvbnN0cmFpbnRzKCkgewogIF9maW5kQWxsQ29uc3RyYWludHMgPSBfYXN5bmNUb0dlbmVyYXRvcigvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoc3RvcmUpIHsKICAgIHZhciBjb25zdHJhaW50VHlwZXMsIG5lc3RlZENvbnN0cmFpbnRzOwogICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgIGNhc2UgMDoKICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgcmV0dXJuIGZpbmRBbGxDb25zdHJhaW50VHlwZXMoc3RvcmUpOwogICAgICAgIGNhc2UgMjoKICAgICAgICAgIGNvbnN0cmFpbnRUeXBlcyA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICBuZXN0ZWRDb25zdHJhaW50cyA9IGNvbnN0cmFpbnRUeXBlcy5tYXAoZnVuY3Rpb24gKGN0KSB7CiAgICAgICAgICAgIHJldHVybiBzdG9yZS5kaXNwYXRjaCgnY2x1c3Rlci9maW5kQWxsJywgewogICAgICAgICAgICAgIHR5cGU6IGN0LAogICAgICAgICAgICAgIG9wdDogewogICAgICAgICAgICAgICAgZm9yY2U6IHRydWUKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNjsKICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChuZXN0ZWRDb25zdHJhaW50cyk7CiAgICAgICAgY2FzZSA2OgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQuc2VudC5mbGF0KCkpOwogICAgICAgIGNhc2UgNzoKICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgfQogICAgfSwgX2NhbGxlZSk7CiAgfSkpOwogIHJldHVybiBfZmluZEFsbENvbnN0cmFpbnRzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KZXhwb3J0IGZ1bmN0aW9uIGZpbmRBbGxDb25zdHJhaW50VHlwZXMoc3RvcmUpIHsKICB2YXIgc2NoZW1hcyA9IHN0b3JlLmdldHRlcnNbJ2NsdXN0ZXIvYWxsJ10oU0NIRU1BKTsKICByZXR1cm4gZmluZENvbnN0cmFpbnRUeXBlcyhzY2hlbWFzKTsKfQpleHBvcnQgZnVuY3Rpb24gZmluZEFsbFRlbXBsYXRlcyhzdG9yZSkgewogIHJldHVybiBzdG9yZS5kaXNwYXRjaCgnY2x1c3Rlci9maW5kQWxsJywgewogICAgdHlwZTogR0FURUtFRVBFUi5DT05TVFJBSU5UX1RFTVBMQVRFCiAgfSk7Cn0KZXhwb3J0IGZ1bmN0aW9uIGZpbmRUZW1wbGF0ZVR5cGUoc2NoZW1hcykgewogIC8vIEBUT0RPIHRoaXMgd2lsbCBqdXN0IGJlIGEgcmVndWxhciBzaW5nbGUgdHlwZSBub3cgdGhhdCB0aGUgc2VydmVyIGZpbHRlcnMgdG8gcHJlZmVycmVkIHZlcnNpb24KICAvLyBzbyB5b3UgY2FuIGp1c3QgYWRkIHRlbXBsYXRlcy5nYXRla2VlcGVyLnNoLmNvbnN0cmFpbnR0ZW1wbGF0ZSBhcyBhIGNvbnN0YW50IGluIHR5cGVzLmpzCiAgdmFyIHRlbXBsYXRlID0gc2NoZW1hcy5maW5kKGZ1bmN0aW9uIChzY2hlbWEpIHsKICAgIHZhciBfc2NoZW1hJGF0dHJpYnV0ZXMsIF9zY2hlbWEkYXR0cmlidXRlczI7CiAgICByZXR1cm4gKHNjaGVtYSA9PT0gbnVsbCB8fCBzY2hlbWEgPT09IHZvaWQgMCB8fCAoX3NjaGVtYSRhdHRyaWJ1dGVzID0gc2NoZW1hLmF0dHJpYnV0ZXMpID09PSBudWxsIHx8IF9zY2hlbWEkYXR0cmlidXRlcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3NjaGVtYSRhdHRyaWJ1dGVzLmdyb3VwKSA9PT0gJ3RlbXBsYXRlcy5nYXRla2VlcGVyLnNoJyAmJiAoc2NoZW1hID09PSBudWxsIHx8IHNjaGVtYSA9PT0gdm9pZCAwIHx8IChfc2NoZW1hJGF0dHJpYnV0ZXMyID0gc2NoZW1hLmF0dHJpYnV0ZXMpID09PSBudWxsIHx8IF9zY2hlbWEkYXR0cmlidXRlczIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9zY2hlbWEkYXR0cmlidXRlczIua2luZCkgPT09ICdDb25zdHJhaW50VGVtcGxhdGUnOwogIH0pOwogIHJldHVybiB0ZW1wbGF0ZSA9PT0gbnVsbCB8fCB0ZW1wbGF0ZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogdGVtcGxhdGUuaWQ7Cn0KZnVuY3Rpb24gZmluZENvbnN0cmFpbnRUeXBlcyhzY2hlbWFzKSB7CiAgcmV0dXJuIHNjaGVtYXMuZmlsdGVyKGZ1bmN0aW9uIChzY2hlbWEpIHsKICAgIHZhciBfc2NoZW1hJGF0dHJpYnV0ZXMzOwogICAgcmV0dXJuIChzY2hlbWEgPT09IG51bGwgfHwgc2NoZW1hID09PSB2b2lkIDAgfHwgKF9zY2hlbWEkYXR0cmlidXRlczMgPSBzY2hlbWEuYXR0cmlidXRlcykgPT09IG51bGwgfHwgX3NjaGVtYSRhdHRyaWJ1dGVzMyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3NjaGVtYSRhdHRyaWJ1dGVzMy5ncm91cCkgPT09ICdjb25zdHJhaW50cy5nYXRla2VlcGVyLnNoJzsKICB9KS5tYXAoZnVuY3Rpb24gKHNjaGVtYSkgewogICAgcmV0dXJuIHNjaGVtYS5pZDsKICB9KTsKfQ=="},{"version":3,"names":["GATEKEEPER","SCHEMA","findAllConstraints","_x","_findAllConstraints","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","store","constraintTypes","nestedConstraints","wrap","_callee$","_context","prev","next","findAllConstraintTypes","sent","map","ct","dispatch","type","opt","force","Promise","all","abrupt","flat","stop","schemas","getters","findConstraintTypes","findAllTemplates","CONSTRAINT_TEMPLATE","findTemplateType","template","find","schema","_schema$attributes","_schema$attributes2","attributes","group","kind","id","filter","_schema$attributes3"],"sources":["/home/ubuntu/suseconf/node_modules/@rancher/shell/utils/gatekeeper/util.js"],"sourcesContent":["import { GATEKEEPER, SCHEMA } from '@shell/config/types';\n\nexport async function findAllConstraints(store) {\n  const constraintTypes = await findAllConstraintTypes(store);\n  const nestedConstraints = constraintTypes.map((ct) => store.dispatch('cluster/findAll', { type: ct, opt: { force: true } }));\n\n  return (await Promise.all(nestedConstraints)).flat();\n}\n\nexport function findAllConstraintTypes(store) {\n  const schemas = store.getters['cluster/all'](SCHEMA);\n\n  return findConstraintTypes(schemas);\n}\n\nexport function findAllTemplates(store) {\n  return store.dispatch('cluster/findAll', { type: GATEKEEPER.CONSTRAINT_TEMPLATE });\n}\n\nexport function findTemplateType(schemas) {\n  // @TODO this will just be a regular single type now that the server filters to preferred version\n  // so you can just add templates.gatekeeper.sh.constrainttemplate as a constant in types.js\n  const template = schemas.find((schema) => {\n    return schema?.attributes?.group === 'templates.gatekeeper.sh' &&\n        schema?.attributes?.kind === 'ConstraintTemplate';\n  });\n\n  return template?.id;\n}\n\nfunction findConstraintTypes(schemas) {\n  return schemas\n    .filter((schema) => schema?.attributes?.group === 'constraints.gatekeeper.sh')\n    .map((schema) => schema.id);\n}\n"],"mappings":";;;;;;;;;;;;;AAAA,SAASA,UAAU,EAAEC,MAAM,QAAQ,qBAAqB;AAExD,gBAAsBC,kBAAkBA,CAAAC,EAAA;EAAA,OAAAC,mBAAA,CAAAC,KAAA,OAAAC,SAAA;AAAA;AAKvC,SAAAF,oBAAA;EAAAA,mBAAA,GAAAG,iBAAA,cAAAC,mBAAA,CAAAC,IAAA,CALM,SAAAC,QAAkCC,KAAK;IAAA,IAAAC,eAAA,EAAAC,iBAAA;IAAA,OAAAL,mBAAA,CAAAM,IAAA,UAAAC,SAAAC,QAAA;MAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;QAAA;UAAAF,QAAA,CAAAE,IAAA;UAAA,OACdC,sBAAsB,CAACR,KAAK,CAAC;QAAA;UAArDC,eAAe,GAAAI,QAAA,CAAAI,IAAA;UACfP,iBAAiB,GAAGD,eAAe,CAACS,GAAG,CAAC,UAACC,EAAE;YAAA,OAAKX,KAAK,CAACY,QAAQ,CAAC,iBAAiB,EAAE;cAAEC,IAAI,EAAEF,EAAE;cAAEG,GAAG,EAAE;gBAAEC,KAAK,EAAE;cAAK;YAAE,CAAC,CAAC;UAAA,EAAC;UAAAV,QAAA,CAAAE,IAAA;UAAA,OAE9GS,OAAO,CAACC,GAAG,CAACf,iBAAiB,CAAC;QAAA;UAAA,OAAAG,QAAA,CAAAa,MAAA,WAAAb,QAAA,CAAAI,IAAA,CAAEU,IAAI;QAAA;QAAA;UAAA,OAAAd,QAAA,CAAAe,IAAA;MAAA;IAAA,GAAArB,OAAA;EAAA,CACnD;EAAA,OAAAN,mBAAA,CAAAC,KAAA,OAAAC,SAAA;AAAA;AAED,OAAO,SAASa,sBAAsBA,CAACR,KAAK,EAAE;EAC5C,IAAMqB,OAAO,GAAGrB,KAAK,CAACsB,OAAO,CAAC,aAAa,CAAC,CAAChC,MAAM,CAAC;EAEpD,OAAOiC,mBAAmB,CAACF,OAAO,CAAC;AACrC;AAEA,OAAO,SAASG,gBAAgBA,CAACxB,KAAK,EAAE;EACtC,OAAOA,KAAK,CAACY,QAAQ,CAAC,iBAAiB,EAAE;IAAEC,IAAI,EAAExB,UAAU,CAACoC;EAAoB,CAAC,CAAC;AACpF;AAEA,OAAO,SAASC,gBAAgBA,CAACL,OAAO,EAAE;EACxC;EACA;EACA,IAAMM,QAAQ,GAAGN,OAAO,CAACO,IAAI,CAAC,UAACC,MAAM,EAAK;IAAA,IAAAC,kBAAA,EAAAC,mBAAA;IACxC,OAAO,CAAAF,MAAM,aAANA,MAAM,gBAAAC,kBAAA,GAAND,MAAM,CAAEG,UAAU,cAAAF,kBAAA,uBAAlBA,kBAAA,CAAoBG,KAAK,MAAK,yBAAyB,IAC1D,CAAAJ,MAAM,aAANA,MAAM,gBAAAE,mBAAA,GAANF,MAAM,CAAEG,UAAU,cAAAD,mBAAA,uBAAlBA,mBAAA,CAAoBG,IAAI,MAAK,oBAAoB;EACvD,CAAC,CAAC;EAEF,OAAOP,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAAEQ,EAAE;AACrB;AAEA,SAASZ,mBAAmBA,CAACF,OAAO,EAAE;EACpC,OAAOA,OAAO,CACXe,MAAM,CAAC,UAACP,MAAM;IAAA,IAAAQ,mBAAA;IAAA,OAAK,CAAAR,MAAM,aAANA,MAAM,gBAAAQ,mBAAA,GAANR,MAAM,CAAEG,UAAU,cAAAK,mBAAA,uBAAlBA,mBAAA,CAAoBJ,KAAK,MAAK,2BAA2B;EAAA,EAAC,CAC7EvB,GAAG,CAAC,UAACmB,MAAM;IAAA,OAAKA,MAAM,CAACM,EAAE;EAAA,EAAC;AAC/B","ignoreList":[]}]}