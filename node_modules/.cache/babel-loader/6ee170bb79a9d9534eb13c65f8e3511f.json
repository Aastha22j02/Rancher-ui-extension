{"remainingRequest":"/home/ubuntu/susecon-2024-ext-demo/node_modules/babel-loader/lib/index.js??ref--16-1!/home/ubuntu/susecon-2024-ext-demo/node_modules/cache-loader/dist/cjs.js??ref--17-0!/home/ubuntu/susecon-2024-ext-demo/node_modules/ts-loader/index.js??ref--17-1!/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/edit/__tests__/service.test.ts","dependencies":[{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/edit/__tests__/service.test.ts","mtime":1725271280091},{"path":"/home/ubuntu/susecon-2024-ext-demo/babel.config.js","mtime":1725268750245},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/babel-loader/lib/index.js","mtime":1725271298942},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/ts-loader/index.js","mtime":1725271299135}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnByb21pc2UuanMiOwppbXBvcnQgeyBzaGFsbG93TW91bnQgfSBmcm9tICdAdnVlL3Rlc3QtdXRpbHMnOwppbXBvcnQgeyBfQ0xPTkUgfSBmcm9tICdAc2hlbGwvY29uZmlnL3F1ZXJ5LXBhcmFtcyc7CmltcG9ydCB7IGNsZWFuSHRtbERpcmVjdGl2ZSB9IGZyb20gJ0BzaGVsbC9wbHVnaW5zL2NsZWFuLWh0bWwtZGlyZWN0aXZlJzsKaW1wb3J0IFNlcnZpY2VQYWdlIGZyb20gJ0BzaGVsbC9lZGl0L3NlcnZpY2UudnVlJzsKdmFyIGNyZWF0ZUVkaXRWaWV3TW9jayA9IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZXJyb3JzOiBbXQogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBpc0NyZWF0ZTogZnVuY3Rpb24gaXNDcmVhdGUoKSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0sCiAgICBpc0VkaXQ6IGZ1bmN0aW9uIGlzRWRpdCgpIHsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9LAogICAgaXNWaWV3OiBmdW5jdGlvbiBpc1ZpZXcoKSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0sCiAgICBzY2hlbWE6IGZ1bmN0aW9uIHNjaGVtYSgpIHsKICAgICAgcmV0dXJuIHt9OwogICAgfSwKICAgIGlzTmFtZXNwYWNlZDogZnVuY3Rpb24gaXNOYW1lc3BhY2VkKCkgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9LAogICAgbGFiZWxzOiB7CiAgICAgIGdldDogamVzdC5mbihmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHt9OwogICAgICB9KSwKICAgICAgc2V0OiBqZXN0LmZuKCkKICAgIH0sCiAgICBhbm5vdGF0aW9uczogewogICAgICBnZXQ6IGplc3QuZm4oZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB7fTsKICAgICAgfSksCiAgICAgIHNldDogamVzdC5mbigpCiAgICB9LAogICAgZG9uZVJvdXRlOiBmdW5jdGlvbiBkb25lUm91dGUoKSB7CiAgICAgIHJldHVybiAnbW9ja2VkUm91dGUnOwogICAgfSwKICAgIGRvbmVQYXJhbXM6IGZ1bmN0aW9uIGRvbmVQYXJhbXMoKSB7CiAgICAgIHJldHVybiB7fTsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGRvbmU6IGplc3QuZm4oKSwKICAgIGNvbmZsaWN0OiBqZXN0LmZuKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShbXSk7CiAgICB9KSwKICAgIHNhdmU6IGplc3QuZm4oZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7CiAgICB9KSwKICAgIGFjdHVhbGx5U2F2ZTogamVzdC5mbihmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTsKICAgIH0pLAogICAgc2V0RXJyb3JzOiBqZXN0LmZuKCkKICB9Cn07CnZhciBmb3JtVmFsaWRhdGlvbk1vY2sgPSB7fTsKZGVzY3JpYmUoJ3NlcnZpY2UgZWRpdCcsIGZ1bmN0aW9uICgpIHsKICB2YXIgd3JhcHBlcjsKICB2YXIgY3JlYXRlQ29tcG9uZW50ID0gZnVuY3Rpb24gY3JlYXRlQ29tcG9uZW50KHByb3BzRGF0YSkgewogICAgd3JhcHBlciA9IHNoYWxsb3dNb3VudChTZXJ2aWNlUGFnZSwgewogICAgICBwcm9wc0RhdGE6IHByb3BzRGF0YSwKICAgICAgbWl4aW5zOiBbY3JlYXRlRWRpdFZpZXdNb2NrLCBmb3JtVmFsaWRhdGlvbk1vY2tdLAogICAgICBtb2NrczogewogICAgICAgICRzdG9yZTogewogICAgICAgICAgZ2V0dGVyczogewogICAgICAgICAgICAnbWFuYWdlbWVudC9hbGwnOiBqZXN0LmZuKCksCiAgICAgICAgICAgICdpMThuL3QnOiBqZXN0LmZuKCkKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sCiAgICAgIGNvbXB1dGVkOiB7CiAgICAgICAgcHJvdmlzaW9uaW5nQ2x1c3RlcjogamVzdC5mbigpCiAgICAgIH0sCiAgICAgIGRpcmVjdGl2ZXM6IHsKICAgICAgICBjbGVhbkh0bWxEaXJlY3RpdmU6IGNsZWFuSHRtbERpcmVjdGl2ZQogICAgICB9CiAgICB9KTsKICB9OwogIGl0KCdzZXRzIGNsdXN0ZXJJUCB0byBhbiBlbXB0eSBzdHJpbmcgYW5kIGRlbGV0ZXMgY2x1c3RlcklQcyB3aGVuIGluIGNsb25lIG1vZGUnLCBmdW5jdGlvbiAoKSB7CiAgICB2YXIgdmFsdWUgPSB7CiAgICAgIHNwZWM6IHsKICAgICAgICBjbHVzdGVySVA6ICcxMC40My4xLjEnLAogICAgICAgIGNsdXN0ZXJJUHM6IFsnMTAuNDMuMS4xJywgJzEwLjQzLjEuMiddCiAgICAgIH0KICAgIH07CiAgICBjcmVhdGVDb21wb25lbnQoewogICAgICByZWFsTW9kZTogX0NMT05FLAogICAgICB2YWx1ZTogdmFsdWUKICAgIH0pOwogICAgZXhwZWN0KHdyYXBwZXIudm0udmFsdWUuc3BlYy5jbHVzdGVySVApLnRvQmUoJycpOwogICAgZXhwZWN0KHdyYXBwZXIudm0udmFsdWUuc3BlYy5jbHVzdGVySVBzKS50b0JlVW5kZWZpbmVkKCk7CiAgfSk7CiAgaXQoJ2RvZXMgbm90IGNoYW5nZSBjbHVzdGVySVAgYW5kIGNsdXN0ZXJJUHMgd2hlbiBub3QgaW4gY2xvbmUgbW9kZScsIGZ1bmN0aW9uICgpIHsKICAgIHZhciB2YWx1ZSA9IHsKICAgICAgc3BlYzogewogICAgICAgIGNsdXN0ZXJJUDogJzEwLjQzLjEuMScsCiAgICAgICAgY2x1c3RlcklQczogWycxMC40My4xLjEnLCAnMTAuNDMuMS4yJ10KICAgICAgfQogICAgfTsKICAgIGNyZWF0ZUNvbXBvbmVudCh7CiAgICAgIHJlYWxNb2RlOiAnc29tZU90aGVyTW9kZScsCiAgICAgIHZhbHVlOiB2YWx1ZQogICAgfSk7CiAgICBleHBlY3Qod3JhcHBlci52bS52YWx1ZS5zcGVjLmNsdXN0ZXJJUCkudG9CZSgnMTAuNDMuMS4xJyk7CiAgICBleHBlY3Qod3JhcHBlci52bS52YWx1ZS5zcGVjLmNsdXN0ZXJJUHMpLnRvU3RyaWN0RXF1YWwoWycxMC40My4xLjEnLCAnMTAuNDMuMS4yJ10pOwogIH0pOwp9KTs="},{"version":3,"names":["shallowMount","_CLONE","cleanHtmlDirective","ServicePage","createEditViewMock","data","errors","computed","isCreate","isEdit","isView","schema","isNamespaced","labels","get","jest","fn","set","annotations","doneRoute","doneParams","methods","done","conflict","Promise","resolve","save","actuallySave","setErrors","formValidationMock","describe","wrapper","createComponent","propsData","mixins","mocks","$store","getters","provisioningCluster","directives","it","value","spec","clusterIP","clusterIPs","realMode","expect","vm","toBe","toBeUndefined","toStrictEqual"],"sources":["/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/edit/__tests__/service.test.ts"],"sourcesContent":["import { shallowMount, Wrapper } from '@vue/test-utils';\n\nimport { _CLONE } from '@shell/config/query-params';\nimport { cleanHtmlDirective } from '@shell/plugins/clean-html-directive';\n\nimport ServicePage from '@shell/edit/service.vue';\n\nconst createEditViewMock = {\n  data() {\n    return { errors: [] };\n  },\n  computed: {\n    isCreate:     () => false,\n    isEdit:       () => true,\n    isView:       () => false,\n    schema:       () => ({}),\n    isNamespaced: () => false,\n    labels:       {\n      get: jest.fn(() => ({})),\n      set: jest.fn(),\n    },\n    annotations: {\n      get: jest.fn(() => ({})),\n      set: jest.fn(),\n    },\n    doneRoute:  () => 'mockedRoute',\n    doneParams: () => ({}),\n  },\n  methods: {\n    done:         jest.fn(),\n    conflict:     jest.fn(() => Promise.resolve([])),\n    save:         jest.fn(() => Promise.resolve()),\n    actuallySave: jest.fn(() => Promise.resolve()),\n    setErrors:    jest.fn()\n  }\n};\n\nconst formValidationMock = {};\n\ndescribe('service edit', () => {\n  let wrapper: Wrapper<InstanceType<typeof ServicePage>>;\n\n  const createComponent = (propsData: any) => {\n    wrapper = shallowMount(ServicePage,\n      {\n        propsData,\n        mixins: [createEditViewMock, formValidationMock],\n        mocks:  {\n          $store: {\n            getters: {\n              'management/all': jest.fn(),\n              'i18n/t':         jest.fn()\n            }\n          }\n        },\n        computed:   { provisioningCluster: jest.fn() },\n        directives: { cleanHtmlDirective },\n      }\n    );\n  };\n\n  it('sets clusterIP to an empty string and deletes clusterIPs when in clone mode', () => {\n    const value = {\n      spec: {\n        clusterIP:  '10.43.1.1',\n        clusterIPs: ['10.43.1.1', '10.43.1.2'],\n      }\n    };\n\n    createComponent({ realMode: _CLONE, value });\n\n    expect(wrapper.vm.value.spec.clusterIP).toBe('');\n    expect(wrapper.vm.value.spec.clusterIPs).toBeUndefined();\n  });\n\n  it('does not change clusterIP and clusterIPs when not in clone mode', () => {\n    const value = {\n      spec: {\n        clusterIP:  '10.43.1.1',\n        clusterIPs: ['10.43.1.1', '10.43.1.2'],\n      }\n    };\n\n    createComponent({ realMode: 'someOtherMode', value });\n\n    expect(wrapper.vm.value.spec.clusterIP).toBe('10.43.1.1');\n    expect(wrapper.vm.value.spec.clusterIPs).toStrictEqual(['10.43.1.1', '10.43.1.2']);\n  });\n});\n"],"mappings":"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","ignoreList":[]}]}