{"remainingRequest":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js??ref--16-1!/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/ubuntu/suseconf/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ubuntu/suseconf/node_modules/@rancher/shell/edit/storage.k8s.io.storageclass/provisioners/driver.harvesterhci.io.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/ubuntu/suseconf/node_modules/@rancher/shell/edit/storage.k8s.io.storageclass/provisioners/driver.harvesterhci.io.vue","mtime":1725338146566},{"path":"/home/ubuntu/suseconf/babel.config.js","mtime":1725343995893},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js","mtime":1725271298942},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1725271300920}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3JzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNsaWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmFzc2lnbi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuZW5kcy13aXRoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnN0YXJ0cy13aXRoLmpzIjsKZnVuY3Rpb24gb3duS2V5cyhlLCByKSB7IHZhciB0ID0gT2JqZWN0LmtleXMoZSk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBvID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKTsgciAmJiAobyA9IG8uZmlsdGVyKGZ1bmN0aW9uIChyKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsIHIpLmVudW1lcmFibGU7IH0pKSwgdC5wdXNoLmFwcGx5KHQsIG8pOyB9IHJldHVybiB0OyB9CmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQoZSkgeyBmb3IgKHZhciByID0gMTsgciA8IGFyZ3VtZW50cy5sZW5ndGg7IHIrKykgeyB2YXIgdCA9IG51bGwgIT0gYXJndW1lbnRzW3JdID8gYXJndW1lbnRzW3JdIDoge307IHIgJSAyID8gb3duS2V5cyhPYmplY3QodCksICEwKS5mb3JFYWNoKGZ1bmN0aW9uIChyKSB7IF9kZWZpbmVQcm9wZXJ0eShlLCByLCB0W3JdKTsgfSkgOiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGUsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHQpKSA6IG93bktleXMoT2JqZWN0KHQpKS5mb3JFYWNoKGZ1bmN0aW9uIChyKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCByLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsIHIpKTsgfSk7IH0gcmV0dXJuIGU7IH0KaW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiL2hvbWUvdWJ1bnR1L3N1c2Vjb25mL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9yZWdlbmVyYXRvci9pbmRleC5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0IHsgbWFwR2V0dGVycyB9IGZyb20gJ3Z1ZXgnOwppbXBvcnQgc2VtdmVyIGZyb20gJ3NlbXZlcic7CmltcG9ydCB7IExhYmVsZWRJbnB1dCB9IGZyb20gJ0Bjb21wb25lbnRzL0Zvcm0vTGFiZWxlZElucHV0JzsKaW1wb3J0IEJhbm5lciBmcm9tICdAY29tcG9uZW50cy9CYW5uZXIvQmFubmVyLnZ1ZSc7CmltcG9ydCBLZXlWYWx1ZSBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9mb3JtL0tleVZhbHVlJzsKaW1wb3J0IHsgY2xvbmUgfSBmcm9tICdAc2hlbGwvdXRpbHMvb2JqZWN0JzsKaW1wb3J0IHsgYWxsSGFzaCB9IGZyb20gJ0BzaGVsbC91dGlscy9wcm9taXNlJzsKdmFyIERFRkFVTFRfUEFSQU1FVEVSUyA9IFsnaG9zdFN0b3JhZ2VDbGFzcyddOwpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgTGFiZWxlZElucHV0OiBMYWJlbGVkSW5wdXQsCiAgICBCYW5uZXI6IEJhbm5lciwKICAgIEtleVZhbHVlOiBLZXlWYWx1ZQogIH0sCiAgcHJvcHM6IHsKICAgIHZhbHVlOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0sCiAgICBtb2RlOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0KICB9LAogIGZldGNoOiBmdW5jdGlvbiBmZXRjaCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICB2YXIgcmVzOwogICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgIHJldHVybiBhbGxIYXNoKHsKICAgICAgICAgICAgICBya2UyVmVyc2lvbnM6IF90aGlzLiRzdG9yZS5kaXNwYXRjaCgnbWFuYWdlbWVudC9yZXF1ZXN0JywgewogICAgICAgICAgICAgICAgdXJsOiAnL3YxLXJrZTItcmVsZWFzZS9yZWxlYXNlcycKICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9KTsKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgcmVzID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgX3RoaXMucmtlMlZlcnNpb25zID0gcmVzLnJrZTJWZXJzaW9uczsKICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlKTsKICAgIH0pKSgpOwogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHJrZTJWZXJzaW9uczoge30KICAgIH07CiAgfSwKICBjb21wdXRlZDogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBtYXBHZXR0ZXJzKFsnY3VycmVudENsdXN0ZXInXSkpLCB7fSwgewogICAgaXNTYXRpc2ZpZXNWZXJzaW9uOiBmdW5jdGlvbiBpc1NhdGlzZmllc1ZlcnNpb24oKSB7CiAgICAgIHZhciBrdWJlcm5ldGVzVmVyc2lvbiA9IHRoaXMuY3VycmVudENsdXN0ZXIua3ViZXJuZXRlc1ZlcnNpb24gfHwgJyc7CiAgICAgIHZhciBrdWJlcm5ldGVzVmVyc2lvbkV4dGVuc2lvbiA9IHRoaXMuY3VycmVudENsdXN0ZXIua3ViZXJuZXRlc1ZlcnNpb25FeHRlbnNpb247CiAgICAgIGlmIChrdWJlcm5ldGVzVmVyc2lvbkV4dGVuc2lvbi5zdGFydHNXaXRoKCcrcmtlMicpKSB7CiAgICAgICAgdmFyIF90aGlzJHJrZTJWZXJzaW9ucywgX2NoYXJ0cyRoYXJ2ZXN0ZXJDc2k7CiAgICAgICAgdmFyIGNoYXJ0cyA9ICgoKChfdGhpcyRya2UyVmVyc2lvbnMgPSB0aGlzLnJrZTJWZXJzaW9ucykgPT09IG51bGwgfHwgX3RoaXMkcmtlMlZlcnNpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRya2UyVmVyc2lvbnMuZGF0YSkgfHwgW10pLmZpbmQoZnVuY3Rpb24gKHYpIHsKICAgICAgICAgIHJldHVybiB2LmlkID09PSBrdWJlcm5ldGVzVmVyc2lvbjsKICAgICAgICB9KSB8fCB7fSkuY2hhcnRzOwogICAgICAgIHZhciBjc2lWZXJzaW9uID0gKGNoYXJ0cyA9PT0gbnVsbCB8fCBjaGFydHMgPT09IHZvaWQgMCB8fCAoX2NoYXJ0cyRoYXJ2ZXN0ZXJDc2kgPSBjaGFydHNbJ2hhcnZlc3Rlci1jc2ktZHJpdmVyJ10pID09PSBudWxsIHx8IF9jaGFydHMkaGFydmVzdGVyQ3NpID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfY2hhcnRzJGhhcnZlc3RlckNzaS52ZXJzaW9uKSB8fCAnJzsKICAgICAgICBpZiAoY3NpVmVyc2lvbi5lbmRzV2l0aCgnMDAnKSkgewogICAgICAgICAgY3NpVmVyc2lvbiA9IGNzaVZlcnNpb24uc2xpY2UoMCwgLTIpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gc2VtdmVyLnNhdGlzZmllcyhjc2lWZXJzaW9uLCAnPj0wLjEuMTUnKTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQogICAgfSwKICAgIHBhcmFtZXRlcnM6IHsKICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgICAgdmFyIF90aGlzJHZhbHVlOwogICAgICAgIHZhciBwYXJhbWV0ZXJzID0gY2xvbmUoKF90aGlzJHZhbHVlID0gdGhpcy52YWx1ZSkgPT09IG51bGwgfHwgX3RoaXMkdmFsdWUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJHZhbHVlLnBhcmFtZXRlcnMpIHx8IHt9OwogICAgICAgIERFRkFVTFRfUEFSQU1FVEVSUy5tYXAoZnVuY3Rpb24gKGtleSkgewogICAgICAgICAgZGVsZXRlIHBhcmFtZXRlcnNba2V5XTsKICAgICAgICB9KTsKICAgICAgICByZXR1cm4gcGFyYW1ldGVyczsKICAgICAgfSwKICAgICAgc2V0OiBmdW5jdGlvbiBzZXQodmFsdWUpIHsKICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMudmFsdWUucGFyYW1ldGVycywgdmFsdWUpOwogICAgICB9CiAgICB9CiAgfSkKfTs="},{"version":3,"names":["mapGetters","semver","LabeledInput","Banner","KeyValue","clone","allHash","DEFAULT_PARAMETERS","components","props","value","type","Object","required","mode","String","fetch","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","res","wrap","_callee$","_context","prev","next","rke2Versions","$store","dispatch","url","sent","stop","data","computed","_objectSpread","isSatisfiesVersion","kubernetesVersion","currentCluster","kubernetesVersionExtension","startsWith","_this$rke2Versions","_charts$harvesterCsi","charts","find","v","id","csiVersion","version","endsWith","slice","satisfies","parameters","get","_this$value","map","key","set","assign"],"sources":["node_modules/@rancher/shell/edit/storage.k8s.io.storageclass/provisioners/driver.harvesterhci.io.vue"],"sourcesContent":["<script>\r\nimport { mapGetters } from 'vuex';\r\nimport semver from 'semver';\r\n\r\nimport { LabeledInput } from '@components/Form/LabeledInput';\r\nimport Banner from '@components/Banner/Banner.vue';\r\nimport KeyValue from '@shell/components/form/KeyValue';\r\n\r\nimport { clone } from '@shell/utils/object';\r\nimport { allHash } from '@shell/utils/promise';\r\n\r\nconst DEFAULT_PARAMETERS = [\r\n  'hostStorageClass',\r\n];\r\n\r\nexport default {\r\n  components: {\r\n    LabeledInput,\r\n    Banner,\r\n    KeyValue,\r\n  },\r\n\r\n  props: {\r\n    value: {\r\n      type:     Object,\r\n      required: true\r\n    },\r\n    mode: {\r\n      type:     String,\r\n      required: true\r\n    }\r\n  },\r\n\r\n  async fetch() {\r\n    const res = await allHash({ rke2Versions: this.$store.dispatch('management/request', { url: '/v1-rke2-release/releases' }) });\r\n\r\n    this.rke2Versions = res.rke2Versions;\r\n  },\r\n\r\n  data() {\r\n    return { rke2Versions: {} };\r\n  },\r\n\r\n  computed: {\r\n    ...mapGetters(['currentCluster']),\r\n\r\n    isSatisfiesVersion() {\r\n      const kubernetesVersion = this.currentCluster.kubernetesVersion || '';\r\n      const kubernetesVersionExtension = this.currentCluster.kubernetesVersionExtension;\r\n\r\n      if (kubernetesVersionExtension.startsWith('+rke2')) {\r\n        const charts = ((this.rke2Versions?.data || []).find((v) => v.id === kubernetesVersion) || {}).charts;\r\n        let csiVersion = charts?.['harvester-csi-driver']?.version || '';\r\n\r\n        if (csiVersion.endsWith('00')) {\r\n          csiVersion = csiVersion.slice(0, -2);\r\n        }\r\n\r\n        return semver.satisfies(csiVersion, '>=0.1.15');\r\n      } else {\r\n        return true;\r\n      }\r\n    },\r\n\r\n    parameters: {\r\n      get() {\r\n        const parameters = clone(this.value?.parameters) || {};\r\n\r\n        DEFAULT_PARAMETERS.map((key) => {\r\n          delete parameters[key];\r\n        });\r\n\r\n        return parameters;\r\n      },\r\n\r\n      set(value) {\r\n        Object.assign(this.value.parameters, value);\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<template>\r\n  <div>\r\n    <Banner\r\n      v-if=\"!isSatisfiesVersion\"\r\n      color=\"warning\"\r\n    >\r\n      {{ t('storageClass.harvesterhci.warning.unSatisfiesVersion', null, true) }}\r\n    </Banner>\r\n    <div v-else>\r\n      <div\r\n        class=\"row mb-10\"\r\n      >\r\n        <div class=\"col span-6\">\r\n          <LabeledInput\r\n            v-model=\"value.parameters.hostStorageClass\"\r\n            :label=\"t('storageClass.harvesterhci.hostStorageClass.label')\"\r\n            :placeholder=\"t('storageClass.harvesterhci.hostStorageClass.placeholder')\"\r\n            :mode=\"mode\"\r\n            :tooltip=\"t('storageClass.harvesterhci.hostStorageClass.tooltip')\"\r\n          />\r\n        </div>\r\n      </div>\r\n      <KeyValue\r\n        v-model=\"parameters\"\r\n        :add-label=\"t('storageClass.longhorn.addLabel')\"\r\n        :read-allowed=\"false\"\r\n        :mode=\"mode\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;AACA,SAAAA,UAAA;AACA,OAAAC,MAAA;AAEA,SAAAC,YAAA;AACA,OAAAC,MAAA;AACA,OAAAC,QAAA;AAEA,SAAAC,KAAA;AACA,SAAAC,OAAA;AAEA,IAAAC,kBAAA,IACA,mBACA;AAEA;EACAC,UAAA;IACAN,YAAA,EAAAA,YAAA;IACAC,MAAA,EAAAA,MAAA;IACAC,QAAA,EAAAA;EACA;EAEAK,KAAA;IACAC,KAAA;MACAC,IAAA,EAAAC,MAAA;MACAC,QAAA;IACA;IACAC,IAAA;MACAH,IAAA,EAAAI,MAAA;MACAF,QAAA;IACA;EACA;EAEAG,KAAA,WAAAA,MAAA;IAAA,IAAAC,KAAA;IAAA,OAAAC,iBAAA,cAAAC,mBAAA,CAAAC,IAAA,UAAAC,QAAA;MAAA,IAAAC,GAAA;MAAA,OAAAH,mBAAA,CAAAI,IAAA,UAAAC,SAAAC,QAAA;QAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;UAAA;YAAAF,QAAA,CAAAE,IAAA;YAAA,OACArB,OAAA;cAAAsB,YAAA,EAAAX,KAAA,CAAAY,MAAA,CAAAC,QAAA;gBAAAC,GAAA;cAAA;YAAA;UAAA;YAAAT,GAAA,GAAAG,QAAA,CAAAO,IAAA;YAEAf,KAAA,CAAAW,YAAA,GAAAN,GAAA,CAAAM,YAAA;UAAA;UAAA;YAAA,OAAAH,QAAA,CAAAQ,IAAA;QAAA;MAAA,GAAAZ,OAAA;IAAA;EACA;EAEAa,IAAA,WAAAA,KAAA;IACA;MAAAN,YAAA;IAAA;EACA;EAEAO,QAAA,EAAAC,aAAA,CAAAA,aAAA,KACApC,UAAA;IAEAqC,kBAAA,WAAAA,mBAAA;MACA,IAAAC,iBAAA,QAAAC,cAAA,CAAAD,iBAAA;MACA,IAAAE,0BAAA,QAAAD,cAAA,CAAAC,0BAAA;MAEA,IAAAA,0BAAA,CAAAC,UAAA;QAAA,IAAAC,kBAAA,EAAAC,oBAAA;QACA,IAAAC,MAAA,OAAAF,kBAAA,QAAAd,YAAA,cAAAc,kBAAA,uBAAAA,kBAAA,CAAAR,IAAA,SAAAW,IAAA,WAAAC,CAAA;UAAA,OAAAA,CAAA,CAAAC,EAAA,KAAAT,iBAAA;QAAA,UAAAM,MAAA;QACA,IAAAI,UAAA,IAAAJ,MAAA,aAAAA,MAAA,gBAAAD,oBAAA,GAAAC,MAAA,sCAAAD,oBAAA,uBAAAA,oBAAA,CAAAM,OAAA;QAEA,IAAAD,UAAA,CAAAE,QAAA;UACAF,UAAA,GAAAA,UAAA,CAAAG,KAAA;QACA;QAEA,OAAAlD,MAAA,CAAAmD,SAAA,CAAAJ,UAAA;MACA;QACA;MACA;IACA;IAEAK,UAAA;MACAC,GAAA,WAAAA,IAAA;QAAA,IAAAC,WAAA;QACA,IAAAF,UAAA,GAAAhD,KAAA,EAAAkD,WAAA,QAAA7C,KAAA,cAAA6C,WAAA,uBAAAA,WAAA,CAAAF,UAAA;QAEA9C,kBAAA,CAAAiD,GAAA,WAAAC,GAAA;UACA,OAAAJ,UAAA,CAAAI,GAAA;QACA;QAEA,OAAAJ,UAAA;MACA;MAEAK,GAAA,WAAAA,IAAAhD,KAAA;QACAE,MAAA,CAAA+C,MAAA,MAAAjD,KAAA,CAAA2C,UAAA,EAAA3C,KAAA;MACA;IACA;EAAA;AAEA","ignoreList":[]}]}