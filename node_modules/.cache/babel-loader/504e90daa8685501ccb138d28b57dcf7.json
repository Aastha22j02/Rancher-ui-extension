{"remainingRequest":"/home/ubuntu/susecon-2024-ext-demo/node_modules/babel-loader/lib/index.js??ref--16-1!/home/ubuntu/susecon-2024-ext-demo/node_modules/cache-loader/dist/cjs.js??ref--17-0!/home/ubuntu/susecon-2024-ext-demo/node_modules/ts-loader/index.js??ref--17-1!/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/edit/provisioning.cattle.io.cluster/__tests__/Advanced.test.ts","dependencies":[{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/edit/provisioning.cattle.io.cluster/__tests__/Advanced.test.ts","mtime":1725271280091},{"path":"/home/ubuntu/susecon-2024-ext-demo/babel.config.js","mtime":1725268750245},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/babel-loader/lib/index.js","mtime":1725271298942},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/ts-loader/index.js","mtime":1725271299135}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwovKiBlc2xpbnQtZGlzYWJsZSBqZXN0L25vLWhvb2tzICovCmltcG9ydCB7IG1vdW50IH0gZnJvbSAnQHZ1ZS90ZXN0LXV0aWxzJzsKaW1wb3J0IEFkdmFuY2VkIGZyb20gJ0BzaGVsbC9lZGl0L3Byb3Zpc2lvbmluZy5jYXR0bGUuaW8uY2x1c3Rlci90YWJzL0FkdmFuY2VkLnZ1ZSc7CmltcG9ydCB7IF9ZQU1MLCBfVklFVyB9IGZyb20gJ0BzaGVsbC9jb25maWcvcXVlcnktcGFyYW1zJzsKaW1wb3J0IHsgY2xvbmUgfSBmcm9tICdAc2hlbGwvdXRpbHMvb2JqZWN0JzsKaW1wb3J0IHsgUFJPVl9DTFVTVEVSLCBWRVJTSU9OX0NMVVNURVIgfSBmcm9tICdAc2hlbGwvZWRpdC9wcm92aXNpb25pbmcuY2F0dGxlLmlvLmNsdXN0ZXIvX190ZXN0c19fL3V0aWxzL2NsdXN0ZXInOwpkZXNjcmliZSgnY29tcG9uZW50OiBBZHZhbmNlZCcsIGZ1bmN0aW9uICgpIHsKICB2YXIgd3JhcHBlcjsKICB2YXIgbW91bnRPcHRpb25zID0gewogICAgcHJvcHNEYXRhOiB7CiAgICAgIHZhbHVlOiB7fSwKICAgICAgbW9kZTogX1ZJRVcsCiAgICAgIGhhdmVBcmdJbmZvOiB0cnVlLAogICAgICBzZWxlY3RlZFZlcnNpb246IFZFUlNJT05fQ0xVU1RFUgogICAgfSwKICAgIG1vY2tzOiB7CiAgICAgICRzdG9yZTogewogICAgICAgIGdldHRlcnM6IHsKICAgICAgICAgIGN1cnJlbnRTdG9yZTogZnVuY3Rpb24gY3VycmVudFN0b3JlKCkgewogICAgICAgICAgICByZXR1cm4gJ2N1cnJlbnRfc3RvcmUnOwogICAgICAgICAgfSwKICAgICAgICAgICdjdXJyZW50X3N0b3JlL3NjaGVtYUZvcic6IGplc3QuZm4oKSwKICAgICAgICAgICdjdXJyZW50X3N0b3JlL2FsbCc6IGplc3QuZm4oKSwKICAgICAgICAgICdpMThuL3QnOiBqZXN0LmZuKCksCiAgICAgICAgICAnaTE4bi9leGlzdHMnOiBqZXN0LmZuKCkKICAgICAgICB9CiAgICAgIH0sCiAgICAgICRyb3V0ZTogewogICAgICAgIHF1ZXJ5OiB7CiAgICAgICAgICBBUzogX1lBTUwKICAgICAgICB9CiAgICAgIH0sCiAgICAgICRyb3V0ZXI6IHsKICAgICAgICBhcHBseVF1ZXJ5OiBqZXN0LmZuKCkKICAgICAgfQogICAgfQogIH07CiAgZGVzY3JpYmUoJ2NsdXN0ZXIgY29uZmlndXJhdGlvbnMnLCBmdW5jdGlvbiAoKSB7CiAgICBpdCgic2hvdWxkIHN1cHBvcnQgZW1wdHkgbWFjaGluZVNlbGVjdG9yQ29uZmlnIiwgZnVuY3Rpb24gKCkgewogICAgICB2YXIgdmFsdWUgPSBjbG9uZShQUk9WX0NMVVNURVIpOwogICAgICB2YWx1ZS5zcGVjLnJrZUNvbmZpZy5tYWNoaW5lU2VsZWN0b3JDb25maWcgPSBbXTsKICAgICAgbW91bnRPcHRpb25zLnByb3BzRGF0YS52YWx1ZSA9IHZhbHVlOwogICAgICB3cmFwcGVyID0gbW91bnQoQWR2YW5jZWQsIG1vdW50T3B0aW9ucyk7CiAgICAgIHZhciBpbnB1dEVsZW0gPSB3cmFwcGVyLmZpbmQoJ1tkYXRhLXRlc3RpZD0iYXJyYXktbGlzdC1ib3gwIl0nKS5lbGVtZW50OwogICAgICBleHBlY3QoaW5wdXRFbGVtKS50b0JlVW5kZWZpbmVkKCk7CiAgICB9KTsKICAgIGRlc2NyaWJlKCIncHJvdGVjdC1rZXJuZWwtZGVmYXVsdHMnIiwgZnVuY3Rpb24gKCkgewogICAgICBpdCgic2hvdWxkIHNob3cgdmFsdWUgZnJvbSBtYWNoaW5lR2xvYmFsQ29uZmlnIiwgZnVuY3Rpb24gKCkgewogICAgICAgIHZhciB2YWx1ZSA9IGNsb25lKFBST1ZfQ0xVU1RFUik7CiAgICAgICAgdmFsdWUuc3BlYy5ya2VDb25maWcubWFjaGluZUdsb2JhbENvbmZpZ1sncHJvdGVjdC1rZXJuZWwtZGVmYXVsdHMnXSA9IHRydWU7CiAgICAgICAgdmFsdWUuc3BlYy5ya2VDb25maWcubWFjaGluZVNlbGVjdG9yQ29uZmlnID0gW3sKICAgICAgICAgIGNvbmZpZzoge30sCiAgICAgICAgICBtYWNoaW5lTGFiZWxTZWxlY3RvcjogewogICAgICAgICAgICBtYXRjaEV4cHJlc3Npb25zOiBbewogICAgICAgICAgICAgIGtleTogJ2ZvbycsCiAgICAgICAgICAgICAgb3BlcmF0b3I6ICdJbicsCiAgICAgICAgICAgICAgdmFsdWVzOiBbJ2JhciddCiAgICAgICAgICAgIH1dLAogICAgICAgICAgICBtYXRjaExhYmVsczogewogICAgICAgICAgICAgIGZvbzE6ICdiYXIxJwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfV07CiAgICAgICAgbW91bnRPcHRpb25zLnByb3BzRGF0YS5tb2RlID0gX1ZJRVc7CiAgICAgICAgbW91bnRPcHRpb25zLnByb3BzRGF0YS52YWx1ZSA9IHZhbHVlOwogICAgICAgIHdyYXBwZXIgPSBtb3VudChBZHZhbmNlZCwgbW91bnRPcHRpb25zKTsKICAgICAgICB2YXIgY2hlY2tib3ggPSB3cmFwcGVyLmZpbmQoJ1tkYXRhLXRlc3RpZD0icHJvdGVjdC1rZXJuZWwtZGVmYXVsdHMiXScpLmZpbmQoJ1t0eXBlPSJjaGVja2JveCJdJykuZWxlbWVudDsKICAgICAgICBleHBlY3QoY2hlY2tib3gudmFsdWUpLnRvQmUoJ3RydWUnKTsKICAgICAgfSk7CiAgICAgIGl0KCJzaG91bGQgc2hvdyB2YWx1ZSBmcm9tIG1hY2hpbmVTZWxlY3RvckNvbmZpZy5jb25maWciLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIHZhbHVlID0gY2xvbmUoUFJPVl9DTFVTVEVSKTsKICAgICAgICB2YWx1ZS5zcGVjLnJrZUNvbmZpZy5tYWNoaW5lR2xvYmFsQ29uZmlnWydwcm90ZWN0LWtlcm5lbC1kZWZhdWx0cyddID0gZmFsc2U7CiAgICAgICAgdmFsdWUuc3BlYy5ya2VDb25maWcubWFjaGluZVNlbGVjdG9yQ29uZmlnID0gW3sKICAgICAgICAgIGNvbmZpZzoge30sCiAgICAgICAgICBtYWNoaW5lTGFiZWxTZWxlY3RvcjogewogICAgICAgICAgICBjb25maWc6IHsKICAgICAgICAgICAgICAncHJvdGVjdC1rZXJuZWwtZGVmYXVsdHMnOiB0cnVlCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIG1hdGNoRXhwcmVzc2lvbnM6IFt7CiAgICAgICAgICAgICAga2V5OiAnZm9vJywKICAgICAgICAgICAgICBvcGVyYXRvcjogJ0luJywKICAgICAgICAgICAgICB2YWx1ZXM6IFsnYmFyJ10KICAgICAgICAgICAgfV0sCiAgICAgICAgICAgIG1hdGNoTGFiZWxzOiB7CiAgICAgICAgICAgICAgZm9vMTogJ2JhcjEnCiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9XTsKICAgICAgICBtb3VudE9wdGlvbnMucHJvcHNEYXRhLm1vZGUgPSBfVklFVzsKICAgICAgICBtb3VudE9wdGlvbnMucHJvcHNEYXRhLnZhbHVlID0gdmFsdWU7CiAgICAgICAgd3JhcHBlciA9IG1vdW50KEFkdmFuY2VkLCBtb3VudE9wdGlvbnMpOwogICAgICAgIHZhciBjaGVja2JveCA9IHdyYXBwZXIuZmluZCgnW2RhdGEtdGVzdGlkPSJwcm90ZWN0LWtlcm5lbC1kZWZhdWx0cyJdJykuZmluZCgnW3R5cGU9ImNoZWNrYm94Il0nKS5lbGVtZW50OwogICAgICAgIGV4cGVjdChjaGVja2JveC52YWx1ZSkudG9CZSgndHJ1ZScpOwogICAgICB9KTsKICAgIH0pOwogIH0pOwp9KTs="},{"version":3,"names":["mount","Advanced","_YAML","_VIEW","clone","PROV_CLUSTER","VERSION_CLUSTER","describe","wrapper","mountOptions","propsData","value","mode","haveArgInfo","selectedVersion","mocks","$store","getters","currentStore","jest","fn","$route","query","AS","$router","applyQuery","it","spec","rkeConfig","machineSelectorConfig","inputElem","find","element","expect","toBeUndefined","machineGlobalConfig","config","machineLabelSelector","matchExpressions","key","operator","values","matchLabels","foo1","checkbox","toBe"],"sources":["/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/edit/provisioning.cattle.io.cluster/__tests__/Advanced.test.ts"],"sourcesContent":["/* eslint-disable jest/no-hooks */\nimport { mount, Wrapper } from '@vue/test-utils';\nimport Advanced from '@shell/edit/provisioning.cattle.io.cluster/tabs/Advanced.vue';\nimport { _YAML, _VIEW } from '@shell/config/query-params';\nimport { clone } from '@shell/utils/object';\nimport { PROV_CLUSTER, VERSION_CLUSTER } from '@shell/edit/provisioning.cattle.io.cluster/__tests__/utils/cluster';\n\ndescribe('component: Advanced', () => {\n  let wrapper: Wrapper<InstanceType<typeof Advanced>>;\n\n  const mountOptions = {\n    propsData: {\n      value:           {},\n      mode:            _VIEW,\n      haveArgInfo:     true,\n      selectedVersion: VERSION_CLUSTER\n    },\n    mocks: {\n      $store: {\n        getters: {\n          currentStore:              () => 'current_store',\n          'current_store/schemaFor': jest.fn(),\n          'current_store/all':       jest.fn(),\n          'i18n/t':                  jest.fn(),\n          'i18n/exists':             jest.fn(),\n        }\n      },\n      $route:  { query: { AS: _YAML } },\n      $router: { applyQuery: jest.fn() },\n    }\n  };\n\n  describe('cluster configurations', () => {\n    it(`should support empty machineSelectorConfig`, () => {\n      const value = clone(PROV_CLUSTER);\n\n      value.spec.rkeConfig.machineSelectorConfig = [];\n\n      mountOptions.propsData.value = value;\n\n      wrapper = mount(\n        Advanced,\n        mountOptions\n      );\n\n      const inputElem = wrapper.find('[data-testid=\"array-list-box0\"]').element as HTMLElement;\n\n      expect(inputElem).toBeUndefined();\n    });\n\n    describe(`'protect-kernel-defaults'`, () => {\n      it(`should show value from machineGlobalConfig`, () => {\n        const value = clone(PROV_CLUSTER);\n\n        value.spec.rkeConfig.machineGlobalConfig['protect-kernel-defaults'] = true;\n        value.spec.rkeConfig.machineSelectorConfig = [{\n          config:               {},\n          machineLabelSelector: {\n            matchExpressions: [{\n              key:      'foo',\n              operator: 'In',\n              values:   ['bar'],\n            }],\n            matchLabels: { foo1: 'bar1' },\n          }\n        }];\n\n        mountOptions.propsData.mode = _VIEW;\n        mountOptions.propsData.value = value;\n\n        wrapper = mount(\n          Advanced,\n          mountOptions\n        );\n\n        const checkbox = wrapper.find('[data-testid=\"protect-kernel-defaults\"]').find('[type=\"checkbox\"]').element as HTMLInputElement;\n\n        expect(checkbox.value).toBe('true');\n      });\n\n      it(`should show value from machineSelectorConfig.config`, () => {\n        const value = clone(PROV_CLUSTER);\n\n        value.spec.rkeConfig.machineGlobalConfig['protect-kernel-defaults'] = false;\n        value.spec.rkeConfig.machineSelectorConfig = [{\n          config:               {},\n          machineLabelSelector: {\n            config:           { 'protect-kernel-defaults': true },\n            matchExpressions: [{\n              key:      'foo',\n              operator: 'In',\n              values:   ['bar'],\n            }],\n            matchLabels: { foo1: 'bar1' },\n          }\n        }];\n\n        mountOptions.propsData.mode = _VIEW;\n        mountOptions.propsData.value = value;\n\n        wrapper = mount(\n          Advanced,\n          mountOptions\n        );\n\n        const checkbox = wrapper.find('[data-testid=\"protect-kernel-defaults\"]').find('[type=\"checkbox\"]').element as HTMLInputElement;\n\n        expect(checkbox.value).toBe('true');\n      });\n    });\n  });\n});\n"],"mappings":"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","ignoreList":[]}]}