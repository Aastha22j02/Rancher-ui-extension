{"remainingRequest":"/home/ubuntu/susecon-2024-ext-demo/node_modules/babel-loader/lib/index.js??ref--16-1!/home/ubuntu/susecon-2024-ext-demo/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/ubuntu/susecon-2024-ext-demo/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/cloud-credential/pnap.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/cloud-credential/pnap.vue","mtime":1725271280091},{"path":"/home/ubuntu/susecon-2024-ext-demo/babel.config.js","mtime":1725268750245},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/babel-loader/lib/index.js","mtime":1725271298942},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1725271300920}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgX3JlZ2VuZXJhdG9yUnVudGltZSBmcm9tICIvaG9tZS91YnVudHUvc3VzZWNvbi0yMDI0LWV4dC1kZW1vL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9yZWdlbmVyYXRvci9pbmRleC5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0IENyZWF0ZUVkaXRWaWV3IGZyb20gJ0BzaGVsbC9taXhpbnMvY3JlYXRlLWVkaXQtdmlldyc7CmltcG9ydCB7IExhYmVsZWRJbnB1dCB9IGZyb20gJ0Bjb21wb25lbnRzL0Zvcm0vTGFiZWxlZElucHV0JzsKaW1wb3J0IHsgYmFzZTY0RW5jb2RlIH0gZnJvbSAnQHNoZWxsL3V0aWxzL2NyeXB0byc7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBMYWJlbGVkSW5wdXQ6IExhYmVsZWRJbnB1dAogIH0sCiAgbWl4aW5zOiBbQ3JlYXRlRWRpdFZpZXddLAogIHdhdGNoOiB7CiAgICAndmFsdWUuZGVjb2RlZERhdGEuY2xpZW50SWRlbnRpZmllcic6IGZ1bmN0aW9uIHZhbHVlRGVjb2RlZERhdGFDbGllbnRJZGVudGlmaWVyKG5ldSkgewogICAgICB0aGlzLiRlbWl0KCd2YWxpZGF0aW9uQ2hhbmdlZCcsICEhbmV1KTsKICAgIH0sCiAgICAndmFsdWUuZGVjb2RlZERhdGEuY2xpZW50U2VjcmV0JzogZnVuY3Rpb24gdmFsdWVEZWNvZGVkRGF0YUNsaWVudFNlY3JldChuZXUpIHsKICAgICAgdGhpcy4kZW1pdCgndmFsaWRhdGlvbkNoYW5nZWQnLCAhIW5ldSk7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICB0ZXN0OiBmdW5jdGlvbiB0ZXN0KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgY3JlZGVudGlhbHMsIGVuY29kZWQsIHJlcXVlc3RPcHRpb25zLCByZXNwb25zZSwgZGF0YTsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDA7CiAgICAgICAgICAgICAgY3JlZGVudGlhbHMgPSAiIi5jb25jYXQoX3RoaXMudmFsdWUuZGVjb2RlZERhdGEuY2xpZW50SWRlbnRpZmllciwgIjoiKS5jb25jYXQoX3RoaXMudmFsdWUuZGVjb2RlZERhdGEuY2xpZW50U2VjcmV0KTsKICAgICAgICAgICAgICBlbmNvZGVkID0gYmFzZTY0RW5jb2RlKGNyZWRlbnRpYWxzKTsKICAgICAgICAgICAgICByZXF1ZXN0T3B0aW9ucyA9IHsKICAgICAgICAgICAgICAgIHVybDogJ21ldGEvcHJveHkvYXV0aC5waG9lbml4bmFwLmNvbS9hdXRoL3JlYWxtcy9CTUMvcHJvdG9jb2wvb3BlbmlkLWNvbm5lY3QvdG9rZW4vJywKICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLAogICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcsCiAgICAgICAgICAgICAgICAgICdYLUFQSS1BdXRoLUhlYWRlcic6ICJCYXNpYyAiLmNvbmNhdChlbmNvZGVkKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGRhdGE6ICdncmFudF90eXBlPWNsaWVudF9jcmVkZW50aWFscycsCiAgICAgICAgICAgICAgICByZWRpcmVjdFVuYXV0aG9yaXplZDogZmFsc2UKICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA2OwogICAgICAgICAgICAgIHJldHVybiBfdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ21hbmFnZW1lbnQvcmVxdWVzdCcsIHJlcXVlc3RPcHRpb25zKTsKICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gOTsKICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2U7CiAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICBkYXRhID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICBpZiAoIShkYXRhLmFjY2Vzc190b2tlbiAhPT0gdW5kZWZpbmVkICYmIGRhdGEuYWNjZXNzX3Rva2VuICE9PSBudWxsICYmIGRhdGEuYWNjZXNzX3Rva2VuICE9PSAnJykpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMjsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCB0cnVlKTsKICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBmYWxzZSk7CiAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDE1OwogICAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbImNhdGNoIl0oMCk7CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgZmFsc2UpOwogICAgICAgICAgICBjYXNlIDE4OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSwgbnVsbCwgW1swLCAxNV1dKTsKICAgICAgfSkpKCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["CreateEditView","LabeledInput","base64Encode","components","mixins","watch","valueDecodedDataClientIdentifier","neu","$emit","valueDecodedDataClientSecret","methods","test","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","credentials","encoded","requestOptions","response","data","wrap","_callee$","_context","prev","next","concat","value","decodedData","clientIdentifier","clientSecret","url","method","headers","redirectUnauthorized","$store","dispatch","sent","access_token","undefined","abrupt","t0","stop"],"sources":["node_modules/@rancher/shell/cloud-credential/pnap.vue"],"sourcesContent":["<script>\nimport CreateEditView from '@shell/mixins/create-edit-view';\nimport { LabeledInput } from '@components/Form/LabeledInput';\nimport { base64Encode } from '@shell/utils/crypto';\n\nexport default {\n  components: { LabeledInput },\n  mixins:     [CreateEditView],\n\n  watch: {\n    'value.decodedData.clientIdentifier'(neu) {\n      this.$emit('validationChanged', !!neu);\n    },\n    'value.decodedData.clientSecret'(neu) {\n      this.$emit('validationChanged', !!neu);\n    }\n  },\n\n  methods: {\n    async test() {\n      try {\n        const credentials = `${ this.value.decodedData.clientIdentifier }:${ this.value.decodedData.clientSecret }`;\n        const encoded = base64Encode(credentials);\n\n        const requestOptions = {\n          url:                  'meta/proxy/auth.phoenixnap.com/auth/realms/BMC/protocol/openid-connect/token/',\n          method:               'POST',\n          headers:              { 'Content-Type': 'application/x-www-form-urlencoded', 'X-API-Auth-Header': `Basic ${ encoded }` },\n          data:                 'grant_type=client_credentials',\n          redirectUnauthorized: false,\n        };\n\n        const response = await this.$store.dispatch('management/request', requestOptions);\n        const data = await response;\n\n        if (data.access_token !== undefined && data.access_token !== null && data.access_token !== '') {\n          return true;\n        }\n\n        return false;\n      } catch (e) {\n        return false;\n      }\n    }\n  }\n};\n</script>\n\n<template>\n  <div>\n    <div class=\"row mt-20\">\n      <div class=\"col span-6\">\n        <LabeledInput\n          :value=\"value.decodedData.clientIdentifier\"\n          label-key=\"cluster.credential.pnap.clientIdentifier.label\"\n          placeholder-key=\"cluster.credential.pnap.clientIdentifier.placeholder\"\n          type=\"text\"\n          :mode=\"mode\"\n          @input=\"value.setData('clientIdentifier', $event);\"\n        />\n      </div>\n      <div class=\"col span-6\">\n        <LabeledInput\n          :value=\"value.decodedData.clientSecret\"\n          label-key=\"cluster.credential.pnap.clientSecret.label\"\n          placeholder-key=\"cluster.credential.pnap.clientSecret.placeholder\"\n          type=\"text\"\n          :mode=\"mode\"\n          @input=\"value.setData('clientSecret', $event);\"\n        />\n      </div>\n    </div>\n    <div class=\"row mt-5\">\n      <p\n        v-clean-html=\"t('cluster.credential.pnap.clientSecret.help', {}, true)\"\n        class=\"text-muted mt-10\"\n      />\n    </div>\n  </div>\n</template>\n"],"mappings":";;;;AACA,OAAAA,cAAA;AACA,SAAAC,YAAA;AACA,SAAAC,YAAA;AAEA;EACAC,UAAA;IAAAF,YAAA,EAAAA;EAAA;EACAG,MAAA,GAAAJ,cAAA;EAEAK,KAAA;IACA,+CAAAC,iCAAAC,GAAA;MACA,KAAAC,KAAA,wBAAAD,GAAA;IACA;IACA,2CAAAE,6BAAAF,GAAA;MACA,KAAAC,KAAA,wBAAAD,GAAA;IACA;EACA;EAEAG,OAAA;IACAC,IAAA,WAAAA,KAAA;MAAA,IAAAC,KAAA;MAAA,OAAAC,iBAAA,eAAAC,mBAAA,CAAAC,IAAA,UAAAC,QAAA;QAAA,IAAAC,WAAA,EAAAC,OAAA,EAAAC,cAAA,EAAAC,QAAA,EAAAC,IAAA;QAAA,OAAAP,mBAAA,CAAAQ,IAAA,UAAAC,SAAAC,QAAA;UAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;YAAA;cAAAF,QAAA,CAAAC,IAAA;cAEAR,WAAA,MAAAU,MAAA,CAAAf,KAAA,CAAAgB,KAAA,CAAAC,WAAA,CAAAC,gBAAA,OAAAH,MAAA,CAAAf,KAAA,CAAAgB,KAAA,CAAAC,WAAA,CAAAE,YAAA;cACAb,OAAA,GAAAhB,YAAA,CAAAe,WAAA;cAEAE,cAAA;gBACAa,GAAA;gBACAC,MAAA;gBACAC,OAAA;kBAAA;kBAAA,8BAAAP,MAAA,CAAAT,OAAA;gBAAA;gBACAG,IAAA;gBACAc,oBAAA;cACA;cAAAX,QAAA,CAAAE,IAAA;cAAA,OAEAd,KAAA,CAAAwB,MAAA,CAAAC,QAAA,uBAAAlB,cAAA;YAAA;cAAAC,QAAA,GAAAI,QAAA,CAAAc,IAAA;cAAAd,QAAA,CAAAE,IAAA;cAAA,OACAN,QAAA;YAAA;cAAAC,IAAA,GAAAG,QAAA,CAAAc,IAAA;cAAA,MAEAjB,IAAA,CAAAkB,YAAA,KAAAC,SAAA,IAAAnB,IAAA,CAAAkB,YAAA,aAAAlB,IAAA,CAAAkB,YAAA;gBAAAf,QAAA,CAAAE,IAAA;gBAAA;cAAA;cAAA,OAAAF,QAAA,CAAAiB,MAAA,WACA;YAAA;cAAA,OAAAjB,QAAA,CAAAiB,MAAA,WAGA;YAAA;cAAAjB,QAAA,CAAAC,IAAA;cAAAD,QAAA,CAAAkB,EAAA,GAAAlB,QAAA;cAAA,OAAAA,QAAA,CAAAiB,MAAA,WAEA;YAAA;YAAA;cAAA,OAAAjB,QAAA,CAAAmB,IAAA;UAAA;QAAA,GAAA3B,OAAA;MAAA;IAEA;EACA;AACA","ignoreList":[]}]}