{"remainingRequest":"/home/ubuntu/susecon-2024-ext-demo/node_modules/babel-loader/lib/index.js??ref--16-1!/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/models/apps.statefulset.js","dependencies":[{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/models/apps.statefulset.js","mtime":1725271280091},{"path":"/home/ubuntu/susecon-2024-ext-demo/babel.config.js","mtime":1725268750245},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/babel-loader/lib/index.js","mtime":1725271298942}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVmbGVjdC5jb25zdHJ1Y3QuanMiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2siOwppbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzIjsKaW1wb3J0IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4iOwppbXBvcnQgX2dldFByb3RvdHlwZU9mIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2dldFByb3RvdHlwZU9mIjsKaW1wb3J0IF9pbmhlcml0cyBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9pbmhlcml0cyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCBfcmVnZW5lcmF0b3JSdW50aW1lIGZyb20gIi9ob21lL3VidW50dS9zdXNlY29uLTIwMjQtZXh0LWRlbW8vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL3JlZ2VuZXJhdG9yL2luZGV4LmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwpmdW5jdGlvbiBfY2FsbFN1cGVyKHQsIG8sIGUpIHsgcmV0dXJuIG8gPSBfZ2V0UHJvdG90eXBlT2YobyksIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHQsIF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKSA/IFJlZmxlY3QuY29uc3RydWN0KG8sIGUgfHwgW10sIF9nZXRQcm90b3R5cGVPZih0KS5jb25zdHJ1Y3RvcikgOiBvLmFwcGx5KHQsIGUpKTsgfQpmdW5jdGlvbiBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCkgeyB0cnkgeyB2YXIgdCA9ICFCb29sZWFuLnByb3RvdHlwZS52YWx1ZU9mLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoQm9vbGVhbiwgW10sIGZ1bmN0aW9uICgpIHt9KSk7IH0gY2F0Y2ggKHQpIHt9IHJldHVybiAoX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCA9IGZ1bmN0aW9uIF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKSB7IHJldHVybiAhIXQ7IH0pKCk7IH0KaW1wb3J0IFdvcmtsb2FkIGZyb20gJy4vd29ya2xvYWQnOwppbXBvcnQgeyBXT1JLTE9BRF9UWVBFUywgUE9EIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy90eXBlcyc7CmltcG9ydCB7IFdPUktMT0FEX1RZUEVfVE9fS0lORF9NQVBQSU5HIH0gZnJvbSAnQHNoZWxsL2RldGFpbC93b3JrbG9hZC9pbmRleCc7CnZhciBTdGF0ZWZ1bFNldCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX1dvcmtsb2FkKSB7CiAgZnVuY3Rpb24gU3RhdGVmdWxTZXQoKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgU3RhdGVmdWxTZXQpOwogICAgcmV0dXJuIF9jYWxsU3VwZXIodGhpcywgU3RhdGVmdWxTZXQsIGFyZ3VtZW50cyk7CiAgfQogIF9pbmhlcml0cyhTdGF0ZWZ1bFNldCwgX1dvcmtsb2FkKTsKICByZXR1cm4gX2NyZWF0ZUNsYXNzKFN0YXRlZnVsU2V0LCBbewogICAga2V5OiAicm9sbEJhY2siLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9yb2xsQmFjayA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoY2x1c3Rlciwgc3RhdGVmdWxTZXQsIHJldmlzaW9uKSB7CiAgICAgICAgdmFyIGJvZHk7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGJvZHkgPSBbewogICAgICAgICAgICAgICAgb3A6ICdyZXBsYWNlJywKICAgICAgICAgICAgICAgIHBhdGg6ICcvc3BlYy90ZW1wbGF0ZScsCiAgICAgICAgICAgICAgICB2YWx1ZTogewogICAgICAgICAgICAgICAgICBtZXRhZGF0YTogcmV2aXNpb24uZGF0YS5zcGVjLnRlbXBsYXRlLm1ldGFkYXRhLAogICAgICAgICAgICAgICAgICBzcGVjOiByZXZpc2lvbi5kYXRhLnNwZWMudGVtcGxhdGUuc3BlYwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgIG9wOiAncmVwbGFjZScsCiAgICAgICAgICAgICAgICBwYXRoOiAnL21ldGFkYXRhL2dlbmVyYXRpb24nLAogICAgICAgICAgICAgICAgdmFsdWU6IHJldmlzaW9uLnJldmlzaW9uCiAgICAgICAgICAgICAgfV07CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucm9sbEJhY2tXb3JrbG9hZChjbHVzdGVyLCBzdGF0ZWZ1bFNldCwgJ3N0YXRlZnVsc2V0cycsIGJvZHkpOwogICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlLCB0aGlzKTsKICAgICAgfSkpOwogICAgICBmdW5jdGlvbiByb2xsQmFjayhfeCwgX3gyLCBfeDMpIHsKICAgICAgICByZXR1cm4gX3JvbGxCYWNrLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KICAgICAgcmV0dXJuIHJvbGxCYWNrOwogICAgfSgpIC8vIHdlIG5lZWQgdG8gcHJvdmlkZSBhIG5ldyBwb2RzIGdldHRlciBmb3Igc3RhdGVmdWxzZXRzIGJlY2F1c2UgdGhlIHJlbGF0aW9uc2hpcAogICAgLy8gZG9uZSBvbiB0aGUgcGFyZW50IG1vZGVsICJ3b3JrbG9hZCIgaXMgbm90IGNvcnJlY3QKICB9LCB7CiAgICBrZXk6ICJwb2RzIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgX3RoaXMkbWV0YWRhdGEsCiAgICAgICAgX3RoaXMgPSB0aGlzOwogICAgICB2YXIgcmVsYXRpb25zaGlwcyA9ICgoX3RoaXMkbWV0YWRhdGEgPSB0aGlzLm1ldGFkYXRhKSA9PT0gbnVsbCB8fCBfdGhpcyRtZXRhZGF0YSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkbWV0YWRhdGEucmVsYXRpb25zaGlwcykgfHwgW107CiAgICAgIHZhciBwb2RSZWxhdGlvbnNoaXAgPSByZWxhdGlvbnNoaXBzLmZpbHRlcihmdW5jdGlvbiAocmVsYXRpb25zaGlwKSB7CiAgICAgICAgcmV0dXJuIHJlbGF0aW9uc2hpcC50b1R5cGUgPT09IFBPRDsKICAgICAgfSlbMF07CiAgICAgIGlmIChwb2RSZWxhdGlvbnNoaXApIHsKICAgICAgICB2YXIgcG9kcyA9IHRoaXMuJGdldHRlcnNbJ3BvZHNCeU5hbWVzcGFjZSddKHRoaXMubWV0YWRhdGEubmFtZXNwYWNlKTsKICAgICAgICByZXR1cm4gcG9kcy5maWx0ZXIoZnVuY3Rpb24gKHBvZCkgewogICAgICAgICAgdmFyIF9wb2QkbWV0YWRhdGE7CiAgICAgICAgICAvLyBhIGJpdCBvZiBhIGR1cGxpY2F0aW9uIG9mIHBvZFJlbGF0aW9uc2hpcCwgYnV0IGFsd2F5cyBzYWZlIHRvIGNoZWNrLi4uCiAgICAgICAgICBpZiAoKF9wb2QkbWV0YWRhdGEgPSBwb2QubWV0YWRhdGEpICE9PSBudWxsICYmIF9wb2QkbWV0YWRhdGEgIT09IHZvaWQgMCAmJiAoX3BvZCRtZXRhZGF0YSA9IF9wb2QkbWV0YWRhdGEub3duZXJSZWZlcmVuY2VzKSAhPT0gbnVsbCAmJiBfcG9kJG1ldGFkYXRhICE9PSB2b2lkIDAgJiYgX3BvZCRtZXRhZGF0YS5sZW5ndGgpIHsKICAgICAgICAgICAgdmFyIF9wb2QkbWV0YWRhdGEyOwogICAgICAgICAgICB2YXIgb3duZXJSZWZlcmVuY2VzU3RhdGVmdWxTZXQgPSAoX3BvZCRtZXRhZGF0YTIgPSBwb2QubWV0YWRhdGEpID09PSBudWxsIHx8IF9wb2QkbWV0YWRhdGEyID09PSB2b2lkIDAgfHwgKF9wb2QkbWV0YWRhdGEyID0gX3BvZCRtZXRhZGF0YTIub3duZXJSZWZlcmVuY2VzKSA9PT0gbnVsbCB8fCBfcG9kJG1ldGFkYXRhMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3BvZCRtZXRhZGF0YTIuZmluZChmdW5jdGlvbiAob3duKSB7CiAgICAgICAgICAgICAgcmV0dXJuIG93bi5raW5kID09PSBXT1JLTE9BRF9UWVBFX1RPX0tJTkRfTUFQUElOR1tXT1JLTE9BRF9UWVBFUy5TVEFURUZVTF9TRVRdOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgaWYgKG93bmVyUmVmZXJlbmNlc1N0YXRlZnVsU2V0KSB7CiAgICAgICAgICAgICAgcmV0dXJuICIiLmNvbmNhdChwb2QubWV0YWRhdGEubmFtZXNwYWNlLCAiLyIpLmNvbmNhdChvd25lclJlZmVyZW5jZXNTdGF0ZWZ1bFNldC5uYW1lKSA9PT0gX3RoaXMuaWQ7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9KTsKICAgICAgfQogICAgICByZXR1cm4gW107CiAgICB9CiAgfV0pOwp9KFdvcmtsb2FkKTsKZXhwb3J0IHsgU3RhdGVmdWxTZXQgYXMgZGVmYXVsdCB9Ow=="},{"version":3,"names":["Workload","WORKLOAD_TYPES","POD","WORKLOAD_TYPE_TO_KIND_MAPPING","StatefulSet","_Workload","_classCallCheck","_callSuper","arguments","_inherits","_createClass","key","value","_rollBack","_asyncToGenerator","_regeneratorRuntime","mark","_callee","cluster","statefulSet","revision","body","wrap","_callee$","_context","prev","next","op","path","metadata","data","spec","template","rollBackWorkload","stop","rollBack","_x","_x2","_x3","apply","get","_this$metadata","_this","relationships","podRelationship","filter","relationship","toType","pods","$getters","namespace","pod","_pod$metadata","ownerReferences","length","_pod$metadata2","ownerReferencesStatefulSet","find","own","kind","STATEFUL_SET","concat","name","id","default"],"sources":["/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/models/apps.statefulset.js"],"sourcesContent":["import Workload from './workload';\nimport { WORKLOAD_TYPES, POD } from '@shell/config/types';\nimport { WORKLOAD_TYPE_TO_KIND_MAPPING } from '@shell/detail/workload/index';\n\nexport default class StatefulSet extends Workload {\n  async rollBack(cluster, statefulSet, revision) {\n    const body = [\n      {\n        op:    'replace',\n        path:  '/spec/template',\n        value: {\n          metadata: revision.data.spec.template.metadata,\n          spec:     revision.data.spec.template.spec\n        }\n      }, {\n        op:    'replace',\n        path:  '/metadata/generation',\n        value: revision.revision,\n      }\n    ];\n\n    await this.rollBackWorkload(cluster, statefulSet, 'statefulsets', body);\n  }\n\n  // we need to provide a new pods getter for statefulsets because the relationship\n  // done on the parent model \"workload\" is not correct\n  get pods() {\n    const relationships = this.metadata?.relationships || [];\n    const podRelationship = relationships.filter((relationship) => relationship.toType === POD)[0];\n\n    if (podRelationship) {\n      const pods = this.$getters['podsByNamespace'](this.metadata.namespace);\n\n      return pods.filter((pod) => {\n        // a bit of a duplication of podRelationship, but always safe to check...\n        if (pod.metadata?.ownerReferences?.length) {\n          const ownerReferencesStatefulSet = pod.metadata?.ownerReferences?.find((own) => own.kind === WORKLOAD_TYPE_TO_KIND_MAPPING[WORKLOAD_TYPES.STATEFUL_SET]);\n\n          if (ownerReferencesStatefulSet) {\n            return `${ pod.metadata.namespace }/${ ownerReferencesStatefulSet.name }` === this.id;\n          }\n        }\n\n        return false;\n      });\n    }\n\n    return [];\n  }\n}\n"],"mappings":"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","ignoreList":[]}]}