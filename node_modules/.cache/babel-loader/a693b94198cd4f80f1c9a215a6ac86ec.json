{"remainingRequest":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js??ref--16-1!/home/ubuntu/suseconf/node_modules/@rancher/shell/models/constraints.gatekeeper.sh.constraint.js","dependencies":[{"path":"/home/ubuntu/suseconf/node_modules/@rancher/shell/models/constraints.gatekeeper.sh.constraint.js","mtime":1725338146566},{"path":"/home/ubuntu/suseconf/babel.config.js","mtime":1725343995893},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js","mtime":1725271298942}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3JzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWZsZWN0LmNvbnN0cnVjdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5IjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcyI7CmltcG9ydCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIjsKaW1wb3J0IF9nZXRQcm90b3R5cGVPZiBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9nZXRQcm90b3R5cGVPZiI7CmltcG9ydCBfZ2V0IGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2dldCI7CmltcG9ydCBfaW5oZXJpdHMgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vaW5oZXJpdHMiOwpmdW5jdGlvbiBvd25LZXlzKGUsIHIpIHsgdmFyIHQgPSBPYmplY3Qua2V5cyhlKTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIG8gPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGUpOyByICYmIChvID0gby5maWx0ZXIoZnVuY3Rpb24gKHIpIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSwgcikuZW51bWVyYWJsZTsgfSkpLCB0LnB1c2guYXBwbHkodCwgbyk7IH0gcmV0dXJuIHQ7IH0KZnVuY3Rpb24gX29iamVjdFNwcmVhZChlKSB7IGZvciAodmFyIHIgPSAxOyByIDwgYXJndW1lbnRzLmxlbmd0aDsgcisrKSB7IHZhciB0ID0gbnVsbCAhPSBhcmd1bWVudHNbcl0gPyBhcmd1bWVudHNbcl0gOiB7fTsgciAlIDIgPyBvd25LZXlzKE9iamVjdCh0KSwgITApLmZvckVhY2goZnVuY3Rpb24gKHIpIHsgX2RlZmluZVByb3BlcnR5KGUsIHIsIHRbcl0pOyB9KSA6IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzID8gT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnModCkpIDogb3duS2V5cyhPYmplY3QodCkpLmZvckVhY2goZnVuY3Rpb24gKHIpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIHIsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCwgcikpOyB9KTsgfSByZXR1cm4gZTsgfQppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuYXNzaWduLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnByb21pc2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yLmpzIjsKaW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiL2hvbWUvdWJ1bnR1L3N1c2Vjb25mL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9yZWdlbmVyYXRvci9pbmRleC5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKZnVuY3Rpb24gX2NhbGxTdXBlcih0LCBvLCBlKSB7IHJldHVybiBvID0gX2dldFByb3RvdHlwZU9mKG8pLCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0LCBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCkgPyBSZWZsZWN0LmNvbnN0cnVjdChvLCBlIHx8IFtdLCBfZ2V0UHJvdG90eXBlT2YodCkuY29uc3RydWN0b3IpIDogby5hcHBseSh0LCBlKSk7IH0KZnVuY3Rpb24gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpIHsgdHJ5IHsgdmFyIHQgPSAhQm9vbGVhbi5wcm90b3R5cGUudmFsdWVPZi5jYWxsKFJlZmxlY3QuY29uc3RydWN0KEJvb2xlYW4sIFtdLCBmdW5jdGlvbiAoKSB7fSkpOyB9IGNhdGNoICh0KSB7fSByZXR1cm4gKF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QgPSBmdW5jdGlvbiBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCkgeyByZXR1cm4gISF0OyB9KSgpOyB9CmZ1bmN0aW9uIF9zdXBlclByb3BHZXQodCwgZSwgbywgcikgeyB2YXIgcCA9IF9nZXQoX2dldFByb3RvdHlwZU9mKDEgJiByID8gdC5wcm90b3R5cGUgOiB0KSwgZSwgbyk7IHJldHVybiAyICYgciAmJiAiZnVuY3Rpb24iID09IHR5cGVvZiBwID8gZnVuY3Rpb24gKHQpIHsgcmV0dXJuIHAuYXBwbHkobywgdCk7IH0gOiBwOyB9CmltcG9ydCBqc3lhbWwgZnJvbSAnanMteWFtbCc7CmltcG9ydCBTdGV2ZU1vZGVsIGZyb20gJ0BzaGVsbC9wbHVnaW5zL3N0ZXZlL3N0ZXZlLWNsYXNzJzsKaW1wb3J0IHsgZG93bmxvYWRGaWxlIH0gZnJvbSAnQHNoZWxsL3V0aWxzL2Rvd25sb2FkJzsKZXhwb3J0IHZhciBFTkZPUkNFTUVOVF9BQ1RJT05fVkFMVUVTID0gewogIERFTlk6ICdkZW55JywKICBEUllSVU46ICdkcnlydW4nCn07CnZhciBHYXRlS2VlcGVyQ29uc3RyYWludCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX1N0ZXZlTW9kZWwpIHsKICBmdW5jdGlvbiBHYXRlS2VlcGVyQ29uc3RyYWludCgpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBHYXRlS2VlcGVyQ29uc3RyYWludCk7CiAgICByZXR1cm4gX2NhbGxTdXBlcih0aGlzLCBHYXRlS2VlcGVyQ29uc3RyYWludCwgYXJndW1lbnRzKTsKICB9CiAgX2luaGVyaXRzKEdhdGVLZWVwZXJDb25zdHJhaW50LCBfU3RldmVNb2RlbCk7CiAgcmV0dXJuIF9jcmVhdGVDbGFzcyhHYXRlS2VlcGVyQ29uc3RyYWludCwgW3sKICAgIGtleTogIl9hdmFpbGFibGVBY3Rpb25zIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgb3V0ID0gX3N1cGVyUHJvcEdldChHYXRlS2VlcGVyQ29uc3RyYWludCwgIl9hdmFpbGFibGVBY3Rpb25zIiwgdGhpcywgMSk7CiAgICAgIHZhciB0ID0gdGhpcy4kcm9vdEdldHRlcnNbJ2kxOG4vdCddOwogICAgICB2YXIgZG93bmxvYWRWaW9sYXRpb25zID0gewogICAgICAgIGFjdGlvbjogJ2Rvd25sb2FkVmlvbGF0aW9ucycsCiAgICAgICAgaWNvbjogJ2ljb24gaWNvbi1mdyBpY29uLWRvd25sb2FkJywKICAgICAgICBsYWJlbDogdCgnZ2F0ZWtlZXBlckNvbnN0cmFpbnQuZG93bmxvYWRWaW9sYXRpb25zJyksCiAgICAgICAgdG90YWw6IDEKICAgICAgfTsKICAgICAgb3V0LnVuc2hpZnQoZG93bmxvYWRWaW9sYXRpb25zKTsKICAgICAgcmV0dXJuIG91dDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzYXZlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfc2F2ZSA9IF9hc3luY1RvR2VuZXJhdG9yKC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgY29uc3RyYWludCwgcmVzb3VyY2VWZXJzaW9uLCBfY29uc3RyYWludDsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgaWYgKCF0aGlzLmNvbnN0cmFpbnQpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA3OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgIHJldHVybiB0aGlzLmZpbmRMYXRlc3RDb25zdHJhaW50KCk7CiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICBjb25zdHJhaW50ID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICByZXNvdXJjZVZlcnNpb24gPSAoX2NvbnN0cmFpbnQgPSBjb25zdHJhaW50KSA9PT0gbnVsbCB8fCBfY29uc3RyYWludCA9PT0gdm9pZCAwIHx8IChfY29uc3RyYWludCA9IF9jb25zdHJhaW50Lm1ldGFkYXRhKSA9PT0gbnVsbCB8fCBfY29uc3RyYWludCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2NvbnN0cmFpbnQucmVzb3VyY2VWZXJzaW9uOwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMDsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA5OwogICAgICAgICAgICAgIHJldHVybiB0aGlzLiRkaXNwYXRjaCgnY2x1c3Rlci9jcmVhdGUnLCB7CiAgICAgICAgICAgICAgICB0eXBlOiAiY29uc3RyYWludHMuZ2F0ZWtlZXBlci5zaC4iLmNvbmNhdCh0aGlzLmtpbmQudG9Mb3dlckNhc2UoKSkKICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICByb290OiB0cnVlCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICBjb25zdHJhaW50ID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICBjb25zdHJhaW50LnNwZWMgPSB0aGlzLnNwZWM7CiAgICAgICAgICAgICAgY29uc3RyYWludC5tZXRhZGF0YSA9IHRoaXMubWV0YWRhdGE7CiAgICAgICAgICAgICAgaWYgKHJlc291cmNlVmVyc2lvbikgewogICAgICAgICAgICAgICAgY29uc3RyYWludC5tZXRhZGF0YS5yZXNvdXJjZVZlcnNpb24gPSByZXNvdXJjZVZlcnNpb247CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNTsKICAgICAgICAgICAgICByZXR1cm4gY29uc3RyYWludC5zYXZlKCk7CiAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlLCB0aGlzKTsKICAgICAgfSkpOwogICAgICBmdW5jdGlvbiBzYXZlKCkgewogICAgICAgIHJldHVybiBfc2F2ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CiAgICAgIHJldHVybiBzYXZlOwogICAgfSgpCiAgfSwgewogICAga2V5OiAiZG93bmxvYWRWaW9sYXRpb25zIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfZG93bmxvYWRWaW9sYXRpb25zID0gX2FzeW5jVG9HZW5lcmF0b3IoLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgUGFwYSwgdmlvbGF0aW9ucywgY3N2OwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAyOwogICAgICAgICAgICAgIHJldHVybiBpbXBvcnQoLyogd2VicGFja0NodW5rTmFtZTogImNzdiIgKi8ncGFwYXBhcnNlJyk7CiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICBQYXBhID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIHZpb2xhdGlvbnMgPSAodGhpcy52aW9sYXRpb25zIHx8IFtdKS5tYXAoZnVuY3Rpb24gKHZpb2xhdGlvbikgewogICAgICAgICAgICAgICAgICBkZWxldGUgdmlvbGF0aW9uLnJlc291cmNlTGluazsKICAgICAgICAgICAgICAgICAgZGVsZXRlIHZpb2xhdGlvbi5jb25zdHJhaW50TGluazsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHZpb2xhdGlvbjsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgY3N2ID0gUGFwYS51bnBhcnNlKHZpb2xhdGlvbnMpOwogICAgICAgICAgICAgICAgZG93bmxvYWRGaWxlKCJ2aW9sYXRpb25zLSIuY29uY2F0KHRoaXMubmFtZSwgIi5jc3YiKSwgY3N2LCAnYXBwbGljYXRpb24vY3N2Jyk7CiAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgICAgICB0aGlzLiRkaXNwYXRjaCgnZ3Jvd2wvZnJvbUVycm9yJywgewogICAgICAgICAgICAgICAgICB0aXRsZTogJ0Vycm9yIGRvd25sb2FkaW5nIGZpbGUnLAogICAgICAgICAgICAgICAgICBlcnI6IGVycgogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICByb290OiB0cnVlCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMiwgdGhpcyk7CiAgICAgIH0pKTsKICAgICAgZnVuY3Rpb24gZG93bmxvYWRWaW9sYXRpb25zKCkgewogICAgICAgIHJldHVybiBfZG93bmxvYWRWaW9sYXRpb25zLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KICAgICAgcmV0dXJuIGRvd25sb2FkVmlvbGF0aW9uczsKICAgIH0oKQogIH0sIHsKICAgIGtleTogImNsZWFuRm9yTmV3IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjbGVhbkZvck5ldygpIHsKICAgICAgdGhpcy4kZGlzcGF0Y2goImNsZWFuRm9yTmV3IiwgdGhpcyk7CiAgICAgIGlmICh0aGlzLmNvbnN0cmFpbnQpIHsKICAgICAgICBkZWxldGUgdGhpcy5jb25zdHJhaW50OwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAic2F2ZVlhbWwiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNhdmVZYW1sKHlhbWwpIHsKICAgICAgdmFyIHBhcnNlZCA9IGpzeWFtbC5sb2FkKHlhbWwpOwogICAgICBPYmplY3QuYXNzaWduKHRoaXMsIHBhcnNlZCk7CiAgICAgIHJldHVybiB0aGlzLnNhdmUoKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZW1vdmUiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9yZW1vdmUgPSBfYXN5bmNUb0dlbmVyYXRvcigvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkgewogICAgICAgIHZhciBjb25zdHJhaW50OwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyOwogICAgICAgICAgICAgIHJldHVybiB0aGlzLmZpbmRMYXRlc3RDb25zdHJhaW50KCk7CiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICBjb25zdHJhaW50ID0gX2NvbnRleHQzLnNlbnQ7CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoInJldHVybiIsIGNvbnN0cmFpbnQucmVtb3ZlKCkpOwogICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTMsIHRoaXMpOwogICAgICB9KSk7CiAgICAgIGZ1bmN0aW9uIHJlbW92ZSgpIHsKICAgICAgICByZXR1cm4gX3JlbW92ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CiAgICAgIHJldHVybiByZW1vdmU7CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJmaW5kTGF0ZXN0Q29uc3RyYWludCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZmluZExhdGVzdENvbnN0cmFpbnQoKSB7CiAgICAgIHJldHVybiB0aGlzLiRkaXNwYXRjaCgnY2x1c3Rlci9maW5kJywgewogICAgICAgIHR5cGU6IHRoaXMuY29uc3RyYWludC50eXBlLAogICAgICAgIGlkOiB0aGlzLmNvbnN0cmFpbnQuaWQsCiAgICAgICAgb3B0OiB7CiAgICAgICAgICBmb3JjZTogdHJ1ZQogICAgICAgIH0KICAgICAgfSwgewogICAgICAgIHJvb3Q6IHRydWUKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAidG90YWxWaW9sYXRpb25zIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgX3RoaXMkc3RhdHVzOwogICAgICByZXR1cm4gKChfdGhpcyRzdGF0dXMgPSB0aGlzLnN0YXR1cykgPT09IG51bGwgfHwgX3RoaXMkc3RhdHVzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRzdGF0dXMudG90YWxWaW9sYXRpb25zKSB8fCB0aGlzLnZpb2xhdGlvbnMubGVuZ3RoOwogICAgfQogIH0sIHsKICAgIGtleTogInZpb2xhdGlvbnMiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHZhciBfdGhpcyRzdGF0dXMyLAogICAgICAgIF90aGlzID0gdGhpczsKICAgICAgdmFyIHZpb2xhdGlvbnMgPSAoKF90aGlzJHN0YXR1czIgPSB0aGlzLnN0YXR1cykgPT09IG51bGwgfHwgX3RoaXMkc3RhdHVzMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkc3RhdHVzMi52aW9sYXRpb25zKSB8fCBbXTsKICAgICAgcmV0dXJuIHZpb2xhdGlvbnMubWFwKGZ1bmN0aW9uICh2aW9sYXRpb24pIHsKICAgICAgICByZXR1cm4gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCB2aW9sYXRpb24pLCB7fSwgewogICAgICAgICAgcmVzb3VyY2VMaW5rOiB7CiAgICAgICAgICAgIHRleHQ6IHZpb2xhdGlvbi5uYW1lLAogICAgICAgICAgICB0bzogewogICAgICAgICAgICAgIG5hbWU6ICdjLWNsdXN0ZXItcHJvZHVjdC1yZXNvdXJjZS1pZCcsCiAgICAgICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgICAgICByZXNvdXJjZTogdmlvbGF0aW9uLmtpbmQudG9Mb3dlckNhc2UoKSwKICAgICAgICAgICAgICAgIGlkOiB2aW9sYXRpb24ubmFtZSwKICAgICAgICAgICAgICAgIHByb2R1Y3Q6ICdleHBsb3JlcicKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sCiAgICAgICAgICBjb25zdHJhaW50TGluazogewogICAgICAgICAgICB0ZXh0OiBfdGhpcy5uYW1lRGlzcGxheSwKICAgICAgICAgICAgdG86IF90aGlzLmRldGFpbExvY2F0aW9uCiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQogIH1dKTsKfShTdGV2ZU1vZGVsKTsKZXhwb3J0IHsgR2F0ZUtlZXBlckNvbnN0cmFpbnQgYXMgZGVmYXVsdCB9Ow=="},{"version":3,"names":["jsyaml","SteveModel","downloadFile","ENFORCEMENT_ACTION_VALUES","DENY","DRYRUN","GateKeeperConstraint","_SteveModel","_classCallCheck","_callSuper","arguments","_inherits","_createClass","key","get","out","_superPropGet","t","$rootGetters","downloadViolations","action","icon","label","total","unshift","value","_save","_asyncToGenerator","_regeneratorRuntime","mark","_callee","constraint","resourceVersion","_constraint","wrap","_callee$","_context","prev","next","findLatestConstraint","sent","metadata","$dispatch","type","concat","kind","toLowerCase","root","spec","save","stop","apply","_downloadViolations","_callee2","Papa","violations","csv","_callee2$","_context2","map","violation","resourceLink","constraintLink","unparse","name","err","title","cleanForNew","saveYaml","yaml","parsed","load","Object","assign","_remove","_callee3","_callee3$","_context3","abrupt","remove","id","opt","force","_this$status","status","totalViolations","length","_this$status2","_this","_objectSpread","text","to","params","resource","product","nameDisplay","detailLocation","default"],"sources":["/home/ubuntu/suseconf/node_modules/@rancher/shell/models/constraints.gatekeeper.sh.constraint.js"],"sourcesContent":["import jsyaml from 'js-yaml';\r\nimport SteveModel from '@shell/plugins/steve/steve-class';\r\nimport { downloadFile } from '@shell/utils/download';\r\n\r\nexport const ENFORCEMENT_ACTION_VALUES = {\r\n  DENY:   'deny',\r\n  DRYRUN: 'dryrun'\r\n};\r\n\r\nexport default class GateKeeperConstraint extends SteveModel {\r\n  get _availableActions() {\r\n    const out = super._availableActions;\r\n\r\n    const t = this.$rootGetters['i18n/t'];\r\n\r\n    const downloadViolations = {\r\n      action: 'downloadViolations',\r\n      icon:   'icon icon-fw icon-download',\r\n      label:  t('gatekeeperConstraint.downloadViolations'),\r\n      total:  1,\r\n    };\r\n\r\n    out.unshift(downloadViolations);\r\n\r\n    return out;\r\n  }\r\n\r\n  async save() {\r\n    let constraint;\r\n    let resourceVersion;\r\n\r\n    if (this.constraint) {\r\n      constraint = await this.findLatestConstraint();\r\n      resourceVersion = constraint?.metadata?.resourceVersion;\r\n    } else {\r\n      constraint = await this.$dispatch('cluster/create', { type: `constraints.gatekeeper.sh.${ this.kind.toLowerCase() }` }, { root: true });\r\n    }\r\n\r\n    constraint.spec = this.spec;\r\n    constraint.metadata = this.metadata;\r\n    if (resourceVersion) {\r\n      constraint.metadata.resourceVersion = resourceVersion;\r\n    }\r\n\r\n    await constraint.save();\r\n  }\r\n\r\n  async downloadViolations() {\r\n    const Papa = await import(/* webpackChunkName: \"csv\" */'papaparse');\r\n\r\n    try {\r\n      const violations = (this.violations || []).map((violation) => {\r\n        delete violation.resourceLink;\r\n        delete violation.constraintLink;\r\n\r\n        return violation;\r\n      });\r\n\r\n      const csv = Papa.unparse(violations);\r\n\r\n      downloadFile(`violations-${ this.name }.csv`, csv, 'application/csv');\r\n    } catch (err) {\r\n      this.$dispatch('growl/fromError', { title: 'Error downloading file', err }, { root: true });\r\n    }\r\n  }\r\n\r\n  cleanForNew() {\r\n    this.$dispatch(`cleanForNew`, this);\r\n\r\n    if (this.constraint) {\r\n      delete this.constraint;\r\n    }\r\n  }\r\n\r\n  saveYaml(yaml) {\r\n    const parsed = jsyaml.load(yaml);\r\n\r\n    Object.assign(this, parsed);\r\n\r\n    return this.save();\r\n  }\r\n\r\n  async remove() {\r\n    const constraint = await this.findLatestConstraint();\r\n\r\n    return constraint.remove();\r\n  }\r\n\r\n  findLatestConstraint() {\r\n    return this.$dispatch('cluster/find', {\r\n      type: this.constraint.type, id: this.constraint.id, opt: { force: true }\r\n    }, { root: true });\r\n  }\r\n\r\n  get totalViolations() {\r\n    return this.status?.totalViolations || this.violations.length;\r\n  }\r\n\r\n  get violations() {\r\n    const violations = this.status?.violations || [];\r\n\r\n    return violations.map((violation) => {\r\n      return {\r\n        ...violation,\r\n        resourceLink: {\r\n          text: violation.name,\r\n          to:   {\r\n            name:   'c-cluster-product-resource-id',\r\n            params: {\r\n              resource: violation.kind.toLowerCase(), id: violation.name, product: 'explorer'\r\n            }\r\n          }\r\n        },\r\n        constraintLink: {\r\n          text: this.nameDisplay,\r\n          to:   this.detailLocation\r\n        }\r\n      };\r\n    });\r\n  }\r\n}\r\n"],"mappings":"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","ignoreList":[]}]}