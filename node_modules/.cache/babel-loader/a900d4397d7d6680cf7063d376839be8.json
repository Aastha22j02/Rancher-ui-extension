{"remainingRequest":"/home/ubuntu/susecon-2024-ext-demo/node_modules/babel-loader/lib/index.js??ref--16-1!/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/plugins/dashboard-store/normalize.js","dependencies":[{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/plugins/dashboard-store/normalize.js","mtime":1725271280091},{"path":"/home/ubuntu/susecon-2024-ext-demo/babel.config.js","mtime":1725268750245},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/babel-loader/lib/index.js","mtime":1725271298942}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5IjsKaW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiL2hvbWUvdWJ1bnR1L3N1c2Vjb24tMjAyNC1leHQtZGVtby9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvcmVnZW5lcmF0b3IvaW5kZXguanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmpvaW4uanMiOwppbXBvcnQgeyBTQ0hFTUEgfSBmcm9tICdAc2hlbGwvY29uZmlnL3R5cGVzJzsKaW1wb3J0IHsgYXBwbHlDaGFuZ2VzZXQsIGNoYW5nZXNldCwgY2hhbmdlc2V0Q29uZmxpY3RzIH0gZnJvbSAnQHNoZWxsL3V0aWxzL29iamVjdCc7CmV4cG9ydCB2YXIgS0VZX0ZJRUxEX0ZPUiA9IF9kZWZpbmVQcm9wZXJ0eShfZGVmaW5lUHJvcGVydHkoe30sIFNDSEVNQSwgJ19pZCcpLCAiZGVmYXVsdCIsICdpZCcpOwpleHBvcnQgZnVuY3Rpb24ga2V5RmllbGRGb3IodHlwZSkgewogIHJldHVybiBLRVlfRklFTERfRk9SW3R5cGVdIHx8IEtFWV9GSUVMRF9GT1JbJ2RlZmF1bHQnXTsKfQpleHBvcnQgZnVuY3Rpb24gbm9ybWFsaXplVHlwZSh0eXBlKSB7CiAgdmFyIF90eXBlOwogIHR5cGUgPSAoKChfdHlwZSA9IHR5cGUpID09PSBudWxsIHx8IF90eXBlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdHlwZS50eXBlKSB8fCB0eXBlIHx8ICcnKS50b0xvd2VyQ2FzZSgpOwogIHJldHVybiB0eXBlOwp9CgovLyBEZXRlY3QgYW5kIHJlc29sdmUgY29uZmxpY3RzIGZyb20gYSA0MDkgcmVzcG9uc2UuCi8vIElmIHRoZXkgYXJlIHJlc29sdmVkLCByZXR1cm4gYSBmYWxzZS15IHZhbHVlCi8vIEVsc2UgdGhleSBjYW4ndCBiZSByZXNvbHZlZCwgcmV0dXJuIGFuIGFycmF5IG9mIGVycm9ycyB0byBzaG93IHRvIHRoZSB1c2VyLgpleHBvcnQgZnVuY3Rpb24gaGFuZGxlQ29uZmxpY3QoX3gsIF94MiwgX3gzLCBfeDQsIF94NSwgX3g2KSB7CiAgcmV0dXJuIF9oYW5kbGVDb25mbGljdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CmZ1bmN0aW9uIF9oYW5kbGVDb25mbGljdCgpIHsKICBfaGFuZGxlQ29uZmxpY3QgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKGluaXRpYWxWYWx1ZUpTT04sIHZhbHVlLCBsaXZlVmFsdWUsIHJvb3RHZXR0ZXJzLCBzdG9yZSwgc3RvcmVOYW1lc3BhY2UpIHsKICAgIHZhciBvcmlnLCB1c2VyLCBjdXIsIGJnQ2hhbmdlLCB1c2VyQ2hhbmdlLCBhY3R1YWxDb25mbGljdHMsIG91dDsKICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICBjYXNlIDA6CiAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgIHJldHVybiBzdG9yZS5kaXNwYXRjaCgiIi5jb25jYXQoc3RvcmVOYW1lc3BhY2UsICIvY2xlYW5Gb3JEaWZmIiksIGluaXRpYWxWYWx1ZUpTT04sIHsKICAgICAgICAgICAgcm9vdDogdHJ1ZQogICAgICAgICAgfSk7CiAgICAgICAgY2FzZSAyOgogICAgICAgICAgb3JpZyA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNTsKICAgICAgICAgIHJldHVybiBzdG9yZS5kaXNwYXRjaCgiIi5jb25jYXQoc3RvcmVOYW1lc3BhY2UsICIvY2xlYW5Gb3JEaWZmIiksIHZhbHVlLnRvSlNPTigpLCB7CiAgICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICAgIH0pOwogICAgICAgIGNhc2UgNToKICAgICAgICAgIHVzZXIgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgX2NvbnRleHQubmV4dCA9IDg7CiAgICAgICAgICByZXR1cm4gc3RvcmUuZGlzcGF0Y2goIiIuY29uY2F0KHN0b3JlTmFtZXNwYWNlLCAiL2NsZWFuRm9yRGlmZiIpLCBsaXZlVmFsdWUudG9KU09OKCksIHsKICAgICAgICAgICAgcm9vdDogdHJ1ZQogICAgICAgICAgfSk7CiAgICAgICAgY2FzZSA4OgogICAgICAgICAgY3VyID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgIGJnQ2hhbmdlID0gY2hhbmdlc2V0KG9yaWcsIGN1cik7CiAgICAgICAgICB1c2VyQ2hhbmdlID0gY2hhbmdlc2V0KG9yaWcsIHVzZXIpOwogICAgICAgICAgYWN0dWFsQ29uZmxpY3RzID0gY2hhbmdlc2V0Q29uZmxpY3RzKGJnQ2hhbmdlLCB1c2VyQ2hhbmdlKTsKICAgICAgICAgIGNvbnNvbGUubG9nKCdCYWNrZ3JvdW5kIENoYW5nZScsIGJnQ2hhbmdlKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1jb25zb2xlCiAgICAgICAgICBjb25zb2xlLmxvZygnVXNlciBDaGFuZ2UnLCB1c2VyQ2hhbmdlKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1jb25zb2xlCiAgICAgICAgICBjb25zb2xlLmxvZygnQ29uZmxpY3RzJywgYWN0dWFsQ29uZmxpY3RzKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1jb25zb2xlCgogICAgICAgICAgdmFsdWUubWV0YWRhdGEucmVzb3VyY2VWZXJzaW9uID0gbGl2ZVZhbHVlLm1ldGFkYXRhLnJlc291cmNlVmVyc2lvbjsKICAgICAgICAgIGFwcGx5Q2hhbmdlc2V0KHZhbHVlLCBiZ0NoYW5nZSk7CiAgICAgICAgICBpZiAoIWFjdHVhbENvbmZsaWN0cy5sZW5ndGgpIHsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDIyOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAgIC8vIFN0b3AgdGhlIHNhdmUgYW5kIGxldCB0aGUgdXNlciBpbnNwZWN0IGFuZCBjb250aW51ZSBlZGl0aW5nCiAgICAgICAgICBvdXQgPSBbcm9vdEdldHRlcnNbJ2kxOG4vdCddKCd2YWxpZGF0aW9uLmNvbmZsaWN0JywgewogICAgICAgICAgICBmaWVsZHM6IGFjdHVhbENvbmZsaWN0cy5qb2luKCcsICcpLAogICAgICAgICAgICBmaWVsZENvdW50OiBhY3R1YWxDb25mbGljdHMubGVuZ3RoCiAgICAgICAgICB9KV07CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBvdXQpOwogICAgICAgIGNhc2UgMjI6CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBmYWxzZSk7CiAgICAgICAgY2FzZSAyMzoKICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgfQogICAgfSwgX2NhbGxlZSk7CiAgfSkpOwogIHJldHVybiBfaGFuZGxlQ29uZmxpY3QuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQ=="},{"version":3,"names":["SCHEMA","applyChangeset","changeset","changesetConflicts","KEY_FIELD_FOR","_defineProperty","keyFieldFor","type","normalizeType","_type","toLowerCase","handleConflict","_x","_x2","_x3","_x4","_x5","_x6","_handleConflict","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","initialValueJSON","value","liveValue","rootGetters","store","storeNamespace","orig","user","cur","bgChange","userChange","actualConflicts","out","wrap","_callee$","_context","prev","next","dispatch","concat","root","sent","toJSON","console","log","metadata","resourceVersion","length","fields","join","fieldCount","abrupt","stop"],"sources":["/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/plugins/dashboard-store/normalize.js"],"sourcesContent":["import { SCHEMA } from '@shell/config/types';\n\nimport { applyChangeset, changeset, changesetConflicts } from '@shell/utils/object';\n\nexport const KEY_FIELD_FOR = {\n  [SCHEMA]: '_id',\n  default:  'id',\n};\n\nexport function keyFieldFor(type) {\n  return KEY_FIELD_FOR[type] || KEY_FIELD_FOR['default'];\n}\n\nexport function normalizeType(type) {\n  type = (type?.type || type || '').toLowerCase();\n\n  return type;\n}\n\n// Detect and resolve conflicts from a 409 response.\n// If they are resolved, return a false-y value\n// Else they can't be resolved, return an array of errors to show to the user.\nexport async function handleConflict(initialValueJSON, value, liveValue, rootGetters, store, storeNamespace) {\n  const orig = await store.dispatch(`${ storeNamespace }/cleanForDiff`, initialValueJSON, { root: true });\n  const user = await store.dispatch(`${ storeNamespace }/cleanForDiff`, value.toJSON(), { root: true });\n  const cur = await store.dispatch(`${ storeNamespace }/cleanForDiff`, liveValue.toJSON(), { root: true });\n\n  const bgChange = changeset(orig, cur);\n  const userChange = changeset(orig, user);\n  const actualConflicts = changesetConflicts(bgChange, userChange);\n\n  console.log('Background Change', bgChange); // eslint-disable-line no-console\n  console.log('User Change', userChange); // eslint-disable-line no-console\n  console.log('Conflicts', actualConflicts); // eslint-disable-line no-console\n\n  value.metadata.resourceVersion = liveValue.metadata.resourceVersion;\n  applyChangeset(value, bgChange);\n\n  if ( actualConflicts.length ) {\n    // Stop the save and let the user inspect and continue editing\n    const out = [rootGetters['i18n/t']('validation.conflict', { fields: actualConflicts.join(', '), fieldCount: actualConflicts.length })];\n\n    return out;\n  } else {\n    // The save can continue\n    return false;\n  }\n}\n"],"mappings":"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","ignoreList":[]}]}