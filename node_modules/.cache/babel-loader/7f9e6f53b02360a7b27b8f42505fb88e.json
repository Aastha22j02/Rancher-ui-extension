{"remainingRequest":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js??ref--16-1!/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/ubuntu/suseconf/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ubuntu/suseconf/node_modules/@rancher/shell/cloud-credential/azure.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/ubuntu/suseconf/node_modules/@rancher/shell/cloud-credential/azure.vue","mtime":1725338146566},{"path":"/home/ubuntu/suseconf/babel.config.js","mtime":1725343995893},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js","mtime":1725271298942},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1725271300920}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgX3JlZ2VuZXJhdG9yUnVudGltZSBmcm9tICIvaG9tZS91YnVudHUvc3VzZWNvbmYvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL3JlZ2VuZXJhdG9yL2luZGV4LmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgQ3JlYXRlRWRpdFZpZXcgZnJvbSAnQHNoZWxsL21peGlucy9jcmVhdGUtZWRpdC12aWV3JzsKaW1wb3J0IHsgTGFiZWxlZElucHV0IH0gZnJvbSAnQGNvbXBvbmVudHMvRm9ybS9MYWJlbGVkSW5wdXQnOwppbXBvcnQgeyBhenVyZUVudmlyb25tZW50cyB9IGZyb20gJ0BzaGVsbC9tYWNoaW5lLWNvbmZpZy9henVyZSc7CmltcG9ydCB7IHBhcnNlQXp1cmVFcnJvciB9IGZyb20gJ0BzaGVsbC91dGlscy9henVyZSc7CmltcG9ydCBMYWJlbGVkU2VsZWN0IGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL2Zvcm0vTGFiZWxlZFNlbGVjdCc7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBMYWJlbGVkSW5wdXQ6IExhYmVsZWRJbnB1dCwKICAgIExhYmVsZWRTZWxlY3Q6IExhYmVsZWRTZWxlY3QKICB9LAogIG1peGluczogW0NyZWF0ZUVkaXRWaWV3XSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgaWYgKCF0aGlzLnZhbHVlLmRlY29kZWREYXRhLmVudmlyb25tZW50KSB7CiAgICAgIHRoaXMudmFsdWUuc2V0RGF0YSgnZW52aXJvbm1lbnQnLCAnQXp1cmVQdWJsaWNDbG91ZCcpOwogICAgfQogICAgcmV0dXJuIHsKICAgICAgYXp1cmVFbnZpcm9ubWVudHM6IGF6dXJlRW52aXJvbm1lbnRzCiAgICB9OwogIH0sCiAgd2F0Y2g6IHsKICAgICd2YWx1ZS5kZWNvZGVkRGF0YS5jbGllbnRJZCc6IGZ1bmN0aW9uIHZhbHVlRGVjb2RlZERhdGFDbGllbnRJZChuZXUpIHsKICAgICAgdGhpcy4kZW1pdCgndmFsaWRhdGlvbkNoYW5nZWQnLCAhIW5ldSk7CiAgICB9LAogICAgJ3ZhbHVlLmRlY29kZWREYXRhLmNsaWVudFNlY3JldCc6IGZ1bmN0aW9uIHZhbHVlRGVjb2RlZERhdGFDbGllbnRTZWNyZXQobmV1KSB7CiAgICAgIHRoaXMuJGVtaXQoJ3ZhbGlkYXRpb25DaGFuZ2VkJywgISFuZXUpOwogICAgfSwKICAgICd2YWx1ZS5kZWNvZGVkRGF0YS5zdWJzY3JpcHRpb25JZCc6IGZ1bmN0aW9uIHZhbHVlRGVjb2RlZERhdGFTdWJzY3JpcHRpb25JZChuZXUpIHsKICAgICAgdGhpcy4kZW1pdCgndmFsaWRhdGlvbkNoYW5nZWQnLCAhIW5ldSk7CiAgICB9LAogICAgJ3ZhbHVlLmRlY29kZWREYXRhLmVudmlyb25tZW50JzogZnVuY3Rpb24gdmFsdWVEZWNvZGVkRGF0YUVudmlyb25tZW50KG5ldSkgewogICAgICB0aGlzLiRlbWl0KCd2YWxpZGF0aW9uQ2hhbmdlZCcsICEhbmV1KTsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIHRlc3Q6IGZ1bmN0aW9uIHRlc3QoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvcigvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIF90aGlzJHZhbHVlJGRlY29kZWREYSwgY2xpZW50SWQsIGNsaWVudFNlY3JldCwgc3Vic2NyaXB0aW9uSWQsIGVudmlyb25tZW50LCBwYXJzZWQ7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF90aGlzJHZhbHVlJGRlY29kZWREYSA9IF90aGlzLnZhbHVlLmRlY29kZWREYXRhLCBjbGllbnRJZCA9IF90aGlzJHZhbHVlJGRlY29kZWREYS5jbGllbnRJZCwgY2xpZW50U2VjcmV0ID0gX3RoaXMkdmFsdWUkZGVjb2RlZERhLmNsaWVudFNlY3JldCwgc3Vic2NyaXB0aW9uSWQgPSBfdGhpcyR2YWx1ZSRkZWNvZGVkRGEuc3Vic2NyaXB0aW9uSWQsIGVudmlyb25tZW50ID0gX3RoaXMkdmFsdWUkZGVjb2RlZERhLmVudmlyb25tZW50OwogICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxOwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OwogICAgICAgICAgICAgIHJldHVybiBfdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ21hbmFnZW1lbnQvcmVxdWVzdCcsIHsKICAgICAgICAgICAgICAgIHVybDogJy9tZXRhL2Frc0NoZWNrQ3JlZGVudGlhbHMnLAogICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsCiAgICAgICAgICAgICAgICBkYXRhOiB7CiAgICAgICAgICAgICAgICAgIGNsaWVudElkOiBjbGllbnRJZCwKICAgICAgICAgICAgICAgICAgY2xpZW50U2VjcmV0OiBjbGllbnRTZWNyZXQsCiAgICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbklkOiBzdWJzY3JpcHRpb25JZCwKICAgICAgICAgICAgICAgICAgZW52aXJvbm1lbnQ6IGVudmlyb25tZW50CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgcmVkaXJlY3RVbmF1dGhvcml6ZWQ6IGZhbHNlCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCB0cnVlKTsKICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSA3OwogICAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbImNhdGNoIl0oMSk7CiAgICAgICAgICAgICAgaWYgKCFfY29udGV4dC50MC5lcnJvcikgewogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEzOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHBhcnNlZCA9IHBhcnNlQXp1cmVFcnJvcihfY29udGV4dC50MC5lcnJvcik7CiAgICAgICAgICAgICAgaWYgKCFwYXJzZWQpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMzsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCB7CiAgICAgICAgICAgICAgICBlcnJvcnM6IFtwYXJzZWRdCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgZmFsc2UpOwogICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSwgbnVsbCwgW1sxLCA3XV0pOwogICAgICB9KSkoKTsKICAgIH0KICB9Cn07"},{"version":3,"names":["CreateEditView","LabeledInput","azureEnvironments","parseAzureError","LabeledSelect","components","mixins","data","value","decodedData","environment","setData","watch","valueDecodedDataClientId","neu","$emit","valueDecodedDataClientSecret","valueDecodedDataSubscriptionId","valueDecodedDataEnvironment","methods","test","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_this$value$decodedDa","clientId","clientSecret","subscriptionId","parsed","wrap","_callee$","_context","prev","next","$store","dispatch","url","method","redirectUnauthorized","abrupt","t0","error","errors","stop"],"sources":["node_modules/@rancher/shell/cloud-credential/azure.vue"],"sourcesContent":["<script>\nimport CreateEditView from '@shell/mixins/create-edit-view';\nimport { LabeledInput } from '@components/Form/LabeledInput';\nimport { azureEnvironments } from '@shell/machine-config/azure';\nimport { parseAzureError } from '@shell/utils/azure';\nimport LabeledSelect from '@shell/components/form/LabeledSelect';\n\nexport default {\n  components: { LabeledInput, LabeledSelect },\n  mixins:     [CreateEditView],\n\n  data() {\n    if ( !this.value.decodedData.environment ) {\n      this.value.setData('environment', 'AzurePublicCloud');\n    }\n\n    return { azureEnvironments };\n  },\n\n  watch: {\n    'value.decodedData.clientId'(neu) {\n      this.$emit('validationChanged', !!neu);\n    },\n    'value.decodedData.clientSecret'(neu) {\n      this.$emit('validationChanged', !!neu);\n    },\n    'value.decodedData.subscriptionId'(neu) {\n      this.$emit('validationChanged', !!neu);\n    },\n    'value.decodedData.environment'(neu) {\n      this.$emit('validationChanged', !!neu);\n    },\n  },\n\n  methods: {\n    async test() {\n      const {\n        clientId,\n        clientSecret,\n        subscriptionId,\n        environment,\n      } = this.value.decodedData;\n\n      try {\n        await this.$store.dispatch('management/request', {\n          url:    '/meta/aksCheckCredentials',\n          method: 'POST',\n          data:   {\n            clientId,\n            clientSecret,\n            subscriptionId,\n            environment,\n          },\n          redirectUnauthorized: false,\n        });\n\n        return true;\n      } catch (e) {\n        if (e.error) {\n          const parsed = parseAzureError(e.error);\n\n          if (parsed) {\n            return { errors: [parsed] };\n          }\n        }\n\n        // Can't parse error, so go with the generic 'auth failed' error message\n        return false;\n      }\n    },\n  },\n};\n</script>\n\n<template>\n  <section>\n    <div class=\"row mb-10\">\n      <div class=\"col span-6\">\n        <LabeledSelect\n          :value=\"value.decodedData.environment\"\n          :mode=\"mode\"\n          :options=\"azureEnvironments\"\n          option-key=\"value\"\n          option-label=\"value\"\n          :searchable=\"false\"\n          :required=\"true\"\n          :label=\"t('cluster.credential.azure.environment.label')\"\n          data-testid=\"azure-cloud-credentials-environment\"\n          @input=\"value.setData('environment', $event)\"\n        />\n      </div>\n      <div class=\"col span-6\">\n        <LabeledInput\n          :value=\"value.decodedData.subscriptionId\"\n          label-key=\"cluster.credential.azure.subscriptionId.label\"\n          type=\"text\"\n          :mode=\"mode\"\n          :required=\"true\"\n          data-testid=\"azure-cloud-credentials-subscription-id\"\n          @input=\"value.setData('subscriptionId', $event)\"\n        />\n      </div>\n    </div>\n    <div class=\"row mb-10\">\n      <div class=\"col span-6\">\n        <LabeledInput\n          :value=\"value.decodedData.clientId\"\n          label-key=\"cluster.credential.azure.clientId.label\"\n          type=\"text\"\n          :mode=\"mode\"\n          :required=\"true\"\n          data-testid=\"azure-cloud-credentials-client-id\"\n          @input=\"value.setData('clientId', $event)\"\n        />\n      </div>\n      <div class=\"col span-6\">\n        <LabeledInput\n          :value=\"value.decodedData.clientSecret\"\n          label-key=\"cluster.credential.azure.clientSecret.label\"\n          type=\"password\"\n          :mode=\"mode\"\n          :required=\"true\"\n          data-testid=\"azure-cloud-credentials-client-secret\"\n          @input=\"value.setData('clientSecret', $event)\"\n        />\n      </div>\n    </div>\n  </section>\n</template>\n"],"mappings":";;;AACA,OAAAA,cAAA;AACA,SAAAC,YAAA;AACA,SAAAC,iBAAA;AACA,SAAAC,eAAA;AACA,OAAAC,aAAA;AAEA;EACAC,UAAA;IAAAJ,YAAA,EAAAA,YAAA;IAAAG,aAAA,EAAAA;EAAA;EACAE,MAAA,GAAAN,cAAA;EAEAO,IAAA,WAAAA,KAAA;IACA,UAAAC,KAAA,CAAAC,WAAA,CAAAC,WAAA;MACA,KAAAF,KAAA,CAAAG,OAAA;IACA;IAEA;MAAAT,iBAAA,EAAAA;IAAA;EACA;EAEAU,KAAA;IACA,uCAAAC,yBAAAC,GAAA;MACA,KAAAC,KAAA,wBAAAD,GAAA;IACA;IACA,2CAAAE,6BAAAF,GAAA;MACA,KAAAC,KAAA,wBAAAD,GAAA;IACA;IACA,6CAAAG,+BAAAH,GAAA;MACA,KAAAC,KAAA,wBAAAD,GAAA;IACA;IACA,0CAAAI,4BAAAJ,GAAA;MACA,KAAAC,KAAA,wBAAAD,GAAA;IACA;EACA;EAEAK,OAAA;IACAC,IAAA,WAAAA,KAAA;MAAA,IAAAC,KAAA;MAAA,OAAAC,iBAAA,cAAAC,mBAAA,CAAAC,IAAA,UAAAC,QAAA;QAAA,IAAAC,qBAAA,EAAAC,QAAA,EAAAC,YAAA,EAAAC,cAAA,EAAAnB,WAAA,EAAAoB,MAAA;QAAA,OAAAP,mBAAA,CAAAQ,IAAA,UAAAC,SAAAC,QAAA;UAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;YAAA;cAAAT,qBAAA,GAMAL,KAAA,CAAAb,KAAA,CAAAC,WAAA,EAJAkB,QAAA,GAAAD,qBAAA,CAAAC,QAAA,EACAC,YAAA,GAAAF,qBAAA,CAAAE,YAAA,EACAC,cAAA,GAAAH,qBAAA,CAAAG,cAAA,EACAnB,WAAA,GAAAgB,qBAAA,CAAAhB,WAAA;cAAAuB,QAAA,CAAAC,IAAA;cAAAD,QAAA,CAAAE,IAAA;cAAA,OAIAd,KAAA,CAAAe,MAAA,CAAAC,QAAA;gBACAC,GAAA;gBACAC,MAAA;gBACAhC,IAAA;kBACAoB,QAAA,EAAAA,QAAA;kBACAC,YAAA,EAAAA,YAAA;kBACAC,cAAA,EAAAA,cAAA;kBACAnB,WAAA,EAAAA;gBACA;gBACA8B,oBAAA;cACA;YAAA;cAAA,OAAAP,QAAA,CAAAQ,MAAA,WAEA;YAAA;cAAAR,QAAA,CAAAC,IAAA;cAAAD,QAAA,CAAAS,EAAA,GAAAT,QAAA;cAAA,KAEAA,QAAA,CAAAS,EAAA,CAAAC,KAAA;gBAAAV,QAAA,CAAAE,IAAA;gBAAA;cAAA;cACAL,MAAA,GAAA3B,eAAA,CAAA8B,QAAA,CAAAS,EAAA,CAAAC,KAAA;cAAA,KAEAb,MAAA;gBAAAG,QAAA,CAAAE,IAAA;gBAAA;cAAA;cAAA,OAAAF,QAAA,CAAAQ,MAAA,WACA;gBAAAG,MAAA,GAAAd,MAAA;cAAA;YAAA;cAAA,OAAAG,QAAA,CAAAQ,MAAA,WAKA;YAAA;YAAA;cAAA,OAAAR,QAAA,CAAAY,IAAA;UAAA;QAAA,GAAApB,OAAA;MAAA;IAEA;EACA;AACA","ignoreList":[]}]}