{"remainingRequest":"/home/ubuntu/susecon-2024-ext-demo/node_modules/babel-loader/lib/index.js??ref--16-1!/home/ubuntu/susecon-2024-ext-demo/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/ubuntu/susecon-2024-ext-demo/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/cloud-credential/azure.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/cloud-credential/azure.vue","mtime":1725271280091},{"path":"/home/ubuntu/susecon-2024-ext-demo/babel.config.js","mtime":1725268750245},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/babel-loader/lib/index.js","mtime":1725271298942},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1725271300920}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgX3JlZ2VuZXJhdG9yUnVudGltZSBmcm9tICIvaG9tZS91YnVudHUvc3VzZWNvbi0yMDI0LWV4dC1kZW1vL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9yZWdlbmVyYXRvci9pbmRleC5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0IENyZWF0ZUVkaXRWaWV3IGZyb20gJ0BzaGVsbC9taXhpbnMvY3JlYXRlLWVkaXQtdmlldyc7CmltcG9ydCB7IExhYmVsZWRJbnB1dCB9IGZyb20gJ0Bjb21wb25lbnRzL0Zvcm0vTGFiZWxlZElucHV0JzsKaW1wb3J0IHsgYXp1cmVFbnZpcm9ubWVudHMgfSBmcm9tICdAc2hlbGwvbWFjaGluZS1jb25maWcvYXp1cmUnOwppbXBvcnQgeyBwYXJzZUF6dXJlRXJyb3IgfSBmcm9tICdAc2hlbGwvdXRpbHMvYXp1cmUnOwppbXBvcnQgTGFiZWxlZFNlbGVjdCBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9mb3JtL0xhYmVsZWRTZWxlY3QnOwpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgTGFiZWxlZElucHV0OiBMYWJlbGVkSW5wdXQsCiAgICBMYWJlbGVkU2VsZWN0OiBMYWJlbGVkU2VsZWN0CiAgfSwKICBtaXhpbnM6IFtDcmVhdGVFZGl0Vmlld10sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIGlmICghdGhpcy52YWx1ZS5kZWNvZGVkRGF0YS5lbnZpcm9ubWVudCkgewogICAgICB0aGlzLnZhbHVlLnNldERhdGEoJ2Vudmlyb25tZW50JywgJ0F6dXJlUHVibGljQ2xvdWQnKTsKICAgIH0KICAgIHJldHVybiB7CiAgICAgIGF6dXJlRW52aXJvbm1lbnRzOiBhenVyZUVudmlyb25tZW50cwogICAgfTsKICB9LAogIHdhdGNoOiB7CiAgICAndmFsdWUuZGVjb2RlZERhdGEuY2xpZW50SWQnOiBmdW5jdGlvbiB2YWx1ZURlY29kZWREYXRhQ2xpZW50SWQobmV1KSB7CiAgICAgIHRoaXMuJGVtaXQoJ3ZhbGlkYXRpb25DaGFuZ2VkJywgISFuZXUpOwogICAgfSwKICAgICd2YWx1ZS5kZWNvZGVkRGF0YS5jbGllbnRTZWNyZXQnOiBmdW5jdGlvbiB2YWx1ZURlY29kZWREYXRhQ2xpZW50U2VjcmV0KG5ldSkgewogICAgICB0aGlzLiRlbWl0KCd2YWxpZGF0aW9uQ2hhbmdlZCcsICEhbmV1KTsKICAgIH0sCiAgICAndmFsdWUuZGVjb2RlZERhdGEuc3Vic2NyaXB0aW9uSWQnOiBmdW5jdGlvbiB2YWx1ZURlY29kZWREYXRhU3Vic2NyaXB0aW9uSWQobmV1KSB7CiAgICAgIHRoaXMuJGVtaXQoJ3ZhbGlkYXRpb25DaGFuZ2VkJywgISFuZXUpOwogICAgfSwKICAgICd2YWx1ZS5kZWNvZGVkRGF0YS5lbnZpcm9ubWVudCc6IGZ1bmN0aW9uIHZhbHVlRGVjb2RlZERhdGFFbnZpcm9ubWVudChuZXUpIHsKICAgICAgdGhpcy4kZW1pdCgndmFsaWRhdGlvbkNoYW5nZWQnLCAhIW5ldSk7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICB0ZXN0OiBmdW5jdGlvbiB0ZXN0KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgX3RoaXMkdmFsdWUkZGVjb2RlZERhLCBjbGllbnRJZCwgY2xpZW50U2VjcmV0LCBzdWJzY3JpcHRpb25JZCwgZW52aXJvbm1lbnQsIHBhcnNlZDsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX3RoaXMkdmFsdWUkZGVjb2RlZERhID0gX3RoaXMudmFsdWUuZGVjb2RlZERhdGEsIGNsaWVudElkID0gX3RoaXMkdmFsdWUkZGVjb2RlZERhLmNsaWVudElkLCBjbGllbnRTZWNyZXQgPSBfdGhpcyR2YWx1ZSRkZWNvZGVkRGEuY2xpZW50U2VjcmV0LCBzdWJzY3JpcHRpb25JZCA9IF90aGlzJHZhbHVlJGRlY29kZWREYS5zdWJzY3JpcHRpb25JZCwgZW52aXJvbm1lbnQgPSBfdGhpcyR2YWx1ZSRkZWNvZGVkRGEuZW52aXJvbm1lbnQ7CiAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDE7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLiRzdG9yZS5kaXNwYXRjaCgnbWFuYWdlbWVudC9yZXF1ZXN0JywgewogICAgICAgICAgICAgICAgdXJsOiAnL21ldGEvYWtzQ2hlY2tDcmVkZW50aWFscycsCiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywKICAgICAgICAgICAgICAgIGRhdGE6IHsKICAgICAgICAgICAgICAgICAgY2xpZW50SWQ6IGNsaWVudElkLAogICAgICAgICAgICAgICAgICBjbGllbnRTZWNyZXQ6IGNsaWVudFNlY3JldCwKICAgICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uSWQ6IHN1YnNjcmlwdGlvbklkLAogICAgICAgICAgICAgICAgICBlbnZpcm9ubWVudDogZW52aXJvbm1lbnQKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICByZWRpcmVjdFVuYXV0aG9yaXplZDogZmFsc2UKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIHRydWUpOwogICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDc7CiAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSgxKTsKICAgICAgICAgICAgICBpZiAoIV9jb250ZXh0LnQwLmVycm9yKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTM7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgcGFyc2VkID0gcGFyc2VBenVyZUVycm9yKF9jb250ZXh0LnQwLmVycm9yKTsKICAgICAgICAgICAgICBpZiAoIXBhcnNlZCkgewogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEzOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIHsKICAgICAgICAgICAgICAgIGVycm9yczogW3BhcnNlZF0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBmYWxzZSk7CiAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlLCBudWxsLCBbWzEsIDddXSk7CiAgICAgIH0pKSgpOwogICAgfQogIH0KfTs="},{"version":3,"names":["CreateEditView","LabeledInput","azureEnvironments","parseAzureError","LabeledSelect","components","mixins","data","value","decodedData","environment","setData","watch","valueDecodedDataClientId","neu","$emit","valueDecodedDataClientSecret","valueDecodedDataSubscriptionId","valueDecodedDataEnvironment","methods","test","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_this$value$decodedDa","clientId","clientSecret","subscriptionId","parsed","wrap","_callee$","_context","prev","next","$store","dispatch","url","method","redirectUnauthorized","abrupt","t0","error","errors","stop"],"sources":["node_modules/@rancher/shell/cloud-credential/azure.vue"],"sourcesContent":["<script>\nimport CreateEditView from '@shell/mixins/create-edit-view';\nimport { LabeledInput } from '@components/Form/LabeledInput';\nimport { azureEnvironments } from '@shell/machine-config/azure';\nimport { parseAzureError } from '@shell/utils/azure';\nimport LabeledSelect from '@shell/components/form/LabeledSelect';\n\nexport default {\n  components: { LabeledInput, LabeledSelect },\n  mixins:     [CreateEditView],\n\n  data() {\n    if ( !this.value.decodedData.environment ) {\n      this.value.setData('environment', 'AzurePublicCloud');\n    }\n\n    return { azureEnvironments };\n  },\n\n  watch: {\n    'value.decodedData.clientId'(neu) {\n      this.$emit('validationChanged', !!neu);\n    },\n    'value.decodedData.clientSecret'(neu) {\n      this.$emit('validationChanged', !!neu);\n    },\n    'value.decodedData.subscriptionId'(neu) {\n      this.$emit('validationChanged', !!neu);\n    },\n    'value.decodedData.environment'(neu) {\n      this.$emit('validationChanged', !!neu);\n    },\n  },\n\n  methods: {\n    async test() {\n      const {\n        clientId,\n        clientSecret,\n        subscriptionId,\n        environment,\n      } = this.value.decodedData;\n\n      try {\n        await this.$store.dispatch('management/request', {\n          url:    '/meta/aksCheckCredentials',\n          method: 'POST',\n          data:   {\n            clientId,\n            clientSecret,\n            subscriptionId,\n            environment,\n          },\n          redirectUnauthorized: false,\n        });\n\n        return true;\n      } catch (e) {\n        if (e.error) {\n          const parsed = parseAzureError(e.error);\n\n          if (parsed) {\n            return { errors: [parsed] };\n          }\n        }\n\n        // Can't parse error, so go with the generic 'auth failed' error message\n        return false;\n      }\n    },\n  },\n};\n</script>\n\n<template>\n  <section>\n    <div class=\"row mb-10\">\n      <div class=\"col span-6\">\n        <LabeledSelect\n          :value=\"value.decodedData.environment\"\n          :mode=\"mode\"\n          :options=\"azureEnvironments\"\n          option-key=\"value\"\n          option-label=\"value\"\n          :searchable=\"false\"\n          :required=\"true\"\n          :label=\"t('cluster.credential.azure.environment.label')\"\n          data-testid=\"azure-cloud-credentials-environment\"\n          @input=\"value.setData('environment', $event)\"\n        />\n      </div>\n      <div class=\"col span-6\">\n        <LabeledInput\n          :value=\"value.decodedData.subscriptionId\"\n          label-key=\"cluster.credential.azure.subscriptionId.label\"\n          type=\"text\"\n          :mode=\"mode\"\n          :required=\"true\"\n          data-testid=\"azure-cloud-credentials-subscription-id\"\n          @input=\"value.setData('subscriptionId', $event)\"\n        />\n      </div>\n    </div>\n    <div class=\"row mb-10\">\n      <div class=\"col span-6\">\n        <LabeledInput\n          :value=\"value.decodedData.clientId\"\n          label-key=\"cluster.credential.azure.clientId.label\"\n          type=\"text\"\n          :mode=\"mode\"\n          :required=\"true\"\n          data-testid=\"azure-cloud-credentials-client-id\"\n          @input=\"value.setData('clientId', $event)\"\n        />\n      </div>\n      <div class=\"col span-6\">\n        <LabeledInput\n          :value=\"value.decodedData.clientSecret\"\n          label-key=\"cluster.credential.azure.clientSecret.label\"\n          type=\"password\"\n          :mode=\"mode\"\n          :required=\"true\"\n          data-testid=\"azure-cloud-credentials-client-secret\"\n          @input=\"value.setData('clientSecret', $event)\"\n        />\n      </div>\n    </div>\n  </section>\n</template>\n"],"mappings":";;;AACA,OAAAA,cAAA;AACA,SAAAC,YAAA;AACA,SAAAC,iBAAA;AACA,SAAAC,eAAA;AACA,OAAAC,aAAA;AAEA;EACAC,UAAA;IAAAJ,YAAA,EAAAA,YAAA;IAAAG,aAAA,EAAAA;EAAA;EACAE,MAAA,GAAAN,cAAA;EAEAO,IAAA,WAAAA,KAAA;IACA,UAAAC,KAAA,CAAAC,WAAA,CAAAC,WAAA;MACA,KAAAF,KAAA,CAAAG,OAAA;IACA;IAEA;MAAAT,iBAAA,EAAAA;IAAA;EACA;EAEAU,KAAA;IACA,uCAAAC,yBAAAC,GAAA;MACA,KAAAC,KAAA,wBAAAD,GAAA;IACA;IACA,2CAAAE,6BAAAF,GAAA;MACA,KAAAC,KAAA,wBAAAD,GAAA;IACA;IACA,6CAAAG,+BAAAH,GAAA;MACA,KAAAC,KAAA,wBAAAD,GAAA;IACA;IACA,0CAAAI,4BAAAJ,GAAA;MACA,KAAAC,KAAA,wBAAAD,GAAA;IACA;EACA;EAEAK,OAAA;IACAC,IAAA,WAAAA,KAAA;MAAA,IAAAC,KAAA;MAAA,OAAAC,iBAAA,eAAAC,mBAAA,CAAAC,IAAA,UAAAC,QAAA;QAAA,IAAAC,qBAAA,EAAAC,QAAA,EAAAC,YAAA,EAAAC,cAAA,EAAAnB,WAAA,EAAAoB,MAAA;QAAA,OAAAP,mBAAA,CAAAQ,IAAA,UAAAC,SAAAC,QAAA;UAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;YAAA;cAAAT,qBAAA,GAMAL,KAAA,CAAAb,KAAA,CAAAC,WAAA,EAJAkB,QAAA,GAAAD,qBAAA,CAAAC,QAAA,EACAC,YAAA,GAAAF,qBAAA,CAAAE,YAAA,EACAC,cAAA,GAAAH,qBAAA,CAAAG,cAAA,EACAnB,WAAA,GAAAgB,qBAAA,CAAAhB,WAAA;cAAAuB,QAAA,CAAAC,IAAA;cAAAD,QAAA,CAAAE,IAAA;cAAA,OAIAd,KAAA,CAAAe,MAAA,CAAAC,QAAA;gBACAC,GAAA;gBACAC,MAAA;gBACAhC,IAAA;kBACAoB,QAAA,EAAAA,QAAA;kBACAC,YAAA,EAAAA,YAAA;kBACAC,cAAA,EAAAA,cAAA;kBACAnB,WAAA,EAAAA;gBACA;gBACA8B,oBAAA;cACA;YAAA;cAAA,OAAAP,QAAA,CAAAQ,MAAA,WAEA;YAAA;cAAAR,QAAA,CAAAC,IAAA;cAAAD,QAAA,CAAAS,EAAA,GAAAT,QAAA;cAAA,KAEAA,QAAA,CAAAS,EAAA,CAAAC,KAAA;gBAAAV,QAAA,CAAAE,IAAA;gBAAA;cAAA;cACAL,MAAA,GAAA3B,eAAA,CAAA8B,QAAA,CAAAS,EAAA,CAAAC,KAAA;cAAA,KAEAb,MAAA;gBAAAG,QAAA,CAAAE,IAAA;gBAAA;cAAA;cAAA,OAAAF,QAAA,CAAAQ,MAAA,WACA;gBAAAG,MAAA,GAAAd,MAAA;cAAA;YAAA;cAAA,OAAAG,QAAA,CAAAQ,MAAA,WAKA;YAAA;YAAA;cAAA,OAAAR,QAAA,CAAAY,IAAA;UAAA;QAAA,GAAApB,OAAA;MAAA;IAEA;EACA;AACA","ignoreList":[]}]}