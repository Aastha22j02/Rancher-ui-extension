{"remainingRequest":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js??ref--16-1!/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js??ref--17-0!/home/ubuntu/suseconf/node_modules/ts-loader/index.js??ref--17-1!/home/ubuntu/suseconf/node_modules/@rancher/shell/edit/__tests__/fleet.cattle.io.gitrepo.test.ts","dependencies":[{"path":"/home/ubuntu/suseconf/node_modules/@rancher/shell/edit/__tests__/fleet.cattle.io.gitrepo.test.ts","mtime":1725338146566},{"path":"/home/ubuntu/suseconf/babel.config.js","mtime":1725343995893},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js","mtime":1725271298942},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/ts-loader/index.js","mtime":1725271299135}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgX3JlZ2VuZXJhdG9yUnVudGltZSBmcm9tICIvaG9tZS91YnVudHUvc3VzZWNvbmYvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL3JlZ2VuZXJhdG9yL2luZGV4LmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maW5kLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCB7IG1vdW50LCBjcmVhdGVMb2NhbFZ1ZSB9IGZyb20gJ0B2dWUvdGVzdC11dGlscyc7CmltcG9ydCBHaXRSZXBvIGZyb20gJ0BzaGVsbC9lZGl0L2ZsZWV0LmNhdHRsZS5pby5naXRyZXBvLnZ1ZSc7CmltcG9ydCBWdWV4IGZyb20gJ3Z1ZXgnOwp2YXIgbG9jYWxWdWUgPSBjcmVhdGVMb2NhbFZ1ZSgpOwpsb2NhbFZ1ZS51c2UoVnVleCk7CmRlc2NyaWJlKCd2aWV3OiBmbGVldC5jYXR0bGUuaW8uZ2l0cmVwbyBzaG91bGQnLCBmdW5jdGlvbiAoKSB7CiAgdmFyIG1vY2tTdG9yZSA9IHsKICAgIGRpc3BhdGNoOiBqZXN0LmZuKCksCiAgICBnZXR0ZXJzOiB7CiAgICAgICdpMThuL3QnOiBmdW5jdGlvbiBpMThuX3QodGV4dCkgewogICAgICAgIHJldHVybiB0ZXh0OwogICAgICB9LAogICAgICB0OiBmdW5jdGlvbiB0KHRleHQpIHsKICAgICAgICByZXR1cm4gdGV4dDsKICAgICAgfSwKICAgICAgY3VycmVudFN0b3JlOiBmdW5jdGlvbiBjdXJyZW50U3RvcmUoKSB7CiAgICAgICAgcmV0dXJuICdjdXJyZW50X3N0b3JlJzsKICAgICAgfSwKICAgICAgJ2N1cnJlbnRfc3RvcmUvc2NoZW1hRm9yJzogamVzdC5mbigpLAogICAgICAnY3VycmVudF9zdG9yZS9hbGwnOiBqZXN0LmZuKCksCiAgICAgIHdvcmtzcGFjZTogamVzdC5mbigpCiAgICB9CiAgfTsKICB2YXIgbW9ja3MgPSB7CiAgICAkc3RvcmU6IG1vY2tTdG9yZSwKICAgICRmZXRjaFN0YXRlOiB7CiAgICAgIHBlbmRpbmc6IGZhbHNlCiAgICB9LAogICAgJHJvdXRlOiB7CiAgICAgIHF1ZXJ5OiB7CiAgICAgICAgQVM6ICcnCiAgICAgIH0sCiAgICAgIG5hbWU6IHsKICAgICAgICBlbmRzV2l0aDogZnVuY3Rpb24gZW5kc1dpdGgoKSB7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfTsKICB2YXIgdmFsdWVzID0gewogICAgbWV0YWRhdGE6IHsKICAgICAgbmFtZXNwYWNlOiAndGVzdCcKICAgIH0sCiAgICBzcGVjOiB7CiAgICAgIHRlbXBsYXRlOiB7fSwKICAgICAgY29ycmVjdERyaWZ0OiB7CiAgICAgICAgZW5hYmxlZDogZmFsc2UKICAgICAgfQogICAgfSwKICAgIHRhcmdldEluZm86IHsKICAgICAgbW9kZTogJ2FsbCcKICAgIH0KICB9OwogIHZhciB3cmFwcGVyID0gbW91bnQoR2l0UmVwbywgewogICAgbG9jYWxWdWU6IGxvY2FsVnVlLAogICAgcHJvcHNEYXRhOiB7CiAgICAgIHZhbHVlOiB2YWx1ZXMKICAgIH0sCiAgICBtb2NrczogbW9ja3MKICB9KTsKICBpdCgnc2hvdWxkIGhhdmUgc2VsZi1oZWFsaW5nIGNoZWNrYm94IGFuZCBiYW5uZXInLCBmdW5jdGlvbiAoKSB7CiAgICB2YXIgY29ycmVjdERyaWZ0Q2hlY2tib3ggPSB3cmFwcGVyLmZpbmQoJ1tkYXRhLXRlc3RpZD0iR2l0UmVwby1jb3JyZWN0RHJpZnQtY2hlY2tib3giXScpOwogICAgdmFyIGNvcnJlY3REcmlmdEJhbm5lciA9IHdyYXBwZXIuZmluZCgnW2RhdGEtdGVzdGlkPSJHaXRSZXBvLWNvcnJlY3REcmlmdC1iYW5uZXIiXScpOwogICAgZXhwZWN0KGNvcnJlY3REcmlmdENoZWNrYm94LmV4aXN0cygpKS50b0JlVHJ1dGh5KCk7CiAgICBleHBlY3QoY29ycmVjdERyaWZ0QmFubmVyLmV4aXN0cygpKS50b0JlVHJ1dGh5KCk7CiAgICBleHBlY3QoY29ycmVjdERyaWZ0Q2hlY2tib3gucHJvcHMoKS52YWx1ZSkudG9CZUZhbHN5KCk7CiAgfSk7CiAgaXQoJ3Nob3VsZCBlbmFibGUgZHJpZnQgaWYgc2VsZi1oZWFsaW5nIGlzIGNoZWNrZWQnLCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgdmFyIGNvcnJlY3REcmlmdENoZWNrYm94LCBjb3JyZWN0RHJpZnRDb250YWluZXI7CiAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgY2FzZSAwOgogICAgICAgICAgY29ycmVjdERyaWZ0Q2hlY2tib3ggPSB3cmFwcGVyLmZpbmQoJ1tkYXRhLXRlc3RpZD0iR2l0UmVwby1jb3JyZWN0RHJpZnQtY2hlY2tib3giXScpOwogICAgICAgICAgY29ycmVjdERyaWZ0Q29udGFpbmVyID0gd3JhcHBlci5maW5kKCdbZGF0YS10ZXN0aWQ9IkdpdFJlcG8tY29ycmVjdERyaWZ0LWNoZWNrYm94Il0gLmNoZWNrYm94LWNvbnRhaW5lcicpOwogICAgICAgICAgZXhwZWN0KGNvcnJlY3REcmlmdENvbnRhaW5lci5leGlzdHMoKSkudG9CZVRydXRoeSgpOwogICAgICAgICAgX2NvbnRleHQubmV4dCA9IDU7CiAgICAgICAgICByZXR1cm4gY29ycmVjdERyaWZ0Q29udGFpbmVyLnRyaWdnZXIoJ2NsaWNrJyk7CiAgICAgICAgY2FzZSA1OgogICAgICAgICAgZXhwZWN0KGNvcnJlY3REcmlmdENoZWNrYm94LmVtaXR0ZWQoJ2lucHV0JykpLnRvSGF2ZUxlbmd0aCgxKTsKICAgICAgICAgIGV4cGVjdChjb3JyZWN0RHJpZnRDaGVja2JveC5lbWl0dGVkKCdpbnB1dCcpWzBdWzBdKS50b0JlKHRydWUpOwogICAgICAgICAgZXhwZWN0KGNvcnJlY3REcmlmdENoZWNrYm94LnByb3BzKCkudmFsdWUpLnRvQmVUcnV0aHkoKTsKICAgICAgICBjYXNlIDg6CiAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgIH0KICAgIH0sIF9jYWxsZWUpOwogIH0pKSk7Cn0pOw=="},{"version":3,"names":["mount","createLocalVue","GitRepo","Vuex","localVue","use","describe","mockStore","dispatch","jest","fn","getters","i18n_t","text","t","currentStore","workspace","mocks","$store","$fetchState","pending","$route","query","AS","name","endsWith","values","metadata","namespace","spec","template","correctDrift","enabled","targetInfo","mode","wrapper","propsData","value","it","correctDriftCheckbox","find","correctDriftBanner","expect","exists","toBeTruthy","props","toBeFalsy","_asyncToGenerator","_regeneratorRuntime","mark","_callee","correctDriftContainer","wrap","_callee$","_context","prev","next","trigger","emitted","toHaveLength","toBe","stop"],"sources":["/home/ubuntu/suseconf/node_modules/@rancher/shell/edit/__tests__/fleet.cattle.io.gitrepo.test.ts"],"sourcesContent":["import { mount, createLocalVue } from '@vue/test-utils';\nimport GitRepo from '@shell/edit/fleet.cattle.io.gitrepo.vue';\nimport Vuex from 'vuex';\n\nconst localVue = createLocalVue();\n\nlocalVue.use(Vuex);\n\ndescribe('view: fleet.cattle.io.gitrepo should', () => {\n  const mockStore = {\n    dispatch: jest.fn(),\n    getters:  {\n      'i18n/t':                  (text: string) => text,\n      t:                         (text: string) => text,\n      currentStore:              () => 'current_store',\n      'current_store/schemaFor': jest.fn(),\n      'current_store/all':       jest.fn(),\n      workspace:                 jest.fn(),\n    }\n  };\n  const mocks = {\n    $store:      mockStore,\n    $fetchState: { pending: false },\n    $route:      {\n      query: { AS: '' },\n      name:  {\n        endsWith: () => {\n          return false;\n        }\n      }\n    },\n  };\n  const values = {\n    metadata: { namespace: 'test' }, spec: { template: {}, correctDrift: { enabled: false } }, targetInfo: { mode: 'all' },\n  };\n  const wrapper = mount(GitRepo, {\n    localVue,\n    propsData: { value: values },\n    mocks\n  });\n\n  it('should have self-healing checkbox and banner', () => {\n    const correctDriftCheckbox = wrapper.find('[data-testid=\"GitRepo-correctDrift-checkbox\"]');\n    const correctDriftBanner = wrapper.find('[data-testid=\"GitRepo-correctDrift-banner\"]');\n\n    expect(correctDriftCheckbox.exists()).toBeTruthy();\n    expect(correctDriftBanner.exists()).toBeTruthy();\n    expect(correctDriftCheckbox.props().value).toBeFalsy();\n  });\n\n  it('should enable drift if self-healing is checked', async() => {\n    const correctDriftCheckbox = wrapper.find('[data-testid=\"GitRepo-correctDrift-checkbox\"]');\n    const correctDriftContainer = wrapper.find('[data-testid=\"GitRepo-correctDrift-checkbox\"] .checkbox-container');\n\n    expect(correctDriftContainer.exists()).toBeTruthy();\n\n    await correctDriftContainer.trigger('click');\n\n    expect(correctDriftCheckbox.emitted('input')).toHaveLength(1);\n    expect(correctDriftCheckbox.emitted('input')![0][0]).toBe(true);\n    expect(correctDriftCheckbox.props().value).toBeTruthy();\n  });\n});\n"],"mappings":"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","ignoreList":[]}]}