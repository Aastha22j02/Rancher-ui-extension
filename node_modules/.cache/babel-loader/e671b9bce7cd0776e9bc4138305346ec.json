{"remainingRequest":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js??ref--16-1!/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/ubuntu/suseconf/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ubuntu/suseconf/node_modules/@rancher/shell/components/form/Members/MembershipEditor.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/ubuntu/suseconf/node_modules/@rancher/shell/components/form/Members/MembershipEditor.vue","mtime":1725338146566},{"path":"/home/ubuntu/suseconf/babel.config.js","mtime":1725343995893},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js","mtime":1725271298942},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1725271300920}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90b0NvbnN1bWFibGVBcnJheSI7CmltcG9ydCBfc2xpY2VkVG9BcnJheSBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9zbGljZWRUb0FycmF5IjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgX3JlZ2VuZXJhdG9yUnVudGltZSBmcm9tICIvaG9tZS91YnVudHUvc3VzZWNvbmYvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL3JlZ2VuZXJhdG9yL2luZGV4LmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuam9pbi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5hc3NpZ24uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucHJvbWlzZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yLmpzIjsKaW1wb3J0IHsgTUFOQUdFTUVOVCwgTk9STUFOIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy90eXBlcyc7CmltcG9ydCBBcnJheUxpc3QgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvZm9ybS9BcnJheUxpc3QnOwppbXBvcnQgTG9hZGluZyBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9Mb2FkaW5nJzsKaW1wb3J0IHsgX0NSRUFURSwgX1ZJRVcgfSBmcm9tICdAc2hlbGwvY29uZmlnL3F1ZXJ5LXBhcmFtcyc7CmltcG9ydCB7IGdldCwgc2V0IH0gZnJvbSAnQHNoZWxsL3V0aWxzL29iamVjdCc7CmZ1bmN0aW9uIG5vcm1hbGl6ZUlkKGlkKSB7CiAgcmV0dXJuIChpZCA9PT0gbnVsbCB8fCBpZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogaWQucmVwbGFjZSgnOicsICcvJykpIHx8IGlkOwp9CmV4cG9ydCBmdW5jdGlvbiBjYW5WaWV3TWVtYmVyc2hpcEVkaXRvcihzdG9yZSkgewogIHZhciBuZWVkc1Byb2plY3QgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IGZhbHNlOwogIHJldHVybiAoISFzdG9yZS5nZXR0ZXJzWydtYW5hZ2VtZW50L3NjaGVtYUZvciddKE1BTkFHRU1FTlQuUFJPSkVDVF9ST0xFX1RFTVBMQVRFX0JJTkRJTkcpIHx8ICFuZWVkc1Byb2plY3QpICYmICEhc3RvcmUuZ2V0dGVyc1snbWFuYWdlbWVudC9zY2hlbWFGb3InXShNQU5BR0VNRU5ULlJPTEVfVEVNUExBVEUpICYmICEhc3RvcmUuZ2V0dGVyc1sncmFuY2hlci9zY2hlbWFGb3InXShOT1JNQU4uUFJJTkNJUEFMKTsKfQpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgQXJyYXlMaXN0OiBBcnJheUxpc3QsCiAgICBMb2FkaW5nOiBMb2FkaW5nCiAgfSwKICBwcm9wczogewogICAgYWRkTWVtYmVyRGlhbG9nTmFtZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICB9LAogICAgcGFyZW50S2V5OiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0sCiAgICBwYXJlbnRJZDogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6IG51bGwKICAgIH0sCiAgICBtb2RlOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0sCiAgICB0eXBlOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0sCiAgICBkZWZhdWx0QmluZGluZ0hhbmRsZXI6IHsKICAgICAgdHlwZTogRnVuY3Rpb24sCiAgICAgIGRlZmF1bHQ6IG51bGwKICAgIH0sCiAgICBtb2RhbFN0aWNreTogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfQogIH0sCiAgZmV0Y2g6IGZ1bmN0aW9uIGZldGNoKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvcigvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgIHZhciByb2xlQmluZGluZ1JlcXVlc3RQYXJhbXMsIHVzZXJIeWRyYXRpb24sIF95aWVsZCRQcm9taXNlJGFsbCwgX3lpZWxkJFByb21pc2UkYWxsMiwgYWxsQmluZGluZ3MsIGJpbmRpbmdzLCBkZWZhdWx0QmluZGluZzsKICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIHJvbGVCaW5kaW5nUmVxdWVzdFBhcmFtcyA9IHsKICAgICAgICAgICAgICB0eXBlOiBfdGhpcy50eXBlLAogICAgICAgICAgICAgIG9wdDogewogICAgICAgICAgICAgICAgZm9yY2U6IHRydWUKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGlmIChfdGhpcy50eXBlID09PSBOT1JNQU4uUFJPSkVDVF9ST0xFX1RFTVBMQVRFX0JJTkRJTkcgJiYgX3RoaXMucGFyZW50SWQpIHsKICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKHJvbGVCaW5kaW5nUmVxdWVzdFBhcmFtcywgewogICAgICAgICAgICAgICAgb3B0OiB7CiAgICAgICAgICAgICAgICAgIGZpbHRlcjogewogICAgICAgICAgICAgICAgICAgIHByb2plY3RJZDogX3RoaXMucGFyZW50SWQuc3BsaXQoJy8nKS5qb2luKCc6JykKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHVzZXJIeWRyYXRpb24gPSBbX3RoaXMuc2NoZW1hID8gX3RoaXMuJHN0b3JlLmRpc3BhdGNoKCJyYW5jaGVyL2ZpbmRBbGwiLCByb2xlQmluZGluZ1JlcXVlc3RQYXJhbXMpIDogW10sIF90aGlzLiRzdG9yZS5kaXNwYXRjaCgncmFuY2hlci9maW5kQWxsJywgewogICAgICAgICAgICAgIHR5cGU6IE5PUk1BTi5QUklOQ0lQQUwKICAgICAgICAgICAgfSksIF90aGlzLiRzdG9yZS5kaXNwYXRjaCgibWFuYWdlbWVudC9maW5kQWxsIiwgewogICAgICAgICAgICAgIHR5cGU6IE1BTkFHRU1FTlQuUk9MRV9URU1QTEFURQogICAgICAgICAgICB9KSwgX3RoaXMuJHN0b3JlLmRpc3BhdGNoKCJtYW5hZ2VtZW50L2ZpbmRBbGwiLCB7CiAgICAgICAgICAgICAgdHlwZTogTUFOQUdFTUVOVC5VU0VSCiAgICAgICAgICAgIH0pXTsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDU7CiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbCh1c2VySHlkcmF0aW9uKTsKICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgX3lpZWxkJFByb21pc2UkYWxsID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgX3lpZWxkJFByb21pc2UkYWxsMiA9IF9zbGljZWRUb0FycmF5KF95aWVsZCRQcm9taXNlJGFsbCwgMSk7CiAgICAgICAgICAgIGFsbEJpbmRpbmdzID0gX3lpZWxkJFByb21pc2UkYWxsMlswXTsKICAgICAgICAgICAgYmluZGluZ3MgPSBhbGxCaW5kaW5ncy5maWx0ZXIoZnVuY3Rpb24gKGIpIHsKICAgICAgICAgICAgICByZXR1cm4gbm9ybWFsaXplSWQoZ2V0KGIsIF90aGlzLnBhcmVudEtleSkpID09PSBub3JtYWxpemVJZChfdGhpcy5wYXJlbnRJZCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBfdGhpcy4kc2V0KF90aGlzLCAnbGFzdFNhdmVkQmluZGluZ3MnLCBfdG9Db25zdW1hYmxlQXJyYXkoYmluZGluZ3MpKTsKCiAgICAgICAgICAgIC8vIEFkZCB0aGUgY3VycmVudCB1c2VyIGFzIHRoZSBwcm9qZWN0IG93bmVyLiBUaGlzIHdpbGwgZ2V0IGNyZWF0ZWQgYnkgZGVmYXVsdAogICAgICAgICAgICBpZiAoIShfdGhpcy5tb2RlID09PSBfQ1JFQVRFICYmIGJpbmRpbmdzLmxlbmd0aCA9PT0gMCAmJiBfdGhpcy5kZWZhdWx0QmluZGluZ0hhbmRsZXIpKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE2OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMzsKICAgICAgICAgICAgcmV0dXJuIF90aGlzLmRlZmF1bHRCaW5kaW5nSGFuZGxlcigpOwogICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgZGVmYXVsdEJpbmRpbmcgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICBkZWZhdWx0QmluZGluZy5pc0RlZmF1bHRCaW5kaW5nID0gdHJ1ZTsKICAgICAgICAgICAgYmluZGluZ3MucHVzaChkZWZhdWx0QmluZGluZyk7CiAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICBfdGhpcy4kc2V0KF90aGlzLCAnYmluZGluZ3MnLCBiaW5kaW5ncyk7CiAgICAgICAgICBjYXNlIDE3OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUpOwogICAgfSkpKCk7CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc2NoZW1hOiB0aGlzLiRzdG9yZS5nZXR0ZXJzWyJyYW5jaGVyL3NjaGVtYUZvciJdKHRoaXMudHlwZSksCiAgICAgIGJpbmRpbmdzOiBbXSwKICAgICAgbGFzdFNhdmVkQmluZGluZ3M6IFtdCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIG5ld0JpbmRpbmdzOiBmdW5jdGlvbiBuZXdCaW5kaW5ncygpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CiAgICAgIHJldHVybiB0aGlzLmJpbmRpbmdzLmZpbHRlcihmdW5jdGlvbiAoYmluZGluZykgewogICAgICAgIHJldHVybiAhYmluZGluZy5pZCAmJiAhX3RoaXMyLmxhc3RTYXZlZEJpbmRpbmdzLmluY2x1ZGVzKGJpbmRpbmcpICYmICFiaW5kaW5nLmlzRGVmYXVsdEJpbmRpbmc7CiAgICAgIH0pOwogICAgfSwKICAgIHJlbW92ZWRCaW5kaW5nczogZnVuY3Rpb24gcmVtb3ZlZEJpbmRpbmdzKCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKICAgICAgcmV0dXJuIHRoaXMubGFzdFNhdmVkQmluZGluZ3MuZmlsdGVyKGZ1bmN0aW9uIChiaW5kaW5nKSB7CiAgICAgICAgcmV0dXJuICFfdGhpczMuYmluZGluZ3MuaW5jbHVkZXMoYmluZGluZyk7CiAgICAgIH0pOwogICAgfSwKICAgIG1lbWJlcnNoaXBVcGRhdGU6IGZ1bmN0aW9uIG1lbWJlcnNoaXBVcGRhdGUoKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwogICAgICB2YXIgbmV3QmluZGluZ3MgPSB0aGlzLm5ld0JpbmRpbmdzOwogICAgICB2YXIgcmVtb3ZlZEJpbmRpbmdzID0gdGhpcy5yZW1vdmVkQmluZGluZ3M7CiAgICAgIHJldHVybiB7CiAgICAgICAgbmV3QmluZGluZ3M6IHRoaXMubmV3QmluZGluZ3MsCiAgICAgICAgcmVtb3ZlZEJpbmRpbmdzOiB0aGlzLnJlbW92ZWRCaW5kaW5ncywKICAgICAgICBzYXZlOiBmdW5jdGlvbiBzYXZlKHBhcmVudElkKSB7CiAgICAgICAgICB2YXIgc2F2ZWRQcm9taXNlcyA9IG5ld0JpbmRpbmdzLm1hcChmdW5jdGlvbiAoYmluZGluZykgewogICAgICAgICAgICBzZXQoYmluZGluZywgX3RoaXM0LnBhcmVudEtleSwgcGFyZW50SWQpOwogICAgICAgICAgICByZXR1cm4gYmluZGluZy5zYXZlKCk7CiAgICAgICAgICB9KTsKICAgICAgICAgIHZhciByZW1vdmVkUHJvbWlzZXMgPSByZW1vdmVkQmluZGluZ3MubWFwKGZ1bmN0aW9uIChiaW5kaW5nKSB7CiAgICAgICAgICAgIHJldHVybiBiaW5kaW5nLnJlbW92ZSgpOwogICAgICAgICAgfSk7CiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShzYXZlZFByb21pc2VzKSwgX3RvQ29uc3VtYWJsZUFycmF5KHJlbW92ZWRQcm9taXNlcykpKTsKICAgICAgICB9CiAgICAgIH07CiAgICB9LAogICAgaXNDcmVhdGU6IGZ1bmN0aW9uIGlzQ3JlYXRlKCkgewogICAgICByZXR1cm4gdGhpcy5tb2RlID09PSBfQ1JFQVRFOwogICAgfSwKICAgIGlzVmlldzogZnVuY3Rpb24gaXNWaWV3KCkgewogICAgICByZXR1cm4gdGhpcy5tb2RlID09PSBfVklFVzsKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICBtZW1iZXJzaGlwVXBkYXRlOiB7CiAgICAgIGRlZXA6IHRydWUsCiAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uIGhhbmRsZXIoKSB7CiAgICAgICAgdGhpcy4kZW1pdCgnbWVtYmVyc2hpcC11cGRhdGUnLCB0aGlzLm1lbWJlcnNoaXBVcGRhdGUpOwogICAgICB9CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBhZGRNZW1iZXI6IGZ1bmN0aW9uIGFkZE1lbWJlcigpIHsKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2NsdXN0ZXIvcHJvbXB0TW9kYWwnLCB7CiAgICAgICAgY29tcG9uZW50OiB0aGlzLmFkZE1lbWJlckRpYWxvZ05hbWUsCiAgICAgICAgY29tcG9uZW50UHJvcHM6IHsKICAgICAgICAgIG9uQWRkOiB0aGlzLm9uQWRkTWVtYmVyCiAgICAgICAgfSwKICAgICAgICBtb2RhbFN0aWNreTogdGhpcy5tb2RhbFN0aWNreQogICAgICB9KTsKICAgIH0sCiAgICBvbkFkZE1lbWJlcjogZnVuY3Rpb24gb25BZGRNZW1iZXIoYmluZGluZ3MpIHsKICAgICAgdGhpcy4kc2V0KHRoaXMsICdiaW5kaW5ncycsIFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkodGhpcy5iaW5kaW5ncyksIF90b0NvbnN1bWFibGVBcnJheShiaW5kaW5ncykpKTsKICAgIH0KICB9Cn07"},{"version":3,"names":["MANAGEMENT","NORMAN","ArrayList","Loading","_CREATE","_VIEW","get","set","normalizeId","id","replace","canViewMembershipEditor","store","needsProject","arguments","length","undefined","getters","PROJECT_ROLE_TEMPLATE_BINDING","ROLE_TEMPLATE","PRINCIPAL","components","props","addMemberDialogName","type","String","required","parentKey","parentId","default","mode","defaultBindingHandler","Function","modalSticky","Boolean","fetch","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","roleBindingRequestParams","userHydration","_yield$Promise$all","_yield$Promise$all2","allBindings","bindings","defaultBinding","wrap","_callee$","_context","prev","next","opt","force","Object","assign","filter","projectId","split","join","schema","$store","dispatch","USER","Promise","all","sent","_slicedToArray","b","$set","_toConsumableArray","isDefaultBinding","push","stop","data","lastSavedBindings","computed","newBindings","_this2","binding","includes","removedBindings","_this3","membershipUpdate","_this4","save","savedPromises","map","removedPromises","remove","concat","isCreate","isView","watch","deep","handler","$emit","methods","addMember","component","componentProps","onAdd","onAddMember"],"sources":["node_modules/@rancher/shell/components/form/Members/MembershipEditor.vue"],"sourcesContent":["<script>\r\nimport { MANAGEMENT, NORMAN } from '@shell/config/types';\r\nimport ArrayList from '@shell/components/form/ArrayList';\r\nimport Loading from '@shell/components/Loading';\r\nimport { _CREATE, _VIEW } from '@shell/config/query-params';\r\nimport { get, set } from '@shell/utils/object';\r\n\r\nfunction normalizeId(id) {\r\n  return id?.replace(':', '/') || id;\r\n}\r\n\r\nexport function canViewMembershipEditor(store, needsProject = false) {\r\n  return (!!store.getters['management/schemaFor'](MANAGEMENT.PROJECT_ROLE_TEMPLATE_BINDING) || !needsProject) &&\r\n    !!store.getters['management/schemaFor'](MANAGEMENT.ROLE_TEMPLATE) &&\r\n    !!store.getters['rancher/schemaFor'](NORMAN.PRINCIPAL);\r\n}\r\n\r\nexport default {\r\n  components: { ArrayList, Loading },\r\n\r\n  props: {\r\n    addMemberDialogName: {\r\n      type:     String,\r\n      required: true\r\n    },\r\n\r\n    parentKey: {\r\n      type:     String,\r\n      required: true\r\n    },\r\n\r\n    parentId: {\r\n      type:    String,\r\n      default: null\r\n    },\r\n\r\n    mode: {\r\n      type:     String,\r\n      required: true\r\n    },\r\n\r\n    type: {\r\n      type:     String,\r\n      required: true\r\n    },\r\n\r\n    defaultBindingHandler: {\r\n      type:    Function,\r\n      default: null,\r\n    },\r\n\r\n    modalSticky: {\r\n      type:    Boolean,\r\n      default: false,\r\n    }\r\n  },\r\n\r\n  async fetch() {\r\n    const roleBindingRequestParams = { type: this.type, opt: { force: true } };\r\n\r\n    if (this.type === NORMAN.PROJECT_ROLE_TEMPLATE_BINDING && this.parentId) {\r\n      Object.assign(roleBindingRequestParams, { opt: { filter: { projectId: this.parentId.split('/').join(':') } } });\r\n    }\r\n    const userHydration = [\r\n      this.schema ? this.$store.dispatch(`rancher/findAll`, roleBindingRequestParams) : [],\r\n      this.$store.dispatch('rancher/findAll', { type: NORMAN.PRINCIPAL }),\r\n      this.$store.dispatch(`management/findAll`, { type: MANAGEMENT.ROLE_TEMPLATE }),\r\n      this.$store.dispatch(`management/findAll`, { type: MANAGEMENT.USER })\r\n    ];\r\n    const [allBindings] = await Promise.all(userHydration);\r\n\r\n    const bindings = allBindings\r\n      .filter((b) => normalizeId(get(b, this.parentKey)) === normalizeId(this.parentId));\r\n\r\n    this.$set(this, 'lastSavedBindings', [...bindings]);\r\n\r\n    // Add the current user as the project owner. This will get created by default\r\n    if (this.mode === _CREATE && bindings.length === 0 && this.defaultBindingHandler) {\r\n      const defaultBinding = await this.defaultBindingHandler();\r\n\r\n      defaultBinding.isDefaultBinding = true;\r\n      bindings.push(defaultBinding);\r\n    }\r\n\r\n    this.$set(this, 'bindings', bindings);\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      schema:            this.$store.getters[`rancher/schemaFor`](this.type),\r\n      bindings:          [],\r\n      lastSavedBindings: [],\r\n    };\r\n  },\r\n\r\n  computed: {\r\n    newBindings() {\r\n      return this.bindings\r\n        .filter((binding) => !binding.id && !this.lastSavedBindings.includes(binding) && !binding.isDefaultBinding);\r\n    },\r\n    removedBindings() {\r\n      return this.lastSavedBindings\r\n        .filter((binding) => !this.bindings.includes(binding));\r\n    },\r\n    membershipUpdate() {\r\n      const newBindings = this.newBindings;\r\n      const removedBindings = this.removedBindings;\r\n\r\n      return {\r\n        newBindings:     this.newBindings,\r\n        removedBindings: this.removedBindings,\r\n        save:            (parentId) => {\r\n          const savedPromises = newBindings.map((binding) => {\r\n            set(binding, this.parentKey, parentId);\r\n\r\n            return binding.save();\r\n          });\r\n\r\n          const removedPromises = removedBindings.map((binding) => binding.remove());\r\n\r\n          return Promise.all([...savedPromises, ...removedPromises]);\r\n        }\r\n      };\r\n    },\r\n\r\n    isCreate() {\r\n      return this.mode === _CREATE;\r\n    },\r\n\r\n    isView() {\r\n      return this.mode === _VIEW;\r\n    },\r\n  },\r\n  watch: {\r\n    membershipUpdate: {\r\n      deep: true,\r\n      handler() {\r\n        this.$emit('membership-update', this.membershipUpdate);\r\n      }\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    addMember() {\r\n      this.$store.dispatch('cluster/promptModal', {\r\n        component:      this.addMemberDialogName,\r\n        componentProps: { onAdd: this.onAddMember },\r\n        modalSticky:    this.modalSticky\r\n      });\r\n    },\r\n\r\n    onAddMember(bindings) {\r\n      this.$set(this, 'bindings', [...this.bindings, ...bindings]);\r\n    },\r\n  }\r\n};\r\n</script>\r\n<template>\r\n  <Loading v-if=\"$fetchState.pending\" />\r\n  <ArrayList\r\n    v-else\r\n    v-model=\"bindings\"\r\n    :mode=\"mode\"\r\n    :show-header=\"true\"\r\n  >\r\n    <template #column-headers>\r\n      <div class=\"box mb-0\">\r\n        <div class=\"column-headers row\">\r\n          <div class=\"col span-6\">\r\n            <label class=\"text-label\">{{ t('membershipEditor.user') }}</label>\r\n          </div>\r\n          <div class=\"col span-6\">\r\n            <label class=\"text-label\">{{ t('membershipEditor.role') }}</label>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </template>\r\n    <template #columns=\"{row}\">\r\n      <div class=\"columns row\">\r\n        <div class=\"col span-6\">\r\n          <Principal\r\n            :key=\"row.value.principalId\"\r\n            :value=\"row.value.principalId\"\r\n          />\r\n        </div>\r\n        <div class=\"col span-6 role\">\r\n          {{ row.value.roleDisplay }}\r\n        </div>\r\n      </div>\r\n    </template>\r\n    <template #add>\r\n      <button\r\n        type=\"button\"\r\n        class=\"btn role-primary mt-10\"\r\n        @click=\"addMember\"\r\n      >\r\n        {{ t('generic.add') }}\r\n      </button>\r\n    </template>\r\n    <template #remove-button=\"{remove, i}\">\r\n      <span v-if=\"(isCreate && i === 0) || isView\" />\r\n      <button\r\n        v-else\r\n        type=\"button\"\r\n        :disabled=\"isView\"\r\n        class=\"btn role-link\"\r\n        @click=\"remove\"\r\n      >\r\n        {{ t('generic.remove') }}\r\n      </button>\r\n    </template>\r\n  </ArrayList>\r\n</template>\r\n\r\n<style lang=\"scss\" scoped>\r\n.role {\r\n  display: flex;\r\n  align-items: center;\r\n  flex-direction: row;\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]}]}