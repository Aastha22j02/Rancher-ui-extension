{"remainingRequest":"/home/ubuntu/susecon-2024-ext-demo/node_modules/babel-loader/lib/index.js??ref--16-1!/home/ubuntu/susecon-2024-ext-demo/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/ubuntu/susecon-2024-ext-demo/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/edit/provisioning.cattle.io.cluster/tabs/AgentConfiguration.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/edit/provisioning.cattle.io.cluster/tabs/AgentConfiguration.vue","mtime":1725271280091},{"path":"/home/ubuntu/susecon-2024-ext-demo/babel.config.js","mtime":1725268750245},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/babel-loader/lib/index.js","mtime":1725271298942},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1725271300920}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKZnVuY3Rpb24gb3duS2V5cyhlLCByKSB7IHZhciB0ID0gT2JqZWN0LmtleXMoZSk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBvID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKTsgciAmJiAobyA9IG8uZmlsdGVyKGZ1bmN0aW9uIChyKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsIHIpLmVudW1lcmFibGU7IH0pKSwgdC5wdXNoLmFwcGx5KHQsIG8pOyB9IHJldHVybiB0OyB9CmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQoZSkgeyBmb3IgKHZhciByID0gMTsgciA8IGFyZ3VtZW50cy5sZW5ndGg7IHIrKykgeyB2YXIgdCA9IG51bGwgIT0gYXJndW1lbnRzW3JdID8gYXJndW1lbnRzW3JdIDoge307IHIgJSAyID8gb3duS2V5cyhPYmplY3QodCksICEwKS5mb3JFYWNoKGZ1bmN0aW9uIChyKSB7IF9kZWZpbmVQcm9wZXJ0eShlLCByLCB0W3JdKTsgfSkgOiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGUsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHQpKSA6IG93bktleXMoT2JqZWN0KHQpKS5mb3JFYWNoKGZ1bmN0aW9uIChyKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCByLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsIHIpKTsgfSk7IH0gcmV0dXJuIGU7IH0KaW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiL2hvbWUvdWJ1bnR1L3N1c2Vjb24tMjAyNC1leHQtZGVtby9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvcmVnZW5lcmF0b3IvaW5kZXguanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9ycy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5rZXlzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgeyBCYW5uZXIgfSBmcm9tICdAY29tcG9uZW50cy9CYW5uZXInOwppbXBvcnQgR3JvdXBQYW5lbCBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9Hcm91cFBhbmVsJzsKaW1wb3J0IFBvZEFmZmluaXR5IGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL2Zvcm0vUG9kQWZmaW5pdHknOwppbXBvcnQgTm9kZUFmZmluaXR5IGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL2Zvcm0vTm9kZUFmZmluaXR5JzsKaW1wb3J0IENvbnRhaW5lclJlc291cmNlTGltaXQgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvQ29udGFpbmVyUmVzb3VyY2VMaW1pdCc7CmltcG9ydCBUb2xlcmF0aW9ucyBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9mb3JtL1RvbGVyYXRpb25zJzsKaW1wb3J0IHsgY2xlYW5VcCB9IGZyb20gJ0BzaGVsbC91dGlscy9vYmplY3QnOwppbXBvcnQgeyBmZXRjaFNldHRpbmcgfSBmcm9tICdAc2hlbGwvdXRpbHMvc2V0dGluZ3MnOwppbXBvcnQgeyBSYWRpb0dyb3VwIH0gZnJvbSAnQGNvbXBvbmVudHMvRm9ybS9SYWRpbyc7CgovLyBBZmZpbml0eSByYWRpbyBidXR0b24gY2hvaWNlcwp2YXIgREVGQVVMVCA9ICdkZWZhdWx0JzsKdmFyIENVU1RPTSA9ICdjdXN0b20nOwoKLy8gVGhpcyBpcyB0aGUgZm9ybSBmb3IgQWdlbnQgQ29uZmlndXJhdGlvbgovLyBVc2VkIGZvciBib3RoIENsdXN0ZXIgQWdlbnQgYW5kIEZsZWV0IEFnZW50IGNvbmZpZ3VyYXRpb24KZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIEJhbm5lcjogQmFubmVyLAogICAgQ29udGFpbmVyUmVzb3VyY2VMaW1pdDogQ29udGFpbmVyUmVzb3VyY2VMaW1pdCwKICAgIEdyb3VwUGFuZWw6IEdyb3VwUGFuZWwsCiAgICBQb2RBZmZpbml0eTogUG9kQWZmaW5pdHksCiAgICBOb2RlQWZmaW5pdHk6IE5vZGVBZmZpbml0eSwKICAgIFJhZGlvR3JvdXA6IFJhZGlvR3JvdXAsCiAgICBUb2xlcmF0aW9uczogVG9sZXJhdGlvbnMKICB9LAogIHByb3BzOiB7CiAgICB2YWx1ZTogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIGRlZmF1bHQ6IGZ1bmN0aW9uIF9kZWZhdWx0KCkge30KICAgIH0sCiAgICBtb2RlOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0sCiAgICB0eXBlOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0KICB9LAogIGZldGNoOiBmdW5jdGlvbiBmZXRjaCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgdmFyIHNldHRpbmdJZCwgc2V0dGluZywgcGFyc2VkOwogICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgLy8gRGVmYXVsdCBhZmZpbml0eQogICAgICAgICAgICBzZXR0aW5nSWQgPSAiIi5jb25jYXQoX3RoaXMudHlwZSwgIi1hZ2VudC1kZWZhdWx0LWFmZmluaXR5Iik7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICByZXR1cm4gZmV0Y2hTZXR0aW5nKF90aGlzLiRzdG9yZSwgc2V0dGluZ0lkKTsKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgc2V0dGluZyA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgIGlmIChzZXR0aW5nKSB7CiAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIHBhcnNlZCA9IEpTT04ucGFyc2Uoc2V0dGluZy52YWx1ZSB8fCBzZXR0aW5nLmRlZmF1bHQpOwogICAgICAgICAgICAgICAgX3RoaXMuZGVmYXVsdEFmZmluaXR5ID0gcGFyc2VkIHx8IHt9OwogICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0NvdWxkIG5vdCBwYXJzZSBhZ2VudCBkZWZhdWx0IHNldHRpbmcnLCBlKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1jb25zb2xlCiAgICAgICAgICAgICAgICBfdGhpcy5kZWZhdWx0QWZmaW5pdHkgPSB7fTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIGNhc2UgNToKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlKTsKICAgIH0pKSgpOwogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHZhciBfdGhpcyR2YWx1ZSwgX3RoaXMkdmFsdWUyLCBfdGhpcyR2YWx1ZTM7CiAgICB2YXIgbm9kZUFmZmluaXR5ID0gKF90aGlzJHZhbHVlID0gdGhpcy52YWx1ZSkgPT09IG51bGwgfHwgX3RoaXMkdmFsdWUgPT09IHZvaWQgMCB8fCAoX3RoaXMkdmFsdWUgPSBfdGhpcyR2YWx1ZS5vdmVycmlkZUFmZmluaXR5KSA9PT0gbnVsbCB8fCBfdGhpcyR2YWx1ZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkdmFsdWUubm9kZUFmZmluaXR5OwogICAgdmFyIHBvZEFmZmluaXR5ID0gKF90aGlzJHZhbHVlMiA9IHRoaXMudmFsdWUpID09PSBudWxsIHx8IF90aGlzJHZhbHVlMiA9PT0gdm9pZCAwIHx8IChfdGhpcyR2YWx1ZTIgPSBfdGhpcyR2YWx1ZTIub3ZlcnJpZGVBZmZpbml0eSkgPT09IG51bGwgfHwgX3RoaXMkdmFsdWUyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyR2YWx1ZTIucG9kQWZmaW5pdHk7CiAgICB2YXIgcG9kQW50aUFmZmluaXR5ID0gKF90aGlzJHZhbHVlMyA9IHRoaXMudmFsdWUpID09PSBudWxsIHx8IF90aGlzJHZhbHVlMyA9PT0gdm9pZCAwIHx8IChfdGhpcyR2YWx1ZTMgPSBfdGhpcyR2YWx1ZTMub3ZlcnJpZGVBZmZpbml0eSkgPT09IG51bGwgfHwgX3RoaXMkdmFsdWUzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyR2YWx1ZTMucG9kQW50aUFmZmluaXR5OwogICAgdmFyIGhhc0FmZmluaXR5UG9wdWxhdGVkID0gZmFsc2U7CiAgICBpZiAobm9kZUFmZmluaXR5ICYmIE9iamVjdC5rZXlzKG5vZGVBZmZpbml0eSkubGVuZ3RoIHx8IHBvZEFmZmluaXR5ICYmIE9iamVjdC5rZXlzKHBvZEFmZmluaXR5KS5sZW5ndGggfHwgcG9kQW50aUFmZmluaXR5ICYmIE9iamVjdC5rZXlzKHBvZEFudGlBZmZpbml0eSkubGVuZ3RoKSB7CiAgICAgIGhhc0FmZmluaXR5UG9wdWxhdGVkID0gdHJ1ZTsKICAgIH0KICAgIHJldHVybiB7CiAgICAgIGRlZmF1bHRBZmZpbml0eToge30sCiAgICAgIGFmZmluaXR5U2V0dGluZzogaGFzQWZmaW5pdHlQb3B1bGF0ZWQgPyBDVVNUT00gOiBERUZBVUxULAogICAgICBub2RlQWZmaW5pdHk6IHt9CiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuZW5zdXJlVmFsdWUoKTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBmbGF0UmVzb3VyY2VzOiB7CiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICAgIHZhciBfcmVmID0gdGhpcy52YWx1ZS5vdmVycmlkZVJlc291cmNlUmVxdWlyZW1lbnRzIHx8IHt9LAogICAgICAgICAgX3JlZiRsaW1pdHMgPSBfcmVmLmxpbWl0cywKICAgICAgICAgIGxpbWl0cyA9IF9yZWYkbGltaXRzID09PSB2b2lkIDAgPyB7fSA6IF9yZWYkbGltaXRzLAogICAgICAgICAgX3JlZiRyZXF1ZXN0cyA9IF9yZWYucmVxdWVzdHMsCiAgICAgICAgICByZXF1ZXN0cyA9IF9yZWYkcmVxdWVzdHMgPT09IHZvaWQgMCA/IHt9IDogX3JlZiRyZXF1ZXN0czsKICAgICAgICB2YXIgbGltaXRzQ3B1ID0gbGltaXRzLmNwdSwKICAgICAgICAgIGxpbWl0c01lbW9yeSA9IGxpbWl0cy5tZW1vcnk7CiAgICAgICAgdmFyIHJlcXVlc3RzQ3B1ID0gcmVxdWVzdHMuY3B1LAogICAgICAgICAgcmVxdWVzdHNNZW1vcnkgPSByZXF1ZXN0cy5tZW1vcnk7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGxpbWl0c0NwdTogbGltaXRzQ3B1LAogICAgICAgICAgbGltaXRzTWVtb3J5OiBsaW1pdHNNZW1vcnksCiAgICAgICAgICByZXF1ZXN0c0NwdTogcmVxdWVzdHNDcHUsCiAgICAgICAgICByZXF1ZXN0c01lbW9yeTogcmVxdWVzdHNNZW1vcnkKICAgICAgICB9OwogICAgICB9LAogICAgICBzZXQ6IGZ1bmN0aW9uIHNldChuZXUpIHsKICAgICAgICB2YXIgX3RoaXMkdmFsdWU0OwogICAgICAgIHZhciBsaW1pdHNDcHUgPSBuZXUubGltaXRzQ3B1LAogICAgICAgICAgbGltaXRzTWVtb3J5ID0gbmV1LmxpbWl0c01lbW9yeSwKICAgICAgICAgIHJlcXVlc3RzQ3B1ID0gbmV1LnJlcXVlc3RzQ3B1LAogICAgICAgICAgcmVxdWVzdHNNZW1vcnkgPSBuZXUucmVxdWVzdHNNZW1vcnk7CiAgICAgICAgdmFyIGV4aXN0aW5nID0gKChfdGhpcyR2YWx1ZTQgPSB0aGlzLnZhbHVlKSA9PT0gbnVsbCB8fCBfdGhpcyR2YWx1ZTQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJHZhbHVlNC5vdmVycmlkZVJlc291cmNlUmVxdWlyZW1lbnRzKSB8fCB7fTsKICAgICAgICBkZWxldGUgZXhpc3RpbmcucmVxdWVzdHM7CiAgICAgICAgZGVsZXRlIGV4aXN0aW5nLmxpbWl0czsKICAgICAgICB2YXIgb3V0ID0gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBleGlzdGluZyksIHt9LCB7CiAgICAgICAgICByZXF1ZXN0czogewogICAgICAgICAgICBjcHU6IHJlcXVlc3RzQ3B1LAogICAgICAgICAgICBtZW1vcnk6IHJlcXVlc3RzTWVtb3J5CiAgICAgICAgICB9LAogICAgICAgICAgbGltaXRzOiB7CiAgICAgICAgICAgIGNwdTogbGltaXRzQ3B1LAogICAgICAgICAgICBtZW1vcnk6IGxpbWl0c01lbW9yeQogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIHRoaXMuJHNldCh0aGlzLnZhbHVlLCAnb3ZlcnJpZGVSZXNvdXJjZVJlcXVpcmVtZW50cycsIGNsZWFuVXAob3V0KSk7CiAgICAgIH0KICAgIH0sCiAgICBhZmZpbml0eU9wdGlvbnM6IGZ1bmN0aW9uIGFmZmluaXR5T3B0aW9ucygpIHsKICAgICAgcmV0dXJuIFt7CiAgICAgICAgbGFiZWw6IHRoaXMudCgnY2x1c3Rlci5hZ2VudENvbmZpZy5hZmZpbml0eS5kZWZhdWx0JyksCiAgICAgICAgdmFsdWU6IERFRkFVTFQKICAgICAgfSwgewogICAgICAgIGxhYmVsOiB0aGlzLnQoJ2NsdXN0ZXIuYWdlbnRDb25maWcuYWZmaW5pdHkuY3VzdG9tJyksCiAgICAgICAgdmFsdWU6IENVU1RPTQogICAgICB9XTsKICAgIH0sCiAgICBjYW5FZGl0QWZmaW5pdHk6IGZ1bmN0aW9uIGNhbkVkaXRBZmZpbml0eSgpIHsKICAgICAgcmV0dXJuIHRoaXMuYWZmaW5pdHlTZXR0aW5nID09PSBDVVNUT007CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgdmFsdWU6IGZ1bmN0aW9uIHZhbHVlKCkgewogICAgICB0aGlzLmVuc3VyZVZhbHVlKCk7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBlbnN1cmVWYWx1ZTogZnVuY3Rpb24gZW5zdXJlVmFsdWUoKSB7CiAgICAgIC8vIEVuc3VyZSB3ZSBoYXZlIHRoZSBtb2RlbCBzdHJ1Y3R1cmUgbmVlZGVkIGZvciB0aGUgZm9ybSBjb250cm9scwogICAgICBpZiAodGhpcy52YWx1ZSkgewogICAgICAgIHZhciBfdGhpcyR2YWx1ZTU7CiAgICAgICAgdGhpcy52YWx1ZS5vdmVycmlkZUFmZmluaXR5ID0gdGhpcy52YWx1ZS5vdmVycmlkZUFmZmluaXR5IHx8IHt9OwogICAgICAgIHRoaXMudmFsdWUuYXBwZW5kVG9sZXJhdGlvbnMgPSB0aGlzLnZhbHVlLmFwcGVuZFRvbGVyYXRpb25zIHx8IFtdOwogICAgICAgIHRoaXMudmFsdWUub3ZlcnJpZGVSZXNvdXJjZVJlcXVpcmVtZW50cyA9IHRoaXMudmFsdWUub3ZlcnJpZGVSZXNvdXJjZVJlcXVpcmVtZW50cyB8fCB7fTsKICAgICAgICB0aGlzLm5vZGVBZmZpbml0eSA9ICgoX3RoaXMkdmFsdWU1ID0gdGhpcy52YWx1ZSkgPT09IG51bGwgfHwgX3RoaXMkdmFsdWU1ID09PSB2b2lkIDAgfHwgKF90aGlzJHZhbHVlNSA9IF90aGlzJHZhbHVlNS5vdmVycmlkZUFmZmluaXR5KSA9PT0gbnVsbCB8fCBfdGhpcyR2YWx1ZTUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJHZhbHVlNS5ub2RlQWZmaW5pdHkpIHx8IHt9OwogICAgICB9CiAgICB9LAogICAgYWZmaW5pdHlTZXR0aW5nQ2hhbmdlOiBmdW5jdGlvbiBhZmZpbml0eVNldHRpbmdDaGFuZ2UoKSB7CiAgICAgIGlmICh0aGlzLmFmZmluaXR5U2V0dGluZyA9PT0gQ1VTVE9NKSB7CiAgICAgICAgdmFyIHBhcnNlZERlZmF1bHRBZmZpbml0ZXMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuZGVmYXVsdEFmZmluaXR5KSk7CgogICAgICAgIC8vIENvcHkgdGhlIGRlZmF1bHQgc28gdGhhdCB0aGUgdXNlciBjYW4gZWRpdCBpdAogICAgICAgIC8vIHRoaXMgd2lsbCBjb3ZlciB0aGUgcG9kIGFmZmluaXRpZXMKICAgICAgICB0aGlzLiRzZXQodGhpcy52YWx1ZSwgJ292ZXJyaWRlQWZmaW5pdHknLCBwYXJzZWREZWZhdWx0QWZmaW5pdGVzKTsKCiAgICAgICAgLy8gaW4gb3JkZXIgbm90IHRvIGJyZWFrIHRoZSBub2RlIGFmZmluaXR5IGNvbXBvbmVudCwgbGV0J3MgZ28gZm9yIGEgc2xpZ2h0bHkgZGlmZmVyZW50IHdheSBvZiBoYW5kbGluZyB0aGUgbG9naWMgaGVyZQogICAgICAgIGlmIChwYXJzZWREZWZhdWx0QWZmaW5pdGVzLm5vZGVBZmZpbml0eSkgewogICAgICAgICAgdGhpcy5ub2RlQWZmaW5pdHkgPSBwYXJzZWREZWZhdWx0QWZmaW5pdGVzLm5vZGVBZmZpbml0eTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kc2V0KHRoaXMudmFsdWUsICdvdmVycmlkZUFmZmluaXR5Jywge30pOwogICAgICB9CiAgICB9LAogICAgdXBkYXRlTm9kZUFmZmluaXR5OiBmdW5jdGlvbiB1cGRhdGVOb2RlQWZmaW5pdHkodmFsKSB7CiAgICAgIHRoaXMuJHNldCh0aGlzLnZhbHVlLm92ZXJyaWRlQWZmaW5pdHksICdub2RlQWZmaW5pdHknLCB2YWwpOwogICAgfQogIH0KfTs="},{"version":3,"names":["Banner","GroupPanel","PodAffinity","NodeAffinity","ContainerResourceLimit","Tolerations","cleanUp","fetchSetting","RadioGroup","DEFAULT","CUSTOM","components","props","value","type","Object","default","_default","mode","String","required","fetch","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","settingId","setting","parsed","wrap","_callee$","_context","prev","next","concat","$store","sent","JSON","parse","defaultAffinity","e","console","error","stop","data","_this$value","_this$value2","_this$value3","nodeAffinity","overrideAffinity","podAffinity","podAntiAffinity","hasAffinityPopulated","keys","length","affinitySetting","created","ensureValue","computed","flatResources","get","_ref","overrideResourceRequirements","_ref$limits","limits","_ref$requests","requests","limitsCpu","cpu","limitsMemory","memory","requestsCpu","requestsMemory","set","neu","_this$value4","existing","out","_objectSpread","$set","affinityOptions","label","t","canEditAffinity","watch","methods","_this$value5","appendTolerations","affinitySettingChange","parsedDefaultAffinites","stringify","updateNodeAffinity","val"],"sources":["node_modules/@rancher/shell/edit/provisioning.cattle.io.cluster/tabs/AgentConfiguration.vue"],"sourcesContent":["<script>\nimport { Banner } from '@components/Banner';\nimport GroupPanel from '@shell/components/GroupPanel';\nimport PodAffinity from '@shell/components/form/PodAffinity';\nimport NodeAffinity from '@shell/components/form/NodeAffinity';\nimport ContainerResourceLimit from '@shell/components/ContainerResourceLimit';\nimport Tolerations from '@shell/components/form/Tolerations';\nimport { cleanUp } from '@shell/utils/object';\nimport { fetchSetting } from '@shell/utils/settings';\nimport { RadioGroup } from '@components/Form/Radio';\n\n// Affinity radio button choices\nconst DEFAULT = 'default';\nconst CUSTOM = 'custom';\n\n// This is the form for Agent Configuration\n// Used for both Cluster Agent and Fleet Agent configuration\nexport default {\n  components: {\n    Banner,\n    ContainerResourceLimit,\n    GroupPanel,\n    PodAffinity,\n    NodeAffinity,\n    RadioGroup,\n    Tolerations,\n  },\n  props: {\n    value: {\n      type:    Object,\n      default: () => {},\n    },\n\n    mode: {\n      type:     String,\n      required: true,\n    },\n\n    type: {\n      type:     String,\n      required: true,\n    }\n  },\n\n  async fetch() {\n    // Default affinity\n    const settingId = `${ this.type }-agent-default-affinity`;\n    const setting = await fetchSetting(this.$store, settingId);\n\n    if (setting) {\n      try {\n        const parsed = JSON.parse(setting.value || setting.default);\n\n        this.defaultAffinity = parsed || {};\n      } catch (e) {\n        console.error('Could not parse agent default setting', e); // eslint-disable-line no-console\n        this.defaultAffinity = {};\n      }\n    }\n  },\n\n  data() {\n    const nodeAffinity = this.value?.overrideAffinity?.nodeAffinity;\n    const podAffinity = this.value?.overrideAffinity?.podAffinity;\n    const podAntiAffinity = this.value?.overrideAffinity?.podAntiAffinity;\n\n    let hasAffinityPopulated = false;\n\n    if ((nodeAffinity && Object.keys(nodeAffinity).length) ||\n      (podAffinity && Object.keys(podAffinity).length) ||\n      (podAntiAffinity && Object.keys(podAntiAffinity).length)) {\n      hasAffinityPopulated = true;\n    }\n\n    return {\n      defaultAffinity: {},\n      affinitySetting: hasAffinityPopulated ? CUSTOM : DEFAULT,\n      nodeAffinity:    {}\n    };\n  },\n\n  created() {\n    this.ensureValue();\n  },\n\n  computed: {\n    flatResources: {\n      get() {\n        const { limits = {}, requests = {} } = this.value.overrideResourceRequirements || {};\n        const {\n          cpu: limitsCpu,\n          memory: limitsMemory,\n        } = limits;\n        const { cpu: requestsCpu, memory: requestsMemory } = requests;\n\n        return {\n          limitsCpu,\n          limitsMemory,\n          requestsCpu,\n          requestsMemory,\n        };\n      },\n      set(neu) {\n        const {\n          limitsCpu,\n          limitsMemory,\n          requestsCpu,\n          requestsMemory,\n        } = neu;\n\n        const existing = this.value?.overrideResourceRequirements || {};\n\n        delete existing.requests;\n        delete existing.limits;\n\n        const out = {\n          ...existing,\n          requests: {\n            cpu:    requestsCpu,\n            memory: requestsMemory,\n          },\n          limits: {\n            cpu:    limitsCpu,\n            memory: limitsMemory,\n          },\n        };\n\n        this.$set(this.value, 'overrideResourceRequirements', cleanUp(out));\n      },\n    },\n\n    affinityOptions() {\n      return [{\n        label: this.t('cluster.agentConfig.affinity.default'),\n        value: DEFAULT,\n      }, {\n        label: this.t('cluster.agentConfig.affinity.custom'),\n        value: CUSTOM,\n      }];\n    },\n\n    canEditAffinity() {\n      return this.affinitySetting === CUSTOM;\n    }\n  },\n\n  watch: {\n    value() {\n      this.ensureValue();\n    }\n  },\n\n  methods: {\n    ensureValue() {\n      // Ensure we have the model structure needed for the form controls\n      if (this.value) {\n        this.value.overrideAffinity = this.value.overrideAffinity || {};\n        this.value.appendTolerations = this.value.appendTolerations || [];\n        this.value.overrideResourceRequirements = this.value.overrideResourceRequirements || {};\n\n        this.nodeAffinity = this.value?.overrideAffinity?.nodeAffinity || {};\n      }\n    },\n\n    affinitySettingChange() {\n      if (this.affinitySetting === CUSTOM) {\n        const parsedDefaultAffinites = JSON.parse(JSON.stringify(this.defaultAffinity));\n\n        // Copy the default so that the user can edit it\n        // this will cover the pod affinities\n        this.$set(this.value, 'overrideAffinity', parsedDefaultAffinites);\n\n        // in order not to break the node affinity component, let's go for a slightly different way of handling the logic here\n        if (parsedDefaultAffinites.nodeAffinity) {\n          this.nodeAffinity = parsedDefaultAffinites.nodeAffinity;\n        }\n      } else {\n        this.$set(this.value, 'overrideAffinity', {});\n      }\n    },\n    updateNodeAffinity(val) {\n      this.$set(this.value.overrideAffinity, 'nodeAffinity', val);\n    }\n  }\n};\n</script>\n\n<template>\n  <div>\n    <Banner\n      :closable=\"false\"\n      color=\"info\"\n      label-key=\"cluster.agentConfig.banners.advanced\"\n    />\n\n    <GroupPanel\n      label-key=\"cluster.agentConfig.groups.podRequestsAndLimits\"\n      class=\"mt-20\"\n    >\n      <Banner\n        :closable=\"false\"\n        color=\"info\"\n        label-key=\"cluster.agentConfig.banners.limits\"\n      />\n      <ContainerResourceLimit\n        v-model=\"flatResources\"\n        :mode=\"mode\"\n        :show-tip=\"false\"\n        :handle-gpu-limit=\"false\"\n        class=\"mt-10\"\n      />\n    </GroupPanel>\n\n    <GroupPanel\n      label-key=\"cluster.agentConfig.groups.podTolerations\"\n      class=\"mt-20\"\n    >\n      <Banner\n        :closable=\"false\"\n        color=\"info\"\n        label-key=\"cluster.agentConfig.banners.tolerations\"\n      />\n      <Tolerations\n        v-model=\"value.appendTolerations\"\n        :mode=\"mode\"\n        class=\"mt-10\"\n      />\n    </GroupPanel>\n\n    <GroupPanel\n      label-key=\"cluster.agentConfig.groups.podAffinity\"\n      class=\"mt-20\"\n    >\n      <RadioGroup\n        v-model=\"affinitySetting\"\n        name=\"affinity-override\"\n        :mode=\"mode\"\n        :options=\"affinityOptions\"\n        class=\"mt-10\"\n        data-testid=\"affinity-options\"\n        @input=\"affinitySettingChange\"\n      />\n\n      <Banner\n        v-if=\"canEditAffinity\"\n        :closable=\"false\"\n        color=\"warning\"\n      >\n        <p v-clean-html=\"t('cluster.agentConfig.banners.windowsCompatibility', {}, true)\" />\n      </Banner>\n\n      <h4 v-if=\"canEditAffinity\">\n        {{ t('cluster.agentConfig.subGroups.podAffinityAnti') }}\n      </h4>\n\n      <PodAffinity\n        v-if=\"canEditAffinity\"\n        v-model=\"value\"\n        field=\"overrideAffinity\"\n        :mode=\"mode\"\n        class=\"mt-0 mb-20\"\n        :all-namespaces-option-available=\"true\"\n        :force-input-namespace-selection=\"true\"\n        :remove-labeled-input-namespace-label=\"true\"\n        data-testid=\"pod-affinity\"\n      />\n\n      <div\n        v-if=\"canEditAffinity\"\n        class=\"separator\"\n      />\n      <h4\n        v-if=\"canEditAffinity\"\n        class=\"mt-20\"\n      >\n        {{ t('cluster.agentConfig.subGroups.nodeAffinity') }}\n      </h4>\n\n      <NodeAffinity\n        v-if=\"canEditAffinity\"\n        v-model=\"nodeAffinity\"\n        :matching-selector-display=\"true\"\n        :mode=\"mode\"\n        class=\"mt-0\"\n        data-testid=\"node-affinity\"\n        @input=\"updateNodeAffinity\"\n      />\n    </GroupPanel>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n.separator {\n  width: 100%;\n  border-top: 1px solid var(--border);\n}\n</style>\n"],"mappings":"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","ignoreList":[]}]}