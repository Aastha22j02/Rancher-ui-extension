{"remainingRequest":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js??ref--16-1!/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/ubuntu/suseconf/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ubuntu/suseconf/node_modules/@rancher/shell/chart/rancher-backup/S3.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/ubuntu/suseconf/node_modules/@rancher/shell/chart/rancher-backup/S3.vue","mtime":1725338146566},{"path":"/home/ubuntu/suseconf/babel.config.js","mtime":1725343995893},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js","mtime":1725271298942},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1725271300920}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3JzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHkiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKZnVuY3Rpb24gb3duS2V5cyhlLCByKSB7IHZhciB0ID0gT2JqZWN0LmtleXMoZSk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBvID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKTsgciAmJiAobyA9IG8uZmlsdGVyKGZ1bmN0aW9uIChyKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsIHIpLmVudW1lcmFibGU7IH0pKSwgdC5wdXNoLmFwcGx5KHQsIG8pOyB9IHJldHVybiB0OyB9CmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQoZSkgeyBmb3IgKHZhciByID0gMTsgciA8IGFyZ3VtZW50cy5sZW5ndGg7IHIrKykgeyB2YXIgdCA9IG51bGwgIT0gYXJndW1lbnRzW3JdID8gYXJndW1lbnRzW3JdIDoge307IHIgJSAyID8gb3duS2V5cyhPYmplY3QodCksICEwKS5mb3JFYWNoKGZ1bmN0aW9uIChyKSB7IF9kZWZpbmVQcm9wZXJ0eShlLCByLCB0W3JdKTsgfSkgOiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGUsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHQpKSA6IG93bktleXMoT2JqZWN0KHQpKS5mb3JFYWNoKGZ1bmN0aW9uIChyKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCByLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsIHIpKTsgfSk7IH0gcmV0dXJuIGU7IH0KaW1wb3J0IHsgTGFiZWxlZElucHV0IH0gZnJvbSAnQGNvbXBvbmVudHMvRm9ybS9MYWJlbGVkSW5wdXQnOwppbXBvcnQgeyBDaGVja2JveCB9IGZyb20gJ0Bjb21wb25lbnRzL0Zvcm0vQ2hlY2tib3gnOwppbXBvcnQgRmlsZVNlbGVjdG9yIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL2Zvcm0vRmlsZVNlbGVjdG9yJzsKaW1wb3J0IFJlc291cmNlTGFiZWxlZFNlbGVjdCBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9mb3JtL1Jlc291cmNlTGFiZWxlZFNlbGVjdCc7CmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICd2dWV4JzsKaW1wb3J0IHsgU0VDUkVUIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy90eXBlcyc7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBMYWJlbGVkSW5wdXQ6IExhYmVsZWRJbnB1dCwKICAgIENoZWNrYm94OiBDaGVja2JveCwKICAgIEZpbGVTZWxlY3RvcjogRmlsZVNlbGVjdG9yLAogICAgUmVzb3VyY2VMYWJlbGVkU2VsZWN0OiBSZXNvdXJjZUxhYmVsZWRTZWxlY3QKICB9LAogIHByb3BzOiB7CiAgICB2YWx1ZTogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIGRlZmF1bHQ6IGZ1bmN0aW9uIF9kZWZhdWx0KCkgewogICAgICAgIHJldHVybiB7fTsKICAgICAgfQogICAgfSwKICAgIG1vZGU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAnY3JlYXRlJwogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIFNFQ1JFVDogU0VDUkVUCiAgICB9OwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHRoaXMuJGVtaXQoJ3ZhbGlkJywgdGhpcy52YWxpZCk7CiAgfSwKICBiZWZvcmVEZXN0cm95OiBmdW5jdGlvbiBiZWZvcmVEZXN0cm95KCkgewogICAgdGhpcy4kZW1pdCgndmFsaWQnLCB0cnVlKTsKICB9LAogIHdhdGNoOiB7CiAgICB2YWxpZDogZnVuY3Rpb24gdmFsaWQoKSB7CiAgICAgIHRoaXMuJGVtaXQoJ3ZhbGlkJywgdGhpcy52YWxpZCk7CiAgICB9CiAgfSwKICBjb21wdXRlZDogX29iamVjdFNwcmVhZCh7CiAgICBjcmVkZW50aWFsU2VjcmV0OiB7CiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICAgIHZhciBfdGhpcyR2YWx1ZSA9IHRoaXMudmFsdWUsCiAgICAgICAgICBjcmVkZW50aWFsU2VjcmV0TmFtZSA9IF90aGlzJHZhbHVlLmNyZWRlbnRpYWxTZWNyZXROYW1lLAogICAgICAgICAgY3JlZGVudGlhbFNlY3JldE5hbWVzcGFjZSA9IF90aGlzJHZhbHVlLmNyZWRlbnRpYWxTZWNyZXROYW1lc3BhY2U7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIG1ldGFkYXRhOiB7CiAgICAgICAgICAgIG5hbWU6IGNyZWRlbnRpYWxTZWNyZXROYW1lLAogICAgICAgICAgICBuYW1lc3BhY2U6IGNyZWRlbnRpYWxTZWNyZXROYW1lc3BhY2UKICAgICAgICAgIH0KICAgICAgICB9OwogICAgICB9LAogICAgICBzZXQ6IGZ1bmN0aW9uIHNldChuZXUpIHsKICAgICAgICB2YXIgX25ldSRtZXRhZGF0YSA9IG5ldS5tZXRhZGF0YSwKICAgICAgICAgIG5hbWUgPSBfbmV1JG1ldGFkYXRhLm5hbWUsCiAgICAgICAgICBuYW1lc3BhY2UgPSBfbmV1JG1ldGFkYXRhLm5hbWVzcGFjZTsKICAgICAgICB0aGlzLiRzZXQodGhpcy52YWx1ZSwgJ2NyZWRlbnRpYWxTZWNyZXROYW1lJywgbmFtZSk7CiAgICAgICAgdGhpcy4kc2V0KHRoaXMudmFsdWUsICdjcmVkZW50aWFsU2VjcmV0TmFtZXNwYWNlJywgbmFtZXNwYWNlKTsKICAgICAgfQogICAgfSwKICAgIHZhbGlkOiBmdW5jdGlvbiB2YWxpZCgpIHsKICAgICAgcmV0dXJuICEhdGhpcy52YWx1ZS5lbmRwb2ludCAmJiAhIXRoaXMudmFsdWUuYnVja2V0TmFtZTsKICAgIH0KICB9LCBtYXBHZXR0ZXJzKHsKICAgIHQ6ICdpMThuL3QnCiAgfSkpLAogIG1ldGhvZHM6IHsKICAgIHNldENBOiBmdW5jdGlvbiBzZXRDQShjYSkgewogICAgICB0cnkgewogICAgICAgIHZhciBlbmNvZGVkID0gYnRvYShjYSk7CiAgICAgICAgdGhpcy4kc2V0KHRoaXMudmFsdWUsICdlbmRwb2ludENBJywgZW5jb2RlZCk7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZQogICAgICAgIGNvbnNvbGUud2FybihlKTsKICAgICAgfQogICAgfQogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHZhciBfdGhpcyR2YWx1ZTIgPSB0aGlzLnZhbHVlLAogICAgICBjcmVkZW50aWFsU2VjcmV0TmFtZSA9IF90aGlzJHZhbHVlMi5jcmVkZW50aWFsU2VjcmV0TmFtZSwKICAgICAgY3JlZGVudGlhbFNlY3JldE5hbWVzcGFjZSA9IF90aGlzJHZhbHVlMi5jcmVkZW50aWFsU2VjcmV0TmFtZXNwYWNlOwogICAgaWYgKGNyZWRlbnRpYWxTZWNyZXROYW1lICYmICFjcmVkZW50aWFsU2VjcmV0TmFtZXNwYWNlKSB7CiAgICAgIHRoaXMudmFsdWUuY3JlZGVudGlhbFNlY3JldE5hbWUgPSAnJzsKICAgIH0KICB9Cn07"},{"version":3,"names":["LabeledInput","Checkbox","FileSelector","ResourceLabeledSelect","mapGetters","SECRET","components","props","value","type","Object","default","mode","String","data","mounted","$emit","valid","beforeDestroy","watch","computed","_objectSpread","credentialSecret","get","_this$value","credentialSecretName","credentialSecretNamespace","metadata","name","namespace","set","neu","_neu$metadata","$set","endpoint","bucketName","t","methods","setCA","ca","encoded","btoa","e","console","warn","created","_this$value2"],"sources":["node_modules/@rancher/shell/chart/rancher-backup/S3.vue"],"sourcesContent":["<script>\nimport { LabeledInput } from '@components/Form/LabeledInput';\nimport { Checkbox } from '@components/Form/Checkbox';\nimport FileSelector from '@shell/components/form/FileSelector';\nimport ResourceLabeledSelect from '@shell/components/form/ResourceLabeledSelect';\nimport { mapGetters } from 'vuex';\nimport { SECRET } from '@shell/config/types';\n\nexport default {\n  components: {\n    LabeledInput,\n    Checkbox,\n    FileSelector,\n    ResourceLabeledSelect,\n  },\n\n  props: {\n    value: {\n      type:    Object,\n      default: () => {\n        return {};\n      }\n    },\n    mode: {\n      type:    String,\n      default: 'create'\n    },\n\n  },\n\n  data() {\n    return { SECRET };\n  },\n\n  mounted() {\n    this.$emit('valid', this.valid);\n  },\n\n  beforeDestroy() {\n    this.$emit('valid', true);\n  },\n\n  watch: {\n    valid() {\n      this.$emit('valid', this.valid);\n    }\n  },\n\n  computed: {\n    credentialSecret: {\n      get() {\n        const { credentialSecretName, credentialSecretNamespace } = this.value;\n\n        return { metadata: { name: credentialSecretName, namespace: credentialSecretNamespace } };\n      },\n\n      set(neu) {\n        const { name, namespace } = neu.metadata;\n\n        this.$set(this.value, 'credentialSecretName', name);\n        this.$set(this.value, 'credentialSecretNamespace', namespace);\n      }\n    },\n    valid() {\n      return !!this.value.endpoint && !!this.value.bucketName;\n    },\n    ...mapGetters({ t: 'i18n/t' })\n  },\n\n  methods: {\n    setCA(ca) {\n      try {\n        const encoded = btoa(ca);\n\n        this.$set(this.value, 'endpointCA', encoded);\n      } catch (e) {\n        // eslint-disable-next-line no-console\n        console.warn(e);\n      }\n    },\n  },\n\n  created() {\n    const { credentialSecretName, credentialSecretNamespace } = this.value;\n\n    if (credentialSecretName && !credentialSecretNamespace) {\n      this.value.credentialSecretName = '';\n    }\n  },\n};\n</script>\n\n<template>\n  <div>\n    <div class=\"row mb-10\">\n      <div class=\"col span-6\">\n        <ResourceLabeledSelect\n          v-model=\"credentialSecret\"\n          :get-option-label=\"opt=>opt.metadata.name || ''\"\n          option-key=\"id\"\n          :mode=\"mode\"\n          :label=\"t('backupRestoreOperator.s3.credentialSecretName')\"\n          :resource-type=\"SECRET\"\n        />\n      </div>\n      <div class=\"col span-6\">\n        <LabeledInput\n          v-model=\"value.bucketName\"\n          data-testid=\"S3-bucketName\"\n          :mode=\"mode\"\n          :label=\"t('backupRestoreOperator.s3.bucketName')\"\n          required\n        />\n      </div>\n    </div>\n    <div class=\"row mb-10\">\n      <div class=\"col span-6\">\n        <LabeledInput\n          v-model=\"value.region\"\n          :mode=\"mode\"\n          :label=\"t('backupRestoreOperator.s3.region')\"\n        />\n      </div>\n      <div class=\"col span-6\">\n        <LabeledInput\n          v-model=\"value.folder\"\n          :mode=\"mode\"\n          :label=\"t('backupRestoreOperator.s3.folder')\"\n        />\n      </div>\n    </div>\n    <div class=\"row mb-10\">\n      <div class=\"col span-6\">\n        <LabeledInput\n          v-model=\"value.endpoint\"\n          :mode=\"mode\"\n          :label=\"t('backupRestoreOperator.s3.endpoint')\"\n          data-testid=\"S3-endpoint\"\n          required\n        />\n        <Checkbox\n          v-model=\"value.insecureTLSSkipVerify\"\n          class=\"mt-10\"\n          :mode=\"mode\"\n          :label=\"t('backupRestoreOperator.s3.insecureTLSSkipVerify')\"\n        />\n      </div>\n      <div class=\"col span-6\">\n        <LabeledInput\n          v-model=\"value.endpointCA\"\n          :mode=\"mode\"\n          type=\"multiline\"\n          :label=\"t('backupRestoreOperator.s3.endpointCA.label')\"\n        />\n        <div class=\"ca-controls\">\n          <FileSelector\n            v-if=\"mode!=='view'\"\n            class=\"btn btn-sm role-primary mt-5\"\n            :mode=\"mode\"\n            :label=\"t('generic.readFromFile')\"\n            @selected=\"e=> setCA(e)\"\n          />\n          <div class=\"ca-tooltip\">\n            <i\n              v-clean-tooltip=\"t('backupRestoreOperator.s3.endpointCA.prompt')\"\n              class=\"icon icon-info\"\n            />\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<style lang=\"scss\" scoped>\n  .ca-controls {\n    display: flex;\n\n    .ca-tooltip {\n      flex: 1;\n      margin-top: 4px;\n      text-align: right;\n\n      > i {\n        font-size: 16px;\n      };\n    }\n  }\n</style>\n"],"mappings":";;;;;;;;;;;AACA,SAAAA,YAAA;AACA,SAAAC,QAAA;AACA,OAAAC,YAAA;AACA,OAAAC,qBAAA;AACA,SAAAC,UAAA;AACA,SAAAC,MAAA;AAEA;EACAC,UAAA;IACAN,YAAA,EAAAA,YAAA;IACAC,QAAA,EAAAA,QAAA;IACAC,YAAA,EAAAA,YAAA;IACAC,qBAAA,EAAAA;EACA;EAEAI,KAAA;IACAC,KAAA;MACAC,IAAA,EAAAC,MAAA;MACAC,OAAA,WAAAA,SAAA;QACA;MACA;IACA;IACAC,IAAA;MACAH,IAAA,EAAAI,MAAA;MACAF,OAAA;IACA;EAEA;EAEAG,IAAA,WAAAA,KAAA;IACA;MAAAT,MAAA,EAAAA;IAAA;EACA;EAEAU,OAAA,WAAAA,QAAA;IACA,KAAAC,KAAA,eAAAC,KAAA;EACA;EAEAC,aAAA,WAAAA,cAAA;IACA,KAAAF,KAAA;EACA;EAEAG,KAAA;IACAF,KAAA,WAAAA,MAAA;MACA,KAAAD,KAAA,eAAAC,KAAA;IACA;EACA;EAEAG,QAAA,EAAAC,aAAA;IACAC,gBAAA;MACAC,GAAA,WAAAA,IAAA;QACA,IAAAC,WAAA,QAAAhB,KAAA;UAAAiB,oBAAA,GAAAD,WAAA,CAAAC,oBAAA;UAAAC,yBAAA,GAAAF,WAAA,CAAAE,yBAAA;QAEA;UAAAC,QAAA;YAAAC,IAAA,EAAAH,oBAAA;YAAAI,SAAA,EAAAH;UAAA;QAAA;MACA;MAEAI,GAAA,WAAAA,IAAAC,GAAA;QACA,IAAAC,aAAA,GAAAD,GAAA,CAAAJ,QAAA;UAAAC,IAAA,GAAAI,aAAA,CAAAJ,IAAA;UAAAC,SAAA,GAAAG,aAAA,CAAAH,SAAA;QAEA,KAAAI,IAAA,MAAAzB,KAAA,0BAAAoB,IAAA;QACA,KAAAK,IAAA,MAAAzB,KAAA,+BAAAqB,SAAA;MACA;IACA;IACAZ,KAAA,WAAAA,MAAA;MACA,cAAAT,KAAA,CAAA0B,QAAA,WAAA1B,KAAA,CAAA2B,UAAA;IACA;EAAA,GACA/B,UAAA;IAAAgC,CAAA;EAAA,GACA;EAEAC,OAAA;IACAC,KAAA,WAAAA,MAAAC,EAAA;MACA;QACA,IAAAC,OAAA,GAAAC,IAAA,CAAAF,EAAA;QAEA,KAAAN,IAAA,MAAAzB,KAAA,gBAAAgC,OAAA;MACA,SAAAE,CAAA;QACA;QACAC,OAAA,CAAAC,IAAA,CAAAF,CAAA;MACA;IACA;EACA;EAEAG,OAAA,WAAAA,QAAA;IACA,IAAAC,YAAA,QAAAtC,KAAA;MAAAiB,oBAAA,GAAAqB,YAAA,CAAArB,oBAAA;MAAAC,yBAAA,GAAAoB,YAAA,CAAApB,yBAAA;IAEA,IAAAD,oBAAA,KAAAC,yBAAA;MACA,KAAAlB,KAAA,CAAAiB,oBAAA;IACA;EACA;AACA","ignoreList":[]}]}