{"remainingRequest":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js??ref--16-1!/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js??ref--17-0!/home/ubuntu/suseconf/node_modules/ts-loader/index.js??ref--17-1!/home/ubuntu/suseconf/node_modules/@rancher/shell/edit/persistentvolume/__tests__/persistentvolume.test.ts","dependencies":[{"path":"/home/ubuntu/suseconf/node_modules/@rancher/shell/edit/persistentvolume/__tests__/persistentvolume.test.ts","mtime":1725338146566},{"path":"/home/ubuntu/suseconf/babel.config.js","mtime":1725343995893},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js","mtime":1725271298942},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/ts-loader/index.js","mtime":1725271299135}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0IHsgbW91bnQgfSBmcm9tICdAdnVlL3Rlc3QtdXRpbHMnOwppbXBvcnQgUGVyc2lzdGVudFZvbHVtZSBmcm9tICdAc2hlbGwvZWRpdC9wZXJzaXN0ZW50dm9sdW1lL2luZGV4JzsKZGVzY3JpYmUoJ3ZpZXc6IFBlcnNpc3RlbnRWb2x1bWUnLCBmdW5jdGlvbiAoKSB7CiAgaXQoJ3Nob3VsZCBsaXN0IGVuYWJsZWQgUFYgc3RvcmFnZSBvcHRpb24gaWYgc3VwcG9ydGVkJywgZnVuY3Rpb24gKCkgewogICAgdmFyIHBsdWdpbiA9IHsKICAgICAgbGFiZWxLZXk6ICdwZXJzaXN0ZW50Vm9sdW1lLmNzaS5sYWJlbCcsCiAgICAgIHN1cHBvcnRlZDogdHJ1ZSwKICAgICAgdmFsdWU6ICdjc2knCiAgICB9OwogICAgdmFyIHJlc291cmNlID0gJ1BlcnNpc3RlbnRWb2x1bWUnOwogICAgdmFyIHdyYXBwZXIgPSBtb3VudChQZXJzaXN0ZW50Vm9sdW1lLCB7CiAgICAgIHByb3BzRGF0YTogewogICAgICAgIHZhbHVlOiB7CiAgICAgICAgICBzcGVjOiB7fQogICAgICAgIH0KICAgICAgfSwKICAgICAgbW9ja3M6IHsKICAgICAgICAkc3RvcmU6IHsKICAgICAgICAgIGRpc3BhdGNoOiBmdW5jdGlvbiBkaXNwYXRjaCgpIHsKICAgICAgICAgICAgcmV0dXJuIGplc3QuZm4oKTsKICAgICAgICAgIH0sCiAgICAgICAgICBnZXR0ZXJzOiB7CiAgICAgICAgICAgICdpMThuL3QnOiBqZXN0LmZuKCksCiAgICAgICAgICAgICdpMThuL2V4aXN0cyc6IGplc3QuZm4oKSwKICAgICAgICAgICAgY3VycmVudFN0b3JlOiBmdW5jdGlvbiBjdXJyZW50U3RvcmUoKSB7CiAgICAgICAgICAgICAgcmV0dXJuICdjbHVzdGVyJzsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgJ2ZlYXR1cmVzL2dldCc6IGZ1bmN0aW9uIGZlYXR1cmVzX2dldCgpIHsKICAgICAgICAgICAgICByZXR1cm4gamVzdC5mbigpOwogICAgICAgICAgICB9LAogICAgICAgICAgICAncHJlZnMvZ2V0JzogZnVuY3Rpb24gcHJlZnNfZ2V0KCkgewogICAgICAgICAgICAgIHJldHVybiByZXNvdXJjZTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgJ2NsdXN0ZXIvc2NoZW1hRm9yJzogZnVuY3Rpb24gY2x1c3Rlcl9zY2hlbWFGb3IoKSB7fSwKICAgICAgICAgICAgJ2NsdXN0ZXIvYWxsJzogZnVuY3Rpb24gY2x1c3Rlcl9hbGwoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIFt7fV07CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgICRmZXRjaFN0YXRlOiB7CiAgICAgICAgICBwZW5kaW5nOiBmYWxzZSwKICAgICAgICAgIGVycm9yOiB0cnVlLAogICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpCiAgICAgICAgfSwKICAgICAgICAkcm91dGU6IHsKICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICByZXNvdXJjZTogcmVzb3VyY2UKICAgICAgICAgIH0sCiAgICAgICAgICBxdWVyeTogewogICAgICAgICAgICBBUzogJycKICAgICAgICAgIH0sCiAgICAgICAgICBoYXNoOiAnJwogICAgICAgIH0sCiAgICAgICAgJHJvdXRlcjogewogICAgICAgICAgY3VycmVudFJvdXRlOiB7fSwKICAgICAgICAgIHJlcGxhY2U6IGplc3QuZm4oKQogICAgICAgIH0KICAgICAgfSwKICAgICAgc3R1YnM6IHsKICAgICAgICBMYWJlbGVkU2VsZWN0OiB0cnVlCiAgICAgIH0KICAgIH0pOwogICAgdmFyIHNlbGVjdCA9IHdyYXBwZXIuZmluZCgnW2RhdGEtdGVzdGlkPSJwZXJzaXN0ZW50LXZvbHVtZS1wbHVnaW4tc2VsZWN0Il0nKTsKICAgIGV4cGVjdChzZWxlY3Qudm0ub3B0aW9ucykudG9TdHJpY3RFcXVhbChleHBlY3QuYXJyYXlDb250YWluaW5nKFtwbHVnaW5dKSk7CiAgfSk7CiAgaXQoJ3Nob3VsZCBzZWxlY3QgY3VycmVudCBwbHVnaW4nLCBmdW5jdGlvbiAoKSB7CiAgICB2YXIgcGx1Z2luID0gJ2NzaSc7CiAgICB2YXIgcmVzb3VyY2UgPSAnUGVyc2lzdGVudFZvbHVtZSc7CiAgICB2YXIgd3JhcHBlciA9IG1vdW50KFBlcnNpc3RlbnRWb2x1bWUsIHsKICAgICAgcHJvcHNEYXRhOiB7CiAgICAgICAgdmFsdWU6IHsKICAgICAgICAgIHNwZWM6IF9kZWZpbmVQcm9wZXJ0eSh7fSwgcGx1Z2luLCB7CiAgICAgICAgICAgIHZhbHVlOiBwbHVnaW4KICAgICAgICAgIH0pCiAgICAgICAgfQogICAgICB9LAogICAgICBtb2NrczogewogICAgICAgICRzdG9yZTogewogICAgICAgICAgZGlzcGF0Y2g6IGZ1bmN0aW9uIGRpc3BhdGNoKCkgewogICAgICAgICAgICByZXR1cm4gamVzdC5mbigpOwogICAgICAgICAgfSwKICAgICAgICAgIGdldHRlcnM6IHsKICAgICAgICAgICAgJ2kxOG4vdCc6IGplc3QuZm4oKSwKICAgICAgICAgICAgJ2kxOG4vZXhpc3RzJzogamVzdC5mbigpLAogICAgICAgICAgICBjdXJyZW50U3RvcmU6IGZ1bmN0aW9uIGN1cnJlbnRTdG9yZSgpIHsKICAgICAgICAgICAgICByZXR1cm4gJ2NsdXN0ZXInOwogICAgICAgICAgICB9LAogICAgICAgICAgICAnZmVhdHVyZXMvZ2V0JzogZnVuY3Rpb24gZmVhdHVyZXNfZ2V0KCkgewogICAgICAgICAgICAgIHJldHVybiBqZXN0LmZuKCk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgICdwcmVmcy9nZXQnOiBmdW5jdGlvbiBwcmVmc19nZXQoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHJlc291cmNlOwogICAgICAgICAgICB9LAogICAgICAgICAgICAnY2x1c3Rlci9zY2hlbWFGb3InOiBmdW5jdGlvbiBjbHVzdGVyX3NjaGVtYUZvcigpIHt9LAogICAgICAgICAgICAnY2x1c3Rlci9hbGwnOiBmdW5jdGlvbiBjbHVzdGVyX2FsbCgpIHsKICAgICAgICAgICAgICByZXR1cm4gW3t9XTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgJGZldGNoU3RhdGU6IHsKICAgICAgICAgIHBlbmRpbmc6IGZhbHNlLAogICAgICAgICAgZXJyb3I6IHRydWUsCiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCkKICAgICAgICB9LAogICAgICAgICRyb3V0ZTogewogICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgIHJlc291cmNlOiByZXNvdXJjZQogICAgICAgICAgfSwKICAgICAgICAgIHF1ZXJ5OiB7CiAgICAgICAgICAgIEFTOiAnJwogICAgICAgICAgfSwKICAgICAgICAgIGhhc2g6ICcnCiAgICAgICAgfSwKICAgICAgICAkcm91dGVyOiB7CiAgICAgICAgICBjdXJyZW50Um91dGU6IHt9LAogICAgICAgICAgcmVwbGFjZTogamVzdC5mbigpCiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICAgIGV4cGVjdCh3cmFwcGVyLnZtLnBsdWdpbikudG9CZShwbHVnaW4pOwogIH0pOwp9KTs="},{"version":3,"names":["mount","PersistentVolume","describe","it","plugin","labelKey","supported","value","resource","wrapper","propsData","spec","mocks","$store","dispatch","jest","fn","getters","currentStore","features_get","prefs_get","cluster_schemaFor","cluster_all","$fetchState","pending","error","timestamp","Date","now","$route","params","query","AS","hash","$router","currentRoute","replace","stubs","LabeledSelect","select","find","expect","vm","options","toStrictEqual","arrayContaining","_defineProperty","toBe"],"sources":["/home/ubuntu/suseconf/node_modules/@rancher/shell/edit/persistentvolume/__tests__/persistentvolume.test.ts"],"sourcesContent":["import { mount } from '@vue/test-utils';\nimport PersistentVolume from '@shell/edit/persistentvolume/index';\nimport { ExtendedVue, Vue } from 'vue/types/vue';\n\ndescribe('view: PersistentVolume', () => {\n  it('should list enabled PV storage option if supported', () => {\n    const plugin = {\n      labelKey: 'persistentVolume.csi.label', supported: true, value: 'csi'\n    };\n    const resource = 'PersistentVolume';\n    const wrapper = mount(PersistentVolume as ExtendedVue<Vue, {}, {}, {}, PersistentVolume>, {\n      propsData: { value: { spec: { } } },\n      mocks:     {\n        $store: {\n          dispatch: () => jest.fn(),\n          getters:  {\n            'i18n/t':            jest.fn(),\n            'i18n/exists':       jest.fn(),\n            currentStore:        () => 'cluster',\n            'features/get':      () => jest.fn(),\n            'prefs/get':         () => resource,\n            'cluster/schemaFor': () => {},\n            'cluster/all':       () => [{}],\n          }\n        },\n        $fetchState: {\n          pending: false, error: true, timestamp: Date.now()\n        },\n        $route: {\n          params: { resource },\n          query:  { AS: '' },\n          hash:   '',\n        },\n        $router: {\n          currentRoute: {},\n          replace:      jest.fn(),\n        }\n      },\n      stubs: { LabeledSelect: true }\n    });\n\n    const select = wrapper.find('[data-testid=\"persistent-volume-plugin-select\"]');\n\n    expect((select.vm as unknown as any).options).toStrictEqual(expect.arrayContaining([plugin]));\n  });\n\n  it('should select current plugin', () => {\n    const plugin = 'csi';\n    const resource = 'PersistentVolume';\n    const wrapper = mount(PersistentVolume as ExtendedVue<Vue, {}, {}, {}, PersistentVolume>, {\n      propsData: { value: { spec: { [plugin]: { value: plugin } } } },\n      mocks:     {\n        $store: {\n          dispatch: () => jest.fn(),\n          getters:  {\n            'i18n/t':            jest.fn(),\n            'i18n/exists':       jest.fn(),\n            currentStore:        () => 'cluster',\n            'features/get':      () => jest.fn(),\n            'prefs/get':         () => resource,\n            'cluster/schemaFor': () => {},\n            'cluster/all':       () => [{}],\n          }\n        },\n        $fetchState: {\n          pending: false, error: true, timestamp: Date.now()\n        },\n        $route: {\n          params: { resource },\n          query:  { AS: '' },\n          hash:   '',\n        },\n        $router: {\n          currentRoute: {},\n          replace:      jest.fn(),\n        }\n      }\n    });\n\n    expect(wrapper.vm.plugin).toBe(plugin);\n  });\n});\n"],"mappings":"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","ignoreList":[]}]}