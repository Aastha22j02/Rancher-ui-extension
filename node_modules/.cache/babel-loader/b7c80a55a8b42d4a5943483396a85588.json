{"remainingRequest":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js??ref--16-1!/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js??ref--17-0!/home/ubuntu/suseconf/node_modules/ts-loader/index.js??ref--17-1!/home/ubuntu/suseconf/node_modules/@rancher/shell/plugins/steve/steve-pagination-utils.ts","dependencies":[{"path":"/home/ubuntu/suseconf/node_modules/@rancher/shell/plugins/steve/steve-pagination-utils.ts","mtime":1725338146566},{"path":"/home/ubuntu/suseconf/babel.config.js","mtime":1725343995893},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js","mtime":1725271298942},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/ts-loader/index.js","mtime":1725271299135}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eSI7CmltcG9ydCBfdG9Db25zdW1hYmxlQXJyYXkgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdG9Db25zdW1hYmxlQXJyYXkiOwppbXBvcnQgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4gZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiI7CmltcG9ydCBfZ2V0UHJvdG90eXBlT2YgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZ2V0UHJvdG90eXBlT2YiOwppbXBvcnQgX2luaGVyaXRzIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2luaGVyaXRzIjsKaW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MiOwpmdW5jdGlvbiBfY2FsbFN1cGVyKHQsIG8sIGUpIHsgcmV0dXJuIG8gPSBfZ2V0UHJvdG90eXBlT2YobyksIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHQsIF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKSA/IFJlZmxlY3QuY29uc3RydWN0KG8sIGUgfHwgW10sIF9nZXRQcm90b3R5cGVPZih0KS5jb25zdHJ1Y3RvcikgOiBvLmFwcGx5KHQsIGUpKTsgfQpmdW5jdGlvbiBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCkgeyB0cnkgeyB2YXIgdCA9ICFCb29sZWFuLnByb3RvdHlwZS52YWx1ZU9mLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoQm9vbGVhbiwgW10sIGZ1bmN0aW9uICgpIHt9KSk7IH0gY2F0Y2ggKHQpIHt9IHJldHVybiAoX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCA9IGZ1bmN0aW9uIF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKSB7IHJldHVybiAhIXQ7IH0pKCk7IH0KaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuam9pbi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNvcnQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVmbGVjdC5jb25zdHJ1Y3QuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5yZXBsYWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnN0YXJ0cy13aXRoLmpzIjsKaW1wb3J0IHsgUGFnaW5hdGlvbkZpbHRlckZpZWxkLCBQYWdpbmF0aW9uUGFyYW1Qcm9qZWN0T3JOYW1lc3BhY2UsIFBhZ2luYXRpb25QYXJhbUZpbHRlciB9IGZyb20gJ0BzaGVsbC90eXBlcy9zdG9yZS9wYWdpbmF0aW9uLnR5cGVzJzsKaW1wb3J0IHsgTkFNRVNQQUNFX0ZJTFRFUl9BTExfU1lTVEVNLCBOQU1FU1BBQ0VfRklMVEVSX0FMTF9VU0VSLCBOQU1FU1BBQ0VfRklMVEVSX1BfRlVMTF9QUkVGSVggfSBmcm9tICdAc2hlbGwvdXRpbHMvbmFtZXNwYWNlLWZpbHRlcic7CmltcG9ydCB7IHVuaXEgfSBmcm9tICdAc2hlbGwvdXRpbHMvYXJyYXknOwppbXBvcnQgeyBDT05GSUdfTUFQLCBNQU5BR0VNRU5ULCBOQU1FU1BBQ0UsIE5PREUsIFBPRCB9IGZyb20gJ0BzaGVsbC9jb25maWcvdHlwZXMnOwp2YXIgTmFtZXNwYWNlUHJvamVjdEZpbHRlcnMgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIE5hbWVzcGFjZVByb2plY3RGaWx0ZXJzKCkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIE5hbWVzcGFjZVByb2plY3RGaWx0ZXJzKTsKICB9CiAgcmV0dXJuIF9jcmVhdGVDbGFzcyhOYW1lc3BhY2VQcm9qZWN0RmlsdGVycywgW3sKICAgIGtleTogImhhbmRsZVByZWZBbmRTZXR0aW5nRmlsdGVyIiwKICAgIHZhbHVlOgogICAgLyoqCiAgICAgKiBVc2VyIG5lZWRzIGFsbCByZXNvdXJjZXMuLi4uIGV4Y2VwdCBpZiB0aGVyZSdzIHNvbWUgc2V0dGluZ3Mgd2hpY2ggc2hvdWxkIHJlbW92ZSByZXNvdXJjZXMgaW4gc3BlY2lmaWMgY2lyY3Vtc3RhbmNlcwogICAgICovCiAgICBmdW5jdGlvbiBoYW5kbGVQcmVmQW5kU2V0dGluZ0ZpbHRlcihhbGxOYW1lc3BhY2VzLCBzaG93RHluYW1pY1JhbmNoZXJOYW1lc3BhY2VzLCBwcm9kdWN0SGlkZXNTeXN0ZW1OYW1lc3BhY2VzKSB7CiAgICAgIC8vIFRoZXNlIGFyZSBBTkQnZCB0b2dldGhlcgogICAgICAvLyBOb3QgbnMgMSBBTkQgbnMgMgogICAgICByZXR1cm4gYWxsTmFtZXNwYWNlcy5yZWR1Y2UoZnVuY3Rpb24gKHJlcywgbnMpIHsKICAgICAgICAvLyBMaW5rcyB0byBucy5pc09ic2N1cmUgYW5kIGNvdmVycyB0aGluZ3MgbGlrZSBgYy1gLCBgdXNlci1gLCBldGMgKHNlZSBPQlNDVVJFX05BTUVTUEFDRV9QUkVGSVgpCiAgICAgICAgdmFyIGhpZGVPYnNjdXJlID0gc2hvd0R5bmFtaWNSYW5jaGVyTmFtZXNwYWNlcyA/IGZhbHNlIDogbnMuaXNPYnNjdXJlOwogICAgICAgIC8vIExpbmtzIHRvIG5zLmlzU3lzdGVtIGFuZCBjb3ZlcnMgdGhpbmdzIGxpa2UgbnMgd2l0aCBzeXN0ZW0gYW5ub3RhdGlvbiwgaGFyZGNvZGVkIGxpc3QsIGV0YwogICAgICAgIHZhciBoaWRlU3lzdGVtID0gcHJvZHVjdEhpZGVzU3lzdGVtTmFtZXNwYWNlcyA/IG5zLmlzU3lzdGVtIDogZmFsc2U7CiAgICAgICAgaWYgKGhpZGVPYnNjdXJlIHx8IGhpZGVTeXN0ZW0pIHsKICAgICAgICAgIHJlcy5wdXNoKFBhZ2luYXRpb25QYXJhbUZpbHRlci5jcmVhdGVTaW5nbGVGaWVsZCh7CiAgICAgICAgICAgIGZpZWxkOiAnbWV0YWRhdGEubmFtZXNwYWNlJywKICAgICAgICAgICAgdmFsdWU6IG5zLm5hbWUsCiAgICAgICAgICAgIGVxdWFsczogZmFsc2UKICAgICAgICAgIH0pKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHJlczsKICAgICAgfSwgW10pOwogICAgfQogICAgLyoqCiAgICAgKiBVc2VyIG5lZWRzIGVpdGhlciBhbGwgdXNlciByZXNvdXJjZXMuLi4gb3IgYWxsIHN5c3RlbQogICAgICoKICAgICAqIFN5c3RlbSByZXNvdXJjZXMgcmV2b2x2ZSBhcm91bmQgdGhlIG5hbWVzcGFjZSdzIGlzU3lzdGVtIHByb3BlcnR5CiAgICAgKgogICAgICogVXNlcnMgcmVzb3VyY2VzIGFyZSB0aG9zZSBub3QgaW4gc3lzdGVtIG5hbWVzcGFjZXMKICAgICAqLwogIH0sIHsKICAgIGtleTogImhhbmRsZVN5c3RlbU9yVXNlckZpbHRlciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlU3lzdGVtT3JVc2VyRmlsdGVyKGFsbE5hbWVzcGFjZXMsIGlzQWxsU3lzdGVtLCBpc0FsbFVzZXIpIHsKICAgICAgdmFyIGFsbFN5c3RlbSA9IGFsbE5hbWVzcGFjZXMuZmlsdGVyKGZ1bmN0aW9uIChucykgewogICAgICAgIHJldHVybiBucy5pc1N5c3RlbTsKICAgICAgfSk7CiAgICAgIC8vID4gTmVpdGhlciBvZiB0aGVzZSB1c2UgcHJvamVjdHNPck5hbWVzcGFjZXMgdG8gYXZvaWQgc2NlbmFyaW9zIHdoZXJlIHRoZSBsb2NhbCBjbHVzdGVyIHByb3ZpZGVzIGEgbmFtZXNwYWNlIHdoaWNoIGhhcwogICAgICAvLyA+IGEgbWF0Y2hpbmcgcHJvamVjdC4uLiB3aGljaCBjb3VsZCBsZWFkIHRvIHJlc3VsdHMgaW4gdGhlIHVzZXIgcHJvamVjdCByZXNvdXJjZSBiZWluZyBpbmNsdWRlZCBpbiB0aGUgc3lzdGVtIGZpbHRlcgogICAgICBpZiAoaXNBbGxTeXN0ZW0pIHsKICAgICAgICAvLyByZXR1cm4gcmVzb3VyY2VzIGluIHN5c3RlbSBucyAxIE9SIGluIHN5c3RlbSBucyAyIC4uLgogICAgICAgIC8vICZmaWx0ZXI9bWV0YWRhdGEubmFtZXNwYWNlPXN5c3RlbSBucyAxLG1ldGFkYXRhLm5hbWVzcGFjZT1zeXN0ZW0gbnMgMgogICAgICAgIHJldHVybiBbUGFnaW5hdGlvblBhcmFtRmlsdGVyLmNyZWF0ZU11bHRpcGxlRmllbGRzKGFsbFN5c3RlbS5tYXAoZnVuY3Rpb24gKG5zKSB7CiAgICAgICAgICByZXR1cm4gbmV3IFBhZ2luYXRpb25GaWx0ZXJGaWVsZCh7CiAgICAgICAgICAgIGZpZWxkOiAnbWV0YWRhdGEubmFtZXNwYWNlJywKICAgICAgICAgICAgdmFsdWU6IG5zLm5hbWUKICAgICAgICAgIH0pOwogICAgICAgIH0pKV07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gaWYgaXNBbGxVc2VyCiAgICAgICAgLy8gcmV0dXJuIHJlc291cmNlcyBub3QgaW4gc3lzdGVtIG5zIDEgQU5EIG5vdCBpbiBzeXN0ZW0gbnMgMiAuLi4KICAgICAgICAvLyAmZmlsdGVyPW1ldGFkYXRhLm5hbWVzcGFjZSE9c3lzdGVtIG5zIDEmZmlsdGVyPW1ldGFkYXRhLm5hbWVzcGFjZSE9c3lzdGVtIG5zIDIKICAgICAgICByZXR1cm4gYWxsU3lzdGVtLm1hcChmdW5jdGlvbiAobnMpIHsKICAgICAgICAgIHJldHVybiBQYWdpbmF0aW9uUGFyYW1GaWx0ZXIuY3JlYXRlU2luZ2xlRmllbGQoewogICAgICAgICAgICBmaWVsZDogJ21ldGFkYXRhLm5hbWVzcGFjZScsCiAgICAgICAgICAgIHZhbHVlOiBucy5uYW1lLAogICAgICAgICAgICBlcXVhbHM6IGZhbHNlCiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBVc2VyIG5lZWRzIHJlc291cmNlcyBpbiBhIHNldCBvZiBwcm9qZWN0cyBvciBuYW1lc3BhY2VzCiAgICAgKi8KICB9LCB7CiAgICBrZXk6ICJoYW5kbGVTZWxlY3Rpb25GaWx0ZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZVNlbGVjdGlvbkZpbHRlcihuZXUsIGlzTG9jYWxDbHVzdGVyKSB7CiAgICAgIC8vIFVzZXIgaGFzIG9uZSBvciBtb3JlIHByb2plY3RzIG9yIG5hbWVzcGFjZXMuIFdlIGNhbiBwYXNzIHRoaXMgc3RyYWlnaHQgdGhyb3VnaCB0byBwcm9qZWN0c29ybmFtZXNwYWNlcwogICAgICAvLyByZXR1cm4gcmVzb3VyY2VzIGluIHByb2plY3QgMSBPUiBuYW1lc3BhY2UgMgogICAgICAvLyAmcHJvamVjdHNvcm5hbWVzcGFjZXM9cHJvamVjdCAxLG5hbWVzcGFjZSAyCiAgICAgIHZhciBwcm9qZWN0c09yTmFtZXNwYWNlcyA9IFtuZXcgUGFnaW5hdGlvblBhcmFtUHJvamVjdE9yTmFtZXNwYWNlKHsKICAgICAgICBwcm9qZWN0T3JOYW1lc3BhY2U6IG5ldQogICAgICB9KV07CiAgICAgIGlmIChpc0xvY2FsQ2x1c3RlcikgewogICAgICAgIC8vID4gQXMgcGVyIGBoYW5kbGVTeXN0ZW1PclVzZXJGaWx0ZXJgIGFib3ZlLCB3ZSBuZWVkIHRvIGJlIGNhcmVmdWwgb2YgdGhlIGxvY2FsIGNsdXN0ZXIgd2hlcmUgdGhlcmUncyBuYW1lc3BhY2VzIHJlbGF0ZWQgdG8gcHJvamVjdHMgd2l0aCB0aGUgc2FtZSBpZAogICAgICAgIC8vID4gSW4gdGhpcyBjYXNlCiAgICAgICAgLy8gLSBXZSdyZSBpbmNsdWRpbmcgcmVzb3VyY2VzIGluIHRoZSBwcm9qZWN0IGFuZCBpdCdzIHJlbGF0ZWQgbmFtZXNwYWNlICh2aWEgcHJvamVjdHNvcm5hbWVzcGFjZXMpCiAgICAgICAgLy8gLSBXZSdyZSBhbHNvIHRoZW4gZXhjbHVkaW5nIHJlc291cmNlcyBpbiB0aGUgcmVsYXRlZCBuYW1lc3BhY2UgKHZpYSBiZWxvdyBgZmlsdGVyYCkKICAgICAgICAvLyBFeGNsdWRlIHJlc291cmNlcyBOT1QgaW4gcHJvamVjdHMgbmFtZXNwYWNlIDEgQU5EIG5vdCBpbiBwcm9qZWN0cyBuYW1lc3BhY2UgMgogICAgICAgIC8vICZmaWx0ZXI9bWV0YWRhdGEubmFtZXNwYWNlIT1wbjEmZmlsdGVyPW1ldGFkYXRhLm5hbWVzcGFjZSE9cG4yCiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHByb2plY3RzT3JOYW1lc3BhY2VzOiBwcm9qZWN0c09yTmFtZXNwYWNlcywKICAgICAgICAgIGZpbHRlcnM6IG5ldS5maWx0ZXIoZnVuY3Rpb24gKHNlbGVjdGlvbikgewogICAgICAgICAgICByZXR1cm4gc2VsZWN0aW9uLnN0YXJ0c1dpdGgoTkFNRVNQQUNFX0ZJTFRFUl9QX0ZVTExfUFJFRklYKTsKICAgICAgICAgIH0pLm1hcChmdW5jdGlvbiAocHJvamVjdHMpIHsKICAgICAgICAgICAgcmV0dXJuIFBhZ2luYXRpb25QYXJhbUZpbHRlci5jcmVhdGVTaW5nbGVGaWVsZCh7CiAgICAgICAgICAgICAgZmllbGQ6ICdtZXRhZGF0YS5uYW1lc3BhY2UnLAogICAgICAgICAgICAgIHZhbHVlOiBwcm9qZWN0cy5yZXBsYWNlKE5BTUVTUEFDRV9GSUxURVJfUF9GVUxMX1BSRUZJWCwgJycpLAogICAgICAgICAgICAgIGVxdWFsczogZmFsc2UKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KQogICAgICAgIH07CiAgICAgIH0KICAgICAgcmV0dXJuIHsKICAgICAgICBwcm9qZWN0c09yTmFtZXNwYWNlczogcHJvamVjdHNPck5hbWVzcGFjZXMsCiAgICAgICAgZmlsdGVyczogW10KICAgICAgfTsKICAgIH0KICB9XSk7Cn0oKTsKLyoqCiAqIEhlbHBlciBmdW5jdGlvbnMgZm9yIHN0ZXZlIHBhZ2luYXRpb24KICovCnZhciBTdGV2ZVBhZ2luYXRpb25VdGlscyA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX05hbWVzcGFjZVByb2plY3RGaWx0KSB7CiAgZnVuY3Rpb24gU3RldmVQYWdpbmF0aW9uVXRpbHMoKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgU3RldmVQYWdpbmF0aW9uVXRpbHMpOwogICAgcmV0dXJuIF9jYWxsU3VwZXIodGhpcywgU3RldmVQYWdpbmF0aW9uVXRpbHMsIGFyZ3VtZW50cyk7CiAgfQogIF9pbmhlcml0cyhTdGV2ZVBhZ2luYXRpb25VdGlscywgX05hbWVzcGFjZVByb2plY3RGaWx0KTsKICByZXR1cm4gX2NyZWF0ZUNsYXNzKFN0ZXZlUGFnaW5hdGlvblV0aWxzLCBbewogICAga2V5OiAiY29udmVydEFycmF5UGF0aCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY29udmVydEFycmF5UGF0aChwYXRoKSB7CiAgICAgIGlmIChwYXRoLnN0YXJ0c1dpdGgoJ21ldGFkYXRhLmZpZWxkcy4nKSkgewogICAgICAgIHJldHVybiAibWV0YWRhdGEuZmllbGRzWyIuY29uY2F0KHBhdGguc3Vic3RyaW5nKDE2KSwgIl0iKTsKICAgICAgfQogICAgICByZXR1cm4gcGF0aDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjcmVhdGVTb3J0Rm9yUGFnaW5hdGlvbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlU29ydEZvclBhZ2luYXRpb24oc29ydEJ5UGF0aCkgewogICAgICByZXR1cm4gdGhpcy5jb252ZXJ0QXJyYXlQYXRoKHNvcnRCeVBhdGgpOwogICAgfQogICAgLyoqCiAgICAgKiBHaXZlbiB0aGUgc2VsZWN0aW9uIG9mIHByb2plY3RzIG9yIG5hbWVzcGFjZXMgY29tZSB1cCB3aXRoIGBmaWx0ZXJgIGFuZCBgcHJvamVjdHNvcm5hbWVzcGFjZWAgcXVlcnkgcGFyYW1zCiAgICAgKi8KICB9LCB7CiAgICBrZXk6ICJjcmVhdGVQYXJhbXNGcm9tTnNGaWx0ZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZVBhcmFtc0Zyb21Oc0ZpbHRlcihfcmVmKSB7CiAgICAgIHZhciBhbGxOYW1lc3BhY2VzID0gX3JlZi5hbGxOYW1lc3BhY2VzLAogICAgICAgIHNlbGVjdGlvbiA9IF9yZWYuc2VsZWN0aW9uLAogICAgICAgIGlzQWxsTmFtZXNwYWNlcyA9IF9yZWYuaXNBbGxOYW1lc3BhY2VzLAogICAgICAgIGlzTG9jYWxDbHVzdGVyID0gX3JlZi5pc0xvY2FsQ2x1c3RlciwKICAgICAgICBzaG93RHluYW1pY1JhbmNoZXJOYW1lc3BhY2VzID0gX3JlZi5zaG93RHluYW1pY1JhbmNoZXJOYW1lc3BhY2VzLAogICAgICAgIHByb2R1Y3RIaWRlc1N5c3RlbU5hbWVzcGFjZXMgPSBfcmVmLnByb2R1Y3RIaWRlc1N5c3RlbU5hbWVzcGFjZXM7CiAgICAgIC8vIEhvbGQgdXAsIHdoeSBhcmUgd2UgZG9pbmcgeWV0IGFub3RoZXIgd2F5IHRvIGNvbnZlcnQgdGhlIHVzZXIncyBwcm9qZWN0IC8gbmFtZXNwYWNlIGZpbHRlciB0byBhIHNldCBvZiBzb21ldGhpbmc/CiAgICAgIC8vIC0gV2hlbiBkb2luZyB0aGlzIGZvciBsb2NhbCBwYWdpbmF0aW9uIGBnZXRBY3RpdmVOYW1lc3BhY2VzYCBwcm92aWRlcyBhIGZ1bGwgbGlzdCBvZiBhcHBsaWNhYmxlIG5hbWVzcGFjZXMuCiAgICAgIC8vICAgTGlzdHMgdGhlbiBmaWx0ZXIgcmVzb3VyY2UgbG9jYWxseSB1c2luZyB0aG9zZSBuYW1lc3BhY2VzCiAgICAgIC8vIC0gUGFnaW5hdGlvbiBjYW5ub3QgdGFrZSB0aGlzIGFwcHJvYWNoIG9mICdnaW1tZSBhbGwgcmVzb3VyY2VzIGluIHRoZXNlIG5hbWVzcGFjZXMnIHByaW1hcmlseSBmb3IgdGhlICdPbmx5IFVzZXIgTmFtZXNwYWNlcycgY2FzZQogICAgICAvLyAgIC0gVXNlciBjb3VsZCBoYXZlIDJrIG5hbWVzcGFjZXMuIFRoaXMgd291bGQgcmVzdWx0IGluIDJrKyBuYW1lc3BhY2VzIGFkZGVkIHRvIHRoZSB1cmwgKG5hbWVzcGFjZT0xLG5hbWVzcGFjZT0yLG5hbWVzcGFjZT0zLCBldGMpCiAgICAgIC8vIC0gSW5zdGVhZCB3ZSBkbwogICAgICAvLyAgIC0gQWxsIGJ1dCBub3QgZ2l2ZW4gc2V0dGluZ3MgLSBHaW1tZSByZXNvdXJjZXMgTk9UIGluIHN5c3RlbSBvciBvYnNjdXJlIG5hbWVzcGFjZXMKICAgICAgLy8gICAtIE9ubHkgU3lzdGVtIE5hbWVzcGFjZXMgLSBHaW1tZSByZXNvdXJjZXMgaW4gdGhlIHN5c3RlbSBuYW1lc3BhY2VzICh3aGljaCBzaG91bGRuJ3QgYmUgbWFueSBuYW1lc3BhY2VzKQogICAgICAvLyAgIC0gT25seSBVc2VyIE5hbWVzcGFjZXMgLSBHaW1tZSByZXNvdXJjZXMgTk9UIGluIHN5c3RlbSBuYW1lc3BhY2VzCiAgICAgIC8vICAgLSBVc2VyIHNlbGVjdGlvbiAtIEdpbW1lIHJlc291cmNlcyBpbiBzcGVjaWZpYyBQcm9qZWN0cyBvciBOYW1lc3BhY2VzCiAgICAgIGlmIChpc0FsbE5hbWVzcGFjZXMgJiYgc2hvd0R5bmFtaWNSYW5jaGVyTmFtZXNwYWNlcyAmJiAhcHJvZHVjdEhpZGVzU3lzdGVtTmFtZXNwYWNlcykgewogICAgICAgIC8vIE5vLW9wLiBFdmVyeXRoaW5nIGlzIHJldHVybmVkCiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHByb2plY3RzT3JOYW1lc3BhY2VzOiBbXSwKICAgICAgICAgIGZpbHRlcnM6IFtdCiAgICAgICAgfTsKICAgICAgfQogICAgICAvLyB1c2VkIHRvIHJldHVybiByZXNvdXJjZXMgaW4gLyBub3QgaW4gcHJvamVjdHMvbmFtZXNwYWNlcyAoZW50cmllcyBhcmUgY2hlY2tlZCBpbiBib3RoIHR5cGVzKQogICAgICAvLyAmcHJvamVjdHNvcm5hbWVzcGFjZXM9cHJvamVjdCAxLG5hbWVzcGFjZSAyCiAgICAgIHZhciBwcm9qZWN0c09yTmFtZXNwYWNlcyA9IFtdOwogICAgICAvLyB1c2VkIHRvIHJldHVybiByZXNvdXJjZXMgaW4gLyBub3QgaW4gbmFtZXNwYWNlcwogICAgICAvLyAmZmlsdGVyPW1ldGFkYXRhLm5hbWVzcGFjZT1hYmMKICAgICAgdmFyIGZpbHRlcnMgPSBbXTsKICAgICAgaWYgKCFzaG93RHluYW1pY1JhbmNoZXJOYW1lc3BhY2VzIHx8IHByb2R1Y3RIaWRlc1N5c3RlbU5hbWVzcGFjZXMpIHsKICAgICAgICAvLyBXZSBuZWVkIHRvIGhpZGUgZHluYW1pYyBuYW1lc3BhY2VzICgnYy0nLCAncC0nLCBldGMpIE9SIHN5c3RlbSBuYW1lc3BhY2VzCiAgICAgICAgZmlsdGVycyA9IHRoaXMuaGFuZGxlUHJlZkFuZFNldHRpbmdGaWx0ZXIoYWxsTmFtZXNwYWNlcywgc2hvd0R5bmFtaWNSYW5jaGVyTmFtZXNwYWNlcywgcHJvZHVjdEhpZGVzU3lzdGVtTmFtZXNwYWNlcyk7CiAgICAgIH0KICAgICAgdmFyIGlzQWxsU3lzdGVtID0gc2VsZWN0aW9uWzBdID09PSBOQU1FU1BBQ0VfRklMVEVSX0FMTF9TWVNURU07CiAgICAgIHZhciBpc0FsbFVzZXIgPSBzZWxlY3Rpb25bMF0gPT09IE5BTUVTUEFDRV9GSUxURVJfQUxMX1VTRVI7CiAgICAgIGlmIChzZWxlY3Rpb24ubGVuZ3RoID09PSAxICYmIChpc0FsbFN5c3RlbSB8fCBpc0FsbFVzZXIpKSB7CiAgICAgICAgdmFyIF9maWx0ZXJzOwogICAgICAgIC8vIEZpbHRlciBieSByZXNvdXJjZXMgZWl0aGVyIGluIG9yIG5vdCBpbiBzeXN0ZW0gbmFtZXNwYWNlcwogICAgICAgIChfZmlsdGVycyA9IGZpbHRlcnMpLnB1c2guYXBwbHkoX2ZpbHRlcnMsIF90b0NvbnN1bWFibGVBcnJheSh0aGlzLmhhbmRsZVN5c3RlbU9yVXNlckZpbHRlcihhbGxOYW1lc3BhY2VzLCBpc0FsbFN5c3RlbSwgaXNBbGxVc2VyKSkpOwogICAgICB9IGVsc2UgewogICAgICAgIHZhciBfZmlsdGVyczI7CiAgICAgICAgLy8gVXNlciBoYXMgb25lIG9yIG1vcmUgcHJvamVjdHMgb3IgbmFtZXNwYWNlcwogICAgICAgIHZhciByZXMgPSB0aGlzLmhhbmRsZVNlbGVjdGlvbkZpbHRlcihzZWxlY3Rpb24sIGlzTG9jYWxDbHVzdGVyKTsKICAgICAgICBwcm9qZWN0c09yTmFtZXNwYWNlcyA9IHJlcy5wcm9qZWN0c09yTmFtZXNwYWNlczsKICAgICAgICAoX2ZpbHRlcnMyID0gZmlsdGVycykucHVzaC5hcHBseShfZmlsdGVyczIsIF90b0NvbnN1bWFibGVBcnJheShyZXMuZmlsdGVycykpOwogICAgICB9CiAgICAgIHJldHVybiB7CiAgICAgICAgcHJvamVjdHNPck5hbWVzcGFjZXM6IHByb2plY3RzT3JOYW1lc3BhY2VzLAogICAgICAgIGZpbHRlcnM6IGZpbHRlcnMKICAgICAgfTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjcmVhdGVQYXJhbXNGb3JQYWdpbmF0aW9uIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVQYXJhbXNGb3JQYWdpbmF0aW9uKHNjaGVtYSwgb3B0KSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHZhciBfYSwgX2I7CiAgICAgIGlmICghb3B0LnBhZ2luYXRpb24pIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdmFyIHBhcmFtcyA9IFtdOwogICAgICB2YXIgbmFtZXNwYWNlUGFyYW0gPSB0aGlzLmNvbnZlcnRQYWdpbmF0aW9uUGFyYW1zKHNjaGVtYSwgb3B0LnBhZ2luYXRpb24ucHJvamVjdHNPck5hbWVzcGFjZXMpOwogICAgICBpZiAobmFtZXNwYWNlUGFyYW0pIHsKICAgICAgICBwYXJhbXMucHVzaChuYW1lc3BhY2VQYXJhbSk7CiAgICAgIH0KICAgICAgaWYgKG9wdC5wYWdpbmF0aW9uLnBhZ2UpIHsKICAgICAgICBwYXJhbXMucHVzaCgicGFnZT0iLmNvbmNhdChvcHQucGFnaW5hdGlvbi5wYWdlKSk7CiAgICAgIH0KICAgICAgaWYgKG9wdC5wYWdpbmF0aW9uLnBhZ2VTaXplKSB7CiAgICAgICAgcGFyYW1zLnB1c2goInBhZ2VzaXplPSIuY29uY2F0KG9wdC5wYWdpbmF0aW9uLnBhZ2VTaXplKSk7CiAgICAgIH0KICAgICAgaWYgKChfYSA9IG9wdC5wYWdpbmF0aW9uLnNvcnQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5sZW5ndGgpIHsKICAgICAgICB2YXIgdmFsaWRhdGVGaWVsZHMgPSB7CiAgICAgICAgICBjaGVja2VkOiBuZXcgQXJyYXkoKSwKICAgICAgICAgIGludmFsaWQ6IG5ldyBBcnJheSgpCiAgICAgICAgfTsKICAgICAgICB2YXIgam9pbmVkID0gb3B0LnBhZ2luYXRpb24uc29ydC5tYXAoZnVuY3Rpb24gKHMpIHsKICAgICAgICAgIF90aGlzLnZhbGlkYXRlRmllbGQodmFsaWRhdGVGaWVsZHMsIHNjaGVtYSwgcy5maWVsZCk7CiAgICAgICAgICByZXR1cm4gIiIuY29uY2F0KHMuYXNjID8gJycgOiAnLScpLmNvbmNhdChfdGhpcy5jb252ZXJ0QXJyYXlQYXRoKHMuZmllbGQpKTsKICAgICAgICB9KS5qb2luKCcsJyk7CiAgICAgICAgcGFyYW1zLnB1c2goInNvcnQ9Ii5jb25jYXQoam9pbmVkKSk7CiAgICAgICAgaWYgKHZhbGlkYXRlRmllbGRzLmludmFsaWQubGVuZ3RoKSB7CiAgICAgICAgICBjb25zb2xlLndhcm4oIlBhZ2luYXRpb24gQVBJIGRvZXMgbm90IHN1cHBvcnQgc29ydGluZyAnIi5jb25jYXQoc2NoZW1hLmlkLCAiJyBieSB0aGUgcmVxdWVzdGVkIGZpZWxkczogIikuY29uY2F0KHVuaXEodmFsaWRhdGVGaWVsZHMuaW52YWxpZCkuam9pbignLCAnKSkpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnNvbGUKICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKChfYiA9IG9wdC5wYWdpbmF0aW9uLmZpbHRlcnMpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5sZW5ndGgpIHsKICAgICAgICB2YXIgZmlsdGVycyA9IHRoaXMuY29udmVydFBhZ2luYXRpb25QYXJhbXMoc2NoZW1hLCBvcHQucGFnaW5hdGlvbi5maWx0ZXJzKTsKICAgICAgICBpZiAoZmlsdGVycykgewogICAgICAgICAgcGFyYW1zLnB1c2goZmlsdGVycyk7CiAgICAgICAgfQogICAgICB9CiAgICAgIC8vIE5vdGUgLSBUaGVyZSBpcyBhIGBsaW1pdGAgcHJvcGVydHkgdGhhdCBpcyBieSBkZWZhdWx0IDEwMCwwMDAuIFRoaXMgY2FuIGJlIGRpc2FibGVkIGJ5IHVzaW5nIGBsaW1pdD0tMWAsCiAgICAgIC8vIGJ1dCB3ZSBzaG91bGRuJ3QgYmUgZmV0Y2hpbmcgYW55IHBhZ2VzIGJpZyBlbm91Z2ggdG8gZXhjZWVkIHRoZSBkZWZhdWx0CiAgICAgIHJldHVybiBwYXJhbXMuam9pbignJicpOwogICAgfQogICAgLyoqCiAgICAgKiBDaGVjayBpZiB0aGUgQVBJIHN1cHBvcnRzIGZpbHRlcmluZyBieSB0aGlzIGZpZWxkCiAgICAgKi8KICB9LCB7CiAgICBrZXk6ICJ2YWxpZGF0ZUZpZWxkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiB2YWxpZGF0ZUZpZWxkKHN0YXRlLCBzY2hlbWEsIGZpZWxkKSB7CiAgICAgIGlmICghZmllbGQpIHsKICAgICAgICByZXR1cm47IC8vIG5vIGZpZWxkLCBzbyBub3QgaW52YWxpZAogICAgICB9CiAgICAgIGlmIChzdGF0ZS5jaGVja2VkLmluY2x1ZGVzKGZpZWxkKSkgewogICAgICAgIHJldHVybjsgLy8gYWxyZWFkeSBjaGVja2VkLCBleGl0IGVhcmx5CiAgICAgIH0KICAgICAgc3RhdGUuY2hlY2tlZC5wdXNoKGZpZWxkKTsKICAgICAgLy8gRmlyc3QgY2hlY2sgaW4gb3VyIGhhcmRjb2RlZCBsaXN0IG9mIHN1cHBvcnRlZCBmaWx0ZXJzCiAgICAgIGlmIChbU3RldmVQYWdpbmF0aW9uVXRpbHMuVkFMSURfRklFTERTWycnXSwgU3RldmVQYWdpbmF0aW9uVXRpbHMuVkFMSURfRklFTERTW3NjaGVtYS5pZF0gLy8gVHlwZSBzcGVjaWZpYwogICAgICBdLmZpbmQoZnVuY3Rpb24gKGZpZWxkcykgewogICAgICAgIHJldHVybiBmaWVsZHMgPT09IG51bGwgfHwgZmllbGRzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBmaWVsZHMuZmluZChmdW5jdGlvbiAoZikgewogICAgICAgICAgaWYgKGYuc3RhcnRzV2l0aCkgewogICAgICAgICAgICBpZiAoZmllbGQuc3RhcnRzV2l0aChmLmZpZWxkKSkgewogICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gZmllbGQgPT09IGYuZmllbGQ7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0pKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIC8vIFRoZW4gY2hlY2sgaW4gc2NoZW1hICh0aGUgYXBpIGF1dG9tYXRpY2FsbHkgc3VwcG9ydHMgdGhlc2UpCiAgICAgIGlmICghIShzY2hlbWEgPT09IG51bGwgfHwgc2NoZW1hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzY2hlbWEuYXR0cmlidXRlcy5jb2x1bW5zLmZpbmQoCiAgICAgIC8vIFRoaXMgaXNuJ3QgdGhlIG1vc3QgcGVyZm9ybWFudCwgYnV0IHRoZSBzdHJpbmcgaXMgdGlueQogICAgICBmdW5jdGlvbiAoYXQpIHsKICAgICAgICByZXR1cm4gYXQuZmllbGQucmVwbGFjZSgnJC4nLCAnJykucmVwbGFjZSgnWycsICcuJykucmVwbGFjZSgnXScsICcnKSA9PT0gZmllbGQ7CiAgICAgIH0pKSkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBzdGF0ZS5pbnZhbGlkLnB1c2goZmllbGQpOwogICAgfQogICAgLyoqCiAgICAgKiBDb252ZXJ0IG91ciB7QGxpbmsgUGFnaW5hdGlvblBhcmFtfSBkZWZpbml0aW9uIG9mIHBhcmFtcyB0byBhIHNldCBvZiB1cmwgcGFyYW1zCiAgICAgKi8KICB9LCB7CiAgICBrZXk6ICJjb252ZXJ0UGFnaW5hdGlvblBhcmFtcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY29udmVydFBhZ2luYXRpb25QYXJhbXMoc2NoZW1hKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwogICAgICB2YXIgZmlsdGVycyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogW107CiAgICAgIHZhciB2YWxpZGF0ZUZpZWxkcyA9IHsKICAgICAgICBjaGVja2VkOiBuZXcgQXJyYXkoKSwKICAgICAgICBpbnZhbGlkOiBuZXcgQXJyYXkoKQogICAgICB9OwogICAgICB2YXIgZmlsdGVyU3RyaW5ncyA9IGZpbHRlcnMuZmlsdGVyKGZ1bmN0aW9uIChmaWx0ZXIpIHsKICAgICAgICByZXR1cm4gISFmaWx0ZXIuZmllbGRzLmxlbmd0aDsKICAgICAgfSkubWFwKGZ1bmN0aW9uIChmaWx0ZXIpIHsKICAgICAgICB2YXIgam9pbmVkID0gZmlsdGVyLmZpZWxkcy5tYXAoZnVuY3Rpb24gKGZpZWxkKSB7CiAgICAgICAgICBpZiAoZmllbGQuZmllbGQpIHsKICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIEFQSSBzdXBwb3J0cyBmaWx0ZXJpbmcgYnkgdGhpcyBmaWVsZAogICAgICAgICAgICBfdGhpczIudmFsaWRhdGVGaWVsZCh2YWxpZGF0ZUZpZWxkcywgc2NoZW1hLCBmaWVsZC5maWVsZCk7CiAgICAgICAgICAgIHZhciBleGFjdFBhcnRpYWwgPSBmaWVsZC5leGFjdCA/ICInIi5jb25jYXQoZmllbGQudmFsdWUsICInIikgOiBmaWVsZC52YWx1ZTsKICAgICAgICAgICAgcmV0dXJuICIiLmNvbmNhdChfdGhpczIuY29udmVydEFycmF5UGF0aChmaWVsZC5maWVsZCkpLmNvbmNhdChmaWVsZC5lcXVhbHMgPyAnPScgOiAnIT0nKS5jb25jYXQoZXhhY3RQYXJ0aWFsKTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBmaWVsZC52YWx1ZTsKICAgICAgICB9KS5qb2luKCcsJyk7IC8vIFRoaXMgbWVhbnMgT1IKICAgICAgICByZXR1cm4gIiIuY29uY2F0KGZpbHRlci5wYXJhbSkuY29uY2F0KGZpbHRlci5lcXVhbHMgPyAnPScgOiAnIT0nKS5jb25jYXQoam9pbmVkKTsKICAgICAgfSk7CiAgICAgIHZhciB1bmlxdWUgPSBmaWx0ZXJTdHJpbmdzLnJlZHVjZShmdW5jdGlvbiAocmVzLCBzKSB7CiAgICAgICAgcmVzW3NdID0gdHJ1ZTsKICAgICAgICByZXR1cm4gcmVzOwogICAgICB9LCB7fSk7CiAgICAgIHZhciByZXMgPSBPYmplY3Qua2V5cyh1bmlxdWUpLmpvaW4oJyYnKTsgLy8gVGhpcyBtZWFucyBBTkQKICAgICAgaWYgKHZhbGlkYXRlRmllbGRzLmludmFsaWQubGVuZ3RoKSB7CiAgICAgICAgY29uc29sZS53YXJuKCJQYWdpbmF0aW9uIEFQSSBkb2VzIG5vdCBzdXBwb3J0IGZpbHRlcmluZyAnIi5jb25jYXQoc2NoZW1hLmlkLCAiJyBieSB0aGUgcmVxdWVzdGVkIGZpZWxkczogIikuY29uY2F0KHVuaXEodmFsaWRhdGVGaWVsZHMuaW52YWxpZCkuam9pbignLCAnKSkpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnNvbGUKICAgICAgfQogICAgICByZXR1cm4gcmVzOwogICAgfQogIH1dKTsKfShOYW1lc3BhY2VQcm9qZWN0RmlsdGVycyk7Ci8qKgogKiBGaWx0ZXJpbmcgd2l0aCB0aGUgdmFpIGNhY2hlIHN1cHBvcnRzIHNwZWNpZmljIGZpZWxkcwogKiAxKSBUaG9zZSBsaXN0ZWQgaGVyZQogKiAyKSBUaG9zZSByZWZlcmVuY2VzIGluIHRoZSBzY2hlbWEncyBhdHRyaWJ1dGVzLmZpZWxkcyBsaXN0ICh3aGljaCBpcyB1c2VkIGJ5IGdlbmVyaWMgbGlzdHMpCiAqLwpTdGV2ZVBhZ2luYXRpb25VdGlscy5WQUxJRF9GSUVMRFMgPSBfZGVmaW5lUHJvcGVydHkoX2RlZmluZVByb3BlcnR5KF9kZWZpbmVQcm9wZXJ0eShfZGVmaW5lUHJvcGVydHkoX2RlZmluZVByb3BlcnR5KHsKICAnJzogW3sKICAgIGZpZWxkOiAnbWV0YWRhdGEubmFtZScKICB9LCB7CiAgICBmaWVsZDogJ21ldGFkYXRhLm5hbWVzcGFjZScKICB9LAogIC8vIHsgZmllbGQ6ICdpZCcgfSwgLy8gUGVuZGluZyBBUEkgc3VwcG9ydAogIC8vIHsgZmllbGQ6ICdtZXRhZGF0YS5zdGF0ZS5uYW1lJyB9LCAvLyBQZW5kaW5nIEFQSSBzdXBwb3J0CiAgewogICAgZmllbGQ6ICdtZXRhZGF0YS5jcmVhdGlvblRpbWVzdGFtcCcKICB9XQp9LCBOT0RFLCBbewogIGZpZWxkOiAnc3RhdHVzLm5vZGVJbmZvLmt1YmVsZXRWZXJzaW9uJwp9LCB7CiAgZmllbGQ6ICdzdGF0dXMubm9kZUluZm8ub3BlcmF0aW5nU3lzdGVtJwp9XSksIFBPRCwgW3sKICBmaWVsZDogJ3NwZWMuY29udGFpbmVycy5pbWFnZScKfSwgewogIGZpZWxkOiAnc3BlYy5ub2RlTmFtZScKfV0pLCBNQU5BR0VNRU5ULk5PREUsIFt7CiAgZmllbGQ6ICdzdGF0dXMubm9kZU5hbWUnCn1dKSwgQ09ORklHX01BUCwgW3sKICBmaWVsZDogJ21ldGFkYXRhLmxhYmVsc1toYXJ2ZXN0ZXJoY2kuaW8vY2xvdWQtaW5pdC10ZW1wbGF0ZV0nCn1dKSwgTkFNRVNQQUNFLCBbewogIGZpZWxkOiAnbWV0YWRhdGEubGFiZWxzW2ZpZWxkLmNhdHRsZS5pby9wcm9qZWN0SWRdJwp9XSk7CmV4cG9ydCBkZWZhdWx0IG5ldyBTdGV2ZVBhZ2luYXRpb25VdGlscygpOw=="},{"version":3,"names":["PaginationFilterField","PaginationParamProjectOrNamespace","PaginationParamFilter","NAMESPACE_FILTER_ALL_SYSTEM","NAMESPACE_FILTER_ALL_USER","NAMESPACE_FILTER_P_FULL_PREFIX","uniq","CONFIG_MAP","MANAGEMENT","NAMESPACE","NODE","POD","NamespaceProjectFilters","_classCallCheck","_createClass","key","value","handlePrefAndSettingFilter","allNamespaces","showDynamicRancherNamespaces","productHidesSystemNamespaces","reduce","res","ns","hideObscure","isObscure","hideSystem","isSystem","push","createSingleField","field","name","equals","handleSystemOrUserFilter","isAllSystem","isAllUser","allSystem","filter","createMultipleFields","map","handleSelectionFilter","neu","isLocalCluster","projectsOrNamespaces","projectOrNamespace","filters","selection","startsWith","projects","replace","StevePaginationUtils","_NamespaceProjectFilt","_callSuper","arguments","_inherits","convertArrayPath","path","concat","substring","createSortForPagination","sortByPath","createParamsFromNsFilter","_ref","isAllNamespaces","length","_filters","apply","_toConsumableArray","_filters2","createParamsForPagination","schema","opt","_this","pagination","params","namespaceParam","convertPaginationParams","page","pageSize","_a","sort","validateFields","checked","Array","invalid","joined","s","validateField","asc","join","console","warn","id","_b","state","includes","VALID_FIELDS","find","fields","f","attributes","columns","at","_this2","undefined","filterStrings","exactPartial","exact","param","unique","Object","keys","_defineProperty"],"sources":["/home/ubuntu/suseconf/node_modules/@rancher/shell/plugins/steve/steve-pagination-utils.ts"],"sourcesContent":["import { ActionFindPageArgs } from '@shell/types/store/dashboard-store.types';\nimport { PaginationParam, PaginationFilterField, PaginationParamProjectOrNamespace, PaginationParamFilter } from '@shell/types/store/pagination.types';\nimport { NAMESPACE_FILTER_ALL_SYSTEM, NAMESPACE_FILTER_ALL_USER, NAMESPACE_FILTER_P_FULL_PREFIX } from '@shell/utils/namespace-filter';\nimport Namespace from '@shell/models/namespace';\nimport { uniq } from '@shell/utils/array';\nimport {\n  CONFIG_MAP, MANAGEMENT, NAMESPACE, NODE, POD\n} from '@shell/config/types';\nimport { Schema } from 'plugins/steve/schema';\n\nclass NamespaceProjectFilters {\n  /**\n   * User needs all resources.... except if there's some settings which should remove resources in specific circumstances\n   */\n  protected handlePrefAndSettingFilter(allNamespaces: Namespace[], showDynamicRancherNamespaces: boolean, productHidesSystemNamespaces: boolean): PaginationParamFilter[] {\n    // These are AND'd together\n    // Not ns 1 AND ns 2\n    return allNamespaces.reduce((res, ns) => {\n      // Links to ns.isObscure and covers things like `c-`, `user-`, etc (see OBSCURE_NAMESPACE_PREFIX)\n      const hideObscure = showDynamicRancherNamespaces ? false : ns.isObscure;\n      // Links to ns.isSystem and covers things like ns with system annotation, hardcoded list, etc\n      const hideSystem = productHidesSystemNamespaces ? ns.isSystem : false;\n\n      if (hideObscure || hideSystem) {\n        res.push(PaginationParamFilter.createSingleField({\n          field: 'metadata.namespace', value: ns.name, equals: false\n        }));\n      }\n\n      return res;\n    }, [] as PaginationParamFilter[]);\n  }\n\n  /**\n   * User needs either all user resources... or all system\n   *\n   * System resources revolve around the namespace's isSystem property\n   *\n   * Users resources are those not in system namespaces\n   */\n  protected handleSystemOrUserFilter(allNamespaces: Namespace[], isAllSystem: boolean, isAllUser: boolean) {\n    const allSystem = allNamespaces.filter((ns) => ns.isSystem);\n\n    // > Neither of these use projectsOrNamespaces to avoid scenarios where the local cluster provides a namespace which has\n    // > a matching project... which could lead to results in the user project resource being included in the system filter\n    if (isAllSystem) {\n      // return resources in system ns 1 OR in system ns 2 ...\n      // &filter=metadata.namespace=system ns 1,metadata.namespace=system ns 2\n      return [PaginationParamFilter.createMultipleFields(\n        allSystem.map(\n          (ns) => new PaginationFilterField({ field: 'metadata.namespace', value: ns.name })\n        )\n      )];\n    } else { // if isAllUser\n      // return resources not in system ns 1 AND not in system ns 2 ...\n      // &filter=metadata.namespace!=system ns 1&filter=metadata.namespace!=system ns 2\n      return allSystem.map((ns) => PaginationParamFilter.createSingleField({\n        field: 'metadata.namespace', value: ns.name, equals: false\n      }));\n    }\n  }\n\n  /**\n   * User needs resources in a set of projects or namespaces\n   */\n  protected handleSelectionFilter(neu: string[], isLocalCluster: boolean) {\n    // User has one or more projects or namespaces. We can pass this straight through to projectsornamespaces\n\n    // return resources in project 1 OR namespace 2\n    // &projectsornamespaces=project 1,namespace 2\n    const projectsOrNamespaces = [\n      new PaginationParamProjectOrNamespace({ projectOrNamespace: neu })\n    ];\n\n    if (isLocalCluster) {\n      // > As per `handleSystemOrUserFilter` above, we need to be careful of the local cluster where there's namespaces related to projects with the same id\n      // > In this case\n      // - We're including resources in the project and it's related namespace (via projectsornamespaces)\n      // - We're also then excluding resources in the related namespace (via below `filter`)\n\n      // Exclude resources NOT in projects namespace 1 AND not in projects namespace 2\n      // &filter=metadata.namespace!=pn1&filter=metadata.namespace!=pn2\n      return {\n        projectsOrNamespaces,\n        filters: neu\n          .filter((selection) => selection.startsWith(NAMESPACE_FILTER_P_FULL_PREFIX))\n          .map((projects) => PaginationParamFilter.createSingleField({\n            field: 'metadata.namespace', value: projects.replace(NAMESPACE_FILTER_P_FULL_PREFIX, ''), equals: false\n          }))\n      };\n    }\n\n    return { projectsOrNamespaces, filters: [] };\n  }\n}\n\n/**\n * Helper functions for steve pagination\n */\nclass StevePaginationUtils extends NamespaceProjectFilters {\n  /**\n   * Filtering with the vai cache supports specific fields\n   * 1) Those listed here\n   * 2) Those references in the schema's attributes.fields list (which is used by generic lists)\n   */\n  static VALID_FIELDS: { [type: string]: { field: string, startsWith?: boolean }[]} = {\n    '': [// all types\n      { field: 'metadata.name' },\n      { field: 'metadata.namespace' },\n      // { field: 'id' }, // Pending API support\n      // { field: 'metadata.state.name' }, // Pending API support\n      { field: 'metadata.creationTimestamp' },\n    ],\n    [NODE]: [\n      { field: 'status.nodeInfo.kubeletVersion' },\n      { field: 'status.nodeInfo.operatingSystem' },\n    ],\n    [POD]: [\n      { field: 'spec.containers.image' },\n      { field: 'spec.nodeName' },\n    ],\n    [MANAGEMENT.NODE]: [\n      { field: 'status.nodeName' },\n    ],\n    [CONFIG_MAP]: [\n      { field: 'metadata.labels[harvesterhci.io/cloud-init-template]' }\n    ],\n    [NAMESPACE]: [\n      { field: 'metadata.labels[field.cattle.io/projectId]' }\n    ]\n  }\n\n  private convertArrayPath(path: string): string {\n    if (path.startsWith('metadata.fields.')) {\n      return `metadata.fields[${ path.substring(16) }]`;\n    }\n\n    return path;\n  }\n\n  public createSortForPagination(sortByPath: string): string {\n    return this.convertArrayPath(sortByPath);\n  }\n\n  /**\n   * Given the selection of projects or namespaces come up with `filter` and `projectsornamespace` query params\n   */\n  public createParamsFromNsFilter({\n    allNamespaces,\n    selection,\n    isAllNamespaces,\n    isLocalCluster,\n    showDynamicRancherNamespaces,\n    productHidesSystemNamespaces,\n  }: {\n    allNamespaces: Namespace[],\n    selection: string[],\n    /**\n     * There is no user provided filter\n     */\n    isAllNamespaces: boolean,\n    /**\n     * Weird things be happening if the target cluster is local / upstream. Uses this to check what cluster we're in\n     */\n    isLocalCluster: boolean,\n    /**\n     * Links to ns.isObscure and covers things like `c-`, `user-`, etc (see OBSCURE_NAMESPACE_PREFIX)\n     */\n    showDynamicRancherNamespaces: boolean,\n    /**\n     * Links to ns.isSystem and covers things like ns with system annotation, hardcoded list, etc\n     */\n    productHidesSystemNamespaces: boolean,\n  }): {\n    projectsOrNamespaces: PaginationParamProjectOrNamespace[],\n    filters: PaginationParamFilter[]\n  } {\n    // Hold up, why are we doing yet another way to convert the user's project / namespace filter to a set of something?\n    // - When doing this for local pagination `getActiveNamespaces` provides a full list of applicable namespaces.\n    //   Lists then filter resource locally using those namespaces\n    // - Pagination cannot take this approach of 'gimme all resources in these namespaces' primarily for the 'Only User Namespaces' case\n    //   - User could have 2k namespaces. This would result in 2k+ namespaces added to the url (namespace=1,namespace=2,namespace=3, etc)\n    // - Instead we do\n    //   - All but not given settings - Gimme resources NOT in system or obscure namespaces\n    //   - Only System Namespaces - Gimme resources in the system namespaces (which shouldn't be many namespaces)\n    //   - Only User Namespaces - Gimme resources NOT in system namespaces\n    //   - User selection - Gimme resources in specific Projects or Namespaces\n    if (isAllNamespaces && (showDynamicRancherNamespaces && !productHidesSystemNamespaces)) {\n      // No-op. Everything is returned\n      return {\n        projectsOrNamespaces: [],\n        filters:              []\n      };\n    }\n\n    // used to return resources in / not in projects/namespaces (entries are checked in both types)\n    // &projectsornamespaces=project 1,namespace 2\n    let projectsOrNamespaces: PaginationParamProjectOrNamespace[] = [];\n    // used to return resources in / not in namespaces\n    // &filter=metadata.namespace=abc\n    let filters: PaginationParamFilter[] = [];\n\n    if (!showDynamicRancherNamespaces || productHidesSystemNamespaces) {\n      // We need to hide dynamic namespaces ('c-', 'p-', etc) OR system namespaces\n      filters = this.handlePrefAndSettingFilter(allNamespaces, showDynamicRancherNamespaces, productHidesSystemNamespaces);\n    }\n\n    const isAllSystem = selection[0] === NAMESPACE_FILTER_ALL_SYSTEM;\n    const isAllUser = selection[0] === NAMESPACE_FILTER_ALL_USER;\n\n    if (selection.length === 1 && (isAllSystem || isAllUser)) {\n      // Filter by resources either in or not in system namespaces\n      filters.push(...this.handleSystemOrUserFilter(allNamespaces, isAllSystem, isAllUser ));\n    } else {\n      // User has one or more projects or namespaces\n      const res = this.handleSelectionFilter(selection, isLocalCluster);\n\n      projectsOrNamespaces = res.projectsOrNamespaces;\n      filters.push(...res.filters);\n    }\n\n    return {\n      projectsOrNamespaces,\n      filters\n    };\n  }\n\n  public createParamsForPagination(schema: Schema, opt: ActionFindPageArgs): string | undefined {\n    if (!opt.pagination) {\n      return;\n    }\n\n    const params: string[] = [];\n    const namespaceParam = this.convertPaginationParams(schema, opt.pagination.projectsOrNamespaces);\n\n    if (namespaceParam) {\n      params.push(namespaceParam);\n    }\n\n    if (opt.pagination.page) {\n      params.push(`page=${ opt.pagination.page }`);\n    }\n\n    if (opt.pagination.pageSize) {\n      params.push(`pagesize=${ opt.pagination.pageSize }`);\n    }\n\n    if (opt.pagination.sort?.length) {\n      const validateFields = {\n        checked: new Array<string>(),\n        invalid: new Array<string>(),\n      };\n\n      const joined = opt.pagination.sort\n        .map((s) => {\n          this.validateField(validateFields, schema, s.field);\n\n          return `${ s.asc ? '' : '-' }${ this.convertArrayPath(s.field) }`;\n        })\n        .join(',');\n\n      params.push(`sort=${ joined }`);\n\n      if (validateFields.invalid.length) {\n        console.warn(`Pagination API does not support sorting '${ schema.id }' by the requested fields: ${ uniq(validateFields.invalid).join(', ') }`); // eslint-disable-line no-console\n      }\n    }\n\n    if (opt.pagination.filters?.length) {\n      const filters = this.convertPaginationParams(schema, opt.pagination.filters);\n\n      if (filters) {\n        params.push(filters);\n      }\n    }\n\n    // Note - There is a `limit` property that is by default 100,000. This can be disabled by using `limit=-1`,\n    // but we shouldn't be fetching any pages big enough to exceed the default\n\n    return params.join('&');\n  }\n\n  /**\n   * Check if the API supports filtering by this field\n   */\n  private validateField(state: { checked: string[], invalid: string[]}, schema: Schema, field?: string) {\n    if (!field) {\n      return; // no field, so not invalid\n    }\n\n    if (state.checked.includes(field)) {\n      return; // already checked, exit early\n    }\n\n    state.checked.push(field);\n\n    // First check in our hardcoded list of supported filters\n    if ([\n      StevePaginationUtils.VALID_FIELDS[''], // Global\n      StevePaginationUtils.VALID_FIELDS[schema.id], // Type specific\n    ].find((fields) => fields?.find((f) => {\n      if (f.startsWith) {\n        if (field.startsWith(f.field)) {\n          return true;\n        }\n      } else {\n        return field === f.field;\n      }\n    }))) {\n      return;\n    }\n\n    // Then check in schema (the api automatically supports these)\n    if (!!schema?.attributes.columns.find(\n      // This isn't the most performant, but the string is tiny\n      (at) => at.field.replace('$.', '').replace('[', '.').replace(']', '') === field\n    )) {\n      return;\n    }\n\n    state.invalid.push(field);\n  }\n\n  /**\n   * Convert our {@link PaginationParam} definition of params to a set of url params\n   */\n  private convertPaginationParams(schema: Schema, filters: PaginationParam[] = []): string {\n    const validateFields = {\n      checked: new Array<string>(),\n      invalid: new Array<string>(),\n    };\n    const filterStrings = filters\n      .filter((filter) => !!filter.fields.length)\n      .map((filter) => {\n        const joined = filter.fields\n          .map((field) => {\n            if (field.field) {\n              // Check if the API supports filtering by this field\n              this.validateField(validateFields, schema, field.field);\n\n              const exactPartial = field.exact ? `'${ field.value }'` : field.value;\n\n              return `${ this.convertArrayPath(field.field) }${ field.equals ? '=' : '!=' }${ exactPartial }`;\n            }\n\n            return field.value;\n          })\n          .join(','); // This means OR\n\n        return `${ filter.param }${ filter.equals ? '=' : '!=' }${ joined }`;\n      });\n    const unique = filterStrings.reduce((res, s) => {\n      res[s] = true;\n\n      return res;\n    }, { } as {[filterString: string] : boolean });\n\n    const res = Object.keys(unique).join('&'); // This means AND\n\n    if (validateFields.invalid.length) {\n      console.warn(`Pagination API does not support filtering '${ schema.id }' by the requested fields: ${ uniq(validateFields.invalid).join(', ') }`); // eslint-disable-line no-console\n    }\n\n    return res;\n  }\n}\n\nexport default new StevePaginationUtils();\n"],"mappings":"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","ignoreList":[]}]}