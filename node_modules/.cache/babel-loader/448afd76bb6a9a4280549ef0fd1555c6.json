{"remainingRequest":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js??ref--16-1!/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js??ref--17-0!/home/ubuntu/suseconf/node_modules/ts-loader/index.js??ref--17-1!/home/ubuntu/suseconf/node_modules/@rancher/shell/edit/__tests__/service.test.ts","dependencies":[{"path":"/home/ubuntu/suseconf/node_modules/@rancher/shell/edit/__tests__/service.test.ts","mtime":1725338146566},{"path":"/home/ubuntu/suseconf/babel.config.js","mtime":1725343995893},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js","mtime":1725271298942},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/ts-loader/index.js","mtime":1725271299135}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnByb21pc2UuanMiOwppbXBvcnQgeyBzaGFsbG93TW91bnQgfSBmcm9tICdAdnVlL3Rlc3QtdXRpbHMnOwppbXBvcnQgeyBfQ0xPTkUgfSBmcm9tICdAc2hlbGwvY29uZmlnL3F1ZXJ5LXBhcmFtcyc7CmltcG9ydCBTZXJ2aWNlUGFnZSBmcm9tICdAc2hlbGwvZWRpdC9zZXJ2aWNlLnZ1ZSc7CnZhciBjcmVhdGVFZGl0Vmlld01vY2sgPSB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGVycm9yczogW10KICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgaXNDcmVhdGU6IGZ1bmN0aW9uIGlzQ3JlYXRlKCkgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9LAogICAgaXNFZGl0OiBmdW5jdGlvbiBpc0VkaXQoKSB7CiAgICAgIHJldHVybiB0cnVlOwogICAgfSwKICAgIGlzVmlldzogZnVuY3Rpb24gaXNWaWV3KCkgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9LAogICAgc2NoZW1hOiBmdW5jdGlvbiBzY2hlbWEoKSB7CiAgICAgIHJldHVybiB7fTsKICAgIH0sCiAgICBpc05hbWVzcGFjZWQ6IGZ1bmN0aW9uIGlzTmFtZXNwYWNlZCgpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfSwKICAgIGxhYmVsczogewogICAgICBnZXQ6IGplc3QuZm4oZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB7fTsKICAgICAgfSksCiAgICAgIHNldDogamVzdC5mbigpCiAgICB9LAogICAgYW5ub3RhdGlvbnM6IHsKICAgICAgZ2V0OiBqZXN0LmZuKGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4ge307CiAgICAgIH0pLAogICAgICBzZXQ6IGplc3QuZm4oKQogICAgfSwKICAgIGRvbmVSb3V0ZTogZnVuY3Rpb24gZG9uZVJvdXRlKCkgewogICAgICByZXR1cm4gJ21vY2tlZFJvdXRlJzsKICAgIH0sCiAgICBkb25lUGFyYW1zOiBmdW5jdGlvbiBkb25lUGFyYW1zKCkgewogICAgICByZXR1cm4ge307CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBkb25lOiBqZXN0LmZuKCksCiAgICBjb25mbGljdDogamVzdC5mbihmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoW10pOwogICAgfSksCiAgICBzYXZlOiBqZXN0LmZuKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpOwogICAgfSksCiAgICBhY3R1YWxseVNhdmU6IGplc3QuZm4oZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7CiAgICB9KSwKICAgIHNldEVycm9yczogamVzdC5mbigpCiAgfQp9Owp2YXIgZm9ybVZhbGlkYXRpb25Nb2NrID0ge307CmRlc2NyaWJlKCdzZXJ2aWNlIGVkaXQnLCBmdW5jdGlvbiAoKSB7CiAgdmFyIHdyYXBwZXI7CiAgdmFyIGNyZWF0ZUNvbXBvbmVudCA9IGZ1bmN0aW9uIGNyZWF0ZUNvbXBvbmVudChwcm9wc0RhdGEpIHsKICAgIHdyYXBwZXIgPSBzaGFsbG93TW91bnQoU2VydmljZVBhZ2UsIHsKICAgICAgcHJvcHNEYXRhOiBwcm9wc0RhdGEsCiAgICAgIG1peGluczogW2NyZWF0ZUVkaXRWaWV3TW9jaywgZm9ybVZhbGlkYXRpb25Nb2NrXSwKICAgICAgbW9ja3M6IHsKICAgICAgICAkc3RvcmU6IHsKICAgICAgICAgIGdldHRlcnM6IHsKICAgICAgICAgICAgJ21hbmFnZW1lbnQvYWxsJzogamVzdC5mbigpLAogICAgICAgICAgICAnaTE4bi90JzogamVzdC5mbigpCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LAogICAgICBjb21wdXRlZDogewogICAgICAgIHByb3Zpc2lvbmluZ0NsdXN0ZXI6IGplc3QuZm4oKQogICAgICB9CiAgICB9KTsKICB9OwogIGl0KCdzZXRzIGNsdXN0ZXJJUCB0byBhbiBlbXB0eSBzdHJpbmcgYW5kIGRlbGV0ZXMgY2x1c3RlcklQcyB3aGVuIGluIGNsb25lIG1vZGUnLCBmdW5jdGlvbiAoKSB7CiAgICB2YXIgdmFsdWUgPSB7CiAgICAgIHNwZWM6IHsKICAgICAgICBjbHVzdGVySVA6ICcxMC40My4xLjEnLAogICAgICAgIGNsdXN0ZXJJUHM6IFsnMTAuNDMuMS4xJywgJzEwLjQzLjEuMiddCiAgICAgIH0KICAgIH07CiAgICBjcmVhdGVDb21wb25lbnQoewogICAgICByZWFsTW9kZTogX0NMT05FLAogICAgICB2YWx1ZTogdmFsdWUKICAgIH0pOwogICAgZXhwZWN0KHdyYXBwZXIudm0udmFsdWUuc3BlYy5jbHVzdGVySVApLnRvQmUoJycpOwogICAgZXhwZWN0KHdyYXBwZXIudm0udmFsdWUuc3BlYy5jbHVzdGVySVBzKS50b0JlVW5kZWZpbmVkKCk7CiAgfSk7CiAgaXQoJ2RvZXMgbm90IGNoYW5nZSBjbHVzdGVySVAgYW5kIGNsdXN0ZXJJUHMgd2hlbiBub3QgaW4gY2xvbmUgbW9kZScsIGZ1bmN0aW9uICgpIHsKICAgIHZhciB2YWx1ZSA9IHsKICAgICAgc3BlYzogewogICAgICAgIGNsdXN0ZXJJUDogJzEwLjQzLjEuMScsCiAgICAgICAgY2x1c3RlcklQczogWycxMC40My4xLjEnLCAnMTAuNDMuMS4yJ10KICAgICAgfQogICAgfTsKICAgIGNyZWF0ZUNvbXBvbmVudCh7CiAgICAgIHJlYWxNb2RlOiAnc29tZU90aGVyTW9kZScsCiAgICAgIHZhbHVlOiB2YWx1ZQogICAgfSk7CiAgICBleHBlY3Qod3JhcHBlci52bS52YWx1ZS5zcGVjLmNsdXN0ZXJJUCkudG9CZSgnMTAuNDMuMS4xJyk7CiAgICBleHBlY3Qod3JhcHBlci52bS52YWx1ZS5zcGVjLmNsdXN0ZXJJUHMpLnRvU3RyaWN0RXF1YWwoWycxMC40My4xLjEnLCAnMTAuNDMuMS4yJ10pOwogIH0pOwp9KTs="},{"version":3,"names":["shallowMount","_CLONE","ServicePage","createEditViewMock","data","errors","computed","isCreate","isEdit","isView","schema","isNamespaced","labels","get","jest","fn","set","annotations","doneRoute","doneParams","methods","done","conflict","Promise","resolve","save","actuallySave","setErrors","formValidationMock","describe","wrapper","createComponent","propsData","mixins","mocks","$store","getters","provisioningCluster","it","value","spec","clusterIP","clusterIPs","realMode","expect","vm","toBe","toBeUndefined","toStrictEqual"],"sources":["/home/ubuntu/suseconf/node_modules/@rancher/shell/edit/__tests__/service.test.ts"],"sourcesContent":["import { shallowMount, Wrapper } from '@vue/test-utils';\nimport { _CLONE } from '@shell/config/query-params';\nimport ServicePage from '@shell/edit/service.vue';\n\nconst createEditViewMock = {\n  data() {\n    return { errors: [] };\n  },\n  computed: {\n    isCreate:     () => false,\n    isEdit:       () => true,\n    isView:       () => false,\n    schema:       () => ({}),\n    isNamespaced: () => false,\n    labels:       {\n      get: jest.fn(() => ({})),\n      set: jest.fn(),\n    },\n    annotations: {\n      get: jest.fn(() => ({})),\n      set: jest.fn(),\n    },\n    doneRoute:  () => 'mockedRoute',\n    doneParams: () => ({}),\n  },\n  methods: {\n    done:         jest.fn(),\n    conflict:     jest.fn(() => Promise.resolve([])),\n    save:         jest.fn(() => Promise.resolve()),\n    actuallySave: jest.fn(() => Promise.resolve()),\n    setErrors:    jest.fn()\n  }\n};\n\nconst formValidationMock = {};\n\ndescribe('service edit', () => {\n  let wrapper: Wrapper<InstanceType<typeof ServicePage>>;\n\n  const createComponent = (propsData: any) => {\n    wrapper = shallowMount(ServicePage,\n      {\n        propsData,\n        mixins: [createEditViewMock, formValidationMock],\n        mocks:  {\n          $store: {\n            getters: {\n              'management/all': jest.fn(),\n              'i18n/t':         jest.fn()\n            }\n          }\n        },\n        computed: { provisioningCluster: jest.fn() },\n      }\n    );\n  };\n\n  it('sets clusterIP to an empty string and deletes clusterIPs when in clone mode', () => {\n    const value = {\n      spec: {\n        clusterIP:  '10.43.1.1',\n        clusterIPs: ['10.43.1.1', '10.43.1.2'],\n      }\n    };\n\n    createComponent({ realMode: _CLONE, value });\n\n    expect(wrapper.vm.value.spec.clusterIP).toBe('');\n    expect(wrapper.vm.value.spec.clusterIPs).toBeUndefined();\n  });\n\n  it('does not change clusterIP and clusterIPs when not in clone mode', () => {\n    const value = {\n      spec: {\n        clusterIP:  '10.43.1.1',\n        clusterIPs: ['10.43.1.1', '10.43.1.2'],\n      }\n    };\n\n    createComponent({ realMode: 'someOtherMode', value });\n\n    expect(wrapper.vm.value.spec.clusterIP).toBe('10.43.1.1');\n    expect(wrapper.vm.value.spec.clusterIPs).toStrictEqual(['10.43.1.1', '10.43.1.2']);\n  });\n});\n"],"mappings":"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","ignoreList":[]}]}