{"remainingRequest":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js??ref--16-1!/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js??ref--17-0!/home/ubuntu/suseconf/node_modules/ts-loader/index.js??ref--17-1!/home/ubuntu/suseconf/node_modules/@rancher/shell/chart/__tests__/S3.test.ts","dependencies":[{"path":"/home/ubuntu/suseconf/node_modules/@rancher/shell/chart/__tests__/S3.test.ts","mtime":1725338146566},{"path":"/home/ubuntu/suseconf/babel.config.js","mtime":1725343995893},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js","mtime":1725271298942},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/ts-loader/index.js","mtime":1725271299135}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgX3JlZ2VuZXJhdG9yUnVudGltZSBmcm9tICIvaG9tZS91YnVudHUvc3VzZWNvbmYvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL3JlZ2VuZXJhdG9yL2luZGV4LmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maW5kLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7Ci8qIGVzbGludC1kaXNhYmxlIGplc3Qvbm8taG9va3MgKi8KaW1wb3J0IHsgbW91bnQsIGNyZWF0ZUxvY2FsVnVlIH0gZnJvbSAnQHZ1ZS90ZXN0LXV0aWxzJzsKaW1wb3J0IFMzIGZyb20gJ0BzaGVsbC9jaGFydC9yYW5jaGVyLWJhY2t1cC9TMyc7CmltcG9ydCBWdWV4IGZyb20gJ3Z1ZXgnOwp2YXIgbG9jYWxWdWUgPSBjcmVhdGVMb2NhbFZ1ZSgpOwpsb2NhbFZ1ZS51c2UoVnVleCk7CmRlc2NyaWJlKCdyYW5jaGVyLWJhY2t1cDogUzMnLCBmdW5jdGlvbiAoKSB7CiAgdmFyIG1vY2tTdG9yZSA9IHsKICAgIGdldHRlcnM6IHsKICAgICAgJ2kxOG4vdCc6IGZ1bmN0aW9uIGkxOG5fdCh0ZXh0KSB7CiAgICAgICAgcmV0dXJuIHRleHQ7CiAgICAgIH0sCiAgICAgIHQ6IGZ1bmN0aW9uIHQodGV4dCkgewogICAgICAgIHJldHVybiB0ZXh0OwogICAgICB9LAogICAgICAnY2x1c3Rlci9hbGwnOiBmdW5jdGlvbiBjbHVzdGVyX2FsbCgpIHsKICAgICAgICByZXR1cm4gW107CiAgICAgIH0sCiAgICAgICdjbHVzdGVyL3BhZ2luYXRpb25FbmFibGVkJzogZnVuY3Rpb24gY2x1c3Rlcl9wYWdpbmF0aW9uRW5hYmxlZCgpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgIH0KICB9OwogIHZhciB3cmFwcGVyID0gbW91bnQoUzMsIHsKICAgIG1vY2tzOiB7CiAgICAgICRzdG9yZTogbW9ja1N0b3JlLAogICAgICAkZmV0Y2hTdGF0ZTogewogICAgICAgIHBlbmRpbmc6IGZhbHNlCiAgICAgIH0KICAgIH0KICB9KTsKICBpdCgnc2hvdWxkIGVtaXQgaW52YWxpZCB3aGVuIGZvcm0gaXMgbm90IGZpbGxlZCcsIGZ1bmN0aW9uICgpIHsKICAgIGV4cGVjdCh3cmFwcGVyLmVtaXR0ZWQoJ3ZhbGlkJykpLnRvSGF2ZUxlbmd0aCgxKTsKICAgIGV4cGVjdCh3cmFwcGVyLmVtaXR0ZWQoJ3ZhbGlkJylbMF1bMF0pLnRvQmVGYWxzeSgpOwogIH0pOwogIGl0KCdzaG91bGQgZW1pdCB2YWxpZCB3aGVuIHJlcXVpcmVkIGZpZWxkcyBhcmUgZmlsbGVkJywgLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgIHZhciBidWNrZXROYW1lLCBlbmRwb2ludCwgdGVzdENhc2VzLCBfaSwgX3Rlc3RDYXNlcywgdGVzdENhc2U7CiAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgY2FzZSAwOgogICAgICAgICAgYnVja2V0TmFtZSA9IHdyYXBwZXIuZmluZCgnW2RhdGEtdGVzdGlkPSJTMy1idWNrZXROYW1lIl0nKS5maW5kKCdpbnB1dCcpOwogICAgICAgICAgZW5kcG9pbnQgPSB3cmFwcGVyLmZpbmQoJ1tkYXRhLXRlc3RpZD0iUzMtZW5kcG9pbnQiXScpLmZpbmQoJ2lucHV0Jyk7CiAgICAgICAgICB0ZXN0Q2FzZXMgPSBbewogICAgICAgICAgICBidWNrZXROYW1lSW5wdXQ6ICd2YWwnLAogICAgICAgICAgICBlbmRwb2ludElucHV0OiAnJywKICAgICAgICAgICAgcmVzdWx0OiBmYWxzZQogICAgICAgICAgfSwgewogICAgICAgICAgICBidWNrZXROYW1lSW5wdXQ6ICcnLAogICAgICAgICAgICBlbmRwb2ludElucHV0OiAndmFsJywKICAgICAgICAgICAgcmVzdWx0OiBmYWxzZQogICAgICAgICAgfV07CiAgICAgICAgICBfaSA9IDAsIF90ZXN0Q2FzZXMgPSB0ZXN0Q2FzZXM7CiAgICAgICAgY2FzZSA0OgogICAgICAgICAgaWYgKCEoX2kgPCBfdGVzdENhc2VzLmxlbmd0aCkpIHsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE1OwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAgIHRlc3RDYXNlID0gX3Rlc3RDYXNlc1tfaV07CiAgICAgICAgICBidWNrZXROYW1lLnNldFZhbHVlKHRlc3RDYXNlLmJ1Y2tldE5hbWVJbnB1dCk7CiAgICAgICAgICBlbmRwb2ludC5zZXRWYWx1ZSh0ZXN0Q2FzZS5lbmRwb2ludElucHV0KTsKICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMDsKICAgICAgICAgIHJldHVybiB3cmFwcGVyLnZtLiRuZXh0VGljaygpOwogICAgICAgIGNhc2UgMTA6CiAgICAgICAgICBleHBlY3Qod3JhcHBlci5lbWl0dGVkKCd2YWxpZCcpKS50b0hhdmVMZW5ndGgoMSk7CiAgICAgICAgICBleHBlY3Qod3JhcHBlci5lbWl0dGVkKCd2YWxpZCcpWzBdWzBdKS50b0JlKGZhbHNlKTsKICAgICAgICBjYXNlIDEyOgogICAgICAgICAgX2krKzsKICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAxNToKICAgICAgICAgIGJ1Y2tldE5hbWUuc2V0VmFsdWUoJ3ZhbDEnKTsKICAgICAgICAgIGVuZHBvaW50LnNldFZhbHVlKCd2YWwyJyk7CiAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTk7CiAgICAgICAgICByZXR1cm4gd3JhcHBlci52bS4kbmV4dFRpY2soKTsKICAgICAgICBjYXNlIDE5OgogICAgICAgICAgZXhwZWN0KHdyYXBwZXIuZW1pdHRlZCgndmFsaWQnKSkudG9IYXZlTGVuZ3RoKDIpOwogICAgICAgICAgZXhwZWN0KHdyYXBwZXIuZW1pdHRlZCgndmFsaWQnKVsxXVswXSkudG9CZSh0cnVlKTsKICAgICAgICBjYXNlIDIxOgogICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICB9CiAgICB9LCBfY2FsbGVlKTsKICB9KSkpOwp9KTs="},{"version":3,"names":["mount","createLocalVue","S3","Vuex","localVue","use","describe","mockStore","getters","i18n_t","text","t","cluster_all","cluster_paginationEnabled","wrapper","mocks","$store","$fetchState","pending","it","expect","emitted","toHaveLength","toBeFalsy","_asyncToGenerator","_regeneratorRuntime","mark","_callee","bucketName","endpoint","testCases","_i","_testCases","testCase","wrap","_callee$","_context","prev","next","find","bucketNameInput","endpointInput","result","length","setValue","vm","$nextTick","toBe","stop"],"sources":["/home/ubuntu/suseconf/node_modules/@rancher/shell/chart/__tests__/S3.test.ts"],"sourcesContent":["/* eslint-disable jest/no-hooks */\nimport { mount, createLocalVue } from '@vue/test-utils';\n\nimport S3 from '@shell/chart/rancher-backup/S3';\nimport Vuex from 'vuex';\n\nconst localVue = createLocalVue();\n\nlocalVue.use(Vuex);\n\ndescribe('rancher-backup: S3', () => {\n  const mockStore = {\n    getters: {\n      'i18n/t':                    (text: string) => text,\n      t:                           (text: string) => text,\n      'cluster/all':               () => [],\n      'cluster/paginationEnabled': () => false\n    }\n  };\n  const wrapper = mount(S3, { mocks: { $store: mockStore, $fetchState: { pending: false } } });\n\n  it('should emit invalid when form is not filled', () => {\n    expect(wrapper.emitted('valid')).toHaveLength(1);\n    expect(wrapper.emitted('valid')![0][0]).toBeFalsy();\n  });\n\n  it('should emit valid when required fields are filled', async() => {\n    const bucketName = wrapper.find('[data-testid=\"S3-bucketName\"]').find('input');\n    const endpoint = wrapper.find('[data-testid=\"S3-endpoint\"]').find('input');\n    const testCases = [\n      {\n        bucketNameInput: 'val',\n        endpointInput:   '',\n        result:          false\n      },\n      {\n        bucketNameInput: '',\n        endpointInput:   'val',\n        result:          false\n      }\n    ];\n\n    for (const testCase of testCases) {\n      bucketName.setValue(testCase.bucketNameInput);\n      endpoint.setValue(testCase.endpointInput);\n      await wrapper.vm.$nextTick();\n      expect(wrapper.emitted('valid')).toHaveLength(1);\n      expect(wrapper.emitted('valid')![0][0]).toBe(false);\n    }\n\n    bucketName.setValue('val1');\n    endpoint.setValue('val2');\n    await wrapper.vm.$nextTick();\n    expect(wrapper.emitted('valid')).toHaveLength(2);\n    expect(wrapper.emitted('valid')![1][0]).toBe(true);\n  });\n});\n"],"mappings":"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","ignoreList":[]}]}