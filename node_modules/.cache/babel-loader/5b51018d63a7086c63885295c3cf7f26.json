{"remainingRequest":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js??ref--16-1!/home/ubuntu/suseconf/node_modules/@rancher/shell/utils/install-redirect.js","dependencies":[{"path":"/home/ubuntu/suseconf/node_modules/@rancher/shell/utils/install-redirect.js","mtime":1725338146566},{"path":"/home/ubuntu/suseconf/babel.config.js","mtime":1725343995893},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js","mtime":1725271298942}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eSI7CmltcG9ydCBfdHlwZW9mIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3R5cGVvZiI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiL2hvbWUvdWJ1bnR1L3N1c2Vjb25mL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9yZWdlbmVyYXRvci9pbmRleC5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0IHsgUkVQT19UWVBFLCBSRVBPLCBDSEFSVCwgVkVSU0lPTiB9IGZyb20gJ0BzaGVsbC9jb25maWcvcXVlcnktcGFyYW1zJzsKZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKHByb2R1Y3QsIGNoYXJ0TmFtZSwgZGVmYXVsdFJlc291cmNlT3JSb3V0ZSkgewogIHZhciBpbnN0YWxsID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiB0cnVlOwogIHJldHVybiAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgdmFyIF9taWRkbGV3YXJlID0gX2FzeW5jVG9HZW5lcmF0b3IoLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKF9yZWYpIHsKICAgICAgdmFyIF9zdG9yZSRnZXR0ZXJzJGN1cnJlbjsKICAgICAgdmFyIHJlZGlyZWN0LCBzdG9yZSwgY2x1c3RlciwgY2hhcnQ7CiAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICByZWRpcmVjdCA9IF9yZWYucmVkaXJlY3QsIHN0b3JlID0gX3JlZi5zdG9yZTsKICAgICAgICAgICAgY2x1c3RlciA9ICgoX3N0b3JlJGdldHRlcnMkY3VycmVuID0gc3RvcmUuZ2V0dGVyc1snY3VycmVudENsdXN0ZXInXSkgPT09IG51bGwgfHwgX3N0b3JlJGdldHRlcnMkY3VycmVuID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfc3RvcmUkZ2V0dGVycyRjdXJyZW4uaWQpIHx8ICdsb2NhbCc7CiAgICAgICAgICAgIGlmICghc3RvcmUuZ2V0dGVyc1sndHlwZS1tYXAvaXNQcm9kdWN0QWN0aXZlJ10ocHJvZHVjdCkpIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gOTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoIWRlZmF1bHRSZXNvdXJjZU9yUm91dGUpIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNzsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoIShfdHlwZW9mKGRlZmF1bHRSZXNvdXJjZU9yUm91dGUpID09PSAnb2JqZWN0JykpIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNjsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCByZWRpcmVjdChkZWZhdWx0UmVzb3VyY2VPclJvdXRlKSk7CiAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIHJlZGlyZWN0KHsKICAgICAgICAgICAgICBuYW1lOiAnYy1jbHVzdGVyLXByb2R1Y3QtcmVzb3VyY2UnLAogICAgICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICAgICAgY2x1c3RlcjogY2x1c3RlciwKICAgICAgICAgICAgICAgIHByb2R1Y3Q6IHByb2R1Y3QsCiAgICAgICAgICAgICAgICByZXNvdXJjZTogZGVmYXVsdFJlc291cmNlT3JSb3V0ZQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkpOwogICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjE7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICBpZiAoIWluc3RhbGwpIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjA7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEyOwogICAgICAgICAgICByZXR1cm4gc3RvcmUuZGlzcGF0Y2goJ2NhdGFsb2cvbG9hZCcpOwogICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgY2hhcnQgPSBzdG9yZS5nZXR0ZXJzWydjYXRhbG9nL2NoYXJ0J10oewogICAgICAgICAgICAgIGNoYXJ0TmFtZTogY2hhcnROYW1lCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBpZiAoIWNoYXJ0KSB7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE3OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIHJlZGlyZWN0KHsKICAgICAgICAgICAgICBuYW1lOiAnYy1jbHVzdGVyLWFwcHMtY2hhcnRzLWNoYXJ0JywKICAgICAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgICAgIGNsdXN0ZXI6IGNsdXN0ZXIKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIHF1ZXJ5OiBfZGVmaW5lUHJvcGVydHkoX2RlZmluZVByb3BlcnR5KF9kZWZpbmVQcm9wZXJ0eShfZGVmaW5lUHJvcGVydHkoe30sIFJFUE9fVFlQRSwgY2hhcnQucmVwb1R5cGUpLCBSRVBPLCBjaGFydC5yZXBvTmFtZSksIENIQVJULCBjaGFydC5jaGFydE5hbWUpLCBWRVJTSU9OLCBjaGFydC52ZXJzaW9uc1swXS52ZXJzaW9uKQogICAgICAgICAgICB9KSk7CiAgICAgICAgICBjYXNlIDE3OgogICAgICAgICAgICAvLyBUaGUgY2hhcnQncyBub3QgYXZhaWxhYmxlCiAgICAgICAgICAgIHN0b3JlLmRpc3BhdGNoKCdsb2FkaW5nRXJyb3InLCAiQ2hhcnQgbm90IGZvdW5kIGZvciAiLmNvbmNhdChwcm9kdWN0KSk7CiAgICAgICAgICBjYXNlIDE4OgogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjE7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAyMDoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgcmVkaXJlY3QoewogICAgICAgICAgICAgIG5hbWU6ICdjLWNsdXN0ZXItZXhwbG9yZXInLAogICAgICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICAgICAgY2x1c3RlcjogY2x1c3RlcgogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkpOwogICAgICAgICAgY2FzZSAyMToKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlKTsKICAgIH0pKTsKICAgIGZ1bmN0aW9uIG1pZGRsZXdhcmUoX3gpIHsKICAgICAgcmV0dXJuIF9taWRkbGV3YXJlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9CiAgICByZXR1cm4gbWlkZGxld2FyZTsKICB9KCk7Cn0="},{"version":3,"names":["REPO_TYPE","REPO","CHART","VERSION","product","chartName","defaultResourceOrRoute","install","arguments","length","undefined","_middleware","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_ref","_store$getters$curren","redirect","store","cluster","chart","wrap","_callee$","_context","prev","next","getters","id","_typeof","abrupt","name","params","resource","dispatch","query","_defineProperty","repoType","repoName","versions","version","concat","stop","middleware","_x","apply"],"sources":["/home/ubuntu/suseconf/node_modules/@rancher/shell/utils/install-redirect.js"],"sourcesContent":["import { REPO_TYPE, REPO, CHART, VERSION } from '@shell/config/query-params';\n\nexport default function(product, chartName, defaultResourceOrRoute, install = true) {\n  return async function middleware({ redirect, store } ) {\n    const cluster = store.getters['currentCluster']?.id || 'local';\n\n    if ( store.getters['type-map/isProductActive'](product) ) {\n      // If the product is installed and there's a default resource, redirect there\n\n      if ( defaultResourceOrRoute ) {\n        if ( typeof defaultResourceOrRoute === 'object' ) {\n          return redirect(defaultResourceOrRoute);\n        }\n\n        return redirect({\n          name:   'c-cluster-product-resource',\n          params: {\n            cluster,\n            product,\n            resource: defaultResourceOrRoute\n          },\n        });\n      }\n\n      // Otherwise just let the middleware pass through\n    } else if (install) {\n      // The product is not installed, redirect to the details chart\n\n      await store.dispatch('catalog/load');\n\n      const chart = store.getters['catalog/chart']({ chartName });\n\n      if ( chart ) {\n        return redirect({\n          name:   'c-cluster-apps-charts-chart',\n          params: { cluster },\n          query:  {\n            [REPO_TYPE]: chart.repoType,\n            [REPO]:      chart.repoName,\n            [CHART]:     chart.chartName,\n            [VERSION]:   chart.versions[0].version\n          },\n        });\n      } else {\n        // The chart's not available\n        store.dispatch('loadingError', `Chart not found for ${ product }`);\n      }\n    } else {\n      return redirect({\n        name:   'c-cluster-explorer',\n        params: { cluster },\n      });\n    }\n  };\n}\n"],"mappings":"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","ignoreList":[]}]}