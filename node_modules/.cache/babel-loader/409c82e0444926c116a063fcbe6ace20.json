{"remainingRequest":"/home/ubuntu/susecon-2024-ext-demo/node_modules/babel-loader/lib/index.js??ref--16-1!/home/ubuntu/susecon-2024-ext-demo/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/ubuntu/susecon-2024-ext-demo/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/edit/provisioning.cattle.io.cluster/CustomCommand.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/edit/provisioning.cattle.io.cluster/CustomCommand.vue","mtime":1725271280091},{"path":"/home/ubuntu/susecon-2024-ext-demo/babel.config.js","mtime":1725268750245},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/babel-loader/lib/index.js","mtime":1725271298942},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1725271300920}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwpmdW5jdGlvbiBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihyLCBlKSB7IHZhciB0ID0gInVuZGVmaW5lZCIgIT0gdHlwZW9mIFN5bWJvbCAmJiByW1N5bWJvbC5pdGVyYXRvcl0gfHwgclsiQEBpdGVyYXRvciJdOyBpZiAoIXQpIHsgaWYgKEFycmF5LmlzQXJyYXkocikgfHwgKHQgPSBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkocikpIHx8IGUgJiYgciAmJiAibnVtYmVyIiA9PSB0eXBlb2Ygci5sZW5ndGgpIHsgdCAmJiAociA9IHQpOyB2YXIgX24gPSAwLCBGID0gZnVuY3Rpb24gRigpIHt9OyByZXR1cm4geyBzOiBGLCBuOiBmdW5jdGlvbiBuKCkgeyByZXR1cm4gX24gPj0gci5sZW5ndGggPyB7IGRvbmU6ICEwIH0gOiB7IGRvbmU6ICExLCB2YWx1ZTogcltfbisrXSB9OyB9LCBlOiBmdW5jdGlvbiBlKHIpIHsgdGhyb3cgcjsgfSwgZjogRiB9OyB9IHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBpdGVyYXRlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC4iKTsgfSB2YXIgbywgYSA9ICEwLCB1ID0gITE7IHJldHVybiB7IHM6IGZ1bmN0aW9uIHMoKSB7IHQgPSB0LmNhbGwocik7IH0sIG46IGZ1bmN0aW9uIG4oKSB7IHZhciByID0gdC5uZXh0KCk7IHJldHVybiBhID0gci5kb25lLCByOyB9LCBlOiBmdW5jdGlvbiBlKHIpIHsgdSA9ICEwLCBvID0gcjsgfSwgZjogZnVuY3Rpb24gZigpIHsgdHJ5IHsgYSB8fCBudWxsID09IHQucmV0dXJuIHx8IHQucmV0dXJuKCk7IH0gZmluYWxseSB7IGlmICh1KSB0aHJvdyBvOyB9IH0gfTsgfQpmdW5jdGlvbiBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkociwgYSkgeyBpZiAocikgeyBpZiAoInN0cmluZyIgPT0gdHlwZW9mIHIpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShyLCBhKTsgdmFyIHQgPSB7fS50b1N0cmluZy5jYWxsKHIpLnNsaWNlKDgsIC0xKTsgcmV0dXJuICJPYmplY3QiID09PSB0ICYmIHIuY29uc3RydWN0b3IgJiYgKHQgPSByLmNvbnN0cnVjdG9yLm5hbWUpLCAiTWFwIiA9PT0gdCB8fCAiU2V0IiA9PT0gdCA/IEFycmF5LmZyb20ocikgOiAiQXJndW1lbnRzIiA9PT0gdCB8fCAvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdCh0KSA/IF9hcnJheUxpa2VUb0FycmF5KHIsIGEpIDogdm9pZCAwOyB9IH0KZnVuY3Rpb24gX2FycmF5TGlrZVRvQXJyYXkociwgYSkgeyAobnVsbCA9PSBhIHx8IGEgPiByLmxlbmd0aCkgJiYgKGEgPSByLmxlbmd0aCk7IGZvciAodmFyIGUgPSAwLCBuID0gQXJyYXkoYSk7IGUgPCBhOyBlKyspIG5bZV0gPSByW2VdOyByZXR1cm4gbjsgfQppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wuZGVzY3JpcHRpb24uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5mcm9tLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5qb2luLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pbmNsdWRlcy5qcyI7CmltcG9ydCBfcmVnZW5lcmF0b3JSdW50aW1lIGZyb20gIi9ob21lL3VidW50dS9zdXNlY29uLTIwMjQtZXh0LWRlbW8vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL3JlZ2VuZXJhdG9yL2luZGV4LmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgeyBCYW5uZXIgfSBmcm9tICdAY29tcG9uZW50cy9CYW5uZXInOwppbXBvcnQgSW5mb0JveCBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9JbmZvQm94JzsKaW1wb3J0IHsgQ2hlY2tib3ggfSBmcm9tICdAY29tcG9uZW50cy9Gb3JtL0NoZWNrYm94JzsKaW1wb3J0IENvcHlDb2RlIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL0NvcHlDb2RlJzsKaW1wb3J0IHsgTGFiZWxlZElucHV0IH0gZnJvbSAnQGNvbXBvbmVudHMvRm9ybS9MYWJlbGVkSW5wdXQnOwppbXBvcnQgS2V5VmFsdWUgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvZm9ybS9LZXlWYWx1ZSc7CmltcG9ydCBUYWludHMgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvZm9ybS9UYWludHMnOwppbXBvcnQgeyBNQU5BR0VNRU5UIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy90eXBlcyc7CmltcG9ydCB7IHNhbml0aXplS2V5LCBzYW5pdGl6ZUlQLCBzYW5pdGl6ZVZhbHVlIH0gZnJvbSAnQHNoZWxsL3V0aWxzL3N0cmluZyc7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBCYW5uZXI6IEJhbm5lciwKICAgIENoZWNrYm94OiBDaGVja2JveCwKICAgIENvcHlDb2RlOiBDb3B5Q29kZSwKICAgIEluZm9Cb3g6IEluZm9Cb3gsCiAgICBLZXlWYWx1ZTogS2V5VmFsdWUsCiAgICBMYWJlbGVkSW5wdXQ6IExhYmVsZWRJbnB1dCwKICAgIFRhaW50czogVGFpbnRzCiAgfSwKICBwcm9wczogewogICAgY2x1c3RlcjogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICB9LAogICAgY2x1c3RlclRva2VuOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0KICB9LAogIGZldGNoOiBmdW5jdGlvbiBmZXRjaCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICByZXR1cm4gX3RoaXMuJHN0b3JlLmRpc3BhdGNoKCdtYW5hZ2VtZW50L2ZpbmRBbGwnLCB7CiAgICAgICAgICAgICAgdHlwZTogTUFOQUdFTUVOVC5OT0RFCiAgICAgICAgICAgIH0pOwogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUpOwogICAgfSkpKCk7CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc2hvd0FkdmFuY2VkOiBmYWxzZSwKICAgICAgZXRjZDogdHJ1ZSwKICAgICAgY29udHJvbFBsYW5lOiB0cnVlLAogICAgICB3b3JrZXI6IHRydWUsCiAgICAgIGluc2VjdXJlOiBmYWxzZSwKICAgICAgaW5zZWN1cmVXaW5kb3dzOiBmYWxzZSwKICAgICAgYWRkcmVzczogJycsCiAgICAgIGludGVybmFsQWRkcmVzczogJycsCiAgICAgIG5vZGVOYW1lOiAnJywKICAgICAgbGFiZWxzOiB7fSwKICAgICAgdGFpbnRzOiBbXQogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBsaW51eENvbW1hbmQ6IGZ1bmN0aW9uIGxpbnV4Q29tbWFuZCgpIHsKICAgICAgdmFyIG91dCA9IHRoaXMuaW5zZWN1cmUgPyBbdGhpcy5jbHVzdGVyVG9rZW4uaW5zZWN1cmVOb2RlQ29tbWFuZF0gOiBbdGhpcy5jbHVzdGVyVG9rZW4ubm9kZUNvbW1hbmRdOwogICAgICB0aGlzLmV0Y2QgJiYgb3V0LnB1c2goJy0tZXRjZCcpOwogICAgICB0aGlzLmNvbnRyb2xQbGFuZSAmJiBvdXQucHVzaCgnLS1jb250cm9scGxhbmUnKTsKICAgICAgdGhpcy53b3JrZXIgJiYgb3V0LnB1c2goJy0td29ya2VyJyk7CiAgICAgIHRoaXMuYWRkcmVzcyAmJiBvdXQucHVzaCgiLS1hZGRyZXNzICIuY29uY2F0KHNhbml0aXplSVAodGhpcy5hZGRyZXNzKSkpOwogICAgICB0aGlzLmludGVybmFsQWRkcmVzcyAmJiBvdXQucHVzaCgiLS1pbnRlcm5hbC1hZGRyZXNzICIuY29uY2F0KHNhbml0aXplSVAodGhpcy5pbnRlcm5hbEFkZHJlc3MpKSk7CiAgICAgIHRoaXMubm9kZU5hbWUgJiYgb3V0LnB1c2goIi0tbm9kZS1uYW1lICIuY29uY2F0KHNhbml0aXplVmFsdWUodGhpcy5ub2RlTmFtZSkpKTsKICAgICAgZm9yICh2YXIga2V5IGluIHRoaXMubGFiZWxzKSB7CiAgICAgICAgdmFyIGsgPSBzYW5pdGl6ZUtleShrZXkpOwogICAgICAgIHZhciB2ID0gc2FuaXRpemVWYWx1ZSh0aGlzLmxhYmVsc1trXSk7CiAgICAgICAgaWYgKGsgJiYgdikgewogICAgICAgICAgb3V0LnB1c2goIi0tbGFiZWwgIi5jb25jYXQoaywgIj0iKS5jb25jYXQodikpOwogICAgICAgIH0KICAgICAgfQogICAgICB2YXIgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIodGhpcy50YWludHMpLAogICAgICAgIF9zdGVwOwogICAgICB0cnkgewogICAgICAgIGZvciAoX2l0ZXJhdG9yLnMoKTsgIShfc3RlcCA9IF9pdGVyYXRvci5uKCkpLmRvbmU7KSB7CiAgICAgICAgICB2YXIgdCA9IF9zdGVwLnZhbHVlOwogICAgICAgICAgdmFyIF9rID0gc2FuaXRpemVLZXkodC5rZXkpOwogICAgICAgICAgdmFyIF92ID0gc2FuaXRpemVWYWx1ZSh0LnZhbHVlKTsKICAgICAgICAgIHZhciBlID0gc2FuaXRpemVWYWx1ZSh0LmVmZmVjdCk7CiAgICAgICAgICBpZiAoX2sgJiYgX3YgJiYgZSkgewogICAgICAgICAgICBvdXQucHVzaCgiLS10YWludHMgIi5jb25jYXQoX2ssICI9IikuY29uY2F0KF92LCAiOiIpLmNvbmNhdChlKSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBfaXRlcmF0b3IuZShlcnIpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIF9pdGVyYXRvci5mKCk7CiAgICAgIH0KICAgICAgcmV0dXJuIG91dC5qb2luKCcgJyk7CiAgICB9LAogICAgd2luZG93c0NvbW1hbmQ6IGZ1bmN0aW9uIHdpbmRvd3NDb21tYW5kKCkgewogICAgICB2YXIgb3V0ID0gdGhpcy5pbnNlY3VyZVdpbmRvd3MgPyBbdGhpcy5jbHVzdGVyVG9rZW4uaW5zZWN1cmVXaW5kb3dzTm9kZUNvbW1hbmRdIDogW3RoaXMuY2x1c3RlclRva2VuLndpbmRvd3NOb2RlQ29tbWFuZF07CiAgICAgIHRoaXMuYWRkcmVzcyAmJiBvdXQucHVzaCgiLUFkZHJlc3MgXCIiLmNvbmNhdChzYW5pdGl6ZVZhbHVlKHRoaXMuYWRkcmVzcyksICJcIiIpKTsKICAgICAgdGhpcy5pbnRlcm5hbEFkZHJlc3MgJiYgb3V0LnB1c2goIi1JbnRlcm5hbEFkZHJlc3MgXCIiLmNvbmNhdChzYW5pdGl6ZVZhbHVlKHRoaXMuaW50ZXJuYWxBZGRyZXNzKSwgIlwiIikpOwogICAgICB0aGlzLm5vZGVOYW1lICYmIG91dC5wdXNoKCItTm9kZU5hbWUgXCIiLmNvbmNhdChzYW5pdGl6ZVZhbHVlKHRoaXMubm9kZU5hbWUpLCAiXCIiKSk7CiAgICAgIGZvciAodmFyIGtleSBpbiB0aGlzLmxhYmVscykgewogICAgICAgIHZhciBrID0gc2FuaXRpemVLZXkoa2V5KTsKICAgICAgICB2YXIgdiA9IHNhbml0aXplVmFsdWUodGhpcy5sYWJlbHNba10pOwogICAgICAgIGlmIChrICYmIHYpIHsKICAgICAgICAgIG91dC5wdXNoKCItTGFiZWwgXCIiLmNvbmNhdChrLCAiPSIpLmNvbmNhdCh2LCAiXCIiKSk7CiAgICAgICAgfQogICAgICB9CiAgICAgIHZhciBfaXRlcmF0b3IyID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIodGhpcy50YWludHMpLAogICAgICAgIF9zdGVwMjsKICAgICAgdHJ5IHsKICAgICAgICBmb3IgKF9pdGVyYXRvcjIucygpOyAhKF9zdGVwMiA9IF9pdGVyYXRvcjIubigpKS5kb25lOykgewogICAgICAgICAgdmFyIHQgPSBfc3RlcDIudmFsdWU7CiAgICAgICAgICB2YXIgX2syID0gc2FuaXRpemVLZXkodC5rZXkpOwogICAgICAgICAgdmFyIF92MiA9IHNhbml0aXplVmFsdWUodC52YWx1ZSk7CiAgICAgICAgICB2YXIgZSA9IHNhbml0aXplVmFsdWUodC5lZmZlY3QpOwogICAgICAgICAgaWYgKF9rMiAmJiBfdjIgJiYgZSkgewogICAgICAgICAgICBvdXQucHVzaCgiLVRhaW50IFwiIi5jb25jYXQoX2syLCAiPSIpLmNvbmNhdChfdjIsICI6IikuY29uY2F0KGUsICJcIiIpKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIF9pdGVyYXRvcjIuZShlcnIpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIF9pdGVyYXRvcjIuZigpOwogICAgICB9CiAgICAgIHJldHVybiBvdXQuam9pbignICcpOwogICAgfSwKICAgIC8vIENsdXN0ZXJzIG5lZWQgbGludXggbm9kZXMgd2l0aCBldGNkLCBjb250cm9scGxhbmUsIGFuZCB3b3JrZXIgcm9sZXMgYmVmb3JlIHdpbmRvd3Mgbm9kZXMgY2FuIGJlIHJlZ2lzdHJhdGlvbgogICAgcmVhZHlGb3JXaW5kb3dzOiBmdW5jdGlvbiByZWFkeUZvcldpbmRvd3MoKSB7CiAgICAgIGlmICghdGhpcy5jbHVzdGVyLm1nbXQgfHwgIXRoaXMuY2x1c3Rlci5tZ210LmlzUmVhZHkpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgdmFyIG5vZGVzID0gdGhpcy5jbHVzdGVyLm5vZGVzIHx8IFtdOwogICAgICB2YXIgYWxsUm9sZXMgPSBub2Rlcy5yZWR1Y2UoZnVuY3Rpb24gKGFsbCwgbm9kZSkgewogICAgICAgIHZhciBpc1dvcmtlciA9IG5vZGUuaXNXb3JrZXIsCiAgICAgICAgICBpc0V0Y2QgPSBub2RlLmlzRXRjZCwKICAgICAgICAgIGlzQ29udHJvbFBsYW5lID0gbm9kZS5pc0NvbnRyb2xQbGFuZTsKICAgICAgICBpZiAoaXNXb3JrZXIgJiYgIWFsbC5pbmNsdWRlcygnd29ya2VyJykpIHsKICAgICAgICAgIGFsbC5wdXNoKCd3b3JrZXInKTsKICAgICAgICB9CiAgICAgICAgaWYgKGlzRXRjZCAmJiAhYWxsLmluY2x1ZGVzKCdldGNkJykpIHsKICAgICAgICAgIGFsbC5wdXNoKCdldGNkJyk7CiAgICAgICAgfQogICAgICAgIGlmIChpc0NvbnRyb2xQbGFuZSAmJiAhYWxsLmluY2x1ZGVzKCdjb250cm9sUGxhbmUnKSkgewogICAgICAgICAgYWxsLnB1c2goJ2NvbnRyb2xQbGFuZScpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gYWxsOwogICAgICB9LCBbXSk7CiAgICAgIHJldHVybiBhbGxSb2xlcy5sZW5ndGggPT09IDM7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICB0b2dnbGVBZHZhbmNlZDogZnVuY3Rpb24gdG9nZ2xlQWR2YW5jZWQoKSB7CiAgICAgIHRoaXMuc2hvd0FkdmFuY2VkID0gIXRoaXMuc2hvd0FkdmFuY2VkOwogICAgfSwKICAgIGNvcGllZFdpbmRvd3M6IGZ1bmN0aW9uIGNvcGllZFdpbmRvd3MoKSB7CiAgICAgIHRoaXMuJGVtaXQoJ2NvcGllZC13aW5kb3dzJyk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["Banner","InfoBox","Checkbox","CopyCode","LabeledInput","KeyValue","Taints","MANAGEMENT","sanitizeKey","sanitizeIP","sanitizeValue","components","props","cluster","type","Object","required","clusterToken","fetch","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","$store","dispatch","NODE","stop","data","showAdvanced","etcd","controlPlane","worker","insecure","insecureWindows","address","internalAddress","nodeName","labels","taints","computed","linuxCommand","out","insecureNodeCommand","nodeCommand","push","concat","key","k","v","_iterator","_createForOfIteratorHelper","_step","s","n","done","t","value","e","effect","err","f","join","windowsCommand","insecureWindowsNodeCommand","windowsNodeCommand","_iterator2","_step2","readyForWindows","mgmt","isReady","nodes","allRoles","reduce","all","node","isWorker","isEtcd","isControlPlane","includes","length","methods","toggleAdvanced","copiedWindows","$emit"],"sources":["node_modules/@rancher/shell/edit/provisioning.cattle.io.cluster/CustomCommand.vue"],"sourcesContent":["<script>\nimport { Banner } from '@components/Banner';\nimport InfoBox from '@shell/components/InfoBox';\nimport { Checkbox } from '@components/Form/Checkbox';\nimport CopyCode from '@shell/components/CopyCode';\nimport { LabeledInput } from '@components/Form/LabeledInput';\nimport KeyValue from '@shell/components/form/KeyValue';\nimport Taints from '@shell/components/form/Taints';\nimport { MANAGEMENT } from '@shell/config/types';\n\nimport { sanitizeKey, sanitizeIP, sanitizeValue } from '@shell/utils/string';\n\nexport default {\n  components: {\n    Banner, Checkbox, CopyCode, InfoBox, KeyValue, LabeledInput, Taints\n  },\n\n  props: {\n    cluster: {\n      type:     Object,\n      required: true,\n    },\n\n    clusterToken: {\n      type:     Object,\n      required: true,\n    }\n  },\n\n  async fetch() {\n    await this.$store.dispatch('management/findAll', { type: MANAGEMENT.NODE });\n  },\n\n  data() {\n    return {\n      showAdvanced:    false,\n      etcd:            true,\n      controlPlane:    true,\n      worker:          true,\n      insecure:        false,\n      insecureWindows: false,\n      address:         '',\n      internalAddress: '',\n      nodeName:        '',\n      labels:          {},\n      taints:          []\n    };\n  },\n\n  computed: {\n    linuxCommand() {\n      const out = this.insecure ? [this.clusterToken.insecureNodeCommand] : [this.clusterToken.nodeCommand];\n\n      this.etcd && out.push('--etcd');\n      this.controlPlane && out.push('--controlplane');\n      this.worker && out.push('--worker');\n      this.address && out.push(`--address ${ sanitizeIP(this.address) }`);\n      this.internalAddress && out.push(`--internal-address ${ sanitizeIP(this.internalAddress) }`);\n      this.nodeName && out.push(`--node-name ${ sanitizeValue(this.nodeName) }`);\n\n      for ( const key in this.labels ) {\n        const k = sanitizeKey(key);\n        const v = sanitizeValue(this.labels[k]);\n\n        if ( k && v ) {\n          out.push(`--label ${ k }=${ v }`);\n        }\n      }\n\n      for ( const t of this.taints ) {\n        const k = sanitizeKey(t.key);\n        const v = sanitizeValue(t.value);\n        const e = sanitizeValue(t.effect);\n\n        if ( k && v && e ) {\n          out.push(`--taints ${ k }=${ v }:${ e }`);\n        }\n      }\n\n      return out.join(' ');\n    },\n\n    windowsCommand() {\n      const out = this.insecureWindows ? [this.clusterToken.insecureWindowsNodeCommand] : [this.clusterToken.windowsNodeCommand];\n\n      this.address && out.push(`-Address \"${ sanitizeValue(this.address) }\"`);\n      this.internalAddress && out.push(`-InternalAddress \"${ sanitizeValue(this.internalAddress) }\"`);\n      this.nodeName && out.push(`-NodeName \"${ sanitizeValue(this.nodeName) }\"`);\n\n      for ( const key in this.labels ) {\n        const k = sanitizeKey(key);\n        const v = sanitizeValue(this.labels[k]);\n\n        if ( k && v ) {\n          out.push(`-Label \"${ k }=${ v }\"`);\n        }\n      }\n\n      for ( const t of this.taints ) {\n        const k = sanitizeKey(t.key);\n        const v = sanitizeValue(t.value);\n        const e = sanitizeValue(t.effect);\n\n        if ( k && v && e ) {\n          out.push(`-Taint \"${ k }=${ v }:${ e }\"`);\n        }\n      }\n\n      return out.join(' ');\n    },\n\n    // Clusters need linux nodes with etcd, controlplane, and worker roles before windows nodes can be registration\n    readyForWindows() {\n      if (!this.cluster.mgmt || !this.cluster.mgmt.isReady) {\n        return false;\n      }\n      const nodes = this.cluster.nodes || [];\n\n      const allRoles = nodes.reduce((all, node) => {\n        const { isWorker, isEtcd, isControlPlane } = node;\n\n        if (isWorker && !all.includes('worker')) {\n          all.push('worker');\n        }\n        if (isEtcd && !all.includes('etcd')) {\n          all.push('etcd');\n        }\n        if (isControlPlane && !all.includes('controlPlane')) {\n          all.push('controlPlane');\n        }\n\n        return all;\n      }, []);\n\n      return allRoles.length === 3;\n    }\n\n  },\n\n  methods: {\n    toggleAdvanced() {\n      this.showAdvanced = !this.showAdvanced;\n    },\n\n    copiedWindows() {\n      this.$emit('copied-windows');\n    }\n  },\n};\n\n</script>\n\n<template>\n  <div>\n    <InfoBox\n      :step=\"1\"\n      class=\"step-box\"\n    >\n      <h3 v-t=\"'cluster.custom.nodeRole.label'\" />\n      <h4 v-t=\"'cluster.custom.nodeRole.detail'\" />\n      <Checkbox\n        v-model=\"etcd\"\n        label-key=\"model.machine.role.etcd\"\n      />\n      <Checkbox\n        v-model=\"controlPlane\"\n        label-key=\"model.machine.role.controlPlane\"\n      />\n      <Checkbox\n        v-model=\"worker\"\n        label-key=\"model.machine.role.worker\"\n      />\n      <Banner\n        v-if=\"!etcd || !controlPlane || !worker\"\n        data-testid=\"node-role-warning\"\n        color=\"warning\"\n        :label=\"t('cluster.custom.nodeRole.warning')\"\n      />\n    </InfoBox>\n\n    <InfoBox\n      v-if=\"showAdvanced\"\n      :step=\"2\"\n      class=\"step-box\"\n    >\n      <h3 v-t=\"'cluster.custom.advanced.label'\" />\n      <h4 v-t=\"'cluster.custom.advanced.detail'\" />\n\n      <div class=\"row mb-10\">\n        <div class=\"col span-4\">\n          <LabeledInput\n            v-model=\"nodeName\"\n            label-key=\"cluster.custom.advanced.nodeName\"\n          />\n        </div>\n        <div class=\"col span-4\">\n          <LabeledInput\n            v-model=\"address\"\n            label-key=\"cluster.custom.advanced.publicIp\"\n          />\n        </div>\n        <div class=\"col span-4\">\n          <LabeledInput\n            v-model=\"internalAddress\"\n            label-key=\"cluster.custom.advanced.privateIp\"\n          />\n        </div>\n      </div>\n\n      <KeyValue\n        v-model=\"labels\"\n        class=\"mb-10\"\n        mode=\"edit\"\n        :title=\"t('cluster.custom.advanced.nodeLabel.title')\"\n        :add-label=\"t('cluster.custom.advanced.nodeLabel.label')\"\n        :read-allowed=\"false\"\n      />\n\n      <Taints\n        v-model=\"taints\"\n        class=\"mb-10\"\n        mode=\"edit\"\n        :value=\"taints\"\n      />\n\n      <a\n        v-t=\"'generic.hideAdvanced'\"\n        @click=\"toggleAdvanced\"\n      />\n    </InfoBox>\n\n    <div\n      v-else\n      class=\"mb-20\"\n    >\n      <a\n        v-t=\"'generic.showAdvanced'\"\n        @click=\"toggleAdvanced\"\n      />\n    </div>\n\n    <InfoBox\n      :step=\"showAdvanced ? 3 : 2\"\n      class=\"step-box\"\n    >\n      <h3 v-t=\"'cluster.custom.registrationCommand.label'\" />\n      <h4 v-t=\"'cluster.custom.registrationCommand.linuxDetail'\" />\n      <CopyCode\n        id=\"copiedLinux\"\n        class=\"m-10 p-10\"\n      >\n        {{ linuxCommand }}\n      </CopyCode>\n      <Checkbox\n        v-if=\"clusterToken.insecureNodeCommand\"\n        v-model=\"insecure\"\n        label-key=\"cluster.custom.registrationCommand.insecure\"\n      />\n\n      <template v-if=\"cluster.supportsWindows\">\n        <hr class=\"mt-20 mb-20\">\n        <h4 v-t=\"'cluster.custom.registrationCommand.windowsDetail'\" />\n        <Banner\n          v-if=\"cluster.isRke1\"\n          color=\"warning\"\n          :label=\"t('cluster.custom.registrationCommand.windowsDeprecatedForRKE1')\"\n        />\n        <template v-if=\"readyForWindows\">\n          <CopyCode\n            id=\"copiedWindows\"\n            class=\"m-10 p-10\"\n            @copied=\"copiedWindows\"\n          >\n            {{ windowsCommand }}\n          </CopyCode>\n          <Checkbox\n            v-if=\"clusterToken.insecureWindowsNodeCommand\"\n            v-model=\"insecureWindows\"\n            label-key=\"cluster.custom.registrationCommand.insecure\"\n          />\n          <Banner\n            color=\"info\"\n            :label=\"t('cluster.custom.registrationCommand.windowsWarning')\"\n          />\n        </template>\n        <Banner\n          v-else\n          color=\"info\"\n          :label=\"t('cluster.custom.registrationCommand.windowsNotReady')\"\n        />\n      </template>\n    </InfoBox>\n  </div>\n</template>\n"],"mappings":"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","ignoreList":[]}]}