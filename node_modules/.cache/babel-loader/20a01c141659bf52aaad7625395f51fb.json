{"remainingRequest":"/home/ubuntu/susecon-2024-ext-demo/node_modules/babel-loader/lib/index.js??ref--16-1!/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/plugins/steve/resourceWatcher.js","dependencies":[{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/plugins/steve/resourceWatcher.js","mtime":1725271280091},{"path":"/home/ubuntu/susecon-2024-ext-demo/babel.config.js","mtime":1725268750245},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/babel-loader/lib/index.js","mtime":1725271298942}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eSI7CmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2siOwppbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzIjsKaW1wb3J0IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4iOwppbXBvcnQgX2dldCBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9nZXQiOwppbXBvcnQgX2dldFByb3RvdHlwZU9mIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2dldFByb3RvdHlwZU9mIjsKaW1wb3J0IF9pbmhlcml0cyBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9pbmhlcml0cyI7CmZ1bmN0aW9uIG93bktleXMoZSwgcikgeyB2YXIgdCA9IE9iamVjdC5rZXlzKGUpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgbyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7IHIgJiYgKG8gPSBvLmZpbHRlcihmdW5jdGlvbiAocikgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLCByKS5lbnVtZXJhYmxlOyB9KSksIHQucHVzaC5hcHBseSh0LCBvKTsgfSByZXR1cm4gdDsgfQpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKGUpIHsgZm9yICh2YXIgciA9IDE7IHIgPCBhcmd1bWVudHMubGVuZ3RoOyByKyspIHsgdmFyIHQgPSBudWxsICE9IGFyZ3VtZW50c1tyXSA/IGFyZ3VtZW50c1tyXSA6IHt9OyByICUgMiA/IG93bktleXMoT2JqZWN0KHQpLCAhMCkuZm9yRWFjaChmdW5jdGlvbiAocikgeyBfZGVmaW5lUHJvcGVydHkoZSwgciwgdFtyXSk7IH0pIDogT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMgPyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyh0KSkgOiBvd25LZXlzKE9iamVjdCh0KSkuZm9yRWFjaChmdW5jdGlvbiAocikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgciwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LCByKSk7IH0pOyB9IHJldHVybiBlOyB9CmZ1bmN0aW9uIF9jYWxsU3VwZXIodCwgbywgZSkgeyByZXR1cm4gbyA9IF9nZXRQcm90b3R5cGVPZihvKSwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odCwgX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpID8gUmVmbGVjdC5jb25zdHJ1Y3QobywgZSB8fCBbXSwgX2dldFByb3RvdHlwZU9mKHQpLmNvbnN0cnVjdG9yKSA6IG8uYXBwbHkodCwgZSkpOyB9CmZ1bmN0aW9uIF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKSB7IHRyeSB7IHZhciB0ID0gIUJvb2xlYW4ucHJvdG90eXBlLnZhbHVlT2YuY2FsbChSZWZsZWN0LmNvbnN0cnVjdChCb29sZWFuLCBbXSwgZnVuY3Rpb24gKCkge30pKTsgfSBjYXRjaCAodCkge30gcmV0dXJuIChfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0ID0gZnVuY3Rpb24gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpIHsgcmV0dXJuICEhdDsgfSkoKTsgfQppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmpvaW4uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvcnMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVmbGVjdC5jb25zdHJ1Y3QuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudmFsdWVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwovKioKICogSW1wb3J0cyBpbiBhIHdvcmtlciBjYW5ub3QgaW5jbHVkZSBleHBvcnRzIGZyb20gdGhlIGZpbGUgaW52b2tpbmcgdGhlIHdvcmtlciBvciBmcm9tIGZpbGVzIGltcG9ydGluZyB0aGUgaW52b2tpbmcgZmlsZS4KICovCgppbXBvcnQgU29ja2V0LCB7IE5PX1dBVENILCBOT19TQ0hFTUEsIEVWRU5UX0NPTk5FQ1RFRCwgUkVWSVNJT05fVE9PX09MRCB9IGZyb20gJ0BzaGVsbC91dGlscy9zb2NrZXQnOwpleHBvcnQgdmFyIFdBVENIX1NUQVRVU0VTID0gewogIC8qKgogICAqIHdhdGNoIGhhcyBiZWVuIGFza2VkIGZvciB0aGlzIHJlc291cmNlIGJ1dCBub3QgcmVxdWVzdCBoYXMgbm90IHN1Y2Nlc3NmdWxseSBiZWVuIHNlbnQKICAgKi8KICBXQVRDSF9QRU5ESU5HOiAncGVuZGluZycsCiAgLyoqCiAgICogcmVxdWVzdGVkIGJ1dCBub3QgY29uZmlybWVkIGJ5IHRoZSBzb2NrZXQgeWV0CiAgICovCiAgV0FUQ0hfUkVRVUVTVEVEOiAncmVxdWVzdGVkJywKICAvKioKICAgKiBjb25maXJtZWQgYXMgYWN0aXZlIGJ5IHRoZSBzb2NrZXQKICAgKi8KICBXQVRDSElORzogJ3dhdGNoaW5nJywKICAvKioKICAgKiB0ZW1wb3JhcmlseSBzdG9wcGVkIHZpYSBtZXNzYWdlIGZyb20gdGhlIHNvY2tldCwgYSB3YXRjaCBzaG91bGQgaW1tZWRpYXRlbHkgYmUgdHJpZ2dlcmVkIGJ1dCB0aGUgbWFpbnRlbmFuY2UgY3ljbGUgd2lsbCBwaWNrIGl0IHVwIGlmIHRoYXQgZG9lc24ndCBoYXBwZW4uCiAgICovCiAgU1RPUFBFRDogJ3N0b3BwZWQnLAogIC8qKgogICAqIHN0b3AgaGFzIGJlZW4gYXNrZWQgZm9yIHRoaXMgcmVzb3VyY2UsIGJ1dCByZXF1ZXN0IGhhcyBub3Qgc3VjY2Vzc2Z1bGx5IGJlZW4gc2VudAogICAqLwogIFJFTU9WRV9QRU5ESU5HOiAncmVtb3ZlZF9wZW5kaW5nJywKICAvKioKICAgKiBzdG9wIHJlcXVlc3QgaGFzIGJlZW4gc2VudCB0byB0aGUgc29ja2V0IG9yIGl0J3MgYmVlbiBzdG9wcGVkIGJ5IHRoZSBzb2NrZXQgaXRzZWxmIGFuZCBpcyBub3cgYXdhaXRpbmcgYSByZXNvdXJjZS5zdG9wIG1lc3NhZ2UKICAgKi8KICBSRU1PVkVfUkVRVUVTVEVEOiAncmVtb3ZlZF9yZXF1ZXN0ZWQnCn07CmV4cG9ydCB2YXIga2V5Rm9yU3Vic2NyaWJlID0gZnVuY3Rpb24ga2V5Rm9yU3Vic2NyaWJlKCkgewogIHZhciBfcmVmID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fSwKICAgIHJlc291cmNlVHlwZSA9IF9yZWYucmVzb3VyY2VUeXBlLAogICAgdHlwZSA9IF9yZWYudHlwZSwKICAgIG5hbWVzcGFjZSA9IF9yZWYubmFtZXNwYWNlLAogICAgaWQgPSBfcmVmLmlkLAogICAgc2VsZWN0b3IgPSBfcmVmLnNlbGVjdG9yOwogIHJldHVybiBbcmVzb3VyY2VUeXBlIHx8IHR5cGUsIG5hbWVzcGFjZSwgaWQsIHNlbGVjdG9yXSAvLyBlYWNoIHdhdGNoIHBhcmFtIGluIGFuIGFycmF5CiAgLmZpbHRlcihmdW5jdGlvbiAocGFyYW0pIHsKICAgIHJldHVybiAhIXBhcmFtOwogIH0pIC8vIGZpbHRlciBvdXQgYWxsIHRoZSBlbXB0eSBvbmVzIC8vIHRoZSBmaWx0ZXIgbWFrZXMgdGhlc2Uga2V5cyBuZWF0ZXIKICAuam9pbignLycpOyAvLyBqb2luIGludG8gYSBzdHJpbmcgc28gd2UgY2FuIHVzZSBpdCBhcyBhbiBvYmplY3Qga2V5Cn07CmV4cG9ydCB2YXIgd2F0Y2hLZXlGcm9tTWVzc2FnZSA9IGZ1bmN0aW9uIHdhdGNoS2V5RnJvbU1lc3NhZ2UobXNnKSB7CiAgdmFyIHJlc291cmNlVHlwZSA9IG1zZy5yZXNvdXJjZVR5cGUsCiAgICBuYW1lc3BhY2UgPSBtc2cubmFtZXNwYWNlLAogICAgaWQgPSBtc2cuaWQsCiAgICBzZWxlY3RvciA9IG1zZy5zZWxlY3RvcjsKICB2YXIgd2F0Y2hPYmplY3QgPSB7CiAgICByZXNvdXJjZVR5cGU6IHJlc291cmNlVHlwZSwKICAgIGlkOiBpZCwKICAgIG5hbWVzcGFjZTogbmFtZXNwYWNlLAogICAgc2VsZWN0b3I6IHNlbGVjdG9yCiAgfTsKICByZXR1cm4ga2V5Rm9yU3Vic2NyaWJlKHdhdGNoT2JqZWN0KTsKfTsKdmFyIFdBVENIX1BFTkRJTkcgPSBXQVRDSF9TVEFUVVNFUy5XQVRDSF9QRU5ESU5HLAogIFdBVENIX1JFUVVFU1RFRCA9IFdBVENIX1NUQVRVU0VTLldBVENIX1JFUVVFU1RFRCwKICBXQVRDSElORyA9IFdBVENIX1NUQVRVU0VTLldBVENISU5HLAogIFJFTU9WRV9QRU5ESU5HID0gV0FUQ0hfU1RBVFVTRVMuUkVNT1ZFX1BFTkRJTkcsCiAgUkVRVUVTVEVEX1JFTU9WRSA9IFdBVENIX1NUQVRVU0VTLlJFUVVFU1RFRF9SRU1PVkU7CnZhciBSZXNvdXJjZVdhdGNoZXIgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9Tb2NrZXQpIHsKICBmdW5jdGlvbiBSZXNvdXJjZVdhdGNoZXIodXJsKSB7CiAgICB2YXIgX3RoaXM7CiAgICB2YXIgYXV0b1JlY29ubmVjdCA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogdHJ1ZTsKICAgIHZhciBmcmFtZVRpbWVvdXQgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IG51bGw7CiAgICB2YXIgcHJvdG9jb2wgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6IG51bGw7CiAgICB2YXIgbWF4VHJpZXMgPSBhcmd1bWVudHMubGVuZ3RoID4gNCAmJiBhcmd1bWVudHNbNF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1s0XSA6IG51bGw7CiAgICB2YXIgY3NyZiA9IGFyZ3VtZW50cy5sZW5ndGggPiA1ID8gYXJndW1lbnRzWzVdIDogdW5kZWZpbmVkOwogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFJlc291cmNlV2F0Y2hlcik7CiAgICBfdGhpcyA9IF9jYWxsU3VwZXIodGhpcywgUmVzb3VyY2VXYXRjaGVyLCBbdXJsLCBhdXRvUmVjb25uZWN0LCBmcmFtZVRpbWVvdXQsIHByb3RvY29sLCBtYXhUcmllcywgdHJ1ZV0pOwogICAgX3RoaXMud2F0Y2hlcyA9IHt9OwogICAgX3RoaXMuc3RhdHVzID0gJyc7CiAgICBfdGhpcy5kZWJ1Z1dhdGNoZXIgPSBmYWxzZTsKICAgIF90aGlzLmNzcmYgPSB2b2lkIDA7CiAgICBfdGhpcy5iYXNlVXJsID0gc2VsZi5sb2NhdGlvbi5vcmlnaW4gKyB1cmwucmVwbGFjZSgnc3Vic2NyaWJlJywgJycpOwogICAgX3RoaXMuY3NyZiA9IGNzcmY7CiAgICBfdGhpcy5hZGRFdmVudExpc3RlbmVyKEVWRU5UX0NPTk5FQ1RFRCwgZnVuY3Rpb24gKGUpIHsKICAgICAgX3RoaXMudHJhY2UoRVZFTlRfQ09OTkVDVEVELCAnOiBwcm9jZXNzaW5nIHByZXZpb3VzbHkgcmVxdWVzdGVkIG9yIHdhdGNoZWQgcmVzb3VyY2VzJyk7CiAgICAgIE9iamVjdC52YWx1ZXMoX3RoaXMud2F0Y2hlcykuZm9yRWFjaChmdW5jdGlvbiAod2F0Y2gpIHsKICAgICAgICB2YXIgc3RhdHVzID0gd2F0Y2guc3RhdHVzLAogICAgICAgICAgZXJyb3IgPSB3YXRjaC5lcnJvcjsKICAgICAgICB2YXIgd2F0Y2hLZXkgPSBrZXlGb3JTdWJzY3JpYmUod2F0Y2gpOwogICAgICAgIGlmIChbV0FUQ0hfUEVORElORywgV0FUQ0hfUkVRVUVTVEVELCBXQVRDSElOR10uaW5jbHVkZXMoc3RhdHVzKSAmJiAhZXJyb3IpIHsKICAgICAgICAgIF90aGlzLnRyYWNlKEVWRU5UX0NPTk5FQ1RFRCwgJzogcmUtd2F0Y2hpbmcgcHJldmlvdXNseSByZXF1aXJlZCByZXNvdXJjZScsIHdhdGNoS2V5LCBzdGF0dXMpOwogICAgICAgICAgX3RoaXMud2F0Y2hlc1t3YXRjaEtleV0uc3RhdHVzID0gV0FUQ0hfUEVORElORzsKICAgICAgICAgIF90aGlzLndhdGNoKHdhdGNoS2V5KTsKICAgICAgICB9IGVsc2UgaWYgKFtSRU1PVkVfUEVORElOR10uaW5jbHVkZXMoc3RhdHVzKSkgewogICAgICAgICAgX3RoaXMudHJhY2UoRVZFTlRfQ09OTkVDVEVELCAnOiB1bi13YXRjaGluZyBwcmV2aW91c2x5IHdhdGNoZWQgcmVzb3VyY2UnLCB3YXRjaEtleSwgc3RhdHVzKTsKICAgICAgICAgIF90aGlzLndhdGNoZXNbd2F0Y2hLZXldLnN0YXR1cyA9IFJFTU9WRV9QRU5ESU5HOwogICAgICAgICAgX3RoaXMudW53YXRjaCh3YXRjaEtleSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0pOwogICAgcmV0dXJuIF90aGlzOwogIH0KICBfaW5oZXJpdHMoUmVzb3VyY2VXYXRjaGVyLCBfU29ja2V0KTsKICByZXR1cm4gX2NyZWF0ZUNsYXNzKFJlc291cmNlV2F0Y2hlciwgW3sKICAgIGtleTogInRyYWNlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiB0cmFjZSgpIHsKICAgICAgdmFyIF9jb25zb2xlOwogICAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHsKICAgICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldOwogICAgICB9CiAgICAgIHRoaXMuZGVidWdXYXRjaGVyICYmIChfY29uc29sZSA9IGNvbnNvbGUpLmluZm8uYXBwbHkoX2NvbnNvbGUsIFsnUmVzb3VyY2UgV2F0Y2hlcjonXS5jb25jYXQoYXJncykpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnNvbGUKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzZXREZWJ1ZyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0RGVidWcob24pIHsKICAgICAgdGhpcy5kZWJ1Z1dhdGNoZXIgPSAhIW9uOwogICAgfQogIH0sIHsKICAgIGtleTogIndhdGNoRXhpc3RzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiB3YXRjaEV4aXN0cyh3YXRjaEtleSkgewogICAgICB2YXIgX3RoaXMkd2F0Y2hlczsKICAgICAgcmV0dXJuICEhKChfdGhpcyR3YXRjaGVzID0gdGhpcy53YXRjaGVzKSAhPT0gbnVsbCAmJiBfdGhpcyR3YXRjaGVzICE9PSB2b2lkIDAgJiYgX3RoaXMkd2F0Y2hlc1t3YXRjaEtleV0pOwogICAgfQogIH0sIHsKICAgIGtleTogIndhdGNoIiwKICAgIHZhbHVlOiBmdW5jdGlvbiB3YXRjaCh3YXRjaEtleSwgcHJvdmlkZWRSZXNvdXJjZVZlcnNpb24sIHByb3ZpZGVkUmVzb3VyY2VWZXJzaW9uVGltZSkgewogICAgICB2YXIgX3RoaXMkd2F0Y2hlczIsIF90aGlzJHdhdGNoZXMzLCBfdGhpcyR3YXRjaGVzNSwgX3RoaXMkd2F0Y2hlczYsIF90aGlzJHdhdGNoZXM3LCBfdGhpcyR3YXRjaGVzOCwgX3RoaXMkd2F0Y2hlczksIF90aGlzJHdhdGNoZXMxMCwgX3RoaXMkd2F0Y2hlczExOwogICAgICB2YXIgcHJvdmlkZWRLZXlQYXJ0cyA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDoge307CiAgICAgIHZhciBwcm92aWRlZFNraXBSZXNvdXJjZVZlcnNpb24gPSBhcmd1bWVudHMubGVuZ3RoID4gNCA/IGFyZ3VtZW50c1s0XSA6IHVuZGVmaW5lZDsKICAgICAgdmFyIHByb3ZpZGVkUmVzb3VyY2VUeXBlID0gcHJvdmlkZWRLZXlQYXJ0cy5yZXNvdXJjZVR5cGUsCiAgICAgICAgcHJvdmlkZWRJZCA9IHByb3ZpZGVkS2V5UGFydHMuaWQsCiAgICAgICAgcHJvdmlkZWROYW1lc3BhY2UgPSBwcm92aWRlZEtleVBhcnRzLm5hbWVzcGFjZSwKICAgICAgICBwcm92aWRlZFNlbGVjdG9yID0gcHJvdmlkZWRLZXlQYXJ0cy5zZWxlY3RvciwKICAgICAgICBwcm92aWRlZEZvcmNlID0gcHJvdmlkZWRLZXlQYXJ0cy5mb3JjZTsKICAgICAgdGhpcy50cmFjZSgnd2F0Y2g6JywgJ3JlcXVlc3RlZCcsIHdhdGNoS2V5KTsKICAgICAgaWYgKFtXQVRDSF9SRVFVRVNURUQsIFdBVENISU5HXS5pbmNsdWRlcygoX3RoaXMkd2F0Y2hlczIgPSB0aGlzLndhdGNoZXMpID09PSBudWxsIHx8IF90aGlzJHdhdGNoZXMyID09PSB2b2lkIDAgfHwgKF90aGlzJHdhdGNoZXMyID0gX3RoaXMkd2F0Y2hlczJbd2F0Y2hLZXldKSA9PT0gbnVsbCB8fCBfdGhpcyR3YXRjaGVzMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkd2F0Y2hlczIuc3RhdHVzKSkgewogICAgICAgIHRoaXMudHJhY2UoJ3dhdGNoOicsICdhbHJlYWR5IHJlcXVlc3RlZCBvciB3YXRjaGluZywgYWJvcnRpbmcnLCB3YXRjaEtleSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGlmICghcHJvdmlkZWRGb3JjZSAmJiAoX3RoaXMkd2F0Y2hlczMgPSB0aGlzLndhdGNoZXMpICE9PSBudWxsICYmIF90aGlzJHdhdGNoZXMzICE9PSB2b2lkIDAgJiYgKF90aGlzJHdhdGNoZXMzID0gX3RoaXMkd2F0Y2hlczNbd2F0Y2hLZXldKSAhPT0gbnVsbCAmJiBfdGhpcyR3YXRjaGVzMyAhPT0gdm9pZCAwICYmIF90aGlzJHdhdGNoZXMzLmVycm9yKSB7CiAgICAgICAgdmFyIF90aGlzJHdhdGNoZXM0OwogICAgICAgIGlmICgoKF90aGlzJHdhdGNoZXM0ID0gdGhpcy53YXRjaGVzKSA9PT0gbnVsbCB8fCBfdGhpcyR3YXRjaGVzNCA9PT0gdm9pZCAwIHx8IChfdGhpcyR3YXRjaGVzNCA9IF90aGlzJHdhdGNoZXM0W3dhdGNoS2V5XSkgPT09IG51bGwgfHwgX3RoaXMkd2F0Y2hlczQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJHdhdGNoZXM0LmVycm9yLnJlYXNvbikgIT09IFJFVklTSU9OX1RPT19PTEQpIHsKICAgICAgICAgIHRoaXMudHJhY2UoJ3dhdGNoOicsICdpbiBlcnJvciwgYWJvcnRpbmcnLCB3YXRjaEtleSk7CiAgICAgICAgfQogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB2YXIgcmVzb3VyY2VUeXBlID0gcHJvdmlkZWRSZXNvdXJjZVR5cGUgfHwgKChfdGhpcyR3YXRjaGVzNSA9IHRoaXMud2F0Y2hlcykgPT09IG51bGwgfHwgX3RoaXMkd2F0Y2hlczUgPT09IHZvaWQgMCB8fCAoX3RoaXMkd2F0Y2hlczUgPSBfdGhpcyR3YXRjaGVzNVt3YXRjaEtleV0pID09PSBudWxsIHx8IF90aGlzJHdhdGNoZXM1ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyR3YXRjaGVzNS5yZXNvdXJjZVR5cGUpOwogICAgICB2YXIgaWQgPSBwcm92aWRlZElkIHx8ICgoX3RoaXMkd2F0Y2hlczYgPSB0aGlzLndhdGNoZXMpID09PSBudWxsIHx8IF90aGlzJHdhdGNoZXM2ID09PSB2b2lkIDAgfHwgKF90aGlzJHdhdGNoZXM2ID0gX3RoaXMkd2F0Y2hlczZbd2F0Y2hLZXldKSA9PT0gbnVsbCB8fCBfdGhpcyR3YXRjaGVzNiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkd2F0Y2hlczYuaWQpOwogICAgICB2YXIgbmFtZXNwYWNlID0gcHJvdmlkZWROYW1lc3BhY2UgfHwgKChfdGhpcyR3YXRjaGVzNyA9IHRoaXMud2F0Y2hlcykgPT09IG51bGwgfHwgX3RoaXMkd2F0Y2hlczcgPT09IHZvaWQgMCB8fCAoX3RoaXMkd2F0Y2hlczcgPSBfdGhpcyR3YXRjaGVzN1t3YXRjaEtleV0pID09PSBudWxsIHx8IF90aGlzJHdhdGNoZXM3ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyR3YXRjaGVzNy5uYW1lc3BhY2UpOwogICAgICB2YXIgc2VsZWN0b3IgPSBwcm92aWRlZFNlbGVjdG9yIHx8ICgoX3RoaXMkd2F0Y2hlczggPSB0aGlzLndhdGNoZXMpID09PSBudWxsIHx8IF90aGlzJHdhdGNoZXM4ID09PSB2b2lkIDAgfHwgKF90aGlzJHdhdGNoZXM4ID0gX3RoaXMkd2F0Y2hlczhbd2F0Y2hLZXldKSA9PT0gbnVsbCB8fCBfdGhpcyR3YXRjaGVzOCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkd2F0Y2hlczguc2VsZWN0b3IpOwogICAgICB2YXIgc2tpcFJlc291cmNlVmVyc2lvbiA9ICgoX3RoaXMkd2F0Y2hlczkgPSB0aGlzLndhdGNoZXMpID09PSBudWxsIHx8IF90aGlzJHdhdGNoZXM5ID09PSB2b2lkIDAgfHwgKF90aGlzJHdhdGNoZXM5ID0gX3RoaXMkd2F0Y2hlczlbd2F0Y2hLZXldKSA9PT0gbnVsbCB8fCBfdGhpcyR3YXRjaGVzOSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkd2F0Y2hlczkuc2tpcFJlc291cmNlVmVyc2lvbikgfHwgcHJvdmlkZWRTa2lwUmVzb3VyY2VWZXJzaW9uOwogICAgICB2YXIgd2F0Y2hPYmplY3QgPSB7CiAgICAgICAgcmVzb3VyY2VUeXBlOiByZXNvdXJjZVR5cGUsCiAgICAgICAgaWQ6IGlkLAogICAgICAgIG5hbWVzcGFjZTogbmFtZXNwYWNlLAogICAgICAgIHNlbGVjdG9yOiBzZWxlY3RvcgogICAgICB9OwogICAgICB2YXIgcmVzb3VyY2VWZXJzaW9uVGltZSA9IHByb3ZpZGVkUmVzb3VyY2VWZXJzaW9uVGltZSB8fCAoKF90aGlzJHdhdGNoZXMxMCA9IHRoaXMud2F0Y2hlcykgPT09IG51bGwgfHwgX3RoaXMkd2F0Y2hlczEwID09PSB2b2lkIDAgfHwgKF90aGlzJHdhdGNoZXMxMCA9IF90aGlzJHdhdGNoZXMxMFt3YXRjaEtleV0pID09PSBudWxsIHx8IF90aGlzJHdhdGNoZXMxMCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkd2F0Y2hlczEwLnJlc291cmNlVmVyc2lvblRpbWUpOwogICAgICB2YXIgcmVzb3VyY2VWZXJzaW9uID0gcHJvdmlkZWRSZXNvdXJjZVZlcnNpb24gfHwgKChfdGhpcyR3YXRjaGVzMTEgPSB0aGlzLndhdGNoZXMpID09PSBudWxsIHx8IF90aGlzJHdhdGNoZXMxMSA9PT0gdm9pZCAwIHx8IChfdGhpcyR3YXRjaGVzMTEgPSBfdGhpcyR3YXRjaGVzMTFbd2F0Y2hLZXldKSA9PT0gbnVsbCB8fCBfdGhpcyR3YXRjaGVzMTEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJHdhdGNoZXMxMS5yZXNvdXJjZVZlcnNpb24pOwogICAgICB2YXIgc3VjY2VzcyA9IHRoaXMuc2VuZChKU09OLnN0cmluZ2lmeShfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHdhdGNoT2JqZWN0KSwge30sIHsKICAgICAgICByZXNvdXJjZVZlcnNpb246ICFza2lwUmVzb3VyY2VWZXJzaW9uID8gcmVzb3VyY2VWZXJzaW9uIDogdW5kZWZpbmVkCiAgICAgIH0pKSk7CiAgICAgIHRoaXMud2F0Y2hlc1t3YXRjaEtleV0gPSBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHdhdGNoT2JqZWN0KSwge30sIHsKICAgICAgICBzdGF0dXM6IHN1Y2Nlc3MgPyBXQVRDSF9TVEFUVVNFUy5XQVRDSF9SRVFVRVNURUQgOiBXQVRDSF9TVEFUVVNFUy5XQVRDSF9QRU5ESU5HLAogICAgICAgIHJlc291cmNlVmVyc2lvbjogcmVzb3VyY2VWZXJzaW9uLAogICAgICAgIHJlc291cmNlVmVyc2lvblRpbWU6IHJlc291cmNlVmVyc2lvblRpbWUsCiAgICAgICAgc2tpcFJlc291cmNlVmVyc2lvbjogc2tpcFJlc291cmNlVmVyc2lvbgogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJ1bndhdGNoIiwKICAgIHZhbHVlOiBmdW5jdGlvbiB1bndhdGNoKHdhdGNoS2V5KSB7CiAgICAgIHZhciBfdGhpcyR3YXRjaGVzMTI7CiAgICAgIHZhciB3YXRjaCA9ICgoX3RoaXMkd2F0Y2hlczEyID0gdGhpcy53YXRjaGVzKSA9PT0gbnVsbCB8fCBfdGhpcyR3YXRjaGVzMTIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJHdhdGNoZXMxMlt3YXRjaEtleV0pIHx8IHt9OwogICAgICB2YXIgcmVzb3VyY2VUeXBlID0gd2F0Y2gucmVzb3VyY2VUeXBlLAogICAgICAgIGlkID0gd2F0Y2guaWQsCiAgICAgICAgbmFtZXNwYWNlID0gd2F0Y2gubmFtZXNwYWNlLAogICAgICAgIHNlbGVjdG9yID0gd2F0Y2guc2VsZWN0b3I7CiAgICAgIHZhciB3YXRjaE9iamVjdCA9IHsKICAgICAgICByZXNvdXJjZVR5cGU6IHJlc291cmNlVHlwZSwKICAgICAgICBpZDogaWQsCiAgICAgICAgbmFtZXNwYWNlOiBuYW1lc3BhY2UsCiAgICAgICAgc2VsZWN0b3I6IHNlbGVjdG9yCiAgICAgIH07CiAgICAgIGlmIChyZXNvdXJjZVR5cGUgJiYgdGhpcy53YXRjaGVzW3dhdGNoS2V5XS5zdGF0dXMgIT09IFJFUVVFU1RFRF9SRU1PVkUpIHsKICAgICAgICB2YXIgc3VjY2VzcyA9IHRoaXMuc2VuZChKU09OLnN0cmluZ2lmeShfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHdhdGNoT2JqZWN0KSwge30sIHsKICAgICAgICAgIHN0b3A6IHRydWUKICAgICAgICB9KSkpOwogICAgICAgIHRoaXMud2F0Y2hlc1t3YXRjaEtleV0uc3RhdHVzID0gc3VjY2VzcyA/IFJFUVVFU1RFRF9SRU1PVkUgOiBSRU1PVkVfUEVORElORzsKICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogSGFuZGxlcyBtZXNzYWdlIGZyb20gQmFja2VuZCB0byBVSQogICAgICovCiAgfSwgewogICAga2V5OiAiX29ubWVzc2FnZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX29ubWVzc2FnZShldmVudCkgewogICAgICB2YXIgX3RoaXMkd2F0Y2hlczEzLCBfdGhpcyR3YXRjaGVzMTQ7CiAgICAgIHZhciBfSlNPTiRwYXJzZSA9IEpTT04ucGFyc2UoZXZlbnQuZGF0YSksCiAgICAgICAgZXZlbnROYW1lID0gX0pTT04kcGFyc2UubmFtZSwKICAgICAgICByZXNvdXJjZVR5cGUgPSBfSlNPTiRwYXJzZS5yZXNvdXJjZVR5cGUsCiAgICAgICAgdHlwZSA9IF9KU09OJHBhcnNlLmRhdGEudHlwZSwKICAgICAgICBpZCA9IF9KU09OJHBhcnNlLmlkLAogICAgICAgIG5hbWVzcGFjZSA9IF9KU09OJHBhcnNlLm5hbWVzcGFjZSwKICAgICAgICBzZWxlY3RvciA9IF9KU09OJHBhcnNlLnNlbGVjdG9yLAogICAgICAgIGRhdGEgPSBfSlNPTiRwYXJzZS5kYXRhOwogICAgICB2YXIgd2F0Y2hLZXkgPSBrZXlGb3JTdWJzY3JpYmUoewogICAgICAgIHJlc291cmNlVHlwZTogcmVzb3VyY2VUeXBlLAogICAgICAgIHR5cGU6IHR5cGUsCiAgICAgICAgaWQ6IGlkLAogICAgICAgIG5hbWVzcGFjZTogbmFtZXNwYWNlLAogICAgICAgIHNlbGVjdG9yOiBzZWxlY3RvcgogICAgICB9KTsKICAgICAgaWYgKGV2ZW50TmFtZSA9PT0gJ3Jlc291cmNlLnN0YXJ0JyAmJiAoKF90aGlzJHdhdGNoZXMxMyA9IHRoaXMud2F0Y2hlcykgPT09IG51bGwgfHwgX3RoaXMkd2F0Y2hlczEzID09PSB2b2lkIDAgfHwgKF90aGlzJHdhdGNoZXMxMyA9IF90aGlzJHdhdGNoZXMxM1t3YXRjaEtleV0pID09PSBudWxsIHx8IF90aGlzJHdhdGNoZXMxMyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkd2F0Y2hlczEzLnN0YXR1cykgPT09IFdBVENIX1JFUVVFU1RFRCkgewogICAgICAgIHRoaXMud2F0Y2hlc1t3YXRjaEtleV0uc3RhdHVzID0gV0FUQ0hJTkc7CiAgICAgICAgZGVsZXRlIHRoaXMud2F0Y2hlc1t3YXRjaEtleV0uZXJyb3I7CiAgICAgIH0gZWxzZSBpZiAoZXZlbnROYW1lID09PSAncmVzb3VyY2Uuc3RvcCcgJiYgKF90aGlzJHdhdGNoZXMxNCA9IHRoaXMud2F0Y2hlcykgIT09IG51bGwgJiYgX3RoaXMkd2F0Y2hlczE0ICE9PSB2b2lkIDAgJiYgX3RoaXMkd2F0Y2hlczE0W3dhdGNoS2V5XSkgewogICAgICAgIHZhciBfdGhpcyR3YXRjaGVzJHdhdGNoS2U7CiAgICAgICAgLy8gRmluZCBzb21lIHdheSB0byByZXNvbHZlIHRoZSBjb3JyZWN0IHJlc291cmNlVmVyc2lvbiBmcm9tIHdpdGhpbiB0aGUgcmVzb3VyY2VXYXRjaGVyIHVudGlsIHRoZW46CiAgICAgICAgLy8gcmVzZXQgdGhlIHdhdGNoIGluIHRoZSByZXNvdXJjZVdhdGNoZXIsIHdlJ2xsIGhhbmRsZSByZWNvdmVyeSB1cCB0aGUgY2hhaW4uIEZvciBub3cKICAgICAgICAvLyBkaXNwYXRjaCB0aGUgZXZlbnQgdG8gdGhlIGhvc3QgcHJvY2VzcyB3aGljaCBzaG91bGQgaGF2ZSBhIGhhbmRsZXIgZm9yIHJlc291cmNlLnN0b3AKCiAgICAgICAgLy8gaWYgKHRoaXMud2F0Y2hlcz8uW3dhdGNoS2V5XT8uc3RhdHVzID09PSBSRVFVRVNURURfUkVNT1ZFKSB7CiAgICAgICAgdGhpcy53YXRjaGVzW3dhdGNoS2V5XSA9IHsKICAgICAgICAgIGVycm9yOiAoX3RoaXMkd2F0Y2hlcyR3YXRjaEtlID0gdGhpcy53YXRjaGVzW3dhdGNoS2V5XSkgPT09IG51bGwgfHwgX3RoaXMkd2F0Y2hlcyR3YXRjaEtlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyR3YXRjaGVzJHdhdGNoS2UuZXJyb3IKICAgICAgICB9OwogICAgICAgIC8vIH0gZWxzZSB7CiAgICAgICAgLy8gICB0aGlzLndhdGNoZXNbd2F0Y2hLZXldLnN0YXR1cyA9IFNUT1BQRUQ7CiAgICAgICAgLy8gICBkZWxldGUgdGhpcy53YXRjaGVzW3dhdGNoS2V5XS5yZXNvdXJjZVZlcnNpb247CiAgICAgICAgLy8gICBkZWxldGUgdGhpcy53YXRjaGVzW3dhdGNoS2V5XS5yZXNvdXJjZVZlcnNpb25UaW1lOwogICAgICAgIC8vICAgdGhpcy53YXRjaCh3YXRjaEtleSk7CiAgICAgICAgLy8gICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KEVWRU5UX01FU1NBR0UsIHsgZGV0YWlsOiBldmVudCB9KSk7CiAgICAgICAgLy8gfQogICAgICB9IGVsc2UgaWYgKGV2ZW50TmFtZSA9PT0gJ3Jlc291cmNlLmVycm9yJykgewogICAgICAgIHZhciBfZGF0YSRlcnJvcjsKICAgICAgICB2YXIgZXJyID0gZGF0YSA9PT0gbnVsbCB8fCBkYXRhID09PSB2b2lkIDAgfHwgKF9kYXRhJGVycm9yID0gZGF0YS5lcnJvcikgPT09IG51bGwgfHwgX2RhdGEkZXJyb3IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9kYXRhJGVycm9yLnRvTG93ZXJDYXNlKCk7CiAgICAgICAgaWYgKHRoaXMud2F0Y2hlc1t3YXRjaEtleV0gJiYgZXJyLmluY2x1ZGVzKCd3YXRjaCBub3QgYWxsb3dlZCcpKSB7CiAgICAgICAgICB0aGlzLndhdGNoZXNbd2F0Y2hLZXldLmVycm9yID0gewogICAgICAgICAgICB0eXBlOiByZXNvdXJjZVR5cGUsCiAgICAgICAgICAgIHJlYXNvbjogTk9fV0FUQ0gKICAgICAgICAgIH07CiAgICAgICAgfSBlbHNlIGlmICh0aGlzLndhdGNoZXNbd2F0Y2hLZXldICYmIGVyci5pbmNsdWRlcygnZmFpbGVkIHRvIGZpbmQgc2NoZW1hJykpIHsKICAgICAgICAgIC8vIFRoaXMgY2FuIGhhcHBlbiB3aGVuIHRoZSBjYXR0bGUtY2x1c3Rlci1hZ2VudCBnb2VzIGRvd24gKHJlZGVwbG95IGRlcGxveW1lbnQsIGtpbGwgcG9kLCBldGMpCiAgICAgICAgICAvLyBUaGUgcHJldmlvdXMgbWV0aG9kIHdhcyBqdXN0IHRvIHRyYWNrIHRoZSBlcnJvciBhbmQgYmxvY2sgYW55IGZ1cnRoZXIgYXR0ZW1wdHMgdG8gd2F0Y2ggKGNhbldhdGNoKQogICAgICAgICAgLy8gVGhpcyBtZXRob2QgbWVhbnMgd2UgY2FuIHJldHJ5IG9uIHRoZSBuZXh0IGZpbmRYIChzaG91bGQgYmUgc2FmZSwgdW5sZXNzIHRoZXJlIGFyZSBvdGhlciB1c2UgY2FzZXMuLi4pCgogICAgICAgICAgdGhpcy53YXRjaGVzW3dhdGNoS2V5XS5lcnJvciA9IHsKICAgICAgICAgICAgdHlwZTogcmVzb3VyY2VUeXBlLAogICAgICAgICAgICByZWFzb246IE5PX1NDSEVNQQogICAgICAgICAgfTsKICAgICAgICB9IGVsc2UgaWYgKGVyci5pbmNsdWRlcygndG9vIG9sZCcpKSB7CiAgICAgICAgICBkZWxldGUgdGhpcy53YXRjaGVzW3dhdGNoS2V5XS5yZXNvdXJjZVZlcnNpb247CiAgICAgICAgICBkZWxldGUgdGhpcy53YXRjaGVzW3dhdGNoS2V5XS5yZXNvdXJjZVZlcnNpb25UaW1lOwogICAgICAgICAgZGVsZXRlIHRoaXMud2F0Y2hlc1t3YXRjaEtleV0uc2tpcFJlc291cmNlVmVyc2lvbjsKICAgICAgICAgIHRoaXMud2F0Y2hlc1t3YXRjaEtleV0uZXJyb3IgPSB7CiAgICAgICAgICAgIHR5cGU6IHJlc291cmNlVHlwZSwKICAgICAgICAgICAgcmVhc29uOiBSRVZJU0lPTl9UT09fT0xECiAgICAgICAgICB9OwogICAgICAgICAgLy8gTmVlZHMgdG8gbWF0Y2ggc3ViIHJlc3luY1dhdGNoIHBhcmFtcwogICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgncmVzeW5jJywgewogICAgICAgICAgICBkZXRhaWw6IHsKICAgICAgICAgICAgICBkYXRhOiB7CiAgICAgICAgICAgICAgICByZXNvdXJjZVR5cGU6IHJlc291cmNlVHlwZSwKICAgICAgICAgICAgICAgIGlkOiBpZCwKICAgICAgICAgICAgICAgIG5hbWVzcGFjZTogbmFtZXNwYWNlLAogICAgICAgICAgICAgICAgc2VsZWN0b3I6IHNlbGVjdG9yCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9KSk7CiAgICAgICAgfQogICAgICAgIHRoaXMudHJhY2UoJ19vbm1lc3NhZ2U6JywgJ25ldyBlcnJvcicsIHRoaXMud2F0Y2hlc1t3YXRjaEtleV0uZXJyb3IpOwogICAgICB9CiAgICAgIF9nZXQoX2dldFByb3RvdHlwZU9mKFJlc291cmNlV2F0Y2hlci5wcm90b3R5cGUpLCAiX29ubWVzc2FnZSIsIHRoaXMpLmNhbGwodGhpcywgZXZlbnQpOwogICAgfQogIH1dKTsKfShTb2NrZXQpOwpleHBvcnQgeyBSZXNvdXJjZVdhdGNoZXIgYXMgZGVmYXVsdCB9Ow=="},{"version":3,"names":["Socket","NO_WATCH","NO_SCHEMA","EVENT_CONNECTED","REVISION_TOO_OLD","WATCH_STATUSES","WATCH_PENDING","WATCH_REQUESTED","WATCHING","STOPPED","REMOVE_PENDING","REMOVE_REQUESTED","keyForSubscribe","_ref","arguments","length","undefined","resourceType","type","namespace","id","selector","filter","param","join","watchKeyFromMessage","msg","watchObject","REQUESTED_REMOVE","ResourceWatcher","_Socket","url","_this","autoReconnect","frameTimeout","protocol","maxTries","csrf","_classCallCheck","_callSuper","watches","status","debugWatcher","baseUrl","self","location","origin","replace","addEventListener","e","trace","Object","values","forEach","watch","error","watchKey","includes","unwatch","_inherits","_createClass","key","value","_console","_len","args","Array","_key","console","info","apply","concat","setDebug","on","watchExists","_this$watches","providedResourceVersion","providedResourceVersionTime","_this$watches2","_this$watches3","_this$watches5","_this$watches6","_this$watches7","_this$watches8","_this$watches9","_this$watches10","_this$watches11","providedKeyParts","providedSkipResourceVersion","providedResourceType","providedId","providedNamespace","providedSelector","providedForce","force","_this$watches4","reason","skipResourceVersion","resourceVersionTime","resourceVersion","success","send","JSON","stringify","_objectSpread","_this$watches12","stop","_onmessage","event","_this$watches13","_this$watches14","_JSON$parse","parse","data","eventName","name","_this$watches$watchKe","_data$error","err","toLowerCase","dispatchEvent","CustomEvent","detail","_get","_getPrototypeOf","prototype","call","default"],"sources":["/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/plugins/steve/resourceWatcher.js"],"sourcesContent":["/**\n * Imports in a worker cannot include exports from the file invoking the worker or from files importing the invoking file.\n */\n\nimport Socket, {\n  NO_WATCH,\n  NO_SCHEMA,\n  EVENT_CONNECTED,\n  REVISION_TOO_OLD\n} from '@shell/utils/socket';\n\nexport const WATCH_STATUSES = {\n  /**\n   * watch has been asked for this resource but not request has not successfully been sent\n   */\n  WATCH_PENDING:    'pending',\n  /**\n   * requested but not confirmed by the socket yet\n   */\n  WATCH_REQUESTED:  'requested',\n  /**\n   * confirmed as active by the socket\n   */\n  WATCHING:         'watching',\n  /**\n   * temporarily stopped via message from the socket, a watch should immediately be triggered but the maintenance cycle will pick it up if that doesn't happen.\n   */\n  STOPPED:          'stopped',\n  /**\n   * stop has been asked for this resource, but request has not successfully been sent\n   */\n  REMOVE_PENDING:   'removed_pending',\n  /**\n   * stop request has been sent to the socket or it's been stopped by the socket itself and is now awaiting a resource.stop message\n   */\n  REMOVE_REQUESTED: 'removed_requested'\n};\n\nexport const keyForSubscribe = ({\n  resourceType, type, namespace, id, selector\n} = {}) => {\n  return [(resourceType || type), namespace, id, selector] // each watch param in an array\n    .filter((param) => !!param) // filter out all the empty ones // the filter makes these keys neater\n    .join('/'); // join into a string so we can use it as an object key\n};\n\nexport const watchKeyFromMessage = (msg) => {\n  const {\n    resourceType,\n    namespace,\n    id,\n    selector\n  } = msg;\n\n  const watchObject = {\n    resourceType,\n    id,\n    namespace,\n    selector\n  };\n\n  return keyForSubscribe(watchObject);\n};\n\nconst {\n  WATCH_PENDING, WATCH_REQUESTED, WATCHING, REMOVE_PENDING, REQUESTED_REMOVE\n} = WATCH_STATUSES;\n\nexport default class ResourceWatcher extends Socket {\n  watches = {};\n  status = '';\n  debugWatcher = false;\n  csrf;\n\n  constructor(url, autoReconnect = true, frameTimeout = null, protocol = null, maxTries = null, csrf) {\n    super(url, autoReconnect, frameTimeout, protocol, maxTries, true);\n    this.baseUrl = self.location.origin + url.replace('subscribe', '');\n    this.csrf = csrf;\n\n    this.addEventListener(EVENT_CONNECTED, (e) => {\n      this.trace(EVENT_CONNECTED, ': processing previously requested or watched resources');\n\n      Object.values(this.watches).forEach((watch) => {\n        const { status, error } = watch;\n        const watchKey = keyForSubscribe(watch);\n\n        if ([WATCH_PENDING, WATCH_REQUESTED, WATCHING].includes(status) && !error) {\n          this.trace(EVENT_CONNECTED, ': re-watching previously required resource', watchKey, status);\n          this.watches[watchKey].status = WATCH_PENDING;\n          this.watch(watchKey);\n        } else if ([REMOVE_PENDING].includes(status)) {\n          this.trace(EVENT_CONNECTED, ': un-watching previously watched resource', watchKey, status);\n          this.watches[watchKey].status = REMOVE_PENDING;\n          this.unwatch(watchKey);\n        }\n      });\n    });\n  }\n\n  trace(...args) {\n    this.debugWatcher && console.info('Resource Watcher:', ...args); // eslint-disable-line no-console\n  }\n\n  setDebug(on) {\n    this.debugWatcher = !!on;\n  }\n\n  watchExists(watchKey) {\n    return !!this.watches?.[watchKey];\n  }\n\n  watch(watchKey, providedResourceVersion, providedResourceVersionTime, providedKeyParts = {}, providedSkipResourceVersion) {\n    const {\n      resourceType: providedResourceType,\n      id: providedId,\n      namespace: providedNamespace,\n      selector: providedSelector,\n      force: providedForce,\n    } = providedKeyParts;\n\n    this.trace('watch:', 'requested', watchKey);\n\n    if ([WATCH_REQUESTED, WATCHING].includes(this.watches?.[watchKey]?.status)) {\n      this.trace('watch:', 'already requested or watching, aborting', watchKey);\n\n      return;\n    }\n\n    if (!providedForce && this.watches?.[watchKey]?.error) {\n      if (this.watches?.[watchKey]?.error.reason !== REVISION_TOO_OLD) {\n        this.trace('watch:', 'in error, aborting', watchKey);\n      }\n\n      return;\n    }\n\n    const resourceType = providedResourceType || this.watches?.[watchKey]?.resourceType;\n    const id = providedId || this.watches?.[watchKey]?.id;\n    const namespace = providedNamespace || this.watches?.[watchKey]?.namespace;\n    const selector = providedSelector || this.watches?.[watchKey]?.selector;\n    const skipResourceVersion = this.watches?.[watchKey]?.skipResourceVersion || providedSkipResourceVersion;\n\n    const watchObject = {\n      resourceType,\n      id,\n      namespace,\n      selector\n    };\n\n    const resourceVersionTime = providedResourceVersionTime || this.watches?.[watchKey]?.resourceVersionTime;\n    const resourceVersion = providedResourceVersion || this.watches?.[watchKey]?.resourceVersion;\n\n    const success = this.send(JSON.stringify({\n      ...watchObject,\n      resourceVersion: !skipResourceVersion ? resourceVersion : undefined\n    }));\n\n    this.watches[watchKey] = {\n      ...watchObject,\n      status: success ? WATCH_STATUSES.WATCH_REQUESTED : WATCH_STATUSES.WATCH_PENDING,\n      resourceVersion,\n      resourceVersionTime,\n      skipResourceVersion\n    };\n  }\n\n  unwatch(watchKey) {\n    const watch = this.watches?.[watchKey] || {};\n    const {\n      resourceType, id, namespace, selector\n    } = watch;\n    const watchObject = {\n      resourceType,\n      id,\n      namespace,\n      selector\n    };\n\n    if (resourceType && this.watches[watchKey].status !== REQUESTED_REMOVE) {\n      const success = this.send(JSON.stringify({\n        ...watchObject,\n        stop: true\n      }));\n\n      this.watches[watchKey].status = success ? REQUESTED_REMOVE : REMOVE_PENDING;\n    }\n  }\n\n  /**\n   * Handles message from Backend to UI\n   */\n  _onmessage(event) {\n    const {\n      name: eventName, resourceType, data: { type }, id, namespace, selector, data\n    } = JSON.parse(event.data);\n    const watchKey = keyForSubscribe({\n      resourceType,\n      type,\n      id,\n      namespace,\n      selector\n    });\n\n    if (eventName === 'resource.start' && this.watches?.[watchKey]?.status === WATCH_REQUESTED) {\n      this.watches[watchKey].status = WATCHING;\n      delete this.watches[watchKey].error;\n    } else if (eventName === 'resource.stop' && this.watches?.[watchKey]) {\n      // Find some way to resolve the correct resourceVersion from within the resourceWatcher until then:\n      // reset the watch in the resourceWatcher, we'll handle recovery up the chain. For now\n      // dispatch the event to the host process which should have a handler for resource.stop\n\n      // if (this.watches?.[watchKey]?.status === REQUESTED_REMOVE) {\n      this.watches[watchKey] = { error: this.watches[watchKey]?.error };\n      // } else {\n      //   this.watches[watchKey].status = STOPPED;\n      //   delete this.watches[watchKey].resourceVersion;\n      //   delete this.watches[watchKey].resourceVersionTime;\n      //   this.watch(watchKey);\n      //   this.dispatchEvent(new CustomEvent(EVENT_MESSAGE, { detail: event }));\n      // }\n    } else if (eventName === 'resource.error') {\n      const err = data?.error?.toLowerCase();\n\n      if ( this.watches[watchKey] && err.includes('watch not allowed') ) {\n        this.watches[watchKey].error = { type: resourceType, reason: NO_WATCH };\n      } else if ( this.watches[watchKey] && err.includes('failed to find schema') ) {\n        // This can happen when the cattle-cluster-agent goes down (redeploy deployment, kill pod, etc)\n        // The previous method was just to track the error and block any further attempts to watch (canWatch)\n        // This method means we can retry on the next findX (should be safe, unless there are other use cases...)\n\n        this.watches[watchKey].error = { type: resourceType, reason: NO_SCHEMA };\n      } else if ( err.includes('too old') ) {\n        delete this.watches[watchKey].resourceVersion;\n        delete this.watches[watchKey].resourceVersionTime;\n        delete this.watches[watchKey].skipResourceVersion;\n        this.watches[watchKey].error = { type: resourceType, reason: REVISION_TOO_OLD };\n        // Needs to match sub resyncWatch params\n        this.dispatchEvent(new CustomEvent('resync', {\n          detail: {\n            data: {\n              resourceType, id, namespace, selector\n            }\n          }\n        }));\n      }\n      this.trace('_onmessage:', 'new error', this.watches[watchKey].error);\n    }\n\n    super._onmessage(event);\n  }\n}\n"],"mappings":"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","ignoreList":[]}]}