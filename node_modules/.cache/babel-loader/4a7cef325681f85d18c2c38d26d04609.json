{"remainingRequest":"/home/ubuntu/susecon-2024-ext-demo/node_modules/babel-loader/lib/index.js??ref--16-1!/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/core/plugins.js","dependencies":[{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/core/plugins.js","mtime":1725271280091},{"path":"/home/ubuntu/susecon-2024-ext-demo/babel.config.js","mtime":1725268750245},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/babel-loader/lib/index.js","mtime":1725271298942}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90b0NvbnN1bWFibGVBcnJheSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiL2hvbWUvdWJ1bnR1L3N1c2Vjb24tMjAyNC1leHQtZGVtby9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvcmVnZW5lcmF0b3IvaW5kZXguanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudmFsdWVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucHJvbWlzZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zdGFydHMtd2l0aC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yLmpzIjsKaW1wb3J0IHsgcHJvZHVjdHNMb2FkZWQgfSBmcm9tICdAc2hlbGwvc3RvcmUvdHlwZS1tYXAnOwppbXBvcnQgeyBjbGVhck1vZGVsQ2FjaGUgfSBmcm9tICdAc2hlbGwvcGx1Z2lucy9kYXNoYm9hcmQtc3RvcmUvbW9kZWwtbG9hZGVyJzsKaW1wb3J0IHsgUGx1Z2luIH0gZnJvbSAnLi9wbHVnaW4nOwppbXBvcnQgeyBQbHVnaW5Sb3V0ZXMgfSBmcm9tICcuL3BsdWdpbi1yb3V0ZXMnOwppbXBvcnQgeyBVSV9QTFVHSU5fQkFTRV9VUkwgfSBmcm9tICdAc2hlbGwvY29uZmlnL3VpcGx1Z2lucyc7CmltcG9ydCB7IEV4dGVuc2lvblBvaW50IH0gZnJvbSAnLi90eXBlcyc7CnZhciBNT0RFTF9UWVBFID0gJ21vZGVscyc7CmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIChfcmVmLCBpbmplY3QpIHsKICB2YXIgYXBwID0gX3JlZi5hcHAsCiAgICBzdG9yZSA9IF9yZWYuc3RvcmUsCiAgICAkYXhpb3MgPSBfcmVmLiRheGlvcywKICAgIHJlZGlyZWN0ID0gX3JlZi5yZWRpcmVjdDsKICB2YXIgZHluYW1pYyA9IHt9OwogIHZhciB2YWxpZGF0b3JzID0ge307CiAgdmFyIF9sYXN0TG9hZGVkID0gMDsKCiAgLy8gVHJhY2sgd2hpY2ggcGx1Z2luIGxvYWRlZCB3aGF0LCBzbyB3ZSBjYW4gdW5sb2FkIHN0dWZmCiAgdmFyIHBsdWdpbnMgPSB7fTsKICB2YXIgcGx1Z2luUm91dGVzID0gbmV3IFBsdWdpblJvdXRlcyhhcHAucm91dGVyKTsKICB2YXIgdWlDb25maWcgPSB7fTsKICBmb3IgKHZhciBlcCBpbiBFeHRlbnNpb25Qb2ludCkgewogICAgdWlDb25maWdbRXh0ZW5zaW9uUG9pbnRbZXBdXSA9IHt9OwogIH0KICBpbmplY3QoJ3BsdWdpbicsIHsKICAgIC8vIFBsdWdpbnMgc2hvdWxkIG5vdCB1c2UgdGhlc2UgLSBidXQgd2Ugd2lsbCBwYXNzIHRoZW0gaW4gZm9yIG5vdyBhcyBhIDJuZCBhcmd1bWVudAogICAgLy8gaW4gY2FzZSB0aGVyZSBhcmUgdXNlIGNhc2VzIG5vdCBjb3ZlcmVkIHRoYXQgcmVxdWlyZSBkaXJlY3QgYWNjZXNzIC0gd2UgbWF5IHJlbW92ZSBhY2Nlc3MgbGF0ZXIKICAgIGludGVybmFsOiBmdW5jdGlvbiBpbnRlcm5hbCgpIHsKICAgICAgdmFyIGludGVybmFsID0gewogICAgICAgIGFwcDogYXBwLAogICAgICAgIHN0b3JlOiBzdG9yZSwKICAgICAgICAkYXhpb3M6ICRheGlvcywKICAgICAgICByZWRpcmVjdDogcmVkaXJlY3QsCiAgICAgICAgcGx1Z2luczogdGhpcwogICAgICB9OwogICAgICByZXR1cm4gaW50ZXJuYWw7CiAgICB9LAogICAgLy8gTG9hZCBhIHBsdWdpbiBmcm9tIGEgVUkgcGFja2FnZQogICAgbG9hZFBsdWdpbkFzeW5jOiBmdW5jdGlvbiBsb2FkUGx1Z2luQXN5bmMocGx1Z2luKSB7CiAgICAgIHZhciBfcGx1Z2luJG1ldGFkYXRhOwogICAgICB2YXIgbmFtZSA9IHBsdWdpbi5uYW1lLAogICAgICAgIHZlcnNpb24gPSBwbHVnaW4udmVyc2lvbjsKICAgICAgdmFyIGlkID0gIiIuY29uY2F0KG5hbWUsICItIikuY29uY2F0KHZlcnNpb24pOwogICAgICB2YXIgdXJsOwogICAgICBpZiAoKHBsdWdpbiA9PT0gbnVsbCB8fCBwbHVnaW4gPT09IHZvaWQgMCB8fCAoX3BsdWdpbiRtZXRhZGF0YSA9IHBsdWdpbi5tZXRhZGF0YSkgPT09IG51bGwgfHwgX3BsdWdpbiRtZXRhZGF0YSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3BsdWdpbiRtZXRhZGF0YS5kaXJlY3QpID09PSAndHJ1ZScpIHsKICAgICAgICB1cmwgPSBwbHVnaW4uZW5kcG9pbnQ7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIF9wbHVnaW4kbWV0YWRhdGEyOwogICAgICAgIC8vIFNlZSBpZiB0aGUgcGx1Z2luIGhhcyBhIG1haW4gbWV0YWRhdGEgcHJvcGVydHkgc2V0CiAgICAgICAgdmFyIG1haW4gPSAocGx1Z2luID09PSBudWxsIHx8IHBsdWdpbiA9PT0gdm9pZCAwIHx8IChfcGx1Z2luJG1ldGFkYXRhMiA9IHBsdWdpbi5tZXRhZGF0YSkgPT09IG51bGwgfHwgX3BsdWdpbiRtZXRhZGF0YTIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9wbHVnaW4kbWV0YWRhdGEyLm1haW4pIHx8ICIiLmNvbmNhdChpZCwgIi51bWQubWluLmpzIik7CiAgICAgICAgdXJsID0gIiIuY29uY2F0KFVJX1BMVUdJTl9CQVNFX1VSTCwgIi8iKS5jb25jYXQobmFtZSwgIi8iKS5jb25jYXQodmVyc2lvbiwgIi9wbHVnaW4vIikuY29uY2F0KG1haW4pOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzLmxvYWRBc3luYyhpZCwgdXJsKTsKICAgIH0sCiAgICAvLyBMb2FkIGEgcGx1Z2luIGZyb20gYSBVSSBwYWNrYWdlCiAgICBsb2FkQXN5bmM6IGZ1bmN0aW9uIGxvYWRBc3luYyhpZCwgbWFpbkZpbGUpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICB2YXIgbW9kdWxlVXJsID0gbWFpbkZpbGU7CiAgICAgICAgdmFyIGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTsKICAgICAgICBlbGVtZW50LnNyYyA9IG1vZHVsZVVybDsKICAgICAgICBlbGVtZW50LnR5cGUgPSAndGV4dC9qYXZhc2NyaXB0JzsKICAgICAgICBlbGVtZW50LmFzeW5jID0gdHJ1ZTsKCiAgICAgICAgLy8gaWQgaXMgYDxwcm9kdWN0Pi08dmVyc2lvbj5gLgogICAgICAgIHZhciBvbGRQbHVnaW4gPSBPYmplY3QudmFsdWVzKHBsdWdpbnMpLmZpbmQoZnVuY3Rpb24gKHApIHsKICAgICAgICAgIHJldHVybiBpZC5zdGFydHNXaXRoKHAubmFtZSk7CiAgICAgICAgfSk7CiAgICAgICAgdmFyIHJlbW92ZWQgPSBQcm9taXNlLnJlc29sdmUoKTsKICAgICAgICBpZiAob2xkUGx1Z2luKSB7CiAgICAgICAgICAvLyBVbmluc3RhbGwgZXhpc3RpbmcgcGx1Z2luIGlmIHRoZXJlIGlzIG9uZS4gVGhpcyBlbnN1cmVzIHRoYXQgbGFzdCBsb2FkZWQgcGx1Z2luIGlzIG5vdCBhbHdheXMgdXNlZAogICAgICAgICAgLy8gKG5hdiBoYXJ2MS0tPmhhcnYyLS0+aGFydjEgYW5kIGhhcnYyIHdvdWxkIGJlIHNob3duKQogICAgICAgICAgcmVtb3ZlZCA9IF90aGlzLnJlbW92ZVBsdWdpbihvbGRQbHVnaW4ubmFtZSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGRlbGV0ZSB3aW5kb3dbb2xkUGx1Z2luLmlkXTsKICAgICAgICAgICAgZGVsZXRlIHBsdWdpbnNbb2xkUGx1Z2luLmlkXTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICByZW1vdmVkLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgZWxlbWVudC5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGVsZW1lbnQucGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZChlbGVtZW50KTsKICAgICAgICAgICAgaWYgKCF3aW5kb3dbaWRdKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdChuZXcgRXJyb3IoJ0NvdWxkIG5vdCBsb2FkIHBsdWdpbiBjb2RlJykpOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBVcGRhdGUgdGhlIHRpbWVzdGFtcCB0aGF0IG5ldyBwbHVnaW5zIHdlcmUgbG9hZGVkIC0gbWF5IGJlIG5lZWRlZAogICAgICAgICAgICAvLyB0byB1cGRhdGUgY2FjaGVzIHdoZW4gbmV3IHBsdWdpbnMgYXJlIGxvYWRlZAogICAgICAgICAgICBfbGFzdExvYWRlZCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpOwoKICAgICAgICAgICAgLy8gbmFtZSBpcyB0aGUgbmFtZSBvZiB0aGUgcGx1Z2luLCBpbmNsdWRpbmcgdGhlIHZlcnNpb24gbnVtYmVyCiAgICAgICAgICAgIHZhciBwbHVnaW4gPSBuZXcgUGx1Z2luKGlkKTsKICAgICAgICAgICAgcGx1Z2luc1tpZF0gPSBwbHVnaW47CgogICAgICAgICAgICAvLyBJbml0aWFsaXplIHRoZSBwbHVnaW4KICAgICAgICAgICAgd2luZG93W2lkXS5kZWZhdWx0KHBsdWdpbiwgX3RoaXMuaW50ZXJuYWwoKSk7CgogICAgICAgICAgICAvLyBVbmluc3RhbGwgZXhpc3RpbmcgcGx1Z2luIGlmIHRoZXJlIGlzIG9uZQogICAgICAgICAgICBfdGhpcy5yZW1vdmVQbHVnaW4ocGx1Z2luLm5hbWUpOyAvLyBSZW1vdmluZyB0aGlzIGNhdXNlcyB0aGUgcGx1Z2luIHRvIG5vdCBsb2FkIG9uIHJlZnJlc2gKCiAgICAgICAgICAgIC8vIExvYWQgYWxsIG9mIHRoZSB0eXBlcyBldGMgZnJvbSB0aGUgcGx1Z2luCiAgICAgICAgICAgIF90aGlzLmFwcGx5UGx1Z2luKHBsdWdpbik7CgogICAgICAgICAgICAvLyBBZGQgdGhlIHBsdWdpbiB0byB0aGUgc3RvcmUKICAgICAgICAgICAgc3RvcmUuZGlzcGF0Y2goJ3VpcGx1Z2lucy9hZGRQbHVnaW4nLCBwbHVnaW4pOwogICAgICAgICAgICByZXNvbHZlKCk7CiAgICAgICAgICB9OwogICAgICAgICAgZWxlbWVudC5vbmVycm9yID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgZWxlbWVudC5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKGVsZW1lbnQpOwogICAgICAgICAgICAvLyBNYXNzYWdlIHRoZSBlcnJvciBpbnRvIHNvbWV0aGluZyB1c2VmdWwKICAgICAgICAgICAgdmFyIGVycm9yTWVzc2FnZSA9ICJGYWlsZWQgdG8gbG9hZCBzY3JpcHQgZnJvbSAnIi5jb25jYXQoZS50YXJnZXQuc3JjLCAiJyIpOwogICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yTWVzc2FnZSwgZSk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc29sZQogICAgICAgICAgICByZWplY3QobmV3IEVycm9yKGVycm9yTWVzc2FnZSkpOyAvLyBUaGlzIGlzIG1vcmUgdXNlZnVsIHdoZXJlIGl0J3MgdXNlZAogICAgICAgICAgfTsKICAgICAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoZWxlbWVudCk7CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIHZhciBlcnJvck1lc3NhZ2UgPSAiRmFpbGVkIHRvIHVubG9hZCBvbGQgcGx1Z2luIi5jb25jYXQob2xkUGx1Z2luID09PSBudWxsIHx8IG9sZFBsdWdpbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogb2xkUGx1Z2luLmlkKTsKICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3JNZXNzYWdlLCBlKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1jb25zb2xlCiAgICAgICAgICByZWplY3QobmV3IEVycm9yKGVycm9yTWVzc2FnZSkpOyAvLyBUaGlzIGlzIG1vcmUgdXNlZnVsIHdoZXJlIGl0J3MgdXNlZAogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICAvLyBVc2VkIGJ5IHRoZSBkeW5hbWljIGxvYWRlciB3aGVuIGEgcGx1Z2luIGlzIGluY2x1ZGVkIGluIHRoZSBidWlsZAogICAgaW5pdFBsdWdpbjogZnVuY3Rpb24gaW5pdFBsdWdpbihpZCwgbW9kdWxlKSB7CiAgICAgIHZhciBwbHVnaW4gPSBuZXcgUGx1Z2luKGlkKTsKCiAgICAgIC8vIE1hcmsgdGhlIHBsdWdpbiBhcyBiZWluZyBidWlsdC1pbgogICAgICBwbHVnaW4uYnVpbHRpbiA9IHRydWU7CiAgICAgIHBsdWdpbnNbaWRdID0gcGx1Z2luOwoKICAgICAgLy8gSW5pdGlhbGl6ZSB0aGUgcGx1Z2luCiAgICAgIHZhciBwID0gbW9kdWxlOwogICAgICB0cnkgewogICAgICAgIHAuZGVmYXVsdChwbHVnaW4sIHRoaXMuaW50ZXJuYWwoKSk7CgogICAgICAgIC8vIFVuaW5zdGFsbCBleGlzdGluZyBwcm9kdWN0IGlmIHRoZXJlIGlzIG9uZQogICAgICAgIHRoaXMucmVtb3ZlUGx1Z2luKHBsdWdpbi5uYW1lKTsKCiAgICAgICAgLy8gTG9hZCBhbGwgb2YgdGhlIHR5cGVzIGV0YyBmcm9tIHRoZSBwbHVnaW4KICAgICAgICB0aGlzLmFwcGx5UGx1Z2luKHBsdWdpbik7CgogICAgICAgIC8vIEFkZCB0aGUgcGx1Z2luIHRvIHRoZSBzdG9yZQogICAgICAgIHN0b3JlLmRpc3BhdGNoKCd1aXBsdWdpbnMvYWRkUGx1Z2luJywgcGx1Z2luKTsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIGNvbnNvbGUuZXJyb3IoIkVycm9yIGxvYWRpbmcgcGx1Z2luICIuY29uY2F0KHBsdWdpbi5uYW1lKSk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc29sZQogICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc29sZQogICAgICB9CiAgICB9LAogICAgbG9nb3V0OiBmdW5jdGlvbiBsb2dvdXQoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgYWxsLCBpLCBwbHVnaW47CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGFsbCA9IE9iamVjdC52YWx1ZXMocGx1Z2lucyk7CiAgICAgICAgICAgICAgaSA9IDA7CiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICBpZiAoIShpIDwgYWxsLmxlbmd0aCkpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxODsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBwbHVnaW4gPSBhbGxbaV07CiAgICAgICAgICAgICAgaWYgKCFwbHVnaW4uYnVpbHRpbikgewogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDY7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgiY29udGludWUiLCAxNSk7CiAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gNjsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gOTsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXMyLnJlbW92ZVBsdWdpbihwbHVnaW4ubmFtZSk7CiAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTQ7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDExOwogICAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbImNhdGNoIl0oNik7CiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcmVtb3ZpbmcgcGx1Z2luJywgX2NvbnRleHQudDApOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnNvbGUKICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgICBkZWxldGUgcGx1Z2luc1twbHVnaW4uaWRdOwogICAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICAgIGkrKzsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAxODoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUsIG51bGwsIFtbNiwgMTFdXSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIC8vIFJlbW92ZSB0aGUgcGx1Z2luCiAgICByZW1vdmVQbHVnaW46IGZ1bmN0aW9uIHJlbW92ZVBsdWdpbihuYW1lKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgdmFyIHBsdWdpbiwgcHJvbWlzZXM7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBwbHVnaW4gPSBPYmplY3QudmFsdWVzKHBsdWdpbnMpLmZpbmQoZnVuY3Rpb24gKHApIHsKICAgICAgICAgICAgICAgIHJldHVybiBwLm5hbWUgPT09IG5hbWU7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgaWYgKHBsdWdpbikgewogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAzOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iKTsKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIHByb21pc2VzID0gW107CiAgICAgICAgICAgICAgcGx1Z2luLnByb2R1Y3ROYW1lcy5mb3JFYWNoKGZ1bmN0aW9uIChwcm9kdWN0KSB7CiAgICAgICAgICAgICAgICBwcm9taXNlcy5wdXNoKHN0b3JlLmRpc3BhdGNoKCd0eXBlLW1hcC9yZW1vdmVQcm9kdWN0JywgewogICAgICAgICAgICAgICAgICBwcm9kdWN0OiBwcm9kdWN0LAogICAgICAgICAgICAgICAgICBwbHVnaW46IHBsdWdpbgogICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAvLyBSZW1vdmUgYWxsIG9mIHRoZSB0eXBlcwogICAgICAgICAgICAgIE9iamVjdC5rZXlzKHBsdWdpbi50eXBlcykuZm9yRWFjaChmdW5jdGlvbiAodHlwKSB7CiAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhwbHVnaW4udHlwZXNbdHlwXSkuZm9yRWFjaChmdW5jdGlvbiAobmFtZSkgewogICAgICAgICAgICAgICAgICBfdGhpczMudW5yZWdpc3Rlcih0eXAsIG5hbWUpOwogICAgICAgICAgICAgICAgICBpZiAodHlwID09PSBNT0RFTF9UWVBFKSB7CiAgICAgICAgICAgICAgICAgICAgY2xlYXJNb2RlbENhY2hlKG5hbWUpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgLy8gUmVtb3ZlIGxvY2FsZXMKICAgICAgICAgICAgICBwbHVnaW4ubG9jYWxlcy5mb3JFYWNoKGZ1bmN0aW9uIChsb2NhbGVPYmopIHsKICAgICAgICAgICAgICAgIHByb21pc2VzLnB1c2goc3RvcmUuZGlzcGF0Y2goJ2kxOG4vcmVtb3ZlTG9jYWxlJywgbG9jYWxlT2JqKSk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgaWYgKHBsdWdpbi50eXBlcy5tb2RlbHMpIHsKICAgICAgICAgICAgICAgIC8vIEFzayB0aGUgU3RldmUgc3RvcmVzIHRvIGZvcmdldCBhbnkgZGF0YSBpdCBoYXMgZm9yIG1vZGVscyB0aGF0IHdlIGFyZSByZW1vdmluZwogICAgICAgICAgICAgICAgcHJvbWlzZXMucHVzaC5hcHBseShwcm9taXNlcywgX3RvQ29uc3VtYWJsZUFycmF5KF90aGlzMy5yZW1vdmVUeXBlRnJvbVN0b3JlKHN0b3JlLCAncmFuY2hlcicsIE9iamVjdC5rZXlzKHBsdWdpbi50eXBlcy5tb2RlbHMpKSkpOwogICAgICAgICAgICAgICAgcHJvbWlzZXMucHVzaC5hcHBseShwcm9taXNlcywgX3RvQ29uc3VtYWJsZUFycmF5KF90aGlzMy5yZW1vdmVUeXBlRnJvbVN0b3JlKHN0b3JlLCAnbWFuYWdlbWVudCcsIE9iamVjdC5rZXlzKHBsdWdpbi50eXBlcy5tb2RlbHMpKSkpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgLy8gQ2FsbCBwbHVnaW4gdW5pbnN0YWxsIGhvb2tzCiAgICAgICAgICAgICAgcGx1Z2luLnVuaW5zdGFsbEhvb2tzLmZvckVhY2goZnVuY3Rpb24gKGZuKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZm4ocGx1Z2luLCBfdGhpczMuaW50ZXJuYWwoKSk7CiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIC8vIFJlbW92ZSB0aGUgcGx1Z2luIGl0c2VsZgogICAgICAgICAgICAgIHByb21pc2VzLnB1c2goc3RvcmUuZGlzcGF0Y2goJ3VpcGx1Z2lucy9yZW1vdmVQbHVnaW4nLCBuYW1lKSk7CgogICAgICAgICAgICAgIC8vIFVucmVnaXN0ZXIgdnVleCBzdG9yZXMKICAgICAgICAgICAgICBwbHVnaW4uc3RvcmVzLmZvckVhY2goZnVuY3Rpb24gKHBTdG9yZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIHBTdG9yZS51bnJlZ2lzdGVyKHN0b3JlKTsKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgLy8gUmVtb3ZlIHZhbGlkYXRvcnMKICAgICAgICAgICAgICBPYmplY3Qua2V5cyhwbHVnaW4udmFsaWRhdG9ycykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgICAgICAgICBkZWxldGUgdmFsaWRhdG9yc1trZXldOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTQ7CiAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKHByb21pc2VzKTsKICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgICAvLyBVcGRhdGUgbGFzdCBsb2FkIHNpbmNlIHdlIHJlbW92ZWQgYSBwbHVnaW4KICAgICAgICAgICAgICBfbGFzdExvYWRlZCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpOwogICAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgcmVtb3ZlVHlwZUZyb21TdG9yZTogZnVuY3Rpb24gcmVtb3ZlVHlwZUZyb21TdG9yZShzdG9yZSwgc3RvcmVOYW1lLCB0eXBlcykgewogICAgICByZXR1cm4gKHR5cGVzIHx8IFtdKS5tYXAoZnVuY3Rpb24gKHR5cGUpIHsKICAgICAgICByZXR1cm4gc3RvcmUuY29tbWl0KCIiLmNvbmNhdChzdG9yZU5hbWUsICIvZm9yZ2V0VHlwZSIpLCB0eXBlKTsKICAgICAgfSk7CiAgICB9LAogICAgLy8gQXBwbHkgdGhlIHBsdWdpbiBiYXNlZCBvbiBpdHMgbWV0YWRhdGEKICAgIGFwcGx5UGx1Z2luOiBmdW5jdGlvbiBhcHBseVBsdWdpbihwbHVnaW4pIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CiAgICAgIC8vIFR5cGVzCiAgICAgIE9iamVjdC5rZXlzKHBsdWdpbi50eXBlcykuZm9yRWFjaChmdW5jdGlvbiAodHlwKSB7CiAgICAgICAgT2JqZWN0LmtleXMocGx1Z2luLnR5cGVzW3R5cF0pLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHsKICAgICAgICAgIF90aGlzNC5yZWdpc3Rlcih0eXAsIG5hbWUsIHBsdWdpbi50eXBlc1t0eXBdW25hbWVdKTsKICAgICAgICB9KTsKICAgICAgfSk7CgogICAgICAvLyBVSSBDb25maWd1cmF0aW9uIC0gY29weSBVSSBjb25maWcgZnJvbSBhIHBsdWdpbiBpbnRvIHRoZSBnbG9iYWwgdWlDb25maWcgb2JqZWN0CiAgICAgIE9iamVjdC5rZXlzKHBsdWdpbi51aUNvbmZpZykuZm9yRWFjaChmdW5jdGlvbiAoYWN0aW9uVHlwZSkgewogICAgICAgIE9iamVjdC5rZXlzKHBsdWdpbi51aUNvbmZpZ1thY3Rpb25UeXBlXSkuZm9yRWFjaChmdW5jdGlvbiAoYWN0aW9uTG9jYXRpb24pIHsKICAgICAgICAgIHBsdWdpbi51aUNvbmZpZ1thY3Rpb25UeXBlXVthY3Rpb25Mb2NhdGlvbl0uZm9yRWFjaChmdW5jdGlvbiAoYWN0aW9uKSB7CiAgICAgICAgICAgIGlmICghdWlDb25maWdbYWN0aW9uVHlwZV1bYWN0aW9uTG9jYXRpb25dKSB7CiAgICAgICAgICAgICAgdWlDb25maWdbYWN0aW9uVHlwZV1bYWN0aW9uTG9jYXRpb25dID0gW107CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdWlDb25maWdbYWN0aW9uVHlwZV1bYWN0aW9uTG9jYXRpb25dLnB1c2goYWN0aW9uKTsKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICB9KTsKCiAgICAgIC8vIGwxMG4KICAgICAgT2JqZWN0LmtleXMocGx1Z2luLmwxMG4pLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHsKICAgICAgICBwbHVnaW4ubDEwbltuYW1lXS5mb3JFYWNoKGZ1bmN0aW9uIChmbikgewogICAgICAgICAgX3RoaXM0LnJlZ2lzdGVyKCdsMTBuJywgbmFtZSwgZm4pOwogICAgICAgIH0pOwogICAgICB9KTsKCiAgICAgIC8vIEluaXRpYWxpemUgdGhlIHByb2R1Y3QgaWYgdGhlIHN0b3JlIGlzIHJlYWR5CiAgICAgIGlmIChwcm9kdWN0c0xvYWRlZCgpKSB7CiAgICAgICAgdGhpcy5sb2FkUHJvZHVjdHMoW3BsdWdpbl0pOwogICAgICB9CgogICAgICAvLyBSZWdpc3RlciB2dWV4IHN0b3JlcwogICAgICBwbHVnaW4uc3RvcmVzLmZvckVhY2goZnVuY3Rpb24gKHBTdG9yZSkgewogICAgICAgIHJldHVybiBwU3RvcmUucmVnaXN0ZXIoKShzdG9yZSk7CiAgICAgIH0pOwoKICAgICAgLy8gTG9jYWxlcwogICAgICBwbHVnaW4ubG9jYWxlcy5mb3JFYWNoKGZ1bmN0aW9uIChsb2NhbGVPYmopIHsKICAgICAgICBzdG9yZS5kaXNwYXRjaCgnaTE4bi9hZGRMb2NhbGUnLCBsb2NhbGVPYmopOwogICAgICB9KTsKCiAgICAgIC8vIFJvdXRlcwogICAgICBwbHVnaW5Sb3V0ZXMuYWRkUm91dGVzKHBsdWdpbiwgcGx1Z2luLnJvdXRlcyk7CgogICAgICAvLyBWYWxpZGF0b3JzCiAgICAgIE9iamVjdC5rZXlzKHBsdWdpbi52YWxpZGF0b3JzKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICB2YWxpZGF0b3JzW2tleV0gPSBwbHVnaW4udmFsaWRhdG9yc1trZXldOwogICAgICB9KTsKICAgIH0sCiAgICAvKioKICAgICAqIFJlZ2lzdGVyICdzb21ldGhpbmcnIHRoYXQgY2FuIGJlIGR5bmFtaWNhbGx5IGxvYWRlZCAtIGUuZy4gbW9kZWwsIGVkaXQsIGNyZWF0ZSwgbGlzdCwgaTE4bgogICAgICogQHBhcmFtIHtTdHJpbmd9IHR5cGUgdHlwZSBvZiB0aGluZyB0byByZWdpc3RlciwgZS5nLiAnZWRpdCcKICAgICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIHVuaXF1ZSBuYW1lIG9mICdzb21ldGhpbmcnCiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBmdW5jdGlvbiB0aGF0IGR5bmFtaWNhbGx5IGxvYWRzIHRoZSBtb2R1bGUgZm9yIHRoZSB0aGluZyBiZWluZyByZWdpc3RlcmVkCiAgICAgKi8KICAgIHJlZ2lzdGVyOiBmdW5jdGlvbiByZWdpc3Rlcih0eXBlLCBuYW1lLCBmbikgewogICAgICBpZiAoIWR5bmFtaWNbdHlwZV0pIHsKICAgICAgICBkeW5hbWljW3R5cGVdID0ge307CiAgICAgIH0KCiAgICAgIC8vIEFjY3VtdWxhdGUgbDEwbiByZXNvdXJjZXMgcmF0aGVyIHRoYW4gcmVwbGFjZQogICAgICBpZiAodHlwZSA9PT0gJ2wxMG4nKSB7CiAgICAgICAgaWYgKCFkeW5hbWljW3R5cGVdW25hbWVdKSB7CiAgICAgICAgICBkeW5hbWljW3R5cGVdW25hbWVdID0gW107CiAgICAgICAgfQogICAgICAgIGR5bmFtaWNbdHlwZV1bbmFtZV0ucHVzaChmbik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZHluYW1pY1t0eXBlXVtuYW1lXSA9IGZuOwogICAgICB9CiAgICB9LAogICAgdW5yZWdpc3RlcjogZnVuY3Rpb24gdW5yZWdpc3Rlcih0eXBlLCBuYW1lLCBmbikgewogICAgICB2YXIgX2R5bmFtaWMkdHlwZTI7CiAgICAgIGlmICh0eXBlID09PSAnbDEwbicpIHsKICAgICAgICB2YXIgX2R5bmFtaWMkdHlwZTsKICAgICAgICBpZiAoKF9keW5hbWljJHR5cGUgPSBkeW5hbWljW3R5cGVdKSAhPT0gbnVsbCAmJiBfZHluYW1pYyR0eXBlICE9PSB2b2lkIDAgJiYgX2R5bmFtaWMkdHlwZVtuYW1lXSkgewogICAgICAgICAgdmFyIGluZGV4ID0gZHluYW1pY1t0eXBlXVtuYW1lXS5maW5kKGZ1bmN0aW9uIChmdW5jKSB7CiAgICAgICAgICAgIHJldHVybiBmdW5jID09PSBmbjsKICAgICAgICAgIH0pOwogICAgICAgICAgaWYgKGluZGV4ICE9PSAtMSkgewogICAgICAgICAgICBkeW5hbWljW3R5cGVdW25hbWVdLnNwbGljZShpbmRleCwgMSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKChfZHluYW1pYyR0eXBlMiA9IGR5bmFtaWNbdHlwZV0pICE9PSBudWxsICYmIF9keW5hbWljJHR5cGUyICE9PSB2b2lkIDAgJiYgX2R5bmFtaWMkdHlwZTJbbmFtZV0pIHsKICAgICAgICBkZWxldGUgZHluYW1pY1t0eXBlXVtuYW1lXTsKICAgICAgfQogICAgfSwKICAgIC8vIEZvciBkZWJ1Z2dpbmcKICAgIGdldEFsbDogZnVuY3Rpb24gZ2V0QWxsKCkgewogICAgICByZXR1cm4gZHluYW1pYzsKICAgIH0sCiAgICBnZXRQbHVnaW5zOiBmdW5jdGlvbiBnZXRQbHVnaW5zKCkgewogICAgICByZXR1cm4gcGx1Z2luczsKICAgIH0sCiAgICBnZXREeW5hbWljOiBmdW5jdGlvbiBnZXREeW5hbWljKHR5cGVOYW1lLCBuYW1lKSB7CiAgICAgIHZhciBfZHluYW1pYyR0eXBlTmFtZTsKICAgICAgcmV0dXJuIChfZHluYW1pYyR0eXBlTmFtZSA9IGR5bmFtaWNbdHlwZU5hbWVdKSA9PT0gbnVsbCB8fCBfZHluYW1pYyR0eXBlTmFtZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2R5bmFtaWMkdHlwZU5hbWVbbmFtZV07CiAgICB9LAogICAgZ2V0VmFsaWRhdG9yOiBmdW5jdGlvbiBnZXRWYWxpZGF0b3IobmFtZSkgewogICAgICByZXR1cm4gdmFsaWRhdG9yc1tuYW1lXTsKICAgIH0sCiAgICAvKioKICAgICAqIFJldHVybiB0aGUgVUkgY29uZmlndXJhdGlvbiBmb3IgdGhlIGdpdmVuIHR5cGUgYW5kIGxvY2F0aW9uCiAgICAgKi8KICAgIGdldFVJQ29uZmlnOiBmdW5jdGlvbiBnZXRVSUNvbmZpZyh0eXBlLCB1aUFyZWEpIHsKICAgICAgcmV0dXJuIHVpQ29uZmlnW3R5cGVdW3VpQXJlYV0gfHwgW107CiAgICB9LAogICAgLyoqCiAgICAgKiBSZXR1cm5zIGFsbCBVSSBDb25maWd1cmF0aW9uICh1c2VmdWwgZm9yIGRlYnVnZ2luZykKICAgICAqLwogICAgZ2V0QWxsVUlDb25maWc6IGZ1bmN0aW9uIGdldEFsbFVJQ29uZmlnKCkgewogICAgICByZXR1cm4gdWlDb25maWc7CiAgICB9LAogICAgLy8gVGltZXN0YW1wIHRoYXQgYSBVSSBwYWNrYWdlIHdhcyBsYXN0IGxvYWRlZAogICAgLy8gVHlwaWNhbGx5IHVzZWQgdG8gaW52YWxpZGF0ZSBjYWNoZXMgKGUuZy4gaTE4bikgd2hlbiBuZXcgcGx1Z2lucyBhcmUgbG9hZGVkCiAgICBnZXQgbGFzdExvYWQoKSB7CiAgICAgIHJldHVybiBfbGFzdExvYWRlZDsKICAgIH0sCiAgICBsaXN0RHluYW1pYzogZnVuY3Rpb24gbGlzdER5bmFtaWModHlwZU5hbWUpIHsKICAgICAgaWYgKCFkeW5hbWljW3R5cGVOYW1lXSkgewogICAgICAgIHJldHVybiBbXTsKICAgICAgfQogICAgICByZXR1cm4gT2JqZWN0LmtleXMoZHluYW1pY1t0eXBlTmFtZV0pOwogICAgfSwKICAgIC8vIEdldCB0aGUgcHJvZHVjdHMgcHJvdmlkZWQgYnkgcGx1Z2lucwogICAgZ2V0IHByb2R1Y3RzKCkgewogICAgICByZXR1cm4gZHluYW1pYy5wcm9kdWN0cyB8fCBbXTsKICAgIH0sCiAgICAvLyBMb2FkIGFsbCBvZiB0aGUgcHJvZHVjdHMgcHJvdmlkZWQgYnkgcGx1Z2lucwogICAgbG9hZFByb2R1Y3RzOiBmdW5jdGlvbiBsb2FkUHJvZHVjdHMobG9hZFBsdWdpbnMpIHsKICAgICAgaWYgKCFsb2FkUGx1Z2lucykgewogICAgICAgIGxvYWRQbHVnaW5zID0gT2JqZWN0LnZhbHVlcyhwbHVnaW5zKTsKICAgICAgfQogICAgICBsb2FkUGx1Z2lucy5mb3JFYWNoKGZ1bmN0aW9uIChwbHVnaW4pIHsKICAgICAgICBpZiAocGx1Z2luLnByb2R1Y3RzKSB7CiAgICAgICAgICBwbHVnaW4ucHJvZHVjdHMuZm9yRWFjaCggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIF9yZWYyID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMocCkgewogICAgICAgICAgICAgIHZhciBpbXBsOwogICAgICAgICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBwOwogICAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgICAgaW1wbCA9IF9jb250ZXh0My5zZW50OwogICAgICAgICAgICAgICAgICAgIGlmIChpbXBsLmluaXQpIHsKICAgICAgICAgICAgICAgICAgICAgIGltcGwuaW5pdChwbHVnaW4sIHN0b3JlKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9LCBfY2FsbGVlMyk7CiAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeCkgewogICAgICAgICAgICAgIHJldHVybiBfcmVmMi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICB9OwogICAgICAgICAgfSgpKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0pOwp9"},{"version":3,"names":["productsLoaded","clearModelCache","Plugin","PluginRoutes","UI_PLUGIN_BASE_URL","ExtensionPoint","MODEL_TYPE","_ref","inject","app","store","$axios","redirect","dynamic","validators","_lastLoaded","plugins","pluginRoutes","router","uiConfig","ep","internal","loadPluginAsync","plugin","_plugin$metadata","name","version","id","concat","url","metadata","direct","endpoint","_plugin$metadata2","main","loadAsync","mainFile","_this","Promise","resolve","reject","moduleUrl","element","document","createElement","src","type","async","oldPlugin","Object","values","find","p","startsWith","removed","removePlugin","then","window","onload","parentElement","removeChild","Error","Date","getTime","default","applyPlugin","dispatch","onerror","e","errorMessage","target","console","error","head","appendChild","catch","initPlugin","module","builtin","logout","_this2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","all","i","wrap","_callee$","_context","prev","next","length","abrupt","t0","stop","_this3","_callee2","promises","_callee2$","_context2","productNames","forEach","product","push","keys","types","typ","unregister","locales","localeObj","models","apply","_toConsumableArray","removeTypeFromStore","uninstallHooks","fn","stores","pStore","key","storeName","map","commit","_this4","register","actionType","actionLocation","action","l10n","loadProducts","addRoutes","routes","_dynamic$type2","_dynamic$type","index","func","splice","getAll","getPlugins","getDynamic","typeName","_dynamic$typeName","getValidator","getUIConfig","uiArea","getAllUIConfig","lastLoad","listDynamic","products","loadPlugins","_ref2","_callee3","impl","_callee3$","_context3","sent","init","_x","arguments"],"sources":["/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/core/plugins.js"],"sourcesContent":["import { productsLoaded } from '@shell/store/type-map';\nimport { clearModelCache } from '@shell/plugins/dashboard-store/model-loader';\nimport { Plugin } from './plugin';\nimport { PluginRoutes } from './plugin-routes';\nimport { UI_PLUGIN_BASE_URL } from '@shell/config/uiplugins';\nimport { ExtensionPoint } from './types';\n\nconst MODEL_TYPE = 'models';\n\nexport default function({\n  app,\n  store,\n  $axios,\n  redirect\n}, inject) {\n  const dynamic = {};\n  const validators = {};\n  let _lastLoaded = 0;\n\n  // Track which plugin loaded what, so we can unload stuff\n  const plugins = {};\n\n  const pluginRoutes = new PluginRoutes(app.router);\n\n  const uiConfig = {};\n\n  for (const ep in ExtensionPoint) {\n    uiConfig[ExtensionPoint[ep]] = {};\n  }\n\n  inject('plugin', {\n    // Plugins should not use these - but we will pass them in for now as a 2nd argument\n    // in case there are use cases not covered that require direct access - we may remove access later\n    internal() {\n      const internal = {\n        app,\n        store,\n        $axios,\n        redirect,\n        plugins: this\n      };\n\n      return internal;\n    },\n\n    // Load a plugin from a UI package\n    loadPluginAsync(plugin) {\n      const { name, version } = plugin;\n      const id = `${ name }-${ version }`;\n      let url;\n\n      if (plugin?.metadata?.direct === 'true') {\n        url = plugin.endpoint;\n      } else {\n        // See if the plugin has a main metadata property set\n        const main = plugin?.metadata?.main || `${ id }.umd.min.js`;\n\n        url = `${ UI_PLUGIN_BASE_URL }/${ name }/${ version }/plugin/${ main }`;\n      }\n\n      return this.loadAsync(id, url);\n    },\n\n    // Load a plugin from a UI package\n    loadAsync(id, mainFile) {\n      return new Promise((resolve, reject) => {\n        const moduleUrl = mainFile;\n        const element = document.createElement('script');\n\n        element.src = moduleUrl;\n        element.type = 'text/javascript';\n        element.async = true;\n\n        // id is `<product>-<version>`.\n        const oldPlugin = Object.values(plugins).find((p) => id.startsWith(p.name));\n\n        let removed = Promise.resolve();\n\n        if (oldPlugin) {\n          // Uninstall existing plugin if there is one. This ensures that last loaded plugin is not always used\n          // (nav harv1-->harv2-->harv1 and harv2 would be shown)\n          removed = this.removePlugin(oldPlugin.name).then(() => {\n            delete window[oldPlugin.id];\n\n            delete plugins[oldPlugin.id];\n          });\n        }\n\n        removed.then(() => {\n          element.onload = () => {\n            element.parentElement.removeChild(element);\n\n            if (!window[id]) {\n              return reject(new Error('Could not load plugin code'));\n            }\n\n            // Update the timestamp that new plugins were loaded - may be needed\n            // to update caches when new plugins are loaded\n            _lastLoaded = new Date().getTime();\n\n            // name is the name of the plugin, including the version number\n            const plugin = new Plugin(id);\n\n            plugins[id] = plugin;\n\n            // Initialize the plugin\n            window[id].default(plugin, this.internal());\n\n            // Uninstall existing plugin if there is one\n            this.removePlugin(plugin.name); // Removing this causes the plugin to not load on refresh\n\n            // Load all of the types etc from the plugin\n            this.applyPlugin(plugin);\n\n            // Add the plugin to the store\n            store.dispatch('uiplugins/addPlugin', plugin);\n\n            resolve();\n          };\n\n          element.onerror = (e) => {\n            element.parentElement.removeChild(element);\n            // Massage the error into something useful\n            const errorMessage = `Failed to load script from '${ e.target.src }'`;\n\n            console.error(errorMessage, e); // eslint-disable-line no-console\n            reject(new Error(errorMessage)); // This is more useful where it's used\n          };\n\n          document.head.appendChild(element);\n        }).catch((e) => {\n          const errorMessage = `Failed to unload old plugin${ oldPlugin?.id }`;\n\n          console.error(errorMessage, e); // eslint-disable-line no-console\n          reject(new Error(errorMessage)); // This is more useful where it's used\n        });\n      });\n    },\n\n    // Used by the dynamic loader when a plugin is included in the build\n    initPlugin(id, module) {\n      const plugin = new Plugin(id);\n\n      // Mark the plugin as being built-in\n      plugin.builtin = true;\n\n      plugins[id] = plugin;\n\n      // Initialize the plugin\n      const p = module;\n\n      try {\n        p.default(plugin, this.internal());\n\n        // Uninstall existing product if there is one\n        this.removePlugin(plugin.name);\n\n        // Load all of the types etc from the plugin\n        this.applyPlugin(plugin);\n\n        // Add the plugin to the store\n        store.dispatch('uiplugins/addPlugin', plugin);\n      } catch (e) {\n        console.error(`Error loading plugin ${ plugin.name }`); // eslint-disable-line no-console\n        console.error(e); // eslint-disable-line no-console\n      }\n    },\n\n    async logout() {\n      const all = Object.values(plugins);\n\n      for (let i = 0; i < all.length; i++) {\n        const plugin = all[i];\n\n        if (plugin.builtin) {\n          continue;\n        }\n\n        try {\n          await this.removePlugin(plugin.name);\n        } catch (e) {\n          console.error('Error removing plugin', e); // eslint-disable-line no-console\n        }\n\n        delete plugins[plugin.id];\n      }\n    },\n\n    // Remove the plugin\n    async removePlugin(name) {\n      const plugin = Object.values(plugins).find((p) => p.name === name);\n\n      if (!plugin) {\n        return;\n      }\n\n      const promises = [];\n\n      plugin.productNames.forEach((product) => {\n        promises.push(store.dispatch('type-map/removeProduct', { product, plugin }));\n      });\n\n      // Remove all of the types\n      Object.keys(plugin.types).forEach((typ) => {\n        Object.keys(plugin.types[typ]).forEach((name) => {\n          this.unregister(typ, name);\n\n          if (typ === MODEL_TYPE) {\n            clearModelCache(name);\n          }\n        });\n      });\n\n      // Remove locales\n      plugin.locales.forEach((localeObj) => {\n        promises.push(store.dispatch('i18n/removeLocale', localeObj));\n      });\n\n      if (plugin.types.models) {\n        // Ask the Steve stores to forget any data it has for models that we are removing\n        promises.push(...this.removeTypeFromStore(store, 'rancher', Object.keys(plugin.types.models)));\n        promises.push(...this.removeTypeFromStore(store, 'management', Object.keys(plugin.types.models)));\n      }\n\n      // Call plugin uninstall hooks\n      plugin.uninstallHooks.forEach((fn) => fn(plugin, this.internal()));\n\n      // Remove the plugin itself\n      promises.push( store.dispatch('uiplugins/removePlugin', name));\n\n      // Unregister vuex stores\n      plugin.stores.forEach((pStore) => pStore.unregister(store));\n\n      // Remove validators\n      Object.keys(plugin.validators).forEach((key) => {\n        delete validators[key];\n      });\n\n      await Promise.all(promises);\n\n      // Update last load since we removed a plugin\n      _lastLoaded = new Date().getTime();\n    },\n\n    removeTypeFromStore(store, storeName, types) {\n      return (types || []).map((type) => store.commit(`${ storeName }/forgetType`, type));\n    },\n\n    // Apply the plugin based on its metadata\n    applyPlugin(plugin) {\n      // Types\n      Object.keys(plugin.types).forEach((typ) => {\n        Object.keys(plugin.types[typ]).forEach((name) => {\n          this.register(typ, name, plugin.types[typ][name]);\n        });\n      });\n\n      // UI Configuration - copy UI config from a plugin into the global uiConfig object\n      Object.keys(plugin.uiConfig).forEach((actionType) => {\n        Object.keys(plugin.uiConfig[actionType]).forEach((actionLocation) => {\n          plugin.uiConfig[actionType][actionLocation].forEach((action) => {\n            if (!uiConfig[actionType][actionLocation]) {\n              uiConfig[actionType][actionLocation] = [];\n            }\n            uiConfig[actionType][actionLocation].push(action);\n          });\n        });\n      });\n\n      // l10n\n      Object.keys(plugin.l10n).forEach((name) => {\n        plugin.l10n[name].forEach((fn) => {\n          this.register('l10n', name, fn);\n        });\n      });\n\n      // Initialize the product if the store is ready\n      if (productsLoaded()) {\n        this.loadProducts([plugin]);\n      }\n\n      // Register vuex stores\n      plugin.stores.forEach((pStore) => pStore.register()(store));\n\n      // Locales\n      plugin.locales.forEach((localeObj) => {\n        store.dispatch('i18n/addLocale', localeObj);\n      });\n\n      // Routes\n      pluginRoutes.addRoutes(plugin, plugin.routes);\n\n      // Validators\n      Object.keys(plugin.validators).forEach((key) => {\n        validators[key] = plugin.validators[key];\n      });\n    },\n\n    /**\n     * Register 'something' that can be dynamically loaded - e.g. model, edit, create, list, i18n\n     * @param {String} type type of thing to register, e.g. 'edit'\n     * @param {String} name unique name of 'something'\n     * @param {Function} fn function that dynamically loads the module for the thing being registered\n     */\n    register(type, name, fn) {\n      if (!dynamic[type]) {\n        dynamic[type] = {};\n      }\n\n      // Accumulate l10n resources rather than replace\n      if (type === 'l10n') {\n        if (!dynamic[type][name]) {\n          dynamic[type][name] = [];\n        }\n\n        dynamic[type][name].push(fn);\n      } else {\n        dynamic[type][name] = fn;\n      }\n    },\n\n    unregister(type, name, fn) {\n      if (type === 'l10n') {\n        if (dynamic[type]?.[name]) {\n          const index = dynamic[type][name].find((func) => func === fn);\n\n          if (index !== -1) {\n            dynamic[type][name].splice(index, 1);\n          }\n        }\n      } else if (dynamic[type]?.[name]) {\n        delete dynamic[type][name];\n      }\n    },\n\n    // For debugging\n    getAll() {\n      return dynamic;\n    },\n\n    getPlugins() {\n      return plugins;\n    },\n\n    getDynamic(typeName, name) {\n      return dynamic[typeName]?.[name];\n    },\n\n    getValidator(name) {\n      return validators[name];\n    },\n\n    /**\n     * Return the UI configuration for the given type and location\n     */\n    getUIConfig(type, uiArea) {\n      return uiConfig[type][uiArea] || [];\n    },\n\n    /**\n     * Returns all UI Configuration (useful for debugging)\n     */\n    getAllUIConfig() {\n      return uiConfig;\n    },\n\n    // Timestamp that a UI package was last loaded\n    // Typically used to invalidate caches (e.g. i18n) when new plugins are loaded\n    get lastLoad() {\n      return _lastLoaded;\n    },\n\n    listDynamic(typeName) {\n      if (!dynamic[typeName]) {\n        return [];\n      }\n\n      return Object.keys(dynamic[typeName]);\n    },\n\n    // Get the products provided by plugins\n    get products() {\n      return dynamic.products || [];\n    },\n\n    // Load all of the products provided by plugins\n    loadProducts(loadPlugins) {\n      if (!loadPlugins) {\n        loadPlugins = Object.values(plugins);\n      }\n\n      loadPlugins.forEach((plugin) => {\n        if (plugin.products) {\n          plugin.products.forEach(async(p) => {\n            const impl = await p;\n\n            if (impl.init) {\n              impl.init(plugin, store);\n            }\n          });\n        }\n      });\n    },\n  });\n}\n"],"mappings":"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","ignoreList":[]}]}