{"remainingRequest":"/home/ubuntu/susecon-2024-ext-demo/node_modules/babel-loader/lib/index.js??ref--16-1!/home/ubuntu/susecon-2024-ext-demo/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/ubuntu/susecon-2024-ext-demo/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/components/nav/NamespaceFilter.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/components/nav/NamespaceFilter.vue","mtime":1725271280091},{"path":"/home/ubuntu/susecon-2024-ext-demo/babel.config.js","mtime":1725268750245},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/babel-loader/lib/index.js","mtime":1725271298942},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1725271300920}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmRlc2NyaXB0aW9uLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZnJvbS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9ycy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5rZXlzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHkiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmZ1bmN0aW9uIF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHIsIGUpIHsgdmFyIHQgPSAidW5kZWZpbmVkIiAhPSB0eXBlb2YgU3ltYm9sICYmIHJbU3ltYm9sLml0ZXJhdG9yXSB8fCByWyJAQGl0ZXJhdG9yIl07IGlmICghdCkgeyBpZiAoQXJyYXkuaXNBcnJheShyKSB8fCAodCA9IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShyKSkgfHwgZSAmJiByICYmICJudW1iZXIiID09IHR5cGVvZiByLmxlbmd0aCkgeyB0ICYmIChyID0gdCk7IHZhciBfbiA9IDAsIEYgPSBmdW5jdGlvbiBGKCkge307IHJldHVybiB7IHM6IEYsIG46IGZ1bmN0aW9uIG4oKSB7IHJldHVybiBfbiA+PSByLmxlbmd0aCA/IHsgZG9uZTogITAgfSA6IHsgZG9uZTogITEsIHZhbHVlOiByW19uKytdIH07IH0sIGU6IGZ1bmN0aW9uIGUocikgeyB0aHJvdyByOyB9LCBmOiBGIH07IH0gdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIGl0ZXJhdGUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLiIpOyB9IHZhciBvLCBhID0gITAsIHUgPSAhMTsgcmV0dXJuIHsgczogZnVuY3Rpb24gcygpIHsgdCA9IHQuY2FsbChyKTsgfSwgbjogZnVuY3Rpb24gbigpIHsgdmFyIHIgPSB0Lm5leHQoKTsgcmV0dXJuIGEgPSByLmRvbmUsIHI7IH0sIGU6IGZ1bmN0aW9uIGUocikgeyB1ID0gITAsIG8gPSByOyB9LCBmOiBmdW5jdGlvbiBmKCkgeyB0cnkgeyBhIHx8IG51bGwgPT0gdC5yZXR1cm4gfHwgdC5yZXR1cm4oKTsgfSBmaW5hbGx5IHsgaWYgKHUpIHRocm93IG87IH0gfSB9OyB9CmZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShyLCBhKSB7IGlmIChyKSB7IGlmICgic3RyaW5nIiA9PSB0eXBlb2YgcikgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KHIsIGEpOyB2YXIgdCA9IHt9LnRvU3RyaW5nLmNhbGwocikuc2xpY2UoOCwgLTEpOyByZXR1cm4gIk9iamVjdCIgPT09IHQgJiYgci5jb25zdHJ1Y3RvciAmJiAodCA9IHIuY29uc3RydWN0b3IubmFtZSksICJNYXAiID09PSB0IHx8ICJTZXQiID09PSB0ID8gQXJyYXkuZnJvbShyKSA6ICJBcmd1bWVudHMiID09PSB0IHx8IC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KHQpID8gX2FycmF5TGlrZVRvQXJyYXkociwgYSkgOiB2b2lkIDA7IH0gfQpmdW5jdGlvbiBfYXJyYXlMaWtlVG9BcnJheShyLCBhKSB7IChudWxsID09IGEgfHwgYSA+IHIubGVuZ3RoKSAmJiAoYSA9IHIubGVuZ3RoKTsgZm9yICh2YXIgZSA9IDAsIG4gPSBBcnJheShhKTsgZSA8IGE7IGUrKykgbltlXSA9IHJbZV07IHJldHVybiBuOyB9CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maW5kLWluZGV4LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNsaWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc3BsaWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5yZXBsYWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnN0YXJ0cy13aXRoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwpmdW5jdGlvbiBvd25LZXlzKGUsIHIpIHsgdmFyIHQgPSBPYmplY3Qua2V5cyhlKTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIG8gPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGUpOyByICYmIChvID0gby5maWx0ZXIoZnVuY3Rpb24gKHIpIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSwgcikuZW51bWVyYWJsZTsgfSkpLCB0LnB1c2guYXBwbHkodCwgbyk7IH0gcmV0dXJuIHQ7IH0KZnVuY3Rpb24gX29iamVjdFNwcmVhZChlKSB7IGZvciAodmFyIHIgPSAxOyByIDwgYXJndW1lbnRzLmxlbmd0aDsgcisrKSB7IHZhciB0ID0gbnVsbCAhPSBhcmd1bWVudHNbcl0gPyBhcmd1bWVudHNbcl0gOiB7fTsgciAlIDIgPyBvd25LZXlzKE9iamVjdCh0KSwgITApLmZvckVhY2goZnVuY3Rpb24gKHIpIHsgX2RlZmluZVByb3BlcnR5KGUsIHIsIHRbcl0pOyB9KSA6IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzID8gT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnModCkpIDogb3duS2V5cyhPYmplY3QodCkpLmZvckVhY2goZnVuY3Rpb24gKHIpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIHIsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCwgcikpOyB9KTsgfSByZXR1cm4gZTsgfQppbXBvcnQgX3JlZ2VuZXJhdG9yUnVudGltZSBmcm9tICIvaG9tZS91YnVudHUvc3VzZWNvbi0yMDI0LWV4dC1kZW1vL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9yZWdlbmVyYXRvci9pbmRleC5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0IHsgbWFwR2V0dGVycyB9IGZyb20gJ3Z1ZXgnOwppbXBvcnQgeyBOQU1FU1BBQ0VfRklMVEVSUywgQUxMX05BTUVTUEFDRVMgfSBmcm9tICdAc2hlbGwvc3RvcmUvcHJlZnMnOwppbXBvcnQgeyBOQU1FU1BBQ0UsIE1BTkFHRU1FTlQgfSBmcm9tICdAc2hlbGwvY29uZmlnL3R5cGVzJzsKaW1wb3J0IHsgc29ydEJ5IH0gZnJvbSAnQHNoZWxsL3V0aWxzL3NvcnQnOwppbXBvcnQgeyBpc0FycmF5LCBhZGRPYmplY3RzLCBmaW5kQnksIGZpbHRlckJ5IH0gZnJvbSAnQHNoZWxsL3V0aWxzL2FycmF5JzsKaW1wb3J0IHsgTkFNRVNQQUNFX0ZJTFRFUl9BTExfVVNFUiBhcyBBTExfVVNFUiwgTkFNRVNQQUNFX0ZJTFRFUl9BTEwgYXMgQUxMLCBOQU1FU1BBQ0VfRklMVEVSX0FMTF9TWVNURU0gYXMgQUxMX1NZU1RFTSwgTkFNRVNQQUNFX0ZJTFRFUl9BTExfT1JQSEFOUyBhcyBBTExfT1JQSEFOUywgTkFNRVNQQUNFX0ZJTFRFUl9OQU1FU1BBQ0VEX1lFUyBhcyBOQU1FU1BBQ0VEX1lFUywgTkFNRVNQQUNFX0ZJTFRFUl9OQU1FU1BBQ0VEX05PIGFzIE5BTUVTUEFDRURfTk8sIGNyZWF0ZU5hbWVzcGFjZUZpbHRlcktleSwgTkFNRVNQQUNFX0ZJTFRFUl9LSU5EUywgTkFNRVNQQUNFX0ZJTFRFUl9OU19GVUxMX1BSRUZJWCwgTkFNRVNQQUNFX0ZJTFRFUl9QX0ZVTExfUFJFRklYIH0gZnJvbSAnQHNoZWxsL3V0aWxzL25hbWVzcGFjZS1maWx0ZXInOwppbXBvcnQgeyBLRVkgfSBmcm9tICdAc2hlbGwvdXRpbHMvcGxhdGZvcm0nOwppbXBvcnQgcEFuZE5GaWx0ZXJpbmcgZnJvbSAnQHNoZWxsL3V0aWxzL3Byb2plY3RBbmROYW1lc3BhY2VGaWx0ZXJpbmcudXRpbHMnOwppbXBvcnQgeyBTRVRUSU5HIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy9zZXR0aW5ncyc7CnZhciBmb3JjZWROYW1lc3BhY2VWYWxpZFR5cGVzID0gW05BTUVTUEFDRV9GSUxURVJfS0lORFMuRElWSURFUiwgTkFNRVNQQUNFX0ZJTFRFUl9LSU5EUy5QUk9KRUNULCBOQU1FU1BBQ0VfRklMVEVSX0tJTkRTLk5BTUVTUEFDRV07CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaXNPcGVuOiBmYWxzZSwKICAgICAgZmlsdGVyOiAnJywKICAgICAgaGlkZGVuOiAwLAogICAgICB0b3RhbDogMCwKICAgICAgYWN0aXZlRWxlbWVudDogbnVsbCwKICAgICAgY2FjaGVkRmlsdGVyZWQ6IFtdLAogICAgICBOQU1FU1BBQ0VfRklMVEVSX0tJTkRTOiBOQU1FU1BBQ0VfRklMVEVSX0tJTkRTLAogICAgICBuYW1lc3BhY2VGaWx0ZXJNb2RlOiB1bmRlZmluZWQKICAgIH07CiAgfSwKICBmZXRjaDogZnVuY3Rpb24gZmV0Y2goKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgcmV0dXJuIF90aGlzLiRzdG9yZS5kaXNwYXRjaCgnbWFuYWdlbWVudC9maW5kJywgewogICAgICAgICAgICAgIHR5cGU6IE1BTkFHRU1FTlQuU0VUVElORywKICAgICAgICAgICAgICBpZDogU0VUVElORy5VSV9QRVJGT1JNQU5DRQogICAgICAgICAgICB9KTsKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgX3RoaXMubmFtZXNwYWNlRmlsdGVyTW9kZSA9IF90aGlzLmNhbGNOYW1lc3BhY2VGaWx0ZXJNb2RlKCk7CiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSk7CiAgICB9KSkoKTsKICB9LAogIGNvbXB1dGVkOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIG1hcEdldHRlcnMoWydjdXJyZW50UHJvZHVjdCddKSksIHt9LCB7CiAgICBoYXNGaWx0ZXI6IGZ1bmN0aW9uIGhhc0ZpbHRlcigpIHsKICAgICAgcmV0dXJuIHRoaXMuZmlsdGVyLmxlbmd0aCA+IDA7CiAgICB9LAogICAgZmlsdGVyZWQ6IGZ1bmN0aW9uIGZpbHRlcmVkKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpcywKICAgICAgICBfb3V0OwogICAgICB2YXIgb3V0ID0gdGhpcy5vcHRpb25zOwogICAgICBvdXQgPSBvdXQuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgdmFyIF90aGlzMiRuYW1lc3BhY2VGaWx0ZTsKICAgICAgICAvLyBGaWx0ZXIgb3V0IGFueXRoaW5nIG5vdCBhcHBsaWNhYmxlIHRvIHNpbmdsZXRvbiBzZWxlY3Rpb24KICAgICAgICBpZiAoKF90aGlzMiRuYW1lc3BhY2VGaWx0ZSA9IF90aGlzMi5uYW1lc3BhY2VGaWx0ZXJNb2RlKSAhPT0gbnVsbCAmJiBfdGhpczIkbmFtZXNwYWNlRmlsdGUgIT09IHZvaWQgMCAmJiBfdGhpczIkbmFtZXNwYWNlRmlsdGUubGVuZ3RoKSB7CiAgICAgICAgICAvLyBXZSBhbHdheXMgc2hvdyBkaXZpZGVycywgcHJvamVjdHMgYW5kIG5hbWVzcGFjZXMKICAgICAgICAgIGlmICghZm9yY2VkTmFtZXNwYWNlVmFsaWRUeXBlcy5pbmNsdWRlcyhpdGVtLmtpbmQpKSB7CiAgICAgICAgICAgIHZhciB2YWxpZEN1c3RvbVR5cGUgPSBfdGhpczIubmFtZXNwYWNlRmlsdGVyTW9kZS5maW5kKGZ1bmN0aW9uIChwcmVmaXgpIHsKICAgICAgICAgICAgICByZXR1cm4gaXRlbS5raW5kLnN0YXJ0c1dpdGgocHJlZml4KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGlmICghdmFsaWRDdXN0b21UeXBlKSB7CiAgICAgICAgICAgICAgLy8gSGlkZSBhbnkgaW52YWxpZCBvcHRpb24gdGhhdCdzIG5vdCBzZWxlY3RlZAogICAgICAgICAgICAgIHJldHVybiBfdGhpczIudmFsdWUuZmluZEluZGV4KGZ1bmN0aW9uICh2KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdi5pZCA9PT0gaXRlbS5pZDsKICAgICAgICAgICAgICB9KSA+PSAwOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvLyBGaWx0ZXIgYnkgdGhlIGN1cnJlbnQgZmlsdGVyCiAgICAgICAgaWYgKF90aGlzMi5oYXNGaWx0ZXIpIHsKICAgICAgICAgIHJldHVybiBpdGVtLmtpbmQgIT09IE5BTUVTUEFDRV9GSUxURVJfS0lORFMuU1BFQ0lBTCAmJiBpdGVtLmxhYmVsLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoX3RoaXMyLmZpbHRlci50b0xvd2VyQ2FzZSgpKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0pOwogICAgICBpZiAoKChfb3V0ID0gb3V0KSA9PT0gbnVsbCB8fCBfb3V0ID09PSB2b2lkIDAgfHwgKF9vdXQgPSBfb3V0WzBdKSA9PT0gbnVsbCB8fCBfb3V0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfb3V0LmtpbmQpID09PSBOQU1FU1BBQ0VfRklMVEVSX0tJTkRTLkRJVklERVIpIHsKICAgICAgICBvdXQuc3BsaWNlKDAsIDEpOwogICAgICB9CiAgICAgIHZhciBtYXBwZWQgPSB0aGlzLnZhbHVlLnJlZHVjZShmdW5jdGlvbiAobSwgdikgewogICAgICAgIG1bdi5pZF0gPSB2OwogICAgICAgIHJldHVybiBtOwogICAgICB9LCB7fSk7CgogICAgICAvLyBNYXJrIGFsbCBvZiB0aGUgc2VsZWN0ZWQgb3B0aW9ucwogICAgICBvdXQuZm9yRWFjaChmdW5jdGlvbiAoaSkgewogICAgICAgIHZhciBfdGhpczIkbmFtZXNwYWNlRmlsdGUyOwogICAgICAgIGkuc2VsZWN0ZWQgPSAhIW1hcHBlZFtpLmlkXSB8fCBpLmlkID09PSBBTEwgJiYgX3RoaXMyLnZhbHVlICYmIF90aGlzMi52YWx1ZS5sZW5ndGggPT09IDA7CiAgICAgICAgaS5lbGVtZW50SWQgPSAoaS5pZCB8fCAnJykucmVwbGFjZSgnOi8vJywgJ18nKTsKICAgICAgICBpLmVuYWJsZWQgPSB0cnVlOwogICAgICAgIC8vIEFyZSB3ZSBpbiByZXN0cmljdGVkIHJlc291cmNlIHR5cGUgbW9kZSwgaWYgc28gaXMgdGhpcyBhbiBhbGxvd2VkIHR5cGU/CiAgICAgICAgaWYgKChfdGhpczIkbmFtZXNwYWNlRmlsdGUyID0gX3RoaXMyLm5hbWVzcGFjZUZpbHRlck1vZGUpICE9PSBudWxsICYmIF90aGlzMiRuYW1lc3BhY2VGaWx0ZTIgIT09IHZvaWQgMCAmJiBfdGhpczIkbmFtZXNwYWNlRmlsdGUyLmxlbmd0aCkgewogICAgICAgICAgdmFyIGlzTGFzdFNlbGVjdGVkID0gaS5zZWxlY3RlZCAmJiAoaS5pZCA9PT0gQUxMIHx8IF90aGlzMi52YWx1ZS5sZW5ndGggPT09IDEpOwogICAgICAgICAgdmFyIGtpbmRBbGxvd2VkID0gX3RoaXMyLm5hbWVzcGFjZUZpbHRlck1vZGUuZmluZChmdW5jdGlvbiAoZikgewogICAgICAgICAgICByZXR1cm4gZiA9PT0gaS5raW5kOwogICAgICAgICAgfSk7CiAgICAgICAgICB2YXIgaXNOb3RJblByb2plY3RHcm91cCA9IGkuaWQgPT09IEFMTF9PUlBIQU5TOwogICAgICAgICAgaS5lbmFibGVkID0gIWlzTGFzdFNlbGVjdGVkICYmIGtpbmRBbGxvd2VkICYmICFpc05vdEluUHJvamVjdEdyb3VwOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHJldHVybiBvdXQ7CiAgICB9LAogICAgdG9vbHRpcDogZnVuY3Rpb24gdG9vbHRpcCgpIHsKICAgICAgaWYgKHRoaXMuaXNPcGVuIHx8IHRoaXMudG90YWwgKyB0aGlzLmhpZGRlbiA9PT0gMCkgewogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CiAgICAgIHZhciB0b29sdGlwID0gJzxkaXYgY2xhc3M9Im5zLWZpbHRlci10b29sdGlwIj4nOwogICAgICAodGhpcy52YWx1ZSB8fCBbXSkuZm9yRWFjaChmdW5jdGlvbiAodikgewogICAgICAgIHRvb2x0aXAgKz0gIjxkaXYgY2xhc3M9XCJucy1maWx0ZXItdG9vbHRpcC1pdGVtXCI+PGRpdj4iLmNvbmNhdCh2LmxhYmVsLCAiPC9kaXY+PC9kaXY+Iik7CiAgICAgIH0pOwogICAgICB0b29sdGlwICs9ICc8L2Rpdj4nOwogICAgICByZXR1cm4gewogICAgICAgIGNvbnRlbnQ6IHRvb2x0aXAsCiAgICAgICAgcGxhY2VtZW50OiAnYm90dG9tJywKICAgICAgICBkZWxheTogewogICAgICAgICAgc2hvdzogNTAwCiAgICAgICAgfQogICAgICB9OwogICAgfSwKICAgIGtleTogZnVuY3Rpb24ga2V5KCkgewogICAgICByZXR1cm4gY3JlYXRlTmFtZXNwYWNlRmlsdGVyS2V5KHRoaXMuJHN0b3JlLmdldHRlcnNbJ2NsdXN0ZXJJZCddLCB0aGlzLmN1cnJlbnRQcm9kdWN0KTsKICAgIH0sCiAgICBvcHRpb25zOiBmdW5jdGlvbiBvcHRpb25zKCkgewogICAgICB2YXIgX3RoaXMkY3VycmVudFByb2R1Y3QsCiAgICAgICAgX3RoaXMkY3VycmVudFByb2R1Y3QyLAogICAgICAgIF90aGlzJGN1cnJlbnRQcm9kdWN0MywKICAgICAgICBfdGhpczMgPSB0aGlzOwogICAgICB2YXIgdCA9IHRoaXMuJHN0b3JlLmdldHRlcnNbJ2kxOG4vdCddOwogICAgICB2YXIgb3V0ID0gW107CiAgICAgIHZhciBwYXJhbXMgPSBfb2JqZWN0U3ByZWFkKHt9LCB0aGlzLiRyb3V0ZS5wYXJhbXMpOwogICAgICB2YXIgcmVzb3VyY2UgPSBwYXJhbXMucmVzb3VyY2U7CiAgICAgIC8vIFNvbWV0aW1lcywgZGlmZmVyZW50IHBhZ2VzIG1heSBoYXZlIGRpZmZlcmVudCBuYW1lc3BhY2VzIHRvIGZpbHRlcgogICAgICB2YXIgbm90RmlsdGVyTmFtZXNwYWNlcyA9IHRoaXMuJHN0b3JlLmdldHRlcnNbInR5cGUtbWFwL29wdGlvbnNGb3IiXShyZXNvdXJjZSkubm90RmlsdGVyTmFtZXNwYWNlIHx8IFtdOwoKICAgICAgLy8gVE9ETzogQWRkIHJldHVybiBpbmZvCiAgICAgIGlmICgoX3RoaXMkY3VycmVudFByb2R1Y3QgPSB0aGlzLmN1cnJlbnRQcm9kdWN0KSAhPT0gbnVsbCAmJiBfdGhpcyRjdXJyZW50UHJvZHVjdCAhPT0gdm9pZCAwICYmIF90aGlzJGN1cnJlbnRQcm9kdWN0LmN1c3RvbU5hbWVzcGFjZUZpbHRlciAmJiAoX3RoaXMkY3VycmVudFByb2R1Y3QyID0gdGhpcy5jdXJyZW50UHJvZHVjdCkgIT09IG51bGwgJiYgX3RoaXMkY3VycmVudFByb2R1Y3QyICE9PSB2b2lkIDAgJiYgX3RoaXMkY3VycmVudFByb2R1Y3QyLmluU3RvcmUpIHsKICAgICAgICAvLyBTb21ldGltZXMgdGhlIGNvbXBvbmVudCBjYW4gc2hvdyBiZWZvcmUgdGhlICdjdXJyZW50UHJvZHVjdCcgaGFzIGNhdWdodCB1cCwgc28gYWNjZXNzIHRoZSBwcm9kdWN0IHZpYSB0aGUgZ2V0dGVyIHJhdGhlcgogICAgICAgIC8vIHRoYW4gY2FjaGluZyBpdCBpbiB0aGUgYGZldGNoYAoKICAgICAgICAvLyBUaGUgbmFtZXNwYWNlIGRpc3BsYXkgb24gdGhlIGxpc3QgYW5kIGVkaXQgcGFnZXMgc2hvdWxkIGJlIHRoZSBzYW1lIGFzIGluIHRoZSBuYW1lc3BhY2VGaWx0ZXIgY29tcG9uZW50CiAgICAgICAgaWYgKHRoaXMuJHN0b3JlLmdldHRlcnNbIiIuY29uY2F0KHRoaXMuY3VycmVudFByb2R1Y3QuaW5TdG9yZSwgIi9maWx0ZXJOYW1lc3BhY2UiKV0pIHsKICAgICAgICAgIHZhciBhbGxOYW1lc3BhY2VzID0gdGhpcy4kc3RvcmUuZ2V0dGVyc1siIi5jb25jYXQodGhpcy5jdXJyZW50UHJvZHVjdC5pblN0b3JlLCAiL2ZpbHRlck5hbWVzcGFjZSIpXShub3RGaWx0ZXJOYW1lc3BhY2VzKTsKICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnY2hhbmdlQWxsTmFtZXNwYWNlcycsIGFsbE5hbWVzcGFjZXMpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gdGhpcy4kc3RvcmUuZ2V0dGVyc1siIi5jb25jYXQodGhpcy5jdXJyZW50UHJvZHVjdC5pblN0b3JlLCAiL25hbWVzcGFjZUZpbHRlck9wdGlvbnMiKV0oewogICAgICAgICAgYWRkTmFtZXNwYWNlOiBhZGROYW1lc3BhY2UsCiAgICAgICAgICBkaXZpZGVyOiBkaXZpZGVyLAogICAgICAgICAgbm90RmlsdGVyTmFtZXNwYWNlczogbm90RmlsdGVyTmFtZXNwYWNlcwogICAgICAgIH0pOwogICAgICB9CgogICAgICAvLyBUT0RPOiBBZGQgcmV0dXJuIGluZm8KICAgICAgaWYgKCEoKF90aGlzJGN1cnJlbnRQcm9kdWN0MyA9IHRoaXMuY3VycmVudFByb2R1Y3QpICE9PSBudWxsICYmIF90aGlzJGN1cnJlbnRQcm9kdWN0MyAhPT0gdm9pZCAwICYmIF90aGlzJGN1cnJlbnRQcm9kdWN0My5oaWRlU3lzdGVtUmVzb3VyY2VzKSkgewogICAgICAgIG91dCA9IFt7CiAgICAgICAgICBpZDogQUxMLAogICAgICAgICAga2luZDogTkFNRVNQQUNFX0ZJTFRFUl9LSU5EUy5TUEVDSUFMLAogICAgICAgICAgbGFiZWw6IHQoJ25hdi5ucy5hbGwnKQogICAgICAgIH0sIHsKICAgICAgICAgIGlkOiBBTExfVVNFUiwKICAgICAgICAgIGtpbmQ6IE5BTUVTUEFDRV9GSUxURVJfS0lORFMuU1BFQ0lBTCwKICAgICAgICAgIGxhYmVsOiB0KCduYXYubnMudXNlcicpCiAgICAgICAgfSwgewogICAgICAgICAgaWQ6IEFMTF9TWVNURU0sCiAgICAgICAgICBraW5kOiBOQU1FU1BBQ0VfRklMVEVSX0tJTkRTLlNQRUNJQUwsCiAgICAgICAgICBsYWJlbDogdCgnbmF2Lm5zLnN5c3RlbScpCiAgICAgICAgfSwgewogICAgICAgICAgaWQ6IE5BTUVTUEFDRURfWUVTLAogICAgICAgICAga2luZDogTkFNRVNQQUNFX0ZJTFRFUl9LSU5EUy5TUEVDSUFMLAogICAgICAgICAgbGFiZWw6IHQoJ25hdi5ucy5uYW1lc3BhY2VkJykKICAgICAgICB9LCB7CiAgICAgICAgICBpZDogTkFNRVNQQUNFRF9OTywKICAgICAgICAgIGtpbmQ6IE5BTUVTUEFDRV9GSUxURVJfS0lORFMuU1BFQ0lBTCwKICAgICAgICAgIGxhYmVsOiB0KCduYXYubnMuY2x1c3RlckxldmVsJykKICAgICAgICB9XTsKICAgICAgICBkaXZpZGVyKG91dCk7CiAgICAgIH0KICAgICAgdmFyIGluU3RvcmUgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzWydjdXJyZW50U3RvcmUnXShOQU1FU1BBQ0UpOwogICAgICBpZiAoIWluU3RvcmUpIHsKICAgICAgICByZXR1cm4gb3V0OwogICAgICB9CiAgICAgIHZhciBuYW1lc3BhY2VzID0gc29ydEJ5KHRoaXMuJHN0b3JlLmdldHRlcnNbIiIuY29uY2F0KGluU3RvcmUsICIvYWxsIildKE5BTUVTUEFDRSksIFsnbmFtZURpc3BsYXknXSk7CiAgICAgIG5hbWVzcGFjZXMgPSB0aGlzLmZpbHRlck5hbWVzcGFjZXMobmFtZXNwYWNlcyk7CgogICAgICAvLyBpc1JhbmNoZXIgPSBtZ210IHNjaGVtYXMgYXJlIGxvYWRlZCBhbmQgdGhlcmUncyBhIHByb2plY3Qgc2NoZW1hCiAgICAgIGlmICh0aGlzLiRzdG9yZS5nZXR0ZXJzWydpc1JhbmNoZXInXSkgewogICAgICAgIHZhciBjbHVzdGVyID0gdGhpcy4kc3RvcmUuZ2V0dGVyc1snY3VycmVudENsdXN0ZXInXTsKICAgICAgICB2YXIgcHJvamVjdHMgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzWydtYW5hZ2VtZW50L2FsbCddKE1BTkFHRU1FTlQuUFJPSkVDVCk7CiAgICAgICAgcHJvamVjdHMgPSBwcm9qZWN0cy5maWx0ZXIoZnVuY3Rpb24gKHApIHsKICAgICAgICAgIHZhciBfdGhpczMkY3VycmVudFByb2R1Y3Q7CiAgICAgICAgICByZXR1cm4gKF90aGlzMyRjdXJyZW50UHJvZHVjdCA9IF90aGlzMy5jdXJyZW50UHJvZHVjdCkgIT09IG51bGwgJiYgX3RoaXMzJGN1cnJlbnRQcm9kdWN0ICE9PSB2b2lkIDAgJiYgX3RoaXMzJGN1cnJlbnRQcm9kdWN0LmhpZGVTeXN0ZW1SZXNvdXJjZXMgPyAhcC5pc1N5c3RlbSAmJiBwLnNwZWMuY2x1c3Rlck5hbWUgPT09IGNsdXN0ZXIuaWQgOiBwLnNwZWMuY2x1c3Rlck5hbWUgPT09IGNsdXN0ZXIuaWQ7CiAgICAgICAgfSk7CiAgICAgICAgcHJvamVjdHMgPSBzb3J0QnkoZmlsdGVyQnkocHJvamVjdHMsICdzcGVjLmNsdXN0ZXJOYW1lJywgY2x1c3Rlci5pZCksIFsnbmFtZURpc3BsYXknXSk7CiAgICAgICAgdmFyIHByb2plY3RzQnlJZCA9IHt9OwogICAgICAgIHZhciBuYW1lc3BhY2VzQnlQcm9qZWN0ID0ge307CiAgICAgICAgdmFyIGZpcnN0UHJvamVjdCA9IHRydWU7CiAgICAgICAgbmFtZXNwYWNlc0J5UHJvamVjdFtudWxsXSA9IFtdOyAvLyBGb3IgbmFtZXNwYWNlcyBub3QgaW4gYSBwcm9qZWN0CiAgICAgICAgdmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHByb2plY3RzKSwKICAgICAgICAgIF9zdGVwOwogICAgICAgIHRyeSB7CiAgICAgICAgICBmb3IgKF9pdGVyYXRvci5zKCk7ICEoX3N0ZXAgPSBfaXRlcmF0b3IubigpKS5kb25lOykgewogICAgICAgICAgICB2YXIgcHJvamVjdCA9IF9zdGVwLnZhbHVlOwogICAgICAgICAgICBwcm9qZWN0c0J5SWRbcHJvamVjdC5tZXRhZGF0YS5uYW1lXSA9IHByb2plY3Q7CiAgICAgICAgICB9CiAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICBfaXRlcmF0b3IuZShlcnIpOwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICBfaXRlcmF0b3IuZigpOwogICAgICAgIH0KICAgICAgICB2YXIgX2l0ZXJhdG9yMiA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKG5hbWVzcGFjZXMpLAogICAgICAgICAgX3N0ZXAyOwogICAgICAgIHRyeSB7CiAgICAgICAgICBmb3IgKF9pdGVyYXRvcjIucygpOyAhKF9zdGVwMiA9IF9pdGVyYXRvcjIubigpKS5kb25lOykgewogICAgICAgICAgICB2YXIgbmFtZXNwYWNlID0gX3N0ZXAyLnZhbHVlOwogICAgICAgICAgICB2YXIgcHJvamVjdElkID0gbmFtZXNwYWNlLnByb2plY3RJZDsKICAgICAgICAgICAgaWYgKCFwcm9qZWN0SWQgfHwgIXByb2plY3RzQnlJZFtwcm9qZWN0SWRdKSB7CiAgICAgICAgICAgICAgLy8gSWYgdGhlcmUncyBhIHByb2plY3RJZCBidXQgdGhhdCBwcm9qZWN0IGRvZXNuJ3QgZXhpc3QsIHRyZWF0IGl0IGxpa2Ugbm8gcHJvamVjdAogICAgICAgICAgICAgIHByb2plY3RJZCA9IG51bGw7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdmFyIGVudHJ5ID0gbmFtZXNwYWNlc0J5UHJvamVjdFtwcm9qZWN0SWRdOwogICAgICAgICAgICBpZiAoIWVudHJ5KSB7CiAgICAgICAgICAgICAgZW50cnkgPSBbXTsKICAgICAgICAgICAgICBuYW1lc3BhY2VzQnlQcm9qZWN0W25hbWVzcGFjZS5wcm9qZWN0SWRdID0gZW50cnk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZW50cnkucHVzaChuYW1lc3BhY2UpOwogICAgICAgICAgfQogICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgX2l0ZXJhdG9yMi5lKGVycik7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgIF9pdGVyYXRvcjIuZigpOwogICAgICAgIH0KICAgICAgICB2YXIgX2l0ZXJhdG9yMyA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHByb2plY3RzKSwKICAgICAgICAgIF9zdGVwMzsKICAgICAgICB0cnkgewogICAgICAgICAgZm9yIChfaXRlcmF0b3IzLnMoKTsgIShfc3RlcDMgPSBfaXRlcmF0b3IzLm4oKSkuZG9uZTspIHsKICAgICAgICAgICAgdmFyIF9wcm9qZWN0ID0gX3N0ZXAzLnZhbHVlOwogICAgICAgICAgICB2YXIgaWQgPSBfcHJvamVjdC5tZXRhZGF0YS5uYW1lOwogICAgICAgICAgICBpZiAoZmlyc3RQcm9qZWN0KSB7CiAgICAgICAgICAgICAgZmlyc3RQcm9qZWN0ID0gZmFsc2U7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgZGl2aWRlcihvdXQpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIG91dC5wdXNoKHsKICAgICAgICAgICAgICBpZDogIiIuY29uY2F0KE5BTUVTUEFDRV9GSUxURVJfUF9GVUxMX1BSRUZJWCkuY29uY2F0KGlkKSwKICAgICAgICAgICAgICBraW5kOiBOQU1FU1BBQ0VfRklMVEVSX0tJTkRTLlBST0pFQ1QsCiAgICAgICAgICAgICAgbGFiZWw6IHQoJ25hdi5ucy5wcm9qZWN0JywgewogICAgICAgICAgICAgICAgbmFtZTogX3Byb2plY3QubmFtZURpc3BsYXkKICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdmFyIGZvclRoaXNQcm9qZWN0ID0gbmFtZXNwYWNlc0J5UHJvamVjdFtpZF0gfHwgW107CiAgICAgICAgICAgIGFkZE5hbWVzcGFjZShvdXQsIGZvclRoaXNQcm9qZWN0KTsKICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgIF9pdGVyYXRvcjMuZShlcnIpOwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICBfaXRlcmF0b3IzLmYoKTsKICAgICAgICB9CiAgICAgICAgdmFyIG9ycGhhbnMgPSBuYW1lc3BhY2VzQnlQcm9qZWN0W251bGxdOwogICAgICAgIGlmIChvcnBoYW5zLmxlbmd0aCkgewogICAgICAgICAgaWYgKCFmaXJzdFByb2plY3QpIHsKICAgICAgICAgICAgZGl2aWRlcihvdXQpOwogICAgICAgICAgfQogICAgICAgICAgb3V0LnB1c2goewogICAgICAgICAgICBpZDogQUxMX09SUEhBTlMsCiAgICAgICAgICAgIGtpbmQ6IE5BTUVTUEFDRV9GSUxURVJfS0lORFMuUFJPSkVDVCwKICAgICAgICAgICAgbGFiZWw6IHQoJ25hdi5ucy5vcnBoYW4nKSwKICAgICAgICAgICAgZGlzYWJsZWQ6IHRydWUKICAgICAgICAgIH0pOwogICAgICAgICAgYWRkTmFtZXNwYWNlKG91dCwgb3JwaGFucyk7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGFkZE5hbWVzcGFjZShvdXQsIG5hbWVzcGFjZXMpOwogICAgICB9CiAgICAgIHJldHVybiBvdXQ7CiAgICAgIGZ1bmN0aW9uIGFkZE5hbWVzcGFjZShvdXQsIG5hbWVzcGFjZXMpIHsKICAgICAgICBpZiAoIWlzQXJyYXkobmFtZXNwYWNlcykpIHsKICAgICAgICAgIG5hbWVzcGFjZXMgPSBbbmFtZXNwYWNlc107CiAgICAgICAgfQogICAgICAgIGFkZE9iamVjdHMob3V0LCBuYW1lc3BhY2VzLm1hcChmdW5jdGlvbiAobmFtZXNwYWNlKSB7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICBpZDogIiIuY29uY2F0KE5BTUVTUEFDRV9GSUxURVJfTlNfRlVMTF9QUkVGSVgpLmNvbmNhdChuYW1lc3BhY2UuaWQpLAogICAgICAgICAgICBraW5kOiBOQU1FU1BBQ0VfRklMVEVSX0tJTkRTLk5BTUVTUEFDRSwKICAgICAgICAgICAgbGFiZWw6IHQoJ25hdi5ucy5uYW1lc3BhY2UnLCB7CiAgICAgICAgICAgICAgbmFtZTogbmFtZXNwYWNlLm5hbWVEaXNwbGF5CiAgICAgICAgICAgIH0pCiAgICAgICAgICB9OwogICAgICAgIH0pKTsKICAgICAgfQogICAgICBmdW5jdGlvbiBkaXZpZGVyKG91dCkgewogICAgICAgIG91dC5wdXNoKHsKICAgICAgICAgIGtpbmQ6IE5BTUVTUEFDRV9GSUxURVJfS0lORFMuRElWSURFUiwKICAgICAgICAgIGxhYmVsOiAiRGl2aWRlciAiLmNvbmNhdChvdXQubGVuZ3RoKSwKICAgICAgICAgIGRpc2FibGVkOiB0cnVlCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBpc1NpbmdsZVNwZWNpYWw6IGZ1bmN0aW9uIGlzU2luZ2xlU3BlY2lhbCgpIHsKICAgICAgcmV0dXJuIHRoaXMudmFsdWUgJiYgdGhpcy52YWx1ZS5sZW5ndGggPT09IDEgJiYgdGhpcy52YWx1ZVswXS5raW5kID09PSBOQU1FU1BBQ0VfRklMVEVSX0tJTkRTLlNQRUNJQUw7CiAgICB9LAogICAgdmFsdWU6IHsKICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgICAgLy8gVXNlIGxhc3QgcGlja2VkIGZpbHRlciBmcm9tIHVzZXIgcHJlZmVyZW5jZXMKICAgICAgICB2YXIgcHJlZnMgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzWydwcmVmcy9nZXQnXShOQU1FU1BBQ0VfRklMVEVSUyk7CiAgICAgICAgdmFyIHZhbHVlcyA9IHByZWZzICYmIHByZWZzW3RoaXMua2V5XSA/IHByZWZzW3RoaXMua2V5XSA6IHRoaXMuZGVmYXVsdE9wdGlvbigpOwogICAgICAgIHZhciBvcHRpb25zID0gdGhpcy5vcHRpb25zOwoKICAgICAgICAvLyBSZW1vdmUgdmFsdWVzIHRoYXQgYXJlIG5vdCB2YWxpZCBvcHRpb25zCiAgICAgICAgdmFyIGZpbHRlcnMgPSB2YWx1ZXMubWFwKGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgICAgcmV0dXJuIGZpbmRCeShvcHRpb25zLCAnaWQnLCB2YWx1ZSk7CiAgICAgICAgfSkuZmlsdGVyKGZ1bmN0aW9uICh4KSB7CiAgICAgICAgICByZXR1cm4gISF4OwogICAgICAgIH0pOwogICAgICAgIHJldHVybiBmaWx0ZXJzOwogICAgICB9LAogICAgICBzZXQ6IGZ1bmN0aW9uIHNldChuZXUpIHsKICAgICAgICB2YXIgX3RoaXM0ID0gdGhpczsKICAgICAgICB2YXIgb2xkID0gKHRoaXMudmFsdWUgfHwgW10pLnNsaWNlKCk7CiAgICAgICAgbmV1ID0gbmV1LmZpbHRlcihmdW5jdGlvbiAoeCkgewogICAgICAgICAgcmV0dXJuICEheC5pZDsKICAgICAgICB9KTsKICAgICAgICB2YXIgbGFzdCA9IG5ldVtuZXUubGVuZ3RoIC0gMV07CiAgICAgICAgdmFyIGxhc3RJc1NwZWNpYWwgPSAobGFzdCA9PT0gbnVsbCB8fCBsYXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBsYXN0LmtpbmQpID09PSBOQU1FU1BBQ0VfRklMVEVSX0tJTkRTLlNQRUNJQUw7CiAgICAgICAgdmFyIGhhZFVzZXIgPSAhIW9sZC5maW5kKGZ1bmN0aW9uICh4KSB7CiAgICAgICAgICByZXR1cm4geC5pZCA9PT0gQUxMX1VTRVI7CiAgICAgICAgfSk7CiAgICAgICAgdmFyIGhhZEFsbCA9ICEhb2xkLmZpbmQoZnVuY3Rpb24gKHgpIHsKICAgICAgICAgIHJldHVybiB4LmlkID09PSBBTEw7CiAgICAgICAgfSk7CiAgICAgICAgaWYgKGxhc3RJc1NwZWNpYWwpIHsKICAgICAgICAgIG5ldSA9IFtsYXN0XTsKICAgICAgICB9CiAgICAgICAgaWYgKG5ldS5sZW5ndGggPiAxKSB7CiAgICAgICAgICBuZXUgPSBuZXUuZmlsdGVyKGZ1bmN0aW9uICh4KSB7CiAgICAgICAgICAgIHJldHVybiB4LmtpbmQgIT09IE5BTUVTUEFDRV9GSUxURVJfS0lORFMuU1BFQ0lBTDsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICBpZiAobmV1LmZpbmQoZnVuY3Rpb24gKHgpIHsKICAgICAgICAgIHJldHVybiB4LmlkID09PSAnYWxsJzsKICAgICAgICB9KSkgewogICAgICAgICAgbmV1ID0gW107CiAgICAgICAgfQogICAgICAgIHZhciBpZHM7CgogICAgICAgIC8vIElmIHRoZXJlIHdhcyBzb21ldGhpbmcgc2VsZWN0ZWQgYW5kIHlvdSByZW1vdmUgaXQsIGdvIGJhY2sgdG8gdXNlciBieSBkZWZhdWx0CiAgICAgICAgLy8gVW5sZXNzIGl0IHdhcyB1c2VyIG9yIGFsbAogICAgICAgIGlmIChuZXUubGVuZ3RoID09PSAwICYmICFoYWRVc2VyICYmICFoYWRBbGwpIHsKICAgICAgICAgIGlkcyA9IHRoaXMuZGVmYXVsdE9wdGlvbigpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpZHMgPSBuZXUubWFwKGZ1bmN0aW9uICh4KSB7CiAgICAgICAgICAgIHJldHVybiB4LmlkOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIF90aGlzNC4kc3RvcmUuZGlzcGF0Y2goJ3N3aXRjaE5hbWVzcGFjZXMnLCB7CiAgICAgICAgICAgIGlkczogaWRzLAogICAgICAgICAgICBrZXk6IF90aGlzNC5rZXkKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfSksCiAgYmVmb3JlRGVzdHJveTogZnVuY3Rpb24gYmVmb3JlRGVzdHJveSgpIHsKICAgIHRoaXMucmVtb3ZlQ2xvc2VLZXlIYW5kbGVyKCk7CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy5sYXlvdXQoKTsKICB9LAogIHdhdGNoOiB7CiAgICB2YWx1ZTogZnVuY3Rpb24gdmFsdWUobmV1KSB7CiAgICAgIHRoaXMubGF5b3V0KCk7CiAgICB9LAogICAgLyoqCiAgICAgKiBXaGVuIHRoZXJlIGFyZSB0aG91c2FuZHMgb2YgZW50cmllcyBjZXJ0YWluIGFjdGlvbnMgKGRyb3AgZG93biBvcGVuZWQsIHNlbGVjdGlvbiBjaGFuZ2VkLCBldGMpIHRha2UgYSBsb25nIHRpbWUgdG8gY29tcGxldGUgKHVwd2FyZHMKICAgICAqIG9mIDUgc2Vjb25kcykKICAgICAqCiAgICAgKiBUaGlzIGlzIGNhdXNlZCBieSBjaHVybiBvZiB0aGUgZmlsdGVyZWQgYW5kIG9wdGlvbnMgY29tcHV0ZWQgcHJvcGVydGllcyBjYXVzaW5nIG11bHRpcGxlIHJlbmRlcnMgZm9yIGVhY2ggYWN0aW9uLgogICAgICoKICAgICAqIFRvIGJyZWFrIHRoaXMgbXVsdGlwbGUtcmVuZGVyIHBlciBjeWNsZSBiZWhhdmlvdXIgZGV0YXRjaCBgZmlsdGVyZWRgIGZyb20gdGhlIHZhbHVlIHVzZWQgaW4gYHYtZm9yYC4KICAgICAqCiAgICAgKi8KICAgIGZpbHRlcmVkOiBmdW5jdGlvbiBmaWx0ZXJlZChuZXUpIHsKICAgICAgaWYgKCEhbmV1KSB7CiAgICAgICAgdGhpcy5jYWNoZWRGaWx0ZXJlZCA9IG5ldTsKICAgICAgfQogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgZmlsdGVyTmFtZXNwYWNlczogZnVuY3Rpb24gZmlsdGVyTmFtZXNwYWNlcyhuYW1lc3BhY2VzKSB7CiAgICAgIGlmICh0aGlzLiRzdG9yZS5nZXR0ZXJzWydwcmVmcy9nZXQnXShBTExfTkFNRVNQQUNFUykpIHsKICAgICAgICAvLyBJZiBhbGwgbmFtZXNwYWNlcyBvcHRpb25zIGFyZSB0dXJuZWQgb24gaW4gdGhlIHVzZXIgcHJlZmVyZW5jZXMsCiAgICAgICAgLy8gcmV0dXJuIGFsbCBuYW1lc3BhY2VzIGluY2x1ZGluZyBzeXN0ZW0gbmFtZXNwYWNlcyBhbmQgUkJBQwogICAgICAgIC8vIG1hbmFnZW1lbnQgbmFtZXNwYWNlcy4KICAgICAgICByZXR1cm4gbmFtZXNwYWNlczsKICAgICAgfQogICAgICByZXR1cm4gbmFtZXNwYWNlcy5maWx0ZXIoZnVuY3Rpb24gKG5hbWVzcGFjZSkgewogICAgICAgIC8vIE90aGVyd2lzZSBvbmx5IGZpbHRlciBvdXQgb2JzY3VyZSBuYW1lc3BhY2VzLCBzdWNoIGFzIG5hbWVzcGFjZXMKICAgICAgICAvLyB0aGF0IFJhbmNoZXIgdXNlcyB0byBtYW5hZ2UgUkJBQyBmb3IgcHJvamVjdHMsIHdoaWNoIHNob3VsZCBub3QgYmUKICAgICAgICAvLyBlZGl0ZWQgb3IgZGVsZXRlZCBieSBSYW5jaGVyIHVzZXJzLgogICAgICAgIHJldHVybiAhbmFtZXNwYWNlLmlzT2JzY3VyZTsKICAgICAgfSk7CiAgICB9LAogICAgLy8gTGF5b3V0IHRoZSBjb250ZW50IGluIHRoZSBkcm9wZG93biBib3ggdG8gYmVzdCB1c2UgdGhlIHNwYWNlIHRvIHNob3cgdGhlIHNlbGVjdGlvbgogICAgbGF5b3V0OiBmdW5jdGlvbiBsYXlvdXQoKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwogICAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgLy8gT25lIHdlIGhhdmUgcmUtcmVuZGVyZWQsIHNlZSB3aGF0IHdlIGNhbiBmaXQgaW4gdGhlIGNvbnRyb2wgdG8gc2hvdyB0aGUgc2VsZWN0ZWQgbmFtZXNwYWNlcwogICAgICAgIGlmIChfdGhpczUuJHJlZnMudmFsdWVzKSB7CiAgICAgICAgICB2YXIgY29udGFpbmVyID0gX3RoaXM1LiRyZWZzLnZhbHVlczsKICAgICAgICAgIHZhciBvdmVyZmxvdyA9IGNvbnRhaW5lci5zY3JvbGxXaWR0aCA+IGNvbnRhaW5lci5vZmZzZXRXaWR0aDsKICAgICAgICAgIHZhciBoaWRkZW4gPSAwOwogICAgICAgICAgdmFyIGRyb3Bkb3duID0gX3RoaXM1LiRyZWZzLmRyb3Bkb3duOwogICAgICAgICAgLy8gUmVtb3ZlIHBhZGRpbmcgYW5kIGRyb3Bkb3duIGFycm93IHNpemUKICAgICAgICAgIHZhciBtYXhXaWR0aCA9IGRyb3Bkb3duLm9mZnNldFdpZHRoIC0gMjAgLSAyNDsKCiAgICAgICAgICAvLyBJZiB3ZSBhcmUgb3ZlcmZsb3dpbmcsIHRoZW4gYWxsb3cgc29tZSBzcGFjZSBmb3IgdGhlICtOIGluZGljYXRvcgogICAgICAgICAgdmFyIGl0ZW1Db3VudCA9IF90aGlzNS4kcmVmcy52YWx1ZSA/IF90aGlzNS4kcmVmcy52YWx1ZS5sZW5ndGggOiAwOwogICAgICAgICAgdmFyIGN1cnJlbnRXaWR0aCA9IDA7CiAgICAgICAgICB2YXIgc2hvdyA9IHRydWU7CiAgICAgICAgICBfdGhpczUudG90YWwgPSAwOwogICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpdGVtQ291bnQ7IGkrKykgewogICAgICAgICAgICB2YXIgaXRlbSA9IF90aGlzNS4kcmVmcy52YWx1ZVtpXTsKICAgICAgICAgICAgdmFyIGl0ZW1XaWR0aCA9IGl0ZW0ub2Zmc2V0V2lkdGggKyAxMDsKCiAgICAgICAgICAgIC8vIElmIHRoaXMgaXMgdGhlIGZpcnN0IGl0ZW0gYW5kIHdlIGhhdmUgb3ZlcmZsb3cgdGhlbiBhZGQgb24gc29tZSBzcGFjZSBmb3IgdGhlICtOCiAgICAgICAgICAgIGlmIChpID09PSAwICYmIG92ZXJmbG93KSB7CiAgICAgICAgICAgICAgaXRlbVdpZHRoICs9IDQwOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGN1cnJlbnRXaWR0aCArPSBpdGVtV2lkdGg7CiAgICAgICAgICAgIGlmIChzaG93KSB7CiAgICAgICAgICAgICAgaWYgKGkgPT09IDApIHsKICAgICAgICAgICAgICAgIC8vIENhbid0IGV2ZW4gZml0IHRoZSBmaXJzdCBpdGVtIGluCiAgICAgICAgICAgICAgICBpZiAoaXRlbVdpZHRoID4gbWF4V2lkdGgpIHsKICAgICAgICAgICAgICAgICAgc2hvdyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICBfdGhpczUudG90YWwgPSBfdGhpczUudmFsdWUubGVuZ3RoOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBzaG93ID0gY3VycmVudFdpZHRoIDwgbWF4V2lkdGg7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGhpZGRlbiArPSBzaG93ID8gMCA6IDE7CiAgICAgICAgICAgIGl0ZW0uc3R5bGUudmlzaWJpbGl0eSA9IHNob3cgPyAndmlzaWJsZScgOiAnaGlkZGVuJzsKICAgICAgICAgIH0KICAgICAgICAgIF90aGlzNS5oaWRkZW4gPSBfdGhpczUudG90YWwgPiAwID8gMCA6IGhpZGRlbjsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGFkZENsb3NlS2V5SGFuZGxlcjogZnVuY3Rpb24gYWRkQ2xvc2VLZXlIYW5kbGVyKCkgewogICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIHRoaXMuY2xvc2VLZXlIYW5kbGVyKTsKICAgIH0sCiAgICByZW1vdmVDbG9zZUtleUhhbmRsZXI6IGZ1bmN0aW9uIHJlbW92ZUNsb3NlS2V5SGFuZGxlcigpIHsKICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5dXAnLCB0aGlzLmNsb3NlS2V5SGFuZGxlcik7CiAgICB9LAogICAgY2xvc2VLZXlIYW5kbGVyOiBmdW5jdGlvbiBjbG9zZUtleUhhbmRsZXIoZSkgewogICAgICBpZiAoZS5rZXlDb2RlID09PSBLRVkuRVNDQVBFKSB7CiAgICAgICAgdGhpcy5jbG9zZSgpOwogICAgICB9CiAgICB9LAogICAgLy8gS2V5Ym9hcmQgc3VwcG9ydAogICAgaXRlbUtleUhhbmRsZXI6IGZ1bmN0aW9uIGl0ZW1LZXlIYW5kbGVyKGUsIG9wdCkgewogICAgICBpZiAoZS5rZXlDb2RlID09PSBLRVkuRE9XTikgewogICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgIHRoaXMuZG93bigpOwogICAgICB9IGVsc2UgaWYgKGUua2V5Q29kZSA9PT0gS0VZLlVQKSB7CiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgdGhpcy51cCgpOwogICAgICB9IGVsc2UgaWYgKGUua2V5Q29kZSA9PT0gS0VZLlNQQUNFIHx8IGUua2V5Q29kZSA9PT0gS0VZLkNSKSB7CiAgICAgICAgaWYgKHRoaXMubmFtZXNwYWNlRmlsdGVyTW9kZSAmJiAhb3B0LmVuYWJsZWQpIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgdGhpcy5zZWxlY3RPcHRpb24ob3B0KTsKICAgICAgICBlLnRhcmdldC5mb2N1cygpOwogICAgICB9CiAgICB9LAogICAgaW5wdXRLZXlIYW5kbGVyOiBmdW5jdGlvbiBpbnB1dEtleUhhbmRsZXIoZSkgewogICAgICBzd2l0Y2ggKGUua2V5Q29kZSkgewogICAgICAgIGNhc2UgS0VZLkRPV046CiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgdGhpcy5kb3duKHRydWUpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSBLRVkuVEFCOgogICAgICAgICAgLy8gVGFiIG91dCBvZiB0aGUgaW5wdXQgYm94CiAgICAgICAgICB0aGlzLmNsb3NlKCk7CiAgICAgICAgICBlLnRhcmdldC5ibHVyKCk7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlIEtFWS5DUjoKICAgICAgICAgIGlmICh0aGlzLmZpbHRlcmVkLmxlbmd0aCA9PT0gMSkgewogICAgICAgICAgICB0aGlzLnNlbGVjdE9wdGlvbih0aGlzLmZpbHRlcmVkWzBdKTsKICAgICAgICAgICAgdGhpcy5maWx0ZXIgPSAnJzsKICAgICAgICAgIH0KICAgICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9LAogICAgbW91c2VPdmVyOiBmdW5jdGlvbiBtb3VzZU92ZXIoZXZlbnQpIHsKICAgICAgdmFyIF9ldmVudCRwYXRoOwogICAgICB2YXIgZWwgPSBldmVudCA9PT0gbnVsbCB8fCBldmVudCA9PT0gdm9pZCAwIHx8IChfZXZlbnQkcGF0aCA9IGV2ZW50LnBhdGgpID09PSBudWxsIHx8IF9ldmVudCRwYXRoID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZXZlbnQkcGF0aC5maW5kKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgcmV0dXJuIGUuY2xhc3NMaXN0LmNvbnRhaW5zKCducy1vcHRpb24nKTsKICAgICAgfSk7CiAgICAgIHRoaXMuYWN0aXZlRWxlbWVudCA9IGVsOwogICAgfSwKICAgIHNldEFjdGl2ZUVsZW1lbnQ6IGZ1bmN0aW9uIHNldEFjdGl2ZUVsZW1lbnQoZWwpIHsKICAgICAgaWYgKCEoZWwgIT09IG51bGwgJiYgZWwgIT09IHZvaWQgMCAmJiBlbC5mb2N1cykpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgZWwuZm9jdXMoKTsKICAgICAgdGhpcy5hY3RpdmVFbGVtZW50ID0gbnVsbDsKICAgIH0sCiAgICBkb3duOiBmdW5jdGlvbiBkb3duKGlucHV0KSB7CiAgICAgIHZhciBleGlzaW5nID0gdGhpcy5hY3RpdmVFbGVtZW50IHx8IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7CgogICAgICAvLyBGb2N1cyB0aGUgZmlyc3QgZWxlbWVudCBpbiB0aGUgbGlzdAogICAgICBpZiAoaW5wdXQgfHwgIWV4aXNpbmcpIHsKICAgICAgICBpZiAodGhpcy4kcmVmcy5vcHRpb25zKSB7CiAgICAgICAgICB2YXIgYyA9IHRoaXMuJHJlZnMub3B0aW9ucy5jaGlsZHJlbjsKICAgICAgICAgIGlmIChjICYmIGMubGVuZ3RoID4gMCkgewogICAgICAgICAgICB0aGlzLnNldEFjdGl2ZUVsZW1lbnQoY1swXSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHZhciBfbmV4dCwgX25leHQyOwogICAgICAgIHZhciBuZXh0ID0gZXhpc2luZy5uZXh0U2libGluZzsKICAgICAgICBpZiAoKF9uZXh0ID0gbmV4dCkgIT09IG51bGwgJiYgX25leHQgIT09IHZvaWQgMCAmJiAoX25leHQgPSBfbmV4dC5jaGlsZHJlbikgIT09IG51bGwgJiYgX25leHQgIT09IHZvaWQgMCAmJiBfbmV4dC5sZW5ndGgpIHsKICAgICAgICAgIHZhciBpdGVtID0gbmV4dC5jaGlsZHJlblswXTsKCiAgICAgICAgICAvLyBTa2lwIG92ZXIgZGl2aWRlcnMgKGFzc3VtZXMgd2UgZG9uJ3QgaGF2ZSB0d28gZGl2aWRlcnMgbmV4dCB0byBlYWNoIG90aGVyKQogICAgICAgICAgaWYgKGl0ZW0uY2xhc3NMaXN0LmNvbnRhaW5zKCducy1kaXZpZGVyJykpIHsKICAgICAgICAgICAgbmV4dCA9IG5leHQubmV4dFNpYmxpbmc7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmICgoX25leHQyID0gbmV4dCkgIT09IG51bGwgJiYgX25leHQyICE9PSB2b2lkIDAgJiYgX25leHQyLmZvY3VzKSB7CiAgICAgICAgICB0aGlzLnNldEFjdGl2ZUVsZW1lbnQobmV4dCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgdXA6IGZ1bmN0aW9uIHVwKCkgewogICAgICBpZiAoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCkgewogICAgICAgIHZhciBfcHJldiwgX3ByZXYyOwogICAgICAgIHZhciBwcmV2ID0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudC5wcmV2aW91c1NpYmxpbmc7CiAgICAgICAgaWYgKChfcHJldiA9IHByZXYpICE9PSBudWxsICYmIF9wcmV2ICE9PSB2b2lkIDAgJiYgKF9wcmV2ID0gX3ByZXYuY2hpbGRyZW4pICE9PSBudWxsICYmIF9wcmV2ICE9PSB2b2lkIDAgJiYgX3ByZXYubGVuZ3RoKSB7CiAgICAgICAgICB2YXIgaXRlbSA9IHByZXYuY2hpbGRyZW5bMF07CiAgICAgICAgICBpZiAoaXRlbS5jbGFzc0xpc3QuY29udGFpbnMoJ25zLWRpdmlkZXInKSkgewogICAgICAgICAgICBwcmV2ID0gcHJldi5wcmV2aW91c1NpYmxpbmc7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmICgoX3ByZXYyID0gcHJldikgIT09IG51bGwgJiYgX3ByZXYyICE9PSB2b2lkIDAgJiYgX3ByZXYyLmZvY3VzKSB7CiAgICAgICAgICB0aGlzLnNldEFjdGl2ZUVsZW1lbnQocHJldik7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgdG9nZ2xlOiBmdW5jdGlvbiB0b2dnbGUoKSB7CiAgICAgIGlmICh0aGlzLmlzT3BlbikgewogICAgICAgIHRoaXMuY2xvc2UoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLm9wZW4oKTsKICAgICAgfQogICAgfSwKICAgIG9wZW46IGZ1bmN0aW9uIG9wZW4oKSB7CiAgICAgIHZhciBfdGhpczYgPSB0aGlzOwogICAgICB0aGlzLmlzT3BlbiA9IHRydWU7CiAgICAgIHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczYuJHJlZnMuZmlsdGVyLmZvY3VzKCk7CiAgICAgIH0pOwogICAgICB0aGlzLmFkZENsb3NlS2V5SGFuZGxlcigpOwogICAgICB0aGlzLmxheW91dCgpOwogICAgfSwKICAgIGNsb3NlOiBmdW5jdGlvbiBjbG9zZSgpIHsKICAgICAgdGhpcy5pc09wZW4gPSBmYWxzZTsKICAgICAgdGhpcy5hY3RpdmVFbGVtZW50ID0gbnVsbDsKICAgICAgdGhpcy5yZW1vdmVDbG9zZUtleUhhbmRsZXIoKTsKICAgICAgdGhpcy5sYXlvdXQoKTsKICAgIH0sCiAgICBjbGVhcjogZnVuY3Rpb24gY2xlYXIoKSB7CiAgICAgIHRoaXMudmFsdWUgPSBbXTsKICAgIH0sCiAgICBzZWxlY3RPcHRpb246IGZ1bmN0aW9uIHNlbGVjdE9wdGlvbihvcHRpb24pIHsKICAgICAgdmFyIF90aGlzJG5hbWVzcGFjZUZpbHRlciwKICAgICAgICBfdGhpczcgPSB0aGlzOwogICAgICAvLyBJZ25vcmUgY2xpY2sgZm9yIGEgZGl2aWRlcgogICAgICBpZiAob3B0aW9uLmtpbmQgPT09IE5BTUVTUEFDRV9GSUxURVJfS0lORFMuRElWSURFUikgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB2YXIgY3VycmVudCA9IHRoaXMudmFsdWU7CgogICAgICAvLyBSZW1vdmUgaW52YWxpZAogICAgICBpZiAoISEoKF90aGlzJG5hbWVzcGFjZUZpbHRlciA9IHRoaXMubmFtZXNwYWNlRmlsdGVyTW9kZSkgIT09IG51bGwgJiYgX3RoaXMkbmFtZXNwYWNlRmlsdGVyICE9PSB2b2lkIDAgJiYgX3RoaXMkbmFtZXNwYWNlRmlsdGVyLmxlbmd0aCkpIHsKICAgICAgICB0aGlzLnZhbHVlLmZvckVhY2goZnVuY3Rpb24gKHYpIHsKICAgICAgICAgIGlmICghX3RoaXM3Lm5hbWVzcGFjZUZpbHRlck1vZGUuZmluZChmdW5jdGlvbiAoZikgewogICAgICAgICAgICByZXR1cm4gZiA9PT0gdi5raW5kOwogICAgICAgICAgfSkpIHsKICAgICAgICAgICAgdmFyIGluZGV4ID0gY3VycmVudC5maW5kSW5kZXgoZnVuY3Rpb24gKGMpIHsKICAgICAgICAgICAgICByZXR1cm4gYy5pZCA9PT0gdi5pZDsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGN1cnJlbnQuc3BsaWNlKGluZGV4LCAxKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgICB2YXIgZXhpc3RzID0gY3VycmVudC5maW5kSW5kZXgoZnVuY3Rpb24gKHYpIHsKICAgICAgICByZXR1cm4gdi5pZCA9PT0gb3B0aW9uLmlkOwogICAgICB9KTsKCiAgICAgIC8vIFJlbW92ZSBpZiBpdCBleGlzdHMgKG9yIGFsd2F5cyBhZGQgaWYgaW4gc2luZ2xldG9uIG1vZGUgLSB3ZSd2ZSByZXNldCB0aGUgbGlzdCBhYm92ZSkKICAgICAgaWYgKGV4aXN0cyAhPT0gLTEpIHsKICAgICAgICBjdXJyZW50LnNwbGljZShleGlzdHMsIDEpOwogICAgICB9IGVsc2UgewogICAgICAgIGN1cnJlbnQucHVzaChvcHRpb24pOwogICAgICB9CiAgICAgIHRoaXMudmFsdWUgPSBjdXJyZW50OwogICAgICBpZiAoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCkgewogICAgICAgIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQuYmx1cigpOwogICAgICB9CiAgICB9LAogICAgaGFuZGxlVmFsdWVNb3VzZURvd246IGZ1bmN0aW9uIGhhbmRsZVZhbHVlTW91c2VEb3duKG5zLCBldmVudCkgewogICAgICB0aGlzLnJlbW92ZU9wdGlvbihucywgZXZlbnQpOwogICAgICBpZiAodGhpcy52YWx1ZS5sZW5ndGggPT09IDApIHsKICAgICAgICB0aGlzLm9wZW4oKTsKICAgICAgfQogICAgfSwKICAgIHJlbW92ZU9wdGlvbjogZnVuY3Rpb24gcmVtb3ZlT3B0aW9uKG5zLCBldmVudCkgewogICAgICB0aGlzLnNlbGVjdE9wdGlvbihucyk7CiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOwogICAgfSwKICAgIGRlZmF1bHRPcHRpb246IGZ1bmN0aW9uIGRlZmF1bHRPcHRpb24oKSB7CiAgICAgIHZhciBfdGhpcyRjdXJyZW50UHJvZHVjdDQ7CiAgICAgIC8vIE5vdGUgLSBUaGlzIGlzIG9uZSBwbGFjZSB3aGVyZSBhIGRlZmF1bHQgbnMvcHJvamVjdCBmaWx0ZXIgdmFsdWUgaXMgcHJvdmlkZWQgKEFMTF9VU0VSKQogICAgICAvLyBUaGVyZSdzIGFsc28uLgogICAgICAvLyAtIGRhc2hib2FyZCByb290IHN0b3JlIGBsb2FkQ2x1c3RlcmAgLS0+IHdoZW4gYHVwZGF0ZU5hbWVzcGFjZXNgIGlzIGRpc3BhdGNoZWQKICAgICAgLy8gLSBoYXJ2ZXN0ZXIgcm9vdCBzdG9yZSBgbG9hZENsdXN0ZXJgIC0tPiB3aGVuIGB1cGRhdGVOYW1lc3BhY2VzYCBpcyBkaXNwYXRjaGVkIChjYW4gYmUgZGlzY2FyZGVkKQogICAgICAvLyBEdWUgdG8gdGhpcywgd2UgY2FuJ3QgcmVhbGx5IHNldCBhIG5pY2VyIGRlZmF1bHQgd2hlbiBmb3JjZWQgbnMvcHJvamVjdCBmaWx0ZXJpbmcgaXMgb24gKEFMTF9VU0VSIGlzIGludmFsaWQpCiAgICAgIGlmICgoX3RoaXMkY3VycmVudFByb2R1Y3Q0ID0gdGhpcy5jdXJyZW50UHJvZHVjdCkgIT09IG51bGwgJiYgX3RoaXMkY3VycmVudFByb2R1Y3Q0ICE9PSB2b2lkIDAgJiYgX3RoaXMkY3VycmVudFByb2R1Y3Q0LmN1c3RvbU5hbWVzcGFjZUZpbHRlcikgewogICAgICAgIHJldHVybiBbXTsKICAgICAgfQogICAgICByZXR1cm4gW0FMTF9VU0VSXTsKICAgIH0sCiAgICBjYWxjTmFtZXNwYWNlRmlsdGVyTW9kZTogZnVuY3Rpb24gY2FsY05hbWVzcGFjZUZpbHRlck1vZGUoKSB7CiAgICAgIGlmIChwQW5kTkZpbHRlcmluZy5pc0VuYWJsZWQodGhpcy4kc3RvcmUuZ2V0dGVycykpIHsKICAgICAgICByZXR1cm4gW05BTUVTUEFDRV9GSUxURVJfS0lORFMuTkFNRVNQQUNFLCBOQU1FU1BBQ0VfRklMVEVSX0tJTkRTLlBST0pFQ1RdOwogICAgICB9CiAgICAgIHJldHVybiBudWxsOwogICAgfQogIH0KfTs="},{"version":3,"names":["mapGetters","NAMESPACE_FILTERS","ALL_NAMESPACES","NAMESPACE","MANAGEMENT","sortBy","isArray","addObjects","findBy","filterBy","NAMESPACE_FILTER_ALL_USER","ALL_USER","NAMESPACE_FILTER_ALL","ALL","NAMESPACE_FILTER_ALL_SYSTEM","ALL_SYSTEM","NAMESPACE_FILTER_ALL_ORPHANS","ALL_ORPHANS","NAMESPACE_FILTER_NAMESPACED_YES","NAMESPACED_YES","NAMESPACE_FILTER_NAMESPACED_NO","NAMESPACED_NO","createNamespaceFilterKey","NAMESPACE_FILTER_KINDS","NAMESPACE_FILTER_NS_FULL_PREFIX","NAMESPACE_FILTER_P_FULL_PREFIX","KEY","pAndNFiltering","SETTING","forcedNamespaceValidTypes","DIVIDER","PROJECT","data","isOpen","filter","hidden","total","activeElement","cachedFiltered","namespaceFilterMode","undefined","fetch","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","$store","dispatch","type","id","UI_PERFORMANCE","calcNamespaceFilterMode","stop","computed","_objectSpread","hasFilter","length","filtered","_this2","_out","out","options","item","_this2$namespaceFilte","includes","kind","validCustomType","find","prefix","startsWith","value","findIndex","v","SPECIAL","label","toLowerCase","splice","mapped","reduce","m","forEach","i","_this2$namespaceFilte2","selected","elementId","replace","enabled","isLastSelected","kindAllowed","f","isNotInProjectGroup","tooltip","concat","content","placement","delay","show","key","getters","currentProduct","_this$currentProduct","_this$currentProduct2","_this$currentProduct3","_this3","t","params","$route","resource","notFilterNamespaces","notFilterNamespace","customNamespaceFilter","inStore","allNamespaces","commit","addNamespace","divider","hideSystemResources","namespaces","filterNamespaces","cluster","projects","p","_this3$currentProduct","isSystem","spec","clusterName","projectsById","namespacesByProject","firstProject","_iterator","_createForOfIteratorHelper","_step","s","n","done","project","metadata","name","err","e","_iterator2","_step2","namespace","projectId","entry","push","_iterator3","_step3","nameDisplay","forThisProject","orphans","disabled","map","isSingleSpecial","get","prefs","values","defaultOption","filters","x","set","neu","_this4","old","slice","last","lastIsSpecial","hadUser","hadAll","ids","$nextTick","beforeDestroy","removeCloseKeyHandler","mounted","layout","watch","methods","isObscure","_this5","$refs","container","overflow","scrollWidth","offsetWidth","dropdown","maxWidth","itemCount","currentWidth","itemWidth","style","visibility","addCloseKeyHandler","document","addEventListener","closeKeyHandler","removeEventListener","keyCode","ESCAPE","close","itemKeyHandler","opt","DOWN","preventDefault","stopPropagation","down","UP","up","SPACE","CR","selectOption","target","focus","inputKeyHandler","TAB","blur","mouseOver","event","_event$path","el","path","classList","contains","setActiveElement","input","exising","c","children","_next","_next2","nextSibling","_prev","_prev2","previousSibling","toggle","open","_this6","clear","option","_this$namespaceFilter","_this7","current","index","exists","handleValueMouseDown","ns","removeOption","_this$currentProduct4","isEnabled"],"sources":["node_modules/@rancher/shell/components/nav/NamespaceFilter.vue"],"sourcesContent":["<script>\nimport { mapGetters } from 'vuex';\nimport { NAMESPACE_FILTERS, ALL_NAMESPACES } from '@shell/store/prefs';\nimport { NAMESPACE, MANAGEMENT } from '@shell/config/types';\nimport { sortBy } from '@shell/utils/sort';\nimport { isArray, addObjects, findBy, filterBy } from '@shell/utils/array';\nimport {\n  NAMESPACE_FILTER_ALL_USER as ALL_USER,\n  NAMESPACE_FILTER_ALL as ALL,\n  NAMESPACE_FILTER_ALL_SYSTEM as ALL_SYSTEM,\n  NAMESPACE_FILTER_ALL_ORPHANS as ALL_ORPHANS,\n  NAMESPACE_FILTER_NAMESPACED_YES as NAMESPACED_YES,\n  NAMESPACE_FILTER_NAMESPACED_NO as NAMESPACED_NO,\n  createNamespaceFilterKey,\n  NAMESPACE_FILTER_KINDS,\n  NAMESPACE_FILTER_NS_FULL_PREFIX,\n  NAMESPACE_FILTER_P_FULL_PREFIX,\n} from '@shell/utils/namespace-filter';\nimport { KEY } from '@shell/utils/platform';\nimport pAndNFiltering from '@shell/utils/projectAndNamespaceFiltering.utils';\nimport { SETTING } from '@shell/config/settings';\n\nconst forcedNamespaceValidTypes = [NAMESPACE_FILTER_KINDS.DIVIDER, NAMESPACE_FILTER_KINDS.PROJECT, NAMESPACE_FILTER_KINDS.NAMESPACE];\n\nexport default {\n\n  data() {\n    return {\n      isOpen:              false,\n      filter:              '',\n      hidden:              0,\n      total:               0,\n      activeElement:       null,\n      cachedFiltered:      [],\n      NAMESPACE_FILTER_KINDS,\n      namespaceFilterMode: undefined,\n    };\n  },\n\n  async fetch() {\n    // Determine if filtering by specific namespaces/projects is required\n    // This is done once and up front\n    // - it doesn't need to be re-active\n    // - added it as a computed caused massive amounts of churn around the `filtered` watcher\n    await this.$store.dispatch('management/find', { type: MANAGEMENT.SETTING, id: SETTING.UI_PERFORMANCE });\n    this.namespaceFilterMode = this.calcNamespaceFilterMode();\n  },\n\n  computed: {\n    ...mapGetters(['currentProduct']),\n\n    hasFilter() {\n      return this.filter.length > 0;\n    },\n\n    filtered() {\n      let out = this.options;\n\n      out = out.filter((item) => {\n        // Filter out anything not applicable to singleton selection\n        if (this.namespaceFilterMode?.length) {\n          // We always show dividers, projects and namespaces\n          if (!forcedNamespaceValidTypes.includes(item.kind)) {\n            const validCustomType = this.namespaceFilterMode.find((prefix) => item.kind.startsWith(prefix));\n\n            if (!validCustomType) {\n              // Hide any invalid option that's not selected\n              return this.value.findIndex((v) => v.id === item.id) >= 0;\n            }\n          }\n        }\n\n        // Filter by the current filter\n        if (this.hasFilter) {\n          return item.kind !== NAMESPACE_FILTER_KINDS.SPECIAL && item.label.toLowerCase().includes(this.filter.toLowerCase());\n        }\n\n        return true;\n      });\n\n      if (out?.[0]?.kind === NAMESPACE_FILTER_KINDS.DIVIDER) {\n        out.splice(0, 1);\n      }\n\n      const mapped = this.value.reduce((m, v) => {\n        m[v.id] = v;\n\n        return m;\n      }, {});\n\n      // Mark all of the selected options\n      out.forEach((i) => {\n        i.selected = !!mapped[i.id] || (i.id === ALL && this.value && this.value.length === 0);\n        i.elementId = (i.id || '').replace('://', '_');\n        i.enabled = true;\n        // Are we in restricted resource type mode, if so is this an allowed type?\n        if (this.namespaceFilterMode?.length) {\n          const isLastSelected = i.selected && (i.id === ALL || this.value.length === 1);\n          const kindAllowed = this.namespaceFilterMode.find((f) => f === i.kind);\n          const isNotInProjectGroup = i.id === ALL_ORPHANS;\n\n          i.enabled = (!isLastSelected && kindAllowed) && !isNotInProjectGroup;\n        }\n      });\n\n      return out;\n    },\n\n    tooltip() {\n      if (this.isOpen || (this.total + this.hidden) === 0) {\n        return null;\n      }\n\n      let tooltip = '<div class=\"ns-filter-tooltip\">';\n\n      (this.value || []).forEach((v) => {\n        tooltip += `<div class=\"ns-filter-tooltip-item\"><div>${ v.label }</div></div>`;\n      });\n\n      tooltip += '</div>';\n\n      return {\n        content:   tooltip,\n        placement: 'bottom',\n        delay:     { show: 500 }\n      };\n    },\n\n    key() {\n      return createNamespaceFilterKey(this.$store.getters['clusterId'], this.currentProduct);\n    },\n\n    options() {\n      const t = this.$store.getters['i18n/t'];\n      let out = [];\n\n      const params = { ...this.$route.params };\n      const resource = params.resource;\n      // Sometimes, different pages may have different namespaces to filter\n      const notFilterNamespaces = this.$store.getters[`type-map/optionsFor`](resource).notFilterNamespace || [];\n\n      // TODO: Add return info\n      if (this.currentProduct?.customNamespaceFilter && this.currentProduct?.inStore) {\n        // Sometimes the component can show before the 'currentProduct' has caught up, so access the product via the getter rather\n        // than caching it in the `fetch`\n\n        // The namespace display on the list and edit pages should be the same as in the namespaceFilter component\n        if (this.$store.getters[`${ this.currentProduct.inStore }/filterNamespace`]) {\n          const allNamespaces = this.$store.getters[`${ this.currentProduct.inStore }/filterNamespace`](notFilterNamespaces);\n\n          this.$store.commit('changeAllNamespaces', allNamespaces);\n        }\n\n        return this.$store.getters[`${ this.currentProduct.inStore }/namespaceFilterOptions`]({\n          addNamespace,\n          divider,\n          notFilterNamespaces\n        });\n      }\n\n      // TODO: Add return info\n      if (!this.currentProduct?.hideSystemResources) {\n        out = [\n          {\n            id:    ALL,\n            kind:  NAMESPACE_FILTER_KINDS.SPECIAL,\n            label: t('nav.ns.all'),\n          },\n          {\n            id:    ALL_USER,\n            kind:  NAMESPACE_FILTER_KINDS.SPECIAL,\n            label: t('nav.ns.user'),\n          },\n          {\n            id:    ALL_SYSTEM,\n            kind:  NAMESPACE_FILTER_KINDS.SPECIAL,\n            label: t('nav.ns.system'),\n          },\n          {\n            id:    NAMESPACED_YES,\n            kind:  NAMESPACE_FILTER_KINDS.SPECIAL,\n            label: t('nav.ns.namespaced'),\n          },\n          {\n            id:    NAMESPACED_NO,\n            kind:  NAMESPACE_FILTER_KINDS.SPECIAL,\n            label: t('nav.ns.clusterLevel'),\n          },\n        ];\n\n        divider(out);\n      }\n\n      const inStore = this.$store.getters['currentStore'](NAMESPACE);\n\n      if (!inStore) {\n        return out;\n      }\n\n      let namespaces = sortBy(\n        this.$store.getters[`${ inStore }/all`](NAMESPACE),\n        ['nameDisplay']\n      );\n\n      namespaces = this.filterNamespaces(namespaces);\n\n      // isRancher = mgmt schemas are loaded and there's a project schema\n      if (this.$store.getters['isRancher']) {\n        const cluster = this.$store.getters['currentCluster'];\n        let projects = this.$store.getters['management/all'](\n          MANAGEMENT.PROJECT\n        );\n\n        projects = projects.filter((p) => {\n          return this.currentProduct?.hideSystemResources ? !p.isSystem && p.spec.clusterName === cluster.id : p.spec.clusterName === cluster.id;\n        });\n        projects = sortBy(filterBy(projects, 'spec.clusterName', cluster.id), [\n          'nameDisplay',\n        ]);\n        const projectsById = {};\n        const namespacesByProject = {};\n        let firstProject = true;\n\n        namespacesByProject[null] = []; // For namespaces not in a project\n        for (const project of projects) {\n          projectsById[project.metadata.name] = project;\n        }\n\n        for (const namespace of namespaces) {\n          let projectId = namespace.projectId;\n\n          if (!projectId || !projectsById[projectId]) {\n            // If there's a projectId but that project doesn't exist, treat it like no project\n            projectId = null;\n          }\n\n          let entry = namespacesByProject[projectId];\n\n          if (!entry) {\n            entry = [];\n            namespacesByProject[namespace.projectId] = entry;\n          }\n          entry.push(namespace);\n        }\n\n        for (const project of projects) {\n          const id = project.metadata.name;\n\n          if (firstProject) {\n            firstProject = false;\n          } else {\n            divider(out);\n          }\n\n          out.push({\n            id:    `${ NAMESPACE_FILTER_P_FULL_PREFIX }${ id }`,\n            kind:  NAMESPACE_FILTER_KINDS.PROJECT,\n            label: t('nav.ns.project', { name: project.nameDisplay }),\n          });\n\n          const forThisProject = namespacesByProject[id] || [];\n\n          addNamespace(out, forThisProject);\n        }\n\n        const orphans = namespacesByProject[null];\n\n        if (orphans.length) {\n          if (!firstProject) {\n            divider(out);\n          }\n\n          out.push({\n            id:       ALL_ORPHANS,\n            kind:     NAMESPACE_FILTER_KINDS.PROJECT,\n            label:    t('nav.ns.orphan'),\n            disabled: true,\n          });\n\n          addNamespace(out, orphans);\n        }\n      } else {\n        addNamespace(out, namespaces);\n      }\n\n      return out;\n\n      function addNamespace(out, namespaces) {\n        if (!isArray(namespaces)) {\n          namespaces = [namespaces];\n        }\n\n        addObjects(\n          out,\n          namespaces.map((namespace) => {\n            return {\n              id:    `${ NAMESPACE_FILTER_NS_FULL_PREFIX }${ namespace.id }`,\n              kind:  NAMESPACE_FILTER_KINDS.NAMESPACE,\n              label: t('nav.ns.namespace', { name: namespace.nameDisplay }),\n            };\n          })\n        );\n      }\n\n      function divider(out) {\n        out.push({\n          kind:     NAMESPACE_FILTER_KINDS.DIVIDER,\n          label:    `Divider ${ out.length }`,\n          disabled: true,\n        });\n      }\n    },\n\n    isSingleSpecial() {\n      return this.value && this.value.length === 1 && this.value[0].kind === NAMESPACE_FILTER_KINDS.SPECIAL;\n    },\n\n    value: {\n      get() {\n        // Use last picked filter from user preferences\n        const prefs = this.$store.getters['prefs/get'](NAMESPACE_FILTERS);\n        const values = prefs && prefs[this.key] ? prefs[this.key] : this.defaultOption();\n        const options = this.options;\n\n        // Remove values that are not valid options\n        const filters = values\n          .map((value) => {\n            return findBy(options, 'id', value);\n          })\n          .filter((x) => !!x);\n\n        return filters;\n      },\n\n      set(neu) {\n        const old = (this.value || []).slice();\n\n        neu = neu.filter((x) => !!x.id);\n\n        const last = neu[neu.length - 1];\n        const lastIsSpecial = last?.kind === NAMESPACE_FILTER_KINDS.SPECIAL;\n        const hadUser = !!old.find((x) => x.id === ALL_USER);\n        const hadAll = !!old.find((x) => x.id === ALL);\n\n        if (lastIsSpecial) {\n          neu = [last];\n        }\n\n        if (neu.length > 1) {\n          neu = neu.filter((x) => x.kind !== NAMESPACE_FILTER_KINDS.SPECIAL);\n        }\n\n        if (neu.find((x) => x.id === 'all')) {\n          neu = [];\n        }\n\n        let ids;\n\n        // If there was something selected and you remove it, go back to user by default\n        // Unless it was user or all\n        if (neu.length === 0 && !hadUser && !hadAll) {\n          ids = this.defaultOption();\n        } else {\n          ids = neu.map((x) => x.id);\n        }\n\n        this.$nextTick(() => {\n          this.$store.dispatch('switchNamespaces', {\n            ids,\n            key: this.key\n          });\n        });\n      },\n    }\n  },\n\n  beforeDestroy() {\n    this.removeCloseKeyHandler();\n  },\n\n  mounted() {\n    this.layout();\n  },\n\n  watch: {\n    value(neu) {\n      this.layout();\n    },\n\n    /**\n     * When there are thousands of entries certain actions (drop down opened, selection changed, etc) take a long time to complete (upwards\n     * of 5 seconds)\n     *\n     * This is caused by churn of the filtered and options computed properties causing multiple renders for each action.\n     *\n     * To break this multiple-render per cycle behaviour detatch `filtered` from the value used in `v-for`.\n     *\n     */\n    filtered(neu) {\n      if (!!neu) {\n        this.cachedFiltered = neu;\n      }\n    }\n  },\n\n  methods: {\n    filterNamespaces(namespaces) {\n      if (this.$store.getters['prefs/get'](ALL_NAMESPACES)) {\n        // If all namespaces options are turned on in the user preferences,\n        // return all namespaces including system namespaces and RBAC\n        // management namespaces.\n        return namespaces;\n      }\n\n      return namespaces.filter((namespace) => {\n        // Otherwise only filter out obscure namespaces, such as namespaces\n        // that Rancher uses to manage RBAC for projects, which should not be\n        // edited or deleted by Rancher users.\n        return !namespace.isObscure;\n      });\n    },\n    // Layout the content in the dropdown box to best use the space to show the selection\n    layout() {\n      this.$nextTick(() => {\n        // One we have re-rendered, see what we can fit in the control to show the selected namespaces\n        if (this.$refs.values) {\n          const container = this.$refs.values;\n          const overflow = container.scrollWidth > container.offsetWidth;\n          let hidden = 0;\n\n          const dropdown = this.$refs.dropdown;\n          // Remove padding and dropdown arrow size\n          const maxWidth = dropdown.offsetWidth - 20 - 24;\n\n          // If we are overflowing, then allow some space for the +N indicator\n          const itemCount = this.$refs.value ? this.$refs.value.length : 0;\n          let currentWidth = 0;\n          let show = true;\n\n          this.total = 0;\n\n          for (let i = 0; i < itemCount; i++) {\n            const item = this.$refs.value[i];\n            let itemWidth = item.offsetWidth + 10;\n\n            // If this is the first item and we have overflow then add on some space for the +N\n            if (i === 0 && overflow) {\n              itemWidth += 40;\n            }\n\n            currentWidth += itemWidth;\n\n            if (show) {\n              if (i === 0) {\n                // Can't even fit the first item in\n                if (itemWidth > maxWidth) {\n                  show = false;\n                  this.total = this.value.length;\n                }\n              } else {\n                show = currentWidth < maxWidth;\n              }\n            }\n\n            hidden += show ? 0 : 1;\n            item.style.visibility = show ? 'visible' : 'hidden';\n          }\n\n          this.hidden = this.total > 0 ? 0 : hidden;\n        }\n      });\n    },\n    addCloseKeyHandler() {\n      document.addEventListener('keyup', this.closeKeyHandler);\n    },\n    removeCloseKeyHandler() {\n      document.removeEventListener('keyup', this.closeKeyHandler);\n    },\n    closeKeyHandler(e) {\n      if (e.keyCode === KEY.ESCAPE ) {\n        this.close();\n      }\n    },\n    // Keyboard support\n    itemKeyHandler(e, opt) {\n      if (e.keyCode === KEY.DOWN ) {\n        e.preventDefault();\n        e.stopPropagation();\n        this.down();\n      } else if (e.keyCode === KEY.UP ) {\n        e.preventDefault();\n        e.stopPropagation();\n        this.up();\n      } else if (e.keyCode === KEY.SPACE || e.keyCode === KEY.CR) {\n        if (this.namespaceFilterMode && !opt.enabled) {\n          return;\n        }\n        e.preventDefault();\n        e.stopPropagation();\n        this.selectOption(opt);\n        e.target.focus();\n      }\n    },\n    inputKeyHandler(e) {\n      switch (e.keyCode) {\n      case KEY.DOWN:\n        e.preventDefault();\n        e.stopPropagation();\n        this.down(true);\n        break;\n      case KEY.TAB:\n        // Tab out of the input box\n        this.close();\n        e.target.blur();\n        break;\n      case KEY.CR:\n        if (this.filtered.length === 1) {\n          this.selectOption(this.filtered[0]);\n          this.filter = '';\n        }\n        break;\n      }\n    },\n    mouseOver(event) {\n      const el = event?.path?.find((e) => e.classList.contains('ns-option'));\n\n      this.activeElement = el;\n    },\n    setActiveElement(el) {\n      if (!el?.focus) {\n        return;\n      }\n\n      el.focus();\n      this.activeElement = null;\n    },\n    down(input) {\n      const exising = this.activeElement || document.activeElement;\n\n      // Focus the first element in the list\n      if (input || !exising) {\n        if (this.$refs.options) {\n          const c = this.$refs.options.children;\n\n          if (c && c.length > 0) {\n            this.setActiveElement(c[0]);\n          }\n        }\n      } else {\n        let next = exising.nextSibling;\n\n        if (next?.children?.length) {\n          const item = next.children[0];\n\n          // Skip over dividers (assumes we don't have two dividers next to each other)\n          if (item.classList.contains('ns-divider')) {\n            next = next.nextSibling;\n          }\n        }\n\n        if (next?.focus) {\n          this.setActiveElement(next);\n        }\n      }\n    },\n    up() {\n      if (document.activeElement) {\n        let prev = document.activeElement.previousSibling;\n\n        if (prev?.children?.length) {\n          const item = prev.children[0];\n\n          if (item.classList.contains('ns-divider')) {\n            prev = prev.previousSibling;\n          }\n        }\n\n        if (prev?.focus) {\n          this.setActiveElement(prev);\n        }\n      }\n    },\n    toggle() {\n      if (this.isOpen) {\n        this.close();\n      } else {\n        this.open();\n      }\n    },\n    open() {\n      this.isOpen = true;\n      this.$nextTick(() => {\n        this.$refs.filter.focus();\n      });\n      this.addCloseKeyHandler();\n      this.layout();\n    },\n    close() {\n      this.isOpen = false;\n      this.activeElement = null;\n      this.removeCloseKeyHandler();\n      this.layout();\n    },\n    clear() {\n      this.value = [];\n    },\n    selectOption(option) {\n      // Ignore click for a divider\n      if (option.kind === NAMESPACE_FILTER_KINDS.DIVIDER) {\n        return;\n      }\n\n      const current = this.value;\n\n      // Remove invalid\n      if (!!this.namespaceFilterMode?.length) {\n        this.value.forEach((v) => {\n          if (!this.namespaceFilterMode.find((f) => f === v.kind)) {\n            const index = current.findIndex((c) => c.id === v.id);\n\n            current.splice(index, 1);\n          }\n        });\n      }\n\n      const exists = current.findIndex((v) => v.id === option.id);\n\n      // Remove if it exists (or always add if in singleton mode - we've reset the list above)\n      if (exists !== -1) {\n        current.splice(exists, 1);\n      } else {\n        current.push(option);\n      }\n\n      this.value = current;\n\n      if (document.activeElement) {\n        document.activeElement.blur();\n      }\n    },\n    handleValueMouseDown(ns, event) {\n      this.removeOption(ns, event);\n\n      if (this.value.length === 0) {\n        this.open();\n      }\n    },\n\n    removeOption(ns, event) {\n      this.selectOption(ns);\n      event.preventDefault();\n      event.stopPropagation();\n    },\n\n    defaultOption() {\n      // Note - This is one place where a default ns/project filter value is provided (ALL_USER)\n      // There's also..\n      // - dashboard root store `loadCluster` --> when `updateNamespaces` is dispatched\n      // - harvester root store `loadCluster` --> when `updateNamespaces` is dispatched (can be discarded)\n      // Due to this, we can't really set a nicer default when forced ns/project filtering is on (ALL_USER is invalid)\n      if (this.currentProduct?.customNamespaceFilter) {\n        return [];\n      }\n\n      return [ALL_USER];\n    },\n\n    calcNamespaceFilterMode() {\n      if (pAndNFiltering.isEnabled(this.$store.getters)) {\n        return [NAMESPACE_FILTER_KINDS.NAMESPACE, NAMESPACE_FILTER_KINDS.PROJECT];\n      }\n\n      return null;\n    },\n  }\n};\n</script>\n\n<template>\n  <div\n    v-if=\"!$fetchState.pending\"\n    class=\"ns-filter\"\n    data-testid=\"namespaces-filter\"\n    tabindex=\"0\"\n    @focus=\"open()\"\n  >\n    <div\n      v-if=\"isOpen\"\n      class=\"ns-glass\"\n      @click=\"close()\"\n    />\n\n    <!-- Select Dropdown control -->\n    <div\n      ref=\"dropdown\"\n      class=\"ns-dropdown\"\n      data-testid=\"namespaces-dropdown\"\n      :class=\"{ 'ns-open': isOpen }\"\n      @click=\"toggle()\"\n    >\n      <!-- No filters found or available -->\n      <div\n        v-if=\"value.length === 0\"\n        ref=\"values\"\n        data-testid=\"namespaces-values-none\"\n        class=\"ns-values\"\n      >\n        {{ t('nav.ns.all') }}\n      </div>\n\n      <!-- Filtered by set with custom label E.g. \"All namespaces\" -->\n      <div\n        v-else-if=\"isSingleSpecial\"\n        ref=\"values\"\n        data-testid=\"namespaces-values-label\"\n        class=\"ns-values\"\n      >\n        {{ value[0].label }}\n      </div>\n\n      <!-- All the selected namespaces -->\n      <div\n        v-else\n        ref=\"values\"\n        v-clean-tooltip=\"tooltip\"\n        data-testid=\"namespaces-values\"\n        class=\"ns-values\"\n      >\n        <div\n          v-if=\"total\"\n          ref=\"total\"\n          data-testid=\"namespaces-values-total\"\n          class=\"ns-value ns-abs\"\n        >\n          {{ t('namespaceFilter.selected.label', { total }) }}\n        </div>\n        <div\n          v-for=\"(ns, j) in value\"\n          ref=\"value\"\n          :key=\"ns.id\"\n          :data-testid=\"`namespaces-value-${j}`\"\n          class=\"ns-value\"\n        >\n          <div>{{ ns.label }}</div>\n          <!-- block user from removing the last selection if ns forced filtering is on -->\n          <i\n            v-if=\"!namespaceFilterMode || value.length > 1\"\n            class=\"icon icon-close\"\n            :data-testid=\"`namespaces-values-close-${j}`\"\n            @click=\"removeOption(ns, $event)\"\n            @mousedown=\"handleValueMouseDown(ns, $event)\"\n          />\n        </div>\n      </div>\n\n      <!-- Inform user if more namespaces are selected -->\n      <div\n        v-if=\"hidden > 0\"\n        ref=\"more\"\n        v-clean-tooltip=\"tooltip\"\n        class=\"ns-more\"\n      >\n        {{ t('namespaceFilter.more', { more: hidden }) }}\n      </div>\n      <i\n        v-if=\"!isOpen\"\n        class=\"icon icon-chevron-down\"\n      />\n      <i\n        v-else\n        class=\"icon icon-chevron-up\"\n      />\n    </div>\n    <button\n      v-shortkey.once=\"['n']\"\n      class=\"hide\"\n      @shortkey=\"open()\"\n    />\n\n    <!-- Dropdown menu -->\n    <div\n      v-if=\"isOpen\"\n      class=\"ns-dropdown-menu\"\n      data-testid=\"namespaces-menu\"\n    >\n      <div class=\"ns-controls\">\n        <div class=\"ns-input\">\n          <input\n            ref=\"filter\"\n            v-model=\"filter\"\n            tabindex=\"0\"\n            class=\"ns-filter-input\"\n            @keydown=\"inputKeyHandler($event)\"\n          >\n          <i\n            v-if=\"hasFilter\"\n            class=\"ns-filter-clear icon icon-close\"\n            @click=\"filter = ''\"\n          />\n        </div>\n        <div\n          v-if=\"namespaceFilterMode\"\n          class=\"ns-singleton-info\"\n        >\n          <i\n            v-clean-tooltip=\"t('resourceList.nsFilterToolTip')\"\n            class=\"icon icon-info\"\n          />\n        </div>\n        <div\n          v-else\n          class=\"ns-clear\"\n        >\n          <i\n            class=\"icon icon-close\"\n            @click=\"clear()\"\n          />\n        </div>\n      </div>\n      <div class=\"ns-divider mt-0\" />\n      <div\n        ref=\"options\"\n        class=\"ns-options\"\n        role=\"list\"\n      >\n        <div\n          v-for=\"(opt, i) in cachedFiltered\"\n          :id=\"opt.elementId\"\n          :key=\"opt.id\"\n          tabindex=\"0\"\n          class=\"ns-option\"\n          :disabled=\"!opt.enabled\"\n          :class=\"{\n            'ns-selected': opt.selected,\n            'ns-single-match': cachedFiltered.length === 1 && !opt.selected,\n          }\"\n          :data-testid=\"`namespaces-option-${i}`\"\n          @click=\"opt.enabled && selectOption(opt)\"\n          @mouseover=\"opt.enabled && mouseOver($event)\"\n          @keydown=\"itemKeyHandler($event, opt)\"\n        >\n          <div\n            v-if=\"opt.kind === NAMESPACE_FILTER_KINDS.DIVIDER\"\n            class=\"ns-divider\"\n          />\n          <div\n            v-else\n            class=\"ns-item\"\n          >\n            <i\n              v-if=\"opt.kind === NAMESPACE_FILTER_KINDS.NAMESPACE\"\n              class=\"icon icon-folder\"\n            />\n            <div>{{ opt.label }}</div>\n            <i\n              v-if=\"opt.selected\"\n              class=\"icon icon-checkmark\"\n            />\n          </div>\n        </div>\n        <div\n          v-if=\"cachedFiltered.length === 0\"\n          class=\"ns-none\"\n          data-testid=\"namespaces-option-none\"\n        >\n          {{ t('namespaceFilter.noMatchingOptions') }}\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n  $ns_dropdown_size: 24px;\n\n  .ns-abs {\n    position: absolute;\n  }\n\n  .ns-filter {\n    width: 280px;\n    display: inline-block;\n\n    $glass-z-index: 2;\n    $dropdown-z-index: 1000;\n\n    .ns-glass {\n      height: 100vh;\n      left: 0;\n      opacity: 0;\n      position: absolute;\n      top: 0;\n      width: 100vw;\n      z-index: $glass-z-index;\n    }\n\n    .ns-controls {\n      align-items: center;\n      display: flex;\n    }\n\n    .ns-clear {\n      &:hover {\n        color: var(--primary);\n        cursor: pointer;\n      }\n    }\n\n    .ns-singleton-info, .ns-clear {\n      align-items: center;\n      display: flex;\n      > i {\n        padding-right: 5px;\n      }\n    }\n\n    .ns-input {\n      flex: 1;\n      padding: 5px;\n      position: relative;\n    }\n\n    .ns-filter-input {\n      height: 24px;\n    }\n\n    .ns-filter-clear {\n      cursor: pointer;\n      position: absolute;\n      right: 10px;\n      top: 5px;\n      line-height: 24px;\n      text-align: center;\n      width: 24px;\n    }\n\n    .ns-dropdown-menu {\n      background-color: var(--header-bg);\n      border: 1px solid var(--primary-border);\n      border-bottom-left-radius: var(--border-radius);\n      border-bottom-right-radius: var(--border-radius);\n      color: var(--header-btn-text);\n      margin-top: -1px;\n      padding-bottom: 10px;\n      position: relative;\n      z-index: $dropdown-z-index;\n\n      .ns-options {\n        max-height: 50vh;\n        overflow-y: auto;\n\n        .ns-none {\n          color: var(--muted);\n          padding: 0 10px;\n        }\n      }\n\n      .ns-divider {\n        border-top: 1px solid var(--border);\n        cursor: default;\n        margin-top: 10px;\n        padding-bottom: 10px;\n      }\n\n      .ns-option {\n\n        &[disabled] {\n          cursor: default;\n        }\n\n        &:not([disabled]) {\n          &:focus {\n            background-color: var(--dropdown-hover-bg);\n            color: var(--dropdown-hover-text);\n          }\n          .ns-item {\n             &:hover, &:focus {\n              background-color: var(--dropdown-hover-bg);\n              color: var(--dropdown-hover-text);\n              cursor: pointer;\n\n              > i {\n                color: var(--dropdown-hover-text);\n              }\n            }\n          }\n\n          &.ns-selected {\n            &:hover,&:focus {\n              .ns-item {\n                > * {\n                  background-color: var(--dropdown-hover-bg);\n                  color: var(--dropdown-hover-text);\n                }\n              }\n            }\n          }\n\n          &.ns-selected:not(:hover) {\n            .ns-item {\n              > * {\n                color: var(--dropdown-hover-bg);\n              }\n            }\n\n            &:focus {\n              .ns-item {\n                > * {\n                  color: var(--dropdown-hover-text);\n                }\n              }\n            }\n          }\n        }\n\n        .ns-item {\n          align-items: center;\n          display: flex;\n          height: 24px;\n          line-height: 24px;\n          padding: 0 10px;\n\n          > i {\n            color: var(--muted);\n            margin: 0 5px;\n          }\n\n          > div {\n            flex: 1;\n            overflow: hidden;\n            text-overflow: ellipsis;\n            white-space: nowrap;\n          }\n\n        }\n\n        &.ns-single-match {\n          .ns-item {\n            background-color: var(--dropdown-hover-bg);\n            > * {\n              color: var(--dropdown-hover-text);\n            }\n          }\n        }\n      }\n    }\n\n    .ns-dropdown {\n      align-items: center;\n      display: flex;\n      border: 1px solid var(--header-border);\n      border-radius: var(--border-radius);\n      color: var(--header-btn-text);\n      cursor: pointer;\n      height: 40px;\n      padding: 0 10px;\n      position: relative;\n      z-index: $dropdown-z-index;\n\n      &.ns-open {\n        border-bottom-left-radius: 0;\n        border-bottom-right-radius: 0;\n        border-color: var(--primary-border);\n      }\n\n      > .ns-values {\n        flex: 1;\n      }\n\n      &:hover {\n        > i {\n          color: var(--primary);\n        }\n      }\n\n      > i {\n        height: $ns_dropdown_size;\n        width: $ns_dropdown_size;\n        cursor: pointer;\n        text-align: center;\n        line-height: $ns_dropdown_size;\n      }\n\n      .ns-more {\n        border: 1px solid var(--header-border);\n        border-radius: 5px;\n        padding: 2px 8px;\n        margin-left: 4px;\n      }\n\n      .ns-values {\n        display: flex;\n        overflow: hidden;\n\n        .ns-value {\n          align-items: center;\n          background-color: rgba(0,0,0,.05);\n          border: 1px solid var(--header-border);\n          border-radius: 5px;\n          color: var(--tag-text);\n          display: flex;\n          line-height: 20px;\n          padding: 2px 5px;\n          white-space: nowrap;\n\n          > i {\n            margin-left: 5px;\n\n            &:hover {\n              color: var(--primary);\n            };\n          }\n\n          // Spacing between tags\n          &:not(:last-child) {\n            margin-right: 5px;\n          }\n        }\n      }\n    }\n  }\n</style>\n<style lang=\"scss\">\n  .tooltip {\n    .ns-filter-tooltip {\n      background-color: var(--body-bg);\n      margin: -6px;\n      padding: 6px;\n\n      .ns-filter-tooltip-item {\n        > div {\n          background-color: rgba(0,0,0,.05);\n          border: 1px solid var(--header-border);\n          border-radius: 5px;\n          color: var(--tag-text);\n          display: inline-block;\n          line-height: 20px;\n          padding: 2px 5px;\n          white-space: nowrap;\n          margin: 4px 0;\n        }\n      }\n    }\n  }\n</style>\n"],"mappings":"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","ignoreList":[]}]}