{"remainingRequest":"/home/ubuntu/susecon-2024-ext-demo/node_modules/babel-loader/lib/index.js??ref--16-1!/home/ubuntu/susecon-2024-ext-demo/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/ubuntu/susecon-2024-ext-demo/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/list/group.principal.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/list/group.principal.vue","mtime":1725271280091},{"path":"/home/ubuntu/susecon-2024-ext-demo/babel.config.js","mtime":1725268750245},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/babel-loader/lib/index.js","mtime":1725271298942},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1725271300920}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKZnVuY3Rpb24gb3duS2V5cyhlLCByKSB7IHZhciB0ID0gT2JqZWN0LmtleXMoZSk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBvID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKTsgciAmJiAobyA9IG8uZmlsdGVyKGZ1bmN0aW9uIChyKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsIHIpLmVudW1lcmFibGU7IH0pKSwgdC5wdXNoLmFwcGx5KHQsIG8pOyB9IHJldHVybiB0OyB9CmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQoZSkgeyBmb3IgKHZhciByID0gMTsgciA8IGFyZ3VtZW50cy5sZW5ndGg7IHIrKykgeyB2YXIgdCA9IG51bGwgIT0gYXJndW1lbnRzW3JdID8gYXJndW1lbnRzW3JdIDoge307IHIgJSAyID8gb3duS2V5cyhPYmplY3QodCksICEwKS5mb3JFYWNoKGZ1bmN0aW9uIChyKSB7IF9kZWZpbmVQcm9wZXJ0eShlLCByLCB0W3JdKTsgfSkgOiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGUsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHQpKSA6IG93bktleXMoT2JqZWN0KHQpKS5mb3JFYWNoKGZ1bmN0aW9uIChyKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCByLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsIHIpKTsgfSk7IH0gcmV0dXJuIGU7IH0KaW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiL2hvbWUvdWJ1bnR1L3N1c2Vjb24tMjAyNC1leHQtZGVtby9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvcmVnZW5lcmF0b3IvaW5kZXguanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvcnMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5wcm9taXNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCBSZXNvdXJjZVRhYmxlIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL1Jlc291cmNlVGFibGUnOwppbXBvcnQgTG9hZGluZyBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9Mb2FkaW5nJzsKaW1wb3J0IE1hc3RoZWFkIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL1Jlc291cmNlTGlzdC9NYXN0aGVhZCc7CmltcG9ydCB7IE5PUk1BTiwgTUFOQUdFTUVOVCB9IGZyb20gJ0BzaGVsbC9jb25maWcvdHlwZXMnOwppbXBvcnQgQXN5bmNCdXR0b24gZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvQXN5bmNCdXR0b24nOwppbXBvcnQgeyBhcHBseVByb2R1Y3RzIH0gZnJvbSAnQHNoZWxsL3N0b3JlL3R5cGUtbWFwJzsKaW1wb3J0IHsgTkFNRSB9IGZyb20gJ0BzaGVsbC9jb25maWcvcHJvZHVjdC9hdXRoJzsKaW1wb3J0IHsgTU9ERSwgX0VESVQgfSBmcm9tICdAc2hlbGwvY29uZmlnL3F1ZXJ5LXBhcmFtcyc7CmltcG9ydCB7IG1hcFN0YXRlIH0gZnJvbSAndnVleCc7CmltcG9ydCB7IEJMQU5LX0NMVVNURVIgfSBmcm9tICdAc2hlbGwvc3RvcmUvc3RvcmUtdHlwZXMuanMnOwppbXBvcnQgeyBhbGxIYXNoIH0gZnJvbSAnQHNoZWxsL3V0aWxzL3Byb21pc2UnOwpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgQXN5bmNCdXR0b246IEFzeW5jQnV0dG9uLAogICAgUmVzb3VyY2VUYWJsZTogUmVzb3VyY2VUYWJsZSwKICAgIE1hc3RoZWFkOiBNYXN0aGVhZCwKICAgIExvYWRpbmc6IExvYWRpbmcKICB9LAogIHByb3BzOiB7CiAgICByZXNvdXJjZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICB9LAogICAgc2NoZW1hOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0sCiAgICB1c2VRdWVyeVBhcmFtc0ZvclNpbXBsZUZpbHRlcmluZzogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfQogIH0sCiAgZmV0Y2g6IGZ1bmN0aW9uIGZldGNoKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICB2YXIgX2hhc2gkdXNlciwgX2dyYlNjaGVtYSRjb2xsZWN0aW9uOwogICAgICB2YXIgYXV0aENvbmZpZ1NjaGVtYSwgZ3JiU2NoZW1hLCBoYXNoLCBub25Mb2NhbEF1dGhQcm92aWRlcjsKICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICByZXR1cm4gX3RoaXMudXBkYXRlUm93cygpOwogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICBhdXRoQ29uZmlnU2NoZW1hID0gX3RoaXMuJHN0b3JlLmdldHRlcnNbIm1hbmFnZW1lbnQvc2NoZW1hRm9yIl0oTUFOQUdFTUVOVC5BVVRIX0NPTkZJRyk7CiAgICAgICAgICAgIGdyYlNjaGVtYSA9IF90aGlzLiRzdG9yZS5nZXR0ZXJzWydyYW5jaGVyL3NjaGVtYUZvciddKE5PUk1BTi5HTE9CQUxfUk9MRV9CSU5ESU5HKTsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDY7CiAgICAgICAgICAgIHJldHVybiBhbGxIYXNoKHsKICAgICAgICAgICAgICB1c2VyOiBfdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3JhbmNoZXIvcmVxdWVzdCcsIHsKICAgICAgICAgICAgICAgIHVybDogJy92My91c2Vycz9saW1pdD0wJwogICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgIHByb3ZpZGVyczogYXV0aENvbmZpZ1NjaGVtYSA/IF90aGlzLiRzdG9yZS5kaXNwYXRjaCgibWFuYWdlbWVudC9maW5kQWxsIiwgewogICAgICAgICAgICAgICAgdHlwZTogTUFOQUdFTUVOVC5BVVRIX0NPTkZJRwogICAgICAgICAgICAgIH0pIDogUHJvbWlzZS5yZXNvbHZlKFtdKQogICAgICAgICAgICB9KTsKICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgaGFzaCA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgIG5vbkxvY2FsQXV0aFByb3ZpZGVyID0gISFoYXNoLnByb3ZpZGVycy5maW5kKGZ1bmN0aW9uIChwKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHAubmFtZSAhPT0gJ2xvY2FsJyAmJiBwLmVuYWJsZWQgPT09IHRydWU7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBfdGhpcy5jYW5SZWZyZXNoQWNjZXNzID0gbm9uTG9jYWxBdXRoUHJvdmlkZXIgJiYgISEoKF9oYXNoJHVzZXIgPSBoYXNoLnVzZXIpICE9PSBudWxsICYmIF9oYXNoJHVzZXIgIT09IHZvaWQgMCAmJiAoX2hhc2gkdXNlciA9IF9oYXNoJHVzZXIuYWN0aW9ucykgIT09IG51bGwgJiYgX2hhc2gkdXNlciAhPT0gdm9pZCAwICYmIF9oYXNoJHVzZXIucmVmcmVzaGF1dGhwcm92aWRlcmFjY2Vzcyk7CiAgICAgICAgICAgIF90aGlzLmNhbkNyZWF0ZUdsb2JhbFJvbGVCaW5kaW5nID0gbm9uTG9jYWxBdXRoUHJvdmlkZXIgJiYgKGdyYlNjaGVtYSA9PT0gbnVsbCB8fCBncmJTY2hlbWEgPT09IHZvaWQgMCB8fCAoX2dyYlNjaGVtYSRjb2xsZWN0aW9uID0gZ3JiU2NoZW1hLmNvbGxlY3Rpb25NZXRob2RzKSA9PT0gbnVsbCB8fCBfZ3JiU2NoZW1hJGNvbGxlY3Rpb24gPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9ncmJTY2hlbWEkY29sbGVjdGlvbi5pbmNsdWRlcygnUE9TVCcpKTsKICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSk7CiAgICB9KSkoKTsKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICByb3dzOiBbXSwKICAgICAgY2FuQ3JlYXRlR2xvYmFsUm9sZUJpbmRpbmc6IGZhbHNlLAogICAgICBjYW5SZWZyZXNoQWNjZXNzOiBmYWxzZSwKICAgICAgYXNzaWduTG9jYXRpb246IHsKICAgICAgICBwYXRoOiAiL2MvIi5jb25jYXQoQkxBTktfQ0xVU1RFUiwgIi8iKS5jb25jYXQoTkFNRSwgIi8iKS5jb25jYXQoTk9STUFOLlNQT09GRUQuR1JPVVBfUFJJTkNJUEFMLCAiL2Fzc2lnbi1lZGl0IiksCiAgICAgICAgcXVlcnk6IF9kZWZpbmVQcm9wZXJ0eSh7fSwgTU9ERSwgX0VESVQpCiAgICAgIH0sCiAgICAgIGluaXRpYWxMb2FkOiB0cnVlCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IF9vYmplY3RTcHJlYWQoe30sIG1hcFN0YXRlKCdhY3Rpb24tbWVudScsIFsnc2hvd1Byb21wdFJlbW92ZScsICd0b1JlbW92ZSddKSksCiAgd2F0Y2g6IHsKICAgIHRvUmVtb3ZlOiBmdW5jdGlvbiB0b1JlbW92ZShyZXNvdXJjZXMpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGlmICghX3RoaXMyLmluaXRpYWxMb2FkKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDM7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgX3RoaXMyLmluaXRpYWxMb2FkID0gZmFsc2U7CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIpOwogICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgaWYgKCEoKHJlc291cmNlcyA9PT0gbnVsbCB8fCByZXNvdXJjZXMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlc291cmNlcy5sZW5ndGgpID09PSAwKSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA4OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNjsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXMyLnJlZnJlc2hHcm91cE1lbWJlcnNoaXBzKGZ1bmN0aW9uICgpIHt9KTsKICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gODsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXMyLnVwZGF0ZVJvd3ModHJ1ZSk7CiAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgIH0pKSgpOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgdXBkYXRlUm93czogZnVuY3Rpb24gdXBkYXRlUm93cygpIHsKICAgICAgdmFyIF9hcmd1bWVudHMgPSBhcmd1bWVudHMsCiAgICAgICAgX3RoaXMzID0gdGhpczsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkgewogICAgICAgIHZhciBmb3JjZTsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGZvcmNlID0gX2FyZ3VtZW50cy5sZW5ndGggPiAwICYmIF9hcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IF9hcmd1bWVudHNbMF0gOiBmYWxzZTsKICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDM7CiAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMy51cGRhdGVHcm91cFByaW5jaXBhbHMoZm9yY2UpOwogICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA1OwogICAgICAgICAgICAgIHJldHVybiBfdGhpczMuJHN0b3JlLmRpc3BhdGNoKCdtYW5hZ2VtZW50L2ZpbmRBbGwnLCB7CiAgICAgICAgICAgICAgICB0eXBlOiBNQU5BR0VNRU5ULkdMT0JBTF9ST0xFCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDc7CiAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMy4kc3RvcmUuZGlzcGF0Y2goJ3JhbmNoZXIvZmluZEFsbCcsIHsKICAgICAgICAgICAgICAgIHR5cGU6IE5PUk1BTi5QUklOQ0lQQUwsCiAgICAgICAgICAgICAgICBvcHQ6IHsKICAgICAgICAgICAgICAgICAgdXJsOiAnL3YzL3ByaW5jaXBhbHMnCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMyk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIHJlZnJlc2hHcm91cE1lbWJlcnNoaXBzOiBmdW5jdGlvbiByZWZyZXNoR3JvdXBNZW1iZXJzaGlwcyhidXR0b25Eb25lKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQoKSB7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNCQoX2NvbnRleHQ0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDQucHJldiA9IF9jb250ZXh0NC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dDQucHJldiA9IDA7CiAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAzOwogICAgICAgICAgICAgIHJldHVybiBfdGhpczQuJHN0b3JlLmRpc3BhdGNoKCdyYW5jaGVyL3JlcXVlc3QnLCB7CiAgICAgICAgICAgICAgICB1cmw6ICcvdjMvdXNlcnM/YWN0aW9uPXJlZnJlc2hhdXRocHJvdmlkZXJhY2Nlc3MnLAogICAgICAgICAgICAgICAgbWV0aG9kOiAncG9zdCcsCiAgICAgICAgICAgICAgICBkYXRhOiB7fQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSA1OwogICAgICAgICAgICAgIHJldHVybiBfdGhpczQudXBkYXRlR3JvdXBQcmluY2lwYWxzKHRydWUpOwogICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgYnV0dG9uRG9uZSh0cnVlKTsKICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDEyOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgX2NvbnRleHQ0LnByZXYgPSA4OwogICAgICAgICAgICAgIF9jb250ZXh0NC50MCA9IF9jb250ZXh0NFsiY2F0Y2giXSgwKTsKICAgICAgICAgICAgICBfdGhpczQuJHN0b3JlLmRpc3BhdGNoKCdncm93bC9mcm9tRXJyb3InLCB7CiAgICAgICAgICAgICAgICB0aXRsZTogJ0Vycm9yIHJlZnJlc2hpbmcgZ3JvdXAgbWVtYmVyc2hpcHMnLAogICAgICAgICAgICAgICAgZXJyOiBfY29udGV4dDQudDAKICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICByb290OiB0cnVlCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgYnV0dG9uRG9uZShmYWxzZSk7CiAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTQsIG51bGwsIFtbMCwgOF1dKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgdXBkYXRlR3JvdXBQcmluY2lwYWxzOiBmdW5jdGlvbiB1cGRhdGVHcm91cFByaW5jaXBhbHMoKSB7CiAgICAgIHZhciBfYXJndW1lbnRzMiA9IGFyZ3VtZW50cywKICAgICAgICBfdGhpczUgPSB0aGlzOwogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTUoKSB7CiAgICAgICAgdmFyIGZvcmNlOwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTUkKF9jb250ZXh0NSkgewogICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQ1LnByZXYgPSBfY29udGV4dDUubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgZm9yY2UgPSBfYXJndW1lbnRzMi5sZW5ndGggPiAwICYmIF9hcmd1bWVudHMyWzBdICE9PSB1bmRlZmluZWQgPyBfYXJndW1lbnRzMlswXSA6IGZhbHNlOwogICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gMzsKICAgICAgICAgICAgICByZXR1cm4gYXBwbHlQcm9kdWN0cyhfdGhpczUuJHN0b3JlKTsKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gNTsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXM1LiRzdG9yZS5kaXNwYXRjaCgnbWFuYWdlbWVudC9maW5kQWxsJywgewogICAgICAgICAgICAgICAgdHlwZTogTk9STUFOLlNQT09GRUQuR1JPVVBfUFJJTkNJUEFMLAogICAgICAgICAgICAgICAgb3B0OiB7CiAgICAgICAgICAgICAgICAgIGZvcmNlOiBmb3JjZQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIF90aGlzNS5yb3dzID0gX2NvbnRleHQ1LnNlbnQ7CiAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNSk7CiAgICAgIH0pKSgpOwogICAgfQogIH0KfTs="},{"version":3,"names":["ResourceTable","Loading","Masthead","NORMAN","MANAGEMENT","AsyncButton","applyProducts","NAME","MODE","_EDIT","mapState","BLANK_CLUSTER","allHash","components","props","resource","type","String","required","schema","Object","useQueryParamsForSimpleFiltering","Boolean","default","fetch","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_hash$user","_grbSchema$collection","authConfigSchema","grbSchema","hash","nonLocalAuthProvider","wrap","_callee$","_context","prev","next","updateRows","$store","getters","AUTH_CONFIG","GLOBAL_ROLE_BINDING","user","dispatch","url","providers","Promise","resolve","sent","find","p","name","enabled","canRefreshAccess","actions","refreshauthprovideraccess","canCreateGlobalRoleBinding","collectionMethods","includes","stop","data","rows","assignLocation","path","concat","SPOOFED","GROUP_PRINCIPAL","query","_defineProperty","initialLoad","computed","_objectSpread","watch","toRemove","resources","_this2","_callee2","_callee2$","_context2","abrupt","length","refreshGroupMemberships","methods","_arguments","arguments","_this3","_callee3","force","_callee3$","_context3","undefined","updateGroupPrincipals","GLOBAL_ROLE","PRINCIPAL","opt","buttonDone","_this4","_callee4","_callee4$","_context4","method","t0","title","err","root","_arguments2","_this5","_callee5","_callee5$","_context5"],"sources":["node_modules/@rancher/shell/list/group.principal.vue"],"sourcesContent":["<script>\nimport ResourceTable from '@shell/components/ResourceTable';\nimport Loading from '@shell/components/Loading';\nimport Masthead from '@shell/components/ResourceList/Masthead';\nimport { NORMAN, MANAGEMENT } from '@shell/config/types';\nimport AsyncButton from '@shell/components/AsyncButton';\nimport { applyProducts } from '@shell/store/type-map';\nimport { NAME } from '@shell/config/product/auth';\nimport { MODE, _EDIT } from '@shell/config/query-params';\nimport { mapState } from 'vuex';\nimport { BLANK_CLUSTER } from '@shell/store/store-types.js';\nimport { allHash } from '@shell/utils/promise';\n\nexport default {\n  components: {\n    AsyncButton, ResourceTable, Masthead, Loading\n  },\n  props: {\n    resource: {\n      type:     String,\n      required: true,\n    },\n\n    schema: {\n      type:     Object,\n      required: true,\n    },\n\n    useQueryParamsForSimpleFiltering: {\n      type:    Boolean,\n      default: false\n    }\n  },\n  async fetch() {\n    await this.updateRows();\n\n    const authConfigSchema = this.$store.getters[`management/schemaFor`](MANAGEMENT.AUTH_CONFIG);\n    const grbSchema = this.$store.getters['rancher/schemaFor'](NORMAN.GLOBAL_ROLE_BINDING);\n\n    const hash = await allHash({\n      user:      this.$store.dispatch('rancher/request', { url: '/v3/users?limit=0' }),\n      providers: authConfigSchema ? this.$store.dispatch(`management/findAll`, { type: MANAGEMENT.AUTH_CONFIG }) : Promise.resolve([])\n    });\n\n    const nonLocalAuthProvider = !!hash.providers.find((p) => p.name !== 'local' && p.enabled === true);\n\n    this.canRefreshAccess = nonLocalAuthProvider && !!hash.user?.actions?.refreshauthprovideraccess;\n    this.canCreateGlobalRoleBinding = nonLocalAuthProvider && grbSchema?.collectionMethods?.includes('POST');\n  },\n  data() {\n    return {\n      rows:                       [],\n      canCreateGlobalRoleBinding: false,\n      canRefreshAccess:           false,\n      assignLocation:             {\n        path:  `/c/${ BLANK_CLUSTER }/${ NAME }/${ NORMAN.SPOOFED.GROUP_PRINCIPAL }/assign-edit`,\n        query: { [MODE]: _EDIT }\n      },\n      initialLoad: true,\n    };\n  },\n  computed: { ...mapState('action-menu', ['showPromptRemove', 'toRemove']) },\n  watch:    {\n    async toRemove(resources) {\n      if (this.initialLoad) {\n        this.initialLoad = false;\n\n        return;\n      }\n      if (resources?.length === 0) {\n        await this.refreshGroupMemberships(() => {});\n        // spoofed collections normally get updated when promptRemove has completed (given the resources are of a spoofed type)..\n        // ... however in this use case it doesn't happen so do it manually (the removed resources are not globalRoleBindings and not spoofed)\n        await this.updateRows(true);\n      }\n    }\n  },\n  methods: {\n    async updateRows(force = false) {\n      await this.updateGroupPrincipals(force);\n\n      // Upfront load all global roles, this makes it easier to sync fetch them later on\n      await this.$store.dispatch('management/findAll', { type: MANAGEMENT.GLOBAL_ROLE });\n\n      await this.$store.dispatch('rancher/findAll', { type: NORMAN.PRINCIPAL, opt: { url: '/v3/principals' } });\n    },\n    async refreshGroupMemberships(buttonDone) {\n      try {\n        await this.$store.dispatch('rancher/request', {\n          url:    '/v3/users?action=refreshauthprovideraccess',\n          method: 'post',\n          data:   { },\n        });\n\n        await this.updateGroupPrincipals(true);\n\n        buttonDone(true);\n      } catch (err) {\n        this.$store.dispatch('growl/fromError', { title: 'Error refreshing group memberships', err }, { root: true });\n        buttonDone(false);\n      }\n    },\n    async updateGroupPrincipals(force = false) {\n      // This is needed in SSR, but not SPA. If this is not here... when cluster/findAll is dispatched... we fail to find the spoofed\n      // type's `getInstance` fn as it hasn't been registered (`instanceMethods` in type-map file is empty)\n      await applyProducts(this.$store);\n\n      // Force spoofed type getInstances to execute again\n      this.rows = await this.$store.dispatch('management/findAll', {\n        type: NORMAN.SPOOFED.GROUP_PRINCIPAL,\n        opt:  { force }\n      }, { root: true });\n    }\n  },\n\n};\n</script>\n\n<template>\n  <Loading v-if=\"$fetchState.pending\" />\n  <div v-else>\n    <Masthead\n      :schema=\"schema\"\n      :resource=\"resource\"\n    >\n      <template slot=\"extraActions\">\n        <AsyncButton\n          v-if=\"canRefreshAccess\"\n          mode=\"refresh\"\n          :action-label=\"t('authGroups.actions.refresh')\"\n          :waiting-label=\"t('authGroups.actions.refresh')\"\n          :success-label=\"t('authGroups.actions.refresh')\"\n          :error-label=\"t('authGroups.actions.refresh')\"\n          :class=\"{'mr-5': canCreateGlobalRoleBinding}\"\n          @click=\"refreshGroupMemberships\"\n        />\n        <n-link\n          v-if=\"canCreateGlobalRoleBinding\"\n          :to=\"assignLocation\"\n          class=\"btn role-primary\"\n        >\n          {{ t(\"authGroups.actions.assignRoles\") }}\n        </n-link>\n      </template>\n    </Masthead>\n\n    <ResourceTable\n      :schema=\"schema\"\n      :rows=\"rows\"\n      :use-query-params-for-simple-filtering=\"useQueryParamsForSimpleFiltering\"\n    />\n  </div>\n</template>\n"],"mappings":"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","ignoreList":[]}]}