{"remainingRequest":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js??ref--16-1!/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/ubuntu/suseconf/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ubuntu/suseconf/node_modules/@rancher/shell/detail/harvesterhci.io.management.cluster.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/ubuntu/suseconf/node_modules/@rancher/shell/detail/harvesterhci.io.management.cluster.vue","mtime":1725338146566},{"path":"/home/ubuntu/suseconf/babel.config.js","mtime":1725343995893},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js","mtime":1725271298942},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1725271300920}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5yZXBsYWNlLmpzIjsKaW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiL2hvbWUvdWJ1bnR1L3N1c2Vjb25mL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9yZWdlbmVyYXRvci9pbmRleC5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0IExvYWRpbmcgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvTG9hZGluZyc7CmltcG9ydCBSZXNvdXJjZVRhYnMgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvZm9ybS9SZXNvdXJjZVRhYnMnOwppbXBvcnQgQ29weUNvZGUgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvQ29weUNvZGUnOwppbXBvcnQgVGFiIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL1RhYmJlZC9UYWInOwppbXBvcnQgeyBhbGxIYXNoIH0gZnJvbSAnQHNoZWxsL3V0aWxzL3Byb21pc2UnOwpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgTG9hZGluZzogTG9hZGluZywKICAgIFJlc291cmNlVGFiczogUmVzb3VyY2VUYWJzLAogICAgVGFiOiBUYWIsCiAgICBDb3B5Q29kZTogQ29weUNvZGUKICB9LAogIHByb3BzOiB7CiAgICB2YWx1ZTogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIGRlZmF1bHQ6IGZ1bmN0aW9uIF9kZWZhdWx0KCkgewogICAgICAgIHJldHVybiB7fTsKICAgICAgfQogICAgfQogIH0sCiAgZmV0Y2g6IGZ1bmN0aW9uIGZldGNoKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvcigvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgIHZhciBoYXNoLCByZXM7CiAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgcmV0dXJuIF90aGlzLnZhbHVlLndhaXRGb3JQcm92aXNpb25lcigpOwogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICBoYXNoID0gewogICAgICAgICAgICAgIGNsdXN0ZXJUb2tlbjogX3RoaXMudmFsdWUuZ2V0T3JDcmVhdGVUb2tlbigpCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA1OwogICAgICAgICAgICByZXR1cm4gYWxsSGFzaChoYXNoKTsKICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgcmVzID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgX3RoaXMuYWxsTm9kZXMgPSByZXMuYWxsTm9kZXMgfHwgW107CiAgICAgICAgICAgIF90aGlzLmFsbE5vZGVQb29scyA9IHJlcy5hbGxOb2RlUG9vbHMgfHwgW107CiAgICAgICAgICAgIF90aGlzLmNsdXN0ZXJUb2tlbiA9IHJlcy5jbHVzdGVyVG9rZW47CiAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSk7CiAgICB9KSkoKTsKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjbHVzdGVyVG9rZW46IG51bGwKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgZGVmYXVsdFRhYjogZnVuY3Rpb24gZGVmYXVsdFRhYigpIHsKICAgICAgdmFyIF90aGlzJG1hY2hpbmVzOwogICAgICBpZiAodGhpcy5zaG93UmVnaXN0cmF0aW9uICYmICEoKF90aGlzJG1hY2hpbmVzID0gdGhpcy5tYWNoaW5lcykgIT09IG51bGwgJiYgX3RoaXMkbWFjaGluZXMgIT09IHZvaWQgMCAmJiBfdGhpcyRtYWNoaW5lcy5sZW5ndGgpKSB7CiAgICAgICAgcmV0dXJuICdyZWdpc3RyYXRpb24nOwogICAgICB9CiAgICAgIHJldHVybiAnJzsKICAgIH0sCiAgICBzaG93UmVnaXN0cmF0aW9uOiBmdW5jdGlvbiBzaG93UmVnaXN0cmF0aW9uKCkgewogICAgICBpZiAoIXRoaXMuY2x1c3RlclRva2VuKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIGlmICh0aGlzLnZhbHVlLmlzSW1wb3J0ZWQpIHsKICAgICAgICB2YXIgX3RoaXMkdmFsdWUkbWdtdDsKICAgICAgICByZXR1cm4gISgoX3RoaXMkdmFsdWUkbWdtdCA9IHRoaXMudmFsdWUubWdtdCkgIT09IG51bGwgJiYgX3RoaXMkdmFsdWUkbWdtdCAhPT0gdm9pZCAwICYmIF90aGlzJHZhbHVlJG1nbXQuaXNSZWFkeSk7CiAgICAgIH0KICAgICAgcmV0dXJuIGZhbHNlOwogICAgfSwKICAgIHJlZ2lzdHJhdGlvblVSTDogZnVuY3Rpb24gcmVnaXN0cmF0aW9uVVJMKCkgewogICAgICB2YXIgX3RoaXMkY2x1c3RlclRva2VuOwogICAgICByZXR1cm4gKCgoX3RoaXMkY2x1c3RlclRva2VuID0gdGhpcy5jbHVzdGVyVG9rZW4pID09PSBudWxsIHx8IF90aGlzJGNsdXN0ZXJUb2tlbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkY2x1c3RlclRva2VuLmNvbW1hbmQpIHx8ICcnKS5yZXBsYWNlKCdrdWJlY3RsIGFwcGx5IC1mICcsICcnKTsKICAgIH0KICB9Cn07"},{"version":3,"names":["Loading","ResourceTabs","CopyCode","Tab","allHash","components","props","value","type","Object","default","fetch","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","hash","res","wrap","_callee$","_context","prev","next","waitForProvisioner","clusterToken","getOrCreateToken","sent","allNodes","allNodePools","stop","data","computed","defaultTab","_this$machines","showRegistration","machines","length","isImported","_this$value$mgmt","mgmt","isReady","registrationURL","_this$clusterToken","command","replace"],"sources":["node_modules/@rancher/shell/detail/harvesterhci.io.management.cluster.vue"],"sourcesContent":["<script>\nimport Loading from '@shell/components/Loading';\nimport ResourceTabs from '@shell/components/form/ResourceTabs';\nimport CopyCode from '@shell/components/CopyCode';\nimport Tab from '@shell/components/Tabbed/Tab';\nimport { allHash } from '@shell/utils/promise';\n\nexport default {\n  components: {\n    Loading,\n    ResourceTabs,\n    Tab,\n    CopyCode,\n  },\n\n  props: {\n    value: {\n      type:    Object,\n      default: () => {\n        return {};\n      }\n    }\n  },\n\n  async fetch() {\n    await this.value.waitForProvisioner();\n\n    const hash = { clusterToken: this.value.getOrCreateToken() };\n\n    const res = await allHash(hash);\n\n    this.allNodes = res.allNodes || [];\n    this.allNodePools = res.allNodePools || [];\n    this.clusterToken = res.clusterToken;\n  },\n\n  data() {\n    return { clusterToken: null };\n  },\n\n  computed: {\n    defaultTab() {\n      if (this.showRegistration && !this.machines?.length) {\n        return 'registration';\n      }\n\n      return '';\n    },\n\n    showRegistration() {\n      if ( !this.clusterToken ) {\n        return false;\n      }\n\n      if ( this.value.isImported ) {\n        return !this.value.mgmt?.isReady;\n      }\n\n      return false;\n    },\n\n    registrationURL() {\n      return (this.clusterToken?.command || '').replace('kubectl apply -f ', '');\n    },\n  },\n};\n</script>\n\n<template>\n  <Loading v-if=\"$fetchState.pending\" />\n  <ResourceTabs\n    v-else\n    v-model=\"value\"\n    :default-tab=\"defaultTab\"\n  >\n    <Tab\n      v-if=\"showRegistration\"\n      name=\"registration\"\n      :label=\"t('cluster.tabs.registration')\"\n      :weight=\"2\"\n      class=\"p-10\"\n    >\n      <h4\n        v-clean-html=\"t('cluster.harvester.registration.step1', null, true)\"\n      />\n\n      <h4\n        v-clean-html=\"t('cluster.harvester.registration.step2', null, true)\"\n        class=\"mt-10\"\n      />\n\n      <h4\n        v-clean-html=\"t('cluster.harvester.registration.step3', null, true)\"\n        class=\"mt-10\"\n      />\n      <CopyCode class=\"m-10 p-10\">\n        {{ registrationURL }}\n      </CopyCode>\n    </Tab>\n  </ResourceTabs>\n</template>\n"],"mappings":";;;;;AACA,OAAAA,OAAA;AACA,OAAAC,YAAA;AACA,OAAAC,QAAA;AACA,OAAAC,GAAA;AACA,SAAAC,OAAA;AAEA;EACAC,UAAA;IACAL,OAAA,EAAAA,OAAA;IACAC,YAAA,EAAAA,YAAA;IACAE,GAAA,EAAAA,GAAA;IACAD,QAAA,EAAAA;EACA;EAEAI,KAAA;IACAC,KAAA;MACAC,IAAA,EAAAC,MAAA;MACAC,OAAA,WAAAA,SAAA;QACA;MACA;IACA;EACA;EAEAC,KAAA,WAAAA,MAAA;IAAA,IAAAC,KAAA;IAAA,OAAAC,iBAAA,cAAAC,mBAAA,CAAAC,IAAA,UAAAC,QAAA;MAAA,IAAAC,IAAA,EAAAC,GAAA;MAAA,OAAAJ,mBAAA,CAAAK,IAAA,UAAAC,SAAAC,QAAA;QAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;UAAA;YAAAF,QAAA,CAAAE,IAAA;YAAA,OACAX,KAAA,CAAAL,KAAA,CAAAiB,kBAAA;UAAA;YAEAP,IAAA;cAAAQ,YAAA,EAAAb,KAAA,CAAAL,KAAA,CAAAmB,gBAAA;YAAA;YAAAL,QAAA,CAAAE,IAAA;YAAA,OAEAnB,OAAA,CAAAa,IAAA;UAAA;YAAAC,GAAA,GAAAG,QAAA,CAAAM,IAAA;YAEAf,KAAA,CAAAgB,QAAA,GAAAV,GAAA,CAAAU,QAAA;YACAhB,KAAA,CAAAiB,YAAA,GAAAX,GAAA,CAAAW,YAAA;YACAjB,KAAA,CAAAa,YAAA,GAAAP,GAAA,CAAAO,YAAA;UAAA;UAAA;YAAA,OAAAJ,QAAA,CAAAS,IAAA;QAAA;MAAA,GAAAd,OAAA;IAAA;EACA;EAEAe,IAAA,WAAAA,KAAA;IACA;MAAAN,YAAA;IAAA;EACA;EAEAO,QAAA;IACAC,UAAA,WAAAA,WAAA;MAAA,IAAAC,cAAA;MACA,SAAAC,gBAAA,OAAAD,cAAA,QAAAE,QAAA,cAAAF,cAAA,eAAAA,cAAA,CAAAG,MAAA;QACA;MACA;MAEA;IACA;IAEAF,gBAAA,WAAAA,iBAAA;MACA,UAAAV,YAAA;QACA;MACA;MAEA,SAAAlB,KAAA,CAAA+B,UAAA;QAAA,IAAAC,gBAAA;QACA,UAAAA,gBAAA,QAAAhC,KAAA,CAAAiC,IAAA,cAAAD,gBAAA,eAAAA,gBAAA,CAAAE,OAAA;MACA;MAEA;IACA;IAEAC,eAAA,WAAAA,gBAAA;MAAA,IAAAC,kBAAA;MACA,UAAAA,kBAAA,QAAAlB,YAAA,cAAAkB,kBAAA,uBAAAA,kBAAA,CAAAC,OAAA,SAAAC,OAAA;IACA;EACA;AACA","ignoreList":[]}]}