{"remainingRequest":"/home/ubuntu/susecon-2024-ext-demo/node_modules/babel-loader/lib/index.js??ref--16-1!/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/promptRemove/mixin/roleDeletionCheck.js","dependencies":[{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/promptRemove/mixin/roleDeletionCheck.js","mtime":1725271280091},{"path":"/home/ubuntu/susecon-2024-ext-demo/babel.config.js","mtime":1725268750245},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/babel-loader/lib/index.js","mtime":1725271298942}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3JzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiOwppbXBvcnQgX3RvQ29uc3VtYWJsZUFycmF5IGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvQ29uc3VtYWJsZUFycmF5IjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5IjsKaW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiL2hvbWUvdWJ1bnR1L3N1c2Vjb24tMjAyNC1leHQtZGVtby9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvcmVnZW5lcmF0b3IvaW5kZXguanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zZXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lc25leHQuc2V0LmFkZC1hbGwuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lc25leHQuc2V0LmRlbGV0ZS1hbGwuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lc25leHQuc2V0LmRpZmZlcmVuY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lc25leHQuc2V0LmV2ZXJ5LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXNuZXh0LnNldC5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lc25leHQuc2V0LmZpbmQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lc25leHQuc2V0LmludGVyc2VjdGlvbi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzbmV4dC5zZXQuaXMtZGlzam9pbnQtZnJvbS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzbmV4dC5zZXQuaXMtc3Vic2V0LW9mLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXNuZXh0LnNldC5pcy1zdXBlcnNldC1vZi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzbmV4dC5zZXQuam9pbi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzbmV4dC5zZXQubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXNuZXh0LnNldC5yZWR1Y2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lc25leHQuc2V0LnNvbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lc25leHQuc2V0LnN5bW1ldHJpYy1kaWZmZXJlbmNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXNuZXh0LnNldC51bmlvbi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yLmpzIjsKZnVuY3Rpb24gb3duS2V5cyhlLCByKSB7IHZhciB0ID0gT2JqZWN0LmtleXMoZSk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBvID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKTsgciAmJiAobyA9IG8uZmlsdGVyKGZ1bmN0aW9uIChyKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsIHIpLmVudW1lcmFibGU7IH0pKSwgdC5wdXNoLmFwcGx5KHQsIG8pOyB9IHJldHVybiB0OyB9CmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQoZSkgeyBmb3IgKHZhciByID0gMTsgciA8IGFyZ3VtZW50cy5sZW5ndGg7IHIrKykgeyB2YXIgdCA9IG51bGwgIT0gYXJndW1lbnRzW3JdID8gYXJndW1lbnRzW3JdIDoge307IHIgJSAyID8gb3duS2V5cyhPYmplY3QodCksICEwKS5mb3JFYWNoKGZ1bmN0aW9uIChyKSB7IF9kZWZpbmVQcm9wZXJ0eShlLCByLCB0W3JdKTsgfSkgOiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGUsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHQpKSA6IG93bktleXMoT2JqZWN0KHQpKS5mb3JFYWNoKGZ1bmN0aW9uIChyKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCByLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsIHIpKTsgfSk7IH0gcmV0dXJuIGU7IH0KaW1wb3J0IHsgbWFwU3RhdGUsIG1hcEdldHRlcnMgfSBmcm9tICd2dWV4JzsKaW1wb3J0IHsgcmVzb3VyY2VOYW1lcyB9IGZyb20gJ0BzaGVsbC91dGlscy9zdHJpbmcnOwppbXBvcnQgeyBNQU5BR0VNRU5UIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy90eXBlcyc7CmltcG9ydCB7IFNVQlRZUEVfTUFQUElORyB9IGZyb20gJ0BzaGVsbC9tb2RlbHMvbWFuYWdlbWVudC5jYXR0bGUuaW8ucm9sZXRlbXBsYXRlJzsKdmFyIENMVVNURVIgPSBTVUJUWVBFX01BUFBJTkcuQ0xVU1RFUi5rZXk7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgd2FybmluZzogJycsCiAgICAgIGluZm86ICcnCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBtYXBTdGF0ZSgnYWN0aW9uLW1lbnUnLCBbJ3RvUmVtb3ZlJ10pKSwgbWFwR2V0dGVycyh7CiAgICB0OiAnaTE4bi90JwogIH0pKSwge30sIHsKICAgIG5hbWVzOiBmdW5jdGlvbiBuYW1lcygpIHsKICAgICAgcmV0dXJuIHRoaXMudG9SZW1vdmUubWFwKGZ1bmN0aW9uIChvYmopIHsKICAgICAgICByZXR1cm4gb2JqLm5hbWVEaXNwbGF5OwogICAgICB9KS5zbGljZSgwLCA1KTsKICAgIH0sCiAgICBwbHVzTW9yZTogZnVuY3Rpb24gcGx1c01vcmUoKSB7CiAgICAgIHZhciByZW1haW5pbmcgPSB0aGlzLnRvUmVtb3ZlLmxlbmd0aCAtIHRoaXMubmFtZXMubGVuZ3RoOwogICAgICByZXR1cm4gdGhpcy50KCdwcm9tcHRSZW1vdmUuYW5kT3RoZXJzJywgewogICAgICAgIGNvdW50OiByZW1haW5pbmcKICAgICAgfSk7CiAgICB9CiAgfSksCiAgd2F0Y2g6IHsKICAgIHZhbHVlOiB7CiAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uIGhhbmRsZXIobmV1KSB7CiAgICAgICAgdGhpcy5oYW5kbGVSb2xlRGVsZXRpb25DaGVjayhuZXUsIG5ldVswXS50eXBlLCB0aGlzLiRyb3V0ZS5oYXNoKTsKICAgICAgfSwKICAgICAgaW1tZWRpYXRlOiB0cnVlCiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICByZXNvdXJjZU5hbWVzOiByZXNvdXJjZU5hbWVzLAogICAgaGFuZGxlUm9sZURlbGV0aW9uQ2hlY2s6IGZ1bmN0aW9uIGhhbmRsZVJvbGVEZWxldGlvbkNoZWNrKHJvbGVzVG9SZW1vdmUsIHJlc291cmNlVHlwZSwgcXVlcnlIYXNoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciByZXNvdXJjZVRvQ2hlY2ssIHByb3BUb01hdGNoLCBudW1iZXJPZlJvbGVzV2l0aEJpbmRzLCB1bmlxdWVVc2Vyc1dpdGhCaW5kcywgX3VzZXJzJGRhdGEsIHJlcXVlc3QsIHVzZXJzLCB1c2VyTWFwOwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfdGhpcy53YXJuaW5nID0gJyc7CiAgICAgICAgICAgICAgbnVtYmVyT2ZSb2xlc1dpdGhCaW5kcyA9IDA7CiAgICAgICAgICAgICAgdW5pcXVlVXNlcnNXaXRoQmluZHMgPSBuZXcgU2V0KCk7CiAgICAgICAgICAgICAgX3RoaXMuaW5mbyA9IF90aGlzLnQoJ3JiYWMuZ2xvYmFsUm9sZXMud2FpdGluZycsIHsKICAgICAgICAgICAgICAgIGNvdW50OiByb2xlc1RvUmVtb3ZlLmxlbmd0aAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIF9jb250ZXh0LnQwID0gcmVzb3VyY2VUeXBlOwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSBfY29udGV4dC50MCA9PT0gTUFOQUdFTUVOVC5HTE9CQUxfUk9MRSA/IDcgOiAxMDsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgIHJlc291cmNlVG9DaGVjayA9IE1BTkFHRU1FTlQuR0xPQkFMX1JPTEVfQklORElORzsKICAgICAgICAgICAgICBwcm9wVG9NYXRjaCA9ICdnbG9iYWxSb2xlTmFtZSc7CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgiYnJlYWsiLCAxMyk7CiAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgaWYgKHF1ZXJ5SGFzaC5pbmNsdWRlcyhDTFVTVEVSKSkgewogICAgICAgICAgICAgICAgcmVzb3VyY2VUb0NoZWNrID0gTUFOQUdFTUVOVC5DTFVTVEVSX1JPTEVfVEVNUExBVEVfQklORElORzsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgcmVzb3VyY2VUb0NoZWNrID0gTUFOQUdFTUVOVC5QUk9KRUNUX1JPTEVfVEVNUExBVEVfQklORElORzsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgcHJvcFRvTWF0Y2ggPSAncm9sZVRlbXBsYXRlTmFtZSc7CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgiYnJlYWsiLCAxMyk7CiAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDEzOwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNjsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuJHN0b3JlLmRpc3BhdGNoKCdtYW5hZ2VtZW50L3JlcXVlc3QnLCB7CiAgICAgICAgICAgICAgICB1cmw6ICIvdjEvIi5jb25jYXQocmVzb3VyY2VUb0NoZWNrKSwKICAgICAgICAgICAgICAgIG1ldGhvZDogJ2dldCcKICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICByb290OiB0cnVlCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNhc2UgMTY6CiAgICAgICAgICAgICAgcmVxdWVzdCA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE5OwogICAgICAgICAgICAgIHJldHVybiBfdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ21hbmFnZW1lbnQvcmVxdWVzdCcsIHsKICAgICAgICAgICAgICAgIHVybDogIi92MS8iLmNvbmNhdChNQU5BR0VNRU5ULlVTRVIpLAogICAgICAgICAgICAgICAgbWV0aG9kOiAnZ2V0JwogICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgY2FzZSAxOToKICAgICAgICAgICAgICB1c2VycyA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgdXNlck1hcCA9IChfdXNlcnMkZGF0YSA9IHVzZXJzLmRhdGEpID09PSBudWxsIHx8IF91c2VycyRkYXRhID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdXNlcnMkZGF0YS5yZWR1Y2UoZnVuY3Rpb24gKG1hcCwgdXNlcikgewogICAgICAgICAgICAgICAgaWYgKHVzZXIudXNlcm5hbWUpIHsKICAgICAgICAgICAgICAgICAgbWFwW3VzZXIuaWRdID0gdXNlcjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBtYXA7CiAgICAgICAgICAgICAgfSwge30pOwogICAgICAgICAgICAgIGlmIChyZXF1ZXN0LmRhdGEgJiYgcmVxdWVzdC5kYXRhLmxlbmd0aCkgewogICAgICAgICAgICAgICAgcm9sZXNUb1JlbW92ZS5mb3JFYWNoKGZ1bmN0aW9uICh0b1JlbW92ZSkgewogICAgICAgICAgICAgICAgICB2YXIgdXNlZFJvbGVzID0gcmVxdWVzdC5kYXRhLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtW3Byb3BUb01hdGNoXSA9PT0gdG9SZW1vdmUuaWQ7CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICBpZiAodXNlZFJvbGVzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgIHZhciB1bmlxdWVVc2VycyA9IF90b0NvbnN1bWFibGVBcnJheShuZXcgU2V0KHVzZWRSb2xlcy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLnVzZXJOYW1lOwogICAgICAgICAgICAgICAgICAgIH0pLmZpbHRlcihmdW5jdGlvbiAodXNlcikgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVzZXJNYXBbdXNlcl07CiAgICAgICAgICAgICAgICAgICAgfSkpKTsKICAgICAgICAgICAgICAgICAgICBpZiAodW5pcXVlVXNlcnMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgICBudW1iZXJPZlJvbGVzV2l0aEJpbmRzKys7CiAgICAgICAgICAgICAgICAgICAgICB1bmlxdWVVc2Vycy5mb3JFYWNoKGZ1bmN0aW9uICh1c2VyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1bmlxdWVVc2Vyc1dpdGhCaW5kcy5hZGQodXNlcik7CiAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgaWYgKG51bWJlck9mUm9sZXNXaXRoQmluZHMgJiYgdW5pcXVlVXNlcnNXaXRoQmluZHMuc2l6ZSkgewogICAgICAgICAgICAgICAgICBfdGhpcy5pbmZvID0gJyc7CiAgICAgICAgICAgICAgICAgIF90aGlzLndhcm5pbmcgPSBfdGhpcy50KCdyYmFjLmdsb2JhbFJvbGVzLnVzZXJzQm91bmQnLCB7CiAgICAgICAgICAgICAgICAgICAgY291bnQ6IHVuaXF1ZVVzZXJzV2l0aEJpbmRzLnNpemUKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBfdGhpcy5pbmZvID0gX3RoaXMudCgncmJhYy5nbG9iYWxSb2xlcy5ub3RCb3VuZCcsIG51bGwsIHRydWUpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBfdGhpcy5pbmZvID0gX3RoaXMudCgncmJhYy5nbG9iYWxSb2xlcy5ub3RCb3VuZCcsIG51bGwsIHRydWUpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjc7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMjQ6CiAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDI0OwogICAgICAgICAgICAgIF9jb250ZXh0LnQxID0gX2NvbnRleHRbImNhdGNoIl0oMTMpOwogICAgICAgICAgICAgIF90aGlzLmluZm8gPSBfdGhpcy50KCdyYmFjLmdsb2JhbFJvbGVzLnVuYWJsZVRvQ2hlY2snKTsKICAgICAgICAgICAgY2FzZSAyNzoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUsIG51bGwsIFtbMTMsIDI0XV0pOwogICAgICB9KSkoKTsKICAgIH0KICB9Cn07"},{"version":3,"names":["mapState","mapGetters","resourceNames","MANAGEMENT","SUBTYPE_MAPPING","CLUSTER","key","data","warning","info","computed","_objectSpread","t","names","toRemove","map","obj","nameDisplay","slice","plusMore","remaining","length","count","watch","value","handler","neu","handleRoleDeletionCheck","type","$route","hash","immediate","methods","rolesToRemove","resourceType","queryHash","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","resourceToCheck","propToMatch","numberOfRolesWithBinds","uniqueUsersWithBinds","_users$data","request","users","userMap","wrap","_callee$","_context","prev","next","Set","t0","GLOBAL_ROLE","GLOBAL_ROLE_BINDING","abrupt","includes","CLUSTER_ROLE_TEMPLATE_BINDING","PROJECT_ROLE_TEMPLATE_BINDING","$store","dispatch","url","concat","method","root","sent","USER","reduce","user","username","id","forEach","usedRoles","filter","item","uniqueUsers","_toConsumableArray","userName","add","size","t1","stop"],"sources":["/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/promptRemove/mixin/roleDeletionCheck.js"],"sourcesContent":["import { mapState, mapGetters } from 'vuex';\nimport { resourceNames } from '@shell/utils/string';\nimport { MANAGEMENT } from '@shell/config/types';\nimport { SUBTYPE_MAPPING } from '@shell/models/management.cattle.io.roletemplate';\nconst CLUSTER = SUBTYPE_MAPPING.CLUSTER.key;\n\nexport default {\n  data() {\n    return {\n      warning: '',\n      info:    '',\n    };\n  },\n\n  computed: {\n    ...mapState('action-menu', ['toRemove']),\n    ...mapGetters({ t: 'i18n/t' }),\n\n    names() {\n      return this.toRemove.map((obj) => obj.nameDisplay).slice(0, 5);\n    },\n\n    plusMore() {\n      const remaining = this.toRemove.length - this.names.length;\n\n      return this.t('promptRemove.andOthers', { count: remaining });\n    },\n  },\n  watch: {\n    value: {\n      handler(neu) {\n        this.handleRoleDeletionCheck(neu, neu[0].type, this.$route.hash);\n      },\n      immediate: true\n    }\n  },\n  methods: {\n    resourceNames,\n    async handleRoleDeletionCheck(rolesToRemove, resourceType, queryHash) {\n      this.warning = '';\n      let resourceToCheck;\n      let propToMatch;\n      let numberOfRolesWithBinds = 0;\n      const uniqueUsersWithBinds = new Set();\n\n      this.info = this.t('rbac.globalRoles.waiting', { count: rolesToRemove.length });\n\n      switch (resourceType) {\n      case MANAGEMENT.GLOBAL_ROLE:\n        resourceToCheck = MANAGEMENT.GLOBAL_ROLE_BINDING;\n        propToMatch = 'globalRoleName';\n        break;\n      default:\n        if (queryHash.includes(CLUSTER)) {\n          resourceToCheck = MANAGEMENT.CLUSTER_ROLE_TEMPLATE_BINDING;\n        } else {\n          resourceToCheck = MANAGEMENT.PROJECT_ROLE_TEMPLATE_BINDING;\n        }\n        propToMatch = 'roleTemplateName';\n        break;\n      }\n\n      try {\n        const request = await this.$store.dispatch('management/request', {\n          url:    `/v1/${ resourceToCheck }`,\n          method: 'get',\n        }, { root: true });\n\n        // We need to fetch the users here in order to get an accurate count when selecting global roles.\n        const users = await this.$store.dispatch('management/request', {\n          url:    `/v1/${ MANAGEMENT.USER }`,\n          method: 'get',\n        }, { root: true });\n\n        const userMap = users.data?.reduce((map, user) => {\n          if ( user.username ) {\n            map[user.id] = user;\n          }\n\n          return map;\n        }, {});\n\n        if (request.data && request.data.length) {\n          rolesToRemove.forEach((toRemove) => {\n            const usedRoles = request.data.filter((item) => item[propToMatch] === toRemove.id);\n\n            if (usedRoles.length) {\n              const uniqueUsers = [...new Set(usedRoles.map((item) => item.userName).filter((user) => userMap[user]))];\n\n              if (uniqueUsers.length) {\n                numberOfRolesWithBinds++;\n                uniqueUsers.forEach((user) => uniqueUsersWithBinds.add(user));\n              }\n            }\n          });\n\n          if (numberOfRolesWithBinds && uniqueUsersWithBinds.size) {\n            this.info = '';\n            this.warning = this.t('rbac.globalRoles.usersBound', { count: uniqueUsersWithBinds.size });\n          } else {\n            this.info = this.t('rbac.globalRoles.notBound', null, true);\n          }\n        } else {\n          this.info = this.t('rbac.globalRoles.notBound', null, true);\n        }\n      } catch (e) {\n        this.info = this.t('rbac.globalRoles.unableToCheck');\n      }\n    },\n  },\n};\n"],"mappings":"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","ignoreList":[]}]}