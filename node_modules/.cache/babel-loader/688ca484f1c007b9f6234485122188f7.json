{"remainingRequest":"/home/ubuntu/susecon-2024-ext-demo/node_modules/babel-loader/lib/index.js??ref--16-1!/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/models/constraints.gatekeeper.sh.constraint.js","dependencies":[{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/models/constraints.gatekeeper.sh.constraint.js","mtime":1725271280091},{"path":"/home/ubuntu/susecon-2024-ext-demo/babel.config.js","mtime":1725268750245},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/babel-loader/lib/index.js","mtime":1725271298942}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3JzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWZsZWN0LmNvbnN0cnVjdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5IjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcyI7CmltcG9ydCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIjsKaW1wb3J0IF9nZXQgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZ2V0IjsKaW1wb3J0IF9nZXRQcm90b3R5cGVPZiBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9nZXRQcm90b3R5cGVPZiI7CmltcG9ydCBfaW5oZXJpdHMgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vaW5oZXJpdHMiOwpmdW5jdGlvbiBvd25LZXlzKGUsIHIpIHsgdmFyIHQgPSBPYmplY3Qua2V5cyhlKTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIG8gPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGUpOyByICYmIChvID0gby5maWx0ZXIoZnVuY3Rpb24gKHIpIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSwgcikuZW51bWVyYWJsZTsgfSkpLCB0LnB1c2guYXBwbHkodCwgbyk7IH0gcmV0dXJuIHQ7IH0KZnVuY3Rpb24gX29iamVjdFNwcmVhZChlKSB7IGZvciAodmFyIHIgPSAxOyByIDwgYXJndW1lbnRzLmxlbmd0aDsgcisrKSB7IHZhciB0ID0gbnVsbCAhPSBhcmd1bWVudHNbcl0gPyBhcmd1bWVudHNbcl0gOiB7fTsgciAlIDIgPyBvd25LZXlzKE9iamVjdCh0KSwgITApLmZvckVhY2goZnVuY3Rpb24gKHIpIHsgX2RlZmluZVByb3BlcnR5KGUsIHIsIHRbcl0pOyB9KSA6IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzID8gT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnModCkpIDogb3duS2V5cyhPYmplY3QodCkpLmZvckVhY2goZnVuY3Rpb24gKHIpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIHIsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCwgcikpOyB9KTsgfSByZXR1cm4gZTsgfQppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuYXNzaWduLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnByb21pc2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yLmpzIjsKaW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiL2hvbWUvdWJ1bnR1L3N1c2Vjb24tMjAyNC1leHQtZGVtby9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvcmVnZW5lcmF0b3IvaW5kZXguanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmZ1bmN0aW9uIF9jYWxsU3VwZXIodCwgbywgZSkgeyByZXR1cm4gbyA9IF9nZXRQcm90b3R5cGVPZihvKSwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odCwgX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpID8gUmVmbGVjdC5jb25zdHJ1Y3QobywgZSB8fCBbXSwgX2dldFByb3RvdHlwZU9mKHQpLmNvbnN0cnVjdG9yKSA6IG8uYXBwbHkodCwgZSkpOyB9CmZ1bmN0aW9uIF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKSB7IHRyeSB7IHZhciB0ID0gIUJvb2xlYW4ucHJvdG90eXBlLnZhbHVlT2YuY2FsbChSZWZsZWN0LmNvbnN0cnVjdChCb29sZWFuLCBbXSwgZnVuY3Rpb24gKCkge30pKTsgfSBjYXRjaCAodCkge30gcmV0dXJuIChfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0ID0gZnVuY3Rpb24gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpIHsgcmV0dXJuICEhdDsgfSkoKTsgfQppbXBvcnQganN5YW1sIGZyb20gJ2pzLXlhbWwnOwppbXBvcnQgU3RldmVNb2RlbCBmcm9tICdAc2hlbGwvcGx1Z2lucy9zdGV2ZS9zdGV2ZS1jbGFzcyc7CmltcG9ydCB7IGRvd25sb2FkRmlsZSB9IGZyb20gJ0BzaGVsbC91dGlscy9kb3dubG9hZCc7CmV4cG9ydCB2YXIgRU5GT1JDRU1FTlRfQUNUSU9OX1ZBTFVFUyA9IHsKICBERU5ZOiAnZGVueScsCiAgRFJZUlVOOiAnZHJ5cnVuJwp9Owp2YXIgR2F0ZUtlZXBlckNvbnN0cmFpbnQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9TdGV2ZU1vZGVsKSB7CiAgZnVuY3Rpb24gR2F0ZUtlZXBlckNvbnN0cmFpbnQoKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgR2F0ZUtlZXBlckNvbnN0cmFpbnQpOwogICAgcmV0dXJuIF9jYWxsU3VwZXIodGhpcywgR2F0ZUtlZXBlckNvbnN0cmFpbnQsIGFyZ3VtZW50cyk7CiAgfQogIF9pbmhlcml0cyhHYXRlS2VlcGVyQ29uc3RyYWludCwgX1N0ZXZlTW9kZWwpOwogIHJldHVybiBfY3JlYXRlQ2xhc3MoR2F0ZUtlZXBlckNvbnN0cmFpbnQsIFt7CiAgICBrZXk6ICJfYXZhaWxhYmxlQWN0aW9ucyIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgdmFyIG91dCA9IF9nZXQoX2dldFByb3RvdHlwZU9mKEdhdGVLZWVwZXJDb25zdHJhaW50LnByb3RvdHlwZSksICJfYXZhaWxhYmxlQWN0aW9ucyIsIHRoaXMpOwogICAgICB2YXIgdCA9IHRoaXMuJHJvb3RHZXR0ZXJzWydpMThuL3QnXTsKICAgICAgdmFyIGRvd25sb2FkVmlvbGF0aW9ucyA9IHsKICAgICAgICBhY3Rpb246ICdkb3dubG9hZFZpb2xhdGlvbnMnLAogICAgICAgIGljb246ICdpY29uIGljb24tZncgaWNvbi1kb3dubG9hZCcsCiAgICAgICAgbGFiZWw6IHQoJ2dhdGVrZWVwZXJDb25zdHJhaW50LmRvd25sb2FkVmlvbGF0aW9ucycpLAogICAgICAgIHRvdGFsOiAxCiAgICAgIH07CiAgICAgIG91dC51bnNoaWZ0KGRvd25sb2FkVmlvbGF0aW9ucyk7CiAgICAgIHJldHVybiBvdXQ7CiAgICB9CiAgfSwgewogICAga2V5OiAic2F2ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3NhdmUgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBjb25zdHJhaW50LCByZXNvdXJjZVZlcnNpb24sIF9jb25zdHJhaW50OwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBpZiAoIXRoaXMuY29uc3RyYWludCkgewogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDc7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmluZExhdGVzdENvbnN0cmFpbnQoKTsKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIGNvbnN0cmFpbnQgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgIHJlc291cmNlVmVyc2lvbiA9IChfY29uc3RyYWludCA9IGNvbnN0cmFpbnQpID09PSBudWxsIHx8IF9jb25zdHJhaW50ID09PSB2b2lkIDAgfHwgKF9jb25zdHJhaW50ID0gX2NvbnN0cmFpbnQubWV0YWRhdGEpID09PSBudWxsIHx8IF9jb25zdHJhaW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfY29uc3RyYWludC5yZXNvdXJjZVZlcnNpb247CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEwOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDk7CiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJGRpc3BhdGNoKCdjbHVzdGVyL2NyZWF0ZScsIHsKICAgICAgICAgICAgICAgIHR5cGU6ICJjb25zdHJhaW50cy5nYXRla2VlcGVyLnNoLiIuY29uY2F0KHRoaXMua2luZC50b0xvd2VyQ2FzZSgpKQogICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgIGNvbnN0cmFpbnQgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgIGNvbnN0cmFpbnQuc3BlYyA9IHRoaXMuc3BlYzsKICAgICAgICAgICAgICBjb25zdHJhaW50Lm1ldGFkYXRhID0gdGhpcy5tZXRhZGF0YTsKICAgICAgICAgICAgICBpZiAocmVzb3VyY2VWZXJzaW9uKSB7CiAgICAgICAgICAgICAgICBjb25zdHJhaW50Lm1ldGFkYXRhLnJlc291cmNlVmVyc2lvbiA9IHJlc291cmNlVmVyc2lvbjsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE1OwogICAgICAgICAgICAgIHJldHVybiBjb25zdHJhaW50LnNhdmUoKTsKICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUsIHRoaXMpOwogICAgICB9KSk7CiAgICAgIGZ1bmN0aW9uIHNhdmUoKSB7CiAgICAgICAgcmV0dXJuIF9zYXZlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KICAgICAgcmV0dXJuIHNhdmU7CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJkb3dubG9hZFZpb2xhdGlvbnMiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9kb3dubG9hZFZpb2xhdGlvbnMgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgUGFwYSwgdmlvbGF0aW9ucywgY3N2OwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAyOwogICAgICAgICAgICAgIHJldHVybiBpbXBvcnQoIC8qIHdlYnBhY2tDaHVua05hbWU6ICJjc3YiICovJ3BhcGFwYXJzZScpOwogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgUGFwYSA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICB2aW9sYXRpb25zID0gKHRoaXMudmlvbGF0aW9ucyB8fCBbXSkubWFwKGZ1bmN0aW9uICh2aW9sYXRpb24pIHsKICAgICAgICAgICAgICAgICAgZGVsZXRlIHZpb2xhdGlvbi5yZXNvdXJjZUxpbms7CiAgICAgICAgICAgICAgICAgIGRlbGV0ZSB2aW9sYXRpb24uY29uc3RyYWludExpbms7CiAgICAgICAgICAgICAgICAgIHJldHVybiB2aW9sYXRpb247CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGNzdiA9IFBhcGEudW5wYXJzZSh2aW9sYXRpb25zKTsKICAgICAgICAgICAgICAgIGRvd25sb2FkRmlsZSgidmlvbGF0aW9ucy0iLmNvbmNhdCh0aGlzLm5hbWUsICIuY3N2IiksIGNzdiwgJ2FwcGxpY2F0aW9uL2NzdicpOwogICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgICAgICAgdGhpcy4kZGlzcGF0Y2goJ2dyb3dsL2Zyb21FcnJvcicsIHsKICAgICAgICAgICAgICAgICAgdGl0bGU6ICdFcnJvciBkb3dubG9hZGluZyBmaWxlJywKICAgICAgICAgICAgICAgICAgZXJyOiBlcnIKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgcm9vdDogdHJ1ZQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIsIHRoaXMpOwogICAgICB9KSk7CiAgICAgIGZ1bmN0aW9uIGRvd25sb2FkVmlvbGF0aW9ucygpIHsKICAgICAgICByZXR1cm4gX2Rvd25sb2FkVmlvbGF0aW9ucy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CiAgICAgIHJldHVybiBkb3dubG9hZFZpb2xhdGlvbnM7CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJjbGVhbkZvck5ldyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY2xlYW5Gb3JOZXcoKSB7CiAgICAgIHRoaXMuJGRpc3BhdGNoKCJjbGVhbkZvck5ldyIsIHRoaXMpOwogICAgICBpZiAodGhpcy5jb25zdHJhaW50KSB7CiAgICAgICAgZGVsZXRlIHRoaXMuY29uc3RyYWludDsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogInNhdmVZYW1sIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzYXZlWWFtbCh5YW1sKSB7CiAgICAgIHZhciBwYXJzZWQgPSBqc3lhbWwubG9hZCh5YW1sKTsKICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLCBwYXJzZWQpOwogICAgICByZXR1cm4gdGhpcy5zYXZlKCk7CiAgICB9CiAgfSwgewogICAga2V5OiAicmVtb3ZlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfcmVtb3ZlID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgICAgdmFyIGNvbnN0cmFpbnQ7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDI7CiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmluZExhdGVzdENvbnN0cmFpbnQoKTsKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIGNvbnN0cmFpbnQgPSBfY29udGV4dDMuc2VudDsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIiwgY29uc3RyYWludC5yZW1vdmUoKSk7CiAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMywgdGhpcyk7CiAgICAgIH0pKTsKICAgICAgZnVuY3Rpb24gcmVtb3ZlKCkgewogICAgICAgIHJldHVybiBfcmVtb3ZlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KICAgICAgcmV0dXJuIHJlbW92ZTsKICAgIH0oKQogIH0sIHsKICAgIGtleTogImZpbmRMYXRlc3RDb25zdHJhaW50IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBmaW5kTGF0ZXN0Q29uc3RyYWludCgpIHsKICAgICAgcmV0dXJuIHRoaXMuJGRpc3BhdGNoKCdjbHVzdGVyL2ZpbmQnLCB7CiAgICAgICAgdHlwZTogdGhpcy5jb25zdHJhaW50LnR5cGUsCiAgICAgICAgaWQ6IHRoaXMuY29uc3RyYWludC5pZCwKICAgICAgICBvcHQ6IHsKICAgICAgICAgIGZvcmNlOiB0cnVlCiAgICAgICAgfQogICAgICB9LCB7CiAgICAgICAgcm9vdDogdHJ1ZQogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJ0b3RhbFZpb2xhdGlvbnMiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHZhciBfdGhpcyRzdGF0dXM7CiAgICAgIHJldHVybiAoKF90aGlzJHN0YXR1cyA9IHRoaXMuc3RhdHVzKSA9PT0gbnVsbCB8fCBfdGhpcyRzdGF0dXMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJHN0YXR1cy50b3RhbFZpb2xhdGlvbnMpIHx8IHRoaXMudmlvbGF0aW9ucy5sZW5ndGg7CiAgICB9CiAgfSwgewogICAga2V5OiAidmlvbGF0aW9ucyIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgdmFyIF90aGlzJHN0YXR1czIsCiAgICAgICAgX3RoaXMgPSB0aGlzOwogICAgICB2YXIgdmlvbGF0aW9ucyA9ICgoX3RoaXMkc3RhdHVzMiA9IHRoaXMuc3RhdHVzKSA9PT0gbnVsbCB8fCBfdGhpcyRzdGF0dXMyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRzdGF0dXMyLnZpb2xhdGlvbnMpIHx8IFtdOwogICAgICByZXR1cm4gdmlvbGF0aW9ucy5tYXAoZnVuY3Rpb24gKHZpb2xhdGlvbikgewogICAgICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHZpb2xhdGlvbiksIHt9LCB7CiAgICAgICAgICByZXNvdXJjZUxpbms6IHsKICAgICAgICAgICAgdGV4dDogdmlvbGF0aW9uLm5hbWUsCiAgICAgICAgICAgIHRvOiB7CiAgICAgICAgICAgICAgbmFtZTogJ2MtY2x1c3Rlci1wcm9kdWN0LXJlc291cmNlLWlkJywKICAgICAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgICAgIHJlc291cmNlOiB2aW9sYXRpb24ua2luZC50b0xvd2VyQ2FzZSgpLAogICAgICAgICAgICAgICAgaWQ6IHZpb2xhdGlvbi5uYW1lLAogICAgICAgICAgICAgICAgcHJvZHVjdDogJ2V4cGxvcmVyJwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwKICAgICAgICAgIGNvbnN0cmFpbnRMaW5rOiB7CiAgICAgICAgICAgIHRleHQ6IF90aGlzLm5hbWVEaXNwbGF5LAogICAgICAgICAgICB0bzogX3RoaXMuZGV0YWlsTG9jYXRpb24KICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgfV0pOwp9KFN0ZXZlTW9kZWwpOwpleHBvcnQgeyBHYXRlS2VlcGVyQ29uc3RyYWludCBhcyBkZWZhdWx0IH07"},{"version":3,"names":["jsyaml","SteveModel","downloadFile","ENFORCEMENT_ACTION_VALUES","DENY","DRYRUN","GateKeeperConstraint","_SteveModel","_classCallCheck","_callSuper","arguments","_inherits","_createClass","key","get","out","_get","_getPrototypeOf","prototype","t","$rootGetters","downloadViolations","action","icon","label","total","unshift","value","_save","_asyncToGenerator","_regeneratorRuntime","mark","_callee","constraint","resourceVersion","_constraint","wrap","_callee$","_context","prev","next","findLatestConstraint","sent","metadata","$dispatch","type","concat","kind","toLowerCase","root","spec","save","stop","apply","_downloadViolations","_callee2","Papa","violations","csv","_callee2$","_context2","map","violation","resourceLink","constraintLink","unparse","name","err","title","cleanForNew","saveYaml","yaml","parsed","load","Object","assign","_remove","_callee3","_callee3$","_context3","abrupt","remove","id","opt","force","_this$status","status","totalViolations","length","_this$status2","_this","_objectSpread","text","to","params","resource","product","nameDisplay","detailLocation","default"],"sources":["/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/models/constraints.gatekeeper.sh.constraint.js"],"sourcesContent":["import jsyaml from 'js-yaml';\r\nimport SteveModel from '@shell/plugins/steve/steve-class';\r\nimport { downloadFile } from '@shell/utils/download';\r\n\r\nexport const ENFORCEMENT_ACTION_VALUES = {\r\n  DENY:   'deny',\r\n  DRYRUN: 'dryrun'\r\n};\r\n\r\nexport default class GateKeeperConstraint extends SteveModel {\r\n  get _availableActions() {\r\n    const out = super._availableActions;\r\n\r\n    const t = this.$rootGetters['i18n/t'];\r\n\r\n    const downloadViolations = {\r\n      action: 'downloadViolations',\r\n      icon:   'icon icon-fw icon-download',\r\n      label:  t('gatekeeperConstraint.downloadViolations'),\r\n      total:  1,\r\n    };\r\n\r\n    out.unshift(downloadViolations);\r\n\r\n    return out;\r\n  }\r\n\r\n  async save() {\r\n    let constraint;\r\n    let resourceVersion;\r\n\r\n    if (this.constraint) {\r\n      constraint = await this.findLatestConstraint();\r\n      resourceVersion = constraint?.metadata?.resourceVersion;\r\n    } else {\r\n      constraint = await this.$dispatch('cluster/create', { type: `constraints.gatekeeper.sh.${ this.kind.toLowerCase() }` }, { root: true });\r\n    }\r\n\r\n    constraint.spec = this.spec;\r\n    constraint.metadata = this.metadata;\r\n    if (resourceVersion) {\r\n      constraint.metadata.resourceVersion = resourceVersion;\r\n    }\r\n\r\n    await constraint.save();\r\n  }\r\n\r\n  async downloadViolations() {\r\n    const Papa = await import(/* webpackChunkName: \"csv\" */'papaparse');\r\n\r\n    try {\r\n      const violations = (this.violations || []).map((violation) => {\r\n        delete violation.resourceLink;\r\n        delete violation.constraintLink;\r\n\r\n        return violation;\r\n      });\r\n\r\n      const csv = Papa.unparse(violations);\r\n\r\n      downloadFile(`violations-${ this.name }.csv`, csv, 'application/csv');\r\n    } catch (err) {\r\n      this.$dispatch('growl/fromError', { title: 'Error downloading file', err }, { root: true });\r\n    }\r\n  }\r\n\r\n  cleanForNew() {\r\n    this.$dispatch(`cleanForNew`, this);\r\n\r\n    if (this.constraint) {\r\n      delete this.constraint;\r\n    }\r\n  }\r\n\r\n  saveYaml(yaml) {\r\n    const parsed = jsyaml.load(yaml);\r\n\r\n    Object.assign(this, parsed);\r\n\r\n    return this.save();\r\n  }\r\n\r\n  async remove() {\r\n    const constraint = await this.findLatestConstraint();\r\n\r\n    return constraint.remove();\r\n  }\r\n\r\n  findLatestConstraint() {\r\n    return this.$dispatch('cluster/find', {\r\n      type: this.constraint.type, id: this.constraint.id, opt: { force: true }\r\n    }, { root: true });\r\n  }\r\n\r\n  get totalViolations() {\r\n    return this.status?.totalViolations || this.violations.length;\r\n  }\r\n\r\n  get violations() {\r\n    const violations = this.status?.violations || [];\r\n\r\n    return violations.map((violation) => {\r\n      return {\r\n        ...violation,\r\n        resourceLink: {\r\n          text: violation.name,\r\n          to:   {\r\n            name:   'c-cluster-product-resource-id',\r\n            params: {\r\n              resource: violation.kind.toLowerCase(), id: violation.name, product: 'explorer'\r\n            }\r\n          }\r\n        },\r\n        constraintLink: {\r\n          text: this.nameDisplay,\r\n          to:   this.detailLocation\r\n        }\r\n      };\r\n    });\r\n  }\r\n}\r\n"],"mappings":"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","ignoreList":[]}]}