{"remainingRequest":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js??ref--16-1!/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/ubuntu/suseconf/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ubuntu/suseconf/node_modules/@rancher/shell/pages/account/index.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/ubuntu/suseconf/node_modules/@rancher/shell/pages/account/index.vue","mtime":1725338146566},{"path":"/home/ubuntu/suseconf/babel.config.js","mtime":1725343995893},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js","mtime":1725271298942},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1725271300920}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKZnVuY3Rpb24gb3duS2V5cyhlLCByKSB7IHZhciB0ID0gT2JqZWN0LmtleXMoZSk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBvID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKTsgciAmJiAobyA9IG8uZmlsdGVyKGZ1bmN0aW9uIChyKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsIHIpLmVudW1lcmFibGU7IH0pKSwgdC5wdXNoLmFwcGx5KHQsIG8pOyB9IHJldHVybiB0OyB9CmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQoZSkgeyBmb3IgKHZhciByID0gMTsgciA8IGFyZ3VtZW50cy5sZW5ndGg7IHIrKykgeyB2YXIgdCA9IG51bGwgIT0gYXJndW1lbnRzW3JdID8gYXJndW1lbnRzW3JdIDoge307IHIgJSAyID8gb3duS2V5cyhPYmplY3QodCksICEwKS5mb3JFYWNoKGZ1bmN0aW9uIChyKSB7IF9kZWZpbmVQcm9wZXJ0eShlLCByLCB0W3JdKTsgfSkgOiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGUsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHQpKSA6IG93bktleXMoT2JqZWN0KHQpKS5mb3JFYWNoKGZ1bmN0aW9uIChyKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCByLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsIHIpKTsgfSk7IH0gcmV0dXJuIGU7IH0KaW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiL2hvbWUvdWJ1bnR1L3N1c2Vjb25mL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9yZWdlbmVyYXRvci9pbmRleC5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9ycy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5rZXlzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5yZXBsYWNlLmpzIjsKaW1wb3J0IEJhY2tMaW5rIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL0JhY2tMaW5rJzsKaW1wb3J0IFByb21wdENoYW5nZVBhc3N3b3JkIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL1Byb21wdENoYW5nZVBhc3N3b3JkJzsKaW1wb3J0IHsgTUFOQUdFTUVOVCwgTk9STUFOIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy90eXBlcyc7CmltcG9ydCB7IFNFVFRJTkcgfSBmcm9tICdAc2hlbGwvY29uZmlnL3NldHRpbmdzJzsKaW1wb3J0IExvYWRpbmcgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvTG9hZGluZyc7CmltcG9ydCBQcmluY2lwYWwgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvYXV0aC9QcmluY2lwYWwnOwppbXBvcnQgQmFja1JvdXRlIGZyb20gJ0BzaGVsbC9taXhpbnMvYmFjay1saW5rJzsKaW1wb3J0IHsgbWFwR2V0dGVycyB9IGZyb20gJ3Z1ZXgnOwppbXBvcnQgeyBCYW5uZXIgfSBmcm9tICdAY29tcG9uZW50cy9CYW5uZXInOwppbXBvcnQgUmVzb3VyY2VUYWJsZSBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9SZXNvdXJjZVRhYmxlJzsKaW1wb3J0IENvcHlUb0NsaXBib2FyZFRleHQgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvQ29weVRvQ2xpcGJvYXJkVGV4dCc7CmltcG9ydCBUYWJUaXRsZSBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9UYWJUaXRsZSc7CnZhciBBUElfRU5EUE9JTlQgPSAnL3YzJzsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIENvcHlUb0NsaXBib2FyZFRleHQ6IENvcHlUb0NsaXBib2FyZFRleHQsCiAgICBCYWNrTGluazogQmFja0xpbmssCiAgICBCYW5uZXI6IEJhbm5lciwKICAgIFByb21wdENoYW5nZVBhc3N3b3JkOiBQcm9tcHRDaGFuZ2VQYXNzd29yZCwKICAgIExvYWRpbmc6IExvYWRpbmcsCiAgICBSZXNvdXJjZVRhYmxlOiBSZXNvdXJjZVRhYmxlLAogICAgUHJpbmNpcGFsOiBQcmluY2lwYWwsCiAgICBUYWJUaXRsZTogVGFiVGl0bGUKICB9LAogIG1peGluczogW0JhY2tSb3V0ZV0sCiAgZmV0Y2g6IGZ1bmN0aW9uIGZldGNoKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvcigvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgIHZhciBhbGxTZXR0aW5ncywgYXBpSG9zdFNldHRpbmcsIHNlcnZlclVybFNldHRpbmc7CiAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgcmV0dXJuIF90aGlzLmNhbGNDYW5DaGFuZ2VQYXNzd29yZCgpOwogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICBfdGhpcy5jYW5DaGFuZ2VQYXNzd29yZCA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgIGlmICghX3RoaXMuYXBpS2V5U2NoZW1hKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDc7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDY7CiAgICAgICAgICAgIHJldHVybiBfdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3JhbmNoZXIvZmluZEFsbCcsIHsKICAgICAgICAgICAgICB0eXBlOiBOT1JNQU4uVE9LRU4KICAgICAgICAgICAgfSk7CiAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgIF90aGlzLnJvd3MgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gOTsKICAgICAgICAgICAgcmV0dXJuIF90aGlzLiRzdG9yZS5kaXNwYXRjaCgnbWFuYWdlbWVudC9maW5kQWxsJywgewogICAgICAgICAgICAgIHR5cGU6IE1BTkFHRU1FTlQuU0VUVElORwogICAgICAgICAgICB9KTsKICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgYWxsU2V0dGluZ3MgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICBhcGlIb3N0U2V0dGluZyA9IGFsbFNldHRpbmdzLmZpbmQoZnVuY3Rpb24gKGkpIHsKICAgICAgICAgICAgICByZXR1cm4gaS5pZCA9PT0gU0VUVElORy5BUElfSE9TVDsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHNlcnZlclVybFNldHRpbmcgPSBhbGxTZXR0aW5ncy5maW5kKGZ1bmN0aW9uIChpKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGkuaWQgPT09IFNFVFRJTkcuU0VSVkVSX1VSTDsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIF90aGlzLmFwaUhvc3RTZXR0aW5nID0gYXBpSG9zdFNldHRpbmcgPT09IG51bGwgfHwgYXBpSG9zdFNldHRpbmcgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGFwaUhvc3RTZXR0aW5nLnZhbHVlOwogICAgICAgICAgICBfdGhpcy5zZXJ2ZXJVcmxTZXR0aW5nID0gc2VydmVyVXJsU2V0dGluZyA9PT0gbnVsbCB8fCBzZXJ2ZXJVcmxTZXR0aW5nID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzZXJ2ZXJVcmxTZXR0aW5nLnZhbHVlOwogICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlKTsKICAgIH0pKSgpOwogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGFwaUhvc3RTZXR0aW5nOiBudWxsLAogICAgICBzZXJ2ZXJVcmxTZXR0aW5nOiBudWxsLAogICAgICByb3dzOiBudWxsLAogICAgICBjYW5DaGFuZ2VQYXNzd29yZDogZmFsc2UKICAgIH07CiAgfSwKICBjb21wdXRlZDogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBtYXBHZXR0ZXJzKHsKICAgIHQ6ICdpMThuL3QnCiAgfSkpLCB7fSwgewogICAgYXBpS2V5aGVhZGVyczogZnVuY3Rpb24gYXBpS2V5aGVhZGVycygpIHsKICAgICAgcmV0dXJuIHRoaXMuYXBpS2V5U2NoZW1hID8gdGhpcy4kc3RvcmUuZ2V0dGVyc1sndHlwZS1tYXAvaGVhZGVyc0ZvciddKHRoaXMuYXBpS2V5U2NoZW1hKSA6IFtdOwogICAgfSwKICAgIC8vIFBvcnQgb2YgRW1iZXIgY29kZSBmb3IgQVBJIFVybCAtIHNlZTogaHR0cHM6Ly9naXRodWIuY29tL3JhbmNoZXIvdWkvYmxvYi84ZTA3YzQ5MjY3MzE3MTczMWYzYjI2YWYxNGM5NzhiYzEwM2QxODI4L2xpYi9zaGFyZWQvYWRkb24vZW5kcG9pbnQvc2VydmljZS5qcyNMNTgKICAgIGFwaVVybEJhc2U6IGZ1bmN0aW9uIGFwaVVybEJhc2UoKSB7CiAgICAgIHZhciBzZXR0aW5nID0gdGhpcy5hcGlIb3N0U2V0dGluZzsKICAgICAgaWYgKHNldHRpbmcgJiYgc2V0dGluZy5pbmRleE9mKCdodHRwJykgIT09IDApIHsKICAgICAgICBzZXR0aW5nID0gImh0dHA6Ly8iLmNvbmNhdChzZXR0aW5nKTsKICAgICAgfQoKICAgICAgLy8gVXNlIFNlcnZlciBTZXR0aW5nIFVSTCBpZiB0aGUgYXBpIGhvc3Qgc2V0dGluZyBpcyBub3Qgc2V0CiAgICAgIHZhciB1cmwgPSBzZXR0aW5nIHx8IHRoaXMuc2VydmVyVXJsU2V0dGluZzsKCiAgICAgIC8vIElmIHRoZSBVUkwgaXMgcmVsYXRpdmUsIGFkZCBvbiB0aGUgY3VycmVudCBiYXNlIFVSTCBmcm9tIHRoZSBicm93c2VyCiAgICAgIGlmICh1cmwuaW5kZXhPZignaHR0cCcpICE9PSAwKSB7CiAgICAgICAgdXJsID0gIiIuY29uY2F0KHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4sICIvIikuY29uY2F0KHVybC5yZXBsYWNlKC9eXC8rLywgJycpKTsKICAgICAgfQoKICAgICAgLy8gVVJMIG11c3QgZW5kIGluIGEgc2luZ2xlIHNsYXNoCiAgICAgIHVybCA9ICIiLmNvbmNhdCh1cmwucmVwbGFjZSgvXC8rJC8sICcnKSwgIi8iKTsKICAgICAgcmV0dXJuIHVybDsKICAgIH0sCiAgICBhcGlVcmw6IGZ1bmN0aW9uIGFwaVVybCgpIHsKICAgICAgdmFyIGJhc2UgPSB0aGlzLmFwaVVybEJhc2U7CiAgICAgIHZhciBwYXRoID0gQVBJX0VORFBPSU5ULnJlcGxhY2UoL15cLysvLCAnJyk7CiAgICAgIHJldHVybiAiIi5jb25jYXQoYmFzZSkuY29uY2F0KHBhdGgpOwogICAgfSwKICAgIGFwaUtleVNjaGVtYTogZnVuY3Rpb24gYXBpS2V5U2NoZW1hKCkgewogICAgICB0cnkgewogICAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5nZXR0ZXJzWyJyYW5jaGVyL3NjaGVtYUZvciJdKE5PUk1BTi5UT0tFTik7CiAgICAgIH0gY2F0Y2ggKGUpIHt9CiAgICAgIHJldHVybiBudWxsOwogICAgfSwKICAgIHByaW5jaXBhbDogZnVuY3Rpb24gcHJpbmNpcGFsKCkgewogICAgICB2YXIgcHJpbmNpcGFsSWQgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzWydhdXRoL3ByaW5jaXBhbElkJ107CiAgICAgIHZhciBwcmluY2lwYWwgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzWydyYW5jaGVyL2J5SWQnXShOT1JNQU4uUFJJTkNJUEFMLCBwcmluY2lwYWxJZCk7CiAgICAgIGlmICghcHJpbmNpcGFsKSB7CiAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGZpbmQgcHJpbmNpcGFsIHdpdGggaWQ6ICcsIHByaW5jaXBhbElkKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1jb25zb2xlCiAgICAgIH0KICAgICAgcmV0dXJuIHByaW5jaXBhbCB8fCB7fTsKICAgIH0sCiAgICBhcGlLZXlzOiBmdW5jdGlvbiBhcGlLZXlzKCkgewogICAgICAvLyBGaWx0ZXIgb3V0IHRva2VucyB0aGF0IGFyZSBub3QgQVBJIEtleXMgYW5kIGFyZSBub3QgZXhwaXJlZCBVSSBTZXNzaW9ucwogICAgICB2YXIgaXNBcGlLZXkgPSBmdW5jdGlvbiBpc0FwaUtleShrZXkpIHsKICAgICAgICB2YXIgbGFiZWxzID0ga2V5LmxhYmVsczsKICAgICAgICB2YXIgZXhwaXJlZCA9IGtleS5leHBpcmVkOwogICAgICAgIHZhciBjdXJyZW50ID0ga2V5LmN1cnJlbnQ7CiAgICAgICAgcmV0dXJuICghZXhwaXJlZCB8fCAhbGFiZWxzIHx8ICFsYWJlbHNbJ3VpLXNlc3Npb24nXSkgJiYgIWN1cnJlbnQ7CiAgICAgIH07CiAgICAgIHJldHVybiAhdGhpcy5yb3dzID8gW10gOiB0aGlzLnJvd3MuZmlsdGVyKGlzQXBpS2V5KTsKICAgIH0KICB9KSwKICBtZXRob2RzOiB7CiAgICBhZGRLZXk6IGZ1bmN0aW9uIGFkZEtleSgpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIHBhdGg6ICdhY2NvdW50L2NyZWF0ZS1rZXknCiAgICAgIH0pOwogICAgfSwKICAgIGNhbGNDYW5DaGFuZ2VQYXNzd29yZDogZnVuY3Rpb24gY2FsY0NhbkNoYW5nZVBhc3N3b3JkKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgdmFyIHVzZXJzOwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgaWYgKF90aGlzMi4kc3RvcmUuZ2V0dGVyc1snYXV0aC9lbmFibGVkJ10pIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgZmFsc2UpOwogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgaWYgKCEoX3RoaXMyLnByaW5jaXBhbC5wcm92aWRlciA9PT0gJ2xvY2FsJykpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNDsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgISFfdGhpczIucHJpbmNpcGFsLmxvZ2luTmFtZSk7CiAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDY7CiAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMi4kc3RvcmUuZGlzcGF0Y2goJ3JhbmNoZXIvZmluZEFsbCcsIHsKICAgICAgICAgICAgICAgIHR5cGU6IE5PUk1BTi5VU0VSLAogICAgICAgICAgICAgICAgb3B0OiB7CiAgICAgICAgICAgICAgICAgIHVybDogJy92My91c2VycycsCiAgICAgICAgICAgICAgICAgIGZpbHRlcjogewogICAgICAgICAgICAgICAgICAgIG1lOiB0cnVlCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIHVzZXJzID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgaWYgKCEodXNlcnMgJiYgdXNlcnMubGVuZ3RoID09PSAxKSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA5OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCAhIXVzZXJzWzBdLnVzZXJuYW1lKTsKICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCBmYWxzZSk7CiAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICB9KSkoKTsKICAgIH0KICB9Cn07"},{"version":3,"names":["BackLink","PromptChangePassword","MANAGEMENT","NORMAN","SETTING","Loading","Principal","BackRoute","mapGetters","Banner","ResourceTable","CopyToClipboardText","TabTitle","API_ENDPOINT","components","mixins","fetch","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","allSettings","apiHostSetting","serverUrlSetting","wrap","_callee$","_context","prev","next","calcCanChangePassword","canChangePassword","sent","apiKeySchema","$store","dispatch","type","TOKEN","rows","find","i","id","API_HOST","SERVER_URL","value","stop","data","computed","_objectSpread","t","apiKeyheaders","getters","apiUrlBase","setting","indexOf","concat","url","window","location","origin","replace","apiUrl","base","path","e","principal","principalId","PRINCIPAL","console","error","apiKeys","isApiKey","key","labels","expired","current","filter","methods","addKey","$router","push","_this2","_callee2","users","_callee2$","_context2","abrupt","provider","loginName","USER","opt","me","length","username"],"sources":["node_modules/@rancher/shell/pages/account/index.vue"],"sourcesContent":["<script>\nimport BackLink from '@shell/components/BackLink';\nimport PromptChangePassword from '@shell/components/PromptChangePassword';\nimport { MANAGEMENT, NORMAN } from '@shell/config/types';\nimport { SETTING } from '@shell/config/settings';\nimport Loading from '@shell/components/Loading';\nimport Principal from '@shell/components/auth/Principal';\nimport BackRoute from '@shell/mixins/back-link';\nimport { mapGetters } from 'vuex';\n\nimport { Banner } from '@components/Banner';\nimport ResourceTable from '@shell/components/ResourceTable';\nimport CopyToClipboardText from '@shell/components/CopyToClipboardText';\nimport TabTitle from '@shell/components/TabTitle';\n\nconst API_ENDPOINT = '/v3';\n\nexport default {\n  components: {\n    CopyToClipboardText, BackLink, Banner, PromptChangePassword, Loading, ResourceTable, Principal, TabTitle\n  },\n  mixins: [BackRoute],\n  async fetch() {\n    this.canChangePassword = await this.calcCanChangePassword();\n\n    if (this.apiKeySchema) {\n      this.rows = await this.$store.dispatch('rancher/findAll', { type: NORMAN.TOKEN });\n    }\n\n    // Get all settings - the API host setting may not be set, so this avoids a 404 request if we look for the specific setting\n    const allSettings = await this.$store.dispatch('management/findAll', { type: MANAGEMENT.SETTING });\n    const apiHostSetting = allSettings.find((i) => i.id === SETTING.API_HOST);\n    const serverUrlSetting = allSettings.find((i) => i.id === SETTING.SERVER_URL);\n\n    this.apiHostSetting = apiHostSetting?.value;\n    this.serverUrlSetting = serverUrlSetting?.value;\n  },\n  data() {\n    return {\n      apiHostSetting:    null,\n      serverUrlSetting:  null,\n      rows:              null,\n      canChangePassword: false\n    };\n  },\n  computed: {\n    ...mapGetters({ t: 'i18n/t' }),\n\n    apiKeyheaders() {\n      return this.apiKeySchema ? this.$store.getters['type-map/headersFor'](this.apiKeySchema) : [];\n    },\n\n    // Port of Ember code for API Url - see: https://github.com/rancher/ui/blob/8e07c492673171731f3b26af14c978bc103d1828/lib/shared/addon/endpoint/service.js#L58\n    apiUrlBase() {\n      let setting = this.apiHostSetting;\n\n      if (setting && setting.indexOf('http') !== 0) {\n        setting = `http://${ setting }`;\n      }\n\n      // Use Server Setting URL if the api host setting is not set\n      let url = setting || this.serverUrlSetting;\n\n      // If the URL is relative, add on the current base URL from the browser\n      if ( url.indexOf('http') !== 0 ) {\n        url = `${ window.location.origin }/${ url.replace(/^\\/+/, '') }`;\n      }\n\n      // URL must end in a single slash\n      url = `${ url.replace(/\\/+$/, '') }/`;\n\n      return url;\n    },\n\n    apiUrl() {\n      const base = this.apiUrlBase;\n      const path = API_ENDPOINT.replace(/^\\/+/, '');\n\n      return `${ base }${ path }`;\n    },\n\n    apiKeySchema() {\n      try {\n        return this.$store.getters[`rancher/schemaFor`](NORMAN.TOKEN);\n      } catch (e) {}\n\n      return null;\n    },\n\n    principal() {\n      const principalId = this.$store.getters['auth/principalId'];\n      const principal = this.$store.getters['rancher/byId'](NORMAN.PRINCIPAL, principalId);\n\n      if (!principal) {\n        console.error('Failed to find principal with id: ', principalId); // eslint-disable-line no-console\n      }\n\n      return principal || {};\n    },\n\n    apiKeys() {\n      // Filter out tokens that are not API Keys and are not expired UI Sessions\n      const isApiKey = (key) => {\n        const labels = key.labels;\n        const expired = key.expired;\n        const current = key.current;\n\n        return ( !expired || !labels || !labels['ui-session'] ) && !current;\n      };\n\n      return !this.rows ? [] : this.rows.filter(isApiKey);\n    }\n  },\n\n  methods: {\n    addKey() {\n      this.$router.push({ path: 'account/create-key' });\n    },\n    async calcCanChangePassword() {\n      if (!this.$store.getters['auth/enabled']) {\n        return false;\n      }\n\n      if (this.principal.provider === 'local') {\n        return !!this.principal.loginName;\n      }\n\n      const users = await this.$store.dispatch('rancher/findAll', {\n        type: NORMAN.USER,\n        opt:  { url: '/v3/users', filter: { me: true } }\n      });\n\n      if (users && users.length === 1) {\n        return !!users[0].username;\n      }\n\n      return false;\n    },\n  }\n};\n</script>\n\n<template>\n  <Loading v-if=\"$fetchState.pending\" />\n  <div v-else>\n    <BackLink :link=\"backLink\" />\n    <h1>\n      <TabTitle breadcrumb=\"vendor-only\">\n        {{ t('accountAndKeys.title') }}\n      </TabTitle>\n    </h1>\n\n    <h2 v-t=\"'accountAndKeys.account.title'\" />\n    <div class=\"account\">\n      <Principal\n        :key=\"principal.id\"\n        :value=\"principal.id\"\n        :use-muted=\"false\"\n        :show-labels=\"true\"\n      />\n      <div>\n        <button\n          v-if=\"canChangePassword\"\n          type=\"button\"\n          class=\"btn role-primary\"\n          data-testid=\"account_change_password\"\n          @click=\"$refs.promptChangePassword.show(true)\"\n        >\n          {{ t(\"accountAndKeys.account.change\") }}\n        </button>\n      </div>\n    </div>\n    <PromptChangePassword ref=\"promptChangePassword\" />\n\n    <hr>\n    <div class=\"keys-header\">\n      <div>\n        <h2 v-t=\"'accountAndKeys.apiKeys.title'\" />\n        <div class=\"api-url\">\n          <span>{{ t(\"accountAndKeys.apiKeys.apiEndpoint\") }}</span>\n          <CopyToClipboardText :text=\"apiUrl\" />\n        </div>\n      </div>\n      <button\n        v-if=\"apiKeySchema\"\n        class=\"btn role-primary add mb-20\"\n        data-testid=\"account_create_api_keys\"\n        @click=\"addKey\"\n      >\n        {{ t('accountAndKeys.apiKeys.add.label') }}\n      </button>\n    </div>\n    <div\n      v-if=\"apiKeySchema\"\n      class=\"keys\"\n    >\n      <ResourceTable\n        :schema=\"apiKeySchema\"\n        :rows=\"apiKeys\"\n        :headers=\"apiKeyheaders\"\n        key-field=\"id\"\n        data-testid=\"api_keys_list\"\n        :search=\"true\"\n        :row-actions=\"true\"\n        :table-actions=\"true\"\n      />\n    </div>\n    <div v-else>\n      <Banner\n        color=\"warning\"\n        :label=\"t('accountAndKeys.apiKeys.notAllowed')\"\n      />\n    </div>\n  </div>\n</template>\n\n<style lang='scss' scoped>\n  hr {\n    margin: 20px 0;\n  }\n\n  .account {\n    display: flex;\n    justify-content: space-between\n  }\n\n  .keys-header {\n    display: flex;\n    div {\n      flex: 1;\n    }\n  }\n\n  .keys {\n    display: flex;\n    flex-direction: column;\n    .add {\n      align-self: flex-end;\n    }\n  }\n\n  .api-url {\n    display: flex;\n\n    > span {\n      margin-right: 6px;\n    }\n  }\n</style>\n"],"mappings":"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","ignoreList":[]}]}