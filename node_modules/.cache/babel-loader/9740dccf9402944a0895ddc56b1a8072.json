{"remainingRequest":"/home/ubuntu/susecon-2024-ext-demo/node_modules/babel-loader/lib/index.js??ref--16-1!/home/ubuntu/susecon-2024-ext-demo/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/ubuntu/susecon-2024-ext-demo/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/dialog/RotateEncryptionKeyDialog.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/dialog/RotateEncryptionKeyDialog.vue","mtime":1725271280091},{"path":"/home/ubuntu/susecon-2024-ext-demo/babel.config.js","mtime":1725268750245},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/babel-loader/lib/index.js","mtime":1725271298942},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1725271300920}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCBfcmVnZW5lcmF0b3JSdW50aW1lIGZyb20gIi9ob21lL3VidW50dS9zdXNlY29uLTIwMjQtZXh0LWRlbW8vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL3JlZ2VuZXJhdG9yL2luZGV4LmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgeyBTTkFQU0hPVCwgTk9STUFOIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy90eXBlcyc7CmltcG9ydCBBc3luY0J1dHRvbiBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9Bc3luY0J1dHRvbic7CmltcG9ydCB7IENhcmQgfSBmcm9tICdAY29tcG9uZW50cy9DYXJkJzsKaW1wb3J0IHsgQmFubmVyIH0gZnJvbSAnQGNvbXBvbmVudHMvQmFubmVyJzsKaW1wb3J0IHsgZXhjZXB0aW9uVG9FcnJvcnNBcnJheSB9IGZyb20gJ0BzaGVsbC91dGlscy9lcnJvcic7CmltcG9ydCB7IHNvcnRCeSB9IGZyb20gJ0BzaGVsbC91dGlscy9zb3J0JzsKaW1wb3J0IGRheSBmcm9tICdkYXlqcyc7CmltcG9ydCB7IGVzY2FwZUh0bWwgfSBmcm9tICdAc2hlbGwvdXRpbHMvc3RyaW5nJzsKaW1wb3J0IHsgREFURV9GT1JNQVQsIFRJTUVfRk9STUFUIH0gZnJvbSAnQHNoZWxsL3N0b3JlL3ByZWZzJzsKaW1wb3J0IHsgc2V0IH0gZnJvbSAnQHNoZWxsL3V0aWxzL29iamVjdCc7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBDYXJkOiBDYXJkLAogICAgQXN5bmNCdXR0b246IEFzeW5jQnV0dG9uLAogICAgQmFubmVyOiBCYW5uZXIKICB9LAogIHByb3BzOiB7CiAgICBjbHVzdGVyOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgZGVmYXVsdDogZnVuY3Rpb24gX2RlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIHt9OwogICAgICB9CiAgICB9CiAgfSwKICBmZXRjaDogZnVuY3Rpb24gZmV0Y2goKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgIHZhciBldGNkQmFja3VwcywgYmFja3VwcywgbmFtZSwgY3JlYXRlZERhdGU7CiAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBpZiAoX3RoaXMuJHN0b3JlLmdldHRlcnNbJ2lzUmFuY2hlciddKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgW10pOwogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDsKICAgICAgICAgICAgcmV0dXJuIF90aGlzLmdldEV0Y2RCYWNrdXBzKCk7CiAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgIGV0Y2RCYWNrdXBzID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgaWYgKGV0Y2RCYWNrdXBzLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICBiYWNrdXBzID0gc29ydEJ5KGV0Y2RCYWNrdXBzLCBbJ2NyZWF0ZWQnXSkucmV2ZXJzZSgpOwogICAgICAgICAgICAgIG5hbWUgPSBiYWNrdXBzWzBdLmlkLnNwbGl0KCc6Jyk7CiAgICAgICAgICAgICAgY3JlYXRlZERhdGUgPSBiYWNrdXBzWzBdLmNyZWF0ZWQ7CiAgICAgICAgICAgICAgX3RoaXMubGF0ZXN0QmFja3VwID0gewogICAgICAgICAgICAgICAgbmFtZTogbmFtZVswXSwKICAgICAgICAgICAgICAgIGRhdGU6IF90aGlzLmdldEZvcm1hdHRlZENyZWF0ZWREYXRlKGNyZWF0ZWREYXRlKQogICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0KICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlKTsKICAgIH0pKSgpOwogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGVycm9yczogW10sCiAgICAgIGxhdGVzdEJhY2t1cDogbnVsbAogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGNsb3NlOiBmdW5jdGlvbiBjbG9zZShidXR0b25Eb25lKSB7CiAgICAgIGlmIChidXR0b25Eb25lICYmIHR5cGVvZiBidXR0b25Eb25lID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgYnV0dG9uRG9uZSh0cnVlKTsKICAgICAgfQogICAgICB0aGlzLiRlbWl0KCdjbG9zZScpOwogICAgfSwKICAgIGdldEV0Y2RCYWNrdXBzOiBmdW5jdGlvbiBnZXRFdGNkQmFja3VwcygpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgZXRjZEJhY2t1cHMsIF9ldGNkQmFja3VwczsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGlmICghX3RoaXMyLmNsdXN0ZXIuaXNSa2UxKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDY7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAzOwogICAgICAgICAgICAgIHJldHVybiBfdGhpczIuJHN0b3JlLmRpc3BhdGNoKCdyYW5jaGVyL2ZpbmRBbGwnLCB7CiAgICAgICAgICAgICAgICB0eXBlOiBOT1JNQU4uRVRDRF9CQUNLVVAKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIGV0Y2RCYWNrdXBzID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgZXRjZEJhY2t1cHMgPSBldGNkQmFja3Vwcy5maWx0ZXIoZnVuY3Rpb24gKGJhY2t1cCkgewogICAgICAgICAgICAgICAgcmV0dXJuIGJhY2t1cC5jbHVzdGVySWQgPT09IF90aGlzMi5jbHVzdGVyLm1ldGFkYXRhLm5hbWU7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsIGV0Y2RCYWNrdXBzKTsKICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIGlmICghX3RoaXMyLmNsdXN0ZXIuaXNSa2UyKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDEyOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gOTsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXMyLiRzdG9yZS5kaXNwYXRjaCgnbWFuYWdlbWVudC9maW5kQWxsJywgewogICAgICAgICAgICAgICAgdHlwZTogU05BUFNIT1QKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgIF9ldGNkQmFja3VwcyA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgIF9ldGNkQmFja3VwcyA9IF9ldGNkQmFja3Vwcy5maWx0ZXIoZnVuY3Rpb24gKGJhY2t1cCkgewogICAgICAgICAgICAgICAgcmV0dXJuIGJhY2t1cC5jbHVzdGVySWQgPT09IF90aGlzMi5jbHVzdGVyLmlkOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCBfZXRjZEJhY2t1cHMpOwogICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCBbXSk7CiAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBnZXRGb3JtYXR0ZWRDcmVhdGVkRGF0ZTogZnVuY3Rpb24gZ2V0Rm9ybWF0dGVkQ3JlYXRlZERhdGUoY3JlYXRlZERhdGUpIHsKICAgICAgdmFyIGRhdGVGb3JtYXQgPSBlc2NhcGVIdG1sKHRoaXMuJHN0b3JlLmdldHRlcnNbJ3ByZWZzL2dldCddKERBVEVfRk9STUFUKSk7CiAgICAgIHZhciB0aW1lRm9ybWF0ID0gZXNjYXBlSHRtbCh0aGlzLiRzdG9yZS5nZXR0ZXJzWydwcmVmcy9nZXQnXShUSU1FX0ZPUk1BVCkpOwogICAgICB2YXIgZCA9IGRheShjcmVhdGVkRGF0ZSkuZm9ybWF0KGRhdGVGb3JtYXQpOwogICAgICB2YXIgdCA9IGRheShjcmVhdGVkRGF0ZSkuZm9ybWF0KHRpbWVGb3JtYXQpOwogICAgICByZXR1cm4gIiIuY29uY2F0KGQsICIgIikuY29uY2F0KHQpOwogICAgfSwKICAgIGFwcGx5OiBmdW5jdGlvbiBhcHBseShidXR0b25Eb25lKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgICAgdmFyIGlzUmtlMiwgX3RoaXMzJGNsdXN0ZXIkc3BlYywgY3VycmVudEdlbmVyYXRpb247CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBpc1JrZTIgPSBfdGhpczMuY2x1c3Rlci5pc1JrZTI7CiAgICAgICAgICAgICAgX2NvbnRleHQzLnByZXYgPSAxOwogICAgICAgICAgICAgIGlmICghaXNSa2UyKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDEwOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGN1cnJlbnRHZW5lcmF0aW9uID0gKChfdGhpczMkY2x1c3RlciRzcGVjID0gX3RoaXMzLmNsdXN0ZXIuc3BlYykgPT09IG51bGwgfHwgX3RoaXMzJGNsdXN0ZXIkc3BlYyA9PT0gdm9pZCAwIHx8IChfdGhpczMkY2x1c3RlciRzcGVjID0gX3RoaXMzJGNsdXN0ZXIkc3BlYy5ya2VDb25maWcpID09PSBudWxsIHx8IF90aGlzMyRjbHVzdGVyJHNwZWMgPT09IHZvaWQgMCB8fCAoX3RoaXMzJGNsdXN0ZXIkc3BlYyA9IF90aGlzMyRjbHVzdGVyJHNwZWMucm90YXRlRW5jcnlwdGlvbktleXMpID09PSBudWxsIHx8IF90aGlzMyRjbHVzdGVyJHNwZWMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzMyRjbHVzdGVyJHNwZWMuZ2VuZXJhdGlvbikgfHwgMDsgLy8gVG8gcm90YXRlIHRoZSBlbmNyeXB0aW9uIGtleXMsIGluY3JlbWVudAogICAgICAgICAgICAgIC8vIHJrZUNvbmZpZy5yb3RhdGVFbmN5cnB0aW9uS2V5cy5nZW5lcmF0aW9uIGluIHRoZSBZQU1MLgogICAgICAgICAgICAgIHNldChfdGhpczMuY2x1c3RlciwgJ3NwZWMucmtlQ29uZmlnLnJvdGF0ZUVuY3J5cHRpb25LZXlzLmdlbmVyYXRpb24nLCBjdXJyZW50R2VuZXJhdGlvbiArIDEpOwogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNzsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXMzLmNsdXN0ZXIuc2F2ZSgpOwogICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgX3RoaXMzLmNsb3NlKGJ1dHRvbkRvbmUpOwogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMTM7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAxMjsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXMzLmNsdXN0ZXIubWdtdC5kb0FjdGlvbigncm90YXRlRW5jcnlwdGlvbktleScpOwogICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgIF90aGlzMy5jbG9zZShidXR0b25Eb25lKTsKICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDE5OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICAgIF9jb250ZXh0My5wcmV2ID0gMTU7CiAgICAgICAgICAgICAgX2NvbnRleHQzLnQwID0gX2NvbnRleHQzWyJjYXRjaCJdKDEpOwogICAgICAgICAgICAgIF90aGlzMy5lcnJvcnMgPSBleGNlcHRpb25Ub0Vycm9yc0FycmF5KF9jb250ZXh0My50MCk7CiAgICAgICAgICAgICAgYnV0dG9uRG9uZShmYWxzZSk7CiAgICAgICAgICAgIGNhc2UgMTk6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTMsIG51bGwsIFtbMSwgMTVdXSk7CiAgICAgIH0pKSgpOwogICAgfQogIH0KfTs="},{"version":3,"names":["SNAPSHOT","NORMAN","AsyncButton","Card","Banner","exceptionToErrorsArray","sortBy","day","escapeHtml","DATE_FORMAT","TIME_FORMAT","set","components","props","cluster","type","Object","default","_default","fetch","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","etcdBackups","backups","name","createdDate","wrap","_callee$","_context","prev","next","$store","getters","abrupt","getEtcdBackups","sent","length","reverse","id","split","created","latestBackup","date","getFormattedCreatedDate","stop","data","errors","methods","close","buttonDone","$emit","_this2","_callee2","_etcdBackups","_callee2$","_context2","isRke1","dispatch","ETCD_BACKUP","filter","backup","clusterId","metadata","isRke2","dateFormat","timeFormat","d","format","t","concat","apply","_this3","_callee3","_this3$cluster$spec","currentGeneration","_callee3$","_context3","spec","rkeConfig","rotateEncryptionKeys","generation","save","mgmt","doAction","t0"],"sources":["node_modules/@rancher/shell/dialog/RotateEncryptionKeyDialog.vue"],"sourcesContent":["<script>\nimport { SNAPSHOT, NORMAN } from '@shell/config/types';\nimport AsyncButton from '@shell/components/AsyncButton';\nimport { Card } from '@components/Card';\nimport { Banner } from '@components/Banner';\nimport { exceptionToErrorsArray } from '@shell/utils/error';\n\nimport { sortBy } from '@shell/utils/sort';\nimport day from 'dayjs';\nimport { escapeHtml } from '@shell/utils/string';\nimport { DATE_FORMAT, TIME_FORMAT } from '@shell/store/prefs';\nimport { set } from '@shell/utils/object';\n\nexport default {\n  components: {\n    Card,\n    AsyncButton,\n    Banner,\n  },\n\n  props: {\n    cluster: {\n      type:    Object,\n      default: () => {\n        return {};\n      }\n    }\n  },\n\n  async fetch() {\n    if (!this.$store.getters['isRancher']) {\n      // This fetch function is getting snapshots, which are associated\n      // with cluster manager. Rancher Desktop doesn't come with cluster\n      // manager, so for Rancher Desktop we return nothing.\n      return [];\n    }\n\n    const etcdBackups = await this.getEtcdBackups();\n\n    if (etcdBackups.length > 0) {\n      const backups = sortBy(etcdBackups, ['created']).reverse();\n      const name = backups[0].id.split(':');\n      const createdDate = backups[0].created;\n\n      this.latestBackup = {\n        name: name[0],\n        date: this.getFormattedCreatedDate(createdDate)\n      };\n    }\n  },\n\n  data() {\n    return { errors: [], latestBackup: null };\n  },\n\n  methods: {\n    close(buttonDone) {\n      if (buttonDone && typeof buttonDone === 'function') {\n        buttonDone(true);\n      }\n      this.$emit('close');\n    },\n\n    async getEtcdBackups() {\n      if ( this.cluster.isRke1) {\n        let etcdBackups = await this.$store.dispatch('rancher/findAll', { type: NORMAN.ETCD_BACKUP });\n\n        etcdBackups = etcdBackups.filter((backup) => backup.clusterId === this.cluster.metadata.name);\n\n        return etcdBackups;\n      }\n\n      if (this.cluster.isRke2) {\n        let etcdBackups = await this.$store.dispatch('management/findAll', { type: SNAPSHOT });\n\n        etcdBackups = etcdBackups.filter((backup) => backup.clusterId === this.cluster.id);\n\n        return etcdBackups;\n      }\n\n      return [];\n    },\n\n    getFormattedCreatedDate(createdDate) {\n      const dateFormat = escapeHtml(this.$store.getters['prefs/get'](DATE_FORMAT));\n      const timeFormat = escapeHtml( this.$store.getters['prefs/get'](TIME_FORMAT));\n      const d = day(createdDate).format(dateFormat);\n      const t = day(createdDate).format(timeFormat);\n\n      return `${ d } ${ t }`;\n    },\n\n    async apply(buttonDone) {\n      const isRke2 = this.cluster.isRke2;\n\n      try {\n        if (isRke2) {\n          const currentGeneration = this.cluster.spec?.rkeConfig?.rotateEncryptionKeys?.generation || 0;\n\n          // To rotate the encryption keys, increment\n          // rkeConfig.rotateEncyrptionKeys.generation in the YAML.\n          set(this.cluster, 'spec.rkeConfig.rotateEncryptionKeys.generation', currentGeneration + 1);\n          await this.cluster.save();\n\n          this.close(buttonDone);\n        } else {\n          await this.cluster.mgmt.doAction('rotateEncryptionKey');\n\n          this.close(buttonDone);\n        }\n      } catch (err) {\n        this.errors = exceptionToErrorsArray(err);\n        buttonDone(false);\n      }\n    }\n  }\n};\n</script>\n\n<template>\n  <Card\n    class=\"prompt-rotate\"\n    :show-highlight-border=\"false\"\n  >\n    <h4\n      slot=\"title\"\n      v-clean-html=\"t('promptRotateEncryptionKey.title')\"\n      class=\"text-default-text\"\n    />\n\n    <div\n      slot=\"body\"\n      class=\"pl-10 pr-10\"\n    >\n      <Banner\n        color=\"warning\"\n        label-key=\"promptRotateEncryptionKey.warning\"\n      />\n\n      <div v-if=\"!$fetchState.pending\">\n        <p\n          v-if=\"latestBackup\"\n          class=\"pt-10 pb-10\"\n        >\n          {{ t('promptRotateEncryptionKey.description', latestBackup, true) }}\n        </p>\n        <Banner\n          v-else\n          color=\"error\"\n          label-key=\"promptRotateEncryptionKey.error\"\n        />\n      </div>\n    </div>\n\n    <div\n      slot=\"actions\"\n      class=\"buttons\"\n    >\n      <button\n        class=\"btn role-secondary mr-10\"\n        @click=\"close\"\n      >\n        {{ t('generic.cancel') }}\n      </button>\n\n      <AsyncButton\n        mode=\"rotate\"\n        :disabled=\"$fetchState.pending || !latestBackup\"\n        @click=\"apply\"\n      />\n\n      <Banner\n        v-for=\"(err, i) in errors\"\n        :key=\"i\"\n        color=\"error\"\n        :label=\"err\"\n      />\n    </div>\n  </Card>\n</template>\n<style lang='scss' scoped>\n  .prompt-rotate {\n    margin: 0;\n  }\n  .buttons {\n    display: flex;\n    justify-content: flex-end;\n    width: 100%;\n  }\n</style>\n"],"mappings":"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","ignoreList":[]}]}