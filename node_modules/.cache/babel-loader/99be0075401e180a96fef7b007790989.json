{"remainingRequest":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js??ref--16-1!/home/ubuntu/suseconf/node_modules/@rancher/shell/models/workload.js","dependencies":[{"path":"/home/ubuntu/suseconf/node_modules/@rancher/shell/models/workload.js","mtime":1725338146566},{"path":"/home/ubuntu/suseconf/babel.config.js","mtime":1725343995893},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js","mtime":1725271298942}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmRlc2NyaXB0aW9uLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZnJvbS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc2xpY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvcnMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZmxlY3QuY29uc3RydWN0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgX3RvQ29uc3VtYWJsZUFycmF5IGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvQ29uc3VtYWJsZUFycmF5IjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5IjsKaW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MiOwppbXBvcnQgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4gZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiI7CmltcG9ydCBfZ2V0UHJvdG90eXBlT2YgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZ2V0UHJvdG90eXBlT2YiOwppbXBvcnQgX2dldCBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9nZXQiOwppbXBvcnQgX2luaGVyaXRzIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2luaGVyaXRzIjsKZnVuY3Rpb24gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIociwgZSkgeyB2YXIgdCA9ICJ1bmRlZmluZWQiICE9IHR5cGVvZiBTeW1ib2wgJiYgcltTeW1ib2wuaXRlcmF0b3JdIHx8IHJbIkBAaXRlcmF0b3IiXTsgaWYgKCF0KSB7IGlmIChBcnJheS5pc0FycmF5KHIpIHx8ICh0ID0gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KHIpKSB8fCBlICYmIHIgJiYgIm51bWJlciIgPT0gdHlwZW9mIHIubGVuZ3RoKSB7IHQgJiYgKHIgPSB0KTsgdmFyIF9uID0gMCwgRiA9IGZ1bmN0aW9uIEYoKSB7fTsgcmV0dXJuIHsgczogRiwgbjogZnVuY3Rpb24gbigpIHsgcmV0dXJuIF9uID49IHIubGVuZ3RoID8geyBkb25lOiAhMCB9IDogeyBkb25lOiAhMSwgdmFsdWU6IHJbX24rK10gfTsgfSwgZTogZnVuY3Rpb24gZShyKSB7IHRocm93IHI7IH0sIGY6IEYgfTsgfSB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gaXRlcmF0ZSBub24taXRlcmFibGUgaW5zdGFuY2UuXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuIik7IH0gdmFyIG8sIGEgPSAhMCwgdSA9ICExOyByZXR1cm4geyBzOiBmdW5jdGlvbiBzKCkgeyB0ID0gdC5jYWxsKHIpOyB9LCBuOiBmdW5jdGlvbiBuKCkgeyB2YXIgciA9IHQubmV4dCgpOyByZXR1cm4gYSA9IHIuZG9uZSwgcjsgfSwgZTogZnVuY3Rpb24gZShyKSB7IHUgPSAhMCwgbyA9IHI7IH0sIGY6IGZ1bmN0aW9uIGYoKSB7IHRyeSB7IGEgfHwgbnVsbCA9PSB0LnJldHVybiB8fCB0LnJldHVybigpOyB9IGZpbmFsbHkgeyBpZiAodSkgdGhyb3cgbzsgfSB9IH07IH0KZnVuY3Rpb24gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KHIsIGEpIHsgaWYgKHIpIHsgaWYgKCJzdHJpbmciID09IHR5cGVvZiByKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkociwgYSk7IHZhciB0ID0ge30udG9TdHJpbmcuY2FsbChyKS5zbGljZSg4LCAtMSk7IHJldHVybiAiT2JqZWN0IiA9PT0gdCAmJiByLmNvbnN0cnVjdG9yICYmICh0ID0gci5jb25zdHJ1Y3Rvci5uYW1lKSwgIk1hcCIgPT09IHQgfHwgIlNldCIgPT09IHQgPyBBcnJheS5mcm9tKHIpIDogIkFyZ3VtZW50cyIgPT09IHQgfHwgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QodCkgPyBfYXJyYXlMaWtlVG9BcnJheShyLCBhKSA6IHZvaWQgMDsgfSB9CmZ1bmN0aW9uIF9hcnJheUxpa2VUb0FycmF5KHIsIGEpIHsgKG51bGwgPT0gYSB8fCBhID4gci5sZW5ndGgpICYmIChhID0gci5sZW5ndGgpOyBmb3IgKHZhciBlID0gMCwgbiA9IEFycmF5KGEpOyBlIDwgYTsgZSsrKSBuW2VdID0gcltlXTsgcmV0dXJuIG47IH0KaW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiL2hvbWUvdWJ1bnR1L3N1c2Vjb25mL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9yZWdlbmVyYXRvci9pbmRleC5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKZnVuY3Rpb24gb3duS2V5cyhlLCByKSB7IHZhciB0ID0gT2JqZWN0LmtleXMoZSk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBvID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKTsgciAmJiAobyA9IG8uZmlsdGVyKGZ1bmN0aW9uIChyKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsIHIpLmVudW1lcmFibGU7IH0pKSwgdC5wdXNoLmFwcGx5KHQsIG8pOyB9IHJldHVybiB0OyB9CmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQoZSkgeyBmb3IgKHZhciByID0gMTsgciA8IGFyZ3VtZW50cy5sZW5ndGg7IHIrKykgeyB2YXIgdCA9IG51bGwgIT0gYXJndW1lbnRzW3JdID8gYXJndW1lbnRzW3JdIDoge307IHIgJSAyID8gb3duS2V5cyhPYmplY3QodCksICEwKS5mb3JFYWNoKGZ1bmN0aW9uIChyKSB7IF9kZWZpbmVQcm9wZXJ0eShlLCByLCB0W3JdKTsgfSkgOiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGUsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHQpKSA6IG93bktleXMoT2JqZWN0KHQpKS5mb3JFYWNoKGZ1bmN0aW9uIChyKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCByLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsIHIpKTsgfSk7IH0gcmV0dXJuIGU7IH0KaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC52YWx1ZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5yZXBsYWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnRyaW0uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKZnVuY3Rpb24gX2NhbGxTdXBlcih0LCBvLCBlKSB7IHJldHVybiBvID0gX2dldFByb3RvdHlwZU9mKG8pLCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0LCBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCkgPyBSZWZsZWN0LmNvbnN0cnVjdChvLCBlIHx8IFtdLCBfZ2V0UHJvdG90eXBlT2YodCkuY29uc3RydWN0b3IpIDogby5hcHBseSh0LCBlKSk7IH0KZnVuY3Rpb24gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpIHsgdHJ5IHsgdmFyIHQgPSAhQm9vbGVhbi5wcm90b3R5cGUudmFsdWVPZi5jYWxsKFJlZmxlY3QuY29uc3RydWN0KEJvb2xlYW4sIFtdLCBmdW5jdGlvbiAoKSB7fSkpOyB9IGNhdGNoICh0KSB7fSByZXR1cm4gKF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QgPSBmdW5jdGlvbiBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCkgeyByZXR1cm4gISF0OyB9KSgpOyB9CmZ1bmN0aW9uIF9zdXBlclByb3BHZXQodCwgZSwgbywgcikgeyB2YXIgcCA9IF9nZXQoX2dldFByb3RvdHlwZU9mKDEgJiByID8gdC5wcm90b3R5cGUgOiB0KSwgZSwgbyk7IHJldHVybiAyICYgciAmJiAiZnVuY3Rpb24iID09IHR5cGVvZiBwID8gZnVuY3Rpb24gKHQpIHsgcmV0dXJuIHAuYXBwbHkobywgdCk7IH0gOiBwOyB9CmltcG9ydCB7IGZpbmRCeSwgaW5zZXJ0QXQgfSBmcm9tICdAc2hlbGwvdXRpbHMvYXJyYXknOwppbXBvcnQgeyBUSU1FU1RBTVAsIENBVFRMRV9QVUJMSUNfRU5EUE9JTlRTIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy9sYWJlbHMtYW5ub3RhdGlvbnMnOwppbXBvcnQgeyBXT1JLTE9BRF9UWVBFUywgU0VSVklDRSwgUE9EIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy90eXBlcyc7CmltcG9ydCB7IGdldCBhcyBfZ2V0Miwgc2V0IH0gZnJvbSAnQHNoZWxsL3V0aWxzL29iamVjdCc7CmltcG9ydCBkYXkgZnJvbSAnZGF5anMnOwppbXBvcnQgeyBjb252ZXJ0U2VsZWN0b3JPYmosIG1hdGNoaW5nLCBtYXRjaGVzIH0gZnJvbSAnQHNoZWxsL3V0aWxzL3NlbGVjdG9yJzsKaW1wb3J0IHsgU0VQQVJBVE9SIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy93b3JrbG9hZCc7CmltcG9ydCBXb3JrbG9hZFNlcnZpY2UgZnJvbSAnQHNoZWxsL21vZGVscy93b3JrbG9hZC5zZXJ2aWNlJzsKZXhwb3J0IHZhciBkZWZhdWx0Q29udGFpbmVyID0gewogIGltYWdlUHVsbFBvbGljeTogJ0Fsd2F5cycsCiAgbmFtZTogJ2NvbnRhaW5lci0wJywKICBzZWN1cml0eUNvbnRleHQ6IHsKICAgIHJ1bkFzTm9uUm9vdDogZmFsc2UsCiAgICByZWFkT25seVJvb3RGaWxlc3lzdGVtOiBmYWxzZSwKICAgIHByaXZpbGVnZWQ6IGZhbHNlLAogICAgYWxsb3dQcml2aWxlZ2VFc2NhbGF0aW9uOiBmYWxzZQogIH0KfTsKdmFyIFdvcmtsb2FkID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfV29ya2xvYWRTZXJ2aWNlKSB7CiAgZnVuY3Rpb24gV29ya2xvYWQoKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgV29ya2xvYWQpOwogICAgcmV0dXJuIF9jYWxsU3VwZXIodGhpcywgV29ya2xvYWQsIGFyZ3VtZW50cyk7CiAgfQogIF9pbmhlcml0cyhXb3JrbG9hZCwgX1dvcmtsb2FkU2VydmljZSk7CiAgcmV0dXJuIF9jcmVhdGVDbGFzcyhXb3JrbG9hZCwgW3sKICAgIGtleTogIl9hdmFpbGFibGVBY3Rpb25zIiwKICAgIGdldDoKICAgIC8vIHJlbW92ZSBjbG9uZSBhcyB5YW1sL2VkaXQgYXMgeWFtbCB1bnRpbCBBUEkgc3VwcG9ydGVkCiAgICBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHZhciBvdXQgPSBfc3VwZXJQcm9wR2V0KFdvcmtsb2FkLCAiX2F2YWlsYWJsZUFjdGlvbnMiLCB0aGlzLCAxKTsKICAgICAgdmFyIHR5cGUgPSB0aGlzLl90eXBlID8gdGhpcy5fdHlwZSA6IHRoaXMudHlwZTsKICAgICAgdmFyIGVkaXRZYW1sID0gZmluZEJ5KG91dCwgJ2FjdGlvbicsICdnb1RvRWRpdFlhbWwnKTsKICAgICAgdmFyIGluZGV4ID0gZWRpdFlhbWwgPyBvdXQuaW5kZXhPZihlZGl0WWFtbCkgOiAwOwogICAgICBpbnNlcnRBdChvdXQsIGluZGV4LCB7CiAgICAgICAgYWN0aW9uOiAnYWRkU2lkZWNhcicsCiAgICAgICAgbGFiZWw6IHRoaXMudCgnYWN0aW9uLmFkZFNpZGVjYXInKSwKICAgICAgICBpY29uOiAnaWNvbiBpY29uLXBsdXMnLAogICAgICAgIGVuYWJsZWQ6ICEhdGhpcy5saW5rcy51cGRhdGUKICAgICAgfSk7CiAgICAgIGlmICh0eXBlICE9PSBXT1JLTE9BRF9UWVBFUy5KT0IgJiYgdHlwZSAhPT0gV09SS0xPQURfVFlQRVMuQ1JPTl9KT0IpIHsKICAgICAgICB2YXIgX3RoaXMkc3BlYywgX3RoaXMkc3BlYzI7CiAgICAgICAgaW5zZXJ0QXQob3V0LCAwLCB7CiAgICAgICAgICBhY3Rpb246ICd0b2dnbGVSb2xsYmFja01vZGFsJywKICAgICAgICAgIGxhYmVsOiB0aGlzLnQoJ2FjdGlvbi5yb2xsYmFjaycpLAogICAgICAgICAgaWNvbjogJ2ljb24gaWNvbi1oaXN0b3J5JywKICAgICAgICAgIGVuYWJsZWQ6ICEhdGhpcy5saW5rcy51cGRhdGUKICAgICAgICB9KTsKICAgICAgICBpbnNlcnRBdChvdXQsIDAsIHsKICAgICAgICAgIGFjdGlvbjogJ3JlZGVwbG95JywKICAgICAgICAgIGxhYmVsOiB0aGlzLnQoJ2FjdGlvbi5yZWRlcGxveScpLAogICAgICAgICAgaWNvbjogJ2ljb24gaWNvbi1yZWZyZXNoJywKICAgICAgICAgIGVuYWJsZWQ6ICEhdGhpcy5saW5rcy51cGRhdGUsCiAgICAgICAgICBidWxrYWJsZTogdHJ1ZQogICAgICAgIH0pOwogICAgICAgIGluc2VydEF0KG91dCwgMCwgewogICAgICAgICAgYWN0aW9uOiAncGF1c2UnLAogICAgICAgICAgbGFiZWw6IHRoaXMudCgnYXN5bmNCdXR0b24ucGF1c2UuYWN0aW9uJyksCiAgICAgICAgICBpY29uOiAnaWNvbiBpY29uLXBhdXNlJywKICAgICAgICAgIGVuYWJsZWQ6ICEhdGhpcy5saW5rcy51cGRhdGUgJiYgISgoX3RoaXMkc3BlYyA9IHRoaXMuc3BlYykgIT09IG51bGwgJiYgX3RoaXMkc3BlYyAhPT0gdm9pZCAwICYmIF90aGlzJHNwZWMucGF1c2VkKQogICAgICAgIH0pOwogICAgICAgIGluc2VydEF0KG91dCwgMCwgewogICAgICAgICAgYWN0aW9uOiAncmVzdW1lJywKICAgICAgICAgIGxhYmVsOiB0aGlzLnQoJ2FzeW5jQnV0dG9uLnJlc3VtZS5hY3Rpb24nKSwKICAgICAgICAgIGljb246ICdpY29uIGljb24tcGxheScsCiAgICAgICAgICBlbmFibGVkOiAhIXRoaXMubGlua3MudXBkYXRlICYmICgoX3RoaXMkc3BlYzIgPSB0aGlzLnNwZWMpID09PSBudWxsIHx8IF90aGlzJHNwZWMyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRzcGVjMi5wYXVzZWQpID09PSB0cnVlCiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgaW5zZXJ0QXQob3V0LCAwLCB7CiAgICAgICAgZGl2aWRlcjogdHJ1ZQogICAgICB9KTsKICAgICAgaW5zZXJ0QXQob3V0LCAwLCB7CiAgICAgICAgYWN0aW9uOiAnb3BlblNoZWxsJywKICAgICAgICBlbmFibGVkOiAhIXRoaXMubGlua3MudmlldywKICAgICAgICBpY29uOiAnaWNvbiBpY29uLWZ3IGljb24tY2hldnJvbi1yaWdodCcsCiAgICAgICAgbGFiZWw6IHRoaXMudCgnYWN0aW9uLm9wZW5TaGVsbCcpLAogICAgICAgIHRvdGFsOiAxCiAgICAgIH0pOwogICAgICB2YXIgdG9GaWx0ZXIgPSBbJ2Nsb25lWWFtbCddOwogICAgICBvdXQgPSBvdXQuZmlsdGVyKGZ1bmN0aW9uIChhY3Rpb24pIHsKICAgICAgICBpZiAoIXRvRmlsdGVyLmluY2x1ZGVzKGFjdGlvbi5hY3Rpb24pKSB7CiAgICAgICAgICByZXR1cm4gYWN0aW9uOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHJldHVybiBvdXQ7CiAgICB9CiAgfSwgewogICAga2V5OiAiYXBwbHlEZWZhdWx0cyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gYXBwbHlEZWZhdWx0cyh2bSkgewogICAgICB2YXIgX3RoaXMkc3BlYzMgPSB0aGlzLnNwZWMsCiAgICAgICAgc3BlYyA9IF90aGlzJHNwZWMzID09PSB2b2lkIDAgPyB7fSA6IF90aGlzJHNwZWMzOwogICAgICBpZiAodGhpcy50eXBlID09PSBXT1JLTE9BRF9UWVBFUy5DUk9OX0pPQikgewogICAgICAgIGlmICghc3BlYy5qb2JUZW1wbGF0ZSkgewogICAgICAgICAgc3BlYy5qb2JUZW1wbGF0ZSA9IHsKICAgICAgICAgICAgc3BlYzogewogICAgICAgICAgICAgIHRlbXBsYXRlOiB7CiAgICAgICAgICAgICAgICBzcGVjOiB7CiAgICAgICAgICAgICAgICAgIHJlc3RhcnRQb2xpY3k6ICdOZXZlcicsCiAgICAgICAgICAgICAgICAgIGNvbnRhaW5lcnM6IFt7CiAgICAgICAgICAgICAgICAgICAgaW1hZ2VQdWxsUG9saWN5OiAnQWx3YXlzJywKICAgICAgICAgICAgICAgICAgICBuYW1lOiAnY29udGFpbmVyLTAnCiAgICAgICAgICAgICAgICAgIH1dLAogICAgICAgICAgICAgICAgICBpbml0Q29udGFpbmVyczogW10KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH07CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGlmICghc3BlYy5yZXBsaWNhcyAmJiBzcGVjLnJlcGxpY2FzICE9PSAwKSB7CiAgICAgICAgICBzcGVjLnJlcGxpY2FzID0gMTsKICAgICAgICB9CiAgICAgICAgaWYgKCFzcGVjLnRlbXBsYXRlKSB7CiAgICAgICAgICBzcGVjLnRlbXBsYXRlID0gewogICAgICAgICAgICBzcGVjOiB7CiAgICAgICAgICAgICAgcmVzdGFydFBvbGljeTogdGhpcy50eXBlID09PSBXT1JLTE9BRF9UWVBFUy5KT0IgPyAnTmV2ZXInIDogJ0Fsd2F5cycsCiAgICAgICAgICAgICAgY29udGFpbmVyczogW19vYmplY3RTcHJlYWQoe30sIGRlZmF1bHRDb250YWluZXIpXSwKICAgICAgICAgICAgICBpbml0Q29udGFpbmVyczogW10KICAgICAgICAgICAgfQogICAgICAgICAgfTsKICAgICAgICB9CiAgICAgICAgaWYgKCFzcGVjLnNlbGVjdG9yKSB7CiAgICAgICAgICBzcGVjLnNlbGVjdG9yID0ge307CiAgICAgICAgfQogICAgICB9CiAgICAgIHZtLiRzZXQodGhpcywgJ3NwZWMnLCBzcGVjKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJ0b2dnbGVSb2xsYmFja01vZGFsIiwKICAgIHZhbHVlOiBmdW5jdGlvbiB0b2dnbGVSb2xsYmFja01vZGFsKCkgewogICAgICB2YXIgd29ya2xvYWQgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHRoaXM7CiAgICAgIHRoaXMuJGRpc3BhdGNoKCdwcm9tcHRNb2RhbCcsIHsKICAgICAgICBjb21wb25lbnRQcm9wczogewogICAgICAgICAgd29ya2xvYWQ6IHdvcmtsb2FkCiAgICAgICAgfSwKICAgICAgICBjb21wb25lbnQ6ICdSb2xsYmFja1dvcmtsb2FkRGlhbG9nJwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyb2xsQmFja1dvcmtsb2FkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfcm9sbEJhY2tXb3JrbG9hZCA9IF9hc3luY1RvR2VuZXJhdG9yKC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZShjbHVzdGVyLCB3b3JrbG9hZCwgdHlwZSwgcm9sbGJhY2tSZXF1ZXN0RGF0YSkgewogICAgICAgIHZhciByb2xsYmFja1JlcXVlc3RCb2R5LCBuYW1lc3BhY2UsIHdvcmtsb2FkTmFtZTsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgcm9sbGJhY2tSZXF1ZXN0Qm9keSA9IEpTT04uc3RyaW5naWZ5KHJvbGxiYWNrUmVxdWVzdERhdGEpOwogICAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheSh3b3JrbG9hZCkpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IodGhpcy50KCdwcm9tcHRSb2xsYmFjay5tdWx0aXBsZVdvcmtsb2FkRXJyb3InKSk7CiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICBuYW1lc3BhY2UgPSB3b3JrbG9hZC5tZXRhZGF0YS5uYW1lc3BhY2U7CiAgICAgICAgICAgICAgd29ya2xvYWROYW1lID0gd29ya2xvYWQubWV0YWRhdGEubmFtZTsKICAgICAgICAgICAgICAvKioKICAgICAgICAgICAgICAgKiBFbnN1cmUgd2UgZ28gb3V0IHRvIHRoZSBjb3JyZWN0IGNsdXN0ZXIKICAgICAgICAgICAgICAgKgogICAgICAgICAgICAgICAqIEJ1aWxkIHRoZSByZXF1ZXN0IGJvZHkgaW4gdGhlIHNhbWUgZm9ybWF0IHRoYXQga3ViZWN0bAogICAgICAgICAgICAgICAqIHVzZXMgdG8gY2FsbCB0aGUgS3ViZXJuZXRlcyBBUEkgdG8gcm9sbCBiYWNrIGEgd29ya2xvYWQuCiAgICAgICAgICAgICAgICogVG8gc2VlIGFuIGV4YW1wbGUgcmVxdWVzdCBib2R5LCBydW46CiAgICAgICAgICAgICAgICoga3ViZWN0bCByb2xsb3V0IHVuZG8gZGVwbG95bWVudC9bZGVwbG95bWVudCBuYW1lXSAtLXRvLXJldmlzaW9uPVtyZXZpc2lvbiBudW1iZXJdIC12PTgKICAgICAgICAgICAgICAgKi8KICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNzsKICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wYXRjaChyb2xsYmFja1JlcXVlc3RCb2R5LCB7CiAgICAgICAgICAgICAgICB1cmw6ICIvazhzL2NsdXN0ZXJzLyIuY29uY2F0KGNsdXN0ZXIuaWQsICIvYXBpcy9hcHBzL3YxL25hbWVzcGFjZXMvIikuY29uY2F0KG5hbWVzcGFjZSwgIi8iKS5jb25jYXQodHlwZSwgIi8iKS5jb25jYXQod29ya2xvYWROYW1lKQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlLCB0aGlzKTsKICAgICAgfSkpOwogICAgICBmdW5jdGlvbiByb2xsQmFja1dvcmtsb2FkKF94LCBfeDIsIF94MywgX3g0KSB7CiAgICAgICAgcmV0dXJuIF9yb2xsQmFja1dvcmtsb2FkLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KICAgICAgcmV0dXJuIHJvbGxCYWNrV29ya2xvYWQ7CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJwYXVzZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcGF1c2UoKSB7CiAgICAgIHNldCh0aGlzLnNwZWMsICdwYXVzZWQnLCB0cnVlKTsKICAgICAgdGhpcy5zYXZlKCk7CiAgICB9CiAgfSwgewogICAga2V5OiAicmVzdW1lIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZXN1bWUoKSB7CiAgICAgIHNldCh0aGlzLnNwZWMsICdwYXVzZWQnLCBmYWxzZSk7CiAgICAgIHRoaXMuc2F2ZSgpOwogICAgfQogIH0sIHsKICAgIGtleTogInNjYWxlRG93biIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3NjYWxlRG93biA9IF9hc3luY1RvR2VuZXJhdG9yKC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgdmFyIG5ld1NjYWxlOwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgbmV3U2NhbGUgPSB0aGlzLnNwZWMucmVwbGljYXMgLSAxOwogICAgICAgICAgICAgIGlmICghKG5ld1NjYWxlID49IDApKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDU7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgc2V0KHRoaXMuc3BlYywgJ3JlcGxpY2FzJywgbmV3U2NhbGUpOwogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNTsKICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zYXZlKCk7CiAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMiwgdGhpcyk7CiAgICAgIH0pKTsKICAgICAgZnVuY3Rpb24gc2NhbGVEb3duKCkgewogICAgICAgIHJldHVybiBfc2NhbGVEb3duLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KICAgICAgcmV0dXJuIHNjYWxlRG93bjsKICAgIH0oKQogIH0sIHsKICAgIGtleTogInNjYWxlVXAiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9zY2FsZVVwID0gX2FzeW5jVG9HZW5lcmF0b3IoLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMygpIHsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIHNldCh0aGlzLnNwZWMsICdyZXBsaWNhcycsIHRoaXMuc3BlYy5yZXBsaWNhcyArIDEpOwogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMzsKICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zYXZlKCk7CiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMywgdGhpcyk7CiAgICAgIH0pKTsKICAgICAgZnVuY3Rpb24gc2NhbGVVcCgpIHsKICAgICAgICByZXR1cm4gX3NjYWxlVXAuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQogICAgICByZXR1cm4gc2NhbGVVcDsKICAgIH0oKQogIH0sIHsKICAgIGtleTogInN0YXRlIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgX3RoaXMkc3BlYzQ7CiAgICAgIGlmICgoKF90aGlzJHNwZWM0ID0gdGhpcy5zcGVjKSA9PT0gbnVsbCB8fCBfdGhpcyRzcGVjNCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkc3BlYzQucGF1c2VkKSA9PT0gdHJ1ZSkgewogICAgICAgIHJldHVybiAncGF1c2VkJzsKICAgICAgfQogICAgICByZXR1cm4gX3N1cGVyUHJvcEdldChXb3JrbG9hZCwgInN0YXRlIiwgdGhpcywgMSk7CiAgICB9CiAgfSwgewogICAga2V5OiAib3BlblNoZWxsIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfb3BlblNoZWxsID0gX2FzeW5jVG9HZW5lcmF0b3IoLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNCgpIHsKICAgICAgICB2YXIgcG9kcywgX2l0ZXJhdG9yLCBfc3RlcCwgcG9kOwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTQkKF9jb250ZXh0NCkgewogICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQ0LnByZXYgPSBfY29udGV4dDQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAyOwogICAgICAgICAgICAgIHJldHVybiB0aGlzLm1hdGNoaW5nUG9kcygpOwogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgcG9kcyA9IF9jb250ZXh0NC5zZW50OwogICAgICAgICAgICAgIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHBvZHMpOwogICAgICAgICAgICAgIF9jb250ZXh0NC5wcmV2ID0gNDsKICAgICAgICAgICAgICBfaXRlcmF0b3IucygpOwogICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgaWYgKChfc3RlcCA9IF9pdGVyYXRvci5uKCkpLmRvbmUpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMTM7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgcG9kID0gX3N0ZXAudmFsdWU7CiAgICAgICAgICAgICAgaWYgKCFwb2QuaXNSdW5uaW5nKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDExOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHBvZC5vcGVuU2hlbGwoKTsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdCgicmV0dXJuIik7CiAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSA2OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMTg7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgICAgX2NvbnRleHQ0LnByZXYgPSAxNTsKICAgICAgICAgICAgICBfY29udGV4dDQudDAgPSBfY29udGV4dDRbImNhdGNoIl0oNCk7CiAgICAgICAgICAgICAgX2l0ZXJhdG9yLmUoX2NvbnRleHQ0LnQwKTsKICAgICAgICAgICAgY2FzZSAxODoKICAgICAgICAgICAgICBfY29udGV4dDQucHJldiA9IDE4OwogICAgICAgICAgICAgIF9pdGVyYXRvci5mKCk7CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5maW5pc2goMTgpOwogICAgICAgICAgICBjYXNlIDIxOgogICAgICAgICAgICAgIHRoaXMuJGRpc3BhdGNoKCdncm93bC9lcnJvcicsIHsKICAgICAgICAgICAgICAgIHRpdGxlOiAnVW5hdmFpbGFibGUnLAogICAgICAgICAgICAgICAgbWVzc2FnZTogJ1RoZXJlIGFyZSBubyBydW5uaW5nIHBvZHMgdG8gZXhlY3V0ZSBhIHNoZWxsIGluLicKICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICByb290OiB0cnVlCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNhc2UgMjI6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTQsIHRoaXMsIFtbNCwgMTUsIDE4LCAyMV1dKTsKICAgICAgfSkpOwogICAgICBmdW5jdGlvbiBvcGVuU2hlbGwoKSB7CiAgICAgICAgcmV0dXJuIF9vcGVuU2hlbGwuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQogICAgICByZXR1cm4gb3BlblNoZWxsOwogICAgfSgpCiAgfSwgewogICAga2V5OiAiYWRkU2lkZWNhciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gYWRkU2lkZWNhcigpIHsKICAgICAgcmV0dXJuIHRoaXMuZ29Ub0VkaXQoewogICAgICAgIHNpZGVjYXI6IHRydWUKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAic2hvd1BvZFJlc3RhcnRzIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZXN0YXJ0Q291bnQiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHZhciBwb2RzID0gdGhpcy5wb2RzOwogICAgICB2YXIgc3VtID0gMDsKICAgICAgcG9kcy5mb3JFYWNoKGZ1bmN0aW9uIChwb2QpIHsKICAgICAgICBpZiAocG9kLnN0YXR1cy5jb250YWluZXJTdGF0dXNlcykgewogICAgICAgICAgdmFyIF9wb2Qkc3RhdHVzOwogICAgICAgICAgc3VtICs9ICgoX3BvZCRzdGF0dXMgPSBwb2Quc3RhdHVzKSA9PT0gbnVsbCB8fCBfcG9kJHN0YXR1cyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3BvZCRzdGF0dXMuY29udGFpbmVyU3RhdHVzZXNbMF0ucmVzdGFydENvdW50KSB8fCAwOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHJldHVybiBzdW07CiAgICB9CiAgfSwgewogICAga2V5OiAiaGFzU2lkZWNhcnMiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHZhciBfdGhpcyRzcGVjNSwgX3RoaXMkc3BlYzY7CiAgICAgIHZhciBwb2RUZW1wbGF0ZVNwZWMgPSB0aGlzLnR5cGUgPT09IFdPUktMT0FEX1RZUEVTLkNST05fSk9CID8gdGhpcyA9PT0gbnVsbCB8fCB0aGlzID09PSB2b2lkIDAgfHwgKF90aGlzJHNwZWM1ID0gdGhpcy5zcGVjKSA9PT0gbnVsbCB8fCBfdGhpcyRzcGVjNSA9PT0gdm9pZCAwIHx8IChfdGhpcyRzcGVjNSA9IF90aGlzJHNwZWM1LmpvYlRlbXBsYXRlKSA9PT0gbnVsbCB8fCBfdGhpcyRzcGVjNSA9PT0gdm9pZCAwIHx8IChfdGhpcyRzcGVjNSA9IF90aGlzJHNwZWM1LnNwZWMpID09PSBudWxsIHx8IF90aGlzJHNwZWM1ID09PSB2b2lkIDAgfHwgKF90aGlzJHNwZWM1ID0gX3RoaXMkc3BlYzUudGVtcGxhdGUpID09PSBudWxsIHx8IF90aGlzJHNwZWM1ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRzcGVjNS5zcGVjIDogKF90aGlzJHNwZWM2ID0gdGhpcy5zcGVjKSA9PT0gbnVsbCB8fCBfdGhpcyRzcGVjNiA9PT0gdm9pZCAwIHx8IChfdGhpcyRzcGVjNiA9IF90aGlzJHNwZWM2LnRlbXBsYXRlKSA9PT0gbnVsbCB8fCBfdGhpcyRzcGVjNiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkc3BlYzYuc3BlYzsKICAgICAgdmFyIF9wb2RUZW1wbGF0ZVNwZWMkY29udCA9IHBvZFRlbXBsYXRlU3BlYy5jb250YWluZXJzLAogICAgICAgIGNvbnRhaW5lcnMgPSBfcG9kVGVtcGxhdGVTcGVjJGNvbnQgPT09IHZvaWQgMCA/IFtdIDogX3BvZFRlbXBsYXRlU3BlYyRjb250LAogICAgICAgIF9wb2RUZW1wbGF0ZVNwZWMkaW5pdCA9IHBvZFRlbXBsYXRlU3BlYy5pbml0Q29udGFpbmVycywKICAgICAgICBpbml0Q29udGFpbmVycyA9IF9wb2RUZW1wbGF0ZVNwZWMkaW5pdCA9PT0gdm9pZCAwID8gW10gOiBfcG9kVGVtcGxhdGVTcGVjJGluaXQ7CiAgICAgIHJldHVybiBjb250YWluZXJzLmxlbmd0aCA+IDEgfHwgaW5pdENvbnRhaW5lcnMubGVuZ3RoOwogICAgfQogIH0sIHsKICAgIGtleTogImN1c3RvbVZhbGlkYXRpb25SdWxlcyIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgdmFyIHR5cGUgPSB0aGlzLl90eXBlID8gdGhpcy5fdHlwZSA6IHRoaXMudHlwZTsKICAgICAgdmFyIHBvZFNwZWNQYXRoID0gdHlwZSA9PT0gV09SS0xPQURfVFlQRVMuQ1JPTl9KT0IgPyAnc3BlYy5qb2JUZW1wbGF0ZS5zcGVjLnRlbXBsYXRlLnNwZWMnIDogJ3NwZWMudGVtcGxhdGUuc3BlYyc7CiAgICAgIHZhciBvdXQgPSBbewogICAgICAgIG51bGxhYmxlOiBmYWxzZSwKICAgICAgICBwYXRoOiAnbWV0YWRhdGEubmFtZScsCiAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgdHJhbnNsYXRpb25LZXk6ICdnZW5lcmljLm5hbWUnLAogICAgICAgIHR5cGU6ICdzdWJEb21haW4nCiAgICAgIH0sIHsKICAgICAgICBudWxsYWJsZTogZmFsc2UsCiAgICAgICAgcGF0aDogJ3NwZWMnLAogICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgIHR5cGU6ICdvYmplY3QnLAogICAgICAgIHZhbGlkYXRvcnM6IFsnY29udGFpbmVySW1hZ2VzJ10KICAgICAgfSwgewogICAgICAgIG51bGxhYmxlOiB0cnVlLAogICAgICAgIHBhdGg6ICIiLmNvbmNhdChwb2RTcGVjUGF0aCwgIi5hZmZpbml0eSIpLAogICAgICAgIHR5cGU6ICdvYmplY3QnLAogICAgICAgIHZhbGlkYXRvcnM6IFsncG9kQWZmaW5pdHknXQogICAgICB9XTsKICAgICAgc3dpdGNoICh0eXBlKSB7CiAgICAgICAgY2FzZSBXT1JLTE9BRF9UWVBFUy5ERVBMT1lNRU5UOgogICAgICAgIGNhc2UgV09SS0xPQURfVFlQRVMuUkVQTElDQV9TRVQ6CiAgICAgICAgICBvdXQucHVzaCh7CiAgICAgICAgICAgIG51bGxhYmxlOiBmYWxzZSwKICAgICAgICAgICAgcGF0aDogJ3NwZWMucmVwbGljYXMnLAogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgdHlwZTogJ251bWJlcicsCiAgICAgICAgICAgIHRyYW5zbGF0aW9uS2V5OiAnd29ya2xvYWQucmVwbGljYXMnCiAgICAgICAgICB9KTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgV09SS0xPQURfVFlQRVMuU1RBVEVGVUxfU0VUOgogICAgICAgICAgb3V0LnB1c2goewogICAgICAgICAgICBudWxsYWJsZTogZmFsc2UsCiAgICAgICAgICAgIHBhdGg6ICdzcGVjLnJlcGxpY2FzJywKICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICAgIHR5cGU6ICdudW1iZXInLAogICAgICAgICAgICB0cmFuc2xhdGlvbktleTogJ3dvcmtsb2FkLnJlcGxpY2FzJwogICAgICAgICAgfSk7CiAgICAgICAgICBvdXQucHVzaCh7CiAgICAgICAgICAgIG51bGxhYmxlOiBmYWxzZSwKICAgICAgICAgICAgcGF0aDogJ3NwZWMuc2VydmljZU5hbWUnLAogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsCiAgICAgICAgICAgIHRyYW5zbGF0aW9uS2V5OiAnd29ya2xvYWQuc2VydmljZU5hbWUnCiAgICAgICAgICB9KTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgV09SS0xPQURfVFlQRVMuQ1JPTl9KT0I6CiAgICAgICAgICBvdXQucHVzaCh7CiAgICAgICAgICAgIG51bGxhYmxlOiBmYWxzZSwKICAgICAgICAgICAgcGF0aDogJ3NwZWMuc2NoZWR1bGUnLAogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsCiAgICAgICAgICAgIHZhbGlkYXRvcnM6IFsnY3JvblNjaGVkdWxlJ10sCiAgICAgICAgICAgIHRyYW5zbGF0aW9uS2V5OiAnd29ya2xvYWQuY3JvblNjaGVkdWxlJwogICAgICAgICAgfSk7CiAgICAgIH0KICAgICAgcmV0dXJuIG91dDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJlbmRwb2ludCIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgdmFyIF90aGlzJG1ldGFkYXRhOwogICAgICByZXR1cm4gdGhpcyA9PT0gbnVsbCB8fCB0aGlzID09PSB2b2lkIDAgfHwgKF90aGlzJG1ldGFkYXRhID0gdGhpcy5tZXRhZGF0YSkgPT09IG51bGwgfHwgX3RoaXMkbWV0YWRhdGEgPT09IHZvaWQgMCB8fCAoX3RoaXMkbWV0YWRhdGEgPSBfdGhpcyRtZXRhZGF0YS5hbm5vdGF0aW9ucykgPT09IG51bGwgfHwgX3RoaXMkbWV0YWRhdGEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJG1ldGFkYXRhW0NBVFRMRV9QVUJMSUNfRU5EUE9JTlRTXTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJkZXNpcmVkIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgX3RoaXMkc3BlYzc7CiAgICAgIHJldHVybiAoKF90aGlzJHNwZWM3ID0gdGhpcy5zcGVjKSA9PT0gbnVsbCB8fCBfdGhpcyRzcGVjNyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkc3BlYzcucmVwbGljYXMpIHx8IDA7CiAgICB9CiAgfSwgewogICAga2V5OiAiYXZhaWxhYmxlIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgX3RoaXMkc3RhdHVzOwogICAgICByZXR1cm4gKChfdGhpcyRzdGF0dXMgPSB0aGlzLnN0YXR1cykgPT09IG51bGwgfHwgX3RoaXMkc3RhdHVzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRzdGF0dXMucmVhZHlSZXBsaWNhcykgfHwgMDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZWFkeSIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgdmFyIF90aGlzJHN0YXR1czIsIF90aGlzJHN0YXR1czM7CiAgICAgIHZhciByZWFkeVJlcGxpY2FzID0gTWF0aC5tYXgoMCwgKCgoX3RoaXMkc3RhdHVzMiA9IHRoaXMuc3RhdHVzKSA9PT0gbnVsbCB8fCBfdGhpcyRzdGF0dXMyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRzdGF0dXMyLnJlcGxpY2FzKSB8fCAwKSAtICgoKF90aGlzJHN0YXR1czMgPSB0aGlzLnN0YXR1cykgPT09IG51bGwgfHwgX3RoaXMkc3RhdHVzMyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkc3RhdHVzMy51bmF2YWlsYWJsZVJlcGxpY2FzKSB8fCAwKSk7CiAgICAgIGlmICh0aGlzLnR5cGUgPT09IFdPUktMT0FEX1RZUEVTLkRBRU1PTl9TRVQpIHsKICAgICAgICByZXR1cm4gcmVhZHlSZXBsaWNhczsKICAgICAgfQogICAgICByZXR1cm4gIiIuY29uY2F0KHJlYWR5UmVwbGljYXMsICIvIikuY29uY2F0KHRoaXMuZGVzaXJlZCk7CiAgICB9CiAgfSwgewogICAga2V5OiAidW5hdmFpbGFibGUiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHZhciBfdGhpcyRzdGF0dXM0OwogICAgICByZXR1cm4gKChfdGhpcyRzdGF0dXM0ID0gdGhpcy5zdGF0dXMpID09PSBudWxsIHx8IF90aGlzJHN0YXR1czQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJHN0YXR1czQudW5hdmFpbGFibGVSZXBsaWNhcykgfHwgMDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJ1cFRvRGF0ZSIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgdmFyIF90aGlzJHN0YXR1czU7CiAgICAgIHJldHVybiAoX3RoaXMkc3RhdHVzNSA9IHRoaXMuc3RhdHVzKSA9PT0gbnVsbCB8fCBfdGhpcyRzdGF0dXM1ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRzdGF0dXM1LnVwZGF0ZWRSZXBsaWNhczsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJkZXRhaWxzIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgb3V0ID0gW107CiAgICAgIHZhciB0eXBlID0gdGhpcy5fdHlwZSA/IHRoaXMuX3R5cGUgOiB0aGlzLnR5cGU7CiAgICAgIHZhciBkZXRhaWxJdGVtID0gewogICAgICAgIGVuZHBvaW50OiB7CiAgICAgICAgICBsYWJlbDogJ0VuZHBvaW50cycsCiAgICAgICAgICBjb250ZW50OiB0aGlzLmVuZHBvaW50LAogICAgICAgICAgZm9ybWF0dGVyOiAnV29ya2xvYWREZXRhaWxFbmRwb2ludHMnCiAgICAgICAgfSwKICAgICAgICByZWFkeTogewogICAgICAgICAgbGFiZWw6ICdSZWFkeScsCiAgICAgICAgICBjb250ZW50OiB0aGlzLnJlYWR5CiAgICAgICAgfSwKICAgICAgICB1cFRvRGF0ZTogewogICAgICAgICAgbGFiZWw6ICdVcC10by1kYXRlJywKICAgICAgICAgIGNvbnRlbnQ6IHRoaXMudXBUb0RhdGUKICAgICAgICB9LAogICAgICAgIGF2YWlsYWJsZTogewogICAgICAgICAgbGFiZWw6ICdBdmFpbGFibGUnLAogICAgICAgICAgY29udGVudDogdGhpcy5hdmFpbGFibGUKICAgICAgICB9CiAgICAgIH07CiAgICAgIGlmICh0eXBlID09PSBXT1JLTE9BRF9UWVBFUy5KT0IpIHsKICAgICAgICB2YXIgX3RoaXMkc3RhdHVzNiA9IHRoaXMuc3RhdHVzLAogICAgICAgICAgY29tcGxldGlvblRpbWUgPSBfdGhpcyRzdGF0dXM2LmNvbXBsZXRpb25UaW1lLAogICAgICAgICAgc3RhcnRUaW1lID0gX3RoaXMkc3RhdHVzNi5zdGFydFRpbWU7CiAgICAgICAgdmFyIEZBQ1RPUlMgPSBbNjAsIDYwLCAyNF07CiAgICAgICAgdmFyIExBQkVMUyA9IFsnc2VjJywgJ21pbicsICdob3VyJywgJ2RheSddOwogICAgICAgIGlmIChzdGFydFRpbWUpIHsKICAgICAgICAgIG91dC5wdXNoKHsKICAgICAgICAgICAgbGFiZWw6ICdTdGFydGVkJywKICAgICAgICAgICAgY29udGVudDogc3RhcnRUaW1lLAogICAgICAgICAgICBmb3JtYXR0ZXI6ICdMaXZlRGF0ZScsCiAgICAgICAgICAgIGZvcm1hdHRlck9wdHM6IHsKICAgICAgICAgICAgICBhZGRTdWZmaXg6IHRydWUKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIGlmIChjb21wbGV0aW9uVGltZSAmJiBzdGFydFRpbWUpIHsKICAgICAgICAgIHZhciBlbmQgPSBkYXkoY29tcGxldGlvblRpbWUpOwogICAgICAgICAgdmFyIHN0YXJ0ID0gZGF5KHN0YXJ0VGltZSk7CiAgICAgICAgICB2YXIgZGlmZiA9IGVuZC5kaWZmKHN0YXJ0KSAvIDEwMDA7CiAgICAgICAgICB2YXIgbGFiZWw7CiAgICAgICAgICB2YXIgaSA9IDA7CiAgICAgICAgICB3aGlsZSAoZGlmZiA+PSBGQUNUT1JTW2ldICYmIGkgPCBGQUNUT1JTLmxlbmd0aCkgewogICAgICAgICAgICBkaWZmIC89IEZBQ1RPUlNbaV07CiAgICAgICAgICAgIGkrKzsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChkaWZmIDwgNSkgewogICAgICAgICAgICBsYWJlbCA9IE1hdGguZmxvb3IoZGlmZiAqIDEwKSAvIDEwOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgbGFiZWwgPSBNYXRoLmZsb29yKGRpZmYpOwogICAgICAgICAgfQogICAgICAgICAgbGFiZWwgKz0gIiAiLmNvbmNhdCh0aGlzLnQoInVuaXQuIi5jb25jYXQoTEFCRUxTW2ldKSwgewogICAgICAgICAgICBjb3VudDogbGFiZWwKICAgICAgICAgIH0pLCAiICIpOwogICAgICAgICAgbGFiZWwgPSBsYWJlbC50cmltKCk7CiAgICAgICAgICBvdXQucHVzaCh7CiAgICAgICAgICAgIGxhYmVsOiAnRHVyYXRpb24nLAogICAgICAgICAgICBjb250ZW50OiBsYWJlbAogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKHR5cGUgPT09IFdPUktMT0FEX1RZUEVTLkNST05fSk9CKSB7CiAgICAgICAgdmFyIF90aGlzJHN0YXR1czc7CiAgICAgICAgb3V0LnB1c2goewogICAgICAgICAgbGFiZWw6ICdMYXN0IFNjaGVkdWxlZCBUaW1lJywKICAgICAgICAgIGNvbnRlbnQ6IHRoaXMgPT09IG51bGwgfHwgdGhpcyA9PT0gdm9pZCAwIHx8IChfdGhpcyRzdGF0dXM3ID0gdGhpcy5zdGF0dXMpID09PSBudWxsIHx8IF90aGlzJHN0YXR1czcgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJHN0YXR1czcubGFzdFNjaGVkdWxlVGltZSwKICAgICAgICAgIGZvcm1hdHRlcjogJ0xpdmVEYXRlJwogICAgICAgIH0pOwogICAgICB9CiAgICAgIG91dC5wdXNoKHsKICAgICAgICBsYWJlbDogJ0ltYWdlJywKICAgICAgICBjb250ZW50OiB0aGlzLmltYWdlTmFtZXMsCiAgICAgICAgZm9ybWF0dGVyOiAnUG9kSW1hZ2VzJwogICAgICB9KTsKICAgICAgc3dpdGNoICh0eXBlKSB7CiAgICAgICAgY2FzZSBXT1JLTE9BRF9UWVBFUy5ERVBMT1lNRU5UOgogICAgICAgICAgb3V0LnB1c2goZGV0YWlsSXRlbS5yZWFkeSwgZGV0YWlsSXRlbS51cFRvRGF0ZSwgZGV0YWlsSXRlbS5hdmFpbGFibGUsIFNFUEFSQVRPUiwgZGV0YWlsSXRlbS5lbmRwb2ludCk7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlIFdPUktMT0FEX1RZUEVTLkRBRU1PTl9TRVQ6CiAgICAgICAgICBvdXQucHVzaChkZXRhaWxJdGVtLnJlYWR5LCBTRVBBUkFUT1IsIGRldGFpbEl0ZW0uZW5kcG9pbnQpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSBXT1JLTE9BRF9UWVBFUy5SRVBMSUNBX1NFVDoKICAgICAgICAgIG91dC5wdXNoKGRldGFpbEl0ZW0ucmVhZHksIFNFUEFSQVRPUiwgZGV0YWlsSXRlbS5lbmRwb2ludCk7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlIFdPUktMT0FEX1RZUEVTLlNUQVRFRlVMX1NFVDoKICAgICAgICAgIG91dC5wdXNoKGRldGFpbEl0ZW0ucmVhZHksIFNFUEFSQVRPUiwgZGV0YWlsSXRlbS5lbmRwb2ludCk7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlIFdPUktMT0FEX1RZUEVTLlJFUExJQ0FUSU9OX0NPTlRST0xMRVI6CiAgICAgICAgICBvdXQucHVzaChkZXRhaWxJdGVtLnJlYWR5LCBTRVBBUkFUT1IsIGRldGFpbEl0ZW0uZW5kcG9pbnQpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSBXT1JLTE9BRF9UWVBFUy5KT0I6CiAgICAgICAgICBvdXQucHVzaChkZXRhaWxJdGVtLmVuZHBvaW50KTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgV09SS0xPQURfVFlQRVMuQ1JPTl9KT0I6CiAgICAgICAgICBvdXQucHVzaChkZXRhaWxJdGVtLmVuZHBvaW50KTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgUE9EOgogICAgICAgICAgb3V0LnB1c2goZGV0YWlsSXRlbS5yZWFkeSk7CiAgICAgICAgICBicmVhazsKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgICAgcmV0dXJuIG91dDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZWRlcGxveSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVkZXBsb3koKSB7CiAgICAgIHZhciBub3cgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkucmVwbGFjZSgvXC5cZCtaJC8sICdaJyk7CiAgICAgIGlmICghdGhpcy5zcGVjLnRlbXBsYXRlLm1ldGFkYXRhKSB7CiAgICAgICAgc2V0KHRoaXMuc3BlYy50ZW1wbGF0ZSwgJ21ldGFkYXRhJywge30pOwogICAgICB9CiAgICAgIHZhciBhbm5vdGF0aW9ucyA9IHRoaXMuc3BlYy50ZW1wbGF0ZS5tZXRhZGF0YS5hbm5vdGF0aW9ucyB8fCB7fTsKICAgICAgYW5ub3RhdGlvbnNbVElNRVNUQU1QXSA9IG5vdzsKICAgICAgc2V0KHRoaXMuc3BlYy50ZW1wbGF0ZS5tZXRhZGF0YSwgJ2Fubm90YXRpb25zJywgYW5ub3RhdGlvbnMpOwogICAgICB0aGlzLnNhdmUoKTsKICAgIH0KCiAgICAvLyBtYXRjaCBleGlzdGluZyBjb250YWluZXIgcG9ydHMgd2l0aCBzZXJ2aWNlcyBjcmVhdGVkIGZvciB0aGlzIHdvcmtsb2FkCiAgfSwgewogICAga2V5OiAiZ2V0UG9ydHNXaXRoU2VydmljZVR5cGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9nZXRQb3J0c1dpdGhTZXJ2aWNlVHlwZSA9IF9hc3luY1RvR2VuZXJhdG9yKC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTUoKSB7CiAgICAgICAgdmFyIHBvcnRzLCBjYW5BY2Nlc3NTZXJ2aWNlcywgc2VydmljZXMsIGNsdXN0ZXJJUFNlcnZpY2VQb3J0cywgbG9hZEJhbGFuY2VyU2VydmljZVBvcnRzLCBub2RlUG9ydFNlcnZpY2VQb3J0czsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU1JChfY29udGV4dDUpIHsKICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0NS5wcmV2ID0gX2NvbnRleHQ1Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIHBvcnRzID0gW107CiAgICAgICAgICAgICAgdGhpcy5jb250YWluZXJzLmZvckVhY2goZnVuY3Rpb24gKGNvbnRhaW5lcikgewogICAgICAgICAgICAgICAgcmV0dXJuIHBvcnRzLnB1c2guYXBwbHkocG9ydHMsIF90b0NvbnN1bWFibGVBcnJheShjb250YWluZXIucG9ydHMgfHwgW10pKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAodGhpcy5pbml0Q29udGFpbmVycyB8fCBbXSkuZm9yRWFjaChmdW5jdGlvbiAoY29udGFpbmVyKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gcG9ydHMucHVzaC5hcHBseShwb3J0cywgX3RvQ29uc3VtYWJsZUFycmF5KGNvbnRhaW5lci5wb3J0cyB8fCBbXSkpOwogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAvLyBPbmx5IGdldCBzZXJ2aWNlcyBvd25lZCBpZiB3ZSBjYW4gYWNjZXNzIHRoZSBzZXJ2aWNlIHJlc291cmNlCiAgICAgICAgICAgICAgY2FuQWNjZXNzU2VydmljZXMgPSB0aGlzLiRnZXR0ZXJzWydzY2hlbWFGb3InXShTRVJWSUNFKTsKICAgICAgICAgICAgICBpZiAoIWNhbkFjY2Vzc1NlcnZpY2VzKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDEwOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gNzsKICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRTZXJ2aWNlc093bmVkKCk7CiAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICBfY29udGV4dDUudDAgPSBfY29udGV4dDUuc2VudDsKICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDExOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgIF9jb250ZXh0NS50MCA9IFtdOwogICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgIHNlcnZpY2VzID0gX2NvbnRleHQ1LnQwOwogICAgICAgICAgICAgIGNsdXN0ZXJJUFNlcnZpY2VQb3J0cyA9IFtdOwogICAgICAgICAgICAgIGxvYWRCYWxhbmNlclNlcnZpY2VQb3J0cyA9IFtdOwogICAgICAgICAgICAgIG5vZGVQb3J0U2VydmljZVBvcnRzID0gW107CiAgICAgICAgICAgICAgaWYgKHNlcnZpY2VzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgc2VydmljZXMuZm9yRWFjaChmdW5jdGlvbiAoc3ZjKSB7CiAgICAgICAgICAgICAgICAgIHZhciBfc3ZjJHNwZWMsIF9zdmMkc3BlYzIsIF9zdmMkc3BlYzM7CiAgICAgICAgICAgICAgICAgIHN3aXRjaCAoc3ZjLnNwZWMudHlwZSkgewogICAgICAgICAgICAgICAgICAgIGNhc2UgJ0NsdXN0ZXJJUCc6CiAgICAgICAgICAgICAgICAgICAgICBjbHVzdGVySVBTZXJ2aWNlUG9ydHMucHVzaC5hcHBseShjbHVzdGVySVBTZXJ2aWNlUG9ydHMsIF90b0NvbnN1bWFibGVBcnJheSgoc3ZjID09PSBudWxsIHx8IHN2YyA9PT0gdm9pZCAwIHx8IChfc3ZjJHNwZWMgPSBzdmMuc3BlYykgPT09IG51bGwgfHwgX3N2YyRzcGVjID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfc3ZjJHNwZWMucG9ydHMpIHx8IFtdKSk7CiAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICBjYXNlICdMb2FkQmFsYW5jZXInOgogICAgICAgICAgICAgICAgICAgICAgbG9hZEJhbGFuY2VyU2VydmljZVBvcnRzLnB1c2guYXBwbHkobG9hZEJhbGFuY2VyU2VydmljZVBvcnRzLCBfdG9Db25zdW1hYmxlQXJyYXkoKHN2YyA9PT0gbnVsbCB8fCBzdmMgPT09IHZvaWQgMCB8fCAoX3N2YyRzcGVjMiA9IHN2Yy5zcGVjKSA9PT0gbnVsbCB8fCBfc3ZjJHNwZWMyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfc3ZjJHNwZWMyLnBvcnRzKSB8fCBbXSkpOwogICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAnTm9kZVBvcnQnOgogICAgICAgICAgICAgICAgICAgICAgbm9kZVBvcnRTZXJ2aWNlUG9ydHMucHVzaC5hcHBseShub2RlUG9ydFNlcnZpY2VQb3J0cywgX3RvQ29uc3VtYWJsZUFycmF5KChzdmMgPT09IG51bGwgfHwgc3ZjID09PSB2b2lkIDAgfHwgKF9zdmMkc3BlYzMgPSBzdmMuc3BlYykgPT09IG51bGwgfHwgX3N2YyRzcGVjMyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3N2YyRzcGVjMy5wb3J0cykgfHwgW10pKTsKICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHBvcnRzLmZvckVhY2goZnVuY3Rpb24gKHBvcnQpIHsKICAgICAgICAgICAgICAgIHZhciBuYW1lID0gcG9ydC5uYW1lID8gcG9ydC5uYW1lIDogIiIuY29uY2F0KHBvcnQuY29udGFpbmVyUG9ydCkuY29uY2F0KHBvcnQucHJvdG9jb2wudG9Mb3dlckNhc2UoKSkuY29uY2F0KHBvcnQuaG9zdFBvcnQgfHwgcG9ydC5fbGlzdGVuaW5nUG9ydCB8fCAnJyk7CiAgICAgICAgICAgICAgICBwb3J0Lm5hbWUgPSBuYW1lOwogICAgICAgICAgICAgICAgaWYgKHBvcnQuX3NlcnZpY2VUeXBlICYmIHBvcnQuX3NlcnZpY2VUeXBlICE9PSAnJykgewogICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAobG9hZEJhbGFuY2VyU2VydmljZVBvcnRzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICB2YXIgcG9ydFNwZWMgPSBmaW5kQnkobG9hZEJhbGFuY2VyU2VydmljZVBvcnRzLCAnbmFtZScsIG5hbWUpOwogICAgICAgICAgICAgICAgICBpZiAocG9ydFNwZWMpIHsKICAgICAgICAgICAgICAgICAgICBwb3J0Ll9saXN0ZW5pbmdQb3J0ID0gcG9ydFNwZWMucG9ydDsKICAgICAgICAgICAgICAgICAgICBwb3J0Ll9zZXJ2aWNlVHlwZSA9ICdMb2FkQmFsYW5jZXInOwogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKG5vZGVQb3J0U2VydmljZVBvcnRzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICB2YXIgX3BvcnRTcGVjID0gZmluZEJ5KG5vZGVQb3J0U2VydmljZVBvcnRzLCAnbmFtZScsIG5hbWUpOwogICAgICAgICAgICAgICAgICBpZiAoX3BvcnRTcGVjKSB7CiAgICAgICAgICAgICAgICAgICAgcG9ydC5fbGlzdGVuaW5nUG9ydCA9IF9wb3J0U3BlYy5ub2RlUG9ydDsKICAgICAgICAgICAgICAgICAgICBwb3J0Ll9zZXJ2aWNlVHlwZSA9ICdOb2RlUG9ydCc7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoY2x1c3RlcklQU2VydmljZVBvcnRzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICBpZiAoZmluZEJ5KGNsdXN0ZXJJUFNlcnZpY2VQb3J0cywgJ25hbWUnLCBuYW1lKSkgewogICAgICAgICAgICAgICAgICAgIHBvcnQuX3NlcnZpY2VUeXBlID0gJ0NsdXN0ZXJJUCc7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LmFicnVwdCgicmV0dXJuIiwgcG9ydHMpOwogICAgICAgICAgICBjYXNlIDE4OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU1LCB0aGlzKTsKICAgICAgfSkpOwogICAgICBmdW5jdGlvbiBnZXRQb3J0c1dpdGhTZXJ2aWNlVHlwZSgpIHsKICAgICAgICByZXR1cm4gX2dldFBvcnRzV2l0aFNlcnZpY2VUeXBlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KICAgICAgcmV0dXJuIGdldFBvcnRzV2l0aFNlcnZpY2VUeXBlOwogICAgfSgpCiAgfSwgewogICAga2V5OiAib3duZWRCeVdvcmtsb2FkIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgX3RoaXMkbWV0YWRhdGEyOwogICAgICB2YXIgdHlwZXMgPSBPYmplY3QudmFsdWVzKFdPUktMT0FEX1RZUEVTKTsKICAgICAgaWYgKChfdGhpcyRtZXRhZGF0YTIgPSB0aGlzLm1ldGFkYXRhKSAhPT0gbnVsbCAmJiBfdGhpcyRtZXRhZGF0YTIgIT09IHZvaWQgMCAmJiBfdGhpcyRtZXRhZGF0YTIub3duZXJSZWZlcmVuY2VzKSB7CiAgICAgICAgdmFyIF9pdGVyYXRvcjIgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcih0aGlzLm1ldGFkYXRhLm93bmVyUmVmZXJlbmNlcyksCiAgICAgICAgICBfc3RlcDI7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIGZvciAoX2l0ZXJhdG9yMi5zKCk7ICEoX3N0ZXAyID0gX2l0ZXJhdG9yMi5uKCkpLmRvbmU7KSB7CiAgICAgICAgICAgIHZhciBvd25lciA9IF9zdGVwMi52YWx1ZTsKICAgICAgICAgICAgdmFyIGhhdmUgPSAiIi5jb25jYXQob3duZXIuYXBpVmVyc2lvbi5yZXBsYWNlKC9cLy4qLywgJycpLCAiLiIpLmNvbmNhdChvd25lci5raW5kKS50b0xvd2VyQ2FzZSgpOwogICAgICAgICAgICBpZiAodHlwZXMuaW5jbHVkZXMoaGF2ZSkpIHsKICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgX2l0ZXJhdG9yMi5lKGVycik7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgIF9pdGVyYXRvcjIuZigpOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgfSwgewogICAga2V5OiAiaXNGcm9tTm9ybWFuIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gKHRoaXMubWV0YWRhdGEubGFiZWxzIHx8IHt9KVsnY2F0dGxlLmlvL2NyZWF0b3InXSA9PT0gJ25vcm1hbic7CiAgICB9CiAgfSwgewogICAga2V5OiAid2FybkRlbGV0aW9uTWVzc2FnZSIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgaWYgKHRoaXMuaXNGcm9tTm9ybWFuKSB7CiAgICAgICAgcmV0dXJuIHRoaXMudCgnd29ya2xvYWQubm9ybWFuV2FybmluZycpOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAicG9kcyIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgdmFyIF90aGlzJG1ldGFkYXRhMzsKICAgICAgdmFyIHJlbGF0aW9uc2hpcHMgPSAoKF90aGlzJG1ldGFkYXRhMyA9IHRoaXMubWV0YWRhdGEpID09PSBudWxsIHx8IF90aGlzJG1ldGFkYXRhMyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkbWV0YWRhdGEzLnJlbGF0aW9uc2hpcHMpIHx8IFtdOwogICAgICB2YXIgcG9kUmVsYXRpb25zaGlwID0gcmVsYXRpb25zaGlwcy5maWx0ZXIoZnVuY3Rpb24gKHJlbGF0aW9uc2hpcCkgewogICAgICAgIHJldHVybiByZWxhdGlvbnNoaXAudG9UeXBlID09PSBQT0Q7CiAgICAgIH0pWzBdOwogICAgICBpZiAocG9kUmVsYXRpb25zaGlwKSB7CiAgICAgICAgdmFyIHBvZHMgPSB0aGlzLiRnZXR0ZXJzWydwb2RzQnlOYW1lc3BhY2UnXSh0aGlzLm1ldGFkYXRhLm5hbWVzcGFjZSk7CiAgICAgICAgcmV0dXJuIHBvZHMuZmlsdGVyKGZ1bmN0aW9uIChvYmopIHsKICAgICAgICAgIHJldHVybiBtYXRjaGVzKG9iaiwgcG9kUmVsYXRpb25zaGlwLnNlbGVjdG9yKTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gW107CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJwb2RHYXVnZXMiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHZhciBvdXQgPSB7fTsKICAgICAgaWYgKCF0aGlzLnBvZHMpIHsKICAgICAgICByZXR1cm4gb3V0OwogICAgICB9CiAgICAgIHRoaXMucG9kcy5tYXAoZnVuY3Rpb24gKHBvZCkgewogICAgICAgIHZhciBzdGF0ZUNvbG9yID0gcG9kLnN0YXRlQ29sb3IsCiAgICAgICAgICBzdGF0ZURpc3BsYXkgPSBwb2Quc3RhdGVEaXNwbGF5OwogICAgICAgIGlmIChvdXRbc3RhdGVEaXNwbGF5XSkgewogICAgICAgICAgb3V0W3N0YXRlRGlzcGxheV0uY291bnQrKzsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgb3V0W3N0YXRlRGlzcGxheV0gPSB7CiAgICAgICAgICAgIGNvbG9yOiBzdGF0ZUNvbG9yLnJlcGxhY2UoJ3RleHQtJywgJycpLAogICAgICAgICAgICBjb3VudDogMQogICAgICAgICAgfTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICByZXR1cm4gb3V0OwogICAgfQoKICAgIC8vIEpvYiBTcGVjaWZpYwogIH0sIHsKICAgIGtleTogImpvYlJlbGF0aW9uc2hpcHMiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIGlmICh0aGlzLnR5cGUgIT09IFdPUktMT0FEX1RZUEVTLkNST05fSk9CKSB7CiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDsKICAgICAgfQogICAgICByZXR1cm4gKF9nZXQyKHRoaXMsICdtZXRhZGF0YS5yZWxhdGlvbnNoaXBzJykgfHwgW10pLmZpbHRlcihmdW5jdGlvbiAocmVsYXRpb25zaGlwKSB7CiAgICAgICAgcmV0dXJuIHJlbGF0aW9uc2hpcC50b1R5cGUgPT09IFdPUktMT0FEX1RZUEVTLkpPQjsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiam9icyIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgaWYgKHRoaXMudHlwZSAhPT0gV09SS0xPQURfVFlQRVMuQ1JPTl9KT0IpIHsKICAgICAgICByZXR1cm4gdW5kZWZpbmVkOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzLmpvYlJlbGF0aW9uc2hpcHMubWFwKGZ1bmN0aW9uIChvYmopIHsKICAgICAgICByZXR1cm4gX3RoaXMuJGdldHRlcnNbJ2J5SWQnXShXT1JLTE9BRF9UWVBFUy5KT0IsIG9iai50b0lkKTsKICAgICAgfSkuZmlsdGVyKGZ1bmN0aW9uICh4KSB7CiAgICAgICAgcmV0dXJuICEheDsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiam9iR2F1Z2VzIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgb3V0ID0gewogICAgICAgIHN1Y2NlZWRlZDogewogICAgICAgICAgY29sb3I6ICdzdWNjZXNzJywKICAgICAgICAgIGNvdW50OiAwCiAgICAgICAgfSwKICAgICAgICBydW5uaW5nOiB7CiAgICAgICAgICBjb2xvcjogJ2luZm8nLAogICAgICAgICAgY291bnQ6IDAKICAgICAgICB9LAogICAgICAgIGZhaWxlZDogewogICAgICAgICAgY29sb3I6ICdlcnJvcicsCiAgICAgICAgICBjb3VudDogMAogICAgICAgIH0KICAgICAgfTsKICAgICAgaWYgKHRoaXMudHlwZSA9PT0gV09SS0xPQURfVFlQRVMuQ1JPTl9KT0IpIHsKICAgICAgICB0aGlzLmpvYnMuZm9yRWFjaChmdW5jdGlvbiAoam9iKSB7CiAgICAgICAgICB2YXIgX2pvYiRzdGF0dXMgPSBqb2Iuc3RhdHVzLAogICAgICAgICAgICBzdGF0dXMgPSBfam9iJHN0YXR1cyA9PT0gdm9pZCAwID8ge30gOiBfam9iJHN0YXR1czsKICAgICAgICAgIG91dC5ydW5uaW5nLmNvdW50ICs9IHN0YXR1cy5hY3RpdmUgfHwgMDsKICAgICAgICAgIG91dC5zdWNjZWVkZWQuY291bnQgKz0gc3RhdHVzLnN1Y2NlZWRlZCB8fCAwOwogICAgICAgICAgb3V0LmZhaWxlZC5jb3VudCArPSBzdGF0dXMuZmFpbGVkIHx8IDA7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSBpZiAodGhpcy50eXBlID09PSBXT1JLTE9BRF9UWVBFUy5KT0IpIHsKICAgICAgICB2YXIgX3RoaXMkc3RhdHVzOCA9IHRoaXMuc3RhdHVzLAogICAgICAgICAgc3RhdHVzID0gX3RoaXMkc3RhdHVzOCA9PT0gdm9pZCAwID8ge30gOiBfdGhpcyRzdGF0dXM4OwogICAgICAgIG91dC5ydW5uaW5nLmNvdW50ID0gc3RhdHVzLmFjdGl2ZSB8fCAwOwogICAgICAgIG91dC5zdWNjZWVkZWQuY291bnQgPSBzdGF0dXMuc3VjY2VlZGVkIHx8IDA7CiAgICAgICAgb3V0LmZhaWxlZC5jb3VudCA9IHN0YXR1cy5mYWlsZWQgfHwgMDsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQogICAgICByZXR1cm4gb3V0OwogICAgfQogIH0sIHsKICAgIGtleTogImN1cnJlbnRSZXZpc2lvbk51bWJlciIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgaWYgKHRoaXMub3duZWRCeVdvcmtsb2FkIHx8IHRoaXMua2luZCA9PT0gJ0pvYicgfHwgdGhpcy5raW5kID09PSAnQ3JvbkpvYicpIHsKICAgICAgICByZXR1cm4gdW5kZWZpbmVkOwogICAgICB9CiAgICAgIGlmICh0aGlzLmtpbmQgPT09ICdEZXBsb3ltZW50JykgewogICAgICAgIHJldHVybiB0aGlzLm1ldGFkYXRhLmFubm90YXRpb25zWydkZXBsb3ltZW50Lmt1YmVybmV0ZXMuaW8vcmV2aXNpb24nXTsKICAgICAgfQoKICAgICAgLy8gJ0RhZW1vblNldCcsICdTdGF0ZWZ1bFNldCcKICAgICAgcmV0dXJuIHRoaXMubWV0YWRhdGEuZ2VuZXJhdGlvbjsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJtYXRjaGluZ1BvZHMiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9tYXRjaGluZ1BvZHMgPSBfYXN5bmNUb0dlbmVyYXRvcigvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU2KCkgewogICAgICAgIHZhciBfdGhpczIgPSB0aGlzOwogICAgICAgIHZhciBhbGwsIGFsbEluTmFtZXNwYWNlLCBzZWxlY3RvcjsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU2JChfY29udGV4dDYpIHsKICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0Ni5wcmV2ID0gX2NvbnRleHQ2Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gMjsKICAgICAgICAgICAgICByZXR1cm4gdGhpcy4kZGlzcGF0Y2goJ2ZpbmRBbGwnLCB7CiAgICAgICAgICAgICAgICB0eXBlOiBQT0QKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIGFsbCA9IF9jb250ZXh0Ni5zZW50OwogICAgICAgICAgICAgIGFsbEluTmFtZXNwYWNlID0gYWxsLmZpbHRlcihmdW5jdGlvbiAocG9kKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gcG9kLm1ldGFkYXRhLm5hbWVzcGFjZSA9PT0gX3RoaXMyLm1ldGFkYXRhLm5hbWVzcGFjZTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBzZWxlY3RvciA9IGNvbnZlcnRTZWxlY3Rvck9iaih0aGlzLnNwZWMuc2VsZWN0b3IpOyAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL3JhbmNoZXIvZGFzaGJvYXJkL2lzc3Vlcy8xMDQxNywgYWxsIHBvZHMgYmFkLCBuZWVkIHRvIHJlcGxhY2UgbG9jYWwgc2VsZWN0b3Igc29tZWhvdwogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDYuYWJydXB0KCJyZXR1cm4iLCBtYXRjaGluZyhhbGxJbk5hbWVzcGFjZSwgc2VsZWN0b3IpKTsKICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDYuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU2LCB0aGlzKTsKICAgICAgfSkpOwogICAgICBmdW5jdGlvbiBtYXRjaGluZ1BvZHMoKSB7CiAgICAgICAgcmV0dXJuIF9tYXRjaGluZ1BvZHMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQogICAgICByZXR1cm4gbWF0Y2hpbmdQb2RzOwogICAgfSgpCiAgfSwgewogICAga2V5OiAiY2xlYW5Gb3JTYXZlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjbGVhbkZvclNhdmUoZGF0YSkgewogICAgICB2YXIgX3ZhbCRzcGVjLAogICAgICAgIF90aGlzMyA9IHRoaXMsCiAgICAgICAgX3ZhbCRzcGVjMjsKICAgICAgdmFyIHZhbCA9IF9zdXBlclByb3BHZXQoV29ya2xvYWQsICJjbGVhbkZvclNhdmUiLCB0aGlzLCAzKShbZGF0YV0pOwoKICAgICAgLy8gcmVtb3ZlIGZpZWxkcyBmcm9tIGNvbnRhaW5lcnMKICAgICAgKF92YWwkc3BlYyA9IHZhbC5zcGVjKSA9PT0gbnVsbCB8fCBfdmFsJHNwZWMgPT09IHZvaWQgMCB8fCAoX3ZhbCRzcGVjID0gX3ZhbCRzcGVjLnRlbXBsYXRlKSA9PT0gbnVsbCB8fCBfdmFsJHNwZWMgPT09IHZvaWQgMCB8fCAoX3ZhbCRzcGVjID0gX3ZhbCRzcGVjLnNwZWMpID09PSBudWxsIHx8IF92YWwkc3BlYyA9PT0gdm9pZCAwIHx8IChfdmFsJHNwZWMgPSBfdmFsJHNwZWMuY29udGFpbmVycykgPT09IG51bGwgfHwgX3ZhbCRzcGVjID09PSB2b2lkIDAgfHwgX3ZhbCRzcGVjLmZvckVhY2goZnVuY3Rpb24gKGNvbnRhaW5lcikgewogICAgICAgIF90aGlzMy5jbGVhbkNvbnRhaW5lckZvclNhdmUoY29udGFpbmVyKTsKICAgICAgfSk7CgogICAgICAvLyByZW1vdmUgZmllbGRzIGZyb20gaW5pdENvbnRhaW5lcnMKICAgICAgKF92YWwkc3BlYzIgPSB2YWwuc3BlYykgPT09IG51bGwgfHwgX3ZhbCRzcGVjMiA9PT0gdm9pZCAwIHx8IChfdmFsJHNwZWMyID0gX3ZhbCRzcGVjMi50ZW1wbGF0ZSkgPT09IG51bGwgfHwgX3ZhbCRzcGVjMiA9PT0gdm9pZCAwIHx8IChfdmFsJHNwZWMyID0gX3ZhbCRzcGVjMi5zcGVjKSA9PT0gbnVsbCB8fCBfdmFsJHNwZWMyID09PSB2b2lkIDAgfHwgKF92YWwkc3BlYzIgPSBfdmFsJHNwZWMyLmluaXRDb250YWluZXJzKSA9PT0gbnVsbCB8fCBfdmFsJHNwZWMyID09PSB2b2lkIDAgfHwgX3ZhbCRzcGVjMi5mb3JFYWNoKGZ1bmN0aW9uIChjb250YWluZXIpIHsKICAgICAgICBfdGhpczMuY2xlYW5Db250YWluZXJGb3JTYXZlKGNvbnRhaW5lcik7CiAgICAgIH0pOwogICAgICByZXR1cm4gdmFsOwogICAgfQogIH1dKTsKfShXb3JrbG9hZFNlcnZpY2UpOwpleHBvcnQgeyBXb3JrbG9hZCBhcyBkZWZhdWx0IH07"},{"version":3,"names":["findBy","insertAt","TIMESTAMP","CATTLE_PUBLIC_ENDPOINTS","WORKLOAD_TYPES","SERVICE","POD","get","set","day","convertSelectorObj","matching","matches","SEPARATOR","WorkloadService","defaultContainer","imagePullPolicy","name","securityContext","runAsNonRoot","readOnlyRootFilesystem","privileged","allowPrivilegeEscalation","Workload","_WorkloadService","_classCallCheck","_callSuper","arguments","_inherits","_createClass","key","out","_superPropGet","type","_type","editYaml","index","indexOf","action","label","t","icon","enabled","links","update","JOB","CRON_JOB","_this$spec","_this$spec2","bulkable","spec","paused","divider","view","total","toFilter","filter","includes","value","applyDefaults","vm","_this$spec3","jobTemplate","template","restartPolicy","containers","initContainers","replicas","_objectSpread","selector","$set","toggleRollbackModal","workload","length","undefined","$dispatch","componentProps","component","_rollBackWorkload","_asyncToGenerator","_regeneratorRuntime","mark","_callee","cluster","rollbackRequestData","rollbackRequestBody","namespace","workloadName","wrap","_callee$","_context","prev","next","JSON","stringify","Array","isArray","TypeError","metadata","patch","url","concat","id","stop","rollBackWorkload","_x","_x2","_x3","_x4","apply","pause","save","resume","_scaleDown","_callee2","newScale","_callee2$","_context2","scaleDown","_scaleUp","_callee3","_callee3$","_context3","scaleUp","_this$spec4","_openShell","_callee4","pods","_iterator","_step","pod","_callee4$","_context4","matchingPods","sent","_createForOfIteratorHelper","s","n","done","isRunning","openShell","abrupt","t0","e","f","finish","title","message","root","addSidecar","goToEdit","sidecar","sum","forEach","status","containerStatuses","_pod$status","restartCount","_this$spec5","_this$spec6","podTemplateSpec","_podTemplateSpec$cont","_podTemplateSpec$init","podSpecPath","nullable","path","required","translationKey","validators","DEPLOYMENT","REPLICA_SET","push","STATEFUL_SET","_this$metadata","annotations","_this$spec7","_this$status","readyReplicas","_this$status2","_this$status3","Math","max","unavailableReplicas","DAEMON_SET","desired","_this$status4","_this$status5","updatedReplicas","detailItem","endpoint","content","formatter","ready","upToDate","available","_this$status6","completionTime","startTime","FACTORS","LABELS","formatterOpts","addSuffix","end","start","diff","i","floor","count","trim","_this$status7","lastScheduleTime","imageNames","REPLICATION_CONTROLLER","redeploy","now","Date","toISOString","replace","_getPortsWithServiceType","_callee5","ports","canAccessServices","services","clusterIPServicePorts","loadBalancerServicePorts","nodePortServicePorts","_callee5$","_context5","container","_toConsumableArray","$getters","getServicesOwned","svc","_svc$spec","_svc$spec2","_svc$spec3","port","containerPort","protocol","toLowerCase","hostPort","_listeningPort","_serviceType","portSpec","nodePort","getPortsWithServiceType","_this$metadata2","types","Object","values","ownerReferences","_iterator2","_step2","owner","have","apiVersion","kind","err","labels","isFromNorman","_this$metadata3","relationships","podRelationship","relationship","toType","obj","map","stateColor","stateDisplay","color","_this","jobRelationships","toId","x","succeeded","running","failed","jobs","job","_job$status","active","_this$status8","ownedByWorkload","generation","_matchingPods","_callee6","_this2","all","allInNamespace","_callee6$","_context6","cleanForSave","data","_val$spec","_this3","_val$spec2","val","cleanContainerForSave","default"],"sources":["/home/ubuntu/suseconf/node_modules/@rancher/shell/models/workload.js"],"sourcesContent":["import { findBy, insertAt } from '@shell/utils/array';\nimport { TIMESTAMP, CATTLE_PUBLIC_ENDPOINTS } from '@shell/config/labels-annotations';\nimport { WORKLOAD_TYPES, SERVICE, POD } from '@shell/config/types';\nimport { get, set } from '@shell/utils/object';\nimport day from 'dayjs';\nimport { convertSelectorObj, matching, matches } from '@shell/utils/selector';\nimport { SEPARATOR } from '@shell/config/workload';\nimport WorkloadService from '@shell/models/workload.service';\n\nexport const defaultContainer = {\n  imagePullPolicy: 'Always',\n  name:            'container-0',\n  securityContext: {\n    runAsNonRoot:             false,\n    readOnlyRootFilesystem:   false,\n    privileged:               false,\n    allowPrivilegeEscalation: false,\n  }\n};\nexport default class Workload extends WorkloadService {\n  // remove clone as yaml/edit as yaml until API supported\n  get _availableActions() {\n    let out = super._availableActions;\n    const type = this._type ? this._type : this.type;\n\n    const editYaml = findBy(out, 'action', 'goToEditYaml');\n    const index = editYaml ? out.indexOf(editYaml) : 0;\n\n    insertAt(out, index, {\n      action:  'addSidecar',\n      label:   this.t('action.addSidecar'),\n      icon:    'icon icon-plus',\n      enabled: !!this.links.update,\n    });\n\n    if (type !== WORKLOAD_TYPES.JOB && type !== WORKLOAD_TYPES.CRON_JOB) {\n      insertAt(out, 0, {\n        action:  'toggleRollbackModal',\n        label:   this.t('action.rollback'),\n        icon:    'icon icon-history',\n        enabled: !!this.links.update,\n      });\n\n      insertAt(out, 0, {\n        action:   'redeploy',\n        label:    this.t('action.redeploy'),\n        icon:     'icon icon-refresh',\n        enabled:  !!this.links.update,\n        bulkable: true,\n      });\n\n      insertAt(out, 0, {\n        action:  'pause',\n        label:   this.t('asyncButton.pause.action'),\n        icon:    'icon icon-pause',\n        enabled: !!this.links.update && !this.spec?.paused\n      });\n\n      insertAt(out, 0, {\n        action:  'resume',\n        label:   this.t('asyncButton.resume.action'),\n        icon:    'icon icon-play',\n        enabled: !!this.links.update && this.spec?.paused === true\n      });\n    }\n\n    insertAt(out, 0, { divider: true }) ;\n\n    insertAt(out, 0, {\n      action:  'openShell',\n      enabled: !!this.links.view,\n      icon:    'icon icon-fw icon-chevron-right',\n      label:   this.t('action.openShell'),\n      total:   1,\n    });\n\n    const toFilter = ['cloneYaml'];\n\n    out = out.filter((action) => {\n      if (!toFilter.includes(action.action)) {\n        return action;\n      }\n    });\n\n    return out;\n  }\n\n  applyDefaults(vm) {\n    const { spec = {} } = this;\n\n    if (this.type === WORKLOAD_TYPES.CRON_JOB) {\n      if (!spec.jobTemplate) {\n        spec.jobTemplate = {\n          spec: {\n            template: {\n              spec: {\n                restartPolicy: 'Never', containers: [{ imagePullPolicy: 'Always', name: 'container-0' }], initContainers: []\n              }\n            }\n          }\n        };\n      }\n    } else {\n      if (!spec.replicas && spec.replicas !== 0) {\n        spec.replicas = 1;\n      }\n\n      if (!spec.template) {\n        spec.template = {\n          spec: {\n            restartPolicy:  this.type === WORKLOAD_TYPES.JOB ? 'Never' : 'Always',\n            containers:     [{ ...defaultContainer }],\n            initContainers: []\n          }\n        };\n      }\n      if (!spec.selector) {\n        spec.selector = {};\n      }\n    }\n    vm.$set(this, 'spec', spec);\n  }\n\n  toggleRollbackModal( workload = this ) {\n    this.$dispatch('promptModal', {\n      componentProps: { workload },\n      component:      'RollbackWorkloadDialog'\n    });\n  }\n\n  async rollBackWorkload( cluster, workload, type, rollbackRequestData ) {\n    const rollbackRequestBody = JSON.stringify(rollbackRequestData);\n\n    if ( Array.isArray( workload ) ) {\n      throw new TypeError(this.t('promptRollback.multipleWorkloadError'));\n    }\n    const namespace = workload.metadata.namespace;\n    const workloadName = workload.metadata.name;\n\n    /**\n     * Ensure we go out to the correct cluster\n     *\n     * Build the request body in the same format that kubectl\n     * uses to call the Kubernetes API to roll back a workload.\n     * To see an example request body, run:\n     * kubectl rollout undo deployment/[deployment name] --to-revision=[revision number] -v=8\n     */\n    await this.patch(rollbackRequestBody, { url: `/k8s/clusters/${ cluster.id }/apis/apps/v1/namespaces/${ namespace }/${ type }/${ workloadName }` });\n  }\n\n  pause() {\n    set(this.spec, 'paused', true);\n    this.save();\n  }\n\n  resume() {\n    set(this.spec, 'paused', false);\n    this.save();\n  }\n\n  async scaleDown() {\n    const newScale = this.spec.replicas - 1;\n\n    if (newScale >= 0) {\n      set(this.spec, 'replicas', newScale);\n      await this.save();\n    }\n  }\n\n  async scaleUp() {\n    set(this.spec, 'replicas', this.spec.replicas + 1);\n    await this.save();\n  }\n\n  get state() {\n    if ( this.spec?.paused === true ) {\n      return 'paused';\n    }\n\n    return super.state;\n  }\n\n  async openShell() {\n    const pods = await this.matchingPods();\n\n    for ( const pod of pods ) {\n      if ( pod.isRunning ) {\n        pod.openShell();\n\n        return;\n      }\n    }\n\n    this.$dispatch('growl/error', {\n      title:   'Unavailable',\n      message: 'There are no running pods to execute a shell in.'\n    }, { root: true });\n  }\n\n  addSidecar() {\n    return this.goToEdit({ sidecar: true });\n  }\n\n  get showPodRestarts() {\n    return true;\n  }\n\n  get restartCount() {\n    const pods = this.pods;\n\n    let sum = 0;\n\n    pods.forEach((pod) => {\n      if (pod.status.containerStatuses) {\n        sum += pod.status?.containerStatuses[0].restartCount || 0;\n      }\n    });\n\n    return sum;\n  }\n\n  get hasSidecars() {\n    const podTemplateSpec = this.type === WORKLOAD_TYPES.CRON_JOB ? this?.spec?.jobTemplate?.spec?.template?.spec : this.spec?.template?.spec;\n\n    const { containers = [], initContainers = [] } = podTemplateSpec;\n\n    return containers.length > 1 || initContainers.length;\n  }\n\n  get customValidationRules() {\n    const type = this._type ? this._type : this.type;\n\n    const podSpecPath = type === WORKLOAD_TYPES.CRON_JOB ? 'spec.jobTemplate.spec.template.spec' : 'spec.template.spec';\n    const out = [\n      {\n        nullable:       false,\n        path:           'metadata.name',\n        required:       true,\n        translationKey: 'generic.name',\n        type:           'subDomain',\n      },\n      {\n        nullable:   false,\n        path:       'spec',\n        required:   true,\n        type:       'object',\n        validators: ['containerImages'],\n      },\n      {\n        nullable:   true,\n        path:       `${ podSpecPath }.affinity`,\n        type:       'object',\n        validators: ['podAffinity'],\n      }\n    ];\n\n    switch (type) {\n    case WORKLOAD_TYPES.DEPLOYMENT:\n    case WORKLOAD_TYPES.REPLICA_SET:\n      out.push( {\n        nullable:       false,\n        path:           'spec.replicas',\n        required:       true,\n        type:           'number',\n        translationKey: 'workload.replicas'\n      });\n      break;\n    case WORKLOAD_TYPES.STATEFUL_SET:\n      out.push({\n        nullable:       false,\n        path:           'spec.replicas',\n        required:       true,\n        type:           'number',\n        translationKey: 'workload.replicas'\n      });\n      out.push({\n        nullable:       false,\n        path:           'spec.serviceName',\n        required:       true,\n        type:           'string',\n        translationKey: 'workload.serviceName'\n      });\n      break;\n    case WORKLOAD_TYPES.CRON_JOB:\n      out.push( {\n        nullable:       false,\n        path:           'spec.schedule',\n        required:       true,\n        type:           'string',\n        validators:     ['cronSchedule'],\n        translationKey: 'workload.cronSchedule'\n      });\n    }\n\n    return out;\n  }\n\n  get endpoint() {\n    return this?.metadata?.annotations?.[CATTLE_PUBLIC_ENDPOINTS];\n  }\n\n  get desired() {\n    return this.spec?.replicas || 0;\n  }\n\n  get available() {\n    return this.status?.readyReplicas || 0;\n  }\n\n  get ready() {\n    const readyReplicas = Math.max(0, (this.status?.replicas || 0) - (this.status?.unavailableReplicas || 0));\n\n    if (this.type === WORKLOAD_TYPES.DAEMON_SET) {\n      return readyReplicas;\n    }\n\n    return `${ readyReplicas }/${ this.desired }`;\n  }\n\n  get unavailable() {\n    return this.status?.unavailableReplicas || 0;\n  }\n\n  get upToDate() {\n    return this.status?.updatedReplicas;\n  }\n\n  get details() {\n    const out = [];\n    const type = this._type ? this._type : this.type;\n\n    const detailItem = {\n      endpoint: {\n        label:     'Endpoints',\n        content:   this.endpoint,\n        formatter: 'WorkloadDetailEndpoints'\n      },\n      ready: {\n        label:   'Ready',\n        content: this.ready\n      },\n      upToDate: {\n        label:   'Up-to-date',\n        content: this.upToDate\n      },\n      available: {\n        label:   'Available',\n        content: this.available\n      }\n    };\n\n    if (type === WORKLOAD_TYPES.JOB) {\n      const { completionTime, startTime } = this.status;\n      const FACTORS = [60, 60, 24];\n      const LABELS = ['sec', 'min', 'hour', 'day'];\n\n      if ( startTime ) {\n        out.push({\n          label:         'Started',\n          content:       startTime,\n          formatter:     'LiveDate',\n          formatterOpts: { addSuffix: true },\n        });\n      }\n\n      if (completionTime && startTime) {\n        const end = day(completionTime);\n        const start = day(startTime);\n        let diff = end.diff(start) / 1000;\n\n        let label;\n\n        let i = 0;\n\n        while ( diff >= FACTORS[i] && i < FACTORS.length ) {\n          diff /= FACTORS[i];\n          i++;\n        }\n\n        if ( diff < 5 ) {\n          label = Math.floor(diff * 10) / 10;\n        } else {\n          label = Math.floor(diff);\n        }\n\n        label += ` ${ this.t(`unit.${ LABELS[i] }`, { count: label }) } `;\n        label = label.trim();\n\n        out.push({ label: 'Duration', content: label });\n      }\n    } else if ( type === WORKLOAD_TYPES.CRON_JOB ) {\n      out.push({\n        label:     'Last Scheduled Time',\n        content:   this?.status?.lastScheduleTime,\n        formatter: 'LiveDate'\n      });\n    }\n\n    out.push( {\n      label:     'Image',\n      content:   this.imageNames,\n      formatter: 'PodImages'\n    });\n\n    switch (type) {\n    case WORKLOAD_TYPES.DEPLOYMENT:\n      out.push(detailItem.ready, detailItem.upToDate, detailItem.available, SEPARATOR, detailItem.endpoint);\n      break;\n    case WORKLOAD_TYPES.DAEMON_SET:\n      out.push(detailItem.ready, SEPARATOR, detailItem.endpoint);\n      break;\n    case WORKLOAD_TYPES.REPLICA_SET:\n      out.push(detailItem.ready, SEPARATOR, detailItem.endpoint);\n      break;\n    case WORKLOAD_TYPES.STATEFUL_SET:\n      out.push(detailItem.ready, SEPARATOR, detailItem.endpoint);\n      break;\n    case WORKLOAD_TYPES.REPLICATION_CONTROLLER:\n      out.push(detailItem.ready, SEPARATOR, detailItem.endpoint);\n      break;\n    case WORKLOAD_TYPES.JOB:\n      out.push(detailItem.endpoint);\n      break;\n    case WORKLOAD_TYPES.CRON_JOB:\n      out.push(detailItem.endpoint);\n      break;\n    case POD:\n      out.push(detailItem.ready);\n      break;\n    default: break;\n    }\n\n    return out;\n  }\n\n  redeploy() {\n    const now = (new Date()).toISOString().replace(/\\.\\d+Z$/, 'Z');\n\n    if ( !this.spec.template.metadata ) {\n      set(this.spec.template, 'metadata', {});\n    }\n\n    const annotations = this.spec.template.metadata.annotations || {};\n\n    annotations[TIMESTAMP] = now;\n    set(this.spec.template.metadata, 'annotations', annotations);\n\n    this.save();\n  }\n\n  // match existing container ports with services created for this workload\n  async getPortsWithServiceType() {\n    const ports = [];\n\n    this.containers.forEach((container) => ports.push(...(container.ports || [])));\n    (this.initContainers || []).forEach((container) => ports.push(...(container.ports || [])));\n\n    // Only get services owned if we can access the service resource\n    const canAccessServices = this.$getters['schemaFor'](SERVICE);\n    const services = canAccessServices ? await this.getServicesOwned() : [];\n    const clusterIPServicePorts = [];\n    const loadBalancerServicePorts = [];\n    const nodePortServicePorts = [];\n\n    if (services.length) {\n      services.forEach((svc) => {\n        switch (svc.spec.type) {\n        case 'ClusterIP':\n          clusterIPServicePorts.push(...(svc?.spec?.ports || []));\n          break;\n        case 'LoadBalancer':\n          loadBalancerServicePorts.push(...(svc?.spec?.ports || []));\n          break;\n        case 'NodePort':\n          nodePortServicePorts.push(...(svc?.spec?.ports || []));\n          break;\n        default:\n          break;\n        }\n      });\n    }\n    ports.forEach((port) => {\n      const name = port.name ? port.name : `${ port.containerPort }${ port.protocol.toLowerCase() }${ port.hostPort || port._listeningPort || '' }`;\n\n      port.name = name;\n\n      if (port._serviceType && port._serviceType !== '') {\n        return;\n      }\n\n      if (loadBalancerServicePorts.length) {\n        const portSpec = findBy(loadBalancerServicePorts, 'name', name);\n\n        if (portSpec) {\n          port._listeningPort = portSpec.port;\n\n          port._serviceType = 'LoadBalancer';\n\n          return;\n        }\n      } if (nodePortServicePorts.length) {\n        const portSpec = findBy(nodePortServicePorts, 'name', name);\n\n        if (portSpec) {\n          port._listeningPort = portSpec.nodePort;\n\n          port._serviceType = 'NodePort';\n\n          return;\n        }\n      } if (clusterIPServicePorts.length) {\n        if (findBy(clusterIPServicePorts, 'name', name)) {\n          port._serviceType = 'ClusterIP';\n        }\n      }\n    });\n\n    return ports;\n  }\n\n  get ownedByWorkload() {\n    const types = Object.values(WORKLOAD_TYPES);\n\n    if (this.metadata?.ownerReferences) {\n      for (const owner of this.metadata.ownerReferences) {\n        const have = (`${ owner.apiVersion.replace(/\\/.*/, '') }.${ owner.kind }`).toLowerCase();\n\n        if ( types.includes(have) ) {\n          return true;\n        }\n      }\n    }\n\n    return false;\n  }\n\n  get isFromNorman() {\n    return (this.metadata.labels || {})['cattle.io/creator'] === 'norman';\n  }\n\n  get warnDeletionMessage() {\n    if (this.isFromNorman) {\n      return this.t('workload.normanWarning');\n    } else {\n      return null;\n    }\n  }\n\n  get pods() {\n    const relationships = this.metadata?.relationships || [];\n    const podRelationship = relationships.filter((relationship) => relationship.toType === POD)[0];\n\n    if (podRelationship) {\n      const pods = this.$getters['podsByNamespace'](this.metadata.namespace);\n\n      return pods.filter((obj) => {\n        return matches(obj, podRelationship.selector);\n      });\n    } else {\n      return [];\n    }\n  }\n\n  get podGauges() {\n    const out = { };\n\n    if (!this.pods) {\n      return out;\n    }\n\n    this.pods.map((pod) => {\n      const { stateColor, stateDisplay } = pod;\n\n      if (out[stateDisplay]) {\n        out[stateDisplay].count++;\n      } else {\n        out[stateDisplay] = {\n          color: stateColor.replace('text-', ''),\n          count: 1\n        };\n      }\n    });\n\n    return out;\n  }\n\n  // Job Specific\n  get jobRelationships() {\n    if (this.type !== WORKLOAD_TYPES.CRON_JOB) {\n      return undefined;\n    }\n\n    return (get(this, 'metadata.relationships') || []).filter((relationship) => relationship.toType === WORKLOAD_TYPES.JOB);\n  }\n\n  get jobs() {\n    if (this.type !== WORKLOAD_TYPES.CRON_JOB) {\n      return undefined;\n    }\n\n    return this.jobRelationships.map((obj) => {\n      return this.$getters['byId'](WORKLOAD_TYPES.JOB, obj.toId );\n    }).filter((x) => !!x);\n  }\n\n  get jobGauges() {\n    const out = {\n      succeeded: { color: 'success', count: 0 }, running: { color: 'info', count: 0 }, failed: { color: 'error', count: 0 }\n    };\n\n    if (this.type === WORKLOAD_TYPES.CRON_JOB) {\n      this.jobs.forEach((job) => {\n        const { status = {} } = job;\n\n        out.running.count += status.active || 0;\n        out.succeeded.count += status.succeeded || 0;\n        out.failed.count += status.failed || 0;\n      });\n    } else if (this.type === WORKLOAD_TYPES.JOB) {\n      const { status = {} } = this;\n\n      out.running.count = status.active || 0;\n      out.succeeded.count = status.succeeded || 0;\n      out.failed.count = status.failed || 0;\n    } else {\n      return null;\n    }\n\n    return out;\n  }\n\n  get currentRevisionNumber() {\n    if (this.ownedByWorkload || this.kind === 'Job' || this.kind === 'CronJob') {\n      return undefined;\n    }\n    if (this.kind === 'Deployment') {\n      return this.metadata.annotations['deployment.kubernetes.io/revision'];\n    }\n\n    // 'DaemonSet', 'StatefulSet'\n    return this.metadata.generation;\n  }\n\n  async matchingPods() {\n    const all = await this.$dispatch('findAll', { type: POD });\n    const allInNamespace = all.filter((pod) => pod.metadata.namespace === this.metadata.namespace);\n\n    const selector = convertSelectorObj(this.spec.selector);\n\n    // See https://github.com/rancher/dashboard/issues/10417, all pods bad, need to replace local selector somehow\n    return matching(allInNamespace, selector);\n  }\n\n  cleanForSave(data) {\n    const val = super.cleanForSave(data);\n\n    // remove fields from containers\n    val.spec?.template?.spec?.containers?.forEach((container) => {\n      this.cleanContainerForSave(container);\n    });\n\n    // remove fields from initContainers\n    val.spec?.template?.spec?.initContainers?.forEach((container) => {\n      this.cleanContainerForSave(container);\n    });\n\n    return val;\n  }\n}\n"],"mappings":"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","ignoreList":[]}]}