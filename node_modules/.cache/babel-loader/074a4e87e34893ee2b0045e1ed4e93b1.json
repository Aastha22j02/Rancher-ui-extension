{"remainingRequest":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js??ref--16-1!/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/ubuntu/suseconf/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ubuntu/suseconf/node_modules/@rancher/shell/pages/c/_cluster/uiplugins/CatalogList/CatalogUninstallDialog.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/ubuntu/suseconf/node_modules/@rancher/shell/pages/c/_cluster/uiplugins/CatalogList/CatalogUninstallDialog.vue","mtime":1725338146566},{"path":"/home/ubuntu/suseconf/babel.config.js","mtime":1725343995893},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js","mtime":1725271298942},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1725271300920}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3JzLmpzIjsKaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5rZXlzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwpmdW5jdGlvbiBvd25LZXlzKGUsIHIpIHsgdmFyIHQgPSBPYmplY3Qua2V5cyhlKTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIG8gPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGUpOyByICYmIChvID0gby5maWx0ZXIoZnVuY3Rpb24gKHIpIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSwgcikuZW51bWVyYWJsZTsgfSkpLCB0LnB1c2guYXBwbHkodCwgbyk7IH0gcmV0dXJuIHQ7IH0KZnVuY3Rpb24gX29iamVjdFNwcmVhZChlKSB7IGZvciAodmFyIHIgPSAxOyByIDwgYXJndW1lbnRzLmxlbmd0aDsgcisrKSB7IHZhciB0ID0gbnVsbCAhPSBhcmd1bWVudHNbcl0gPyBhcmd1bWVudHNbcl0gOiB7fTsgciAlIDIgPyBvd25LZXlzKE9iamVjdCh0KSwgITApLmZvckVhY2goZnVuY3Rpb24gKHIpIHsgX2RlZmluZVByb3BlcnR5KGUsIHIsIHRbcl0pOyB9KSA6IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzID8gT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnModCkpIDogb3duS2V5cyhPYmplY3QodCkpLmZvckVhY2goZnVuY3Rpb24gKHIpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIHIsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCwgcikpOyB9KTsgfSByZXR1cm4gZTsgfQppbXBvcnQgX3JlZ2VuZXJhdG9yUnVudGltZSBmcm9tICIvaG9tZS91YnVudHUvc3VzZWNvbmYvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL3JlZ2VuZXJhdG9yL2luZGV4LmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgeyBtYXBHZXR0ZXJzIH0gZnJvbSAndnVleCc7CmltcG9ydCB7IENBVEFMT0csIFVJX1BMVUdJTiwgU0VSVklDRSwgV09SS0xPQURfVFlQRVMgfSBmcm9tICdAc2hlbGwvY29uZmlnL3R5cGVzJzsKaW1wb3J0IHsgVUlfUExVR0lOX0xBQkVMUywgVUlfUExVR0lOX05BTUVTUEFDRSB9IGZyb20gJ0BzaGVsbC9jb25maWcvdWlwbHVnaW5zJzsKaW1wb3J0IHsgYWxsSGFzaCB9IGZyb20gJ0BzaGVsbC91dGlscy9wcm9taXNlJzsKaW1wb3J0IEFzeW5jQnV0dG9uIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL0FzeW5jQnV0dG9uJzsKaW1wb3J0IEFwcE1vZGFsIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL0FwcE1vZGFsLnZ1ZSc7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBBc3luY0J1dHRvbjogQXN5bmNCdXR0b24sCiAgICBBcHBNb2RhbDogQXBwTW9kYWwKICB9LAogIGZldGNoOiBmdW5jdGlvbiBmZXRjaCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICB2YXIgcGx1Z2luczsKICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIGlmIChfdGhpcy4kc3RvcmUuZ2V0dGVyc1snbWFuYWdlbWVudC9zY2hlbWFGb3InXShVSV9QTFVHSU4pKSB7CiAgICAgICAgICAgICAgcGx1Z2lucyA9IF90aGlzLiRzdG9yZS5kaXNwYXRjaCgnbWFuYWdlbWVudC9maW5kQWxsJywgewogICAgICAgICAgICAgICAgdHlwZTogVUlfUExVR0lOCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgX3RoaXMucGx1Z2lucyA9IHBsdWdpbnMgfHwgW107CiAgICAgICAgICAgIH0KICAgICAgICAgIGNhc2UgMToKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlKTsKICAgIH0pKSgpOwogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGNhdGFsb2c6IHVuZGVmaW5lZCwKICAgICAgYnVzeTogZmFsc2UsCiAgICAgIHBsdWdpbnM6IG51bGwsCiAgICAgIHNob3dNb2RhbDogZmFsc2UKICAgIH07CiAgfSwKICBjb21wdXRlZDogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBtYXBHZXR0ZXJzKHsKICAgIGFsbENoYXJ0czogJ2NhdGFsb2cvY2hhcnRzJwogIH0pKSwge30sIHsKICAgIHBsdWdpbnNGcm9tQ2F0YWxvZ0ltYWdlOiBmdW5jdGlvbiBwbHVnaW5zRnJvbUNhdGFsb2dJbWFnZSgpIHsKICAgICAgcmV0dXJuIHRoaXMucGx1Z2lucy5maWx0ZXIoZnVuY3Rpb24gKHApIHsKICAgICAgICB2YXIgX3AkbWV0YWRhdGE7CiAgICAgICAgcmV0dXJuIChfcCRtZXRhZGF0YSA9IHAubWV0YWRhdGEpID09PSBudWxsIHx8IF9wJG1ldGFkYXRhID09PSB2b2lkIDAgfHwgKF9wJG1ldGFkYXRhID0gX3AkbWV0YWRhdGEubGFiZWxzKSA9PT0gbnVsbCB8fCBfcCRtZXRhZGF0YSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3AkbWV0YWRhdGFbVUlfUExVR0lOX0xBQkVMUy5DQVRBTE9HX0lNQUdFXTsKICAgICAgfSk7CiAgICB9CiAgfSksCiAgbWV0aG9kczogewogICAgc2hvd0RpYWxvZzogZnVuY3Rpb24gc2hvd0RpYWxvZyhjYXRhbG9nKSB7CiAgICAgIHRoaXMuY2F0YWxvZyA9IGNhdGFsb2c7CiAgICAgIHRoaXMuYnVzeSA9IGZhbHNlOwogICAgICB0aGlzLnNob3dNb2RhbCA9IHRydWU7CiAgICB9LAogICAgY2xvc2VEaWFsb2c6IGZ1bmN0aW9uIGNsb3NlRGlhbG9nKHJlc3VsdCkgewogICAgICB0aGlzLnNob3dNb2RhbCA9IGZhbHNlOwogICAgICB0aGlzLiRlbWl0KCdjbG9zZWQnLCByZXN1bHQpOwogICAgICBpZiAocmVzdWx0KSB7CiAgICAgICAgdGhpcy4kZW1pdCgncmVmcmVzaCcpOwogICAgICB9CiAgICB9LAogICAgdW5pbnN0YWxsOiBmdW5jdGlvbiB1bmluc3RhbGwoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgY2F0YWxvZywgYXBwcywgcGx1Z2luQXBwczsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF90aGlzMi5idXN5ID0gdHJ1ZTsKICAgICAgICAgICAgICBjYXRhbG9nID0gX3RoaXMyLmNhdGFsb2c7CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA0OwogICAgICAgICAgICAgIHJldHVybiBfdGhpczIuJHN0b3JlLmRpc3BhdGNoKCdtYW5hZ2VtZW50L2ZpbmRBbGwnLCB7CiAgICAgICAgICAgICAgICB0eXBlOiBDQVRBTE9HLkFQUAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgYXBwcyA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgIHBsdWdpbkFwcHMgPSBhcHBzLmZpbHRlcihmdW5jdGlvbiAoYXBwKSB7CiAgICAgICAgICAgICAgICBpZiAoYXBwLm5hbWVzcGFjZSA9PT0gVUlfUExVR0lOX05BTUVTUEFDRSkgewogICAgICAgICAgICAgICAgICAvLyBGaW5kIHRoZSByZWxhdGVkIGFwcHMgZnJvbSB0aGUgZGVwbG95ZWQgaGVsbSByZXBvc2l0b3J5CiAgICAgICAgICAgICAgICAgIHZhciBjaGFydHMgPSBfdGhpczIuYWxsQ2hhcnRzLmZpbHRlcihmdW5jdGlvbiAoY2hhcnQpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgX2NhdGFsb2ckcmVwbzsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2hhcnQucmVwb05hbWUgPT09ICgoX2NhdGFsb2ckcmVwbyA9IGNhdGFsb2cucmVwbykgPT09IG51bGwgfHwgX2NhdGFsb2ckcmVwbyA9PT0gdm9pZCAwIHx8IChfY2F0YWxvZyRyZXBvID0gX2NhdGFsb2ckcmVwby5tZXRhZGF0YSkgPT09IG51bGwgfHwgX2NhdGFsb2ckcmVwbyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2NhdGFsb2ckcmVwby5uYW1lKTsKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIHJldHVybiBjaGFydHMuc29tZShmdW5jdGlvbiAoY2hhcnQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2hhcnQuY2hhcnROYW1lID09PSBhcHAubWV0YWRhdGEubmFtZTsKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA4OwogICAgICAgICAgICAgIHJldHVybiBfdGhpczIucmVtb3ZlQ2F0YWxvZ1Jlc291cmNlcyhjYXRhbG9nKTsKICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgIGlmICghcGx1Z2luQXBwcy5sZW5ndGgpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIHBsdWdpbkFwcHMuZm9yRWFjaChmdW5jdGlvbiAoYXBwKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzMi4kZW1pdCgndXBkYXRlJywgYXBwLm5hbWUsICd1bmluc3RhbGwnKTsKICAgICAgICAgICAgICAgICAgYXBwLnJlbW92ZSgpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgX3RoaXMyLiRzdG9yZS5kaXNwYXRjaCgnZ3Jvd2wvZXJyb3InLCB7CiAgICAgICAgICAgICAgICAgIHRpdGxlOiBfdGhpczIudCgncGx1Z2lucy5lcnJvci5nZW5lcmljJyksCiAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGUubWVzc2FnZSA/IGUubWVzc2FnZSA6IGUsCiAgICAgICAgICAgICAgICAgIHRpbWVvdXQ6IDEwMDAwCiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDEyOwogICAgICAgICAgICAgIHJldHVybiBfdGhpczIuJHN0b3JlLmRpc3BhdGNoKCdtYW5hZ2VtZW50L2ZpbmRBbGwnLCB7CiAgICAgICAgICAgICAgICB0eXBlOiBDQVRBTE9HLk9QRVJBVElPTgogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgIF90aGlzMi5jbG9zZURpYWxvZyhjYXRhbG9nKTsKICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIHJlbW92ZUNhdGFsb2dSZXNvdXJjZXM6IGZ1bmN0aW9uIHJlbW92ZUNhdGFsb2dSZXNvdXJjZXMoY2F0YWxvZykgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgICAgdmFyIHNlbGVjdG9yLCBuYW1lc3BhY2UsIGhhc2gsIF9pLCBfT2JqZWN0JGtleXMsIHJlc291cmNlOwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgc2VsZWN0b3IgPSAiIi5jb25jYXQoVUlfUExVR0lOX0xBQkVMUy5DQVRBTE9HX0lNQUdFLCAiPSIpLmNvbmNhdChjYXRhbG9nLm5hbWUpOwogICAgICAgICAgICAgIG5hbWVzcGFjZSA9IFVJX1BMVUdJTl9OQU1FU1BBQ0U7CiAgICAgICAgICAgICAgaWYgKCFzZWxlY3RvcikgewogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA3OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNTsKICAgICAgICAgICAgICByZXR1cm4gYWxsSGFzaCh7CiAgICAgICAgICAgICAgICBkZXBsb3ltZW50OiBfdGhpczMuJHN0b3JlLmRpc3BhdGNoKCdtYW5hZ2VtZW50L2ZpbmRNYXRjaGluZycsIHsKICAgICAgICAgICAgICAgICAgdHlwZTogV09SS0xPQURfVFlQRVMuREVQTE9ZTUVOVCwKICAgICAgICAgICAgICAgICAgc2VsZWN0b3I6IHNlbGVjdG9yLAogICAgICAgICAgICAgICAgICBuYW1lc3BhY2U6IG5hbWVzcGFjZQogICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICBzZXJ2aWNlOiBfdGhpczMuJHN0b3JlLmRpc3BhdGNoKCdtYW5hZ2VtZW50L2ZpbmRNYXRjaGluZycsIHsKICAgICAgICAgICAgICAgICAgdHlwZTogU0VSVklDRSwKICAgICAgICAgICAgICAgICAgc2VsZWN0b3I6IHNlbGVjdG9yLAogICAgICAgICAgICAgICAgICBuYW1lc3BhY2U6IG5hbWVzcGFjZQogICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICByZXBvOiBfdGhpczMuJHN0b3JlLmRpc3BhdGNoKCdtYW5hZ2VtZW50L2ZpbmRNYXRjaGluZycsIHsKICAgICAgICAgICAgICAgICAgdHlwZTogQ0FUQUxPRy5DTFVTVEVSX1JFUE8sCiAgICAgICAgICAgICAgICAgIHNlbGVjdG9yOiBzZWxlY3RvcgogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIGhhc2ggPSBfY29udGV4dDMuc2VudDsKICAgICAgICAgICAgICBmb3IgKF9pID0gMCwgX09iamVjdCRrZXlzID0gT2JqZWN0LmtleXMoaGFzaCk7IF9pIDwgX09iamVjdCRrZXlzLmxlbmd0aDsgX2krKykgewogICAgICAgICAgICAgICAgcmVzb3VyY2UgPSBfT2JqZWN0JGtleXNbX2ldOwogICAgICAgICAgICAgICAgaWYgKGhhc2hbcmVzb3VyY2VdKSB7CiAgICAgICAgICAgICAgICAgIGhhc2hbcmVzb3VyY2VdLmZvckVhY2goZnVuY3Rpb24gKHIpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gci5yZW1vdmUoKTsKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTMpOwogICAgICB9KSkoKTsKICAgIH0KICB9Cn07"},{"version":3,"names":["mapGetters","CATALOG","UI_PLUGIN","SERVICE","WORKLOAD_TYPES","UI_PLUGIN_LABELS","UI_PLUGIN_NAMESPACE","allHash","AsyncButton","AppModal","components","fetch","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","plugins","wrap","_callee$","_context","prev","next","$store","getters","dispatch","type","stop","data","catalog","undefined","busy","showModal","computed","_objectSpread","allCharts","pluginsFromCatalogImage","filter","p","_p$metadata","metadata","labels","CATALOG_IMAGE","methods","showDialog","closeDialog","result","$emit","uninstall","_this2","_callee2","apps","pluginApps","_callee2$","_context2","APP","sent","app","namespace","charts","chart","_catalog$repo","repoName","repo","name","some","chartName","removeCatalogResources","length","forEach","remove","e","title","t","message","timeout","root","OPERATION","_this3","_callee3","selector","hash","_i","_Object$keys","resource","_callee3$","_context3","concat","deployment","DEPLOYMENT","service","CLUSTER_REPO","Object","keys","r"],"sources":["node_modules/@rancher/shell/pages/c/_cluster/uiplugins/CatalogList/CatalogUninstallDialog.vue"],"sourcesContent":["<script>\nimport { mapGetters } from 'vuex';\n\nimport { CATALOG, UI_PLUGIN, SERVICE, WORKLOAD_TYPES } from '@shell/config/types';\nimport { UI_PLUGIN_LABELS, UI_PLUGIN_NAMESPACE } from '@shell/config/uiplugins';\nimport { allHash } from '@shell/utils/promise';\n\nimport AsyncButton from '@shell/components/AsyncButton';\nimport AppModal from '@shell/components/AppModal.vue';\n\nexport default {\n  components: { AsyncButton, AppModal },\n\n  async fetch() {\n    if ( this.$store.getters['management/schemaFor'](UI_PLUGIN) ) {\n      const plugins = this.$store.dispatch('management/findAll', { type: UI_PLUGIN });\n\n      this.plugins = plugins || [];\n    }\n  },\n\n  data() {\n    return {\n      catalog: undefined, busy: false, plugins: null, showModal: false,\n    };\n  },\n\n  computed: {\n    ...mapGetters({ allCharts: 'catalog/charts' }),\n\n    pluginsFromCatalogImage() {\n      return this.plugins.filter((p) => p.metadata?.labels?.[UI_PLUGIN_LABELS.CATALOG_IMAGE]);\n    }\n  },\n\n  methods: {\n    showDialog(catalog) {\n      this.catalog = catalog;\n      this.busy = false;\n      this.showModal = true;\n    },\n\n    closeDialog(result) {\n      this.showModal = false;\n      this.$emit('closed', result);\n\n      if ( result ) {\n        this.$emit('refresh');\n      }\n    },\n\n    async uninstall() {\n      this.busy = true;\n\n      const catalog = this.catalog;\n      const apps = await this.$store.dispatch('management/findAll', { type: CATALOG.APP });\n      const pluginApps = apps.filter((app) => {\n        if ( app.namespace === UI_PLUGIN_NAMESPACE ) {\n          // Find the related apps from the deployed helm repository\n          const charts = this.allCharts.filter((chart) => chart.repoName === catalog.repo?.metadata?.name);\n\n          return charts.some((chart) => chart.chartName === app.metadata.name);\n        }\n\n        return false;\n      });\n\n      await this.removeCatalogResources(catalog);\n\n      if ( pluginApps.length ) {\n        try {\n          pluginApps.forEach((app) => {\n            this.$emit('update', app.name, 'uninstall');\n            app.remove();\n          });\n        } catch (e) {\n          this.$store.dispatch('growl/error', {\n            title:   this.t('plugins.error.generic'),\n            message: e.message ? e.message : e,\n            timeout: 10000\n          }, { root: true });\n        }\n\n        await this.$store.dispatch('management/findAll', { type: CATALOG.OPERATION });\n      }\n\n      this.closeDialog(catalog);\n    },\n\n    async removeCatalogResources(catalog) {\n      const selector = `${ UI_PLUGIN_LABELS.CATALOG_IMAGE }=${ catalog.name }`;\n      const namespace = UI_PLUGIN_NAMESPACE;\n\n      if ( selector ) {\n        const hash = await allHash({\n          deployment: this.$store.dispatch('management/findMatching', {\n            type: WORKLOAD_TYPES.DEPLOYMENT, selector, namespace\n          }),\n          service: this.$store.dispatch('management/findMatching', {\n            type: SERVICE, selector, namespace\n          }),\n          repo: this.$store.dispatch('management/findMatching', { type: CATALOG.CLUSTER_REPO, selector })\n        });\n\n        for ( const resource of Object.keys(hash) ) {\n          if ( hash[resource] ) {\n            hash[resource].forEach((r) => r.remove());\n          }\n        }\n      }\n    }\n  }\n};\n</script>\n\n<template>\n  <app-modal\n    v-if=\"showModal\"\n    name=\"uninstallCatalogDialog\"\n    height=\"auto\"\n    :scrollable=\"true\"\n    @close=\"closeDialog(false)\"\n  >\n    <div\n      v-if=\"catalog\"\n      class=\"plugin-install-dialog\"\n    >\n      <h4 class=\"mt-10\">\n        {{ t('plugins.uninstall.title', { name: catalog.name }) }}\n      </h4>\n      <div class=\"mt-10 dialog-panel\">\n        <div class=\"dialog-info\">\n          <p>\n            {{ t('plugins.uninstall.catalog') }}\n          </p>\n        </div>\n        <div class=\"dialog-buttons\">\n          <button\n            :disabled=\"busy\"\n            class=\"btn role-secondary\"\n            data-testid=\"uninstall-ext-modal-cancel-btn\"\n            @click=\"closeDialog(false)\"\n          >\n            {{ t('generic.cancel') }}\n          </button>\n          <AsyncButton\n            mode=\"uninstall\"\n            data-testid=\"uninstall-ext-modal-uninstall-btn\"\n            @click=\"uninstall()\"\n          />\n        </div>\n      </div>\n    </div>\n  </app-modal>\n</template>\n\n<style lang=\"scss\" scoped>\n  .plugin-install-dialog {\n    padding: 10px;\n\n    h4 {\n      font-weight: bold;\n    }\n\n    .dialog-panel {\n      display: flex;\n      flex-direction: column;\n      min-height: 100px;\n\n      .dialog-info {\n        flex: 1;\n      }\n    }\n\n    .dialog-buttons {\n      display: flex;\n      justify-content: flex-end;\n      margin-top: 10px;\n\n      > *:not(:last-child) {\n        margin-right: 10px;\n      }\n    }\n  }\n</style>\n"],"mappings":"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","ignoreList":[]}]}