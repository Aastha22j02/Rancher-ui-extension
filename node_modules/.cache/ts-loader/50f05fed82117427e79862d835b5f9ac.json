{"remainingRequest":"/home/ubuntu/suseconf/node_modules/ts-loader/index.js??ref--17-1!/home/ubuntu/suseconf/node_modules/@rancher/shell/edit/__tests__/nodeDriver.test.ts","dependencies":[{"path":"/home/ubuntu/suseconf/node_modules/@rancher/shell/edit/__tests__/nodeDriver.test.ts","mtime":1725338146566},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js","mtime":1725271298942},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/ts-loader/index.js","mtime":1725271299135}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:LyogZXNsaW50LWRpc2FibGUgamVzdC9uby1ob29rcyAqLwppbXBvcnQgeyBtb3VudCB9IGZyb20gJ0B2dWUvdGVzdC11dGlscyc7CmltcG9ydCBOb2RlRHJpdmVyRWRpdCBmcm9tICdAc2hlbGwvZWRpdC9ub2RlRHJpdmVyLnZ1ZSc7CmltcG9ydCB7IF9DUkVBVEUgfSBmcm9tICdAc2hlbGwvY29uZmlnL3F1ZXJ5LXBhcmFtcyc7CmRlc2NyaWJlKCd2aWV3OiBub2RlZHJpdmVyIHNob3VsZCcsICgpID0+IHsKICAgIGNvbnN0IHVybCA9ICdodHRwOi8vdGVzdC5jb20nOwogICAgbGV0IHdyYXBwZXI7CiAgICBjb25zdCByZXF1aXJlZFNldHVwID0gKCkgPT4gKHsKICAgICAgICBtb2NrczogewogICAgICAgICAgICAkc3RvcmU6IHsKICAgICAgICAgICAgICAgIGdldHRlcnM6IHsKICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RvcmU6ICgpID0+ICdjdXJyZW50X3N0b3JlJywKICAgICAgICAgICAgICAgICAgICAnY3VycmVudF9zdG9yZS9zY2hlbWFGb3InOiBqZXN0LmZuKCksCiAgICAgICAgICAgICAgICAgICAgJ2N1cnJlbnRfc3RvcmUvYWxsJzogamVzdC5mbigpLAogICAgICAgICAgICAgICAgICAgICdpMThuL3QnOiAodmFsKSA9PiB2YWwsCiAgICAgICAgICAgICAgICAgICAgJ2kxOG4vZXhpc3RzJzogamVzdC5mbigpLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGRpc3BhdGNoOiBqZXN0LmZuKCkKICAgICAgICAgICAgfSwKICAgICAgICAgICAgJHJvdXRlOiB7IHF1ZXJ5OiB7IEFTOiAnJyB9IH0sCiAgICAgICAgICAgICRyb3V0ZXI6IHsgYXBwbHlRdWVyeTogamVzdC5mbigpIH0sCiAgICAgICAgfSwKICAgICAgICBwcm9wc0RhdGE6IHsKICAgICAgICAgICAgdmFsdWU6IHsKICAgICAgICAgICAgICAgIHNwZWM6IHsKICAgICAgICAgICAgICAgICAgICBhY3RpdmU6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgY2hlY2tzdW06ICcnLAogICAgICAgICAgICAgICAgICAgIHVybDogJycsCiAgICAgICAgICAgICAgICAgICAgdWlVcmw6ICcnLAogICAgICAgICAgICAgICAgICAgIHdoaXRlbGlzdERvbWFpbnM6IFtdCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIG1vZGU6IF9DUkVBVEUsCiAgICAgICAgfSwKICAgIH0pOwogICAgYmVmb3JlRWFjaCgoKSA9PiB7CiAgICAgICAgd3JhcHBlciA9IG1vdW50KE5vZGVEcml2ZXJFZGl0LCB7IC4uLnJlcXVpcmVkU2V0dXAoKSB9KTsKICAgIH0pOwogICAgYWZ0ZXJFYWNoKCgpID0+IHsKICAgICAgICB3cmFwcGVyLmRlc3Ryb3koKTsKICAgIH0pOwogICAgaXQoJ2hhdmUgIkNyZWF0ZSIgYnV0dG9uIGRpc2FibGVkIGJlZm9yZSBmaWVsZHMgYXJlIGZpbGxlZCBpbicsICgpID0+IHsKICAgICAgICBjb25zdCBzYXZlQnV0dG9uID0gd3JhcHBlci5maW5kKCdbZGF0YS10ZXN0aWQ9Im5vZGUtZHJpdmVyLWVkaXQtc2F2ZSJdJykuZWxlbWVudDsKICAgICAgICBleHBlY3Qoc2F2ZUJ1dHRvbi5kaXNhYmxlZCkudG9CZSh0cnVlKTsKICAgIH0pOwogICAgaXQoJ2hhdmUgIkNyZWF0ZSIgYnV0dG9uIGVuYWJsZWQgd2hlbiByZXF1aXJlZCBmaWVsZHMgYXJlIGZpbGxlZCBpbicsIGFzeW5jICgpID0+IHsKICAgICAgICBjb25zdCB1cmxGaWVsZCA9IHdyYXBwZXIuZmluZCgnW2RhdGEtdGVzdGlkPSJkcml2ZXItY3JlYXRlLXVybC1maWVsZCJdJykuZmluZCgnaW5wdXQnKTsKICAgICAgICBjb25zdCBzYXZlQnV0dG9uID0gd3JhcHBlci5maW5kKCdbZGF0YS10ZXN0aWQ9Im5vZGUtZHJpdmVyLWVkaXQtc2F2ZSJdJykuZWxlbWVudDsKICAgICAgICB1cmxGaWVsZC5zZXRWYWx1ZSh1cmwpOwogICAgICAgIGF3YWl0IHdyYXBwZXIudm0uJG5leHRUaWNrKCk7CiAgICAgICAgZXhwZWN0KHNhdmVCdXR0b24uZGlzYWJsZWQpLnRvQmUoZmFsc2UpOwogICAgfSk7CiAgICBpdCgnaGF2ZSAiQ3JlYXRlIiBidXR0b24gZW5hYmxlZCBhbmQgZGlzYWJsZWQgZGVwZW5kaW5nIG9uIHZhbGlkYXRpb24gcmVzdWx0cycsIGFzeW5jICgpID0+IHsKICAgICAgICBjb25zdCB1cmxGaWVsZCA9IHdyYXBwZXIuZmluZCgnW2RhdGEtdGVzdGlkPSJkcml2ZXItY3JlYXRlLXVybC1maWVsZCJdJykuZmluZCgnaW5wdXQnKTsKICAgICAgICBjb25zdCB1aXVybEZpZWxkID0gd3JhcHBlci5maW5kKCdbZGF0YS10ZXN0aWQ9ImRyaXZlci1jcmVhdGUtdWl1cmwtZmllbGQiXScpLmZpbmQoJ2lucHV0Jyk7CiAgICAgICAgY29uc3QgY2hlY2tzdW1GaWVsZCA9IHdyYXBwZXIuZmluZCgnW2RhdGEtdGVzdGlkPSJkcml2ZXItY3JlYXRlLWNoZWNrc3VtLWZpZWxkIl0nKS5maW5kKCdpbnB1dCcpOwogICAgICAgIGNvbnN0IHNhdmVCdXR0b24gPSB3cmFwcGVyLmZpbmQoJ1tkYXRhLXRlc3RpZD0ibm9kZS1kcml2ZXItZWRpdC1zYXZlIl0nKS5lbGVtZW50OwogICAgICAgIGNvbnN0IHRlc3RDYXNlcyA9IFsKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdXJsOiAnMTExMScsCiAgICAgICAgICAgICAgICB1aXVybDogJ2h0dHA6Ly90ZXN0LmNvbScsCiAgICAgICAgICAgICAgICBjaGVja3N1bTogJ2FhYWFhQkJCQmRkZGQnLAogICAgICAgICAgICAgICAgcmVzdWx0OiB0cnVlCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHVybDogJ2h0dHA6Ly90ZXN0LmNvbScsCiAgICAgICAgICAgICAgICB1aXVybDogJzExMTEnLAogICAgICAgICAgICAgICAgY2hlY2tzdW06ICdhYWFhYUJCQkJkZGRkJywKICAgICAgICAgICAgICAgIHJlc3VsdDogdHJ1ZQogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB1cmw6ICdodHRwOi8vdGVzdC5jb20nLAogICAgICAgICAgICAgICAgdWl1cmw6ICdodHRwOi8vdGVzdC5jb20nLAogICAgICAgICAgICAgICAgY2hlY2tzdW06ICchISEnLAogICAgICAgICAgICAgICAgcmVzdWx0OiB0cnVlCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHVybDogJ2h0dHA6Ly90ZXN0LmNvbScsCiAgICAgICAgICAgICAgICB1aXVybDogJ2h0dHA6Ly90ZXN0LmNvbScsCiAgICAgICAgICAgICAgICBjaGVja3N1bTogJ2FhYWFhQkJCQmRkZGQnLAogICAgICAgICAgICAgICAgcmVzdWx0OiBmYWxzZQogICAgICAgICAgICB9CiAgICAgICAgXTsKICAgICAgICBmb3IgKGNvbnN0IHRlc3RDYXNlIG9mIHRlc3RDYXNlcykgewogICAgICAgICAgICB1cmxGaWVsZC5zZXRWYWx1ZSh0ZXN0Q2FzZS51cmwpOwogICAgICAgICAgICBhd2FpdCB3cmFwcGVyLnZtLiRuZXh0VGljaygpOwogICAgICAgICAgICB1aXVybEZpZWxkLnNldFZhbHVlKHRlc3RDYXNlLnVpdXJsKTsKICAgICAgICAgICAgYXdhaXQgd3JhcHBlci52bS4kbmV4dFRpY2soKTsKICAgICAgICAgICAgY2hlY2tzdW1GaWVsZC5zZXRWYWx1ZSh0ZXN0Q2FzZS5jaGVja3N1bSk7CiAgICAgICAgICAgIGF3YWl0IHdyYXBwZXIudm0uJG5leHRUaWNrKCk7CiAgICAgICAgICAgIGV4cGVjdChzYXZlQnV0dG9uLmRpc2FibGVkKS50b0JlKHRlc3RDYXNlLnJlc3VsdCk7CiAgICAgICAgfQogICAgfSk7Cn0pOwo="},{"version":3,"file":"/home/ubuntu/suseconf/node_modules/@rancher/shell/edit/__tests__/nodeDriver.test.ts","sourceRoot":"","sources":["/home/ubuntu/suseconf/node_modules/@rancher/shell/edit/__tests__/nodeDriver.test.ts"],"names":[],"mappings":"AAAA,kCAAkC;AAClC,OAAO,EAAE,KAAK,EAAE,MAAM,iBAAiB,CAAC;AACxC,OAAO,cAAc,MAAM,4BAA4B,CAAC;AACxD,OAAO,EAAE,OAAO,EAAE,MAAM,4BAA4B,CAAC;AAErD,QAAQ,CAAC,yBAAyB,EAAE,GAAG,EAAE;IACvC,MAAM,GAAG,GAAG,iBAAiB,CAAC;IAC9B,IAAI,OAAY,CAAC;IACjB,MAAM,aAAa,GAAG,GAAG,EAAE,CAAC,CAAC;QAC3B,KAAK,EAAE;YACL,MAAM,EAAE;gBACN,OAAO,EAAE;oBACP,YAAY,EAAe,GAAG,EAAE,CAAC,eAAe;oBAChD,yBAAyB,EAAE,IAAI,CAAC,EAAE,EAAE;oBACpC,mBAAmB,EAAQ,IAAI,CAAC,EAAE,EAAE;oBACpC,QAAQ,EAAmB,CAAC,GAAW,EAAE,EAAE,CAAC,GAAG;oBAC/C,aAAa,EAAc,IAAI,CAAC,EAAE,EAAE;iBACrC;gBACD,QAAQ,EAAE,IAAI,CAAC,EAAE,EAAE;aACpB;YACD,MAAM,EAAG,EAAE,KAAK,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE;YAC9B,OAAO,EAAE,EAAE,UAAU,EAAE,IAAI,CAAC,EAAE,EAAE,EAAE;SACnC;QACD,SAAS,EAAE;YACT,KAAK,EAAE;gBACL,IAAI,EAAE;oBACJ,MAAM,EAAY,IAAI;oBACtB,QAAQ,EAAU,EAAE;oBACpB,GAAG,EAAe,EAAE;oBACpB,KAAK,EAAa,EAAE;oBACpB,gBAAgB,EAAE,EAAE;iBACrB;aACF;YACD,IAAI,EAAE,OAAO;SACd;KACF,CAAC,CAAC;IAEH,UAAU,CAAC,GAAG,EAAE;QACd,OAAO,GAAG,KAAK,CAAC,cAAc,EAAE,EAAE,GAAG,aAAa,EAAE,EAAE,CAAC,CAAC;IAC1D,CAAC,CAAC,CAAC;IAEH,SAAS,CAAC,GAAG,EAAE;QACb,OAAO,CAAC,OAAO,EAAE,CAAC;IACpB,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,2DAA2D,EAAE,GAAG,EAAE;QACnE,MAAM,UAAU,GAAG,OAAO,CAAC,IAAI,CAAC,uCAAuC,CAAC,CAAC,OAA2B,CAAC;QAErG,MAAM,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IACzC,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,iEAAiE,EAAE,KAAK,IAAG,EAAE;QAC9E,MAAM,QAAQ,GAAG,OAAO,CAAC,IAAI,CAAC,yCAAyC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QACvF,MAAM,UAAU,GAAG,OAAO,CAAC,IAAI,CAAC,uCAAuC,CAAC,CAAC,OAA2B,CAAC;QAErG,QAAQ,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;QAEvB,MAAM,OAAO,CAAC,EAAE,CAAC,SAAS,EAAE,CAAC;QAE7B,MAAM,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IAC1C,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,2EAA2E,EAAE,KAAK,IAAG,EAAE;QACxF,MAAM,QAAQ,GAAG,OAAO,CAAC,IAAI,CAAC,yCAAyC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QACvF,MAAM,UAAU,GAAG,OAAO,CAAC,IAAI,CAAC,2CAA2C,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QAC3F,MAAM,aAAa,GAAG,OAAO,CAAC,IAAI,CAAC,8CAA8C,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QACjG,MAAM,UAAU,GAAG,OAAO,CAAC,IAAI,CAAC,uCAAuC,CAAC,CAAC,OAA2B,CAAC;QAErG,MAAM,SAAS,GAAG;YAChB;gBACE,GAAG,EAAO,MAAM;gBAChB,KAAK,EAAK,iBAAiB;gBAC3B,QAAQ,EAAE,eAAe;gBACzB,MAAM,EAAI,IAAI;aACf;YACD;gBACE,GAAG,EAAO,iBAAiB;gBAC3B,KAAK,EAAK,MAAM;gBAChB,QAAQ,EAAE,eAAe;gBACzB,MAAM,EAAI,IAAI;aACf;YACD;gBACE,GAAG,EAAO,iBAAiB;gBAC3B,KAAK,EAAK,iBAAiB;gBAC3B,QAAQ,EAAE,KAAK;gBACf,MAAM,EAAI,IAAI;aACf;YACD;gBACE,GAAG,EAAO,iBAAiB;gBAC3B,KAAK,EAAK,iBAAiB;gBAC3B,QAAQ,EAAE,eAAe;gBACzB,MAAM,EAAI,KAAK;aAChB;SACF,CAAC;QAEF,KAAK,MAAM,QAAQ,IAAI,SAAS,EAAE;YAChC,QAAQ,CAAC,QAAQ,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;YAChC,MAAM,OAAO,CAAC,EAAE,CAAC,SAAS,EAAE,CAAC;YAC7B,UAAU,CAAC,QAAQ,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;YACpC,MAAM,OAAO,CAAC,EAAE,CAAC,SAAS,EAAE,CAAC;YAC7B,aAAa,CAAC,QAAQ,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;YAC1C,MAAM,OAAO,CAAC,EAAE,CAAC,SAAS,EAAE,CAAC;YAE7B,MAAM,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;SACnD;IACH,CAAC,CAAC,CAAC;AACL,CAAC,CAAC,CAAC","sourcesContent":["/* eslint-disable jest/no-hooks */\nimport { mount } from '@vue/test-utils';\nimport NodeDriverEdit from '@shell/edit/nodeDriver.vue';\nimport { _CREATE } from '@shell/config/query-params';\n\ndescribe('view: nodedriver should', () => {\n  const url = 'http://test.com';\n  let wrapper: any;\n  const requiredSetup = () => ({\n    mocks: {\n      $store: {\n        getters: {\n          currentStore:              () => 'current_store',\n          'current_store/schemaFor': jest.fn(),\n          'current_store/all':       jest.fn(),\n          'i18n/t':                  (val: string) => val,\n          'i18n/exists':             jest.fn(),\n        },\n        dispatch: jest.fn()\n      },\n      $route:  { query: { AS: '' } },\n      $router: { applyQuery: jest.fn() },\n    },\n    propsData: {\n      value: {\n        spec: {\n          active:           true,\n          checksum:         '',\n          url:              '',\n          uiUrl:            '',\n          whitelistDomains: []\n        }\n      },\n      mode: _CREATE,\n    },\n  });\n\n  beforeEach(() => {\n    wrapper = mount(NodeDriverEdit, { ...requiredSetup() });\n  });\n\n  afterEach(() => {\n    wrapper.destroy();\n  });\n\n  it('have \"Create\" button disabled before fields are filled in', () => {\n    const saveButton = wrapper.find('[data-testid=\"node-driver-edit-save\"]').element as HTMLInputElement;\n\n    expect(saveButton.disabled).toBe(true);\n  });\n\n  it('have \"Create\" button enabled when required fields are filled in', async() => {\n    const urlField = wrapper.find('[data-testid=\"driver-create-url-field\"]').find('input');\n    const saveButton = wrapper.find('[data-testid=\"node-driver-edit-save\"]').element as HTMLInputElement;\n\n    urlField.setValue(url);\n\n    await wrapper.vm.$nextTick();\n\n    expect(saveButton.disabled).toBe(false);\n  });\n\n  it('have \"Create\" button enabled and disabled depending on validation results', async() => {\n    const urlField = wrapper.find('[data-testid=\"driver-create-url-field\"]').find('input');\n    const uiurlField = wrapper.find('[data-testid=\"driver-create-uiurl-field\"]').find('input');\n    const checksumField = wrapper.find('[data-testid=\"driver-create-checksum-field\"]').find('input');\n    const saveButton = wrapper.find('[data-testid=\"node-driver-edit-save\"]').element as HTMLInputElement;\n\n    const testCases = [\n      {\n        url:      '1111',\n        uiurl:    'http://test.com',\n        checksum: 'aaaaaBBBBdddd',\n        result:   true\n      },\n      {\n        url:      'http://test.com',\n        uiurl:    '1111',\n        checksum: 'aaaaaBBBBdddd',\n        result:   true\n      },\n      {\n        url:      'http://test.com',\n        uiurl:    'http://test.com',\n        checksum: '!!!',\n        result:   true\n      },\n      {\n        url:      'http://test.com',\n        uiurl:    'http://test.com',\n        checksum: 'aaaaaBBBBdddd',\n        result:   false\n      }\n    ];\n\n    for (const testCase of testCases) {\n      urlField.setValue(testCase.url);\n      await wrapper.vm.$nextTick();\n      uiurlField.setValue(testCase.uiurl);\n      await wrapper.vm.$nextTick();\n      checksumField.setValue(testCase.checksum);\n      await wrapper.vm.$nextTick();\n\n      expect(saveButton.disabled).toBe(testCase.result);\n    }\n  });\n});\n"]}]}