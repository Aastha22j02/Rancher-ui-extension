{"remainingRequest":"/home/ubuntu/suseconf/node_modules/ts-loader/index.js??ref--17-1!/home/ubuntu/suseconf/node_modules/@rancher/shell/models/__tests__/management.cattle.io.nodepool.ts","dependencies":[{"path":"/home/ubuntu/suseconf/node_modules/@rancher/shell/models/__tests__/management.cattle.io.nodepool.ts","mtime":1725338146566},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js","mtime":1725271298942},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/ts-loader/index.js","mtime":1725271299135}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IE1nbXROb2RlUG9vbCBmcm9tICdAc2hlbGwvbW9kZWxzL21hbmFnZW1lbnQuY2F0dGxlLmlvLm5vZGVwb29sJzsKZGVzY3JpYmUoJ2NsYXNzIE1nbXROb2RlUG9vbCcsICgpID0+IHsKICAgIGRlc2NyaWJlKCdjYW5TY2FsZURvd25Qb29sJywgKCkgPT4gewogICAgICAgIGNvbnN0IG1nbXRDbHVzdGVySWQgPSAndGVzdCc7CiAgICAgICAgY29uc3Qgbm9kZUlkID0gJ3Rlc3QvaWQnOwogICAgICAgIGNvbnN0IHNwZWNzID0gewogICAgICAgICAgICB3b3JrZXI6IHsKICAgICAgICAgICAgICAgIHdvcmtlcjogdHJ1ZSwgZXRjZDogZmFsc2UsIGNvbnRyb2xQbGFuZTogZmFsc2UKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZXRjZDogewogICAgICAgICAgICAgICAgd29ya2VyOiBmYWxzZSwgZXRjZDogdHJ1ZSwgY29udHJvbFBsYW5lOiBmYWxzZQogICAgICAgICAgICB9LAogICAgICAgICAgICBjb250cm9sUGxhbmU6IHsKICAgICAgICAgICAgICAgIHdvcmtlcjogZmFsc2UsIGV0Y2Q6IGZhbHNlLCBjb250cm9sUGxhbmU6IHRydWUKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZXRjZEFuZENvbnRyb2xQbGFuZTogewogICAgICAgICAgICAgICAgd29ya2VyOiBmYWxzZSwgZXRjZDogdHJ1ZSwgY29udHJvbFBsYW5lOiB0cnVlCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGFsbDogewogICAgICAgICAgICAgICAgd29ya2VyOiB0cnVlLCBldGNkOiB0cnVlLCBjb250cm9sUGxhbmU6IHRydWUKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgY29uc3Qgd29ya2VyTm9kZSA9IHsKICAgICAgICAgICAgaWQ6ICcwMScsCiAgICAgICAgICAgIGlzV29ya2VyOiB0cnVlLAogICAgICAgICAgICBpc0NvbnRyb2xQbGFuZTogZmFsc2UsCiAgICAgICAgICAgIGlzRXRjZDogZmFsc2UKICAgICAgICB9OwogICAgICAgIGNvbnN0IGV0Y2ROb2RlID0gewogICAgICAgICAgICBpZDogJzAyJywKICAgICAgICAgICAgaXNXb3JrZXI6IGZhbHNlLAogICAgICAgICAgICBpc0NvbnRyb2xQbGFuZTogZmFsc2UsCiAgICAgICAgICAgIGlzRXRjZDogdHJ1ZQogICAgICAgIH07CiAgICAgICAgY29uc3QgY29udHJvbFBsYW5lTm9kZSA9IHsKICAgICAgICAgICAgaWQ6ICcwMycsCiAgICAgICAgICAgIGlzV29ya2VyOiBmYWxzZSwKICAgICAgICAgICAgaXNDb250cm9sUGxhbmU6IHRydWUsCiAgICAgICAgICAgIGlzRXRjZDogZmFsc2UKICAgICAgICB9OwogICAgICAgIGNvbnN0IGV0Y2RBbmRDb250cm9sUGxhbmVOb2RlID0gewogICAgICAgICAgICBpZDogJzAzJywKICAgICAgICAgICAgaXNXb3JrZXI6IGZhbHNlLAogICAgICAgICAgICBpc0NvbnRyb2xQbGFuZTogdHJ1ZSwKICAgICAgICAgICAgaXNFdGNkOiB0cnVlCiAgICAgICAgfTsKICAgICAgICBjb25zdCBhbGxOb2RlID0gewogICAgICAgICAgICBpZDogJzA0JywKICAgICAgICAgICAgaXNXb3JrZXI6IHRydWUsCiAgICAgICAgICAgIGlzQ29udHJvbFBsYW5lOiB0cnVlLAogICAgICAgICAgICBpc0V0Y2Q6IHRydWUKICAgICAgICB9OwogICAgICAgIGNvbnN0IGJhc2VDdHggPSB7IHJvb3RHZXR0ZXJzOiB7ICdyYW5jaGVyL2J5SWQnOiAoKSA9PiAoeyBhY3Rpb25zOiB7IHNjYWxlZG93bjogJ3NjYWxlZG93bicgfSB9KSB9IH07CiAgICAgICAgaXQuZWFjaChbCiAgICAgICAgICAgIFt7IHNwZWM6IHNwZWNzLndvcmtlciwgbm9kZXM6IFt3b3JrZXJOb2RlXSB9LCB0cnVlXSwKICAgICAgICAgICAgW3sgc3BlYzogc3BlY3MuZXRjZCwgbm9kZXM6IFtldGNkTm9kZSwgZXRjZE5vZGUsIGNvbnRyb2xQbGFuZU5vZGVdIH0sIHRydWVdLAogICAgICAgICAgICBbeyBzcGVjOiBzcGVjcy5ldGNkQW5kQ29udHJvbFBsYW5lLCBub2RlczogW2V0Y2RBbmRDb250cm9sUGxhbmVOb2RlLCBldGNkQW5kQ29udHJvbFBsYW5lTm9kZV0gfSwgdHJ1ZV0sCiAgICAgICAgICAgIFt7IHNwZWM6IHNwZWNzLmV0Y2RBbmRDb250cm9sUGxhbmUsIG5vZGVzOiBbZXRjZEFuZENvbnRyb2xQbGFuZU5vZGVdIH0sIGZhbHNlXSwKICAgICAgICAgICAgW3sgc3BlYzogc3BlY3MuYWxsLCBub2RlczogW2FsbE5vZGVdIH0sIGZhbHNlXSwKICAgICAgICAgICAgW3sgc3BlYzogc3BlY3MuYWxsLCBub2RlczogW2FsbE5vZGUsIGFsbE5vZGVdIH0sIHRydWVdLAogICAgICAgIF0pKCdzaG91bGQgcmV0dXJuIGNhblNjYWxlRG93blBvb2wgcHJvcGVybHknLCAoZGF0YSwgZXhwZWN0ZWQpID0+IHsKICAgICAgICAgICAgY29uc3QgeyBzcGVjLCBub2RlcyB9ID0gZGF0YTsKICAgICAgICAgICAgY29uc3QgbWdtdE5vZGUgPSBuZXcgTWdtdE5vZGVQb29sKHsKICAgICAgICAgICAgICAgIHNwZWMsCiAgICAgICAgICAgICAgICBpZDogbm9kZUlkCiAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgIC4uLmJhc2VDdHgsCiAgICAgICAgICAgICAgICBnZXR0ZXJzOiB7CiAgICAgICAgICAgICAgICAgICAgYWxsOiAoKSA9PiBbewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWdtdENsdXN0ZXJJZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVzCiAgICAgICAgICAgICAgICAgICAgICAgIH1dCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBleHBlY3QobWdtdE5vZGUuY2FuU2NhbGVEb3duUG9vbCgpKS50b1N0cmljdEVxdWFsKGV4cGVjdGVkKTsKICAgICAgICB9KTsKICAgIH0pOwp9KTsK"},{"version":3,"file":"/home/ubuntu/suseconf/node_modules/@rancher/shell/models/__tests__/management.cattle.io.nodepool.ts","sourceRoot":"","sources":["/home/ubuntu/suseconf/node_modules/@rancher/shell/models/__tests__/management.cattle.io.nodepool.ts"],"names":[],"mappings":"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","sourcesContent":["import MgmtNodePool from '@shell/models/management.cattle.io.nodepool';\n\ndescribe('class MgmtNodePool', () => {\n  describe('canScaleDownPool', () => {\n    const mgmtClusterId = 'test';\n    const nodeId = 'test/id';\n    const specs = {\n      worker: {\n        worker: true, etcd: false, controlPlane: false\n      },\n      etcd: {\n        worker: false, etcd: true, controlPlane: false\n      },\n      controlPlane: {\n        worker: false, etcd: false, controlPlane: true\n      },\n      etcdAndControlPlane: {\n        worker: false, etcd: true, controlPlane: true\n      },\n      all: {\n        worker: true, etcd: true, controlPlane: true\n      }\n    };\n\n    const workerNode = {\n      id:             '01',\n      isWorker:       true,\n      isControlPlane: false,\n      isEtcd:         false\n    };\n    const etcdNode = {\n      id:             '02',\n      isWorker:       false,\n      isControlPlane: false,\n      isEtcd:         true\n    };\n    const controlPlaneNode = {\n      id:             '03',\n      isWorker:       false,\n      isControlPlane: true,\n      isEtcd:         false\n    };\n    const etcdAndControlPlaneNode = {\n      id:             '03',\n      isWorker:       false,\n      isControlPlane: true,\n      isEtcd:         true\n    };\n    const allNode = {\n      id:             '04',\n      isWorker:       true,\n      isControlPlane: true,\n      isEtcd:         true\n    };\n\n    const baseCtx = { rootGetters: { 'rancher/byId': () => ({ actions: { scaledown: 'scaledown' } }) } };\n\n    it.each([\n      [{ spec: specs.worker, nodes: [workerNode] }, true],\n      [{ spec: specs.etcd, nodes: [etcdNode, etcdNode, controlPlaneNode] }, true],\n      [{ spec: specs.etcdAndControlPlane, nodes: [etcdAndControlPlaneNode, etcdAndControlPlaneNode] }, true],\n      [{ spec: specs.etcdAndControlPlane, nodes: [etcdAndControlPlaneNode] }, false],\n      [{ spec: specs.all, nodes: [allNode] }, false],\n      [{ spec: specs.all, nodes: [allNode, allNode] }, true],\n    ])('should return canScaleDownPool properly', (data, expected) => {\n      const { spec, nodes } = data;\n      const mgmtNode = new MgmtNodePool({\n        spec,\n        id: nodeId\n      }, {\n        ...baseCtx,\n        getters: {\n          all: () => [{\n            mgmtClusterId,\n            nodes\n          }]\n        }\n      });\n\n      expect(mgmtNode.canScaleDownPool()).toStrictEqual(expected);\n    });\n  });\n});\n"]}]}