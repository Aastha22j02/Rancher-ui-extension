{"remainingRequest":"/home/ubuntu/suseconf/node_modules/ts-loader/index.js??ref--17-1!/home/ubuntu/suseconf/node_modules/@rancher/shell/edit/provisioning.cattle.io.cluster/__tests__/Basics.test.ts","dependencies":[{"path":"/home/ubuntu/suseconf/node_modules/@rancher/shell/edit/provisioning.cattle.io.cluster/__tests__/Basics.test.ts","mtime":1725338146566},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js","mtime":1725271298942},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/ts-loader/index.js","mtime":1725271299135}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgbW91bnQgfSBmcm9tICdAdnVlL3Rlc3QtdXRpbHMnOwppbXBvcnQgQmFzaWNzIGZyb20gJ0BzaGVsbC9lZGl0L3Byb3Zpc2lvbmluZy5jYXR0bGUuaW8uY2x1c3Rlci90YWJzL0Jhc2ljcy52dWUnOwpjb25zdCBkZWZhdWx0U3R1YnMgPSB7CiAgICBCYW5uZXI6IHRydWUsCiAgICBMYWJlbGVkU2VsZWN0OiB0cnVlLAogICAgWWFtbEVkaXRvcjogdHJ1ZSwKICAgIENoZWNrYm94OiB0cnVlCn07CmNvbnN0IGRlZmF1bHRDaWxpdW1TdHVicyA9IHsKICAgIEJhbm5lcjogdHJ1ZSwKICAgIExhYmVsZWRTZWxlY3Q6IHRydWUsCiAgICBZYW1sRWRpdG9yOiB0cnVlLAp9Owpjb25zdCBkZWZhdWx0Q29tcHV0ZWQgPSB7CiAgICBzaG93azhzMjFMZWdhY3lXYXJuaW5nKCkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0sCiAgICBwcm9maWxlT3B0aW9ucygpIHsKICAgICAgICByZXR1cm4gW3sgbGFiZWw6ICdhbnl0aGluZycsIHZhbHVlOiAnYW55dGhpbmcnIH1dOwogICAgfQp9Owpjb25zdCBtb2NrQWdlbnRBcmdzID0geyAnY2xvdWQtcHJvdmlkZXItbmFtZSc6IHsgb3B0aW9uczogW10sIHByb2ZpbGU6IHsgb3B0aW9uczogW3sgYW55dGhpbmc6ICd5ZXMnIH1dIH0gfSB9Owpjb25zdCBtb2NrU2VydmVyQXJncyA9IHsgZGlzYWJsZToge30sIGNuaTogeyBvcHRpb25zOiBbXSB9IH07CmNvbnN0IHJrZTJWZXJzaW9ucyA9IFsKICAgIHsKICAgICAgICBpZDogJ3YxLjI1LjArcmtlMnIxJywgdmFsdWU6ICd2MS4yNS4wK3JrZTJyMScsIHNlcnZlckFyZ3M6IG1vY2tTZXJ2ZXJBcmdzLCBhZ2VudEFyZ3M6IG1vY2tBZ2VudEFyZ3MsIGNoYXJ0czoge30KICAgIH0sCiAgICB7CiAgICAgICAgaWQ6ICd2MS4yNC4wK3JrZTJyMScsIHZhbHVlOiAndjEuMjQuMCtya2UycjEnLCBzZXJ2ZXJBcmdzOiBtb2NrU2VydmVyQXJncywgYWdlbnRBcmdzOiBtb2NrQWdlbnRBcmdzLCBjaGFydHM6IHt9CiAgICB9LAogICAgewogICAgICAgIGlkOiAndjEuMjMuMCtya2UycjEnLCB2YWx1ZTogJ3YxLjIzLjArcmtlMnIxJywgc2VydmVyQXJnczogbW9ja1NlcnZlckFyZ3MsIGFnZW50QXJnczogbW9ja0FnZW50QXJncywgY2hhcnRzOiB7fQogICAgfQpdOwpjb25zdCBrM3NWZXJzaW9ucyA9IFsKICAgIHsKICAgICAgICBpZDogJ3YxLjI1LjArazNzMScsIHZhbHVlOiAndjEuMjUuMCtrM3MxJywgc2VydmVyQXJnczogbW9ja1NlcnZlckFyZ3MsIGFnZW50QXJnczogbW9ja0FnZW50QXJncywgY2hhcnRzOiB7fQogICAgfSwKICAgIHsKICAgICAgICBpZDogJ3YxLjI0LjArazNzMScsIHZhbHVlOiAndjEuMjQuMCtrM3MxJywgc2VydmVyQXJnczogbW9ja1NlcnZlckFyZ3MsIGFnZW50QXJnczogbW9ja0FnZW50QXJncywgY2hhcnRzOiB7fQogICAgfSwKICAgIHsKICAgICAgICBpZDogJ3YxLjIzLjArazNzMScsIHZhbHVlOiAndjEuMjMuMCtrM3MxJywgc2VydmVyQXJnczogbW9ja1NlcnZlckFyZ3MsIGFnZW50QXJnczogbW9ja0FnZW50QXJncywgY2hhcnRzOiB7fQogICAgfQpdOwpjb25zdCBtb2NrVmVyc2lvbk9wdGlvbnMgPSBbLi4ucmtlMlZlcnNpb25zLCAuLi5rM3NWZXJzaW9uc107CmNvbnN0IGRlZmF1bHRHZXR0ZXJzID0gewogICAgY3VycmVudFN0b3JlOiAoKSA9PiAnY3VycmVudF9zdG9yZScsCiAgICAnbWFuYWdlbWVudC9zY2hlbWFGb3InOiBqZXN0LmZuKCksCiAgICAnY3VycmVudF9zdG9yZS9hbGwnOiBqZXN0LmZuKCksCiAgICAnaTE4bi90JzogamVzdC5mbigpLAogICAgJ2kxOG4vd2l0aEZhbGxiYWNrJzogamVzdC5mbigpLAogICAgJ3BsdWdpbnMvY2xvdWRQcm92aWRlckZvckRyaXZlcic6IGplc3QuZm4oKQp9Owpjb25zdCBkZWZhdWx0TW9ja3MgPSB7CiAgICAkcm91dGU6IHsKICAgICAgICBuYW1lOiAnYW55dGhpbmcnLAogICAgICAgIHF1ZXJ5OiB7IEFTOiAneWFtbCcgfSwKICAgIH0sCn07CmNvbnN0IGRlZmF1bHRTcGVjID0gewogICAgcmtlQ29uZmlnOiB7IGV0Y2Q6IHsgZGlzYWJsZVNuYXBzaG90czogZmFsc2UgfSwgbWFjaGluZUdsb2JhbENvbmZpZzogeyBjbmk6ICdjYWxpY28nIH0gfSwKICAgIGNoYXJ0VmFsdWVzOiB7fSwKfTsKY29uc3QgZGVmYXVsdENpbGl1bVNwZWMgPSB7CiAgICBya2VDb25maWc6IHsgZXRjZDogeyBkaXNhYmxlU25hcHNob3RzOiBmYWxzZSB9LCBtYWNoaW5lR2xvYmFsQ29uZmlnOiB7IGNuaTogJ2NpbGl1bScgfSB9LAogICAgY2hhcnRWYWx1ZXM6IHt9LAp9OwovLyBpcHY2CmNvbnN0IGxlZ2FjeU9uVmFsdWUgPSB7IGNpbGl1bTogeyBpcHY2OiB7IGVuYWJsZWQ6IHRydWUgfSB9IH07CmNvbnN0IGxlZ2FjeU9mZlZhbHVlID0geyBjaWxpdW06IHsgaXB2NjogeyBlbmFibGVkOiBmYWxzZSB9IH0gfTsKY29uc3QgbmV3T25WYWx1ZSA9IHsgaXB2NjogeyBlbmFibGVkOiB0cnVlIH0gfTsKY29uc3QgbmV3T2ZmVmFsdWUgPSB7IGlwdjY6IHsgZW5hYmxlZDogZmFsc2UgfSB9OwovLyBiYW5kd2lkdGggbWFuYWdlcgpjb25zdCBibU9uVmFsdWUgPSB7IGJhbmR3aWR0aE1hbmFnZXI6IHsgZW5hYmxlZDogdHJ1ZSB9IH07CmNvbnN0IGJtT2ZmVmFsdWUgPSB7IGJhbmR3aWR0aE1hbmFnZXI6IHsgZW5hYmxlZDogZmFsc2UgfSB9OwpmdW5jdGlvbiBjcmVhdGVCYXNpY3NUYWIodmVyc2lvbiwgdXNlckNoYXJ0VmFsdWVzKSB7CiAgICBjb25zdCBrOHMgPSBtb2NrVmVyc2lvbk9wdGlvbnMuZmluZCgodikgPT4gdi5pZCA9PT0gdmVyc2lvbikgfHwgbW9ja1ZlcnNpb25PcHRpb25zWzBdOwogICAgY29uc3QgbGFiZWwgPSAnd2hhdGV2ZXInOwogICAgY29uc3Qgd3JhcHBlciA9IG1vdW50KEJhc2ljcywgewogICAgICAgIHByb3BzRGF0YTogewogICAgICAgICAgICBtb2RlOiAnY3JlYXRlJywKICAgICAgICAgICAgdmFsdWU6IHsKICAgICAgICAgICAgICAgIHNwZWM6IHsKICAgICAgICAgICAgICAgICAgICAuLi5kZWZhdWx0Q2lsaXVtU3BlYywKICAgICAgICAgICAgICAgICAgICBkZWZhdWx0UG9kU2VjdXJpdHlBZG1pc3Npb25Db25maWd1cmF0aW9uVGVtcGxhdGVOYW1lOiBsYWJlbCwKICAgICAgICAgICAgICAgICAgICBrdWJlcm5ldGVzVmVyc2lvbjogazhzLnZhbHVlCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgYWdlbnRDb25maWc6IHsgJ2Nsb3VkLXByb3ZpZGVyLW5hbWUnOiAnJyB9LAogICAgICAgICAgICB9LAogICAgICAgICAgICBhZGRvblZlcnNpb25zOiBbXSwKICAgICAgICAgICAgcHJvdmlkZXI6ICdjdXN0b20nLAogICAgICAgICAgICB1c2VyQ2hhcnRWYWx1ZXM6IHVzZXJDaGFydFZhbHVlcyB8fCB7fSwKICAgICAgICAgICAgY2lzT3ZlcnJpZGU6IGZhbHNlLAogICAgICAgICAgICBjaXNQc2FDaGFuZ2VCYW5uZXI6IHRydWUsCiAgICAgICAgICAgIGFsbFBzYXM6IFtdLAogICAgICAgICAgICBzZWxlY3RlZFZlcnNpb246IGs4cywKICAgICAgICAgICAgdmVyc2lvbk9wdGlvbnM6IG1vY2tWZXJzaW9uT3B0aW9ucywKICAgICAgICAgICAgaXNIYXJ2ZXN0ZXJEcml2ZXI6IGZhbHNlLAogICAgICAgICAgICBpc0hhcnZlc3RlckluY29tcGF0aWJsZTogZmFsc2UsCiAgICAgICAgICAgIHNob3dEZXByZWNhdGVkUGF0Y2hWZXJzaW9uczogZmFsc2UsCiAgICAgICAgICAgIGNsdXN0ZXJJc0FscmVhZHlDcmVhdGVkOiBmYWxzZSwKICAgICAgICAgICAgaXNFbGVtZW50YWxDbHVzdGVyOiBmYWxzZSwKICAgICAgICAgICAgaGFzUHNhVGVtcGxhdGVzOiBmYWxzZSwKICAgICAgICAgICAgaXNLM3M6IGZhbHNlLAogICAgICAgICAgICBoYXZlQXJnSW5mbzogZmFsc2UsCiAgICAgICAgICAgIHNob3dDbmk6IHRydWUsCiAgICAgICAgICAgIHNob3dDbG91ZFByb3ZpZGVyOiBmYWxzZSwKICAgICAgICAgICAgdW5zdXBwb3J0ZWRDbG91ZFByb3ZpZGVyOiBmYWxzZSwKICAgICAgICAgICAgY2xvdWRQcm92aWRlck9wdGlvbnM6IFt7IGxhYmVsOiAnRGVmYXVsdCAtIFJLRTIgRW1iZWRkZWQnLCB2YWx1ZTogJycgfV0sCiAgICAgICAgfSwKICAgICAgICBjb21wdXRlZDogZGVmYXVsdENvbXB1dGVkLAogICAgICAgIG1vY2tzOiB7CiAgICAgICAgICAgIC4uLmRlZmF1bHRNb2NrcywKICAgICAgICAgICAgJHN0b3JlOiB7IGdldHRlcnM6IGRlZmF1bHRHZXR0ZXJzIH0sCiAgICAgICAgfSwKICAgICAgICBzdHViczogZGVmYXVsdENpbGl1bVN0dWJzCiAgICB9KTsKICAgIHJldHVybiB3cmFwcGVyOwp9CmRlc2NyaWJlKCdjb21wb25lbnQ6IEJhc2ljcycsICgpID0+IHsKICAgIC8qKgogICAgICogRElTQ0xBSU1FUiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKICAgICAqIExvZ3MgYXJlIHByZXZlbnRlZCB0byBhdm9pZCBwb2xsdXRpbmcgdGhlIHRlc3Qgb3V0cHV0LgogICAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKICAgICovCiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgamVzdC9uby1ob29rcwogICAgYmVmb3JlRWFjaCgoKSA9PiB7CiAgICAgICAgamVzdC5zcHlPbihjb25zb2xlLCAnbG9nJykubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+IHsgfSk7CiAgICB9KTsKICAgIGl0LmVhY2gobW9ja1ZlcnNpb25PcHRpb25zKSgnc2hvdWxkIGRpc3BsYXkgUFNBIG9wdGlvbicsIChrOHMpID0+IHsKICAgICAgICBjb25zdCBsYWJlbCA9ICd3aGF0ZXZlcic7CiAgICAgICAgY29uc3Qgd3JhcHBlciA9IG1vdW50KEJhc2ljcywgewogICAgICAgICAgICBwcm9wc0RhdGE6IHsKICAgICAgICAgICAgICAgIG1vZGU6ICdjcmVhdGUnLAogICAgICAgICAgICAgICAgdmFsdWU6IHsKICAgICAgICAgICAgICAgICAgICBzcGVjOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmRlZmF1bHRTcGVjLAogICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0UG9kU2VjdXJpdHlBZG1pc3Npb25Db25maWd1cmF0aW9uVGVtcGxhdGVOYW1lOiBsYWJlbCwKICAgICAgICAgICAgICAgICAgICAgICAga3ViZXJuZXRlc1ZlcnNpb246IGs4cy52YWx1ZQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgYWdlbnRDb25maWc6IHsgJ2Nsb3VkLXByb3ZpZGVyLW5hbWUnOiAnJyB9LAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHByb3ZpZGVyOiAnd2hhdGV2ZXInLAogICAgICAgICAgICAgICAgdXNlckNoYXJ0VmFsdWVzOiB7fSwKICAgICAgICAgICAgICAgIGNpc092ZXJyaWRlOiBmYWxzZSwKICAgICAgICAgICAgICAgIGNpc1BzYUNoYW5nZUJhbm5lcjogdHJ1ZSwKICAgICAgICAgICAgICAgIGFsbFBzYXM6IFtdLAogICAgICAgICAgICAgICAgc2VsZWN0ZWRWZXJzaW9uOiBrOHMsCiAgICAgICAgICAgICAgICB2ZXJzaW9uT3B0aW9uczogbW9ja1ZlcnNpb25PcHRpb25zLAogICAgICAgICAgICAgICAgaXNIYXJ2ZXN0ZXJEcml2ZXI6IGZhbHNlLAogICAgICAgICAgICAgICAgaXNIYXJ2ZXN0ZXJJbmNvbXBhdGlibGU6IGZhbHNlLAogICAgICAgICAgICAgICAgc2hvd0RlcHJlY2F0ZWRQYXRjaFZlcnNpb25zOiBmYWxzZSwKICAgICAgICAgICAgICAgIGlzRWxlbWVudGFsQ2x1c3RlcjogZmFsc2UsCiAgICAgICAgICAgICAgICBoYXNQc2FUZW1wbGF0ZXM6IGZhbHNlLAogICAgICAgICAgICAgICAgaGF2ZUFyZ0luZm86IGZhbHNlLAogICAgICAgICAgICAgICAgc2hvd0NuaTogdHJ1ZSwKICAgICAgICAgICAgICAgIHNob3dDbG91ZFByb3ZpZGVyOiB0cnVlLAogICAgICAgICAgICAgICAgdW5zdXBwb3J0ZWRDbG91ZFByb3ZpZGVyOiBmYWxzZSwKICAgICAgICAgICAgICAgIGNsb3VkUHJvdmlkZXJPcHRpb25zOiBbeyBsYWJlbDogJ0RlZmF1bHQgLSBSS0UyIEVtYmVkZGVkJywgdmFsdWU6ICcnIH1dLAogICAgICAgICAgICB9LAogICAgICAgICAgICBjb21wdXRlZDogZGVmYXVsdENvbXB1dGVkLAogICAgICAgICAgICBtb2NrczogewogICAgICAgICAgICAgICAgLi4uZGVmYXVsdE1vY2tzLAogICAgICAgICAgICAgICAgJHN0b3JlOiB7IGdldHRlcnM6IGRlZmF1bHRHZXR0ZXJzIH0sCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHN0dWJzOiBkZWZhdWx0U3R1YnMKICAgICAgICB9KTsKICAgICAgICBjb25zdCBzZWxlY3QgPSB3cmFwcGVyLmZpbmQoJ1tkYXRhLXRlc3RpZD0icmtlMi1jdXN0b20tZWRpdC1wc2EiXScpOwogICAgICAgIGV4cGVjdChzZWxlY3Qudm0ub3B0aW9uc1swXS5sYWJlbCkudG9CZShgJHtsYWJlbH0gKEN1cnJlbnQpYCk7CiAgICB9KTsKICAgIGl0LmVhY2goWwogICAgICAgIFsndjEuMjUuMCtya2UycjEnLCAnbm9uZSddLAogICAgICAgIFsndjEuMjQuMCtya2UycjEnLCAnZGVmYXVsdCddLAogICAgICAgIFsndjEuMjMuMCtya2UycjEnLCAnZGVmYXVsdCddLAogICAgICAgIFsndjEuMjUuMCtrM3MxJywgJ25vbmUnXSwKICAgICAgICBbJ3YxLjI0LjArazNzMScsICdkZWZhdWx0J10sCiAgICAgICAgWyd2MS4yMy4wK2szczEnLCAnZGVmYXVsdCddLAogICAgXSkoJ3Nob3VsZCBkaXNwbGF5IGZvciB2ZXJzaW9uICVwIFBTQSBvcHRpb24gbGFiZWwgJXAnLCAoazhzLCBwYXJ0aWFsTGFiZWwpID0+IHsKICAgICAgICBjb25zdCBsYWJlbCA9IGBjbHVzdGVyLnJrZTIuZGVmYXVsdFBvZFNlY3VyaXR5QWRtaXNzaW9uQ29uZmlndXJhdGlvblRlbXBsYXRlTmFtZS5vcHRpb24uJHtwYXJ0aWFsTGFiZWx9YDsKICAgICAgICBjb25zdCB3cmFwcGVyID0gbW91bnQoQmFzaWNzLCB7CiAgICAgICAgICAgIHByb3BzRGF0YTogewogICAgICAgICAgICAgICAgbW9kZTogJ2NyZWF0ZScsCiAgICAgICAgICAgICAgICB2YWx1ZTogewogICAgICAgICAgICAgICAgICAgIHNwZWM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgLi4uZGVmYXVsdFNwZWMsCiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRQb2RTZWN1cml0eUFkbWlzc2lvbkNvbmZpZ3VyYXRpb25UZW1wbGF0ZU5hbWU6IGxhYmVsLAogICAgICAgICAgICAgICAgICAgICAgICBrdWJlcm5ldGVzVmVyc2lvbjogazhzCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBhZ2VudENvbmZpZzogeyAnY2xvdWQtcHJvdmlkZXItbmFtZSc6ICcnIH0sCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgcHJvdmlkZXI6ICd3aGF0ZXZlcicsCiAgICAgICAgICAgICAgICB1c2VyQ2hhcnRWYWx1ZXM6IHt9LAogICAgICAgICAgICAgICAgY2lzT3ZlcnJpZGU6IGZhbHNlLAogICAgICAgICAgICAgICAgY2lzUHNhQ2hhbmdlQmFubmVyOiB0cnVlLAogICAgICAgICAgICAgICAgYWxsUHNhczogW10sCiAgICAgICAgICAgICAgICBzZWxlY3RlZFZlcnNpb246IG1vY2tWZXJzaW9uT3B0aW9uc1swXSwKICAgICAgICAgICAgICAgIHZlcnNpb25PcHRpb25zOiBtb2NrVmVyc2lvbk9wdGlvbnMsCiAgICAgICAgICAgICAgICBpc0hhcnZlc3RlckRyaXZlcjogZmFsc2UsCiAgICAgICAgICAgICAgICBpc0hhcnZlc3RlckluY29tcGF0aWJsZTogZmFsc2UsCiAgICAgICAgICAgICAgICBzaG93RGVwcmVjYXRlZFBhdGNoVmVyc2lvbnM6IGZhbHNlLAogICAgICAgICAgICAgICAgaXNFbGVtZW50YWxDbHVzdGVyOiBmYWxzZSwKICAgICAgICAgICAgICAgIGhhc1BzYVRlbXBsYXRlczogZmFsc2UsCiAgICAgICAgICAgICAgICBoYXZlQXJnSW5mbzogZmFsc2UsCiAgICAgICAgICAgICAgICBzaG93Q25pOiB0cnVlLAogICAgICAgICAgICAgICAgc2hvd0Nsb3VkUHJvdmlkZXI6IHRydWUsCiAgICAgICAgICAgICAgICB1bnN1cHBvcnRlZENsb3VkUHJvdmlkZXI6IGZhbHNlLAogICAgICAgICAgICAgICAgY2xvdWRQcm92aWRlck9wdGlvbnM6IFt7IGxhYmVsOiAnRGVmYXVsdCAtIFJLRTIgRW1iZWRkZWQnLCB2YWx1ZTogJycgfV0sCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGNvbXB1dGVkOiBkZWZhdWx0Q29tcHV0ZWQsCiAgICAgICAgICAgIG1vY2tzOiB7CiAgICAgICAgICAgICAgICAuLi5kZWZhdWx0TW9ja3MsCiAgICAgICAgICAgICAgICAkc3RvcmU6IHsgZ2V0dGVyczogZGVmYXVsdEdldHRlcnMgfSwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgc3R1YnM6IGRlZmF1bHRTdHVicwogICAgICAgIH0pOwogICAgICAgIGNvbnN0IHNlbGVjdCA9IHdyYXBwZXIuZmluZCgnW2RhdGEtdGVzdGlkPSJya2UyLWN1c3RvbS1lZGl0LXBzYSJdJyk7CiAgICAgICAgZXhwZWN0KHNlbGVjdC52bS5vcHRpb25zWzBdLmxhYmVsKS50b1N0cmljdEVxdWFsKGAke2xhYmVsfSAoQ3VycmVudClgKTsKICAgIH0pOwogICAgaXQuZWFjaChbCiAgICAgICAgWydhbnl0aGluZycsIGZhbHNlLCB0cnVlXSwKICAgICAgICBbJycsIGZhbHNlLCBmYWxzZV0sCiAgICAgICAgWycnLCB0cnVlLCBmYWxzZV0sCiAgICBdKSgnZ2l2ZW4gQ0lTIHZhbHVlIGFzICVwIGFuZCBpdHMgb3ZlcnJpZGUgYXMgJXAsIGl0IHNob3VsZCBzZXQgUFNBIGRyb3Bkb3duIGFzIGRpc2FibGVkICVwJywgKGNpcywgb3ZlcnJpZGUsIGRpc2FibGVkKSA9PiB7CiAgICAgICAgY29uc3QgbGFiZWwgPSAnd2hhdGV2ZXInOwogICAgICAgIGNvbnN0IGs4cyA9ICd2MS4yNS4wK3JrZTJyMSc7CiAgICAgICAgY29uc3Qgd3JhcHBlciA9IG1vdW50KEJhc2ljcywgewogICAgICAgICAgICBwcm9wc0RhdGE6IHsKICAgICAgICAgICAgICAgIG1vZGU6ICdjcmVhdGUnLAogICAgICAgICAgICAgICAgdmFsdWU6IHsKICAgICAgICAgICAgICAgICAgICBhZ2VudENvbmZpZzogeyBwcm9maWxlOiBjaXMsICdjbG91ZC1wcm92aWRlci1uYW1lJzogJycgfSwKICAgICAgICAgICAgICAgICAgICBzcGVjOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmRlZmF1bHRTcGVjLAogICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0UG9kU2VjdXJpdHlBZG1pc3Npb25Db25maWd1cmF0aW9uVGVtcGxhdGVOYW1lOiBsYWJlbCwKICAgICAgICAgICAgICAgICAgICAgICAga3ViZXJuZXRlc1ZlcnNpb246IGs4cwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBwcm92aWRlcjogJ2N1c3RvbScsCiAgICAgICAgICAgICAgICB1c2VyQ2hhcnRWYWx1ZXM6IHt9LAogICAgICAgICAgICAgICAgY2lzUHNhQ2hhbmdlQmFubmVyOiB0cnVlLAogICAgICAgICAgICAgICAgYWxsUHNhczogW10sCiAgICAgICAgICAgICAgICBjaXNPdmVycmlkZTogb3ZlcnJpZGUsCiAgICAgICAgICAgICAgICBzZWxlY3RlZFZlcnNpb246IG1vY2tWZXJzaW9uT3B0aW9uc1swXSwKICAgICAgICAgICAgICAgIHZlcnNpb25PcHRpb25zOiBbewogICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogazhzLAogICAgICAgICAgICAgICAgICAgICAgICBhZ2VudEFyZ3M6IHsgcHJvZmlsZTogeyBvcHRpb25zOiBbY2lzXSB9IH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGNoYXJ0czoge30sCiAgICAgICAgICAgICAgICAgICAgICAgIHByb2ZpbGU6IHsgb3B0aW9uczogW2Npc10gfQogICAgICAgICAgICAgICAgICAgIH1dLAogICAgICAgICAgICAgICAgaXNIYXJ2ZXN0ZXJEcml2ZXI6IGZhbHNlLAogICAgICAgICAgICAgICAgaXNIYXJ2ZXN0ZXJJbmNvbXBhdGlibGU6IGZhbHNlLAogICAgICAgICAgICAgICAgc2hvd0RlcHJlY2F0ZWRQYXRjaFZlcnNpb25zOiBmYWxzZSwKICAgICAgICAgICAgICAgIGlzRWxlbWVudGFsQ2x1c3RlcjogZmFsc2UsCiAgICAgICAgICAgICAgICBoYXNQc2FUZW1wbGF0ZXM6IHRydWUsCiAgICAgICAgICAgICAgICBoYXZlQXJnSW5mbzogZmFsc2UsCiAgICAgICAgICAgICAgICBzaG93Q25pOiB0cnVlLAogICAgICAgICAgICAgICAgc2hvd0Nsb3VkUHJvdmlkZXI6IHRydWUsCiAgICAgICAgICAgICAgICB1bnN1cHBvcnRlZENsb3VkUHJvdmlkZXI6IGZhbHNlLAogICAgICAgICAgICAgICAgY2xvdWRQcm92aWRlck9wdGlvbnM6IFt7IGxhYmVsOiAnRGVmYXVsdCAtIFJLRTIgRW1iZWRkZWQnLCB2YWx1ZTogJycgfV0sCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGNvbXB1dGVkOiB7IC4uLmRlZmF1bHRDb21wdXRlZCB9LAogICAgICAgICAgICBtb2NrczogewogICAgICAgICAgICAgICAgLi4uZGVmYXVsdE1vY2tzLAogICAgICAgICAgICAgICAgJHN0b3JlOiB7IGdldHRlcnM6IGRlZmF1bHRHZXR0ZXJzIH0sCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHN0dWJzOiBkZWZhdWx0U3R1YnMKICAgICAgICB9KTsKICAgICAgICBjb25zdCBzZWxlY3QgPSB3cmFwcGVyLmZpbmQoJ1tkYXRhLXRlc3RpZD0icmtlMi1jdXN0b20tZWRpdC1wc2EiXScpOwogICAgICAgIGV4cGVjdChzZWxlY3Qudm0uZGlzYWJsZWQpLnRvQmUoZGlzYWJsZWQpOwogICAgfSk7CiAgICBkZXNjcmliZSgnY2lsaXVtIENOSScsICgpID0+IHsKICAgICAgICBpdCgnc2hvdWxkIHRvZ2dsZSBpcHY2IG9uL29mZiB3aXRoIHRoZSBsZWdhY3kgc3RydWN0dXJlJywgYXN5bmMgKCkgPT4gewogICAgICAgICAgICBjb25zdCB3cmFwcGVyID0gY3JlYXRlQmFzaWNzVGFiKCd2MS4yMy4wK3JrZTJyMScsIHt9KTsKICAgICAgICAgICAgY29uc3QgaXB2NkNoZWNrYm94ID0gd3JhcHBlci5maW5kKCdbZGF0YS10ZXN0aWQ9ImNsdXN0ZXItcmtlMi1jbmktaXB2Ni1jaGVja2JveCJdJyk7CiAgICAgICAgICAgIGV4cGVjdChpcHY2Q2hlY2tib3guZXhpc3RzKCkpLnRvQmUodHJ1ZSk7CiAgICAgICAgICAgIGV4cGVjdChpcHY2Q2hlY2tib3guaXNWaXNpYmxlKCkpLnRvQmUodHJ1ZSk7CiAgICAgICAgICAgIC8vIENsaWNrIHRoZSBjaGVja2JveCAtIHNob3VsZCBlbmFibGUgaXB2NgogICAgICAgICAgICBhd2FpdCBpcHY2Q2hlY2tib3guZmluZCgnbGFiZWwnKS50cmlnZ2VyKCdjbGljaycpOwogICAgICAgICAgICBhd2FpdCBpcHY2Q2hlY2tib3gudm0uJG5leHRUaWNrKCk7CiAgICAgICAgICAgIGF3YWl0IHdyYXBwZXIudm0uJG5leHRUaWNrKCk7CiAgICAgICAgICAgIC8vIENoZWNrIGFuZCB1cGRhdGUgdXNlciB2YWx1ZXMgd2l0aCB0aGUgZW1pdHRlZCB2YWx1ZQogICAgICAgICAgICBsZXQgbGF0ZXN0ID0gKHdyYXBwZXIuZW1pdHRlZCgpWydjaWxpdW0tdmFsdWVzLWNoYW5nZWQnXSB8fCBbXSlbMF1bMF07CiAgICAgICAgICAgIGV4cGVjdChKU09OLnN0cmluZ2lmeShsYXRlc3QpKS50b1N0cmljdEVxdWFsKEpTT04uc3RyaW5naWZ5KGxlZ2FjeU9uVmFsdWUpKTsKICAgICAgICAgICAgYXdhaXQgd3JhcHBlci5zZXRQcm9wcyh7IHVzZXJDaGFydFZhbHVlczogeyAncmtlMi1jaWxpdW0nOiBsYXRlc3QgfSB9KTsKICAgICAgICAgICAgLy8gQ2xpY2sgdGhlIGNoZWNrYm94IHRvIHR1cm4gaXB2NiBvZmYgYWdhaW4KICAgICAgICAgICAgYXdhaXQgaXB2NkNoZWNrYm94LmZpbmQoJ2xhYmVsJykudHJpZ2dlcignY2xpY2snKTsKICAgICAgICAgICAgYXdhaXQgaXB2NkNoZWNrYm94LnZtLiRuZXh0VGljaygpOwogICAgICAgICAgICBhd2FpdCB3cmFwcGVyLnZtLiRuZXh0VGljaygpOwogICAgICAgICAgICAvLyBVcGRhdGUgZnJvbSB0aGUgZW1pdHRlZCB2YWx1ZQogICAgICAgICAgICBsYXRlc3QgPSAod3JhcHBlci5lbWl0dGVkKClbJ2NpbGl1bS12YWx1ZXMtY2hhbmdlZCddIHx8IFtdKVsxXVswXTsKICAgICAgICAgICAgZXhwZWN0KEpTT04uc3RyaW5naWZ5KGxhdGVzdCkpLnRvU3RyaWN0RXF1YWwoSlNPTi5zdHJpbmdpZnkobGVnYWN5T2ZmVmFsdWUpKTsKICAgICAgICB9KTsKICAgICAgICBpdCgnc2hvdWxkIHRvZ2dsZSBpcHY2IG9uL29mZiB3aXRoIHRoZSBuZXcgc3RydWN0dXJlJywgYXN5bmMgKCkgPT4gewogICAgICAgICAgICBjb25zdCB3cmFwcGVyID0gY3JlYXRlQmFzaWNzVGFiKCd2MS4yNS4wK3JrZTJyMScsIHt9KTsKICAgICAgICAgICAgY29uc3QgaXB2NkNoZWNrYm94ID0gd3JhcHBlci5maW5kKCdbZGF0YS10ZXN0aWQ9ImNsdXN0ZXItcmtlMi1jbmktaXB2Ni1jaGVja2JveCJdJyk7CiAgICAgICAgICAgIGV4cGVjdChpcHY2Q2hlY2tib3guZXhpc3RzKCkpLnRvQmUodHJ1ZSk7CiAgICAgICAgICAgIGV4cGVjdChpcHY2Q2hlY2tib3guaXNWaXNpYmxlKCkpLnRvQmUodHJ1ZSk7CiAgICAgICAgICAgIC8vIENsaWNrIHRoZSBjaGVja2JveCAtIHNob3VsZCBlbmFibGUgaXB2NgogICAgICAgICAgICBhd2FpdCBpcHY2Q2hlY2tib3guZmluZCgnbGFiZWwnKS50cmlnZ2VyKCdjbGljaycpOwogICAgICAgICAgICBhd2FpdCBpcHY2Q2hlY2tib3gudm0uJG5leHRUaWNrKCk7CiAgICAgICAgICAgIGF3YWl0IHdyYXBwZXIudm0uJG5leHRUaWNrKCk7CiAgICAgICAgICAgIC8vIENoZWNrIGFuZCB1cGRhdGUgdXNlciB2YWx1ZXMgd2l0aCB0aGUgZW1pdHRlZCB2YWx1ZQogICAgICAgICAgICBsZXQgbGF0ZXN0ID0gKHdyYXBwZXIuZW1pdHRlZCgpWydjaWxpdW0tdmFsdWVzLWNoYW5nZWQnXSB8fCBbXSlbMF1bMF07CiAgICAgICAgICAgIGV4cGVjdChKU09OLnN0cmluZ2lmeShsYXRlc3QpKS50b1N0cmljdEVxdWFsKEpTT04uc3RyaW5naWZ5KG5ld09uVmFsdWUpKTsKICAgICAgICAgICAgYXdhaXQgd3JhcHBlci5zZXRQcm9wcyh7IHVzZXJDaGFydFZhbHVlczogeyAncmtlMi1jaWxpdW0nOiBsYXRlc3QgfSB9KTsKICAgICAgICAgICAgLy8gQ2xpY2sgdGhlIGNoZWNrYm94IHRvIHR1cm4gaXB2NiBvZmYgYWdhaW4KICAgICAgICAgICAgYXdhaXQgaXB2NkNoZWNrYm94LmZpbmQoJ2xhYmVsJykudHJpZ2dlcignY2xpY2snKTsKICAgICAgICAgICAgYXdhaXQgaXB2NkNoZWNrYm94LnZtLiRuZXh0VGljaygpOwogICAgICAgICAgICBhd2FpdCB3cmFwcGVyLnZtLiRuZXh0VGljaygpOwogICAgICAgICAgICAvLyBVcGRhdGUgZnJvbSB0aGUgZW1pdHRlZCB2YWx1ZQogICAgICAgICAgICBsYXRlc3QgPSAod3JhcHBlci5lbWl0dGVkKClbJ2NpbGl1bS12YWx1ZXMtY2hhbmdlZCddIHx8IFtdKVsxXVswXTsKICAgICAgICAgICAgZXhwZWN0KEpTT04uc3RyaW5naWZ5KGxhdGVzdCkpLnRvU3RyaWN0RXF1YWwoSlNPTi5zdHJpbmdpZnkobmV3T2ZmVmFsdWUpKTsKICAgICAgICB9KTsKICAgICAgICBpdCgnc2hvdWxkIG1pZ3JhdGUgd2hlbiB0aGUgazhzIHZlcnNpb24gaXMgY2hhbmdlZCcsIGFzeW5jICgpID0+IHsKICAgICAgICAgICAgY29uc3QgdXNlckNoYXJ0VmFsdWVzID0geyAncmtlMi1jaWxpdW0nOiB7IGlwdjY6IHsgZW5hYmxlZDogdHJ1ZSB9IH0gfTsKICAgICAgICAgICAgY29uc3Qgd3JhcHBlciA9IGNyZWF0ZUJhc2ljc1RhYigndjEuMjUuMCtya2UycjEnLCB1c2VyQ2hhcnRWYWx1ZXMpOwogICAgICAgICAgICAvLyBDaGVjayB0aGF0IHRoZSBjaGVja2JveCBpcyBjaGVja2VkCiAgICAgICAgICAgIGNvbnN0IGlwdjZDaGVja2JveCA9IHdyYXBwZXIuZmluZCgnW2RhdGEtdGVzdGlkPSJjbHVzdGVyLXJrZTItY25pLWlwdjYtY2hlY2tib3giXScpOwogICAgICAgICAgICBleHBlY3QoaXB2NkNoZWNrYm94LmV4aXN0cygpKS50b0JlKHRydWUpOwogICAgICAgICAgICBleHBlY3QoaXB2NkNoZWNrYm94LmlzVmlzaWJsZSgpKS50b0JlKHRydWUpOwogICAgICAgICAgICBleHBlY3QoaXB2NkNoZWNrYm94LnZtLnZhbHVlKS50b0JlKHRydWUpOwogICAgICAgICAgICAvLyBDaGFuZ2UgdGhlIGt1YmVybmV0ZXMgdmVyc2lvbiB0aGF0IG5lZWRzIHRoZSBsZWdhY3kgZm9ybWF0CiAgICAgICAgICAgIGNvbnN0IGs4czEyMyA9IG1vY2tWZXJzaW9uT3B0aW9ucy5maW5kKCh2KSA9PiB2LmlkID09PSAndjEuMjMuMCtya2UycjEnKTsKICAgICAgICAgICAgYXdhaXQgd3JhcHBlci5zZXRQcm9wcyh7IHNlbGVjdGVkVmVyc2lvbjogazhzMTIzIH0pOwogICAgICAgICAgICBsZXQgbGF0ZXN0ID0gKHdyYXBwZXIuZW1pdHRlZCgpWydjaWxpdW0tdmFsdWVzLWNoYW5nZWQnXSB8fCBbXSlbMF1bMF07CiAgICAgICAgICAgIGV4cGVjdChKU09OLnN0cmluZ2lmeShsYXRlc3QpKS50b1N0cmljdEVxdWFsKEpTT04uc3RyaW5naWZ5KGxlZ2FjeU9uVmFsdWUpKTsKICAgICAgICAgICAgLy8gQ2hhbmdlIGJhY2sgdGhlIHZlcnNpb24gc28gdGhhdCB0aGUgbmV3IGZvcm1hdCBzaG91bGQgYmUgdXNlZAogICAgICAgICAgICBjb25zdCBrOHMxMjUgPSBtb2NrVmVyc2lvbk9wdGlvbnMuZmluZCgodikgPT4gdi5pZCA9PT0gJ3YxLjI1LjArcmtlMnIxJyk7CiAgICAgICAgICAgIGF3YWl0IHdyYXBwZXIuc2V0UHJvcHMoeyBzZWxlY3RlZFZlcnNpb246IGs4czEyNSB9KTsKICAgICAgICAgICAgbGF0ZXN0ID0gKHdyYXBwZXIuZW1pdHRlZCgpWydjaWxpdW0tdmFsdWVzLWNoYW5nZWQnXSB8fCBbXSlbMV1bMF07CiAgICAgICAgICAgIGV4cGVjdChKU09OLnN0cmluZ2lmeShsYXRlc3QpKS50b1N0cmljdEVxdWFsKEpTT04uc3RyaW5naWZ5KG5ld09uVmFsdWUpKTsKICAgICAgICB9KTsKICAgIH0pOwogICAgaXQoJ3Nob3VsZCB0b2dnbGUgYmFuZHdpZHRoIG1hbmFnZXIgc3VwcG9ydCBvbi9vZmYnLCBhc3luYyAoKSA9PiB7CiAgICAgICAgY29uc3Qgd3JhcHBlciA9IGNyZWF0ZUJhc2ljc1RhYigndjEuMjUuMCtya2UycjEnLCB7fSk7CiAgICAgICAgY29uc3QgYm1DaGVja2JveCA9IHdyYXBwZXIuZmluZCgnW2RhdGEtdGVzdGlkPSJjbHVzdGVyLXJrZTItY25pLWNpbGl1bS1iYW5kd2lkdGgtbWFuYWdlci1jaGVja2JveCJdJyk7CiAgICAgICAgZXhwZWN0KGJtQ2hlY2tib3guZXhpc3RzKCkpLnRvQmUodHJ1ZSk7CiAgICAgICAgZXhwZWN0KGJtQ2hlY2tib3guaXNWaXNpYmxlKCkpLnRvQmUodHJ1ZSk7CiAgICAgICAgLy8gQ2xpY2sgdGhlIGNoZWNrYm94IC0gc2hvdWxkIGVuYWJsZSBiYW5kd2lkdGggbWFuYWdlcgogICAgICAgIGF3YWl0IGJtQ2hlY2tib3guZmluZCgnbGFiZWwnKS50cmlnZ2VyKCdjbGljaycpOwogICAgICAgIGF3YWl0IGJtQ2hlY2tib3gudm0uJG5leHRUaWNrKCk7CiAgICAgICAgYXdhaXQgd3JhcHBlci52bS4kbmV4dFRpY2soKTsKICAgICAgICAvLyBDaGVjayBhbmQgdXBkYXRlIHVzZXIgdmFsdWVzIHdpdGggdGhlIGVtaXR0ZWQgdmFsdWUKICAgICAgICBsZXQgbGF0ZXN0ID0gKHdyYXBwZXIuZW1pdHRlZCgpWydjaWxpdW0tdmFsdWVzLWNoYW5nZWQnXSB8fCBbXSlbMF1bMF07CiAgICAgICAgZXhwZWN0KEpTT04uc3RyaW5naWZ5KGxhdGVzdCkpLnRvU3RyaWN0RXF1YWwoSlNPTi5zdHJpbmdpZnkoYm1PblZhbHVlKSk7CiAgICAgICAgYXdhaXQgd3JhcHBlci5zZXRQcm9wcyh7IHVzZXJDaGFydFZhbHVlczogeyAncmtlMi1jaWxpdW0nOiBsYXRlc3QgfSB9KTsKICAgICAgICAvLyBDbGljayB0aGUgY2hlY2tib3ggdG8gdHVybiBpcHY2IG9mZiBhZ2FpbgogICAgICAgIGF3YWl0IGJtQ2hlY2tib3guZmluZCgnbGFiZWwnKS50cmlnZ2VyKCdjbGljaycpOwogICAgICAgIGF3YWl0IGJtQ2hlY2tib3gudm0uJG5leHRUaWNrKCk7CiAgICAgICAgYXdhaXQgd3JhcHBlci52bS4kbmV4dFRpY2soKTsKICAgICAgICAvLyBVcGRhdGUgZnJvbSB0aGUgZW1pdHRlZCB2YWx1ZQogICAgICAgIGxhdGVzdCA9ICh3cmFwcGVyLmVtaXR0ZWQoKVsnY2lsaXVtLXZhbHVlcy1jaGFuZ2VkJ10gfHwgW10pWzFdWzBdOwogICAgICAgIGV4cGVjdChKU09OLnN0cmluZ2lmeShsYXRlc3QpKS50b1N0cmljdEVxdWFsKEpTT04uc3RyaW5naWZ5KGJtT2ZmVmFsdWUpKTsKICAgIH0pOwogICAgaXQoJ3Nob3VsZCBzdXBwb3J0IGlwdjYgYW5kIGJhbmR3aWR0aCBtYW5hZ2VyJywgYXN5bmMgKCkgPT4gewogICAgICAgIGNvbnN0IHdyYXBwZXIgPSBjcmVhdGVCYXNpY3NUYWIoJ3YxLjI1LjArcmtlMnIxJywge30pOwogICAgICAgIGNvbnN0IGJtQ2hlY2tib3ggPSB3cmFwcGVyLmZpbmQoJ1tkYXRhLXRlc3RpZD0iY2x1c3Rlci1ya2UyLWNuaS1jaWxpdW0tYmFuZHdpZHRoLW1hbmFnZXItY2hlY2tib3giXScpOwogICAgICAgIGNvbnN0IGlwdjZDaGVja2JveCA9IHdyYXBwZXIuZmluZCgnW2RhdGEtdGVzdGlkPSJjbHVzdGVyLXJrZTItY25pLWlwdjYtY2hlY2tib3giXScpOwogICAgICAgIC8vIENsaWNrIHRoZSBjaGVja2JveCAtIHNob3VsZCBlbmFibGUgYmFuZHdpZHRoIG1hbmFnZXIKICAgICAgICBhd2FpdCBibUNoZWNrYm94LmZpbmQoJ2xhYmVsJykudHJpZ2dlcignY2xpY2snKTsKICAgICAgICBhd2FpdCBibUNoZWNrYm94LnZtLiRuZXh0VGljaygpOwogICAgICAgIGF3YWl0IHdyYXBwZXIudm0uJG5leHRUaWNrKCk7CiAgICAgICAgbGV0IGxhdGVzdCA9ICh3cmFwcGVyLmVtaXR0ZWQoKVsnY2lsaXVtLXZhbHVlcy1jaGFuZ2VkJ10gfHwgW10pWzBdWzBdOwogICAgICAgIGF3YWl0IHdyYXBwZXIuc2V0UHJvcHMoeyB1c2VyQ2hhcnRWYWx1ZXM6IHsgJ3JrZTItY2lsaXVtJzogbGF0ZXN0IH0gfSk7CiAgICAgICAgLy8gQ2xpY2sgdGhlIGNoZWNrYm94IC0gc2hvdWxkIGVuYWJsZSBpcHY2CiAgICAgICAgYXdhaXQgaXB2NkNoZWNrYm94LmZpbmQoJ2xhYmVsJykudHJpZ2dlcignY2xpY2snKTsKICAgICAgICBhd2FpdCBpcHY2Q2hlY2tib3gudm0uJG5leHRUaWNrKCk7CiAgICAgICAgYXdhaXQgd3JhcHBlci52bS4kbmV4dFRpY2soKTsKICAgICAgICAvLyBDaGVjayBhbmQgdXBkYXRlIHVzZXIgdmFsdWVzIHdpdGggdGhlIGVtaXR0ZWQgdmFsdWUKICAgICAgICBsYXRlc3QgPSAod3JhcHBlci5lbWl0dGVkKClbJ2NpbGl1bS12YWx1ZXMtY2hhbmdlZCddIHx8IFtdKVsxXVswXTsKICAgICAgICBjb25zdCBjb21iaW5lZCA9IHsKICAgICAgICAgICAgYmFuZHdpZHRoTWFuYWdlcjogeyBlbmFibGVkOiB0cnVlIH0sCiAgICAgICAgICAgIGlwdjY6IHsgZW5hYmxlZDogdHJ1ZSB9CiAgICAgICAgfTsKICAgICAgICBleHBlY3QoSlNPTi5zdHJpbmdpZnkobGF0ZXN0KSkudG9TdHJpY3RFcXVhbChKU09OLnN0cmluZ2lmeShjb21iaW5lZCkpOwogICAgICAgIC8vIENoZWNrIHRoYXQgb3RoZXIgcHJvcGVydGllcyBhcmUgcHJlc2VydmVkCiAgICAgICAgbGF0ZXN0ID0gewogICAgICAgICAgICAuLi5sYXRlc3QsCiAgICAgICAgICAgIGJhbmR3aWR0aE1hbmFnZXI6IHsKICAgICAgICAgICAgICAgIHRlc3Q6IHRydWUsCiAgICAgICAgICAgICAgICBlbmFibGVkOiBmYWxzZQogICAgICAgICAgICB9LAogICAgICAgICAgICBpcHY2OiB7CiAgICAgICAgICAgICAgICB0ZXN0OiB0cnVlLAogICAgICAgICAgICAgICAgZW5hYmxlZDogZmFsc2UKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgYXdhaXQgd3JhcHBlci5zZXRQcm9wcyh7IHVzZXJDaGFydFZhbHVlczogeyAncmtlMi1jaWxpdW0nOiBsYXRlc3QgfSB9KTsKICAgICAgICAvLyBDbGljayB0aGUgY2hlY2tib3ggdG8gdHVybiBiYW5kd2lkdGggbWFuYWdlciBvZmYgYWdhaW4KICAgICAgICBhd2FpdCBibUNoZWNrYm94LmZpbmQoJ2xhYmVsJykudHJpZ2dlcignY2xpY2snKTsKICAgICAgICBhd2FpdCBibUNoZWNrYm94LnZtLiRuZXh0VGljaygpOwogICAgICAgIGF3YWl0IHdyYXBwZXIudm0uJG5leHRUaWNrKCk7CiAgICAgICAgbGF0ZXN0ID0gKHdyYXBwZXIuZW1pdHRlZCgpWydjaWxpdW0tdmFsdWVzLWNoYW5nZWQnXSB8fCBbXSlbMl1bMF07CiAgICAgICAgY29uc3QgZXhwZWN0ZWQgPSAneyJiYW5kd2lkdGhNYW5hZ2VyIjp7InRlc3QiOnRydWUsImVuYWJsZWQiOnRydWV9LCJpcHY2Ijp7InRlc3QiOnRydWUsImVuYWJsZWQiOmZhbHNlfX0nOwogICAgICAgIGV4cGVjdChKU09OLnN0cmluZ2lmeShsYXRlc3QpKS50b1N0cmljdEVxdWFsKGV4cGVjdGVkKTsKICAgIH0pOwp9KTsK"},{"version":3,"file":"/home/ubuntu/suseconf/node_modules/@rancher/shell/edit/provisioning.cattle.io.cluster/__tests__/Basics.test.ts","sourceRoot":"","sources":["/home/ubuntu/suseconf/node_modules/@rancher/shell/edit/provisioning.cattle.io.cluster/__tests__/Basics.test.ts"],"names":[],"mappings":"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","sourcesContent":["import { mount } from '@vue/test-utils';\nimport Basics from '@shell/edit/provisioning.cattle.io.cluster/tabs/Basics.vue';\nimport Checkbox from '@components/Form/Checkbox/Checkbox.vue';\n\nconst defaultStubs = {\n  Banner:        true,\n  LabeledSelect: true,\n  YamlEditor:    true,\n  Checkbox:      true\n};\n\nconst defaultCiliumStubs = {\n  Banner:        true,\n  LabeledSelect: true,\n  YamlEditor:    true,\n};\n\nconst defaultComputed = {\n  showk8s21LegacyWarning() {\n    return false;\n  },\n  profileOptions() {\n    return [{ label: 'anything', value: 'anything' }];\n  }\n};\n\nconst mockAgentArgs = { 'cloud-provider-name': { options: [], profile: { options: [{ anything: 'yes' }] } } };\nconst mockServerArgs = { disable: {}, cni: { options: [] } };\n\nconst rke2Versions =\n  [\n    {\n      id: 'v1.25.0+rke2r1', value: 'v1.25.0+rke2r1', serverArgs: mockServerArgs, agentArgs: mockAgentArgs, charts: {}\n    },\n    {\n      id: 'v1.24.0+rke2r1', value: 'v1.24.0+rke2r1', serverArgs: mockServerArgs, agentArgs: mockAgentArgs, charts: {}\n    },\n    {\n      id: 'v1.23.0+rke2r1', value: 'v1.23.0+rke2r1', serverArgs: mockServerArgs, agentArgs: mockAgentArgs, charts: {}\n    }\n  ];\nconst k3sVersions = [\n  {\n    id: 'v1.25.0+k3s1', value: 'v1.25.0+k3s1', serverArgs: mockServerArgs, agentArgs: mockAgentArgs, charts: {}\n  },\n  {\n    id: 'v1.24.0+k3s1', value: 'v1.24.0+k3s1', serverArgs: mockServerArgs, agentArgs: mockAgentArgs, charts: {}\n  },\n  {\n    id: 'v1.23.0+k3s1', value: 'v1.23.0+k3s1', serverArgs: mockServerArgs, agentArgs: mockAgentArgs, charts: {}\n  }\n];\nconst mockVersionOptions = [...rke2Versions, ...k3sVersions];\n\nconst defaultGetters = {\n  currentStore:                     () => 'current_store',\n  'management/schemaFor':           jest.fn(),\n  'current_store/all':              jest.fn(),\n  'i18n/t':                         jest.fn(),\n  'i18n/withFallback':              jest.fn(),\n  'plugins/cloudProviderForDriver': jest.fn()\n};\n\nconst defaultMocks = {\n  $route: {\n    name:  'anything',\n    query: { AS: 'yaml' },\n  },\n};\n\nconst defaultSpec = {\n  rkeConfig:   { etcd: { disableSnapshots: false }, machineGlobalConfig: { cni: 'calico' } },\n  chartValues: {},\n};\n\nconst defaultCiliumSpec = {\n  rkeConfig:   { etcd: { disableSnapshots: false }, machineGlobalConfig: { cni: 'cilium' } },\n  chartValues: {},\n};\n\n// ipv6\nconst legacyOnValue = { cilium: { ipv6: { enabled: true } } };\nconst legacyOffValue = { cilium: { ipv6: { enabled: false } } };\nconst newOnValue = { ipv6: { enabled: true } };\nconst newOffValue = { ipv6: { enabled: false } };\n\n// bandwidth manager\nconst bmOnValue = { bandwidthManager: { enabled: true } };\nconst bmOffValue = { bandwidthManager: { enabled: false } };\n\nfunction createBasicsTab(version : string, userChartValues: any) {\n  const k8s = mockVersionOptions.find((v) => v.id === version) || mockVersionOptions[0];\n  const label = 'whatever';\n  const wrapper = mount(Basics, {\n    propsData: {\n      mode:  'create',\n      value: {\n        spec: {\n          ...defaultCiliumSpec,\n          defaultPodSecurityAdmissionConfigurationTemplateName: label,\n          kubernetesVersion:                                    k8s.value\n        },\n        agentConfig: { 'cloud-provider-name': '' },\n      },\n      addonVersions:               [],\n      provider:                    'custom',\n      userChartValues:             userChartValues || {},\n      cisOverride:                 false,\n      cisPsaChangeBanner:          true,\n      allPsas:                     [],\n      selectedVersion:             k8s,\n      versionOptions:              mockVersionOptions,\n      isHarvesterDriver:           false,\n      isHarvesterIncompatible:     false,\n      showDeprecatedPatchVersions: false,\n      clusterIsAlreadyCreated:     false,\n      isElementalCluster:          false,\n      hasPsaTemplates:             false,\n      isK3s:                       false,\n      haveArgInfo:                 false,\n      showCni:                     true,\n      showCloudProvider:           false,\n      unsupportedCloudProvider:    false,\n      cloudProviderOptions:        [{ label: 'Default - RKE2 Embedded', value: '' }],\n    },\n    computed: defaultComputed,\n    mocks:    {\n      ...defaultMocks,\n      $store: { getters: defaultGetters },\n    },\n    stubs: defaultCiliumStubs\n  });\n\n  return wrapper;\n}\n\ndescribe('component: Basics', () => {\n  /**\n   * DISCLAIMER ***************************************************************************************\n   * Logs are prevented to avoid polluting the test output.\n   ****************************************************************************************************\n  */\n  // eslint-disable-next-line jest/no-hooks\n  beforeEach(() => {\n    jest.spyOn(console, 'log').mockImplementation(() => { });\n  });\n\n  it.each(mockVersionOptions)('should display PSA option', (k8s) => {\n    const label = 'whatever';\n    const wrapper = mount(Basics, {\n      propsData: {\n        mode:  'create',\n        value: {\n          spec: {\n            ...defaultSpec,\n            defaultPodSecurityAdmissionConfigurationTemplateName: label,\n            kubernetesVersion:                                    k8s.value\n          },\n          agentConfig: { 'cloud-provider-name': '' },\n        },\n        provider:                    'whatever',\n        userChartValues:             {},\n        cisOverride:                 false,\n        cisPsaChangeBanner:          true,\n        allPsas:                     [],\n        selectedVersion:             k8s,\n        versionOptions:              mockVersionOptions,\n        isHarvesterDriver:           false,\n        isHarvesterIncompatible:     false,\n        showDeprecatedPatchVersions: false,\n        isElementalCluster:          false,\n        hasPsaTemplates:             false,\n        haveArgInfo:                 false,\n        showCni:                     true,\n        showCloudProvider:           true,\n        unsupportedCloudProvider:    false,\n        cloudProviderOptions:        [{ label: 'Default - RKE2 Embedded', value: '' }],\n      },\n      computed: defaultComputed,\n      mocks:    {\n        ...defaultMocks,\n        $store: { getters: defaultGetters },\n      },\n      stubs: defaultStubs\n    });\n\n    const select = wrapper.find('[data-testid=\"rke2-custom-edit-psa\"]');\n\n    expect((select.vm as unknown as any).options[0].label).toBe(`${ label } (Current)`);\n  });\n\n  it.each([\n    ['v1.25.0+rke2r1', 'none'],\n    ['v1.24.0+rke2r1', 'default'],\n    ['v1.23.0+rke2r1', 'default'],\n    ['v1.25.0+k3s1', 'none'],\n    ['v1.24.0+k3s1', 'default'],\n    ['v1.23.0+k3s1', 'default'],\n  ])('should display for version %p PSA option label %p', (k8s, partialLabel) => {\n    const label = `cluster.rke2.defaultPodSecurityAdmissionConfigurationTemplateName.option.${ partialLabel }`;\n    const wrapper = mount(Basics, {\n      propsData: {\n        mode:  'create',\n        value: {\n          spec: {\n            ...defaultSpec,\n            defaultPodSecurityAdmissionConfigurationTemplateName: label,\n            kubernetesVersion:                                    k8s\n          },\n          agentConfig: { 'cloud-provider-name': '' },\n        },\n        provider:                    'whatever',\n        userChartValues:             {},\n        cisOverride:                 false,\n        cisPsaChangeBanner:          true,\n        allPsas:                     [],\n        selectedVersion:             mockVersionOptions[0],\n        versionOptions:              mockVersionOptions,\n        isHarvesterDriver:           false,\n        isHarvesterIncompatible:     false,\n        showDeprecatedPatchVersions: false,\n        isElementalCluster:          false,\n        hasPsaTemplates:             false,\n        haveArgInfo:                 false,\n        showCni:                     true,\n        showCloudProvider:           true,\n        unsupportedCloudProvider:    false,\n        cloudProviderOptions:        [{ label: 'Default - RKE2 Embedded', value: '' }],\n      },\n      computed: defaultComputed,\n      mocks:    {\n        ...defaultMocks,\n        $store: { getters: defaultGetters },\n      },\n      stubs: defaultStubs\n    });\n\n    const select = wrapper.find('[data-testid=\"rke2-custom-edit-psa\"]');\n\n    expect((select.vm as unknown as any).options[0].label).toStrictEqual(`${ label } (Current)`);\n  });\n\n  it.each([\n    ['anything', false, true],\n    ['', false, false],\n    ['', true, false],\n  ])('given CIS value as %p and its override as %p, it should set PSA dropdown as disabled %p', (cis, override, disabled) => {\n    const label = 'whatever';\n    const k8s = 'v1.25.0+rke2r1';\n    const wrapper = mount(Basics, {\n      propsData: {\n        mode:  'create',\n        value: {\n          agentConfig: { profile: cis, 'cloud-provider-name': '' },\n          spec:        {\n            ...defaultSpec,\n            defaultPodSecurityAdmissionConfigurationTemplateName: label,\n            kubernetesVersion:                                    k8s\n          }\n        },\n        provider:           'custom',\n        userChartValues:    {},\n        cisPsaChangeBanner: true,\n        allPsas:            [],\n        cisOverride:        override,\n        selectedVersion:    mockVersionOptions[0],\n        versionOptions:     [{\n          value:     k8s,\n          agentArgs: { profile: { options: [cis] } },\n          charts:    {},\n          profile:   { options: [cis] }\n        }],\n        isHarvesterDriver:           false,\n        isHarvesterIncompatible:     false,\n        showDeprecatedPatchVersions: false,\n        isElementalCluster:          false,\n        hasPsaTemplates:             true,\n        haveArgInfo:                 false,\n        showCni:                     true,\n        showCloudProvider:           true,\n        unsupportedCloudProvider:    false,\n        cloudProviderOptions:        [{ label: 'Default - RKE2 Embedded', value: '' }],\n      },\n      computed: { ...defaultComputed },\n      mocks:    {\n        ...defaultMocks,\n        $store: { getters: defaultGetters },\n      },\n      stubs: defaultStubs\n    });\n\n    const select = wrapper.find('[data-testid=\"rke2-custom-edit-psa\"]');\n\n    expect((select.vm as unknown as any).disabled).toBe(disabled);\n  });\n\n  describe('cilium CNI', () => {\n    it('should toggle ipv6 on/off with the legacy structure', async() => {\n      const wrapper = createBasicsTab('v1.23.0+rke2r1', {});\n      const ipv6Checkbox = wrapper.find('[data-testid=\"cluster-rke2-cni-ipv6-checkbox\"]');\n\n      expect(ipv6Checkbox.exists()).toBe(true);\n      expect(ipv6Checkbox.isVisible()).toBe(true);\n\n      // Click the checkbox - should enable ipv6\n      await ipv6Checkbox.find('label').trigger('click');\n      await ipv6Checkbox.vm.$nextTick();\n      await wrapper.vm.$nextTick();\n\n      // Check and update user values with the emitted value\n      let latest = (wrapper.emitted()['cilium-values-changed'] || [])[0][0];\n\n      expect(JSON.stringify(latest)).toStrictEqual(JSON.stringify(legacyOnValue));\n\n      await wrapper.setProps({ userChartValues: { 'rke2-cilium': latest } });\n\n      // Click the checkbox to turn ipv6 off again\n      await ipv6Checkbox.find('label').trigger('click');\n      await ipv6Checkbox.vm.$nextTick();\n      await wrapper.vm.$nextTick();\n\n      // Update from the emitted value\n      latest = (wrapper.emitted()['cilium-values-changed'] || [])[1][0];\n\n      expect(JSON.stringify(latest)).toStrictEqual(JSON.stringify(legacyOffValue));\n    });\n\n    it('should toggle ipv6 on/off with the new structure', async() => {\n      const wrapper = createBasicsTab('v1.25.0+rke2r1', {});\n      const ipv6Checkbox = wrapper.find('[data-testid=\"cluster-rke2-cni-ipv6-checkbox\"]');\n\n      expect(ipv6Checkbox.exists()).toBe(true);\n      expect(ipv6Checkbox.isVisible()).toBe(true);\n\n      // Click the checkbox - should enable ipv6\n      await ipv6Checkbox.find('label').trigger('click');\n      await ipv6Checkbox.vm.$nextTick();\n      await wrapper.vm.$nextTick();\n\n      // Check and update user values with the emitted value\n      let latest = (wrapper.emitted()['cilium-values-changed'] || [])[0][0];\n\n      expect(JSON.stringify(latest)).toStrictEqual(JSON.stringify(newOnValue));\n\n      await wrapper.setProps({ userChartValues: { 'rke2-cilium': latest } });\n\n      // Click the checkbox to turn ipv6 off again\n      await ipv6Checkbox.find('label').trigger('click');\n      await ipv6Checkbox.vm.$nextTick();\n      await wrapper.vm.$nextTick();\n\n      // Update from the emitted value\n      latest = (wrapper.emitted()['cilium-values-changed'] || [])[1][0];\n\n      expect(JSON.stringify(latest)).toStrictEqual(JSON.stringify(newOffValue));\n    });\n\n    it('should migrate when the k8s version is changed', async() => {\n      const userChartValues = { 'rke2-cilium': { ipv6: { enabled: true } } };\n      const wrapper = createBasicsTab('v1.25.0+rke2r1', userChartValues);\n\n      // Check that the checkbox is checked\n      const ipv6Checkbox = wrapper.find('[data-testid=\"cluster-rke2-cni-ipv6-checkbox\"]') as Checkbox;\n\n      expect(ipv6Checkbox.exists()).toBe(true);\n      expect(ipv6Checkbox.isVisible()).toBe(true);\n      expect(ipv6Checkbox.vm.value).toBe(true);\n\n      // Change the kubernetes version that needs the legacy format\n      const k8s123 = mockVersionOptions.find((v) => v.id === 'v1.23.0+rke2r1');\n\n      await wrapper.setProps({ selectedVersion: k8s123 });\n\n      let latest = (wrapper.emitted()['cilium-values-changed'] || [])[0][0];\n\n      expect(JSON.stringify(latest)).toStrictEqual(JSON.stringify(legacyOnValue));\n\n      // Change back the version so that the new format should be used\n      const k8s125 = mockVersionOptions.find((v) => v.id === 'v1.25.0+rke2r1');\n\n      await wrapper.setProps({ selectedVersion: k8s125 });\n\n      latest = (wrapper.emitted()['cilium-values-changed'] || [])[1][0];\n      expect(JSON.stringify(latest)).toStrictEqual(JSON.stringify(newOnValue));\n    });\n  });\n\n  it('should toggle bandwidth manager support on/off', async() => {\n    const wrapper = createBasicsTab('v1.25.0+rke2r1', {});\n    const bmCheckbox = wrapper.find('[data-testid=\"cluster-rke2-cni-cilium-bandwidth-manager-checkbox\"]');\n\n    expect(bmCheckbox.exists()).toBe(true);\n    expect(bmCheckbox.isVisible()).toBe(true);\n\n    // Click the checkbox - should enable bandwidth manager\n    await bmCheckbox.find('label').trigger('click');\n    await bmCheckbox.vm.$nextTick();\n    await wrapper.vm.$nextTick();\n\n    // Check and update user values with the emitted value\n    let latest = (wrapper.emitted()['cilium-values-changed'] || [])[0][0];\n\n    expect(JSON.stringify(latest)).toStrictEqual(JSON.stringify(bmOnValue));\n\n    await wrapper.setProps({ userChartValues: { 'rke2-cilium': latest } });\n\n    // Click the checkbox to turn ipv6 off again\n    await bmCheckbox.find('label').trigger('click');\n    await bmCheckbox.vm.$nextTick();\n    await wrapper.vm.$nextTick();\n\n    // Update from the emitted value\n    latest = (wrapper.emitted()['cilium-values-changed'] || [])[1][0];\n\n    expect(JSON.stringify(latest)).toStrictEqual(JSON.stringify(bmOffValue));\n  });\n\n  it('should support ipv6 and bandwidth manager', async() => {\n    const wrapper = createBasicsTab('v1.25.0+rke2r1', {});\n    const bmCheckbox = wrapper.find('[data-testid=\"cluster-rke2-cni-cilium-bandwidth-manager-checkbox\"]');\n    const ipv6Checkbox = wrapper.find('[data-testid=\"cluster-rke2-cni-ipv6-checkbox\"]');\n\n    // Click the checkbox - should enable bandwidth manager\n    await bmCheckbox.find('label').trigger('click');\n    await bmCheckbox.vm.$nextTick();\n    await wrapper.vm.$nextTick();\n\n    let latest = (wrapper.emitted()['cilium-values-changed'] || [])[0][0];\n\n    await wrapper.setProps({ userChartValues: { 'rke2-cilium': latest } });\n\n    // Click the checkbox - should enable ipv6\n    await ipv6Checkbox.find('label').trigger('click');\n    await ipv6Checkbox.vm.$nextTick();\n    await wrapper.vm.$nextTick();\n\n    // Check and update user values with the emitted value\n    latest = (wrapper.emitted()['cilium-values-changed'] || [])[1][0];\n\n    const combined = {\n      bandwidthManager: { enabled: true },\n      ipv6:             { enabled: true }\n    };\n\n    expect(JSON.stringify(latest)).toStrictEqual(JSON.stringify(combined));\n\n    // Check that other properties are preserved\n    latest = {\n      ...latest,\n      bandwidthManager: {\n        test:    true,\n        enabled: false\n      },\n      ipv6: {\n        test:    true,\n        enabled: false\n      }\n    };\n\n    await wrapper.setProps({ userChartValues: { 'rke2-cilium': latest } });\n\n    // Click the checkbox to turn bandwidth manager off again\n    await bmCheckbox.find('label').trigger('click');\n    await bmCheckbox.vm.$nextTick();\n    await wrapper.vm.$nextTick();\n\n    latest = (wrapper.emitted()['cilium-values-changed'] || [])[2][0];\n\n    const expected = '{\"bandwidthManager\":{\"test\":true,\"enabled\":true},\"ipv6\":{\"test\":true,\"enabled\":false}}';\n\n    expect(JSON.stringify(latest)).toStrictEqual(expected);\n  });\n});\n"]}]}