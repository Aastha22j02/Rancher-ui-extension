{"remainingRequest":"/home/ubuntu/suseconf/node_modules/ts-loader/index.js??ref--17-1!/home/ubuntu/suseconf/node_modules/@rancher/shell/edit/__tests__/management.cattle.io.setting.test.ts","dependencies":[{"path":"/home/ubuntu/suseconf/node_modules/@rancher/shell/edit/__tests__/management.cattle.io.setting.test.ts","mtime":1725338146566},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js","mtime":1725271298942},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/ts-loader/index.js","mtime":1725271299135}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgbW91bnQgfSBmcm9tICdAdnVlL3Rlc3QtdXRpbHMnOwppbXBvcnQgU2V0dGluZ3MgZnJvbSAnQHNoZWxsL2VkaXQvbWFuYWdlbWVudC5jYXR0bGUuaW8uc2V0dGluZy52dWUnOwppbXBvcnQgeyBTRVRUSU5HIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy9zZXR0aW5ncyc7CmRlc2NyaWJlKCd2aWV3OiBtYW5hZ2VtZW50LmNhdHRsZS5pby5zZXR0aW5nIHNob3VsZCcsICgpID0+IHsKICAgIGNvbnN0IHJlcXVpcmVkU2V0dXAgPSAoKSA9PiAoewogICAgICAgIC8vIFJlbW92ZSBhbGwgdGhlc2UgbW9ja3MgYWZ0ZXIgbWlncmF0aW9uIHRvIFZ1ZSAyLjcvMyBkdWUgbWl4aW4gbG9naWMKICAgICAgICBtb2NrczogewogICAgICAgICAgICAkc3RvcmU6IHsKICAgICAgICAgICAgICAgIGdldHRlcnM6IHsKICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RvcmU6ICgpID0+ICdjdXJyZW50X3N0b3JlJywKICAgICAgICAgICAgICAgICAgICAnY3VycmVudF9zdG9yZS9zY2hlbWFGb3InOiBqZXN0LmZuKCksCiAgICAgICAgICAgICAgICAgICAgJ2N1cnJlbnRfc3RvcmUvYWxsJzogamVzdC5mbigpLAogICAgICAgICAgICAgICAgICAgICdpMThuL3QnOiBqZXN0LmZuKCksCiAgICAgICAgICAgICAgICAgICAgJ2kxOG4vZXhpc3RzJzogamVzdC5mbigpLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGRpc3BhdGNoOiBqZXN0LmZuKCksCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgICRyb3V0ZTogeyBxdWVyeTogeyBBUzogJycgfSB9LAogICAgICAgICAgICAkcm91dGVyOiB7IGFwcGx5UXVlcnk6IGplc3QuZm4oKSB9LAogICAgICAgIH0KICAgIH0pOwogICAgaXQoJ2FsbG93aW5nIHRvIHNhdmUgaWYgbm8gcnVsZXMgaW4gc2V0dGluZ3MnLCAoKSA9PiB7CiAgICAgICAgY29uc3Qgd3JhcHBlciA9IG1vdW50KFNldHRpbmdzLCB7CiAgICAgICAgICAgIHByb3BzRGF0YTogeyB2YWx1ZTogeyB2YWx1ZTogJ2FueXRoaW5nJyB9IH0sCiAgICAgICAgICAgIGRhdGE6ICgpID0+ICh7IHNldHRpbmc6IHt9IH0pLAogICAgICAgICAgICAuLi5yZXF1aXJlZFNldHVwKCkKICAgICAgICB9KTsKICAgICAgICBjb25zdCBzYXZlQnV0dG9uID0gd3JhcHBlci5maW5kKCdbZGF0YS10ZXN0aWQ9ImZvcm0tc2F2ZSJdJykuZWxlbWVudDsKICAgICAgICBleHBlY3Qoc2F2ZUJ1dHRvbi5kaXNhYmxlZCkudG9CZShmYWxzZSk7CiAgICB9KTsKICAgIGRlc2NyaWJlKCd1c2luZyBwcmVkZWZpbmVkIGdlbmVyaWMgcnVsZScsICgpID0+IHsKICAgICAgICBjb25zdCBpZCA9IFNFVFRJTkcuUEFTU1dPUkRfTUlOX0xFTkdUSDsKICAgICAgICBkZXNjcmliZSgndmFsaWRhdGUgaW5wdXQgd2l0aCBwcm92aWRlZCBzZXR0aW5ncycsICgpID0+IHsKICAgICAgICAgICAgaXQoJ2FsbG93aW5nIHRvIHNhdmUgaWYgcGFzcycsICgpID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IHdyYXBwZXIgPSBtb3VudChTZXR0aW5ncywgewogICAgICAgICAgICAgICAgICAgIHByb3BzRGF0YTogeyB2YWx1ZTogeyBpZCwgdmFsdWU6ICczJyB9IH0sCiAgICAgICAgICAgICAgICAgICAgLi4ucmVxdWlyZWRTZXR1cCgpCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGNvbnN0IHNhdmVCdXR0b24gPSB3cmFwcGVyLmZpbmQoJ1tkYXRhLXRlc3RpZD0iZm9ybS1zYXZlIl0nKS5lbGVtZW50OwogICAgICAgICAgICAgICAgZXhwZWN0KHNhdmVCdXR0b24uZGlzYWJsZWQpLnRvQmUoZmFsc2UpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgLy8gVE9ETzogVGVzdCByZXN1bHRzIGluY29ycmVjdGx5IGZhbHNlLCBidXQgaXQncyBub3QgcG9zc2libGUgdG8gaWRlbnRpZnkgdGhlIHJlYXNvbiBhbmQgcmVxdWlyZWQgcHJlbWlzZXMKICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGplc3Qvbm8tZGlzYWJsZWQtdGVzdHMKICAgICAgICAgICAgaXQuc2tpcCgncHJldmVudGluZyB0byBzYXZlIGlmIGFueSBlcnJvcicsICgpID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IHdyYXBwZXIgPSBtb3VudChTZXR0aW5ncywgewogICAgICAgICAgICAgICAgICAgIHByb3BzRGF0YTogeyB2YWx1ZTogeyBpZCwgdmFsdWU6ICcxJyB9IH0sCiAgICAgICAgICAgICAgICAgICAgLi4ucmVxdWlyZWRTZXR1cCgpCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGNvbnN0IHNhdmVCdXR0b24gPSB3cmFwcGVyLmZpbmQoJ1tkYXRhLXRlc3RpZD0iZm9ybS1zYXZlIl0nKS5lbGVtZW50OwogICAgICAgICAgICAgICAgZXhwZWN0KHNhdmVCdXR0b24uZGlzYWJsZWQpLnRvQmUodHJ1ZSk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICAgIGl0KCdyZXRyaWV2ZSBjb3JyZWN0IHJ1bGVzIGJhc2VkIG9uIHNldHRpbmdzJywgKCkgPT4gewogICAgICAgICAgICBjb25zdCB3cmFwcGVyID0gbW91bnQoU2V0dGluZ3MsIHsKICAgICAgICAgICAgICAgIHByb3BzRGF0YTogeyB2YWx1ZTogeyBpZCwgdmFsdWU6ICcnIH0gfSwKICAgICAgICAgICAgICAgIC4uLnJlcXVpcmVkU2V0dXAoKQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY29uc3QgZXhwZWN0YXRpb24gPSBbewogICAgICAgICAgICAgICAgICAgIHBhdGg6ICd2YWx1ZScsCiAgICAgICAgICAgICAgICAgICAgcnVsZXM6IFsnYmV0d2VlblZhbHVlcycsICdpc0ludGVnZXInLCAnaXNQb3NpdGl2ZScsICdpc09jdGFsJ10KICAgICAgICAgICAgICAgIH1dOwogICAgICAgICAgICBleHBlY3Qod3JhcHBlci52bS4kZGF0YVsnZnZGb3JtUnVsZVNldHMnXSkudG9TdHJpY3RFcXVhbChleHBlY3RhdGlvbik7CiAgICAgICAgfSk7CiAgICAgICAgaXQoJ2dlbmVyYXRlIGV4dHJhIHJ1bGVzIGJhc2VkIG9uIHNldHRpbmdzJywgKCkgPT4gewogICAgICAgICAgICBjb25zdCB3cmFwcGVyID0gbW91bnQoU2V0dGluZ3MsIHsKICAgICAgICAgICAgICAgIHByb3BzRGF0YTogeyB2YWx1ZTogeyBpZCwgdmFsdWU6ICcnIH0gfSwKICAgICAgICAgICAgICAgIC4uLnJlcXVpcmVkU2V0dXAoKQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY29uc3QgZXhwZWN0YXRpb24gPSBbJ2JldHdlZW5WYWx1ZXMnLCAnaXNJbnRlZ2VyJywgJ2lzUG9zaXRpdmUnLCAnaXNPY3RhbCddOwogICAgICAgICAgICAvLyBBdm9pZCBpbnRlZ3JhdGlvbiB0ZXN0cyB3aXRoIG1peGluIGFzIGl0IHJldHVybnMgdGhlIHdob2xlIGZ1bmN0aW9uCiAgICAgICAgICAgIGNvbnN0IHJ1bGVzID0gT2JqZWN0LmtleXMod3JhcHBlci52bVsnZnZFeHRyYVJ1bGVzJ10pOwogICAgICAgICAgICBleHBlY3QocnVsZXMpLnRvU3RyaWN0RXF1YWwoZXhwZWN0YXRpb24pOwogICAgICAgIH0pOwogICAgfSk7Cn0pOwo="},{"version":3,"file":"/home/ubuntu/suseconf/node_modules/@rancher/shell/edit/__tests__/management.cattle.io.setting.test.ts","sourceRoot":"","sources":["/home/ubuntu/suseconf/node_modules/@rancher/shell/edit/__tests__/management.cattle.io.setting.test.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,KAAK,EAAE,MAAM,iBAAiB,CAAC;AACxC,OAAO,QAAQ,MAAM,8CAA8C,CAAC;AACpE,OAAO,EAAE,OAAO,EAAE,MAAM,wBAAwB,CAAC;AAEjD,QAAQ,CAAC,2CAA2C,EAAE,GAAG,EAAE;IACzD,MAAM,aAAa,GAAG,GAAG,EAAE,CAAC,CAAC;QAC3B,sEAAsE;QACtE,KAAK,EAAE;YACL,MAAM,EAAE;gBACN,OAAO,EAAE;oBACP,YAAY,EAAe,GAAG,EAAE,CAAC,eAAe;oBAChD,yBAAyB,EAAE,IAAI,CAAC,EAAE,EAAE;oBACpC,mBAAmB,EAAQ,IAAI,CAAC,EAAE,EAAE;oBACpC,QAAQ,EAAmB,IAAI,CAAC,EAAE,EAAE;oBACpC,aAAa,EAAc,IAAI,CAAC,EAAE,EAAE;iBACrC;gBACD,QAAQ,EAAE,IAAI,CAAC,EAAE,EAAE;aACpB;YACD,MAAM,EAAG,EAAE,KAAK,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE;YAC9B,OAAO,EAAE,EAAE,UAAU,EAAE,IAAI,CAAC,EAAE,EAAE,EAAE;SACnC;KACF,CAAC,CAAC;IAEH,EAAE,CAAC,0CAA0C,EAAE,GAAG,EAAE;QAClD,MAAM,OAAO,GAAG,KAAK,CAAC,QAAQ,EAAE;YAC9B,SAAS,EAAE,EAAE,KAAK,EAAE,EAAE,KAAK,EAAE,UAAU,EAAE,EAAE;YAC3C,IAAI,EAAO,GAAG,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,EAAG,EAAE,CAAC;YACnC,GAAG,aAAa,EAAE;SACnB,CAAC,CAAC;QACH,MAAM,UAAU,GAAG,OAAO,CAAC,IAAI,CAAC,2BAA2B,CAAC,CAAC,OAA2B,CAAC;QAEzF,MAAM,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IAC1C,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,+BAA+B,EAAE,GAAG,EAAE;QAC7C,MAAM,EAAE,GAAG,OAAO,CAAC,mBAAmB,CAAC;QAEvC,QAAQ,CAAC,uCAAuC,EAAE,GAAG,EAAE;YACrD,EAAE,CAAC,0BAA0B,EAAE,GAAG,EAAE;gBAClC,MAAM,OAAO,GAAG,KAAK,CAAC,QAAQ,EAAE;oBAC9B,SAAS,EAAE,EAAE,KAAK,EAAE,EAAE,EAAE,EAAE,KAAK,EAAE,GAAG,EAAE,EAAE;oBACxC,GAAG,aAAa,EAAE;iBACnB,CAAC,CAAC;gBACH,MAAM,UAAU,GAAG,OAAO,CAAC,IAAI,CAAC,2BAA2B,CAAC,CAAC,OAA2B,CAAC;gBAEzF,MAAM,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;YAC1C,CAAC,CAAC,CAAC;YAEH,2GAA2G;YAC3G,kDAAkD;YAClD,EAAE,CAAC,IAAI,CAAC,iCAAiC,EAAE,GAAG,EAAE;gBAC9C,MAAM,OAAO,GAAG,KAAK,CAAC,QAAQ,EAAE;oBAC9B,SAAS,EAAE,EAAE,KAAK,EAAE,EAAE,EAAE,EAAE,KAAK,EAAE,GAAG,EAAE,EAAE;oBACxC,GAAG,aAAa,EAAE;iBACnB,CAAC,CAAC;gBACH,MAAM,UAAU,GAAG,OAAO,CAAC,IAAI,CAAC,2BAA2B,CAAC,CAAC,OAA2B,CAAC;gBAEzF,MAAM,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YACzC,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,0CAA0C,EAAE,GAAG,EAAE;YAClD,MAAM,OAAO,GAAG,KAAK,CAAC,QAAQ,EAAE;gBAC9B,SAAS,EAAE,EAAE,KAAK,EAAE,EAAE,EAAE,EAAE,KAAK,EAAE,EAAE,EAAE,EAAE;gBACvC,GAAG,aAAa,EAAE;aACnB,CAAC,CAAC;YACH,MAAM,WAAW,GAAG,CAAC;oBACnB,IAAI,EAAG,OAAO;oBACd,KAAK,EAAE,CAAC,eAAe,EAAE,WAAW,EAAE,YAAY,EAAE,SAAS,CAAC;iBAC/D,CAAC,CAAC;YAEH,MAAM,CAAC,OAAO,CAAC,EAAE,CAAC,KAAK,CAAC,gBAAgB,CAAC,CAAC,CAAC,aAAa,CAAC,WAAW,CAAC,CAAC;QACxE,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,wCAAwC,EAAE,GAAG,EAAE;YAChD,MAAM,OAAO,GAAG,KAAK,CAAC,QAAQ,EAAE;gBAC9B,SAAS,EAAE,EAAE,KAAK,EAAE,EAAE,EAAE,EAAE,KAAK,EAAE,EAAE,EAAE,EAAE;gBACvC,GAAG,aAAa,EAAE;aACnB,CAAC,CAAC;YACH,MAAM,WAAW,GAAG,CAAC,eAAe,EAAE,WAAW,EAAE,YAAY,EAAE,SAAS,CAAC,CAAC;YAE5E,sEAAsE;YACtE,MAAM,KAAK,GAAG,MAAM,CAAC,IAAI,CAAE,OAAO,CAAC,EAAU,CAAC,cAAc,CAAC,CAAC,CAAC;YAE/D,MAAM,CAAC,KAAK,CAAC,CAAC,aAAa,CAAC,WAAW,CAAC,CAAC;QAC3C,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;AACL,CAAC,CAAC,CAAC","sourcesContent":["import { mount } from '@vue/test-utils';\nimport Settings from '@shell/edit/management.cattle.io.setting.vue';\nimport { SETTING } from '@shell/config/settings';\n\ndescribe('view: management.cattle.io.setting should', () => {\n  const requiredSetup = () => ({\n    // Remove all these mocks after migration to Vue 2.7/3 due mixin logic\n    mocks: {\n      $store: {\n        getters: {\n          currentStore:              () => 'current_store',\n          'current_store/schemaFor': jest.fn(),\n          'current_store/all':       jest.fn(),\n          'i18n/t':                  jest.fn(),\n          'i18n/exists':             jest.fn(),\n        },\n        dispatch: jest.fn(),\n      },\n      $route:  { query: { AS: '' } },\n      $router: { applyQuery: jest.fn() },\n    }\n  });\n\n  it('allowing to save if no rules in settings', () => {\n    const wrapper = mount(Settings, {\n      propsData: { value: { value: 'anything' } },\n      data:      () => ({ setting: { } }),\n      ...requiredSetup()\n    });\n    const saveButton = wrapper.find('[data-testid=\"form-save\"]').element as HTMLInputElement;\n\n    expect(saveButton.disabled).toBe(false);\n  });\n\n  describe('using predefined generic rule', () => {\n    const id = SETTING.PASSWORD_MIN_LENGTH;\n\n    describe('validate input with provided settings', () => {\n      it('allowing to save if pass', () => {\n        const wrapper = mount(Settings, {\n          propsData: { value: { id, value: '3' } },\n          ...requiredSetup()\n        });\n        const saveButton = wrapper.find('[data-testid=\"form-save\"]').element as HTMLInputElement;\n\n        expect(saveButton.disabled).toBe(false);\n      });\n\n      // TODO: Test results incorrectly false, but it's not possible to identify the reason and required premises\n      // eslint-disable-next-line jest/no-disabled-tests\n      it.skip('preventing to save if any error', () => {\n        const wrapper = mount(Settings, {\n          propsData: { value: { id, value: '1' } },\n          ...requiredSetup()\n        });\n        const saveButton = wrapper.find('[data-testid=\"form-save\"]').element as HTMLInputElement;\n\n        expect(saveButton.disabled).toBe(true);\n      });\n    });\n\n    it('retrieve correct rules based on settings', () => {\n      const wrapper = mount(Settings, {\n        propsData: { value: { id, value: '' } },\n        ...requiredSetup()\n      });\n      const expectation = [{\n        path:  'value',\n        rules: ['betweenValues', 'isInteger', 'isPositive', 'isOctal']\n      }];\n\n      expect(wrapper.vm.$data['fvFormRuleSets']).toStrictEqual(expectation);\n    });\n\n    it('generate extra rules based on settings', () => {\n      const wrapper = mount(Settings, {\n        propsData: { value: { id, value: '' } },\n        ...requiredSetup()\n      });\n      const expectation = ['betweenValues', 'isInteger', 'isPositive', 'isOctal'];\n\n      // Avoid integration tests with mixin as it returns the whole function\n      const rules = Object.keys((wrapper.vm as any)['fvExtraRules']);\n\n      expect(rules).toStrictEqual(expectation);\n    });\n  });\n});\n"]}]}