{"remainingRequest":"/home/ubuntu/suseconf/node_modules/ts-loader/index.js??ref--17-1!/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/ubuntu/suseconf/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ubuntu/suseconf/node_modules/@rancher/shell/edit/management.cattle.io.podsecurityadmissionconfigurationtemplate.vue?vue&type=script&lang=ts","dependencies":[{"path":"/home/ubuntu/suseconf/node_modules/@rancher/shell/edit/management.cattle.io.podsecurityadmissionconfigurationtemplate.vue","mtime":1725338146566},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js","mtime":1725271298942},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/ts-loader/index.js","mtime":1725271299135},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1725271300920}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgZGVmaW5lQ29tcG9uZW50IH0gZnJvbSAndnVlJzsKaW1wb3J0IENyZWF0ZUVkaXRWaWV3IGZyb20gJ0BzaGVsbC9taXhpbnMvY3JlYXRlLWVkaXQtdmlldyc7CmltcG9ydCBDcnVSZXNvdXJjZSBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9DcnVSZXNvdXJjZS52dWUnOwppbXBvcnQgUG9kU2VjdXJpdHlBZG1pc3Npb24gZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvUG9kU2VjdXJpdHlBZG1pc3Npb24udnVlJzsKaW1wb3J0IExvYWRpbmcgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvTG9hZGluZy52dWUnOwppbXBvcnQgTmFtZU5zRGVzY3JpcHRpb24gZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvZm9ybS9OYW1lTnNEZXNjcmlwdGlvbi52dWUnOwppbXBvcnQgeyBQU0FEaW1lbnNpb25zIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy9wb2Qtc2VjdXJpdHktYWRtaXNzaW9uJzsKaW1wb3J0IHsgTUFOQUdFTUVOVCB9IGZyb20gJ0BzaGVsbC9jb25maWcvdHlwZXMnOwpleHBvcnQgZGVmYXVsdCBkZWZpbmVDb21wb25lbnQoewogICAgbWl4aW5zOiBbQ3JlYXRlRWRpdFZpZXddLAogICAgY29tcG9uZW50czogewogICAgICAgIENydVJlc291cmNlLAogICAgICAgIExvYWRpbmcsCiAgICAgICAgTmFtZU5zRGVzY3JpcHRpb24sCiAgICAgICAgUG9kU2VjdXJpdHlBZG1pc3Npb24sCiAgICB9LAogICAgYXN5bmMgZmV0Y2goKSB7CiAgICAgICAgYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ21hbmFnZW1lbnQvZmluZEFsbCcsIHsgdHlwZTogTUFOQUdFTUVOVC5QU0EgfSk7CiAgICB9LAogICAgcHJvcHM6IHsKICAgICAgICB2YWx1ZTogewogICAgICAgICAgICB0eXBlOiBPYmplY3QsCiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgICBkZWZhdWx0OiAoKSA9PiAoe30pCiAgICAgICAgfSwKICAgICAgICBtb2RlOiB7CiAgICAgICAgICAgIHR5cGU6IFN0cmluZywKICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgfQogICAgfSwKICAgIGNvbXB1dGVkOiB7CiAgICAgICAgLyoqCiAgICAgICAgICogR2V0IG9yIGluaXRpYWxpemUgZXhlbXB0aW9ucyBpZiBub25lCiAgICAgICAgICovCiAgICAgICAgZXhlbXB0aW9ucygpIHsKICAgICAgICAgICAgdmFyIF9hLCBfYjsKICAgICAgICAgICAgcmV0dXJuICgoX2IgPSAoX2EgPSB0aGlzLnZhbHVlKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuY29uZmlndXJhdGlvbikgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmV4ZW1wdGlvbnMpIHx8IHt9OwogICAgICAgIH0sCiAgICAgICAgLyoqCiAgICAgICAgICogR2V0IG9yIGluaXRpYWxpemUgZGVmYXVsdHMgbGFiZWxzIGlmIG5vbmUKICAgICAgICAgKi8KICAgICAgICBkZWZhdWx0cygpIHsKICAgICAgICAgICAgdmFyIF9hLCBfYjsKICAgICAgICAgICAgcmV0dXJuICgoX2IgPSAoX2EgPSB0aGlzLnZhbHVlKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuY29uZmlndXJhdGlvbikgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmRlZmF1bHRzKSB8fCB7fTsKICAgICAgICB9LAogICAgfSwKICAgIG1ldGhvZHM6IHsKICAgICAgICAvKioKICAgICAgICAgKiBSZXBsYWNlIGV4ZW1wdGlvbiB3aXRoIG5ldyB2YWx1ZXMKICAgICAgICAgKi8KICAgICAgICBzZXRFeGVtcHRpb25zKGV4ZW1wdGlvbnMpIHsKICAgICAgICAgICAgdGhpcy52YWx1ZS5jb25maWd1cmF0aW9uLmV4ZW1wdGlvbnMgPSBleGVtcHRpb25zOwogICAgICAgIH0sCiAgICAgICAgLyoqCiAgICAgICAgICogUmVwbGFjZSBkZWZhdWx0cyB3aXRoIG5ldyB2YWx1ZXMKICAgICAgICAgKi8KICAgICAgICBzZXREZWZhdWx0cyhsYWJlbHMpIHsKICAgICAgICAgICAgdGhpcy52YWx1ZS5jb25maWd1cmF0aW9uLmRlZmF1bHRzID0gbGFiZWxzOwogICAgICAgIH0sCiAgICB9LAogICAgY3JlYXRlZCgpIHsKICAgICAgICAvLyBJbml0aWFsaXplIGNvbmZpZ3VyYXRpb24gaWYgbm9uZSwgYXMgZGVmYXVsdCB2YWx1ZSByZXNvdXJjZSBjYXNlCiAgICAgICAgaWYgKCF0aGlzLnZhbHVlLmNvbmZpZ3VyYXRpb24pIHsKICAgICAgICAgICAgdGhpcy52YWx1ZS5jb25maWd1cmF0aW9uID0gewogICAgICAgICAgICAgICAgZGVmYXVsdHM6IHt9LAogICAgICAgICAgICAgICAgZXhlbXB0aW9uczogT2JqZWN0LmFzc2lnbih7fSwgLi4uUFNBRGltZW5zaW9ucy5tYXAoKGRpbWVuc2lvbikgPT4gKHsgW2RpbWVuc2lvbl06IFtdIH0pKSksCiAgICAgICAgICAgIH07CiAgICAgICAgfQogICAgfQp9KTsK"},{"version":3,"file":"/home/ubuntu/suseconf/node_modules/@rancher/shell/edit/management.cattle.io.podsecurityadmissionconfigurationtemplate.vue.tsx","sourceRoot":"","sources":["/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/ubuntu/suseconf/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ubuntu/suseconf/node_modules/@rancher/shell/edit/management.cattle.io.podsecurityadmissionconfigurationtemplate.vue?vue&type=script&lang=ts"],"names":[],"mappings":"AACA,OAAO,EAAY,eAAe,EAAE,MAAM,KAAK,CAAC;AAChD,OAAO,cAAc,MAAM,gCAAgC,CAAC;AAC5D,OAAO,WAAW,MAAM,mCAAmC,CAAC;AAC5D,OAAO,oBAAoB,MAAM,4CAA4C,CAAC;AAC9E,OAAO,OAAO,MAAM,+BAA+B,CAAC;AACpD,OAAO,iBAAiB,MAAM,8CAA8C,CAAC;AAE7E,OAAO,EAAE,aAAa,EAAE,MAAM,sCAAsC,CAAC;AACrE,OAAO,EAAE,UAAU,EAAE,MAAM,qBAAqB,CAAC;AAEjD,eAAe,eAAe,CAAC;IAC7B,MAAM,EAAM,CAAC,cAAc,CAAC;IAC5B,UAAU,EAAE;QACV,WAAW;QACX,OAAO;QACP,iBAAiB;QACjB,oBAAoB;KACrB;IAED,KAAK,CAAC,KAAK;QACT,MAAM,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,oBAAoB,EAAE,EAAE,IAAI,EAAE,UAAU,CAAC,GAAG,EAAE,CAAC,CAAC;IAC7E,CAAC;IAED,KAAK,EAAE;QACL,KAAK,EAAE;YACL,IAAI,EAAM,MAAuB;YACjC,QAAQ,EAAE,IAAI;YACd,OAAO,EAAG,GAAG,EAAE,CAAC,CAAC,EAAE,CAAQ;SAC5B;QAED,IAAI,EAAE;YACJ,IAAI,EAAM,MAAM;YAChB,QAAQ,EAAE,IAAI;SACf;KACF;IACD,QAAQ,EAAE;QACR;;WAEG;QACH,UAAU;;YACR,OAAO,CAAA,MAAA,MAAA,IAAI,CAAC,KAAK,0CAAE,aAAa,0CAAE,UAAU,KAAI,EAAE,CAAC;QACrD,CAAC;QAED;;WAEG;QACH,QAAQ;;YACN,OAAO,CAAA,MAAA,MAAA,IAAI,CAAC,KAAK,0CAAE,aAAa,0CAAE,QAAQ,KAAI,EAAE,CAAC;QACnD,CAAC;KACF;IAED,OAAO,EAAE;QACP;;WAEG;QACH,aAAa,CAAC,UAAyB;YACrC,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,UAAU,GAAG,UAAU,CAAC;QACnD,CAAC;QAED;;WAEG;QACH,WAAW,CAAC,MAAmB;YAC7B,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,QAAQ,GAAG,MAAM,CAAC;QAC7C,CAAC;KACF;IAED,OAAO;QACL,mEAAmE;QACnE,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,aAAa,EAAE;YAC7B,IAAI,CAAC,KAAK,CAAC,aAAa,GAAG;gBACzB,QAAQ,EAAI,EAAE;gBACd,UAAU,EAAE,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,GAAG,aAAa,CAAC,GAAG,CAAC,CAAC,SAAS,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,SAAS,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,CAAC;aAC7E,CAAC;SAChB;IACH,CAAC;CACF,CAAC,CAAC","sourcesContent":["\nimport { PropType, defineComponent } from 'vue';\nimport CreateEditView from '@shell/mixins/create-edit-view';\nimport CruResource from '@shell/components/CruResource.vue';\nimport PodSecurityAdmission from '@shell/components/PodSecurityAdmission.vue';\nimport Loading from '@shell/components/Loading.vue';\nimport NameNsDescription from '@shell/components/form/NameNsDescription.vue';\nimport { PSA, PSAConfig, PSADefaults, PSAExemptions } from '@shell/types/resources/pod-security-admission';\nimport { PSADimensions } from '@shell/config/pod-security-admission';\nimport { MANAGEMENT } from '@shell/config/types';\n\nexport default defineComponent({\n  mixins:     [CreateEditView],\n  components: {\n    CruResource,\n    Loading,\n    NameNsDescription,\n    PodSecurityAdmission,\n  },\n\n  async fetch() {\n    await this.$store.dispatch('management/findAll', { type: MANAGEMENT.PSA });\n  },\n\n  props: {\n    value: {\n      type:     Object as PropType<PSA>,\n      required: true,\n      default:  () => ({}) as PSA\n    },\n\n    mode: {\n      type:     String,\n      required: true,\n    }\n  },\n  computed: {\n    /**\n     * Get or initialize exemptions if none\n     */\n    exemptions(): PSAExemptions {\n      return this.value?.configuration?.exemptions || {};\n    },\n\n    /**\n     * Get or initialize defaults labels if none\n     */\n    defaults(): PSADefaults {\n      return this.value?.configuration?.defaults || {};\n    },\n  },\n\n  methods: {\n    /**\n     * Replace exemption with new values\n     */\n    setExemptions(exemptions: PSAExemptions) {\n      this.value.configuration.exemptions = exemptions;\n    },\n\n    /**\n     * Replace defaults with new values\n     */\n    setDefaults(labels: PSADefaults) {\n      this.value.configuration.defaults = labels;\n    },\n  },\n\n  created() {\n    // Initialize configuration if none, as default value resource case\n    if (!this.value.configuration) {\n      this.value.configuration = {\n        defaults:   {},\n        exemptions: Object.assign({}, ...PSADimensions.map((dimension) => ({ [dimension]: [] }))),\n      } as PSAConfig;\n    }\n  }\n});\n"]}]}