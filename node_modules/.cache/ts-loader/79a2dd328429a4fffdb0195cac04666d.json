{"remainingRequest":"/home/ubuntu/suseconf/node_modules/ts-loader/index.js??ref--17-1!/home/ubuntu/suseconf/node_modules/@rancher/shell/edit/provisioning.cattle.io.cluster/__tests__/rke2.test.ts","dependencies":[{"path":"/home/ubuntu/suseconf/node_modules/@rancher/shell/edit/provisioning.cattle.io.cluster/__tests__/rke2.test.ts","mtime":1725338146566},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js","mtime":1725271298942},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/ts-loader/index.js","mtime":1725271299135}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgbW91bnQsIHNoYWxsb3dNb3VudCB9IGZyb20gJ0B2dWUvdGVzdC11dGlscyc7CmltcG9ydCB7IFNFQ1JFVCB9IGZyb20gJ0BzaGVsbC9jb25maWcvdHlwZXMnOwppbXBvcnQgeyBfQ1JFQVRFIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy9xdWVyeS1wYXJhbXMnOwppbXBvcnQgcmtlMiBmcm9tICdAc2hlbGwvZWRpdC9wcm92aXNpb25pbmcuY2F0dGxlLmlvLmNsdXN0ZXIvcmtlMi52dWUnOwovKioKICogRElTQ0xBSU1FUiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKICogRGVjbGFyYXRpb25zIHNob3VsZCBub3QgYmUgZG9uZSBvdXRzaWRlIHRoZSB0ZXN0cyEhCiAqIFRoaXMgY29tcG9uZW50IGlzIG92ZXJ3aGVsbWluZyBmb3IgdGVzdCBhbmQgcmVxdWlyZXMgdG9vIG11Y2ggaW5pdGlhbGl6YXRpb24uCiAqIEluIHRoaXMgd2F5IHRoZSB0ZXN0cyBhcmUgbW9yZSByZWFkYWJsZSBhbmQgd2UgY2FuIGF2b2lkIGFubm95aW5nIHJlcGV0aXRpb25zLgogKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogKi8KY29uc3QgZGVmYXVsdFN0dWJzID0gewogICAgQ3J1UmVzb3VyY2U6IHsgdGVtcGxhdGU6ICc8ZGl2PjxzbG90Pjwvc2xvdD48L2Rpdj4nIH0sCiAgICBCYW5uZXI6IHRydWUsCiAgICBMYWJlbGVkU2VsZWN0OiB0cnVlLAogICAgQUNFOiB0cnVlLAogICAgQWdlbnRFbnY6IHRydWUsCiAgICBBZ2VudENvbmZpZ3VyYXRpb246IHRydWUsCiAgICBBcnJheUxpc3Q6IHRydWUsCiAgICBBcnJheUxpc3RHcm91cGVkOiB0cnVlLAogICAgQmFkZ2VTdGF0ZTogdHJ1ZSwKICAgIENoZWNrYm94OiB0cnVlLAogICAgQ2x1c3Rlck1lbWJlcnNoaXBFZGl0b3I6IHRydWUsCiAgICBEcmFpbk9wdGlvbnM6IHRydWUsCiAgICBMYWJlbGVkSW5wdXQ6IHRydWUsCiAgICBMYWJlbHM6IHRydWUsCiAgICBMb2FkaW5nOiB0cnVlLAogICAgTWFjaGluZVBvb2w6IHRydWUsCiAgICBNYXRjaEV4cHJlc3Npb25zOiB0cnVlLAogICAgTmFtZU5zRGVzY3JpcHRpb246IHRydWUsCiAgICBRdWVzdGlvbnM6IHRydWUsCiAgICBSYWRpb0dyb3VwOiB0cnVlLAogICAgUmVnaXN0cnlDb25maWdzOiB0cnVlLAogICAgUmVnaXN0cnlNaXJyb3JzOiB0cnVlLAogICAgUzNDb25maWc6IHRydWUsCiAgICBTZWxlY3RDcmVkZW50aWFsOiB0cnVlLAogICAgU2VsZWN0T3JDcmVhdGVBdXRoU2VjcmV0OiB0cnVlLAogICAgVGFiOiB0cnVlLAogICAgVGFiYmVkOiB0cnVlLAogICAgVW5pdElucHV0OiB0cnVlLAogICAgWWFtbEVkaXRvcjogdHJ1ZSwKICAgIE1lbWJlclJvbGVzOiB0cnVlLAogICAgQmFzaWNzOiB0cnVlLAogICAgRXRjZDogdHJ1ZSwKICAgIE5ldHdvcmtpbmc6IHRydWUsCiAgICBVcGdyYWRlOiB0cnVlLAogICAgUmVnaXN0cmllczogdHJ1ZSwKICAgIEFkZE9uQ29uZmlnOiB0cnVlLAogICAgQWR2YW5jZWQ6IHRydWUKfTsKY29uc3QgbW9ja0FnZW50QXJncyA9IHsgJ2Nsb3VkLXByb3ZpZGVyLW5hbWUnOiB7IG9wdGlvbnM6IFtdLCBwcm9maWxlOiB7IG9wdGlvbnM6IFt7IGFueXRoaW5nOiAneWVzJyB9XSB9IH0gfTsKY29uc3QgZGVmYXVsdENvbXB1dGVkID0gewogICAgc2hvd0Zvcm0oKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9LAogICAgdmVyc2lvbk9wdGlvbnMoKSB7CiAgICAgICAgcmV0dXJuIFsKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgaWQ6ICd2MS4yNS4wK3JrZTJyMScsIHZhbHVlOiAndjEuMjUuMCtya2UycjEnLCBzZXJ2ZXJBcmdzOiB7fSwgYWdlbnRBcmdzOiBtb2NrQWdlbnRBcmdzLCBjaGFydHM6IHt9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGlkOiAndjEuMjQuMCtya2UycjEnLCB2YWx1ZTogJ3YxLjI0LjArcmtlMnIxJywgc2VydmVyQXJnczoge30sIGFnZW50QXJnczogbW9ja0FnZW50QXJncywgY2hhcnRzOiB7fQogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBpZDogJ3YxLjIzLjArcmtlMnIxJywgdmFsdWU6ICd2MS4yMy4wK3JrZTJyMScsIHNlcnZlckFyZ3M6IHt9LCBhZ2VudEFyZ3M6IG1vY2tBZ2VudEFyZ3MsIGNoYXJ0czoge30KICAgICAgICAgICAgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgaWQ6ICd2MS4yNS4wK2szczEnLCB2YWx1ZTogJ3YxLjI1LjArazNzMScsIHNlcnZlckFyZ3M6IHt9LCBhZ2VudEFyZ3M6IG1vY2tBZ2VudEFyZ3MsIGNoYXJ0czoge30KICAgICAgICAgICAgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgaWQ6ICd2MS4yNC4wK2szczEnLCB2YWx1ZTogJ3YxLjI0LjArazNzMScsIHNlcnZlckFyZ3M6IHt9LCBhZ2VudEFyZ3M6IG1vY2tBZ2VudEFyZ3MsIGNoYXJ0czoge30KICAgICAgICAgICAgfQogICAgICAgIF07CiAgICB9Cn07CmNvbnN0IGRlZmF1bHRHZXR0ZXJzID0gewogICAgY3VycmVudFN0b3JlOiAoKSA9PiAnY3VycmVudF9zdG9yZScsCiAgICAnbWFuYWdlbWVudC9zY2hlbWFGb3InOiBqZXN0LmZuKCksCiAgICAnY3VycmVudF9zdG9yZS9hbGwnOiBqZXN0LmZuKCksCiAgICAnaTE4bi90JzogamVzdC5mbigpLAogICAgJ2kxOG4vd2l0aEZhbGxiYWNrJzogamVzdC5mbigpLAogICAgJ3BsdWdpbnMvY2xvdWRQcm92aWRlckZvckRyaXZlcic6IGplc3QuZm4oKSwKICAgICdjdXN0b21pemF0aW9uL2dldFByZXZpZXdDbHVzdGVyJzogamVzdC5mbigpLAp9Owpjb25zdCBkZWZhdWx0TW9ja3MgPSB7CiAgICAkZmV0Y2hTdGF0ZTogeyBwZW5kaW5nOiBmYWxzZSB9LAogICAgJHJvdXRlOiB7CiAgICAgICAgbmFtZTogJ2FueXRoaW5nJywKICAgICAgICBxdWVyeTogeyBBUzogJ3lhbWwnIH0sCiAgICB9LAp9Owpjb25zdCBkZWZhdWx0U3BlYyA9IHsKICAgIHJrZUNvbmZpZzogeyBldGNkOiB7IGRpc2FibGVTbmFwc2hvdHM6IGZhbHNlIH0gfSwKICAgIGNoYXJ0VmFsdWVzOiB7fSwKfTsKZGVzY3JpYmUoJ2NvbXBvbmVudDogcmtlMicsICgpID0+IHsKICAgIC8qKgogICAgICogRElTQ0xBSU1FUiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKICAgICAqIExvZ3MgYXJlIHByZXZlbnRlZCB0byBhdm9pZCBwb2xsdXRpbmcgdGhlIHRlc3Qgb3V0cHV0LgogICAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKICAgICovCiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgamVzdC9uby1ob29rcwogICAgYmVmb3JlRWFjaCgoKSA9PiB7CiAgICAgICAgamVzdC5zcHlPbihjb25zb2xlLCAnbG9nJykubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+IHsgfSk7CiAgICB9KTsKICAgIGl0LmVhY2goWwogICAgICAgIFsnY3VzdG9tJywgdHJ1ZV0sCiAgICAgICAgWydhbnl0aGluZyBlbHNlJywgZmFsc2VdIC8vIHdpdGhvdXQgcHJvcGVyIGRhdGEsIG1hY2hpbmUgcG9vbCBpcyBhbHdheXMgbm90IHByZXNlbnQKICAgIF0pKCdzaG91bGQgYWxsb3cgY3JlYXRpb24gb2YgUktFMiBjbHVzdGVyIHdpdGggcHJvdmlkZXIgJXAgaWYgcG9vbCBtYWNoaW5lcyBhcmUgbWlzc2luZyAoJXApJywgKHByb3ZpZGVyLCByZXN1bHQpID0+IHsKICAgICAgICBjb25zdCBrOHMgPSAndjEuMjUuMCtya2UycjEnOwogICAgICAgIGNvbnN0IHdyYXBwZXIgPSBtb3VudChya2UyLCB7CiAgICAgICAgICAgIHByb3BzRGF0YTogewogICAgICAgICAgICAgICAgbW9kZTogX0NSRUFURSwKICAgICAgICAgICAgICAgIHZhbHVlOiB7CiAgICAgICAgICAgICAgICAgICAgc3BlYzogewogICAgICAgICAgICAgICAgICAgICAgICAuLi5kZWZhdWx0U3BlYywKICAgICAgICAgICAgICAgICAgICAgICAga3ViZXJuZXRlc1ZlcnNpb246IGs4cywKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGFnZW50Q29uZmlnOiB7ICdjbG91ZC1wcm92aWRlci1uYW1lJzogJ2FueScgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHNlbGVjdGVkVmVyc2lvbjogeyBhZ2VudEFyZ3M6IG1vY2tBZ2VudEFyZ3MgfSwKICAgICAgICAgICAgICAgIHByb3ZpZGVyLAogICAgICAgICAgICB9LAogICAgICAgICAgICBjb21wdXRlZDogZGVmYXVsdENvbXB1dGVkLAogICAgICAgICAgICBtb2NrczogewogICAgICAgICAgICAgICAgLi4uZGVmYXVsdE1vY2tzLAogICAgICAgICAgICAgICAgJHN0b3JlOiB7IGRpc3BhdGNoOiAoKSA9PiBqZXN0LmZuKCksIGdldHRlcnM6IGRlZmF1bHRHZXR0ZXJzIH0sCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHN0dWJzOiBkZWZhdWx0U3R1YnMKICAgICAgICB9KTsKICAgICAgICBleHBlY3Qod3JhcHBlci52bS52YWxpZGF0aW9uUGFzc2VkKS50b0JlKHJlc3VsdCk7CiAgICB9KTsKICAgIGl0KCdzaG91bGQgYWxsb3cgY3JlYXRpb24gb2YgSzMgY2x1c3RlcnMgaWYgcG9vbCBtYWNoaW5lcyBhcmUgbWlzc2luZycsICgpID0+IHsKICAgICAgICBjb25zdCBrOHMgPSAndjEuMjUuMCtrM3MxJzsKICAgICAgICBjb25zdCB3cmFwcGVyID0gbW91bnQocmtlMiwgewogICAgICAgICAgICBwcm9wc0RhdGE6IHsKICAgICAgICAgICAgICAgIG1vZGU6IF9DUkVBVEUsCiAgICAgICAgICAgICAgICB2YWx1ZTogewogICAgICAgICAgICAgICAgICAgIHNwZWM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgLi4uZGVmYXVsdFNwZWMsCiAgICAgICAgICAgICAgICAgICAgICAgIGt1YmVybmV0ZXNWZXJzaW9uOiBrOHMKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGFnZW50Q29uZmlnOiB7ICdjbG91ZC1wcm92aWRlci1uYW1lJzogJ2FueScgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHByb3ZpZGVyOiAnY3VzdG9tJwogICAgICAgICAgICB9LAogICAgICAgICAgICBkYXRhOiAoKSA9PiAoeyBjcmVkZW50aWFsSWQ6ICdJIGFtIGF1dGhlbnRpY2F0ZWQnIH0pLAogICAgICAgICAgICBjb21wdXRlZDogZGVmYXVsdENvbXB1dGVkLAogICAgICAgICAgICBtb2NrczogewogICAgICAgICAgICAgICAgLi4uZGVmYXVsdE1vY2tzLAogICAgICAgICAgICAgICAgJHN0b3JlOiB7IGRpc3BhdGNoOiAoKSA9PiBqZXN0LmZuKCksIGdldHRlcnM6IGRlZmF1bHRHZXR0ZXJzIH0sCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHN0dWJzOiBkZWZhdWx0U3R1YnMKICAgICAgICB9KTsKICAgICAgICBleHBlY3Qod3JhcHBlci52bS52YWxpZGF0aW9uUGFzc2VkKS50b0JlKHRydWUpOwogICAgfSk7CiAgICBpdCgnc2hvdWxkIGluaXRpYWxpemUgbWFjaGluZSBwb29scyB3aXRoIGRyYWluIGJlZm9yZSBkZWxldGUgdHJ1ZScsIGFzeW5jICgpID0+IHsKICAgICAgICBjb25zdCBrOHMgPSAndjEuMjUuMCtrM3MxJzsKICAgICAgICBjb25zdCB3cmFwcGVyID0gbW91bnQocmtlMiwgewogICAgICAgICAgICBwcm9wc0RhdGE6IHsKICAgICAgICAgICAgICAgIG1vZGU6IF9DUkVBVEUsCiAgICAgICAgICAgICAgICB2YWx1ZTogewogICAgICAgICAgICAgICAgICAgIHNwZWM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgLi4uZGVmYXVsdFNwZWMsCiAgICAgICAgICAgICAgICAgICAgICAgIGt1YmVybmV0ZXNWZXJzaW9uOiBrOHMKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGFnZW50Q29uZmlnOiB7ICdjbG91ZC1wcm92aWRlci1uYW1lJzogJ2FueScgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHByb3ZpZGVyOiAnY3VzdG9tJwogICAgICAgICAgICB9LAogICAgICAgICAgICBkYXRhOiAoKSA9PiAoeyBjcmVkZW50aWFsSWQ6ICdJIGFtIGF1dGhlbnRpY2F0ZWQnIH0pLAogICAgICAgICAgICBjb21wdXRlZDogZGVmYXVsdENvbXB1dGVkLAogICAgICAgICAgICBtb2NrczogewogICAgICAgICAgICAgICAgLi4uZGVmYXVsdE1vY2tzLAogICAgICAgICAgICAgICAgJHN0b3JlOiB7IGRpc3BhdGNoOiAoKSA9PiBqZXN0LmZuKCksIGdldHRlcnM6IGRlZmF1bHRHZXR0ZXJzIH0sCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHN0dWJzOiBkZWZhdWx0U3R1YnMKICAgICAgICB9KTsKICAgICAgICBhd2FpdCB3cmFwcGVyLnZtLmluaXRTcGVjcygpOwogICAgICAgIHdyYXBwZXIudm0ubWFjaGluZVBvb2xzLmZvckVhY2goKHApID0+IGV4cGVjdChwLmRyYWluQmVmb3JlRGVsZXRlKS50b0JlKHRydWUpKTsKICAgIH0pOwogICAgaXQoJ3Nob3VsZCBzZXQgZGlzdHJvIHJvb3QgZGlyZWN0b3J5IGZyb20gazhzRGlzdHJvIG9uIGEgSGFydmVzdGVyIGNsdXN0ZXIgY3JlYXRpb24gb24gc2F2ZSBvdmVycmlkZSAoX2RvU2F2ZU92ZXJyaWRlKScsIGFzeW5jICgpID0+IHsKICAgICAgICBjb25zdCBrOHMgPSAndjEuMjUuMCtrM3MxJzsKICAgICAgICBjb25zdCBIQVJWRVNURVIgPSAnaGFydmVzdGVyJzsKICAgICAgICBjb25zdCBIQVJWRVNURVJfQ0xPVURfUFJPVklERVIgPSAnaGFydmVzdGVyLWNsb3VkLXByb3ZpZGVyJzsKICAgICAgICBjb25zdCBuZXdTcGVjID0gT2JqZWN0LmFzc2lnbih7fSwgZGVmYXVsdFNwZWMpOwogICAgICAgIG5ld1NwZWMucmtlQ29uZmlnLmRhdGFEaXJlY3RvcmllcyA9IHsgazhzRGlzdHJvOiAnbXktazhzLWRpc3Ryby1wYXRoJyB9OwogICAgICAgIGNvbnN0IHdyYXBwZXIgPSBtb3VudChya2UyLCB7CiAgICAgICAgICAgIHByb3BzRGF0YTogewogICAgICAgICAgICAgICAgbW9kZTogX0NSRUFURSwKICAgICAgICAgICAgICAgIHZhbHVlOiB7CiAgICAgICAgICAgICAgICAgICAgc3BlYzogewogICAgICAgICAgICAgICAgICAgICAgICAuLi5uZXdTcGVjLAogICAgICAgICAgICAgICAgICAgICAgICBrdWJlcm5ldGVzVmVyc2lvbjogazhzCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBtZXRhZGF0YTogeyBuYW1lOiAnY2x1c3Rlci1uYW1lJyB9LAogICAgICAgICAgICAgICAgICAgIGFnZW50Q29uZmlnOiB7ICdjbG91ZC1wcm92aWRlci1uYW1lJzogSEFSVkVTVEVSIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBwcm92aWRlcjogJ2N1c3RvbScKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZGF0YTogKCkgPT4gKHsKICAgICAgICAgICAgICAgIGNyZWRlbnRpYWxJZDogJ0kgYW0gYXV0aGVudGljYXRlZCcsCiAgICAgICAgICAgICAgICBjcmVkZW50aWFsOiB7IGRlY29kZWREYXRhOiB7IGNsdXN0ZXJJZDogJ3NvbWUtY2x1c3Rlci1pZCcgfSB9LAogICAgICAgICAgICAgICAgbWFjaGluZVBvb2xzOiBbXSwKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIGNvbXB1dGVkOiBkZWZhdWx0Q29tcHV0ZWQsCiAgICAgICAgICAgIG1vY2tzOiB7CiAgICAgICAgICAgICAgICAuLi5kZWZhdWx0TW9ja3MsCiAgICAgICAgICAgICAgICAkc3RvcmU6IHsKICAgICAgICAgICAgICAgICAgICAvLyBtb2NrIHNlY3JldCBjcmVhdGlvbiBvbiAiY3JlYXRlS3ViZWNvbmZpZ1NlY3JldCIKICAgICAgICAgICAgICAgICAgICBkaXNwYXRjaDogKGFjdGlvbiwgb3B0cykgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWN0aW9uID09PSAnbWFuYWdlbWVudC9jcmVhdGUnICYmIG9wdHMudHlwZSA9PT0gU0VDUkVUKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBzYXZlOiAoKSA9PiBqZXN0LmZuIH07CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gamVzdC5mbigpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBnZXR0ZXJzOiBkZWZhdWx0R2V0dGVycwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgc3R1YnM6IGRlZmF1bHRTdHVicwogICAgICAgIH0pOwogICAgICAgIC8vIHdlIG5lZWQgdG8gbW9jayB0aGUgInNhdmUiIG1ldGhvZCBmcm9tIHRoZSBjcmVhdGUtZWRpdC12aWV3LW1peGluCiAgICAgICAgLy8gb3RoZXJ3aXNlIHdlIGdldCBjb25zb2xlIGVycm9ycwogICAgICAgIGplc3Quc3B5T24od3JhcHBlci52bSwgJ3NhdmUnKS5tb2NrSW1wbGVtZW50YXRpb24oKTsKICAgICAgICBhd2FpdCB3cmFwcGVyLnZtLl9kb1NhdmVPdmVycmlkZShqZXN0LmZuKCkpOwogICAgICAgIGV4cGVjdCh3cmFwcGVyLnZtLmNoYXJ0VmFsdWVzW0hBUlZFU1RFUl9DTE9VRF9QUk9WSURFUl0uY2xvdWRDb25maWdQYXRoKS50b1N0cmljdEVxdWFsKCdteS1rOHMtZGlzdHJvLXBhdGgvZXRjL2NvbmZpZy1maWxlcy9jbG91ZC1wcm92aWRlci1jb25maWcnKTsKICAgIH0pOwogICAgLy8gVE9ETzogQ29tcGxldGUgdGVzdCBhZnRlciBpbXBsZW1lbnRpbmcgZmV0Y2ggaHR0cHM6Ly9naXRodWIuY29tL3JhbmNoZXIvZGFzaGJvYXJkL2lzc3Vlcy85MzIyCiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgamVzdC9uby1kaXNhYmxlZC10ZXN0cwogICAgZGVzY3JpYmUuc2tpcCgnc2hvdWxkIGluaXRpYWxpemUgYWdlbnQgY29uZmlndXJhdGlvbiB2YWx1ZXMnLCAoKSA9PiB7CiAgICAgICAgaXQoJ2FkZGluZyBkZWZhdWx0IHZhbHVlcyBpZiBub25lJywgYXN5bmMgKCkgPT4gewogICAgICAgICAgICBjb25zdCB3cmFwcGVyID0gc2hhbGxvd01vdW50KHJrZTIsIHsKICAgICAgICAgICAgICAgIHByb3BzRGF0YTogewogICAgICAgICAgICAgICAgICAgIG1vZGU6ICdjcmVhdGUnLAogICAgICAgICAgICAgICAgICAgIHZhbHVlOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNwZWM6IHsgLi4uZGVmYXVsdFNwZWMgfSwKICAgICAgICAgICAgICAgICAgICAgICAgYWdlbnRDb25maWc6IHsgJ2Nsb3VkLXByb3ZpZGVyLW5hbWUnOiAnYW55JyB9CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBwcm92aWRlcjogJ2N1c3RvbScKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBjb21wdXRlZDogZGVmYXVsdENvbXB1dGVkLAogICAgICAgICAgICAgICAgbW9ja3M6IHsKICAgICAgICAgICAgICAgICAgICAuLi5kZWZhdWx0TW9ja3MsCiAgICAgICAgICAgICAgICAgICAgJHN0b3JlOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGdldHRlcnM6IGRlZmF1bHRHZXR0ZXJzLAogICAgICAgICAgICAgICAgICAgICAgICBkaXNwYXRjaDogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ21hbmFnZW1lbnQvcmVxdWVzdCc6IGplc3QuZm4oKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICdtYW5hZ2VtZW50L2ZpbmQnOiBqZXN0LmZuKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbWFuYWdlbWVudC9maW5kQWxsJzogKCkgPT4gKFtdKSwKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgc3R1YnM6IGRlZmF1bHRTdHVicwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY29uc3QgZGVmYXVsdEFnZW50Q29uZmlnID0gewogICAgICAgICAgICAgICAgY2x1c3RlckFnZW50RGVwbG95bWVudEN1c3RvbWl6YXRpb246IHsKICAgICAgICAgICAgICAgICAgICBvdmVycmlkZUFmZmluaXR5OiB7fSwKICAgICAgICAgICAgICAgICAgICBhcHBlbmRUb2xlcmF0aW9uczogW10sCiAgICAgICAgICAgICAgICAgICAgb3ZlcnJpZGVSZXNvdXJjZVJlcXVpcmVtZW50czoge30KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBmbGVldEFnZW50RGVwbG95bWVudEN1c3RvbWl6YXRpb246IHsKICAgICAgICAgICAgICAgICAgICBvdmVycmlkZUFmZmluaXR5OiB7fSwKICAgICAgICAgICAgICAgICAgICBhcHBlbmRUb2xlcmF0aW9uczogW10sCiAgICAgICAgICAgICAgICAgICAgb3ZlcnJpZGVSZXNvdXJjZVJlcXVpcmVtZW50czoge30KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKICAgICAgICAgICAgLy8gU2V0dGluZyBSS0UgdG8gYXZvaWQgY2FsbHMKICAgICAgICAgICAgd3JhcHBlci5zZXREYXRhKHsgcmtlMlZlcnNpb25zOiBbXSB9KTsKICAgICAgICAgICAgLy8gYXdhaXQgcmtlMi5mZXRjaC5jYWxsKHdyYXBwZXIudm0pOwogICAgICAgICAgICBleHBlY3Qod3JhcHBlci5wcm9wcygpLnZhbHVlLnNwZWMpLnRvQ29udGFpbihkZWZhdWx0QWdlbnRDb25maWcpOwogICAgICAgIH0pOwogICAgICAgIGl0KCdzaG91bGQgZGlzcGxheSBhZ2VudCBjb25maWd1cmF0aW9uIHRhYicsIGFzeW5jICgpID0+IHsKICAgICAgICAgICAgY29uc3Qgd3JhcHBlciA9IHNoYWxsb3dNb3VudChya2UyLCB7CiAgICAgICAgICAgICAgICBwcm9wc0RhdGE6IHsKICAgICAgICAgICAgICAgICAgICBtb2RlOiAnY3JlYXRlJywKICAgICAgICAgICAgICAgICAgICB2YWx1ZTogewogICAgICAgICAgICAgICAgICAgICAgICBzcGVjOiB7IC4uLmRlZmF1bHRTcGVjIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGFnZW50Q29uZmlnOiB7ICdjbG91ZC1wcm92aWRlci1uYW1lJzogJ2FueScgfQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgcHJvdmlkZXI6ICdjdXN0b20nCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgY29tcHV0ZWQ6IGRlZmF1bHRDb21wdXRlZCwKICAgICAgICAgICAgICAgIG1vY2tzOiB7CiAgICAgICAgICAgICAgICAgICAgLi4uZGVmYXVsdE1vY2tzLAogICAgICAgICAgICAgICAgICAgICRzdG9yZTogewogICAgICAgICAgICAgICAgICAgICAgICBnZXR0ZXJzOiBkZWZhdWx0R2V0dGVycywKICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGF0Y2g6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICdtYW5hZ2VtZW50L3JlcXVlc3QnOiBqZXN0LmZuKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbWFuYWdlbWVudC9maW5kJzogamVzdC5mbigpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ21hbmFnZW1lbnQvZmluZEFsbCc6ICgpID0+IChbXSksCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHN0dWJzOiBkZWZhdWx0U3R1YnMKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNvbnN0IGFnZW50ID0gd3JhcHBlci5maW5kKCdbZGF0YS10ZXN0aWQ9InJrZTItY2x1c3Rlci1hZ2VudC1jb25maWciXScpOwogICAgICAgICAgICAvLyBTZXR0aW5nIFJLRSB0byBhdm9pZCBjYWxscwogICAgICAgICAgICB3cmFwcGVyLnNldERhdGEoeyBya2UyVmVyc2lvbnM6IFtdIH0pOwogICAgICAgICAgICBhd2FpdCBya2UyLmZldGNoLmNhbGwod3JhcHBlci52bSk7CiAgICAgICAgICAgIGV4cGVjdChhZ2VudC5lbGVtZW50KS50b0JlRGVmaW5lZCgpOwogICAgICAgIH0pOwogICAgfSk7Cn0pOwo="},{"version":3,"file":"/home/ubuntu/suseconf/node_modules/@rancher/shell/edit/provisioning.cattle.io.cluster/__tests__/rke2.test.ts","sourceRoot":"","sources":["/home/ubuntu/suseconf/node_modules/@rancher/shell/edit/provisioning.cattle.io.cluster/__tests__/rke2.test.ts"],"names":[],"mappings":"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","sourcesContent":["import { mount, shallowMount } from '@vue/test-utils';\nimport { SECRET } from '@shell/config/types';\nimport { _CREATE } from '@shell/config/query-params';\nimport rke2 from '@shell/edit/provisioning.cattle.io.cluster/rke2.vue';\n\n/**\n * DISCLAIMER ***************************************************************************************\n * Declarations should not be done outside the tests!!\n * This component is overwhelming for test and requires too much initialization.\n * In this way the tests are more readable and we can avoid annoying repetitions.\n ****************************************************************************************************\n */\nconst defaultStubs = {\n  CruResource:              { template: '<div><slot></slot></div>' }, // Required to render the slot content\n  Banner:                   true,\n  LabeledSelect:            true,\n  ACE:                      true,\n  AgentEnv:                 true,\n  AgentConfiguration:       true,\n  ArrayList:                true,\n  ArrayListGrouped:         true,\n  BadgeState:               true,\n  Checkbox:                 true,\n  ClusterMembershipEditor:  true,\n  DrainOptions:             true,\n  LabeledInput:             true,\n  Labels:                   true,\n  Loading:                  true,\n  MachinePool:              true,\n  MatchExpressions:         true,\n  NameNsDescription:        true,\n  Questions:                true,\n  RadioGroup:               true,\n  RegistryConfigs:          true,\n  RegistryMirrors:          true,\n  S3Config:                 true,\n  SelectCredential:         true,\n  SelectOrCreateAuthSecret: true,\n  Tab:                      true,\n  Tabbed:                   true,\n  UnitInput:                true,\n  YamlEditor:               true,\n  MemberRoles:              true,\n  Basics:                   true,\n  Etcd:                     true,\n  Networking:               true,\n  Upgrade:                  true,\n  Registries:               true,\n  AddOnConfig:              true,\n  Advanced:                 true\n};\n\nconst mockAgentArgs = { 'cloud-provider-name': { options: [], profile: { options: [{ anything: 'yes' }] } } };\n\nconst defaultComputed = {\n  showForm() {\n    return true;\n  },\n  versionOptions() {\n    return [\n      {\n        id: 'v1.25.0+rke2r1', value: 'v1.25.0+rke2r1', serverArgs: {}, agentArgs: mockAgentArgs, charts: {}\n      },\n      {\n        id: 'v1.24.0+rke2r1', value: 'v1.24.0+rke2r1', serverArgs: {}, agentArgs: mockAgentArgs, charts: {}\n      },\n      {\n        id: 'v1.23.0+rke2r1', value: 'v1.23.0+rke2r1', serverArgs: {}, agentArgs: mockAgentArgs, charts: {}\n      },\n      {\n        id: 'v1.25.0+k3s1', value: 'v1.25.0+k3s1', serverArgs: {}, agentArgs: mockAgentArgs, charts: {}\n      },\n      {\n        id: 'v1.24.0+k3s1', value: 'v1.24.0+k3s1', serverArgs: {}, agentArgs: mockAgentArgs, charts: {}\n      }\n    ];\n  }\n};\n\nconst defaultGetters = {\n  currentStore:                      () => 'current_store',\n  'management/schemaFor':            jest.fn(),\n  'current_store/all':               jest.fn(),\n  'i18n/t':                          jest.fn(),\n  'i18n/withFallback':               jest.fn(),\n  'plugins/cloudProviderForDriver':  jest.fn(),\n  'customization/getPreviewCluster': jest.fn(),\n};\n\nconst defaultMocks = {\n  $fetchState: { pending: false },\n  $route:      {\n    name:  'anything',\n    query: { AS: 'yaml' },\n  },\n};\n\nconst defaultSpec = {\n  rkeConfig:   { etcd: { disableSnapshots: false } },\n  chartValues: {},\n};\n\ndescribe('component: rke2', () => {\n  /**\n   * DISCLAIMER ***************************************************************************************\n   * Logs are prevented to avoid polluting the test output.\n   ****************************************************************************************************\n  */\n  // eslint-disable-next-line jest/no-hooks\n  beforeEach(() => {\n    jest.spyOn(console, 'log').mockImplementation(() => { });\n  });\n\n  it.each([\n    ['custom', true],\n    ['anything else', false] // without proper data, machine pool is always not present\n  ])('should allow creation of RKE2 cluster with provider %p if pool machines are missing (%p)', (provider, result) => {\n    const k8s = 'v1.25.0+rke2r1';\n    const wrapper = mount(rke2, {\n      propsData: {\n        mode:  _CREATE,\n        value: {\n          spec: {\n            ...defaultSpec,\n            kubernetesVersion: k8s,\n\n          },\n          agentConfig: { 'cloud-provider-name': 'any' }\n        },\n        selectedVersion: { agentArgs: mockAgentArgs },\n        provider,\n      },\n      computed: defaultComputed,\n      mocks:    {\n        ...defaultMocks,\n        $store: { dispatch: () => jest.fn(), getters: defaultGetters },\n      },\n      stubs: defaultStubs\n    });\n\n    expect((wrapper.vm as any).validationPassed).toBe(result);\n  });\n\n  it('should allow creation of K3 clusters if pool machines are missing', () => {\n    const k8s = 'v1.25.0+k3s1';\n    const wrapper = mount(rke2, {\n      propsData: {\n        mode:  _CREATE,\n        value: {\n          spec: {\n            ...defaultSpec,\n            kubernetesVersion: k8s\n          },\n          agentConfig: { 'cloud-provider-name': 'any' }\n        },\n        provider: 'custom'\n      },\n      data:     () => ({ credentialId: 'I am authenticated' }),\n      computed: defaultComputed,\n      mocks:    {\n        ...defaultMocks,\n        $store: { dispatch: () => jest.fn(), getters: defaultGetters },\n      },\n      stubs: defaultStubs\n    });\n\n    expect((wrapper.vm as any).validationPassed).toBe(true);\n  });\n\n  it('should initialize machine pools with drain before delete true', async() => {\n    const k8s = 'v1.25.0+k3s1';\n    const wrapper = mount(rke2, {\n      propsData: {\n        mode:  _CREATE,\n        value: {\n          spec: {\n            ...defaultSpec,\n            kubernetesVersion: k8s\n          },\n          agentConfig: { 'cloud-provider-name': 'any' }\n        },\n        provider: 'custom'\n      },\n      data:     () => ({ credentialId: 'I am authenticated' }),\n      computed: defaultComputed,\n      mocks:    {\n        ...defaultMocks,\n        $store: { dispatch: () => jest.fn(), getters: defaultGetters },\n      },\n      stubs: defaultStubs\n    });\n\n    await wrapper.vm.initSpecs();\n\n    wrapper.vm.machinePools.forEach((p: any) => expect(p.drainBeforeDelete).toBe(true));\n  });\n\n  it('should set distro root directory from k8sDistro on a Harvester cluster creation on save override (_doSaveOverride)', async() => {\n    const k8s = 'v1.25.0+k3s1';\n\n    const HARVESTER = 'harvester';\n    const HARVESTER_CLOUD_PROVIDER = 'harvester-cloud-provider';\n\n    const newSpec = Object.assign({}, defaultSpec);\n\n    newSpec.rkeConfig.dataDirectories = { k8sDistro: 'my-k8s-distro-path' };\n\n    const wrapper = mount(rke2, {\n      propsData: {\n        mode:  _CREATE,\n        value: {\n          spec: {\n            ...newSpec,\n            kubernetesVersion: k8s\n          },\n          metadata:    { name: 'cluster-name' },\n          agentConfig: { 'cloud-provider-name': HARVESTER }\n        },\n        provider: 'custom'\n      },\n      data: () => ({\n        credentialId: 'I am authenticated',\n        credential:   { decodedData: { clusterId: 'some-cluster-id' } },\n        machinePools: [],\n      }),\n      computed: defaultComputed,\n      mocks:    {\n        ...defaultMocks,\n        $store: {\n          // mock secret creation on \"createKubeconfigSecret\"\n          dispatch: (action: any, opts: any) => {\n            if (action === 'management/create' && opts.type === SECRET) {\n              return { save: () => jest.fn };\n            } else {\n              return jest.fn();\n            }\n          },\n          getters: defaultGetters\n        },\n      },\n      stubs: defaultStubs\n    });\n\n    // we need to mock the \"save\" method from the create-edit-view-mixin\n    // otherwise we get console errors\n    jest.spyOn(wrapper.vm, 'save').mockImplementation();\n\n    await wrapper.vm._doSaveOverride(jest.fn());\n\n    expect(wrapper.vm.chartValues[HARVESTER_CLOUD_PROVIDER].cloudConfigPath).toStrictEqual('my-k8s-distro-path/etc/config-files/cloud-provider-config');\n  });\n\n  // TODO: Complete test after implementing fetch https://github.com/rancher/dashboard/issues/9322\n  // eslint-disable-next-line jest/no-disabled-tests\n  describe.skip('should initialize agent configuration values', () => {\n    it('adding default values if none', async() => {\n      const wrapper = shallowMount(rke2, {\n        propsData: {\n          mode:  'create',\n          value: {\n            spec:        { ...defaultSpec },\n            agentConfig: { 'cloud-provider-name': 'any' }\n          },\n          provider: 'custom'\n        },\n        computed: defaultComputed,\n        mocks:    {\n          ...defaultMocks,\n          $store: {\n            getters:  defaultGetters,\n            dispatch: {\n              'management/request': jest.fn(),\n              'management/find':    jest.fn(),\n              'management/findAll': () => ([]),\n            }\n          },\n        },\n        stubs: defaultStubs\n      });\n      const defaultAgentConfig = {\n        clusterAgentDeploymentCustomization: {\n          overrideAffinity:             {},\n          appendTolerations:            [],\n          overrideResourceRequirements: {}\n        },\n        fleetAgentDeploymentCustomization: {\n          overrideAffinity:             {},\n          appendTolerations:            [],\n          overrideResourceRequirements: {}\n        }\n      };\n\n      // Setting RKE to avoid calls\n      wrapper.setData({ rke2Versions: [] });\n\n      // await rke2.fetch.call(wrapper.vm);\n\n      expect(wrapper.props().value.spec).toContain(defaultAgentConfig);\n    });\n\n    it('should display agent configuration tab', async() => {\n      const wrapper = shallowMount(rke2, {\n        propsData: {\n          mode:  'create',\n          value: {\n            spec:        { ...defaultSpec },\n            agentConfig: { 'cloud-provider-name': 'any' }\n          },\n          provider: 'custom'\n        },\n        computed: defaultComputed,\n        mocks:    {\n          ...defaultMocks,\n          $store: {\n            getters:  defaultGetters,\n            dispatch: {\n              'management/request': jest.fn(),\n              'management/find':    jest.fn(),\n              'management/findAll': () => ([]),\n            }\n          },\n        },\n        stubs: defaultStubs\n      });\n      const agent = wrapper.find('[data-testid=\"rke2-cluster-agent-config\"]');\n\n      // Setting RKE to avoid calls\n      wrapper.setData({ rke2Versions: [] });\n\n      await rke2.fetch.call(wrapper.vm);\n\n      expect(agent.element).toBeDefined();\n    });\n  });\n});\n"]}]}