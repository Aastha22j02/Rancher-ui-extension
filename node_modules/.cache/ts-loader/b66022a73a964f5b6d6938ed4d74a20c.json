{"remainingRequest":"/home/ubuntu/suseconf/node_modules/ts-loader/index.js??ref--17-1!/home/ubuntu/suseconf/node_modules/@rancher/shell/detail/__tests__/provisioning.cattle.io.cluster.test.ts","dependencies":[{"path":"/home/ubuntu/suseconf/node_modules/@rancher/shell/detail/__tests__/provisioning.cattle.io.cluster.test.ts","mtime":1725338146566},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js","mtime":1725271298942},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/ts-loader/index.js","mtime":1725271299135}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgc2hhbGxvd01vdW50IH0gZnJvbSAnQHZ1ZS90ZXN0LXV0aWxzJzsKaW1wb3J0IFByb3Zpc2lvbmluZ0NhdHRsZUlvQ2x1c3RlciBmcm9tICdAc2hlbGwvZGV0YWlsL3Byb3Zpc2lvbmluZy5jYXR0bGUuaW8uY2x1c3Rlci52dWUnOwpqZXN0Lm1vY2soJ0BzaGVsbC91dGlscy9jbGlwYm9hcmQnLCAoKSA9PiB7CiAgICByZXR1cm4geyBjb3B5VGV4dFRvQ2xpcGJvYXJkOiBqZXN0LmZuKCgpID0+IFByb21pc2UucmVzb2x2ZSh7fSkpIH07Cn0pOwpkZXNjcmliZSgndmlldzogcHJvdmlzaW9uaW5nLmNhdHRsZS5pby5jbHVzdGVyJywgKCkgPT4gewogICAgY29uc3QgbW9ja1N0b3JlID0gewogICAgICAgIGdldHRlcnM6IHsKICAgICAgICAgICAgJ21hbmFnZW1lbnQvY2FuTGlzdCc6ICgpID0+IHRydWUsCiAgICAgICAgICAgICdtYW5hZ2VtZW50L3NjaGVtYUZvcic6IGplc3QuZm4oKSwKICAgICAgICAgICAgJ2kxOG4vdCc6ICh0ZXh0KSA9PiB0ZXh0LAogICAgICAgICAgICB0OiAodGV4dCkgPT4gdGV4dCwKICAgICAgICAgICAgY3VycmVudFN0b3JlOiAoKSA9PiAnY3VycmVudF9zdG9yZScsCiAgICAgICAgICAgICdjdXJyZW50X3N0b3JlL3NjaGVtYUZvcic6IGplc3QuZm4oKSwKICAgICAgICAgICAgJ2N1cnJlbnRfc3RvcmUvYWxsJzogamVzdC5mbigpLAogICAgICAgICAgICB3b3Jrc3BhY2U6IGplc3QuZm4oKSwKICAgICAgICB9LAogICAgfTsKICAgIGNvbnN0IG1vY2tzID0gewogICAgICAgICRzdG9yZTogbW9ja1N0b3JlLAogICAgICAgICRmZXRjaFN0YXRlOiB7IHBlbmRpbmc6IGZhbHNlIH0sCiAgICAgICAgJHJvdXRlOiB7CiAgICAgICAgICAgIHF1ZXJ5OiB7IEFTOiAnJyB9LAogICAgICAgICAgICBuYW1lOiB7CiAgICAgICAgICAgICAgICBlbmRzV2l0aDogKCkgPT4gewogICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH0sCiAgICAgICAgfSwKICAgIH07CiAgICBkZXNjcmliZSgncmVnaXN0cmF0aW9uIHRhYiB2aXNpYmlsaXR5JywgKCkgPT4gewogICAgICAgIGl0KCdhIGhvc3RlZCBLdWJlcm5ldGVzIFByb3ZpZGVyIHdpdGggYSBwcml2YXRlIGVuZHBvaW50IChuZXR3b3JrIGNvbmZpZykgYW5kIGNsdXN0ZXIgbm90IHJlYWR5IHNob3VsZCBTSE9XIHRoZSByZWdpc3RyYXRpb24gdGFiJywgYXN5bmMgKCkgPT4gewogICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHsKICAgICAgICAgICAgICAgIGlzSG9zdGVkS3ViZXJuZXRlc1Byb3ZpZGVyOiB0cnVlLAogICAgICAgICAgICAgICAgaXNQcml2YXRlSG9zdGVkUHJvdmlkZXI6IHRydWUsCiAgICAgICAgICAgICAgICBtZ210OiB7CiAgICAgICAgICAgICAgICAgICAgaGFzTGluazogKCkgPT4gamVzdC5mbigpLAogICAgICAgICAgICAgICAgICAgIGxpbmtGb3I6ICgpID0+ICcnLAogICAgICAgICAgICAgICAgICAgIGlzUmVhZHk6IGZhbHNlCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGNvbnN0IHdyYXBwZXIgPSBzaGFsbG93TW91bnQoUHJvdmlzaW9uaW5nQ2F0dGxlSW9DbHVzdGVyLCB7CiAgICAgICAgICAgICAgICBtb2NrcywKICAgICAgICAgICAgICAgIHByb3BzRGF0YTogeyB2YWx1ZSB9LAogICAgICAgICAgICB9KTsKICAgICAgICAgICAgYXdhaXQgd3JhcHBlci5zZXREYXRhKHsgY2x1c3RlclRva2VuOiB7fSB9KTsKICAgICAgICAgICAgZXhwZWN0KHdyYXBwZXIudm0uc2hvd1JlZ2lzdHJhdGlvbikudG9TdHJpY3RFcXVhbCh0cnVlKTsKICAgICAgICB9KTsKICAgICAgICBpdCgnYSBob3N0ZWQgS3ViZXJuZXRlcyBQcm92aWRlciBXSVRIT1VUIGEgcHJpdmF0ZSBlbmRwb2ludCAobmV0d29yayBjb25maWcpIGFuZCBjbHVzdGVyIG5vdCByZWFkeSBzaG91bGQgTk9UIFNIT1cgdGhlIHJlZ2lzdHJhdGlvbiB0YWInLCBhc3luYyAoKSA9PiB7CiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gewogICAgICAgICAgICAgICAgaXNIb3N0ZWRLdWJlcm5ldGVzUHJvdmlkZXI6IHRydWUsCiAgICAgICAgICAgICAgICBtZ210OiB7CiAgICAgICAgICAgICAgICAgICAgaGFzTGluazogKCkgPT4gamVzdC5mbigpLAogICAgICAgICAgICAgICAgICAgIGxpbmtGb3I6ICgpID0+ICcnLAogICAgICAgICAgICAgICAgICAgIGlzUmVhZHk6IGZhbHNlCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGNvbnN0IHdyYXBwZXIgPSBzaGFsbG93TW91bnQoUHJvdmlzaW9uaW5nQ2F0dGxlSW9DbHVzdGVyLCB7CiAgICAgICAgICAgICAgICBtb2NrcywKICAgICAgICAgICAgICAgIHByb3BzRGF0YTogeyB2YWx1ZSB9LAogICAgICAgICAgICB9KTsKICAgICAgICAgICAgYXdhaXQgd3JhcHBlci5zZXREYXRhKHsgY2x1c3RlclRva2VuOiB7fSB9KTsKICAgICAgICAgICAgZXhwZWN0KHdyYXBwZXIudm0uc2hvd1JlZ2lzdHJhdGlvbikudG9TdHJpY3RFcXVhbChmYWxzZSk7CiAgICAgICAgfSk7CiAgICAgICAgaXQoJ3Nob3VsZCBTSE9XIGlmIGN1c3RvbS9pbXBvcnRlZCBjbHVzdGVyIGFuZCB0aGUgY2x1c3RlciBpcyBhY3RpdmUnLCBhc3luYyAoKSA9PiB7CiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gewogICAgICAgICAgICAgICAgaXNDdXN0b206IHRydWUsCiAgICAgICAgICAgICAgICBpc0ltcG9ydGVkOiB0cnVlLAogICAgICAgICAgICAgICAgbWdtdDogewogICAgICAgICAgICAgICAgICAgIGhhc0xpbms6ICgpID0+IGplc3QuZm4oKSwKICAgICAgICAgICAgICAgICAgICBsaW5rRm9yOiAoKSA9PiAnJywKICAgICAgICAgICAgICAgICAgICBpc1JlYWR5OiB0cnVlCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGNvbnN0IHdyYXBwZXIgPSBzaGFsbG93TW91bnQoUHJvdmlzaW9uaW5nQ2F0dGxlSW9DbHVzdGVyLCB7CiAgICAgICAgICAgICAgICBtb2NrcywKICAgICAgICAgICAgICAgIHByb3BzRGF0YTogeyB2YWx1ZSB9LAogICAgICAgICAgICB9KTsKICAgICAgICAgICAgYXdhaXQgd3JhcHBlci5zZXREYXRhKHsgY2x1c3RlclRva2VuOiB7fSB9KTsKICAgICAgICAgICAgZXhwZWN0KHdyYXBwZXIudm0uc2hvd1JlZ2lzdHJhdGlvbikudG9TdHJpY3RFcXVhbCh0cnVlKTsKICAgICAgICB9KTsKICAgICAgICBpdCgnc2hvdWxkIE5PVCBzaG93IGlmIGltcG9ydGVkIGNsdXN0ZXIgYW5kIHRoZSBjbHVzdGVyIGlzIGFjdGl2ZScsIGFzeW5jICgpID0+IHsKICAgICAgICAgICAgY29uc3QgdmFsdWUgPSB7CiAgICAgICAgICAgICAgICBpc0N1c3RvbTogZmFsc2UsCiAgICAgICAgICAgICAgICBpc0ltcG9ydGVkOiB0cnVlLAogICAgICAgICAgICAgICAgbWdtdDogewogICAgICAgICAgICAgICAgICAgIGhhc0xpbms6ICgpID0+IGplc3QuZm4oKSwKICAgICAgICAgICAgICAgICAgICBsaW5rRm9yOiAoKSA9PiAnJywKICAgICAgICAgICAgICAgICAgICBpc1JlYWR5OiB0cnVlCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGNvbnN0IHdyYXBwZXIgPSBzaGFsbG93TW91bnQoUHJvdmlzaW9uaW5nQ2F0dGxlSW9DbHVzdGVyLCB7CiAgICAgICAgICAgICAgICBtb2NrcywKICAgICAgICAgICAgICAgIHByb3BzRGF0YTogeyB2YWx1ZSB9LAogICAgICAgICAgICB9KTsKICAgICAgICAgICAgYXdhaXQgd3JhcHBlci5zZXREYXRhKHsgY2x1c3RlclRva2VuOiB7fSB9KTsKICAgICAgICAgICAgZXhwZWN0KHdyYXBwZXIudm0uc2hvd1JlZ2lzdHJhdGlvbikudG9TdHJpY3RFcXVhbChmYWxzZSk7CiAgICAgICAgfSk7CiAgICB9KTsKfSk7Cg=="},{"version":3,"file":"/home/ubuntu/suseconf/node_modules/@rancher/shell/detail/__tests__/provisioning.cattle.io.cluster.test.ts","sourceRoot":"","sources":["/home/ubuntu/suseconf/node_modules/@rancher/shell/detail/__tests__/provisioning.cattle.io.cluster.test.ts"],"names":[],"mappings":"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","sourcesContent":["import { shallowMount } from '@vue/test-utils';\nimport ProvisioningCattleIoCluster from '@shell/detail/provisioning.cattle.io.cluster.vue';\n\njest.mock('@shell/utils/clipboard', () => {\n  return { copyTextToClipboard: jest.fn(() => Promise.resolve({})) };\n});\n\ndescribe('view: provisioning.cattle.io.cluster', () => {\n  const mockStore = {\n    getters: {\n      'management/canList':      () => true,\n      'management/schemaFor':    jest.fn(),\n      'i18n/t':                  (text: string) => text,\n      t:                         (text: string) => text,\n      currentStore:              () => 'current_store',\n      'current_store/schemaFor': jest.fn(),\n      'current_store/all':       jest.fn(),\n      workspace:                 jest.fn(),\n    },\n  };\n\n  const mocks = {\n    $store:      mockStore,\n    $fetchState: { pending: false },\n    $route:      {\n      query: { AS: '' },\n      name:  {\n        endsWith: () => {\n          return false;\n        },\n      },\n    },\n  };\n\n  describe('registration tab visibility', () => {\n    it('a hosted Kubernetes Provider with a private endpoint (network config) and cluster not ready should SHOW the registration tab', async() => {\n      const value = {\n        isHostedKubernetesProvider: true,\n        isPrivateHostedProvider:    true,\n        mgmt:                       {\n          hasLink: () => jest.fn(),\n          linkFor: () => '',\n          isReady: false\n        }\n      };\n\n      const wrapper = shallowMount(ProvisioningCattleIoCluster, {\n        mocks,\n        propsData: { value },\n      });\n\n      await wrapper.setData({ clusterToken: {} });\n\n      expect(wrapper.vm.showRegistration).toStrictEqual(true);\n    });\n\n    it('a hosted Kubernetes Provider WITHOUT a private endpoint (network config) and cluster not ready should NOT SHOW the registration tab', async() => {\n      const value = {\n        isHostedKubernetesProvider: true,\n        mgmt:                       {\n          hasLink: () => jest.fn(),\n          linkFor: () => '',\n          isReady: false\n        }\n      };\n\n      const wrapper = shallowMount(ProvisioningCattleIoCluster, {\n        mocks,\n        propsData: { value },\n      });\n\n      await wrapper.setData({ clusterToken: {} });\n\n      expect(wrapper.vm.showRegistration).toStrictEqual(false);\n    });\n\n    it('should SHOW if custom/imported cluster and the cluster is active', async() => {\n      const value = {\n        isCustom:   true,\n        isImported: true,\n        mgmt:       {\n          hasLink: () => jest.fn(),\n          linkFor: () => '',\n          isReady: true\n        }\n      };\n\n      const wrapper = shallowMount(ProvisioningCattleIoCluster, {\n        mocks,\n        propsData: { value },\n      });\n\n      await wrapper.setData({ clusterToken: {} });\n\n      expect(wrapper.vm.showRegistration).toStrictEqual(true);\n    });\n\n    it('should NOT show if imported cluster and the cluster is active', async() => {\n      const value = {\n        isCustom:   false,\n        isImported: true,\n        mgmt:       {\n          hasLink: () => jest.fn(),\n          linkFor: () => '',\n          isReady: true\n        }\n      };\n\n      const wrapper = shallowMount(ProvisioningCattleIoCluster, {\n        mocks,\n        propsData: { value },\n      });\n\n      await wrapper.setData({ clusterToken: {} });\n\n      expect(wrapper.vm.showRegistration).toStrictEqual(false);\n    });\n  });\n});\n"]}]}