{"remainingRequest":"/home/ubuntu/suseconf/node_modules/ts-loader/index.js??ref--17-1!/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/ubuntu/suseconf/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ubuntu/suseconf/node_modules/@rancher/shell/pages/c/_cluster/auth/user.retention/index.vue?vue&type=script&lang=ts&setup=true","dependencies":[{"path":"/home/ubuntu/suseconf/node_modules/@rancher/shell/pages/c/_cluster/auth/user.retention/index.vue","mtime":1725338146566},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js","mtime":1725271298942},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/ts-loader/index.js","mtime":1725271299135},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1725271300920}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgZGVmaW5lQ29tcG9uZW50IGFzIF9kZWZpbmVDb21wb25lbnQgfSBmcm9tICd2dWUnOwppbXBvcnQgeyByZWYsIHJlYWN0aXZlLCB3YXRjaCwgb25Nb3VudGVkIH0gZnJvbSAndnVlJzsKaW1wb3J0IHsgdXNlUm91dGVyLCBvbkJlZm9yZVJvdXRlVXBkYXRlIH0gZnJvbSAndnVlLXJvdXRlci9jb21wb3NhYmxlcyc7CmltcG9ydCBVc2VyUmV0ZW50aW9uSGVhZGVyIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL3VzZXIucmV0ZW50aW9uL3VzZXItcmV0ZW50aW9uLWhlYWRlci52dWUnOwppbXBvcnQgRm9vdGVyIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL2Zvcm0vRm9vdGVyLnZ1ZSc7CmltcG9ydCB7IHVzZVN0b3JlIH0gZnJvbSAnQHNoZWxsL2NvbXBvc2FibGVzL3VzZVN0b3JlJzsKaW1wb3J0IHsgdXNlSTE4biB9IGZyb20gJ0BzaGVsbC9jb21wb3NhYmxlcy91c2VJMThuJzsKaW1wb3J0IHsgTUFOQUdFTUVOVCB9IGZyb20gJ0BzaGVsbC9jb25maWcvdHlwZXMnOwppbXBvcnQgeyBTRVRUSU5HIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy9zZXR0aW5ncyc7CmltcG9ydCB7IGlzQWRtaW5Vc2VyIH0gZnJvbSAnQHNoZWxsL3N0b3JlL3R5cGUtbWFwJzsKaW1wb3J0IEJhbm5lciBmcm9tICdAY29tcG9uZW50cy9CYW5uZXIvQmFubmVyLnZ1ZSc7CmltcG9ydCBDaGVja2JveCBmcm9tICdAY29tcG9uZW50cy9Gb3JtL0NoZWNrYm94L0NoZWNrYm94LnZ1ZSc7CmltcG9ydCBMYWJlbGVkSW5wdXQgZnJvbSAnQGNvbXBvbmVudHMvRm9ybS9MYWJlbGVkSW5wdXQvTGFiZWxlZElucHV0LnZ1ZSc7CmltcG9ydCB7IFRvZ2dsZVN3aXRjaCB9IGZyb20gJ0Bjb21wb25lbnRzL0Zvcm0vVG9nZ2xlU3dpdGNoJzsKaW1wb3J0IHsgaXNWYWxpZENyb24gfSBmcm9tICdjcm9uLXZhbGlkYXRvcic7CmltcG9ydCBkYXlqcyBmcm9tICdkYXlqcyc7CmV4cG9ydCBkZWZhdWx0IC8qI19fUFVSRV9fKi8gX2RlZmluZUNvbXBvbmVudCh7CiAgICBfX25hbWU6ICdpbmRleCcsCiAgICBzZXR1cChfX3Byb3BzKSB7CiAgICAgICAgY29uc3Qgc3RvcmUgPSB1c2VTdG9yZSgpOwogICAgICAgIGNvbnN0IHVzZXJSZXRlbnRpb25TZXR0aW5ncyA9IHJlYWN0aXZlKHsKICAgICAgICAgICAgW1NFVFRJTkcuRElTQUJMRV9JTkFDVElWRV9VU0VSX0FGVEVSXTogbnVsbCwKICAgICAgICAgICAgW1NFVFRJTkcuREVMRVRFX0lOQUNUSVZFX1VTRVJfQUZURVJdOiBudWxsLAogICAgICAgICAgICBbU0VUVElORy5VU0VSX1JFVEVOVElPTl9DUk9OXTogbnVsbCwKICAgICAgICAgICAgW1NFVFRJTkcuVVNFUl9SRVRFTlRJT05fRFJZX1JVTl06IG51bGwsCiAgICAgICAgICAgIFtTRVRUSU5HLlVTRVJfTEFTVF9MT0dJTl9ERUZBVUxUXTogbnVsbCwKICAgICAgICB9KTsKICAgICAgICBjb25zdCBkaXNhYmxlQWZ0ZXJQZXJpb2QgPSByZWYoZmFsc2UpOwogICAgICAgIGNvbnN0IGRlbGV0ZUFmdGVyUGVyaW9kID0gcmVmKGZhbHNlKTsKICAgICAgICBjb25zdCBsb2FkaW5nID0gcmVmKHRydWUpOwogICAgICAgIGxldCBzZXR0aW5ncyA9IHt9OwogICAgICAgIC8qKgogICAgICAgICAqIFdhdGNoZXMgdGhlIGRpc2FibGUgYWZ0ZXIgcGVyaW9kIGFuZCByZW1vdmVzIHRoZSB2YWx1ZSBpZiB0aGUgY2hlY2tib3ggaXMKICAgICAgICAgKiBub3Qgc2VsZWN0ZWQuIExvb2t1cCB0aGUgdmFsdWUgd2hlbiB0aGUgY2hlY2tib3ggaXMgc2VsZWN0ZWQuCiAgICAgICAgICovCiAgICAgICAgd2F0Y2goZGlzYWJsZUFmdGVyUGVyaW9kLCAobmV3VmFsKSA9PiB7CiAgICAgICAgICAgIGlmICghbmV3VmFsKSB7CiAgICAgICAgICAgICAgICB1c2VyUmV0ZW50aW9uU2V0dGluZ3NbU0VUVElORy5ESVNBQkxFX0lOQUNUSVZFX1VTRVJfQUZURVJdID0gbnVsbDsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICB1c2VyUmV0ZW50aW9uU2V0dGluZ3NbU0VUVElORy5ESVNBQkxFX0lOQUNUSVZFX1VTRVJfQUZURVJdID0gc2V0dGluZ3NbU0VUVElORy5ESVNBQkxFX0lOQUNUSVZFX1VTRVJfQUZURVJdLnZhbHVlOwogICAgICAgIH0pOwogICAgICAgIC8qKgogICAgICAgICAqIFdhdGNoZXMgdGhlIGRlbGV0ZSBhZnRlciBwZXJpb2QgYW5kIHJlbW92ZXMgdGhlIHZhbHVlIGlmIHRoZSBjaGVja2JveCBpcwogICAgICAgICAqIG5vdCBzZWxlY3RlZC4gTG9va3VwIHRoZSB2YWx1ZSB3aGVuIHRoZSBjaGVja2JveCBpcyBzZWxlY3RlZC4KICAgICAgICAgKi8KICAgICAgICB3YXRjaChkZWxldGVBZnRlclBlcmlvZCwgKG5ld1ZhbCkgPT4gewogICAgICAgICAgICBpZiAoIW5ld1ZhbCkgewogICAgICAgICAgICAgICAgdXNlclJldGVudGlvblNldHRpbmdzW1NFVFRJTkcuREVMRVRFX0lOQUNUSVZFX1VTRVJfQUZURVJdID0gbnVsbDsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICB1c2VyUmV0ZW50aW9uU2V0dGluZ3NbU0VUVElORy5ERUxFVEVfSU5BQ1RJVkVfVVNFUl9BRlRFUl0gPSBzZXR0aW5nc1tTRVRUSU5HLkRFTEVURV9JTkFDVElWRV9VU0VSX0FGVEVSXS52YWx1ZTsKICAgICAgICB9KTsKICAgICAgICAvKioKICAgICAgICAgKiBXYXRjaGVzIGJvdGggdGhlIGRpc2FibGUgYW5kIGRlbGV0ZSBhZnRlciBwZXJpb2RzLiBDbGVhciBhbGwgdmFsdWVzIGluCiAgICAgICAgICogdGhlIGZvcm0gaWYgYm90aCBjaGVja2JveGVzIGFyZSBub3Qgc2VsZWN0ZWQuIElmIG9uZSBvZiB0aGUgY2hlY2tib3hlcwogICAgICAgICAqIGFyZSBzZWxlY3RlZCwgbG9va3VwIGVhY2ggb2YgdGhlIHZhbHVlcyBpbiB0aGUgZm9ybS4KICAgICAgICAgKi8KICAgICAgICB3YXRjaChbZGlzYWJsZUFmdGVyUGVyaW9kLCBkZWxldGVBZnRlclBlcmlvZF0sIChbbmV3RGlzYWJsZUFmdGVyUGVyaW9kLCBuZXdEZWxldGVBZnRlclBlcmlvZF0pID0+IHsKICAgICAgICAgICAgaWYgKCFuZXdEaXNhYmxlQWZ0ZXJQZXJpb2QgJiYgIW5ld0RlbGV0ZUFmdGVyUGVyaW9kKSB7CiAgICAgICAgICAgICAgICBpZHMuZm9yRWFjaCgoa2V5KSA9PiB7CiAgICAgICAgICAgICAgICAgICAgdXNlclJldGVudGlvblNldHRpbmdzW2tleV0gPSBudWxsOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB2YWxpZGF0ZVVzZXJSZXRlbnRpb25Dcm9uKCk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWRzLmZpbHRlcigoaWQpID0+ICFbU0VUVElORy5ESVNBQkxFX0lOQUNUSVZFX1VTRVJfQUZURVIsIFNFVFRJTkcuREVMRVRFX0lOQUNUSVZFX1VTRVJfQUZURVJdLmluY2x1ZGVzKGlkKSkKICAgICAgICAgICAgICAgIC5mb3JFYWNoKGFzc2lnblNldHRpbmdzKTsKICAgICAgICAgICAgdmFsaWRhdGVVc2VyUmV0ZW50aW9uQ3JvbigpOwogICAgICAgIH0pOwogICAgICAgIGNvbnN0IGFzc2lnblNldHRpbmdzID0gKGtleSkgPT4gewogICAgICAgICAgICBpZiAoc2V0dGluZ3Nba2V5XS5pZCA9PT0gU0VUVElORy5VU0VSX0xBU1RfTE9HSU5fREVGQVVMVCAmJiBzZXR0aW5nc1trZXldLnZhbHVlICYmIHR5cGVvZiBzZXR0aW5nc1trZXldLnZhbHVlID09PSAnc3RyaW5nJykgewogICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBzZXR0aW5nc1trZXldLnZhbHVlOwogICAgICAgICAgICAgICAgdXNlclJldGVudGlvblNldHRpbmdzW2tleV0gPSBkYXlqcyh2YWx1ZSkudmFsdWVPZigpLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdXNlclJldGVudGlvblNldHRpbmdzW2tleV0gPSBzZXR0aW5nc1trZXldLnZhbHVlOwogICAgICAgIH07CiAgICAgICAgY29uc3QgZmV0Y2hTZXR0aW5nID0gYXN5bmMgKGlkKSA9PiB7CiAgICAgICAgICAgIHJldHVybiBhd2FpdCBzdG9yZS5kaXNwYXRjaCgnbWFuYWdlbWVudC9maW5kJywgeyB0eXBlOiBNQU5BR0VNRU5ULlNFVFRJTkcsIGlkIH0pOwogICAgICAgIH07CiAgICAgICAgY29uc3QgaWRzID0gT2JqZWN0LmtleXModXNlclJldGVudGlvblNldHRpbmdzKTsKICAgICAgICBjb25zdCBzZXR0aW5nUHJvbWlzZXMgPSBpZHMubWFwKChpZCkgPT4gZmV0Y2hTZXR0aW5nKGlkKSk7CiAgICAgICAgb25Nb3VudGVkKGFzeW5jICgpID0+IHsKICAgICAgICAgICAgc2V0dGluZ3MgPSBhd2FpdCBQcm9taXNlCiAgICAgICAgICAgICAgICAuYWxsKHNldHRpbmdQcm9taXNlcykKICAgICAgICAgICAgICAgIC50aGVuKChyZXN1bHRzKSA9PiByZXN1bHRzLnJlZHVjZSgoYWNjLCByZXN1bHQpID0+IHsKICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgW3Jlc3VsdC5pZF06IHJlc3VsdCwKICAgICAgICAgICAgICAgICAgICAuLi5hY2MsCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9LCB7fSkpOwogICAgICAgICAgICBpZHMuZm9yRWFjaChhc3NpZ25TZXR0aW5ncyk7CiAgICAgICAgICAgIGRpc2FibGVBZnRlclBlcmlvZC52YWx1ZSA9ICEhdXNlclJldGVudGlvblNldHRpbmdzW1NFVFRJTkcuRElTQUJMRV9JTkFDVElWRV9VU0VSX0FGVEVSXTsKICAgICAgICAgICAgZGVsZXRlQWZ0ZXJQZXJpb2QudmFsdWUgPSAhIXVzZXJSZXRlbnRpb25TZXR0aW5nc1tTRVRUSU5HLkRFTEVURV9JTkFDVElWRV9VU0VSX0FGVEVSXTsKICAgICAgICAgICAgbG9hZGluZy52YWx1ZSA9IGZhbHNlOwogICAgICAgICAgICB2YWxpZGF0ZVVzZXJSZXRlbnRpb25Dcm9uKCk7CiAgICAgICAgfSk7CiAgICAgICAgY29uc3QgaXNGb3JtVmFsaWQgPSByZWYoZmFsc2UpOwogICAgICAgIGNvbnN0IHsgdCB9ID0gdXNlSTE4bihzdG9yZSk7CiAgICAgICAgY29uc3QgdmFsaWRhdGVVc2VyUmV0ZW50aW9uQ3JvbiA9ICgpID0+IHsKICAgICAgICAgICAgY29uc3QgeyBbU0VUVElORy5VU0VSX1JFVEVOVElPTl9DUk9OXTogY3JvblNldHRpbmcgfSA9IHVzZXJSZXRlbnRpb25TZXR0aW5nczsKICAgICAgICAgICAgLy8gT25seSByZXF1aXJlIHVzZXIgcmV0ZW50aW9uIGNyb24gd2hlbiBkaXNhYmxlIG9yIGRlbGV0ZSBhZnRlciBhcmUgYWN0aXZlCiAgICAgICAgICAgIGlmICghZGlzYWJsZUFmdGVyUGVyaW9kLnZhbHVlICYmICFkZWxldGVBZnRlclBlcmlvZC52YWx1ZSkgewogICAgICAgICAgICAgICAgaXNGb3JtVmFsaWQudmFsdWUgPSB0cnVlOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICghY3JvblNldHRpbmcpIHsKICAgICAgICAgICAgICAgIGlzRm9ybVZhbGlkLnZhbHVlID0gZmFsc2U7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHR5cGVvZiBjcm9uU2V0dGluZyA9PT0gJ3N0cmluZycgJiYgIWlzVmFsaWRDcm9uKGNyb25TZXR0aW5nKSkgewogICAgICAgICAgICAgICAgaXNGb3JtVmFsaWQudmFsdWUgPSBmYWxzZTsKICAgICAgICAgICAgICAgIHJldHVybiB0KCd1c2VyLnJldGVudGlvbi5lZGl0LmZvcm0uY3Jvbi5lcnJvck1lc3NhZ2UnKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpc0Zvcm1WYWxpZC52YWx1ZSA9IHRydWU7CiAgICAgICAgfTsKICAgICAgICBjb25zdCBlcnJvciA9IHJlZihudWxsKTsKICAgICAgICBjb25zdCBzYXZlID0gYXN5bmMgKGJ0bkNCKSA9PiB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBlcnJvci52YWx1ZSA9IG51bGw7CiAgICAgICAgICAgICAgICBpZHMuZm9yRWFjaCgoa2V5KSA9PiB7CiAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3Nba2V5XS52YWx1ZSA9IHVzZXJSZXRlbnRpb25TZXR0aW5nc1trZXldOwogICAgICAgICAgICAgICAgICAgIGlmIChrZXkgPT09IFNFVFRJTkcuVVNFUl9MQVNUX0xPR0lOX0RFRkFVTFQgJiYgdXNlclJldGVudGlvblNldHRpbmdzW2tleV0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3Nba2V5XS52YWx1ZSA9IGRheWpzKE51bWJlcih1c2VyUmV0ZW50aW9uU2V0dGluZ3Nba2V5XSkpLmZvcm1hdCgpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoaWRzLm1hcCgoc2V0dGluZykgPT4gc2V0dGluZ3Nbc2V0dGluZ10uc2F2ZSgpKSk7CiAgICAgICAgICAgICAgICBidG5DQih0cnVlKTsKICAgICAgICAgICAgICAgIHN0b3JlLmRpc3BhdGNoKCdncm93bC9zdWNjZXNzJywgewogICAgICAgICAgICAgICAgICAgIHRpdGxlOiB0KCd1c2VyLnJldGVudGlvbi5ncm93bC50aXRsZScpLAogICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHQoJ3VzZXIucmV0ZW50aW9uLmdyb3dsLm1lc3NhZ2UnKSwKICAgICAgICAgICAgICAgIH0sIHsgcm9vdDogdHJ1ZSB9KTsKICAgICAgICAgICAgICAgIHJvdXRlQmFjaygpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgICAgIGVycm9yLnZhbHVlID0gZXJyLm1lc3NhZ2U7CiAgICAgICAgICAgICAgICBidG5DQihmYWxzZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIGNvbnN0IHJvdXRlciA9IHVzZVJvdXRlcigpOwogICAgICAgIGNvbnN0IHJvdXRlQmFjayA9ICgpID0+IHsKICAgICAgICAgICAgcm91dGVyLmJhY2soKTsKICAgICAgICB9OwogICAgICAgIG9uQmVmb3JlUm91dGVVcGRhdGUoKF90bywgX2Zyb20pID0+IHsKICAgICAgICAgICAgaWYgKCFpc0FkbWluVXNlcihzdG9yZS5nZXR0ZXJzKSkgewogICAgICAgICAgICAgICAgcm91dGVyLnJlcGxhY2UoeyBuYW1lOiAnaG9tZScgfSk7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICByZXR1cm4geyBfX3NmYzogdHJ1ZSwgc3RvcmUsIHVzZXJSZXRlbnRpb25TZXR0aW5ncywgZGlzYWJsZUFmdGVyUGVyaW9kLCBkZWxldGVBZnRlclBlcmlvZCwgbG9hZGluZywgc2V0dGluZ3MsIGFzc2lnblNldHRpbmdzLCBmZXRjaFNldHRpbmcsIGlkcywgc2V0dGluZ1Byb21pc2VzLCBpc0Zvcm1WYWxpZCwgdCwgdmFsaWRhdGVVc2VyUmV0ZW50aW9uQ3JvbiwgZXJyb3IsIHNhdmUsIHJvdXRlciwgcm91dGVCYWNrLCBVc2VyUmV0ZW50aW9uSGVhZGVyLCBGb290ZXIsIFNFVFRJTkcsIEJhbm5lciwgQ2hlY2tib3gsIExhYmVsZWRJbnB1dCwgVG9nZ2xlU3dpdGNoIH07CiAgICB9Cn0pOwo="},{"version":3,"file":"/home/ubuntu/suseconf/node_modules/@rancher/shell/pages/c/_cluster/auth/user.retention/index.vue.tsx","sourceRoot":"","sources":["/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/ubuntu/suseconf/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ubuntu/suseconf/node_modules/@rancher/shell/pages/c/_cluster/auth/user.retention/index.vue?vue&type=script&lang=ts&setup=true"],"names":[],"mappings":"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","sourcesContent":["import { defineComponent as _defineComponent } from 'vue'\nimport { ref, reactive, watch, onMounted } from 'vue';\nimport { useRouter, onBeforeRouteUpdate } from 'vue-router/composables';\n\nimport UserRetentionHeader from '@shell/components/user.retention/user-retention-header.vue';\nimport Footer from '@shell/components/form/Footer.vue';\nimport { useStore } from '@shell/composables/useStore';\nimport { useI18n } from '@shell/composables/useI18n';\nimport { MANAGEMENT } from '@shell/config/types';\nimport { SETTING } from '@shell/config/settings';\nimport { isAdminUser } from '@shell/store/type-map';\n\nimport Banner from '@components/Banner/Banner.vue';\nimport Checkbox from '@components/Form/Checkbox/Checkbox.vue';\nimport LabeledInput from '@components/Form/LabeledInput/LabeledInput.vue';\nimport { ToggleSwitch } from '@components/Form/ToggleSwitch';\n\nimport { isValidCron } from 'cron-validator';\nimport dayjs from 'dayjs';\n\ntype Links = {\n  remove: string;\n  self: string;\n  update: string;\n  view: string;\n};\n\ntype FieldsV1 = {\n  'f:customized': {};\n  'f:default': {};\n  'f:source': {};\n  'f:value': {};\n};\n\ntype ManagedFields = {\n  apiVersion: string;\n  fieldsType: string;\n  fieldsV1: FieldsV1;\n  manager: string;\n  operation: string;\n  time: string;\n};\n\ntype Metadata = {\n  creationTimestamp: string;\n  fields: string[];\n  generation: number;\n  managedFields: ManagedFields[];\n  name: string;\n  relationships: null;\n  resourceVersion: string;\n  state: {\n    error: boolean;\n    message: string;\n    name: string;\n    transitioning: boolean;\n  };\n  uid: string;\n};\n\ntype Setting = {\n  id: string;\n  type: string;\n  links: Links;\n  apiVersion: string;\n  customized: boolean;\n  default: string;\n  kind: string;\n  metadata: Metadata;\n  source: string;\n  value: string | null;\n  save: () => void;\n};\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'index',\n  setup(__props) {\n\nconst store = useStore();\nconst userRetentionSettings = reactive<{[id: string]: string | null }>({\n  [SETTING.DISABLE_INACTIVE_USER_AFTER]: null,\n  [SETTING.DELETE_INACTIVE_USER_AFTER]:  null,\n  [SETTING.USER_RETENTION_CRON]:         null,\n  [SETTING.USER_RETENTION_DRY_RUN]:      null,\n  [SETTING.USER_LAST_LOGIN_DEFAULT]:     null,\n});\nconst disableAfterPeriod = ref(false);\nconst deleteAfterPeriod = ref(false);\nconst loading = ref(true);\nlet settings: { [id: string]: Setting } = {};\n\n/**\n * Watches the disable after period and removes the value if the checkbox is\n * not selected. Lookup the value when the checkbox is selected.\n */\nwatch(disableAfterPeriod, (newVal) => {\n  if (!newVal) {\n    userRetentionSettings[SETTING.DISABLE_INACTIVE_USER_AFTER] = null;\n\n    return;\n  }\n\n  userRetentionSettings[SETTING.DISABLE_INACTIVE_USER_AFTER] = settings[SETTING.DISABLE_INACTIVE_USER_AFTER].value;\n});\n\n/**\n * Watches the delete after period and removes the value if the checkbox is\n * not selected. Lookup the value when the checkbox is selected.\n */\nwatch(deleteAfterPeriod, (newVal) => {\n  if (!newVal) {\n    userRetentionSettings[SETTING.DELETE_INACTIVE_USER_AFTER] = null;\n\n    return;\n  }\n\n  userRetentionSettings[SETTING.DELETE_INACTIVE_USER_AFTER] = settings[SETTING.DELETE_INACTIVE_USER_AFTER].value;\n});\n\n/**\n * Watches both the disable and delete after periods. Clear all values in\n * the form if both checkboxes are not selected. If one of the checkboxes\n * are selected, lookup each of the values in the form.\n */\nwatch([disableAfterPeriod, deleteAfterPeriod], ([newDisableAfterPeriod, newDeleteAfterPeriod]) => {\n  if (!newDisableAfterPeriod && !newDeleteAfterPeriod) {\n    ids.forEach((key) => {\n      userRetentionSettings[key] = null;\n    });\n\n    validateUserRetentionCron();\n\n    return;\n  }\n\n  ids.filter((id) => ![SETTING.DISABLE_INACTIVE_USER_AFTER, SETTING.DELETE_INACTIVE_USER_AFTER].includes(id))\n    .forEach(assignSettings);\n\n  validateUserRetentionCron();\n});\n\nconst assignSettings = (key: string) => {\n  if (settings[key].id === SETTING.USER_LAST_LOGIN_DEFAULT && settings[key].value && typeof settings[key].value === 'string') {\n    const value = settings[key].value as string;\n\n    userRetentionSettings[key] = dayjs(value).valueOf().toString();\n\n    return;\n  }\n\n  userRetentionSettings[key] = settings[key].value;\n};\n\nconst fetchSetting = async(id: string) => {\n  return await store.dispatch('management/find', { type: MANAGEMENT.SETTING, id });\n};\n\nconst ids = Object.keys(userRetentionSettings);\nconst settingPromises = ids.map((id) => fetchSetting(id));\n\nonMounted(async() => {\n  settings = await Promise\n    .all(settingPromises)\n    .then((results) => results.reduce((acc, result) => {\n      return {\n        [result.id]: result,\n        ...acc,\n      };\n    }, { }));\n\n  ids.forEach(assignSettings);\n\n  disableAfterPeriod.value = !!userRetentionSettings[SETTING.DISABLE_INACTIVE_USER_AFTER];\n  deleteAfterPeriod.value = !!userRetentionSettings[SETTING.DELETE_INACTIVE_USER_AFTER];\n  loading.value = false;\n\n  validateUserRetentionCron();\n});\n\nconst isFormValid = ref(false);\nconst { t } = useI18n(store);\nconst validateUserRetentionCron = () => {\n  const { [SETTING.USER_RETENTION_CRON]: cronSetting } = userRetentionSettings;\n\n  // Only require user retention cron when disable or delete after are active\n  if (!disableAfterPeriod.value && !deleteAfterPeriod.value) {\n    isFormValid.value = true;\n\n    return;\n  }\n\n  if (!cronSetting) {\n    isFormValid.value = false;\n\n    return;\n  }\n\n  if (typeof cronSetting === 'string' && !isValidCron(cronSetting)) {\n    isFormValid.value = false;\n\n    return t('user.retention.edit.form.cron.errorMessage');\n  }\n\n  isFormValid.value = true;\n};\n\nconst error = ref<string | null>(null);\nconst save = async(btnCB: (arg: boolean) => void) => {\n  try {\n    error.value = null;\n    ids.forEach((key) => {\n      settings[key].value = userRetentionSettings[key];\n\n      if (key === SETTING.USER_LAST_LOGIN_DEFAULT && userRetentionSettings[key]) {\n        settings[key].value = dayjs(Number(userRetentionSettings[key])).format();\n      }\n    });\n\n    await Promise.all(ids.map((setting) => settings[setting].save()));\n\n    btnCB(true);\n    store.dispatch(\n      'growl/success',\n      {\n        title:   t('user.retention.growl.title'),\n        message: t('user.retention.growl.message'),\n      },\n      { root: true }\n    );\n    routeBack();\n  } catch (err) {\n    error.value = (err as Error).message;\n    btnCB(false);\n  }\n};\n\nconst router = useRouter();\nconst routeBack = () => {\n  router.back();\n};\n\nonBeforeRouteUpdate((_to: unknown, _from: unknown) => {\n  if (!isAdminUser(store.getters)) {\n    router.replace({ name: 'home' });\n  }\n});\n\nreturn { __sfc: true,store, userRetentionSettings, disableAfterPeriod, deleteAfterPeriod, loading, settings, assignSettings, fetchSetting, ids, settingPromises, isFormValid, t, validateUserRetentionCron, error, save, router, routeBack, UserRetentionHeader, Footer, SETTING, Banner, Checkbox, LabeledInput, ToggleSwitch }\n}\n\n})"]}]}