{"remainingRequest":"/home/ubuntu/suseconf/node_modules/ts-loader/index.js??ref--17-1!/home/ubuntu/suseconf/node_modules/@rancher/shell/utils/pagination-utils.ts","dependencies":[{"path":"/home/ubuntu/suseconf/node_modules/@rancher/shell/utils/pagination-utils.ts","mtime":1725338146566},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js","mtime":1725271298942},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/ts-loader/index.js","mtime":1725271299135}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgTkFNRVNQQUNFX0ZJTFRFUl9BTExfVVNFUiBhcyBBTExfVVNFUiwgTkFNRVNQQUNFX0ZJTFRFUl9BTEwgYXMgQUxMLCBOQU1FU1BBQ0VfRklMVEVSX0FMTF9TWVNURU0gYXMgQUxMX1NZU1RFTSwgTkFNRVNQQUNFX0ZJTFRFUl9OQU1FU1BBQ0VEX1lFUyBhcyBOQU1FU1BBQ0VEX1lFUywgTkFNRVNQQUNFX0ZJTFRFUl9OQU1FU1BBQ0VEX05PIGFzIE5BTUVTUEFDRURfTk8sIE5BTUVTUEFDRV9GSUxURVJfS0lORFMsIE5BTUVTUEFDRV9GSUxURVJfTlNfRlVMTF9QUkVGSVgsIE5BTUVTUEFDRV9GSUxURVJfUF9GVUxMX1BSRUZJWCwgfSBmcm9tICdAc2hlbGwvdXRpbHMvbmFtZXNwYWNlLWZpbHRlcic7CmltcG9ydCB7IHNhbWVBcnJheU9iamVjdHMgfSBmcm9tICdAc2hlbGwvdXRpbHMvYXJyYXknOwppbXBvcnQgeyBpc0VxdWFsIH0gZnJvbSAnQHNoZWxsL3V0aWxzL29iamVjdCc7CmltcG9ydCB7IFNURVZFX0NBQ0hFIH0gZnJvbSAnQHNoZWxsL3N0b3JlL2ZlYXR1cmVzJzsKaW1wb3J0IHsgZ2V0UGVyZm9ybWFuY2VTZXR0aW5nIH0gZnJvbSAnQHNoZWxsL3V0aWxzL3NldHRpbmdzJzsKLyoqCiAqIEhlbHBlciBmdW5jdGlvbnMgZm9yIHNlcnZlciBzaWRlIHBhZ2luYXRpb24KICovCmNsYXNzIFBhZ2luYXRpb25VdGlscyB7CiAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgICAvKioKICAgICAgICAgKiBXaGVuIGEgbnMgZmlsdGVyIGlzbid0IG9uZSBvciBtb3JlIHByb2plY3RzL25hbWVzcGFjZXMuLi4gd2hhdCBhcmUgdGhlIHZhbGlkIHZhbHVlcz8KICAgICAgICAgKgogICAgICAgICAqIFRoaXMgYmFzaWNhbGx5IGJsb2NrcyAnTm90IGluIGEgUHJvamVjdCcuLiB3aGljaCB3b3VsZCBpbnZvbHZlIGEgcHJvamVjdHNvcm5hbWVzcGFjZXMgcGFyYW0gd2l0aCBldmVyeSBucyBub3QgaW4gYSBwcm9qZWN0LgogICAgICAgICAqLwogICAgICAgIHRoaXMudmFsaWROc1Byb2plY3RGaWx0ZXJzID0gW0FMTCwgQUxMX1NZU1RFTSwgQUxMX1VTRVIsIEFMTF9TWVNURU0sIE5BTUVTUEFDRV9GSUxURVJfS0lORFMuTkFNRVNQQUNFLCBOQU1FU1BBQ0VfRklMVEVSX0tJTkRTLlBST0pFQ1QsIE5BTUVTUEFDRURfWUVTLCBOQU1FU1BBQ0VEX05PXTsKICAgIH0KICAgIGdldFNldHRpbmdzKHsgcm9vdEdldHRlcnMgfSkgewogICAgICAgIGNvbnN0IHBlcmYgPSBnZXRQZXJmb3JtYW5jZVNldHRpbmcocm9vdEdldHRlcnMpOwogICAgICAgIHJldHVybiBwZXJmLnNlcnZlclBhZ2luYXRpb247CiAgICB9CiAgICBpc1N0ZXZlQ2FjaGVFbmFibGVkKHsgcm9vdEdldHRlcnMgfSkgewogICAgICAgIHZhciBfYTsKICAgICAgICAvLyBXZSBhbHdheXMgZ2V0IEZlYXR1cmUgZmxhZ3MgYXMgcGFydCBvZiBzdGFydCB1cCAoc2VlIGBkaXNwYXRjaCgnZmVhdHVyZXMvbG9hZFNlcnZlcicpYCBpbiBsb2FkTWFuYWdlbWVudCkKICAgICAgICByZXR1cm4gKF9hID0gcm9vdEdldHRlcnNbJ2ZlYXR1cmVzL2dldCddKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuY2FsbChyb290R2V0dGVycywgU1RFVkVfQ0FDSEUpOwogICAgfQogICAgLyoqCiAgICAgKiBJcyBwYWdpbmF0aW9uIGVuYWJsZWQgYXQgYSBnbG9iYWwgbGV2ZWwgb3IgZm9yIGEgc3BlY2lmaWMgcmVzb3VyY2UKICAgICAqLwogICAgaXNFbmFibGVkKHsgcm9vdEdldHRlcnMgfSwgZW5hYmxlZEZvcikgewogICAgICAgIHZhciBfYTsKICAgICAgICAvLyBDYWNoZSBtdXN0IGJlIGVuYWJsZWQgdG8gc3VwcG9ydCBwYWdpbmF0aW9uIGFwaQogICAgICAgIGlmICghdGhpcy5pc1N0ZXZlQ2FjaGVFbmFibGVkKHsgcm9vdEdldHRlcnMgfSkpIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgICBjb25zdCBzZXR0aW5ncyA9IHRoaXMuZ2V0U2V0dGluZ3MoeyByb290R2V0dGVycyB9KTsKICAgICAgICAvLyBObyBzZXR0aW5nLCBub3QgZW5hYmxlZAogICAgICAgIGlmICghKHNldHRpbmdzID09PSBudWxsIHx8IHNldHRpbmdzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzZXR0aW5ncy5lbmFibGVkKSkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICAgIC8vIE1pc3NpbmcgcmVxdWlyZWQgcGFyYW1zLCBub3QgZW5hYmxlZAogICAgICAgIGlmICghZW5hYmxlZEZvcikgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICAgIGNvbnN0IHN0b3JlU2V0dGluZ3MgPSAoX2EgPSBzZXR0aW5ncy5zdG9yZXMpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYVtlbmFibGVkRm9yLnN0b3JlXTsKICAgICAgICAvLyBObyBwYWdpbmF0aW9uIHNldHRpbmcgZm9yIHRhcmdldCBzdG9yZSwgbm90IGVuYWJsZWQKICAgICAgICBpZiAoIXN0b3JlU2V0dGluZ3MpIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgICAvLyBOb3QgaW50ZXJlc3RlZCBpbiBhIHJlc291cmNlLCBzbyBqdXN0IHRvcCBsZXZlbCBzZXR0aW5ncyBhcmUgY2hlY2tlZAogICAgICAgIGlmICghZW5hYmxlZEZvci5yZXNvdXJjZSkgewogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgLy8gU3RvcmUgc2F5cyBhbGwgcmVzb3VyY2VzIGFyZSBlbmFibGVkCiAgICAgICAgaWYgKHN0b3JlU2V0dGluZ3MucmVzb3VyY2VzLmVuYWJsZUFsbCkgewogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgLy8gZ2l2ZW4gYSByZXNvdXJjZS4uLiBidXQgbm8gaWQuLi4gaW52YWxpZAogICAgICAgIGlmICghZW5hYmxlZEZvci5yZXNvdXJjZS5pZCkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICAgIC8vIFN0b3JlIHNheXMgb25seSBzb21lICh0aG9zZSB0aGF0IGhhdmUgcGFnaW5hdGlvbiBjb2x1bW5zIG5vdCBmcm9tIHNjaGVtYSBhbmQgbm8gY3VzdG9tIGxpc3QpCiAgICAgICAgY29uc3QgaXNHZW5lcmljID0gIXJvb3RHZXR0ZXJzWyd0eXBlLW1hcC9jb25maWd1cmVkSGVhZGVycyddKGVuYWJsZWRGb3IucmVzb3VyY2UuaWQpICYmCiAgICAgICAgICAgICFyb290R2V0dGVyc1sndHlwZS1tYXAvY29uZmlndXJlZFBhZ2luYXRpb25IZWFkZXJzJ10oZW5hYmxlZEZvci5yZXNvdXJjZS5pZCkgJiYKICAgICAgICAgICAgIXJvb3RHZXR0ZXJzWyd0eXBlLW1hcC9oYXNDdXN0b21MaXN0J10oZW5hYmxlZEZvci5yZXNvdXJjZS5pZCk7CiAgICAgICAgaWYgKHN0b3JlU2V0dGluZ3MucmVzb3VyY2VzLmVuYWJsZVNvbWUuZ2VuZXJpYyAmJiBpc0dlbmVyaWMpIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICAgIGlmIChzdG9yZVNldHRpbmdzLnJlc291cmNlcy5lbmFibGVTb21lLmVuYWJsZWQuaW5jbHVkZXMoZW5hYmxlZEZvci5yZXNvdXJjZS5pZCkpIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIHZhbGlkYXRlTnNQcm9qZWN0RmlsdGVycyhuc1Byb2plY3RGaWx0ZXJzKSB7CiAgICAgICAgcmV0dXJuIG5zUHJvamVjdEZpbHRlcnMgPT09IG51bGwgfHwgbnNQcm9qZWN0RmlsdGVycyA9PT0gdm9pZCAwID8gdm9pZCAwIDogbnNQcm9qZWN0RmlsdGVycy5ldmVyeSgoZikgPT4gdGhpcy52YWxpZGF0ZU5zUHJvamVjdEZpbHRlcihmKSk7CiAgICB9CiAgICB2YWxpZGF0ZU5zUHJvamVjdEZpbHRlcihuc1Byb2plY3RGaWx0ZXIpIHsKICAgICAgICBpZiAobnNQcm9qZWN0RmlsdGVyLnN0YXJ0c1dpdGgoTkFNRVNQQUNFX0ZJTFRFUl9OU19GVUxMX1BSRUZJWCkgfHwgbnNQcm9qZWN0RmlsdGVyLnN0YXJ0c1dpdGgoTkFNRVNQQUNFX0ZJTFRFUl9QX0ZVTExfUFJFRklYKSkgewogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHRoaXMudmFsaWROc1Byb2plY3RGaWx0ZXJzLmluY2x1ZGVzKG5zUHJvamVjdEZpbHRlcik7CiAgICB9CiAgICBwYWdpbmF0aW9uRmlsdGVyRXF1YWwoYSwgYikgewogICAgICAgIGlmIChhLnBhcmFtICE9PSBiLnBhcmFtIHx8IGEuZXF1YWxzICE9PSBiLmVxdWFscykgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICAgIHJldHVybiBzYW1lQXJyYXlPYmplY3RzKGEuZmllbGRzLCBiLmZpZWxkcywgdHJ1ZSk7CiAgICB9CiAgICBwYWdpbmF0aW9uRmlsdGVyc0VxdWFsKGEsIGIpIHsKICAgICAgICBpZiAoISFhICYmIChhID09PSBudWxsIHx8IGEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGEubGVuZ3RoKSAhPT0gKGIgPT09IG51bGwgfHwgYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogYi5sZW5ndGgpKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGlmICghdGhpcy5wYWdpbmF0aW9uRmlsdGVyRXF1YWwoYVtpXSwgYltpXSkpIHsKICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIHBhZ2luYXRpb25FcXVhbChhLCBiKSB7CiAgICAgICAgY29uc3QgeyBmaWx0ZXJzOiBhRmlsdGVyID0gW10sIHNvcnQ6IGFTb3J0ID0gW10sIHByb2plY3RzT3JOYW1lc3BhY2VzOiBhUE4gPSBbXSwgLi4uYVByaW1pdGl2ZVR5cGVzIH0gPSBhIHx8IHt9OwogICAgICAgIGNvbnN0IHsgZmlsdGVyczogYkZpbHRlciA9IFtdLCBzb3J0OiBiU29ydCA9IFtdLCBwcm9qZWN0c09yTmFtZXNwYWNlczogYlBOID0gW10sIC4uLmJQcmltaXRpdmVUeXBlcyB9ID0gYiB8fCB7fTsKICAgICAgICByZXR1cm4gaXNFcXVhbChhUHJpbWl0aXZlVHlwZXMsIGJQcmltaXRpdmVUeXBlcykgJiYKICAgICAgICAgICAgdGhpcy5wYWdpbmF0aW9uRmlsdGVyc0VxdWFsKGFGaWx0ZXIsIGJGaWx0ZXIpICYmCiAgICAgICAgICAgIHRoaXMucGFnaW5hdGlvbkZpbHRlcnNFcXVhbChhUE4sIGJQTikgJiYKICAgICAgICAgICAgc2FtZUFycmF5T2JqZWN0cyhhU29ydCwgYlNvcnQsIHRydWUpOwogICAgfQp9CmV4cG9ydCBkZWZhdWx0IG5ldyBQYWdpbmF0aW9uVXRpbHMoKTsK"},{"version":3,"file":"/home/ubuntu/suseconf/node_modules/@rancher/shell/utils/pagination-utils.ts","sourceRoot":"","sources":["/home/ubuntu/suseconf/node_modules/@rancher/shell/utils/pagination-utils.ts"],"names":[],"mappings":"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","sourcesContent":["import { PaginationSettings } from '@shell/types/resources/settings';\nimport {\n  NAMESPACE_FILTER_ALL_USER as ALL_USER,\n  NAMESPACE_FILTER_ALL as ALL,\n  NAMESPACE_FILTER_ALL_SYSTEM as ALL_SYSTEM,\n  NAMESPACE_FILTER_NAMESPACED_YES as NAMESPACED_YES,\n  NAMESPACE_FILTER_NAMESPACED_NO as NAMESPACED_NO,\n  NAMESPACE_FILTER_KINDS,\n  NAMESPACE_FILTER_NS_FULL_PREFIX,\n  NAMESPACE_FILTER_P_FULL_PREFIX,\n} from '@shell/utils/namespace-filter';\nimport { PaginationArgs, PaginationParam, PaginationSort } from '@shell/types/store/pagination.types';\nimport { sameArrayObjects } from '@shell/utils/array';\nimport { isEqual } from '@shell/utils/object';\nimport { STEVE_CACHE } from '@shell/store/features';\nimport { getPerformanceSetting } from '@shell/utils/settings';\n\n/**\n * Helper functions for server side pagination\n */\nclass PaginationUtils {\n  /**\n   * When a ns filter isn't one or more projects/namespaces... what are the valid values?\n   *\n   * This basically blocks 'Not in a Project'.. which would involve a projectsornamespaces param with every ns not in a project.\n   */\n  validNsProjectFilters = [ALL, ALL_SYSTEM, ALL_USER, ALL_SYSTEM, NAMESPACE_FILTER_KINDS.NAMESPACE, NAMESPACE_FILTER_KINDS.PROJECT, NAMESPACED_YES, NAMESPACED_NO];\n\n  private getSettings({ rootGetters }: any): PaginationSettings {\n    const perf = getPerformanceSetting(rootGetters);\n\n    return perf.serverPagination;\n  }\n\n  isSteveCacheEnabled({ rootGetters }: any): boolean {\n    // We always get Feature flags as part of start up (see `dispatch('features/loadServer')` in loadManagement)\n    return rootGetters['features/get']?.(STEVE_CACHE);\n  }\n\n  /**\n   * Is pagination enabled at a global level or for a specific resource\n   */\n  isEnabled({ rootGetters }: any, enabledFor: {\n    store: string,\n    resource?: {\n      id: string,\n    }\n  }) {\n    // Cache must be enabled to support pagination api\n    if (!this.isSteveCacheEnabled({ rootGetters })) {\n      return false;\n    }\n\n    const settings = this.getSettings({ rootGetters });\n\n    // No setting, not enabled\n    if (!settings?.enabled) {\n      return false;\n    }\n\n    // Missing required params, not enabled\n    if (!enabledFor) {\n      return false;\n    }\n\n    const storeSettings = settings.stores?.[enabledFor.store];\n\n    // No pagination setting for target store, not enabled\n    if (!storeSettings) {\n      return false;\n    }\n\n    // Not interested in a resource, so just top level settings are checked\n    if (!enabledFor.resource) {\n      return true;\n    }\n\n    // Store says all resources are enabled\n    if (storeSettings.resources.enableAll) {\n      return true;\n    }\n\n    // given a resource... but no id... invalid\n    if (!enabledFor.resource.id) {\n      return false;\n    }\n\n    // Store says only some (those that have pagination columns not from schema and no custom list)\n    const isGeneric =\n      !rootGetters['type-map/configuredHeaders'](enabledFor.resource.id) &&\n      !rootGetters['type-map/configuredPaginationHeaders'](enabledFor.resource.id) &&\n      !rootGetters['type-map/hasCustomList'](enabledFor.resource.id);\n\n    if (storeSettings.resources.enableSome.generic && isGeneric) {\n      return true;\n    }\n\n    if (storeSettings.resources.enableSome.enabled.includes(enabledFor.resource.id)) {\n      return true;\n    }\n\n    return false;\n  }\n\n  validateNsProjectFilters(nsProjectFilters: string[]) {\n    return nsProjectFilters?.every((f) => this.validateNsProjectFilter(f));\n  }\n\n  validateNsProjectFilter(nsProjectFilter: string) {\n    if (nsProjectFilter.startsWith(NAMESPACE_FILTER_NS_FULL_PREFIX) || nsProjectFilter.startsWith(NAMESPACE_FILTER_P_FULL_PREFIX)) {\n      return true;\n    }\n\n    return this.validNsProjectFilters.includes(nsProjectFilter);\n  }\n\n  paginationFilterEqual(a: PaginationParam, b: PaginationParam): boolean {\n    if (a.param !== b.param || a.equals !== b.equals) {\n      return false;\n    }\n\n    return sameArrayObjects(a.fields, b.fields, true);\n  }\n\n  paginationFiltersEqual(a: PaginationParam[], b: PaginationParam[]): boolean {\n    if (!!a && a?.length !== b?.length) {\n      return false;\n    }\n\n    for (let i = 0; i < a.length; i++) {\n      if (!this.paginationFilterEqual(a[i], b[i])) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  paginationEqual(a?: PaginationArgs, b?: PaginationArgs): boolean {\n    const {\n      filters: aFilter = [], sort: aSort = [], projectsOrNamespaces: aPN = [], ...aPrimitiveTypes\n    } = a || {};\n    const {\n      filters: bFilter = [], sort: bSort = [], projectsOrNamespaces: bPN = [], ...bPrimitiveTypes\n    } = b || {};\n\n    return isEqual(aPrimitiveTypes, bPrimitiveTypes) &&\n      this.paginationFiltersEqual(aFilter, bFilter) &&\n      this.paginationFiltersEqual(aPN, bPN) &&\n      sameArrayObjects<PaginationSort>(aSort, bSort, true);\n  }\n}\n\nexport default new PaginationUtils();\n"]}]}