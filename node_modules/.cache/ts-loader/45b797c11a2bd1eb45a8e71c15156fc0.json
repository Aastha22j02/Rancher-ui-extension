{"remainingRequest":"/home/ubuntu/susecon-2024-ext-demo/node_modules/ts-loader/index.js??ref--17-1!/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/utils/validators/formRules/index.ts","dependencies":[{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/utils/validators/formRules/index.ts","mtime":1725271280091},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/babel-loader/lib/index.js","mtime":1725271298942},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/ts-loader/index.js","mtime":1725271299135}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgUkJBQyB9IGZyb20gJ0BzaGVsbC9jb25maWcvdHlwZXMnOwppbXBvcnQgeyBIQ0kgfSBmcm9tICdAc2hlbGwvY29uZmlnL2xhYmVscy1hbm5vdGF0aW9ucyc7CmltcG9ydCBpc0VtcHR5IGZyb20gJ2xvZGFzaC9pc0VtcHR5JzsKaW1wb3J0IGhhcyBmcm9tICdsb2Rhc2gvaGFzJzsKaW1wb3J0IGlzVXJsIGZyb20gJ2lzLXVybCc7Ci8vIGltcG9ydCB1bmlxIGZyb20gJ2xvZGFzaC91bmlxJzsKaW1wb3J0IGNyb25zdHJ1ZSBmcm9tICdjcm9uc3RydWUnOwppbXBvcnQgeyBpc0h0dHBzLCBpc0xvY2FsaG9zdCwgaGFzVHJhaWxpbmdGb3J3YXJkU2xhc2ggfSBmcm9tICdAc2hlbGwvdXRpbHMvdmFsaWRhdG9ycy9zZXR0aW5nJzsKZXhwb3J0IGNsYXNzIFBvcnQgewogICAgY29uc3RydWN0b3IocG9ydCkgewogICAgICAgIHRoaXMuc3RyaW5nID0gU3RyaW5nKHBvcnQpOwogICAgICAgIHRoaXMuaW50ID0gcGFyc2VJbnQodGhpcy5zdHJpbmcsIDEwKTsKICAgICAgICB0aGlzLmVtcHR5ID0gKCFwb3J0ICYmIHRoaXMuaW50ICE9PSAwKTsKICAgICAgICB0aGlzLmlzTnVtYmVyID0gIWlzTmFOKHRoaXMuaW50KSAmJiAhdGhpcy5zdHJpbmcuaW5jbHVkZXMoJ2UnKTsgLy8gbGVhdmluZyBvdXQgdGhlIGV4cG9uZW50IGVkZ2UgY2FzZSB0byBrZWVwIHRoZSBsb2dpYyBzaW1wbGUgYW5kIGJlY2F1c2UgcG9ydCBudW1iZXJzIGFyZW4ndCB0aGF0IGJpZy4uLgogICAgICAgIHRoaXMuaXNJbnQgPSB0aGlzLmlzTnVtYmVyICYmICF0aGlzLnN0cmluZy5pbmNsdWRlcygnLicpOwogICAgfQp9CmNvbnN0IHJ1blZhbGlkYXRvcnMgPSAodmFsLCB2YWxpZGF0b3JzKSA9PiB7CiAgICBmb3IgKGNvbnN0IHZhbGlkYXRvciBvZiB2YWxpZGF0b3JzKSB7CiAgICAgICAgY29uc3QgbWVzc2FnZSA9IHZhbGlkYXRvcih2YWwpOwogICAgICAgIGlmIChtZXNzYWdlKSB7CiAgICAgICAgICAgIHJldHVybiBtZXNzYWdlOwogICAgICAgIH0KICAgIH0KfTsKLy8gInQiIGlzIHRoZSBmdW5jdGlvbiBuYW1lIHdlIHVzZSBmb3IgZ2V0dGluZyBhIHRyYW5zbGF0ZWQgc3RyaW5nCmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uICh0LCB7IGtleSA9ICdWYWx1ZScgfSkgewogICAgLy8gdXRpbGl0eSB2YWxpZGF0b3JzIHRoZXNlIHZhbGlkYXRvcnMgb25seSBnZXQgdXNlZCBieSBvdGhlciB2YWxpZGF0b3JzCiAgICBjb25zdCBzdGFydERvdCA9IChsYWJlbCkgPT4gKHZhbCkgPT4gKHZhbCA9PT0gbnVsbCB8fCB2YWwgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHZhbC5zbGljZSgwLCAxKSkgPT09ICcuJyA/IHQoYHZhbGlkYXRpb24uZG5zLiR7bGFiZWx9LnN0YXJ0RG90YCwgeyBrZXkgfSkgOiB1bmRlZmluZWQ7CiAgICBjb25zdCBlbmREb3QgPSAobGFiZWwpID0+ICh2YWwpID0+ICh2YWwgPT09IG51bGwgfHwgdmFsID09PSB2b2lkIDAgPyB2b2lkIDAgOiB2YWwuc2xpY2UoLTEpKSA9PT0gJy4nID8gdChgdmFsaWRhdGlvbi5kbnMuJHtsYWJlbH0uZW5kRG90YCwgeyBrZXkgfSkgOiB1bmRlZmluZWQ7CiAgICBjb25zdCBzdGFydE51bWJlciA9IChsYWJlbCkgPT4gKHZhbCkgPT4geyB2YXIgX2E7IHJldHVybiAoKF9hID0gdmFsID09PSBudWxsIHx8IHZhbCA9PT0gdm9pZCAwID8gdm9pZCAwIDogdmFsLnNsaWNlKDAsIDEpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EubWF0Y2goL1swLTldLykpID8gdChgdmFsaWRhdGlvbi5kbnMuJHtsYWJlbH0uc3RhcnROdW1iZXJgLCB7IGtleSB9KSA6IHVuZGVmaW5lZDsgfTsKICAgIGNvbnN0IHN0YXJ0SHlwaGVuID0gKGxhYmVsKSA9PiAodmFsKSA9PiAodmFsID09PSBudWxsIHx8IHZhbCA9PT0gdm9pZCAwID8gdm9pZCAwIDogdmFsLnNsaWNlKDAsIDEpKSA9PT0gJy0nID8gdChgdmFsaWRhdGlvbi5kbnMuJHtsYWJlbH0uc3RhcnRIeXBoZW5gLCB7IGtleSB9KSA6IHVuZGVmaW5lZDsKICAgIGNvbnN0IGVuZEh5cGhlbiA9IChsYWJlbCkgPT4gKHZhbCkgPT4gKHZhbCA9PT0gbnVsbCB8fCB2YWwgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHZhbC5zbGljZSgtMSkpID09PSAnLScgPyB0KGB2YWxpZGF0aW9uLmRucy4ke2xhYmVsfS5lbmRIeXBoZW5gLCB7IGtleSB9KSA6IHVuZGVmaW5lZDsKICAgIGNvbnN0IG1pblZhbHVlID0gKG1pbikgPT4gKHZhbCkgPT4gTnVtYmVyKHZhbCkgPCBOdW1iZXIobWluKSA/IHQoJ3ZhbGlkYXRpb24ubWluVmFsdWUnLCB7IGtleSwgbWluIH0pIDogdW5kZWZpbmVkOwogICAgY29uc3QgbWF4VmFsdWUgPSAobWF4KSA9PiAodmFsKSA9PiBOdW1iZXIodmFsKSA+IE51bWJlcihtYXgpID8gdCgndmFsaWRhdGlvbi5tYXhWYWx1ZScsIHsga2V5LCBtYXggfSkgOiB1bmRlZmluZWQ7CiAgICBjb25zdCBiZXR3ZWVuVmFsdWVzID0gKFttaW4sIG1heF0pID0+ICh2YWwpID0+IG1pblZhbHVlKG1pbikodmFsKSB8fCBtYXhWYWx1ZShtYXgpKHZhbCkgPyB0KCd2YWxpZGF0aW9uLmJldHdlZW5WYWx1ZXMnLCB7CiAgICAgICAga2V5LCBtaW4sIG1heAogICAgfSkgOiB1bmRlZmluZWQ7CiAgICBjb25zdCBtaW5MZW5ndGggPSAobWluKSA9PiAodmFsKSA9PiB2YWwubGVuZ3RoIDwgTnVtYmVyKG1pbikgPyB0KCd2YWxpZGF0aW9uLm1pbkxlbmd0aCcsIHsga2V5LCBtaW4gfSkgOiB1bmRlZmluZWQ7CiAgICBjb25zdCBtYXhMZW5ndGggPSAobWF4KSA9PiAodmFsKSA9PiB2YWwubGVuZ3RoID4gTnVtYmVyKG1heCkgPyB0KCd2YWxpZGF0aW9uLm1heExlbmd0aCcsIHsga2V5LCBtYXggfSkgOiB1bmRlZmluZWQ7CiAgICBjb25zdCBiZXR3ZWVuTGVuZ3RocyA9IChbbWluLCBtYXhdKSA9PiAodmFsKSA9PiBtaW5MZW5ndGgobWluKSh2YWwpIHx8IG1heExlbmd0aChtYXgpKHZhbCkgPyB0KCd2YWxpZGF0aW9uLmJldHdlZW5MZW5ndGhzJywgewogICAgICAgIGtleSwgbWluLCBtYXgKICAgIH0pIDogdW5kZWZpbmVkOwogICAgY29uc3QgcmVxdWlyZWRJbnQgPSAodmFsKSA9PiBpc05hTihwYXJzZUludCh2YWwsIDEwKSkgPyB0KCd2YWxpZGF0aW9uLm51bWJlci5yZXF1aXJlZEludCcsIHsga2V5IH0pIDogdW5kZWZpbmVkOwogICAgY29uc3QgaXNJbnRlZ2VyID0gKHZhbCkgPT4gIU51bWJlci5pc0ludGVnZXIoK3ZhbCkgfHwgYCR7dmFsfWAubWF0Y2goL1wuKy9nKSA/IHQoJ3ZhbGlkYXRpb24ubnVtYmVyLnJlcXVpcmVkSW50JywgeyBrZXkgfSkgOiB1bmRlZmluZWQ7CiAgICBjb25zdCBpc1Bvc2l0aXZlID0gKHZhbCkgPT4gK3ZhbCA8IDAgPyB0KCd2YWxpZGF0aW9uLm51bWJlci5pc1Bvc2l0aXZlJywgeyBrZXkgfSkgOiB1bmRlZmluZWQ7CiAgICBjb25zdCBpc09jdGFsID0gKHZhbCkgPT4gewogICAgICAgIGNvbnN0IHZhbHVlU3RyaW5nID0gYCR7dmFsfWA7CiAgICAgICAgY29uc3QgaXNWYWxpZCA9IHZhbHVlU3RyaW5nLm1hdGNoKC8oXjArKSguKykvKTsKICAgICAgICByZXR1cm4gaXNWYWxpZCA/IHQoJ3ZhbGlkYXRpb24ubnVtYmVyLmlzT2N0YWwnLCB7IGtleSB9KSA6IHVuZGVmaW5lZDsKICAgIH07CiAgICBjb25zdCBwb3J0TnVtYmVyID0gKHZhbCkgPT4gcGFyc2VJbnQodmFsLCAxMCkgPCAxIHx8IHBhcnNlSW50KHZhbCwgMTApID4gNjU1MzUgPyB0KCd2YWxpZGF0aW9uLm51bWJlci5iZXR3ZWVuJywgewogICAgICAgIGtleSwgbWluOiAnMScsIG1heDogJzY1NTM1JwogICAgfSkgOiB1bmRlZmluZWQ7CiAgICBjb25zdCBkbnNDaGFycyA9ICh2YWwpID0+IHsKICAgICAgICBjb25zdCBtYXRjaGVkQ2hhcnMgPSB2YWwgPT09IG51bGwgfHwgdmFsID09PSB2b2lkIDAgPyB2b2lkIDAgOiB2YWwubWF0Y2goL1teJHsnQS1aYS16MC05LSd9XS9nKTsKICAgICAgICBpZiAobWF0Y2hlZENoYXJzKSB7CiAgICAgICAgICAgIHJldHVybiB0KCd2YWxpZGF0aW9uLmNoYXJzJywgewogICAgICAgICAgICAgICAga2V5LCBjb3VudDogbWF0Y2hlZENoYXJzLmxlbmd0aCwgY2hhcnM6IG1hdGNoZWRDaGFycy5tYXAoKGNoYXIpID0+IGNoYXIgPT09ICcgJyA/ICdTcGFjZScgOiBgIiR7Y2hhcn0iYCkuam9pbignLCAnKQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDsKICAgIH07CiAgICAvLyB0aGUgd2VpcmQgZWRnZSBjYXNlIGhlcmUgZGVhbHMgd2l0aCBpbnRlcm5hdGlvbmFsaXplZCBkb21haW4gbmFtZXMgd2hpY2ggYXJlIHByZXBlbmRlZCB3aXRoICd4bi0tJwogICAgLy8gaHR0cHM6Ly9kYXRhdHJhY2tlci5pZXRmLm9yZy9kb2MvaHRtbC9yZmM1ODkxI3NlY3Rpb24tNC4yLjMuMQogICAgY29uc3QgZG5zRG91YmxlRGFzaCA9ICh2YWwpID0+ICgodmFsID09PSBudWxsIHx8IHZhbCA9PT0gdm9pZCAwID8gdm9pZCAwIDogdmFsLnN1YnN0cigyLCAyKSkgPT09ICctLScgJiYgKHZhbCA9PT0gbnVsbCB8fCB2YWwgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHZhbC5zdWJzdHIoMCwgMikpICE9PSAneG4nKSA/IHQoYHZhbGlkYXRpb24uZG5zLmRvdWJsZUh5cGhlbmAsIHsga2V5IH0pIDogdW5kZWZpbmVkOwogICAgY29uc3QgZG5zSWFuYVNlcnZpY2VOYW1lRG91YmxlRGFzaCA9ICh2YWwpID0+ICgodmFsID09PSBudWxsIHx8IHZhbCA9PT0gdm9pZCAwID8gdm9pZCAwIDogdmFsLnN1YnN0cigyLCAyKSkgPT09ICctLScgJiYgKHZhbCA9PT0gbnVsbCB8fCB2YWwgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHZhbC5zdWJzdHIoMCwgMikpICE9PSAneG4nKSA/IHQoYHZhbGlkYXRpb24uZG5zLmRvdWJsZUh5cGhlbmAsIHsga2V5IH0pIDogdW5kZWZpbmVkOwogICAgY29uc3QgZG5zRW1wdHkgPSAobGFiZWwpID0+ICh2YWwgPSAnJykgPT4gdmFsLmxlbmd0aCA9PT0gMCA/IHQoYHZhbGlkYXRpb24uZG5zLiR7bGFiZWx9LmVtcHR5TGFiZWxgLCB7IGtleSwgbWluOiAxIH0pIDogdW5kZWZpbmVkOwogICAgY29uc3QgZG5zVG9vTG9uZyA9IChsYWJlbCwgbGVuZ3RoID0gNjMpID0+ICh2YWwgPSAnJykgPT4gdmFsLmxlbmd0aCA+IGxlbmd0aCA/IHQoYHZhbGlkYXRpb24uZG5zLiR7bGFiZWx9LnRvb0xvbmdMYWJlbGAsIHsga2V5LCBtYXg6IGxlbmd0aCB9KSA6IHVuZGVmaW5lZDsKICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFycwogICAgY29uc3QgaG9zdG5hbWVFbXB0eSA9ICh2YWwgPSAnJykgPT4gdmFsLmxlbmd0aCA9PT0gMCA/IHQoJ3ZhbGlkYXRpb24uZG5zLmhvc3RuYW1lLmVtcHR5JywgeyBrZXkgfSkgOiB1bmRlZmluZWQ7CiAgICBjb25zdCBob3N0bmFtZVRvb0xvbmcgPSAodmFsID0gJycpID0+IHZhbC5sZW5ndGggPiAyNTMgPyB0KCd2YWxpZGF0aW9uLmRucy5ob3N0bmFtZS50b29Mb25nJywgeyBrZXksIG1heDogMjUzIH0pIDogdW5kZWZpbmVkOwogICAgY29uc3QgYWJzb2x1dGVQYXRoID0gKHZhbCA9ICcnKSA9PiB2YWxbMF0gIT09ICcvJyAmJiB2YWwubGVuZ3RoID4gMCA/IHQoJ3ZhbGlkYXRpb24ucGF0aCcsIHsga2V5IH0pIDogdW5kZWZpbmVkOwogICAgY29uc3QgcmVxdWlyZWQgPSAodmFsKSA9PiAhdmFsICYmIHZhbCAhPT0gZmFsc2UgPyB0KCd2YWxpZGF0aW9uLnJlcXVpcmVkJywgeyBrZXkgfSkgOiB1bmRlZmluZWQ7CiAgICBjb25zdCBub1VwcGVyQ2FzZSA9ICh2YWwgPSAnJykgPT4gdmFsLnRvTG93ZXJDYXNlKCkgIT09IHZhbCA/IHQoJ3ZhbGlkYXRpb24ubm9VcHBlckNhc2UnLCB7IGtleSB9KSA6IHVuZGVmaW5lZDsKICAgIGNvbnN0IGNyb25TY2hlZHVsZSA9ICh2YWwpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgICBjcm9uc3RydWUudG9TdHJpbmcodmFsKTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgcmV0dXJuIHQoJ3ZhbGlkYXRpb24uaW52YWxpZENyb24nKTsKICAgICAgICB9CiAgICB9OwogICAgY29uc3QgaHR0cHMgPSAodmFsKSA9PiB2YWwgJiYgIWlzSHR0cHModmFsKSA/IHQoJ3ZhbGlkYXRpb24uc2V0dGluZy5zZXJ2ZXJVcmwuaHR0cHMnKSA6IHVuZGVmaW5lZDsKICAgIGNvbnN0IGxvY2FsaG9zdCA9ICh2YWwpID0+IGlzTG9jYWxob3N0KHZhbCkgPyB0KCd2YWxpZGF0aW9uLnNldHRpbmcuc2VydmVyVXJsLmxvY2FsaG9zdCcpIDogdW5kZWZpbmVkOwogICAgY29uc3QgdHJhaWxpbmdGb3J3YXJkU2xhc2ggPSAodmFsKSA9PiBoYXNUcmFpbGluZ0ZvcndhcmRTbGFzaCh2YWwpID8gdCgndmFsaWRhdGlvbi5zZXR0aW5nLnNlcnZlclVybC50cmFpbGluZ0ZvcndhcmRTbGFzaCcpIDogdW5kZWZpbmVkOwogICAgY29uc3QgdXJsID0gKHZhbCkgPT4gdmFsICYmICFpc1VybCh2YWwpID8gdCgndmFsaWRhdGlvbi5zZXR0aW5nLnNlcnZlclVybC51cmwnKSA6IHVuZGVmaW5lZDsKICAgIGNvbnN0IGludGVydmFsID0gKHZhbCkgPT4gIS9eXGQrW2htc10kLy50ZXN0KHZhbCkgPyB0KCd2YWxpZGF0aW9uLm1vbml0b3Jpbmcucm91dGUuaW50ZXJ2YWwnLCB7IGtleSB9KSA6IHVuZGVmaW5lZDsKICAgIGNvbnN0IGNvbnRhaW5lckltYWdlID0gKHZhbCkgPT4gISh2YWwgPT09IG51bGwgfHwgdmFsID09PSB2b2lkIDAgPyB2b2lkIDAgOiB2YWwuaW1hZ2UpID8gdCgnd29ya2xvYWQudmFsaWRhdGlvbi5jb250YWluZXJJbWFnZScsIHsgbmFtZTogdmFsLm5hbWUgfSkgOiB1bmRlZmluZWQ7CiAgICBjb25zdCBjb250YWluZXJJbWFnZXMgPSAodmFsKSA9PiB7CiAgICAgICAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZSwgX2Y7CiAgICAgICAgY29uc3QgY29udGFpbmVycyA9IHZhbC5qb2JUZW1wbGF0ZSA/IChfZCA9IChfYyA9IChfYiA9IChfYSA9IHZhbCA9PT0gbnVsbCB8fCB2YWwgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHZhbC5qb2JUZW1wbGF0ZSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnNwZWMpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi50ZW1wbGF0ZSkgPT09IG51bGwgfHwgX2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jLnNwZWMpID09PSBudWxsIHx8IF9kID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZC5jb250YWluZXJzIDogKF9mID0gKF9lID0gdmFsID09PSBudWxsIHx8IHZhbCA9PT0gdm9pZCAwID8gdm9pZCAwIDogdmFsLnRlbXBsYXRlKSA9PT0gbnVsbCB8fCBfZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Uuc3BlYykgPT09IG51bGwgfHwgX2YgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9mLmNvbnRhaW5lcnM7CiAgICAgICAgaWYgKCFjb250YWluZXJzIHx8ICFjb250YWluZXJzLmxlbmd0aCkgewogICAgICAgICAgICByZXR1cm4gdCgndmFsaWRhdGlvbi5yZXF1aXJlZCcsIHsga2V5OiB0KCd3b3JrbG9hZC5jb250YWluZXIudGl0bGVzLmNvbnRhaW5lcnMnKSB9KTsKICAgICAgICB9CiAgICAgICAgLy8gbWFraW5nIHN1cmUgZWFjaCBjb250YWluZXIgaGFzIGFuIGltYWdlIG5hbWUKICAgICAgICByZXR1cm4gY29udGFpbmVycy5tYXAoKGNvbnRhaW5lcikgPT4gY29udGFpbmVySW1hZ2UoY29udGFpbmVyKSkuZmluZCgoY29udGFpbmVyRXJyb3IpID0+IGNvbnRhaW5lckVycm9yKTsKICAgIH07CiAgICBjb25zdCBkbnNMYWJlbCA9ICh2YWwpID0+IHsKICAgICAgICBjb25zdCB2YWxpZGF0b3JzID0gWwogICAgICAgICAgICBkbnNDaGFycywKICAgICAgICAgICAgc3RhcnRIeXBoZW4oJ2xhYmVsJyksCiAgICAgICAgICAgIGVuZEh5cGhlbignbGFiZWwnKSwKICAgICAgICAgICAgZG5zRG91YmxlRGFzaCwKICAgICAgICAgICAgLy8gZG5zRW1wdHkoJ2xhYmVsJyksIC8vIHF1ZXN0aW9uYWJsZSBhcyB0byBpZiB0aGlzIGlzIG5lZWRlZCBpZiB0aGUgZmllbGQgaXMgYWxzbyByZXF1aXJlZC4uLgogICAgICAgICAgICBkbnNUb29Mb25nKCdsYWJlbCcpCiAgICAgICAgXTsKICAgICAgICByZXR1cm4gcnVuVmFsaWRhdG9ycyh2YWwsIHZhbGlkYXRvcnMpOwogICAgfTsKICAgIGNvbnN0IGRuc0xhYmVsSWFuYVNlcnZpY2VOYW1lID0gKHZhbCkgPT4gewogICAgICAgIGNvbnN0IHZhbGlkYXRvcnMgPSBbCiAgICAgICAgICAgIGRuc0NoYXJzLAogICAgICAgICAgICBzdGFydEh5cGhlbignbGFiZWwnKSwKICAgICAgICAgICAgZW5kSHlwaGVuKCdsYWJlbCcpLAogICAgICAgICAgICBkbnNJYW5hU2VydmljZU5hbWVEb3VibGVEYXNoLAogICAgICAgICAgICBkbnNFbXB0eSgnbGFiZWwnKSwKICAgICAgICAgICAgZG5zVG9vTG9uZygnbGFiZWwnLCAxNSkKICAgICAgICBdOwogICAgICAgIHJldHVybiBydW5WYWxpZGF0b3JzKHZhbCwgdmFsaWRhdG9ycyk7CiAgICB9OwogICAgY29uc3QgZG5zTGFiZWxSZXN0cmljdGVkID0gKHZhbCkgPT4gewogICAgICAgIGNvbnN0IHZhbGlkYXRvcnMgPSBbCiAgICAgICAgICAgIGRuc0NoYXJzLAogICAgICAgICAgICBzdGFydE51bWJlcignbGFiZWwnKSwKICAgICAgICAgICAgc3RhcnRIeXBoZW4oJ2xhYmVsJyksCiAgICAgICAgICAgIGVuZEh5cGhlbignbGFiZWwnKSwKICAgICAgICAgICAgZG5zRG91YmxlRGFzaCwKICAgICAgICAgICAgZG5zRW1wdHkoJ2xhYmVsJyksCiAgICAgICAgICAgIGRuc1Rvb0xvbmcoJ2xhYmVsJykKICAgICAgICBdOwogICAgICAgIHJldHVybiBydW5WYWxpZGF0b3JzKHZhbCwgdmFsaWRhdG9ycyk7CiAgICB9OwogICAgY29uc3QgaG9zdG5hbWUgPSAodmFsKSA9PiB7CiAgICAgICAgaWYgKHZhbCkgewogICAgICAgICAgICBjb25zdCB2YWxpZGF0b3JzID0gWwogICAgICAgICAgICAgICAgc3RhcnREb3QoJ2hvc3RuYW1lJyksCiAgICAgICAgICAgICAgICBob3N0bmFtZVRvb0xvbmcsCiAgICAgICAgICAgICAgICBlbmREb3QoJ2hvc3RuYW1lJykKICAgICAgICAgICAgXTsKICAgICAgICAgICAgY29uc3QgaG9zdE5hbWVNZXNzYWdlID0gcnVuVmFsaWRhdG9ycyh2YWwsIHZhbGlkYXRvcnMpOwogICAgICAgICAgICBpZiAoaG9zdE5hbWVNZXNzYWdlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gaG9zdE5hbWVNZXNzYWdlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNvbnN0IGxhYmVscyA9IHZhbC5zcGxpdCgnLicpOwogICAgICAgICAgICBjb25zdCBsYWJlbFZhbGlkYXRvcnMgPSBbCiAgICAgICAgICAgICAgICBkbnNDaGFycywKICAgICAgICAgICAgICAgIHN0YXJ0SHlwaGVuKCdob3N0bmFtZScpLAogICAgICAgICAgICAgICAgZW5kSHlwaGVuKCdob3N0bmFtZScpLAogICAgICAgICAgICAgICAgZG5zRG91YmxlRGFzaCwKICAgICAgICAgICAgICAgIGRuc0VtcHR5KCdob3N0bmFtZScpLAogICAgICAgICAgICAgICAgZG5zVG9vTG9uZygnaG9zdG5hbWUnKQogICAgICAgICAgICBdOwogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxhYmVscy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgY29uc3QgbGFiZWxNZXNzYWdlID0gcnVuVmFsaWRhdG9ycyhsYWJlbHNbaV0sIGxhYmVsVmFsaWRhdG9ycyk7CiAgICAgICAgICAgICAgICBpZiAobGFiZWxNZXNzYWdlKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxhYmVsTWVzc2FnZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH07CiAgICBjb25zdCB3aWxkY2FyZEhvc3RuYW1lID0gKHZhbCkgPT4gewogICAgICAgIC8vIGFsbG93IHdpbGRjYXJkIGluIGZpcnN0IHBhcnQgb2YgaG9zdG5hbWUKICAgICAgICB2YWwgPSB2YWwgPyB2YWwucmVwbGFjZSgvXlwqXC4vLCAnJykgOiB2YWw7CiAgICAgICAgcmV0dXJuIGhvc3RuYW1lKHZhbCk7CiAgICB9OwogICAgY29uc3QgZXh0ZXJuYWxOYW1lID0gKHZhbCkgPT4gewogICAgICAgIGlmIChpc0VtcHR5KHZhbCkpIHsKICAgICAgICAgICAgcmV0dXJuIHQoJ3ZhbGlkYXRpb24uc2VydmljZS5leHRlcm5hbE5hbWUubm9uZScpOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIGhvc3RuYW1lKHZhbCk7CiAgICAgICAgfQogICAgfTsKICAgIGNvbnN0IHRlc3RSdWxlID0gKHZhbCkgPT4gewogICAgICAgIHJldHVybiAnVGhpcyBpcyBhbiBlcnJvciByZXR1cm5lZCBieSB0aGUgdGVzdFJ1bGUgdmFsaWRhdG9yJzsKICAgIH07CiAgICBjb25zdCBydWxlR3JvdXBzID0gKHZhbCkgPT4gaXNFbXB0eSh2YWwgPT09IG51bGwgfHwgdmFsID09PSB2b2lkIDAgPyB2b2lkIDAgOiB2YWwuZ3JvdXBzKSA/IHQoJ3ZhbGlkYXRpb24ucHJvbWV0aGV1c1J1bGUuZ3JvdXBzLnJlcXVpcmVkJykgOiB1bmRlZmluZWQ7CiAgICBjb25zdCBjbHVzdGVyTmFtZSA9IChpc1JrZTIpID0+ICh2YWwpID0+IHsgdmFyIF9hOyByZXR1cm4gaXNSa2UyICYmICgoX2EgPSAodmFsIHx8ICcnKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm1hdGNoKC9eKGMtLns1fXxsb2NhbCkkL2kpKSA/IHQoJ3ZhbGlkYXRpb24uY2x1c3Rlci5uYW1lJykgOiB1bmRlZmluZWQ7IH07CiAgICBjb25zdCBzZXJ2aWNlUG9ydCA9ICh2YWwpID0+IHsKICAgICAgICB2YXIgX2E7CiAgICAgICAgY29uc3QgeyBuYW1lLCBpZHggfSA9IHZhbDsKICAgICAgICBjb25zdCBub2RlUG9ydCA9IG5ldyBQb3J0KHZhbC5ub2RlUG9ydCk7CiAgICAgICAgY29uc3QgbGlzdGVuaW5nUG9ydCA9IG5ldyBQb3J0KHZhbC5wb3J0KTsKICAgICAgICBjb25zdCB0YXJnZXRQb3J0ID0gbmV3IFBvcnQodmFsLnRhcmdldFBvcnQpOwogICAgICAgIGlmIChpc0VtcHR5KG5hbWUpKSB7CiAgICAgICAgICAgIHJldHVybiB0KCd2YWxpZGF0aW9uLnNlcnZpY2UucG9ydHMubmFtZS5yZXF1aXJlZCcsIHsgcG9zaXRpb246IGlkeCArIDEgfSk7CiAgICAgICAgfQogICAgICAgIGlmICghbm9kZVBvcnQuZW1wdHkpIHsKICAgICAgICAgICAgaWYgKCFub2RlUG9ydC5pc0ludCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHQoJ3ZhbGlkYXRpb24uc2VydmljZS5wb3J0cy5ub2RlUG9ydC5yZXF1aXJlZEludCcsIHsgcG9zaXRpb246IGlkeCArIDEgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZiAobm9kZVBvcnQuaW50IDwgMSB8fCBub2RlUG9ydC5pbnQgPiA2NTUzNSkgewogICAgICAgICAgICAgICAgcmV0dXJuIHQoJ3ZhbGlkYXRpb24uc2VydmljZS5wb3J0cy5ub2RlUG9ydC5iZXR3ZWVuJywgeyBwb3NpdGlvbjogaWR4ICsgMSB9KTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAoIWxpc3RlbmluZ1BvcnQuZW1wdHkpIHsKICAgICAgICAgICAgaWYgKCFsaXN0ZW5pbmdQb3J0LmlzSW50KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdCgndmFsaWRhdGlvbi5zZXJ2aWNlLnBvcnRzLnBvcnQucmVxdWlyZWRJbnQnLCB7IHBvc2l0aW9uOiBpZHggKyAxIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgaWYgKGxpc3RlbmluZ1BvcnQuaW50IDwgMSB8fCBsaXN0ZW5pbmdQb3J0LmludCA+IDY1NTM1KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdCgndmFsaWRhdGlvbi5zZXJ2aWNlLnBvcnRzLnBvcnQuYmV0d2VlbicsIHsgcG9zaXRpb246IGlkeCArIDEgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZiAoKF9hID0gbGlzdGVuaW5nUG9ydC5zdHJpbmcpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5pbmNsdWRlcygnLicpKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbGlzdGVuaW5nUG9ydDsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIHQoJ3ZhbGlkYXRpb24uc2VydmljZS5wb3J0cy5wb3J0LnJlcXVpcmVkJywgeyBwb3NpdGlvbjogaWR4ICsgMSB9KTsKICAgICAgICB9CiAgICAgICAgaWYgKCF0YXJnZXRQb3J0LmVtcHR5KSB7CiAgICAgICAgICAgIGlmICghdGFyZ2V0UG9ydC5pc0ludCkgewogICAgICAgICAgICAgICAgY29uc3QgaWFuYVNlcnZpY2VOYW1lRXJyb3JzID0gZG5zTGFiZWxJYW5hU2VydmljZU5hbWUodGFyZ2V0UG9ydC5zdHJpbmcpOwogICAgICAgICAgICAgICAgaWYgKGlhbmFTZXJ2aWNlTmFtZUVycm9ycykgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBpYW5hU2VydmljZU5hbWVFcnJvcnM7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZiAodGFyZ2V0UG9ydC5pbnQgPCAxIHx8IHRhcmdldFBvcnQuaW50ID4gNjU1MzUpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0KCd2YWxpZGF0aW9uLnNlcnZpY2UucG9ydHMudGFyZ2V0UG9ydC5iZXR3ZWVuJywgeyBwb3NpdGlvbjogaWR4ICsgMSB9KTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIHQoJ3ZhbGlkYXRpb24uc2VydmljZS5wb3J0cy50YXJnZXRQb3J0LnJlcXVpcmVkJywgeyBwb3NpdGlvbjogaWR4ICsgMSB9KTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDsKICAgIH07CiAgICBjb25zdCBncm91cElzVmFsaWQgPSAodmFsLCByZWFkYWJsZUluZGV4KSA9PiB7CiAgICAgICAgbGV0IHJldHVybk1lc3NhZ2U7CiAgICAgICAgaWYgKGlzRW1wdHkodmFsID09PSBudWxsIHx8IHZhbCA9PT0gdm9pZCAwID8gdm9pZCAwIDogdmFsLm5hbWUpKSB7CiAgICAgICAgICAgIHJldHVybiB0KCd2YWxpZGF0aW9uLnByb21ldGhldXNSdWxlLmdyb3Vwcy52YWxpZC5uYW1lJywgeyBpbmRleDogcmVhZGFibGVJbmRleCB9KTsKICAgICAgICB9CiAgICAgICAgaWYgKGlzRW1wdHkodmFsLnJ1bGVzKSkgewogICAgICAgICAgICByZXR1cm4gdCgndmFsaWRhdGlvbi5wcm9tZXRoZXVzUnVsZS5ncm91cHMudmFsaWQuc2luZ2xlRW50cnknLCB7IGluZGV4OiByZWFkYWJsZUluZGV4IH0pOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgdmFsLnJ1bGVzLmZvckVhY2goKHJ1bGUsIGlkeCkgPT4gewogICAgICAgICAgICAgICAgY29uc3QgcmVhZGFibGVSdWxlSW5kZXggPSBpZHggKyAxOwogICAgICAgICAgICAgICAgaWYgKGhhcyhydWxlLCAnYWxlcnQnKSAmJiBpc0VtcHR5KHJ1bGUgPT09IG51bGwgfHwgcnVsZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogcnVsZS5hbGVydCkgJiYgIXJldHVybk1lc3NhZ2UpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm5NZXNzYWdlID0gdCgndmFsaWRhdGlvbi5wcm9tZXRoZXVzUnVsZS5ncm91cHMudmFsaWQucnVsZS5hbGVydE5hbWUnLCB7IGdyb3VwSW5kZXg6IHJlYWRhYmxlSW5kZXgsIHJ1bGVJbmRleDogcmVhZGFibGVSdWxlSW5kZXggfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIGlmIChoYXMocnVsZSwgJ3JlY29yZCcpICYmIGlzRW1wdHkocnVsZSA9PT0gbnVsbCB8fCBydWxlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBydWxlLnJlY29yZCkpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm5NZXNzYWdlID0gdCgndmFsaWRhdGlvbi5wcm9tZXRoZXVzUnVsZS5ncm91cHMudmFsaWQucnVsZS5yZWNvcmROYW1lJywgeyBncm91cEluZGV4OiByZWFkYWJsZUluZGV4LCBydWxlSW5kZXg6IHJlYWRhYmxlUnVsZUluZGV4IH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKChoYXMocnVsZSwgJ2V4cHInKSAmJiBpc0VtcHR5KHJ1bGUuZXhwcikgJiYgIXJldHVybk1lc3NhZ2UpIHx8ICghaGFzKHJ1bGUsICdleHByJykgJiYgIXJldHVybk1lc3NhZ2UpKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuTWVzc2FnZSA9IHQoJ3ZhbGlkYXRpb24ucHJvbWV0aGV1c1J1bGUuZ3JvdXBzLnZhbGlkLnJ1bGUuZXhwcicsIHsgZ3JvdXBJbmRleDogcmVhZGFibGVJbmRleCwgcnVsZUluZGV4OiByZWFkYWJsZVJ1bGVJbmRleCB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChoYXMocnVsZSwgJ2FsZXJ0JykpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoKGhhcyhydWxlLCAnbGFiZWxzJykgJiYgaXNFbXB0eShydWxlLmxhYmVscykgJiYgIXJldHVybk1lc3NhZ2UpIHx8CiAgICAgICAgICAgICAgICAgICAgICAgICghaGFzKHJ1bGUsICdsYWJlbHMnKSAmJiAhcmV0dXJuTWVzc2FnZSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuTWVzc2FnZSA9IHQoJ3ZhbGlkYXRpb24ucHJvbWV0aGV1c1J1bGUuZ3JvdXBzLnZhbGlkLnJ1bGUubGFiZWxzJywgeyBncm91cEluZGV4OiByZWFkYWJsZUluZGV4LCBydWxlSW5kZXg6IHJlYWRhYmxlUnVsZUluZGV4IH0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiByZXR1cm5NZXNzYWdlOwogICAgfTsKICAgIGNvbnN0IGdyb3Vwc0FyZVZhbGlkID0gKHZhbCkgPT4gewogICAgICAgIGNvbnN0IGdyb3VwcyA9IFsuLi52YWxdOyAvLyBtYWtpbmcgYSBuZXcgYXJyYXkgaW4gdGhlIGZ1bmN0aW9uIGJlY2F1c2UgSSdtIGdvbm5hIG11dGF0ZSBpdCBsYXRlci4uLgogICAgICAgIGxldCBtZXNzYWdlOwogICAgICAgIGdyb3Vwcy5mb3JFYWNoKChncm91cCwgaWR4LCBhcnIpID0+IHsKICAgICAgICAgICAgbWVzc2FnZSA9IGdyb3VwSXNWYWxpZChncm91cCwgaWR4ICsgMSk7CiAgICAgICAgICAgIGlmICghIW1lc3NhZ2UpIHsKICAgICAgICAgICAgICAgIGFyci5sZW5ndGggPSBpZHggKyAxOyAvLyB0aGlzIGlzIGEgdHJpY2tzeSB3YXkgb2YgYnJlYWtpbmcgYSBmb3JFYWNoIGxvb3Agc2luY2Ugd2UganVzdCB3YW50IHRoZSBmaXJzdCBtZXNzYWdlCiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICByZXR1cm4gbWVzc2FnZTsKICAgIH07CiAgICBjb25zdCBtYXRjaGluZyA9ICh2YWwpID0+IHsKICAgICAgICBpZiAoaXNFbXB0eSh2YWwgPT09IG51bGwgfHwgdmFsID09PSB2b2lkIDAgPyB2b2lkIDAgOiB2YWwubWF0Y2gpICYmIGlzRW1wdHkodmFsID09PSBudWxsIHx8IHZhbCA9PT0gdm9pZCAwID8gdm9pZCAwIDogdmFsWydtYXRjaF9yZSddKSkgewogICAgICAgICAgICByZXR1cm4gdCgndmFsaWRhdGlvbi5tb25pdG9yaW5nLnJvdXRlLm1hdGNoJyk7CiAgICAgICAgfQogICAgfTsKICAgIGNvbnN0IHJvbGVUZW1wbGF0ZVJ1bGVzID0gKHR5cGUpID0+ICh2YWwgPSBbXSkgPT4gewogICAgICAgIGlmICh2YWwuc29tZSgocnVsZSkgPT4gaXNFbXB0eShydWxlLnZlcmJzKSkpIHsKICAgICAgICAgICAgcmV0dXJuIHQoJ3ZhbGlkYXRpb24ucm9sZVRlbXBsYXRlLnJvbGVUZW1wbGF0ZVJ1bGVzLm1pc3NpbmdWZXJiJyk7CiAgICAgICAgfQogICAgICAgIGlmICh2YWwuc29tZSgocnVsZSkgPT4geyB2YXIgX2EsIF9iOyByZXR1cm4gKChfYSA9IHJ1bGUucmVzb3VyY2VzKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EubGVuZ3RoKSAmJiAoKF9iID0gcnVsZS5ub25SZXNvdXJjZVVSTHMpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5sZW5ndGgpOyB9KSkgewogICAgICAgICAgICByZXR1cm4gdCgndmFsaWRhdGlvbi5yb2xlVGVtcGxhdGUucm9sZVRlbXBsYXRlUnVsZXMubm9SZXNvdXJjZUFuZE5vblJlc291cmNlJyk7CiAgICAgICAgfQogICAgICAgIGlmICh0eXBlID09PSBSQkFDLlJPTEUpIHsKICAgICAgICAgICAgaWYgKHZhbC5zb21lKChydWxlKSA9PiBpc0VtcHR5KHJ1bGUucmVzb3VyY2VzKSkpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0KCd2YWxpZGF0aW9uLnJvbGVUZW1wbGF0ZS5yb2xlVGVtcGxhdGVSdWxlcy5taXNzaW5nUmVzb3VyY2UnKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAodmFsLnNvbWUoKHJ1bGUpID0+IGlzRW1wdHkocnVsZS5hcGlHcm91cHMpKSkgewogICAgICAgICAgICAgICAgcmV0dXJuIHQoJ3ZhbGlkYXRpb24ucm9sZVRlbXBsYXRlLnJvbGVUZW1wbGF0ZVJ1bGVzLm1pc3NpbmdBcGlHcm91cCcpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGVsc2UgaWYgKHZhbC5zb21lKChydWxlKSA9PiBpc0VtcHR5KHJ1bGUucmVzb3VyY2VzKSAmJiBpc0VtcHR5KHJ1bGUubm9uUmVzb3VyY2VVUkxzKSkpIHsKICAgICAgICAgICAgcmV0dXJuIHQoJ3ZhbGlkYXRpb24ucm9sZVRlbXBsYXRlLnJvbGVUZW1wbGF0ZVJ1bGVzLm1pc3NpbmdPbmVSZXNvdXJjZScpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gdW5kZWZpbmVkOwogICAgfTsKICAgIC8vIFRoZSBleGlzdGluZyB2YWxpZGF0b3IgZm9yIGNsdXN0ZXJJcCBuZXZlciBhY3R1YWxseSByZXR1cm5zIGFuIGVycm9yCiAgICBjb25zdCBjbHVzdGVySXAgPSAodmFsKSA9PiB1bmRlZmluZWQ7CiAgICBjb25zdCBiYWNrdXBUYXJnZXQgPSAodmFsKSA9PiB7CiAgICAgICAgY29uc3QgcGFyc2VWYWx1ZSA9IEpTT04ucGFyc2UodmFsKTsKICAgICAgICBjb25zdCB0eXBlID0gcGFyc2VWYWx1ZS50eXBlOwogICAgICAgIGlmICghdHlwZSkgewogICAgICAgICAgICByZXR1cm4gdCgndmFsaWRhdGlvbi5yZXF1aXJlZCcsIHsga2V5OiAnVHlwZScgfSk7CiAgICAgICAgfQogICAgICAgIGlmICh0eXBlID09PSAnczMnKSB7CiAgICAgICAgICAgIGlmICghcGFyc2VWYWx1ZS5hY2Nlc3NLZXlJZCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHQoJ3ZhbGlkYXRpb24ucmVxdWlyZWQnLCB7IGtleTogJ2FjY2Vzc0tleUlkJyB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoIXBhcnNlVmFsdWUuc2VjcmV0QWNjZXNzS2V5KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdCgndmFsaWRhdGlvbi5yZXF1aXJlZCcsIHsga2V5OiAnc2VjcmV0QWNjZXNzS2V5JyB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoIXBhcnNlVmFsdWUuYnVja2V0UmVnaW9uKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdCgndmFsaWRhdGlvbi5yZXF1aXJlZCcsIHsga2V5OiAnYnVja2V0UmVnaW9uJyB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoIXBhcnNlVmFsdWUuYnVja2V0TmFtZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIHQoJ3ZhbGlkYXRpb24ucmVxdWlyZWQnLCB7IGtleTogJ2J1Y2tldE5hbWUnIH0pOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiB1bmRlZmluZWQ7CiAgICB9OwogICAgY29uc3QgaW1hZ2VVcmwgPSAodmFsKSA9PiB7CiAgICAgICAgY29uc3QgVk1fSU1BR0VfRklMRV9GT1JNQVQgPSBbJ3Fjb3cnLCAncWNvdzInLCAncmF3JywgJ2ltZycsICdpc28nXTsKICAgICAgICBpZiAoIXZhbCB8fCB2YWwgPT09ICcnKSB7CiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7CiAgICAgICAgfQogICAgICAgIGNvbnN0IHVybFNsdWcgPSB2YWwuc3BsaXQoJy8nKS5wb3AoKTsKICAgICAgICBjb25zdCBmaWxlRXh0ZW5zaW9uID0gdXJsU2x1Zy5zcGxpdCgnLicpLnBvcCgpLnRvTG93ZXJDYXNlKCk7CiAgICAgICAgaWYgKCFWTV9JTUFHRV9GSUxFX0ZPUk1BVC5pbmNsdWRlcyhmaWxlRXh0ZW5zaW9uKSkgewogICAgICAgICAgICByZXR1cm4gdCgnaGFydmVzdGVyLnZhbGlkYXRpb24uaW1hZ2UucnVsZVRpcCcpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gdW5kZWZpbmVkOwogICAgfTsKICAgIGNvbnN0IGZpbGVSZXF1aXJlZCA9ICh2YWwgPSB7fSkgPT4gewogICAgICAgIGlmICghdmFsW0hDSS5JTUFHRV9OQU1FXSkgewogICAgICAgICAgICByZXR1cm4gdCgndmFsaWRhdGlvbi5yZXF1aXJlZCcsIHsga2V5OiB0KCdoYXJ2ZXN0ZXIuaW1hZ2UuZmlsZU5hbWUnKSB9KTsKICAgICAgICB9CiAgICB9OwogICAgY29uc3Qgc3ViRG9tYWluID0gKHZhbCkgPT4gewogICAgICAgIGNvbnN0IG1hdGNoZWRDaGFycyA9IHZhbCA9PT0gbnVsbCB8fCB2YWwgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHZhbC5tYXRjaCgvW15hLXowLTkuLV0vZyk7CiAgICAgICAgaWYgKG1hdGNoZWRDaGFycykgewogICAgICAgICAgICByZXR1cm4gdCgndmFsaWRhdGlvbi5jaGFycycsIHsKICAgICAgICAgICAgICAgIGtleSwgY291bnQ6IG1hdGNoZWRDaGFycy5sZW5ndGgsIGNoYXJzOiBtYXRjaGVkQ2hhcnMubWFwKChjaGFyKSA9PiBjaGFyID09PSAnICcgPyAnU3BhY2UnIDogYCIke2NoYXJ9ImApLmpvaW4oJywgJykKICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBydW5WYWxpZGF0b3JzKHZhbCwgW3N0YXJ0SHlwaGVuKCdsYWJlbCcpLCBlbmRIeXBoZW4oJ2xhYmVsJyksIHN0YXJ0RG90KCdsYWJlbCcpLCBlbmREb3QoJ2xhYmVsJyksIHJlcXVpcmVkXSk7CiAgICB9OwogICAgcmV0dXJuIHsKICAgICAgICBhYnNvbHV0ZVBhdGgsCiAgICAgICAgYmFja3VwVGFyZ2V0LAogICAgICAgIGJldHdlZW5MZW5ndGhzLAogICAgICAgIGJldHdlZW5WYWx1ZXMsCiAgICAgICAgY2x1c3RlcklwLAogICAgICAgIGNsdXN0ZXJOYW1lLAogICAgICAgIGNvbnRhaW5lckltYWdlLAogICAgICAgIGNvbnRhaW5lckltYWdlcywKICAgICAgICBjcm9uU2NoZWR1bGUsCiAgICAgICAgZG5zTGFiZWwsCiAgICAgICAgZG5zTGFiZWxJYW5hU2VydmljZU5hbWUsCiAgICAgICAgZG5zTGFiZWxSZXN0cmljdGVkLAogICAgICAgIGV4dGVybmFsTmFtZSwKICAgICAgICBmaWxlUmVxdWlyZWQsCiAgICAgICAgZ3JvdXBzQXJlVmFsaWQsCiAgICAgICAgaG9zdG5hbWUsCiAgICAgICAgaW1hZ2VVcmwsCiAgICAgICAgaW50ZXJ2YWwsCiAgICAgICAgaHR0cHMsCiAgICAgICAgbG9jYWxob3N0LAogICAgICAgIHRyYWlsaW5nRm9yd2FyZFNsYXNoLAogICAgICAgIHVybCwKICAgICAgICBtYXRjaGluZywKICAgICAgICBtYXhMZW5ndGgsCiAgICAgICAgbWF4VmFsdWUsCiAgICAgICAgbWluTGVuZ3RoLAogICAgICAgIG1pblZhbHVlLAogICAgICAgIG5vVXBwZXJDYXNlLAogICAgICAgIHBvcnROdW1iZXIsCiAgICAgICAgcmVxdWlyZWQsCiAgICAgICAgcmVxdWlyZWRJbnQsCiAgICAgICAgaXNJbnRlZ2VyLAogICAgICAgIGlzUG9zaXRpdmUsCiAgICAgICAgaXNPY3RhbCwKICAgICAgICByb2xlVGVtcGxhdGVSdWxlcywKICAgICAgICBydWxlR3JvdXBzLAogICAgICAgIHNlcnZpY2VQb3J0LAogICAgICAgIHN1YkRvbWFpbiwKICAgICAgICB0ZXN0UnVsZSwKICAgICAgICB3aWxkY2FyZEhvc3RuYW1lLAogICAgfTsKfQo="},{"version":3,"file":"/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/utils/validators/formRules/index.ts","sourceRoot":"","sources":["/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/utils/validators/formRules/index.ts"],"names":[],"mappings":"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","sourcesContent":["import { RBAC } from '@shell/config/types';\nimport { HCI } from '@shell/config/labels-annotations';\nimport isEmpty from 'lodash/isEmpty';\nimport has from 'lodash/has';\nimport isUrl from 'is-url';\n// import uniq from 'lodash/uniq';\nimport cronstrue from 'cronstrue';\nimport { Translation } from '@shell/types/t';\nimport { isHttps, isLocalhost, hasTrailingForwardSlash } from '@shell/utils/validators/setting';\n\n// import uniq from 'lodash/uniq';\nexport type Validator<T = undefined | string> = (val: any, arg?: any) => T;\n\nexport type ValidatorFactory = (arg1: any, arg2?: any) => Validator\n\ntype ServicePort = {\n  name?: string,\n  nodePort?: string | number,\n  port?: string | number,\n  targetPort?: string | number,\n  idx: number\n}\n\nexport class Port {\n  empty: boolean;\n  int: number;\n  string: string;\n  isNumber: boolean;\n  isInt: boolean;\n  constructor(port: number | string | undefined) {\n    this.string = String(port);\n    this.int = parseInt(this.string, 10);\n    this.empty = (!port && this.int !== 0);\n    this.isNumber = !isNaN(this.int) && !this.string.includes('e'); // leaving out the exponent edge case to keep the logic simple and because port numbers aren't that big...\n    this.isInt = this.isNumber && !this.string.includes('.');\n  }\n}\n\nconst runValidators = (val: any, validators: Validator[]) => {\n  for (const validator of validators) {\n    const message = validator(val);\n\n    if (message) {\n      return message;\n    }\n  }\n};\n\nexport interface ValidationOptions {\n  key?: string,\n}\n\n// \"t\" is the function name we use for getting a translated string\nexport default function(t: Translation, { key = 'Value' }: ValidationOptions): { [key:string]: Validator<any> | ValidatorFactory } {\n  // utility validators these validators only get used by other validators\n  const startDot: ValidatorFactory = (label: string): Validator => (val: string) => val?.slice(0, 1) === '.' ? t(`validation.dns.${ label }.startDot`, { key }) : undefined;\n\n  const endDot = (label: string): Validator => (val: string) => val?.slice(-1) === '.' ? t(`validation.dns.${ label }.endDot`, { key }) : undefined;\n\n  const startNumber: ValidatorFactory = (label: string): Validator => (val: string) => val?.slice(0, 1)?.match(/[0-9]/) ? t(`validation.dns.${ label }.startNumber`, { key }) : undefined;\n\n  const startHyphen: ValidatorFactory = (label: string): Validator => (val: string) => val?.slice(0, 1) === '-' ? t(`validation.dns.${ label }.startHyphen`, { key }) : undefined;\n\n  const endHyphen: ValidatorFactory = (label: string): Validator => (val: string) => val?.slice(-1) === '-' ? t(`validation.dns.${ label }.endHyphen`, { key }) : undefined;\n\n  const minValue: ValidatorFactory = (min: string) => (val: string | number) => Number(val) < Number(min) ? t('validation.minValue', { key, min }) : undefined;\n\n  const maxValue: ValidatorFactory = (max: string) => (val: string | number) => Number(val) > Number(max) ? t('validation.maxValue', { key, max }) : undefined;\n\n  const betweenValues: ValidatorFactory = ([min, max]: string[]) => (val: string | number) => minValue(min)(val) || maxValue(max)(val) ? t('validation.betweenValues', {\n    key, min, max\n  }) : undefined;\n\n  const minLength: ValidatorFactory = (min: string) => (val: string) => val.length < Number(min) ? t('validation.minLength', { key, min }) : undefined;\n\n  const maxLength: ValidatorFactory = (max: string) => (val: string) => val.length > Number(max) ? t('validation.maxLength', { key, max }) : undefined;\n\n  const betweenLengths: ValidatorFactory = ([min, max]: string[]) => (val: string) => minLength(min)(val) || maxLength(max)(val) ? t('validation.betweenLengths', {\n    key, min, max\n  }) : undefined;\n\n  const requiredInt: Validator = (val: string) => isNaN(parseInt(val, 10)) ? t('validation.number.requiredInt', { key }) : undefined;\n\n  const isInteger: Validator = (val: string | number) => !Number.isInteger(+val) || `${ val }`.match(/\\.+/g) ? t('validation.number.requiredInt', { key }) : undefined;\n\n  const isPositive: Validator = (val: string | number) => +val < 0 ? t('validation.number.isPositive', { key }) : undefined;\n\n  const isOctal: Validator = (val: string | number) => {\n    const valueString = `${ val }`;\n    const isValid = valueString.match(/(^0+)(.+)/);\n\n    return isValid ? t('validation.number.isOctal', { key }) : undefined;\n  };\n\n  const portNumber: Validator = (val: string) => parseInt(val, 10) < 1 || parseInt(val, 10) > 65535 ? t('validation.number.between', {\n    key, min: '1', max: '65535'\n  }) : undefined;\n\n  const dnsChars: Validator = (val: string) => {\n    const matchedChars = val?.match(/[^${'A-Za-z0-9-'}]/g);\n\n    if (matchedChars) {\n      return t('validation.chars', {\n        key, count: matchedChars.length, chars: matchedChars.map((char) => char === ' ' ? 'Space' : `\"${ char }\"`).join(', ')\n      });\n    }\n\n    return undefined;\n  };\n\n  // the weird edge case here deals with internationalized domain names which are prepended with 'xn--'\n  // https://datatracker.ietf.org/doc/html/rfc5891#section-4.2.3.1\n  const dnsDoubleDash: Validator = (val: string) => (val?.substr(2, 2) === '--' && val?.substr(0, 2) !== 'xn') ? t(`validation.dns.doubleHyphen`, { key }) : undefined;\n\n  const dnsIanaServiceNameDoubleDash: Validator = (val: string) => (val?.substr(2, 2) === '--' && val?.substr(0, 2) !== 'xn') ? t(`validation.dns.doubleHyphen`, { key }) : undefined;\n\n  const dnsEmpty: ValidatorFactory = (label: string): Validator => (val = '') => val.length === 0 ? t(`validation.dns.${ label }.emptyLabel`, { key, min: 1 }) : undefined;\n\n  const dnsTooLong: ValidatorFactory = (label: string, length = 63): Validator => (val = '') => val.length > length ? t(`validation.dns.${ label }.tooLongLabel`, { key, max: length }) : undefined;\n\n  // eslint-disable-next-line no-unused-vars\n  const hostnameEmpty: Validator = (val = '') => val.length === 0 ? t('validation.dns.hostname.empty', { key }) : undefined;\n\n  const hostnameTooLong: Validator = (val = '') => val.length > 253 ? t('validation.dns.hostname.tooLong', { key, max: 253 }) : undefined;\n\n  const absolutePath: Validator = (val = '') => val[0] !== '/' && val.length > 0 ? t('validation.path', { key }) : undefined;\n\n  const required: Validator = (val: any) => !val && val !== false ? t('validation.required', { key }) : undefined;\n\n  const noUpperCase: Validator = (val = '') => val.toLowerCase() !== val ? t('validation.noUpperCase', { key }) : undefined;\n\n  const cronSchedule: Validator = (val: string) => {\n    try {\n      cronstrue.toString(val);\n    } catch (e) {\n      return t('validation.invalidCron');\n    }\n  };\n\n  const https: Validator = (val: string) => val && !isHttps(val) ? t('validation.setting.serverUrl.https') : undefined;\n\n  const localhost: Validator = (val: string) => isLocalhost(val) ? t('validation.setting.serverUrl.localhost') : undefined;\n\n  const trailingForwardSlash: Validator = (val: string) => hasTrailingForwardSlash(val) ? t('validation.setting.serverUrl.trailingForwardSlash') : undefined;\n\n  const url: Validator = (val: string) => val && !isUrl(val) ? t('validation.setting.serverUrl.url') : undefined;\n\n  const interval: Validator = (val: string) => !/^\\d+[hms]$/.test(val) ? t('validation.monitoring.route.interval', { key }) : undefined;\n\n  const containerImage: Validator = (val: any) => !val?.image ? t('workload.validation.containerImage', { name: val.name }) : undefined;\n\n  const containerImages: Validator = (val: any | [any]) => {\n    const containers = val.jobTemplate ? val?.jobTemplate?.spec?.template?.spec?.containers : val?.template?.spec?.containers;\n\n    if (!containers || !containers.length) {\n      return t('validation.required', { key: t('workload.container.titles.containers') });\n    }\n\n    // making sure each container has an image name\n    return containers.map((container: any) => containerImage(container)).find((containerError: string) => containerError);\n  };\n\n  const dnsLabel: Validator = (val: string) => {\n    const validators = [\n      dnsChars,\n      startHyphen('label'),\n      endHyphen('label'),\n      dnsDoubleDash,\n      // dnsEmpty('label'), // questionable as to if this is needed if the field is also required...\n      dnsTooLong('label')\n    ];\n\n    return runValidators(val, validators);\n  };\n\n  const dnsLabelIanaServiceName: Validator = (val: string) => {\n    const validators = [\n      dnsChars,\n      startHyphen('label'),\n      endHyphen('label'),\n      dnsIanaServiceNameDoubleDash,\n      dnsEmpty('label'), // questionable as to if this is needed if the field is also required...\n      dnsTooLong('label', 15)\n    ];\n\n    return runValidators(val, validators);\n  };\n\n  const dnsLabelRestricted: Validator = (val: string) => {\n    const validators = [\n      dnsChars,\n      startNumber('label'),\n      startHyphen('label'),\n      endHyphen('label'),\n      dnsDoubleDash,\n      dnsEmpty('label'), // questionable as to if this is needed if the field is also required...\n      dnsTooLong('label')\n    ];\n\n    return runValidators(val, validators);\n  };\n\n  const hostname: Validator = (val: string) => {\n    if (val) {\n      const validators = [\n        startDot('hostname'),\n        hostnameTooLong,\n        endDot('hostname')\n      ];\n\n      const hostNameMessage = runValidators(val, validators);\n\n      if (hostNameMessage) {\n        return hostNameMessage;\n      }\n\n      const labels = val.split('.');\n      const labelValidators = [\n        dnsChars,\n        startHyphen('hostname'),\n        endHyphen('hostname'),\n        dnsDoubleDash,\n        dnsEmpty('hostname'),\n        dnsTooLong('hostname')\n      ];\n\n      for ( let i = 0; i < labels.length; i++ ) {\n        const labelMessage = runValidators(labels[i], labelValidators);\n\n        if (labelMessage) {\n          return labelMessage;\n        }\n      }\n    }\n  };\n\n  const wildcardHostname: Validator = (val: string) => {\n    // allow wildcard in first part of hostname\n    val = val ? val.replace(/^\\*\\./, '') : val;\n\n    return hostname(val);\n  };\n\n  const externalName: Validator = (val: string) => {\n    if (isEmpty(val)) {\n      return t('validation.service.externalName.none');\n    } else {\n      return hostname(val);\n    }\n  };\n\n  const testRule = (val: string | undefined) => {\n    return 'This is an error returned by the testRule validator';\n  };\n\n  const ruleGroups: Validator = (val: {groups?: any}) => isEmpty(val?.groups) ? t('validation.prometheusRule.groups.required') : undefined;\n\n  const clusterName: ValidatorFactory = (isRke2: boolean): Validator => (val: string | undefined) => isRke2 && (val || '')?.match(/^(c-.{5}|local)$/i) ? t('validation.cluster.name') : undefined;\n\n  const servicePort: Validator<string | Port | undefined> = (val: ServicePort) => {\n    const {\n      name,\n      idx\n    } = val;\n\n    const nodePort = new Port(val.nodePort);\n    const listeningPort = new Port(val.port);\n    const targetPort = new Port(val.targetPort);\n\n    if (isEmpty(name)) {\n      return t('validation.service.ports.name.required', { position: idx + 1 });\n    }\n\n    if (!nodePort.empty) {\n      if (!nodePort.isInt) {\n        return t('validation.service.ports.nodePort.requiredInt', { position: idx + 1 });\n      } else if (nodePort.int < 1 || nodePort.int > 65535) {\n        return t('validation.service.ports.nodePort.between', { position: idx + 1 });\n      }\n    }\n\n    if (!listeningPort.empty) {\n      if (!listeningPort.isInt) {\n        return t('validation.service.ports.port.requiredInt', { position: idx + 1 });\n      } else if (listeningPort.int < 1 || listeningPort.int > 65535) {\n        return t('validation.service.ports.port.between', { position: idx + 1 });\n      } else if (listeningPort.string?.includes('.')) {\n        return listeningPort;\n      }\n    } else {\n      return t('validation.service.ports.port.required', { position: idx + 1 });\n    }\n\n    if (!targetPort.empty) {\n      if (!targetPort.isInt) {\n        const ianaServiceNameErrors = dnsLabelIanaServiceName(targetPort.string);\n\n        if (ianaServiceNameErrors) {\n          return ianaServiceNameErrors;\n        }\n      } else if (targetPort.int < 1 || targetPort.int > 65535) {\n        return t('validation.service.ports.targetPort.between', { position: idx + 1 });\n      }\n    } else {\n      return t('validation.service.ports.targetPort.required', { position: idx + 1 });\n    }\n\n    return undefined;\n  };\n\n  const groupIsValid: Validator = (val, readableIndex) => {\n    let returnMessage: string | undefined;\n\n    if (isEmpty(val?.name)) {\n      return t('validation.prometheusRule.groups.valid.name', { index: readableIndex });\n    }\n\n    if (isEmpty(val.rules)) {\n      return t('validation.prometheusRule.groups.valid.singleEntry', { index: readableIndex });\n    } else {\n      val.rules.forEach((rule: any, idx: number) => {\n        const readableRuleIndex = idx + 1;\n\n        if (has(rule, 'alert') && isEmpty(rule?.alert) && !returnMessage) {\n          returnMessage = t('validation.prometheusRule.groups.valid.rule.alertName', { groupIndex: readableIndex, ruleIndex: readableRuleIndex });\n        } else if (has(rule, 'record') && isEmpty(rule?.record)) {\n          returnMessage = t('validation.prometheusRule.groups.valid.rule.recordName', { groupIndex: readableIndex, ruleIndex: readableRuleIndex });\n        }\n\n        if ((has(rule, 'expr') && isEmpty(rule.expr) && !returnMessage) || (!has(rule, 'expr') && !returnMessage)) {\n          returnMessage = t('validation.prometheusRule.groups.valid.rule.expr', { groupIndex: readableIndex, ruleIndex: readableRuleIndex });\n        }\n\n        if (has(rule, 'alert')) {\n          if (\n            (has(rule, 'labels') && isEmpty(rule.labels) && !returnMessage) ||\n            (!has(rule, 'labels') && !returnMessage)\n          ) {\n            returnMessage = t('validation.prometheusRule.groups.valid.rule.labels', { groupIndex: readableIndex, ruleIndex: readableRuleIndex });\n          }\n        }\n      });\n    }\n\n    return returnMessage;\n  };\n\n  const groupsAreValid: Validator = (val) => {\n    const groups = [...val]; // making a new array in the function because I'm gonna mutate it later...\n    let message;\n\n    groups.forEach((group, idx, arr) => {\n      message = groupIsValid(group, idx + 1);\n      if (!!message) {\n        arr.length = idx + 1; // this is a tricksy way of breaking a forEach loop since we just want the first message\n      }\n    });\n\n    return message;\n  };\n\n  const matching: Validator = (val) => {\n    if (isEmpty(val?.match) && isEmpty(val?.['match_re'])) {\n      return t('validation.monitoring.route.match');\n    }\n  };\n\n  const roleTemplateRules: ValidatorFactory = (type): Validator => (val = []) => {\n    if (val.some((rule: any) => isEmpty(rule.verbs))) {\n      return t('validation.roleTemplate.roleTemplateRules.missingVerb');\n    }\n\n    if (val.some((rule: any) => rule.resources?.length && rule.nonResourceURLs?.length)) {\n      return t('validation.roleTemplate.roleTemplateRules.noResourceAndNonResource');\n    }\n\n    if (type === RBAC.ROLE) {\n      if (val.some((rule: any) => isEmpty(rule.resources))) {\n        return t('validation.roleTemplate.roleTemplateRules.missingResource');\n      }\n\n      if (val.some((rule: any) => isEmpty(rule.apiGroups))) {\n        return t('validation.roleTemplate.roleTemplateRules.missingApiGroup');\n      }\n    } else if (val.some((rule: any) => isEmpty(rule.resources) && isEmpty(rule.nonResourceURLs))) {\n      return t('validation.roleTemplate.roleTemplateRules.missingOneResource');\n    }\n\n    return undefined;\n  };\n\n  // The existing validator for clusterIp never actually returns an error\n  const clusterIp: Validator = (val) => undefined;\n\n  const backupTarget: Validator = (val) => {\n    const parseValue = JSON.parse(val);\n    const type = parseValue.type;\n\n    if (!type) {\n      return t('validation.required', { key: 'Type' });\n    }\n\n    if (type === 's3') {\n      if (!parseValue.accessKeyId) {\n        return t('validation.required', { key: 'accessKeyId' });\n      }\n\n      if (!parseValue.secretAccessKey) {\n        return t('validation.required', { key: 'secretAccessKey' });\n      }\n\n      if (!parseValue.bucketRegion) {\n        return t('validation.required', { key: 'bucketRegion' });\n      }\n\n      if (!parseValue.bucketName) {\n        return t('validation.required', { key: 'bucketName' });\n      }\n    }\n\n    return undefined;\n  };\n\n  const imageUrl: Validator = (val) => {\n    const VM_IMAGE_FILE_FORMAT = ['qcow', 'qcow2', 'raw', 'img', 'iso'];\n\n    if (!val || val === '') {\n      return undefined;\n    }\n\n    const urlSlug = val.split('/').pop();\n    const fileExtension = urlSlug.split('.').pop().toLowerCase();\n\n    if (!VM_IMAGE_FILE_FORMAT.includes(fileExtension)) {\n      return t('harvester.validation.image.ruleTip');\n    }\n\n    return undefined;\n  };\n\n  const fileRequired: Validator = (val = {}) => {\n    if (!val[HCI.IMAGE_NAME]) {\n      return t('validation.required', { key: t('harvester.image.fileName') });\n    }\n  };\n\n  const subDomain: Validator = (val) => {\n    const matchedChars = val?.match(/[^a-z0-9.-]/g);\n\n    if (matchedChars) {\n      return t('validation.chars', {\n        key, count: matchedChars.length, chars: matchedChars.map((char: string) => char === ' ' ? 'Space' : `\"${ char }\"`).join(', ')\n      });\n    }\n\n    return runValidators(val, [startHyphen('label'), endHyphen('label'), startDot('label'), endDot('label'), required]);\n  };\n\n  return {\n    absolutePath,\n    backupTarget,\n    betweenLengths,\n    betweenValues,\n    clusterIp,\n    clusterName,\n    containerImage,\n    containerImages,\n    cronSchedule,\n    dnsLabel,\n    dnsLabelIanaServiceName,\n    dnsLabelRestricted,\n    externalName,\n    fileRequired,\n    groupsAreValid,\n    hostname,\n    imageUrl,\n    interval,\n    https,\n    localhost,\n    trailingForwardSlash,\n    url,\n    matching,\n    maxLength,\n    maxValue,\n    minLength,\n    minValue,\n    noUpperCase,\n    portNumber,\n    required,\n    requiredInt,\n    isInteger,\n    isPositive,\n    isOctal,\n    roleTemplateRules,\n    ruleGroups,\n    servicePort,\n    subDomain,\n    testRule,\n    wildcardHostname,\n  };\n}\n"]}]}