{"remainingRequest":"/home/ubuntu/susecon-2024-ext-demo/node_modules/ts-loader/index.js??ref--17-1!/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/edit/provisioning.cattle.io.cluster/__tests__/Advanced.test.ts","dependencies":[{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/edit/provisioning.cattle.io.cluster/__tests__/Advanced.test.ts","mtime":1725271280091},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/babel-loader/lib/index.js","mtime":1725271298942},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/ts-loader/index.js","mtime":1725271299135}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:LyogZXNsaW50LWRpc2FibGUgamVzdC9uby1ob29rcyAqLwppbXBvcnQgeyBtb3VudCB9IGZyb20gJ0B2dWUvdGVzdC11dGlscyc7CmltcG9ydCBBZHZhbmNlZCBmcm9tICdAc2hlbGwvZWRpdC9wcm92aXNpb25pbmcuY2F0dGxlLmlvLmNsdXN0ZXIvdGFicy9BZHZhbmNlZC52dWUnOwppbXBvcnQgeyBfWUFNTCwgX1ZJRVcgfSBmcm9tICdAc2hlbGwvY29uZmlnL3F1ZXJ5LXBhcmFtcyc7CmltcG9ydCB7IGNsb25lIH0gZnJvbSAnQHNoZWxsL3V0aWxzL29iamVjdCc7CmltcG9ydCB7IFBST1ZfQ0xVU1RFUiwgVkVSU0lPTl9DTFVTVEVSIH0gZnJvbSAnQHNoZWxsL2VkaXQvcHJvdmlzaW9uaW5nLmNhdHRsZS5pby5jbHVzdGVyL19fdGVzdHNfXy91dGlscy9jbHVzdGVyJzsKZGVzY3JpYmUoJ2NvbXBvbmVudDogQWR2YW5jZWQnLCAoKSA9PiB7CiAgICBsZXQgd3JhcHBlcjsKICAgIGNvbnN0IG1vdW50T3B0aW9ucyA9IHsKICAgICAgICBwcm9wc0RhdGE6IHsKICAgICAgICAgICAgdmFsdWU6IHt9LAogICAgICAgICAgICBtb2RlOiBfVklFVywKICAgICAgICAgICAgaGF2ZUFyZ0luZm86IHRydWUsCiAgICAgICAgICAgIHNlbGVjdGVkVmVyc2lvbjogVkVSU0lPTl9DTFVTVEVSCiAgICAgICAgfSwKICAgICAgICBtb2NrczogewogICAgICAgICAgICAkc3RvcmU6IHsKICAgICAgICAgICAgICAgIGdldHRlcnM6IHsKICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RvcmU6ICgpID0+ICdjdXJyZW50X3N0b3JlJywKICAgICAgICAgICAgICAgICAgICAnY3VycmVudF9zdG9yZS9zY2hlbWFGb3InOiBqZXN0LmZuKCksCiAgICAgICAgICAgICAgICAgICAgJ2N1cnJlbnRfc3RvcmUvYWxsJzogamVzdC5mbigpLAogICAgICAgICAgICAgICAgICAgICdpMThuL3QnOiBqZXN0LmZuKCksCiAgICAgICAgICAgICAgICAgICAgJ2kxOG4vZXhpc3RzJzogamVzdC5mbigpLAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICAkcm91dGU6IHsgcXVlcnk6IHsgQVM6IF9ZQU1MIH0gfSwKICAgICAgICAgICAgJHJvdXRlcjogeyBhcHBseVF1ZXJ5OiBqZXN0LmZuKCkgfSwKICAgICAgICB9CiAgICB9OwogICAgZGVzY3JpYmUoJ2NsdXN0ZXIgY29uZmlndXJhdGlvbnMnLCAoKSA9PiB7CiAgICAgICAgaXQoYHNob3VsZCBzdXBwb3J0IGVtcHR5IG1hY2hpbmVTZWxlY3RvckNvbmZpZ2AsICgpID0+IHsKICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBjbG9uZShQUk9WX0NMVVNURVIpOwogICAgICAgICAgICB2YWx1ZS5zcGVjLnJrZUNvbmZpZy5tYWNoaW5lU2VsZWN0b3JDb25maWcgPSBbXTsKICAgICAgICAgICAgbW91bnRPcHRpb25zLnByb3BzRGF0YS52YWx1ZSA9IHZhbHVlOwogICAgICAgICAgICB3cmFwcGVyID0gbW91bnQoQWR2YW5jZWQsIG1vdW50T3B0aW9ucyk7CiAgICAgICAgICAgIGNvbnN0IGlucHV0RWxlbSA9IHdyYXBwZXIuZmluZCgnW2RhdGEtdGVzdGlkPSJhcnJheS1saXN0LWJveDAiXScpLmVsZW1lbnQ7CiAgICAgICAgICAgIGV4cGVjdChpbnB1dEVsZW0pLnRvQmVVbmRlZmluZWQoKTsKICAgICAgICB9KTsKICAgICAgICBkZXNjcmliZShgJ3Byb3RlY3Qta2VybmVsLWRlZmF1bHRzJ2AsICgpID0+IHsKICAgICAgICAgICAgaXQoYHNob3VsZCBzaG93IHZhbHVlIGZyb20gbWFjaGluZUdsb2JhbENvbmZpZ2AsICgpID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gY2xvbmUoUFJPVl9DTFVTVEVSKTsKICAgICAgICAgICAgICAgIHZhbHVlLnNwZWMucmtlQ29uZmlnLm1hY2hpbmVHbG9iYWxDb25maWdbJ3Byb3RlY3Qta2VybmVsLWRlZmF1bHRzJ10gPSB0cnVlOwogICAgICAgICAgICAgICAgdmFsdWUuc3BlYy5ya2VDb25maWcubWFjaGluZVNlbGVjdG9yQ29uZmlnID0gW3sKICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlnOiB7fSwKICAgICAgICAgICAgICAgICAgICAgICAgbWFjaGluZUxhYmVsU2VsZWN0b3I6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoRXhwcmVzc2lvbnM6IFt7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleTogJ2ZvbycsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wZXJhdG9yOiAnSW4nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXM6IFsnYmFyJ10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRjaExhYmVsczogeyBmb28xOiAnYmFyMScgfSwKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH1dOwogICAgICAgICAgICAgICAgbW91bnRPcHRpb25zLnByb3BzRGF0YS5tb2RlID0gX1ZJRVc7CiAgICAgICAgICAgICAgICBtb3VudE9wdGlvbnMucHJvcHNEYXRhLnZhbHVlID0gdmFsdWU7CiAgICAgICAgICAgICAgICB3cmFwcGVyID0gbW91bnQoQWR2YW5jZWQsIG1vdW50T3B0aW9ucyk7CiAgICAgICAgICAgICAgICBjb25zdCBjaGVja2JveCA9IHdyYXBwZXIuZmluZCgnW2RhdGEtdGVzdGlkPSJwcm90ZWN0LWtlcm5lbC1kZWZhdWx0cyJdJykuZmluZCgnW3R5cGU9ImNoZWNrYm94Il0nKS5lbGVtZW50OwogICAgICAgICAgICAgICAgZXhwZWN0KGNoZWNrYm94LnZhbHVlKS50b0JlKCd0cnVlJyk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBpdChgc2hvdWxkIHNob3cgdmFsdWUgZnJvbSBtYWNoaW5lU2VsZWN0b3JDb25maWcuY29uZmlnYCwgKCkgPT4gewogICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBjbG9uZShQUk9WX0NMVVNURVIpOwogICAgICAgICAgICAgICAgdmFsdWUuc3BlYy5ya2VDb25maWcubWFjaGluZUdsb2JhbENvbmZpZ1sncHJvdGVjdC1rZXJuZWwtZGVmYXVsdHMnXSA9IGZhbHNlOwogICAgICAgICAgICAgICAgdmFsdWUuc3BlYy5ya2VDb25maWcubWFjaGluZVNlbGVjdG9yQ29uZmlnID0gW3sKICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlnOiB7fSwKICAgICAgICAgICAgICAgICAgICAgICAgbWFjaGluZUxhYmVsU2VsZWN0b3I6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZzogeyAncHJvdGVjdC1rZXJuZWwtZGVmYXVsdHMnOiB0cnVlIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRjaEV4cHJlc3Npb25zOiBbewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk6ICdmb28nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGVyYXRvcjogJ0luJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVzOiBbJ2JhciddLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1dLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hMYWJlbHM6IHsgZm9vMTogJ2JhcjEnIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9XTsKICAgICAgICAgICAgICAgIG1vdW50T3B0aW9ucy5wcm9wc0RhdGEubW9kZSA9IF9WSUVXOwogICAgICAgICAgICAgICAgbW91bnRPcHRpb25zLnByb3BzRGF0YS52YWx1ZSA9IHZhbHVlOwogICAgICAgICAgICAgICAgd3JhcHBlciA9IG1vdW50KEFkdmFuY2VkLCBtb3VudE9wdGlvbnMpOwogICAgICAgICAgICAgICAgY29uc3QgY2hlY2tib3ggPSB3cmFwcGVyLmZpbmQoJ1tkYXRhLXRlc3RpZD0icHJvdGVjdC1rZXJuZWwtZGVmYXVsdHMiXScpLmZpbmQoJ1t0eXBlPSJjaGVja2JveCJdJykuZWxlbWVudDsKICAgICAgICAgICAgICAgIGV4cGVjdChjaGVja2JveC52YWx1ZSkudG9CZSgndHJ1ZScpOwogICAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgIH0pOwp9KTsK"},{"version":3,"file":"/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/edit/provisioning.cattle.io.cluster/__tests__/Advanced.test.ts","sourceRoot":"","sources":["/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/edit/provisioning.cattle.io.cluster/__tests__/Advanced.test.ts"],"names":[],"mappings":"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","sourcesContent":["/* eslint-disable jest/no-hooks */\nimport { mount, Wrapper } from '@vue/test-utils';\nimport Advanced from '@shell/edit/provisioning.cattle.io.cluster/tabs/Advanced.vue';\nimport { _YAML, _VIEW } from '@shell/config/query-params';\nimport { clone } from '@shell/utils/object';\nimport { PROV_CLUSTER, VERSION_CLUSTER } from '@shell/edit/provisioning.cattle.io.cluster/__tests__/utils/cluster';\n\ndescribe('component: Advanced', () => {\n  let wrapper: Wrapper<InstanceType<typeof Advanced>>;\n\n  const mountOptions = {\n    propsData: {\n      value:           {},\n      mode:            _VIEW,\n      haveArgInfo:     true,\n      selectedVersion: VERSION_CLUSTER\n    },\n    mocks: {\n      $store: {\n        getters: {\n          currentStore:              () => 'current_store',\n          'current_store/schemaFor': jest.fn(),\n          'current_store/all':       jest.fn(),\n          'i18n/t':                  jest.fn(),\n          'i18n/exists':             jest.fn(),\n        }\n      },\n      $route:  { query: { AS: _YAML } },\n      $router: { applyQuery: jest.fn() },\n    }\n  };\n\n  describe('cluster configurations', () => {\n    it(`should support empty machineSelectorConfig`, () => {\n      const value = clone(PROV_CLUSTER);\n\n      value.spec.rkeConfig.machineSelectorConfig = [];\n\n      mountOptions.propsData.value = value;\n\n      wrapper = mount(\n        Advanced,\n        mountOptions\n      );\n\n      const inputElem = wrapper.find('[data-testid=\"array-list-box0\"]').element as HTMLElement;\n\n      expect(inputElem).toBeUndefined();\n    });\n\n    describe(`'protect-kernel-defaults'`, () => {\n      it(`should show value from machineGlobalConfig`, () => {\n        const value = clone(PROV_CLUSTER);\n\n        value.spec.rkeConfig.machineGlobalConfig['protect-kernel-defaults'] = true;\n        value.spec.rkeConfig.machineSelectorConfig = [{\n          config:               {},\n          machineLabelSelector: {\n            matchExpressions: [{\n              key:      'foo',\n              operator: 'In',\n              values:   ['bar'],\n            }],\n            matchLabels: { foo1: 'bar1' },\n          }\n        }];\n\n        mountOptions.propsData.mode = _VIEW;\n        mountOptions.propsData.value = value;\n\n        wrapper = mount(\n          Advanced,\n          mountOptions\n        );\n\n        const checkbox = wrapper.find('[data-testid=\"protect-kernel-defaults\"]').find('[type=\"checkbox\"]').element as HTMLInputElement;\n\n        expect(checkbox.value).toBe('true');\n      });\n\n      it(`should show value from machineSelectorConfig.config`, () => {\n        const value = clone(PROV_CLUSTER);\n\n        value.spec.rkeConfig.machineGlobalConfig['protect-kernel-defaults'] = false;\n        value.spec.rkeConfig.machineSelectorConfig = [{\n          config:               {},\n          machineLabelSelector: {\n            config:           { 'protect-kernel-defaults': true },\n            matchExpressions: [{\n              key:      'foo',\n              operator: 'In',\n              values:   ['bar'],\n            }],\n            matchLabels: { foo1: 'bar1' },\n          }\n        }];\n\n        mountOptions.propsData.mode = _VIEW;\n        mountOptions.propsData.value = value;\n\n        wrapper = mount(\n          Advanced,\n          mountOptions\n        );\n\n        const checkbox = wrapper.find('[data-testid=\"protect-kernel-defaults\"]').find('[type=\"checkbox\"]').element as HTMLInputElement;\n\n        expect(checkbox.value).toBe('true');\n      });\n    });\n  });\n});\n"]}]}