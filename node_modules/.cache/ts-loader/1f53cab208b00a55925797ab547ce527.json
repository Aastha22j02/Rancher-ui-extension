{"remainingRequest":"/home/ubuntu/suseconf/node_modules/ts-loader/index.js??ref--17-1!/home/ubuntu/suseconf/node_modules/@rancher/shell/store/type-map.utils.ts","dependencies":[{"path":"/home/ubuntu/suseconf/node_modules/@rancher/shell/store/type-map.utils.ts","mtime":1725338146566},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js","mtime":1725271298942},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/ts-loader/index.js","mtime":1725271299135}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgZmluZEJ5LCBpbnNlcnRBdCwgcmVtb3ZlT2JqZWN0IH0gZnJvbSAnQHNoZWxsL3V0aWxzL2FycmF5JzsKaW1wb3J0IHsgQ09VTlQgfSBmcm9tICdAc2hlbGwvY29uZmlnL3R5cGVzJzsKY29uc3QgRklFTERfUkVHRVggPSAvXlwkXC5tZXRhZGF0YVwuZmllbGRzXFsoWzAtOV0qKVxdLzsKLyoqCiAqIENyZWF0ZSB0aGUgaGVhZGVycyB1c2VkIGluIGxpc3RzIHRvIHNob3cgYSByZXNvdXJjZQogKgogKiBUaGVzZSBjb3VsZCBiZQogKiAtIFByZS1jb25maWd1cmVkIHZpYSB0aGUgcHJvZHVjdCAoZWl0aGVyIG5vbi1wYWdpbmF0ZWQgb3IgcGFnaW5hdGVkKQogKiAtIEdlbmVyYXRlZCBkeW5hbWljYWxseSBmcm9tIHNjaGVtYSdzIGF0dHJpYnV0ZXMuY29sdW1ucwogKgogKiBUaGVyZSdzIGFsc28gc29tZSBhZGRpdGlvbmFsIG9uZXMgbGlrZSBzdGF0ZSwgYWdlLCBhbmQgYXQgbGVhc3Qgb25lIG9mIG5hbWUgb3IgaWQKICoKICogVGhlIG9yZGVyIG9mIHRoZXNlIGFyZSBtYXNzYWdlZCBhcyB3ZWxsCiAqLwpleHBvcnQgZnVuY3Rpb24gY3JlYXRlSGVhZGVycyhjdHgsIG9wdCkgewogICAgdmFyIF9hOwogICAgY29uc3QgeyBoZWFkZXJzLCB0eXBlT3B0aW9ucywgc2NoZW1hLCBjb2x1bW5zLCBwYWdpbmF0aW9uIH0gPSBvcHQ7CiAgICBjb25zdCB7IHN0YXRlOiBzdGF0ZUNvbHVtbiwgbmFtZTogbmFtZUNvbHVtbiwgbmFtZXNwYWNlOiBuYW1lc3BhY2VDb2x1bW4sIGlkOiBpZENvbHVtbiwgYWdlOiBhZ2VDb2x1bW4gfSA9IGNvbHVtbnM7CiAgICBjb25zdCB7IHJvb3RHZXR0ZXJzIH0gPSBjdHg7CiAgICBjb25zdCBvdXQgPSB0eXBlT3B0aW9ucy5zaG93U3RhdGUgPyBbc3RhdGVDb2x1bW5dIDogW107CiAgICBjb25zdCBhdHRyaWJ1dGVzID0gc2NoZW1hLmF0dHJpYnV0ZXMgfHwge307CiAgICBjb25zdCBjb2x1bW5zRnJvbVNjaGVtYSA9IGF0dHJpYnV0ZXMuY29sdW1ucyB8fCBbXTsKICAgIC8vIEEgc3BlY2lmaWMgbGlzdCBoYXMgYmVlbiBwcm92aWRlZAogICAgaWYgKChfYSA9IGhlYWRlcnMgPT09IG51bGwgfHwgaGVhZGVycyA9PT0gdm9pZCAwID8gdm9pZCAwIDogaGVhZGVyc1tzY2hlbWEuaWRdKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EubGVuZ3RoKSB7CiAgICAgICAgcmV0dXJuIGhlYWRlcnNbc2NoZW1hLmlkXS5tYXAoKGVudHJ5KSA9PiB7CiAgICAgICAgICAgIGlmICh0eXBlb2YgZW50cnkgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgICAgICAgICBjb25zdCBjb2wgPSBmaW5kQnkoY29sdW1uc0Zyb21TY2hlbWEsICduYW1lJywgZW50cnkpOwogICAgICAgICAgICAgICAgaWYgKGNvbCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBoZWFkZXJGcm9tU2NoZW1hQ29sKGNvbCwgcm9vdEdldHRlcnMsIHBhZ2luYXRpb24sIGFnZUNvbHVtbik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiBlbnRyeTsKICAgICAgICAgICAgfQogICAgICAgIH0pLmZpbHRlcigoY29sKSA9PiAhIWNvbCk7CiAgICB9CiAgICAvLyBPdGhlcndpc2UgbWFrZSBvbmUgdXAgZnJvbSBzY2hlbWEKICAgIGxldCBoYXNOYW1lID0gZmFsc2U7CiAgICBjb25zdCBuYW1lc3BhY2VkID0gYXR0cmlidXRlcy5uYW1lc3BhY2VkIHx8IGZhbHNlOwogICAgZm9yIChjb25zdCBjb2wgb2YgY29sdW1uc0Zyb21TY2hlbWEpIHsKICAgICAgICBpZiAoY29sLmZvcm1hdCA9PT0gJ25hbWUnKSB7CiAgICAgICAgICAgIGhhc05hbWUgPSB0cnVlOwogICAgICAgICAgICBvdXQucHVzaChuYW1lQ29sdW1uIHx8IGhlYWRlckZyb21TY2hlbWFDb2woY29sLCByb290R2V0dGVycywgcGFnaW5hdGlvbiwgYWdlQ29sdW1uKSk7CiAgICAgICAgICAgIGlmIChuYW1lc3BhY2VkKSB7CiAgICAgICAgICAgICAgICBvdXQucHVzaChuYW1lc3BhY2VDb2x1bW4pOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICBvdXQucHVzaChoZWFkZXJGcm9tU2NoZW1hQ29sKGNvbCwgcm9vdEdldHRlcnMsIHBhZ2luYXRpb24sIGFnZUNvbHVtbikpOwogICAgICAgIH0KICAgIH0KICAgIC8vIEFsd2F5cyB0cnkgdG8gaGF2ZSBhbiBpZGVudGlmaWVyCiAgICBpZiAoIWhhc05hbWUpIHsKICAgICAgICBpbnNlcnRBdChvdXQsIDEsIGlkQ29sdW1uIHx8IG5hbWVDb2x1bW4pOwogICAgICAgIGlmIChuYW1lc3BhY2VkKSB7CiAgICAgICAgICAgIGluc2VydEF0KG91dCwgMiwgbmFtZXNwYWNlQ29sdW1uKTsKICAgICAgICB9CiAgICB9CiAgICAvLyBBZ2UgYWx3YXlzIGdvZXMgbGFzdAogICAgY29uc3QgYWdlQ29sdW1uQWN0dWFsID0gb3V0LmZpbmQoKG8pID0+IG8ubmFtZS50b0xvY2FsZUxvd2VyQ2FzZSgpID09PSAnYWdlJyk7CiAgICBpZiAoYWdlQ29sdW1uQWN0dWFsKSB7CiAgICAgICAgcmVtb3ZlT2JqZWN0KG91dCwgYWdlQ29sdW1uQWN0dWFsKTsKICAgICAgICBpZiAodHlwZU9wdGlvbnMuc2hvd0FnZSkgewogICAgICAgICAgICBvdXQucHVzaChhZ2VDb2x1bW5BY3R1YWwpOwogICAgICAgIH0KICAgIH0KICAgIHJldHVybiBvdXQ7Cn0KLyoqCiAqIEdpdmVuIGEgc2NoZW1hJ3MgYXR0cmlidXRlLmNvbHVtbiB2YWx1ZSBjcmVhdGUgYSBoZWFkZXIKICovCmV4cG9ydCBmdW5jdGlvbiBoZWFkZXJGcm9tU2NoZW1hQ29sKGNvbCwgcm9vdEdldHRlcnMsIHBhZ2luYXRpb24sIGFnZUNvbHVtbikgewogICAgbGV0IGZvcm1hdHRlciwgd2lkdGgsIGZvcm1hdHRlck9wdHM7CiAgICBpZiAoKGNvbC5mb3JtYXQgPT09ICcnIHx8IGNvbC5mb3JtYXQgPT09ICdkYXRlJykgJiYgY29sLm5hbWUgPT09ICdBZ2UnICYmIGFnZUNvbHVtbikgewogICAgICAgIHJldHVybiBhZ2VDb2x1bW47CiAgICB9CiAgICBpZiAoY29sLmZvcm1hdCA9PT0gJ2RhdGUnIHx8IGNvbC50eXBlID09PSAnZGF0ZScpIHsKICAgICAgICBmb3JtYXR0ZXIgPSAnRGF0ZSc7CiAgICAgICAgd2lkdGggPSAxMjA7CiAgICAgICAgZm9ybWF0dGVyT3B0cyA9IHsgbXVsdGlsaW5lOiB0cnVlIH07CiAgICB9CiAgICBpZiAoY29sLnR5cGUgPT09ICdudW1iZXInIHx8IGNvbC50eXBlID09PSAnaW50JykgewogICAgICAgIGZvcm1hdHRlciA9ICdOdW1iZXInOwogICAgfQogICAgY29uc3QgY29sTmFtZSA9IGNvbC5uYW1lLmluY2x1ZGVzKCcgJykgPyBjb2wubmFtZS5zcGxpdCgnICcpLm1hcCgod29yZCkgPT4gd29yZC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHdvcmQuc3Vic3RyaW5nKDEpKS5qb2luKCcnKSA6IGNvbC5uYW1lOwogICAgY29uc3QgZXhpc3RzID0gcm9vdEdldHRlcnNbJ2kxOG4vZXhpc3RzJ107CiAgICBjb25zdCB0ID0gcm9vdEdldHRlcnNbJ2kxOG4vdCddOwogICAgY29uc3QgbGFiZWxLZXkgPSBgdGFibGVIZWFkZXJzLiR7Y29sTmFtZS5jaGFyQXQoMCkudG9Mb3dlckNhc2UoKSArIGNvbE5hbWUuc2xpY2UoMSl9YDsKICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gY29sLmRlc2NyaXB0aW9uIHx8ICcnOwogICAgY29uc3QgdG9vbHRpcCA9IGRlc2NyaXB0aW9uICYmIGRlc2NyaXB0aW9uW2Rlc2NyaXB0aW9uLmxlbmd0aCAtIDFdID09PSAnLicgPyBkZXNjcmlwdGlvbi5zbGljZSgwLCAtMSkgOiBkZXNjcmlwdGlvbjsKICAgIGNvbnN0IHBhdGggPSByb3dWYWx1ZUdldHRlcihjb2wsIGZhbHNlKTsKICAgIC8vIElmIHdlJ3JlIG5vdCBwYWdpbmF0aW5nIHVzZSBhIGZ1bmN0aW9uIHRvIGdldCB0aGUgdmFsdWUsIG90aGVyd2lzZSB1c2UgdGhlIHN0cmluZyBwYXRoCiAgICBjb25zdCBhbHRQYXRoID0gcGFnaW5hdGlvbiA/IHBhdGggOiByb3dWYWx1ZUdldHRlcihjb2wsIHRydWUpOwogICAgcmV0dXJuIHsKICAgICAgICBuYW1lOiBjb2wubmFtZS50b0xvd2VyQ2FzZSgpLAogICAgICAgIGxhYmVsOiBleGlzdHMobGFiZWxLZXkpID8gdChsYWJlbEtleSkgOiBjb2wubmFtZSwKICAgICAgICB2YWx1ZTogYWx0UGF0aCwKICAgICAgICBzb3J0OiBbcGF0aF0sCiAgICAgICAgc2VhcmNoOiBwYXRoLAogICAgICAgIGZvcm1hdHRlciwKICAgICAgICBmb3JtYXR0ZXJPcHRzLAogICAgICAgIHdpZHRoLAogICAgICAgIHRvb2x0aXAKICAgIH07Cn0KZXhwb3J0IGZ1bmN0aW9uIHJvd1ZhbHVlR2V0dGVyKGNvbCwgYXNGbiA9IHRydWUpIHsKICAgIC8vICdmaWVsZCcgY29tZXMgZnJvbSB0aGUgc2NoZW1hIC0gdHlwaWNhbGx5IGl0IGlzIG9mIHRoZSBmb3JtICQubWV0YWRhdGEuZmllbGRbTl0KICAgIC8vIFdlIHdpbGwgdXNlIEpzb25QYXRoIHRvIGxvb2sgdXAgdGhpcyB2YWx1ZSwgd2hpY2ggaXMgY29zdGx5IC0gc28gaWYgd2UgY2FuIGRldGVjdCB0aGlzIGZvcm1hdAogICAgLy8gVXNlIGEgbW9yZSBlZmZpY2llbnQgZnVuY3Rpb24gdG8gZ2V0IHRoZSB2YWx1ZQogICAgY29uc3QgdmFsdWUgPSBjb2wuZmllbGQuc3RhcnRzV2l0aCgnLicpID8gYCQke2NvbC5maWVsZH1gIDogY29sLmZpZWxkOwogICAgY29uc3QgZm91bmQgPSB2YWx1ZS5tYXRjaChGSUVMRF9SRUdFWCk7CiAgICBpZiAoZm91bmQgJiYgZm91bmQubGVuZ3RoID09PSAyKSB7CiAgICAgICAgY29uc3QgZmllbGRJbmRleCA9IHBhcnNlSW50KGZvdW5kWzFdLCAxMCk7CiAgICAgICAgaWYgKGFzRm4pIHsKICAgICAgICAgICAgcmV0dXJuIChyb3cpID0+IHsgdmFyIF9hLCBfYjsgcmV0dXJuIChfYiA9IChfYSA9IHJvdy5tZXRhZGF0YSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmZpZWxkcykgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iW2ZpZWxkSW5kZXhdOyB9OwogICAgICAgIH0KICAgICAgICByZXR1cm4gYG1ldGFkYXRhLmZpZWxkcy4ke2ZpZWxkSW5kZXh9YDsKICAgIH0KICAgIHJldHVybiB2YWx1ZTsKfQovKioKICogQ29uZGl0aW9uYWxseSBkZXRlcm1pbmUgaWYgYSByZXNvdXJjZSBzaG91bGQgdXNlIG5haXZlIGt1YmUgcGFnaW5hdGlvbiBhcGkgdG8gZmV0Y2ggYWxsIHJlc3VsdHMKICogKG5vdCBqdXN0IGZpcnN0IHBhZ2UpCiAqLwpleHBvcnQgY29uc3QgY29uZGl0aW9uYWxEZXBhZ2luYXRlID0gKGRlcGFnaW5hdGUsIGRlcGFnaW5hdGVBcmdzKSA9PiB7CiAgICBpZiAodHlwZW9mIGRlcGFnaW5hdGUgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICByZXR1cm4gISFkZXBhZ2luYXRlQXJncyA/IGRlcGFnaW5hdGUoZGVwYWdpbmF0ZUFyZ3MpIDogZmFsc2U7CiAgICB9CiAgICByZXR1cm4gZGVwYWdpbmF0ZTsKfTsKLyoqCiAqIFNldHVwIGEgZnVuY3Rpb24gdGhhdCB3aWxsIGRldGVybWluZSBpZiBhIHJlc291cmNlIHNob3VsZCB1c2UgbmF0aXZlIGt1YmUgcGFnaW5hdGlvbiBhcGkgdG8gZmV0Y2ggYWxsIHJlc291cmNlcwogKiAobm90IGp1c3QgdGhlIGZpcnN0IHBhZ2UpCiAqLwpleHBvcnQgY29uc3QgY29uZmlndXJlQ29uZGl0aW9uYWxEZXBhZ2luYXRlID0gKHsgbWF4UmVzb3VyY2VDb3VudCwgaXNOb3JtYW4gPSBmYWxzZSB9KSA9PiB7CiAgICByZXR1cm4gKGZuQXJncykgPT4gewogICAgICAgIHZhciBfYSwgX2I7CiAgICAgICAgY29uc3QgeyByb290R2V0dGVycyB9ID0gZm5BcmdzLmN0eDsKICAgICAgICBjb25zdCB7IHR5cGUgfSA9IGZuQXJncy5hcmdzOwogICAgICAgIGNvbnN0IHNhZmVUeXBlID0gaXNOb3JtYW4gPyBgbWFuYWdlbWVudC5jYXR0bGUuaW8uJHt0eXBlfWAgOiB0eXBlOwogICAgICAgIGNvbnN0IGluU3RvcmUgPSByb290R2V0dGVyc1snY3VycmVudFN0b3JlJ10oc2FmZVR5cGUpOwogICAgICAgIGNvbnN0IHJlc291cmNlQ291bnRzID0gKF9hID0gcm9vdEdldHRlcnNbYCR7aW5TdG9yZX0vYWxsYF0oQ09VTlQpWzBdKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuY291bnRzW3NhZmVUeXBlXTsKICAgICAgICBjb25zdCByZXNvdXJjZUNvdW50ID0gKF9iID0gcmVzb3VyY2VDb3VudHMgPT09IG51bGwgfHwgcmVzb3VyY2VDb3VudHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlc291cmNlQ291bnRzLnN1bW1hcnkpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5jb3VudDsKICAgICAgICByZXR1cm4gcmVzb3VyY2VDb3VudCAhPT0gdW5kZWZpbmVkID8gcmVzb3VyY2VDb3VudCA8IG1heFJlc291cmNlQ291bnQgOiBmYWxzZTsKICAgIH07Cn07Cg=="},{"version":3,"file":"/home/ubuntu/suseconf/node_modules/@rancher/shell/store/type-map.utils.ts","sourceRoot":"","sources":["/home/ubuntu/suseconf/node_modules/@rancher/shell/store/type-map.utils.ts"],"names":[],"mappings":"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","sourcesContent":["import { SchemaAttribute, SchemaAttributeColumn } from '@shell/plugins/steve/schema';\nimport { TableColumn } from '@shell/types/store/type-map';\nimport { VuexStoreGetters } from '@shell/types/store/vuex';\nimport { findBy, insertAt, removeObject } from '@shell/utils/array';\nimport { COUNT } from '@shell/config/types';\nimport { ActionFindAllArgs } from '@shell/types/store/dashboard-store.types';\n\nconst FIELD_REGEX = /^\\$\\.metadata\\.fields\\[([0-9]*)\\]/;\n\ntype StoreColumns = { [schemaId: string]: TableColumn[]}\n\n/**\n * Create the headers used in lists to show a resource\n *\n * These could be\n * - Pre-configured via the product (either non-paginated or paginated)\n * - Generated dynamically from schema's attributes.columns\n *\n * There's also some additional ones like state, age, and at least one of name or id\n *\n * The order of these are massaged as well\n */\nexport function createHeaders(\n  ctx: {\n    getters: VuexStoreGetters,\n    rootGetters: VuexStoreGetters,\n    state: any,\n  },\n  opt: {\n    headers: StoreColumns,\n    typeOptions: any,\n    schema: any, // Once the schema-diet changes go in this can be typed\n    columns: {\n      /**\n       * Always show this column (if showState is true)\n       */\n      state: TableColumn,\n      /**\n        * If dynamically creating columns, use specific column for name, if required\n        */\n      name?: TableColumn,\n      /**\n        * If dynamically creating columns, use specific column for id, if required\n        */\n      id?: TableColumn\n      /**\n        * If dynamically creating columns, use specific column for namespace, if required\n        */\n      namespace: TableColumn,\n      /**\n        * If dynamically creating columns, use specific column for age, if required\n        */\n      age: TableColumn,\n    },\n    pagination: boolean\n  }): TableColumn[] {\n  const {\n    headers, typeOptions, schema, columns, pagination\n  } = opt;\n  const {\n    state: stateColumn, name: nameColumn, namespace: namespaceColumn, id: idColumn, age: ageColumn\n  } = columns;\n  const { rootGetters } = ctx;\n  const out = typeOptions.showState ? [stateColumn] : [];\n  const attributes = (schema.attributes as SchemaAttribute) || {};\n  const columnsFromSchema = attributes.columns || [];\n\n  // A specific list has been provided\n  if ( headers?.[schema.id]?.length ) {\n    return headers[schema.id].map((entry: any) => {\n      if ( typeof entry === 'string' ) {\n        const col = findBy(columnsFromSchema, 'name', entry);\n\n        if ( col ) {\n          return headerFromSchemaCol(col, rootGetters, pagination, ageColumn);\n        } else {\n          return null;\n        }\n      } else {\n        return entry;\n      }\n    }).filter((col: SchemaAttributeColumn) => !!col);\n  }\n\n  // Otherwise make one up from schema\n  let hasName = false;\n  const namespaced = attributes.namespaced || false;\n\n  for ( const col of columnsFromSchema ) {\n    if ( col.format === 'name' ) {\n      hasName = true;\n      out.push(nameColumn || headerFromSchemaCol(col, rootGetters, pagination, ageColumn));\n      if ( namespaced ) {\n        out.push(namespaceColumn);\n      }\n    } else {\n      out.push(headerFromSchemaCol(col, rootGetters, pagination, ageColumn));\n    }\n  }\n\n  // Always try to have an identifier\n  if ( !hasName ) {\n    insertAt(out, 1, idColumn || nameColumn);\n    if ( namespaced ) {\n      insertAt(out, 2, namespaceColumn);\n    }\n  }\n\n  // Age always goes last\n  const ageColumnActual = out.find((o) => o.name.toLocaleLowerCase() === 'age');\n\n  if ( ageColumnActual ) {\n    removeObject(out, ageColumnActual);\n    if ( typeOptions.showAge ) {\n      out.push(ageColumnActual);\n    }\n  }\n\n  return out;\n}\n\n/**\n * Given a schema's attribute.column value create a header\n */\nexport function headerFromSchemaCol(col: SchemaAttributeColumn, rootGetters: VuexStoreGetters, pagination: boolean, ageColumn: TableColumn): TableColumn {\n  let formatter, width, formatterOpts;\n\n  if ( (col.format === '' || col.format === 'date') && col.name === 'Age' && ageColumn ) {\n    return ageColumn;\n  }\n\n  if ( col.format === 'date' || col.type === 'date' ) {\n    formatter = 'Date';\n    width = 120;\n    formatterOpts = { multiline: true };\n  }\n\n  if ( col.type === 'number' || col.type === 'int' ) {\n    formatter = 'Number';\n  }\n\n  const colName = col.name.includes(' ') ? col.name.split(' ').map((word) => word.charAt(0).toUpperCase() + word.substring(1) ).join('') : col.name;\n\n  const exists = rootGetters['i18n/exists'];\n  const t = rootGetters['i18n/t'];\n  const labelKey = `tableHeaders.${ colName.charAt(0).toLowerCase() + colName.slice(1) }`;\n  const description = col.description || '';\n  const tooltip = description && description[description.length - 1] === '.' ? description.slice(0, -1) : description;\n\n  const path = rowValueGetter(col, false) as string;\n  // If we're not paginating use a function to get the value, otherwise use the string path\n  const altPath = pagination ? path : rowValueGetter(col, true) as Function;\n\n  return {\n    name:   col.name.toLowerCase(),\n    label:  exists(labelKey) ? t(labelKey) : col.name,\n    value:  altPath,\n    sort:   [path],\n    search: path,\n    formatter,\n    formatterOpts,\n    width,\n    tooltip\n  };\n}\n\nexport function rowValueGetter(col: SchemaAttributeColumn, asFn = true): string | ((row: any) => string) {\n  // 'field' comes from the schema - typically it is of the form $.metadata.field[N]\n  // We will use JsonPath to look up this value, which is costly - so if we can detect this format\n  // Use a more efficient function to get the value\n  const value = col.field.startsWith('.') ? `$${ col.field }` : col.field;\n  const found = value.match(FIELD_REGEX);\n\n  if (found && found.length === 2) {\n    const fieldIndex = parseInt(found[1], 10);\n\n    if (asFn) {\n      return (row: any) => row.metadata?.fields?.[fieldIndex];\n    }\n\n    return `metadata.fields.${ fieldIndex }`;\n  }\n\n  return value;\n}\n\ntype conditionalDepaginateArgs ={\n  ctx: { rootGetters: VuexStoreGetters},\n  args: { type: string, opt: ActionFindAllArgs},\n};\ntype conditionalDepaginateFn = (args: conditionalDepaginateArgs) => boolean\n\n/**\n * Conditionally determine if a resource should use naive kube pagination api to fetch all results\n * (not just first page)\n */\nexport const conditionalDepaginate = (\n  depaginate?: conditionalDepaginateFn | boolean,\n  depaginateArgs?: conditionalDepaginateArgs\n): boolean => {\n  if (typeof depaginate === 'function') {\n    return !!depaginateArgs ? depaginate(depaginateArgs) : false;\n  }\n\n  return depaginate as boolean;\n};\n\n/**\n * Setup a function that will determine if a resource should use native kube pagination api to fetch all resources\n * (not just the first page)\n */\nexport const configureConditionalDepaginate = (\n  { maxResourceCount, isNorman = false }: { maxResourceCount: number, isNorman: boolean },\n): conditionalDepaginateFn => {\n  return (fnArgs: conditionalDepaginateArgs ): boolean => {\n    const { rootGetters } = fnArgs.ctx;\n    const { type } = fnArgs.args;\n    const safeType = isNorman ? `management.cattle.io.${ type }` : type;\n\n    const inStore = rootGetters['currentStore'](safeType);\n    const resourceCounts = rootGetters[`${ inStore }/all`](COUNT)[0]?.counts[safeType];\n    const resourceCount = resourceCounts?.summary?.count;\n\n    return resourceCount !== undefined ? resourceCount < maxResourceCount : false;\n  };\n};\n"]}]}