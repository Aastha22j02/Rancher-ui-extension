{"remainingRequest":"/home/ubuntu/suseconf/node_modules/ts-loader/index.js??ref--17-1!/home/ubuntu/suseconf/node_modules/@rancher/shell/components/form/labeled-select-utils/labeled-select-pagination.ts","dependencies":[{"path":"/home/ubuntu/suseconf/node_modules/@rancher/shell/components/form/labeled-select-utils/labeled-select-pagination.ts","mtime":1725338146566},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js","mtime":1725271298942},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/ts-loader/index.js","mtime":1725271299135}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgZGVib3VuY2UgfSBmcm9tICdsb2Rhc2gnOwppbXBvcnQgeyBkZWZpbmVDb21wb25lbnQgfSBmcm9tICd2dWUnOwppbXBvcnQgeyBMQUJFTF9TRUxFQ1RfTk9UX09QVElPTl9LSU5EUywgTEFCRUxfU0VMRUNUX0tJTkRTIH0gZnJvbSAnQHNoZWxsL3R5cGVzL2NvbXBvbmVudHMvbGFiZWxlZFNlbGVjdCc7Ci8qKgogKiAnbWl4aW4nIHRvIHByb3ZpZGUgcGFnaW5hdGlvbiBzdXBwb3J0IHRvIExhYmVsZWRTZWxlY3QKICovCmV4cG9ydCBkZWZhdWx0IGRlZmluZUNvbXBvbmVudCh7CiAgICBwcm9wczogewogICAgICAgIHBhZ2luYXRlOiB7CiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGwsCiAgICAgICAgICAgIHR5cGU6IEZ1bmN0aW9uLAogICAgICAgIH0sCiAgICAgICAgaW5TdG9yZTogewogICAgICAgICAgICB0eXBlOiBTdHJpbmcsCiAgICAgICAgICAgIGRlZmF1bHQ6ICdjbHVzdGVyJywKICAgICAgICB9LAogICAgICAgIC8qKgogICAgICAgICAqIFJlc291cmNlIHRvIHNob3cKICAgICAgICAgKi8KICAgICAgICByZXNvdXJjZVR5cGU6IHsKICAgICAgICAgICAgdHlwZTogU3RyaW5nLAogICAgICAgICAgICBkZWZhdWx0OiBudWxsLAogICAgICAgIH0sCiAgICB9LAogICAgZGF0YSgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICAvLyBJbnRlcm5hbAogICAgICAgICAgICBjdXJyZW50UGFnZTogMSwKICAgICAgICAgICAgc2VhcmNoOiAnJywKICAgICAgICAgICAgcGFnZVNpemU6IDEwLAogICAgICAgICAgICBwYWdlczogMCwKICAgICAgICAgICAgZGVib3VuY2VkUmVxdWVzdFBhZ2luYXRpb246IGRlYm91bmNlKHRoaXMucmVxdWVzdFBhZ2luYXRpb24sIDcwMCksCiAgICAgICAgICAgIC8vIEV4dGVybmFsCiAgICAgICAgICAgIHBhZ2U6IFtdLAogICAgICAgICAgICB0b3RhbFJlc3VsdHM6IDAsCiAgICAgICAgICAgIHBhZ2luYXRpbmc6IGZhbHNlLAogICAgICAgIH07CiAgICB9LAogICAgYXN5bmMgbW91bnRlZCgpIHsKICAgICAgICBpZiAodGhpcy5jYW5QYWdpbmF0ZSkgewogICAgICAgICAgICBhd2FpdCB0aGlzLnJlcXVlc3RQYWdpbmF0aW9uKCk7CiAgICAgICAgfQogICAgfSwKICAgIGNvbXB1dGVkOiB7CiAgICAgICAgY2FuUGFnaW5hdGUoKSB7CiAgICAgICAgICAgIHJldHVybiAhIXRoaXMucGFnaW5hdGUgJiYgISF0aGlzLnJlc291cmNlVHlwZSAmJiB0aGlzLiRzdG9yZS5nZXR0ZXJzW2Ake3RoaXMuaW5TdG9yZX0vcGFnaW5hdGlvbkVuYWJsZWRgXSh0aGlzLnJlc291cmNlVHlwZSk7CiAgICAgICAgfSwKICAgICAgICBjYW5Mb2FkTW9yZSgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFnZXMgPiB0aGlzLmN1cnJlbnRQYWdlOwogICAgICAgIH0sCiAgICAgICAgb3B0aW9uc0luUGFnZSgpIHsKICAgICAgICAgICAgLy8gTnVtYmVyIG9mIGdlbnVpbmUgb3B0aW9ucyAobm90IGdyb3VwcywgZGl2aWRlcnMsIGV0YykKICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2FuUGFnaW5hdGUgPyB0aGlzLl9vcHRpb25zLmZpbHRlcigobykgPT4gewogICAgICAgICAgICAgICAgcmV0dXJuIG8ua2luZCAhPT0gTEFCRUxfU0VMRUNUX0tJTkRTLk5PTkUgJiYgIUxBQkVMX1NFTEVDVF9OT1RfT1BUSU9OX0tJTkRTLmluY2x1ZGVzKG8ua2luZCk7CiAgICAgICAgICAgIH0pLmxlbmd0aCA6IDA7CiAgICAgICAgfSwKICAgICAgICBvcHRpb25Db3VudHMoKSB7CiAgICAgICAgICAgIGlmICghdGhpcy5jYW5QYWdpbmF0ZSB8fCB0aGlzLm9wdGlvbnNJblBhZ2UgPT09IHRoaXMudG90YWxSZXN1bHRzKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gJyc7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLmdldHRlcnNbJ2kxOG4vdCddKCdsYWJlbFNlbGVjdC5wYWdpbmF0aW9uLmNvdW50cycsIHsKICAgICAgICAgICAgICAgIGNvdW50OiB0aGlzLm9wdGlvbnNJblBhZ2UsCiAgICAgICAgICAgICAgICB0b3RhbENvdW50OiB0aGlzLnRvdGFsUmVzdWx0cwogICAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgfSwKICAgIG1ldGhvZHM6IHsKICAgICAgICBsb2FkTW9yZSgpIHsKICAgICAgICAgICAgdGhpcy5jdXJyZW50UGFnZSsrOwogICAgICAgICAgICB0aGlzLnJlcXVlc3RQYWdpbmF0aW9uKCk7CiAgICAgICAgfSwKICAgICAgICBzZXRQYWdpbmF0aW9uRmlsdGVyKGZpbHRlcikgewogICAgICAgICAgICB0aGlzLnBhZ2luYXRpbmcgPSB0cnVlOyAvLyBEbyB0aGlzIGJlZm9yZSBkZWJvdW5jZQogICAgICAgICAgICB0aGlzLmN1cnJlbnRQYWdlID0gMTsKICAgICAgICAgICAgdGhpcy5zZWFyY2ggPSBmaWx0ZXI7CiAgICAgICAgICAgIHRoaXMuZGVib3VuY2VkUmVxdWVzdFBhZ2luYXRpb24odHJ1ZSk7CiAgICAgICAgfSwKICAgICAgICBhc3luYyByZXF1ZXN0UGFnaW5hdGlvbihyZXNldFBhZ2UgPSBmYWxzZSkgewogICAgICAgICAgICB0aGlzLnBhZ2luYXRpbmcgPSB0cnVlOwogICAgICAgICAgICBjb25zdCBwYWdpbmF0ZSA9IHRoaXMucGFnaW5hdGU7IC8vIENoZWNraW5nIGlzIGRvbmUgdmlhIHByb3AKICAgICAgICAgICAgY29uc3QgeyBwYWdlLCBwYWdlcywgdG90YWwgfSA9IGF3YWl0IHBhZ2luYXRlKHsKICAgICAgICAgICAgICAgIHJlc2V0UGFnZSwKICAgICAgICAgICAgICAgIHBhZ2VDb250ZW50OiB0aGlzLnBhZ2UgfHwgW10sCiAgICAgICAgICAgICAgICBwYWdlOiB0aGlzLmN1cnJlbnRQYWdlLAogICAgICAgICAgICAgICAgZmlsdGVyOiB0aGlzLnNlYXJjaCwKICAgICAgICAgICAgICAgIHBhZ2VTaXplOiB0aGlzLnBhZ2VTaXplLAogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdGhpcy5wYWdlID0gcGFnZTsKICAgICAgICAgICAgdGhpcy5wYWdlcyA9IHBhZ2VzIHx8IDA7CiAgICAgICAgICAgIHRoaXMudG90YWxSZXN1bHRzID0gdG90YWwgfHwgMDsKICAgICAgICAgICAgdGhpcy5wYWdpbmF0aW5nID0gZmFsc2U7CiAgICAgICAgfQogICAgfQp9KTsK"},{"version":3,"file":"/home/ubuntu/suseconf/node_modules/@rancher/shell/components/form/labeled-select-utils/labeled-select-pagination.ts","sourceRoot":"","sources":["/home/ubuntu/suseconf/node_modules/@rancher/shell/components/form/labeled-select-utils/labeled-select-pagination.ts"],"names":[],"mappings":"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","sourcesContent":["import { debounce } from 'lodash';\nimport { PropType, defineComponent } from 'vue';\nimport { ComputedOptions, MethodOptions } from 'vue/types/v3-component-options';\nimport { LabelSelectPaginateFn, LABEL_SELECT_NOT_OPTION_KINDS, LABEL_SELECT_KINDS } from '@shell/types/components/labeledSelect';\n\ninterface Props {\n  paginate?: LabelSelectPaginateFn\n}\n\ninterface Data {\n  currentPage: number,\n  search: string,\n  pageSize: number,\n\n  page: any[],\n  pages: number,\n  totalResults: number,\n\n  paginating: boolean,\n\n  debouncedRequestPagination: Function\n}\n\ninterface Computed extends ComputedOptions {\n  canPaginate: () => boolean,\n\n  canLoadMore: () => boolean,\n\n  optionsInPage: () => number,\n\n  optionCounts: () => string,\n}\n\ninterface Methods extends MethodOptions {\n  loadMore: () => void\n  setPaginationFilter: (filter: string) => void\n  requestPagination: () => Promise<any>;\n}\n\n/**\n * 'mixin' to provide pagination support to LabeledSelect\n */\nexport default defineComponent<Props, any, Data, Computed, Methods>({\n  props: {\n    paginate: {\n      default: null,\n      type:    Function as PropType<LabelSelectPaginateFn>,\n    },\n\n    inStore: {\n      type:    String,\n      default: 'cluster',\n    },\n\n    /**\n     * Resource to show\n     */\n    resourceType: {\n      type:    String,\n      default: null,\n    },\n  },\n\n  data(): Data {\n    return {\n      // Internal\n      currentPage: 1,\n      search:      '',\n      pageSize:    10,\n      pages:       0,\n\n      debouncedRequestPagination: debounce(this.requestPagination, 700),\n\n      // External\n      page:         [],\n      totalResults: 0,\n      paginating:   false,\n    };\n  },\n\n  async mounted() {\n    if (this.canPaginate) {\n      await this.requestPagination();\n    }\n  },\n\n  computed: {\n    canPaginate() {\n      return !!this.paginate && !!this.resourceType && this.$store.getters[`${ this.inStore }/paginationEnabled`](this.resourceType);\n    },\n\n    canLoadMore() {\n      return this.pages > this.currentPage;\n    },\n\n    optionsInPage() {\n      // Number of genuine options (not groups, dividers, etc)\n      return this.canPaginate ? this._options.filter((o: any) => {\n        return o.kind !== LABEL_SELECT_KINDS.NONE && !LABEL_SELECT_NOT_OPTION_KINDS.includes(o.kind);\n      }).length : 0;\n    },\n\n    optionCounts() {\n      if (!this.canPaginate || this.optionsInPage === this.totalResults) {\n        return '';\n      }\n\n      return this.$store.getters['i18n/t']('labelSelect.pagination.counts', {\n        count:      this.optionsInPage,\n        totalCount: this.totalResults\n      });\n    },\n  },\n\n  methods: {\n    loadMore() {\n      this.currentPage++;\n      this.requestPagination();\n    },\n\n    setPaginationFilter(filter: string) {\n      this.paginating = true; // Do this before debounce\n      this.currentPage = 1;\n      this.search = filter;\n      this.debouncedRequestPagination(true);\n    },\n\n    async requestPagination(resetPage = false) {\n      this.paginating = true;\n      const paginate: LabelSelectPaginateFn = this.paginate as LabelSelectPaginateFn; // Checking is done via prop\n\n      const {\n        page,\n        pages,\n        total\n      } = await paginate({\n        resetPage,\n        pageContent: this.page || [],\n        page:        this.currentPage,\n        filter:      this.search,\n        pageSize:    this.pageSize,\n      });\n\n      this.page = page;\n      this.pages = pages || 0;\n      this.totalResults = total || 0;\n\n      this.paginating = false;\n    }\n  }\n});\n"]}]}