{"remainingRequest":"/home/ubuntu/susecon-2024-ext-demo/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/pages/c/_cluster/uiplugins/index.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/pages/c/_cluster/uiplugins/index.vue","mtime":1725271280091},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/babel-loader/lib/index.js","mtime":1725271298942},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1725271300920}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IHsgbWFwR2V0dGVycyB9IGZyb20gJ3Z1ZXgnOwppbXBvcnQgeyBtYXBQcmVmLCBQTFVHSU5fREVWRUxPUEVSIH0gZnJvbSAnQHNoZWxsL3N0b3JlL3ByZWZzJzsKaW1wb3J0IHsgc29ydEJ5IH0gZnJvbSAnQHNoZWxsL3V0aWxzL3NvcnQnOwppbXBvcnQgeyBhbGxIYXNoIH0gZnJvbSAnQHNoZWxsL3V0aWxzL3Byb21pc2UnOwppbXBvcnQgeyBDQVRBTE9HLCBVSV9QTFVHSU4sIFNFUlZJQ0UsIE1BTkFHRU1FTlQgfSBmcm9tICdAc2hlbGwvY29uZmlnL3R5cGVzJzsKaW1wb3J0IHsgU0VUVElORyB9IGZyb20gJ0BzaGVsbC9jb25maWcvc2V0dGluZ3MnOwppbXBvcnQgeyBmZXRjaE9yQ3JlYXRlU2V0dGluZyB9IGZyb20gJ0BzaGVsbC91dGlscy9zZXR0aW5ncyc7CmltcG9ydCB7IGdldFZlcnNpb25EYXRhIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy92ZXJzaW9uJzsKaW1wb3J0IHsgQ0FUQUxPRyBhcyBDQVRBTE9HX0FOTk9UQVRJT05TIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy9sYWJlbHMtYW5ub3RhdGlvbnMnOwppbXBvcnQgeyBOQU1FIGFzIEFQUF9QUk9EVUNUIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy9wcm9kdWN0L2FwcHMnOwppbXBvcnQgQWN0aW9uTWVudSBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9BY3Rpb25NZW51JzsKaW1wb3J0IFRhYmJlZCBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9UYWJiZWQvaW5kZXgudnVlJzsKaW1wb3J0IFRhYiBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9UYWJiZWQvVGFiLnZ1ZSc7CmltcG9ydCBJY29uTWVzc2FnZSBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9JY29uTWVzc2FnZS52dWUnOwppbXBvcnQgTGF6eUltYWdlIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL0xhenlJbWFnZSc7CmltcG9ydCB7IEJhZGdlU3RhdGUgfSBmcm9tICdAY29tcG9uZW50cy9CYWRnZVN0YXRlJzsKaW1wb3J0IFVuaW5zdGFsbERpYWxvZyBmcm9tICcuL1VuaW5zdGFsbERpYWxvZy52dWUnOwppbXBvcnQgSW5zdGFsbERpYWxvZyBmcm9tICcuL0luc3RhbGxEaWFsb2cudnVlJzsKaW1wb3J0IENhdGFsb2dMb2FkRGlhbG9nIGZyb20gJy4vQ2F0YWxvZ0xpc3QvQ2F0YWxvZ0xvYWREaWFsb2cudnVlJzsKaW1wb3J0IENhdGFsb2dVbmluc3RhbGxEaWFsb2cgZnJvbSAnLi9DYXRhbG9nTGlzdC9DYXRhbG9nVW5pbnN0YWxsRGlhbG9nLnZ1ZSc7CmltcG9ydCBEZXZlbG9wZXJJbnN0YWxsRGlhbG9nIGZyb20gJy4vRGV2ZWxvcGVySW5zdGFsbERpYWxvZy52dWUnOwppbXBvcnQgUGx1Z2luSW5mb1BhbmVsIGZyb20gJy4vUGx1Z2luSW5mb1BhbmVsLnZ1ZSc7CmltcG9ydCBTZXR1cFVJUGx1Z2lucyBmcm9tICcuL1NldHVwVUlQbHVnaW5zJzsKaW1wb3J0IFJlbW92ZVVJUGx1Z2lucyBmcm9tICcuL1JlbW92ZVVJUGx1Z2lucyc7CmltcG9ydCBBZGRFeHRlbnNpb25SZXBvcyBmcm9tICcuL0FkZEV4dGVuc2lvblJlcG9zJzsKaW1wb3J0IENhdGFsb2dMaXN0IGZyb20gJy4vQ2F0YWxvZ0xpc3QvaW5kZXgudnVlJzsKaW1wb3J0IEJhbm5lciBmcm9tICdAY29tcG9uZW50cy9CYW5uZXIvQmFubmVyLnZ1ZSc7CmltcG9ydCB7CiAgaXNVSVBsdWdpbiwKICB1aVBsdWdpbkFubm90YXRpb24sCiAgdWlQbHVnaW5IYXNBbm5vdGF0aW9uLAogIGlzU3VwcG9ydGVkQ2hhcnRWZXJzaW9uLAogIGlzQ2hhcnRWZXJzaW9uQXZhaWxhYmxlRm9ySW5zdGFsbCwKICBpc0NoYXJ0VmVyc2lvbkhpZ2hlciwKICBVSV9QTFVHSU5fTkFNRVNQQUNFLAogIFVJX1BMVUdJTl9DSEFSVF9BTk5PVEFUSU9OUywKICBVSV9QTFVHSU5TX1JFUE9fVVJMLAogIFVJX1BMVUdJTlNfUEFSVE5FUlNfUkVQT19VUkwKfSBmcm9tICdAc2hlbGwvY29uZmlnL3VpcGx1Z2lucyc7Cgpjb25zdCBNQVhfREVTQ1JJUFRJT05fTEVOR1RIID0gMjAwOwoKY29uc3QgVEFCU19WQUxVRVMgPSB7CiAgSU5TVEFMTEVEOiAnaW5zdGFsbGVkJywKICBVUERBVEVTOiAgICd1cGRhdGVzJywKICBBVkFJTEFCTEU6ICdhdmFpbGFibGUnLAogIEFMTDogICAgICAgJ2FsbCcKfTsKCmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBBY3Rpb25NZW51LAogICAgQmFkZ2VTdGF0ZSwKICAgIERldmVsb3Blckluc3RhbGxEaWFsb2csCiAgICBJY29uTWVzc2FnZSwKICAgIENhdGFsb2dMaXN0LAogICAgQmFubmVyLAogICAgQ2F0YWxvZ0xvYWREaWFsb2csCiAgICBDYXRhbG9nVW5pbnN0YWxsRGlhbG9nLAogICAgSW5zdGFsbERpYWxvZywKICAgIExhenlJbWFnZSwKICAgIFBsdWdpbkluZm9QYW5lbCwKICAgIFRhYiwKICAgIFRhYmJlZCwKICAgIFVuaW5zdGFsbERpYWxvZywKICAgIFNldHVwVUlQbHVnaW5zLAogICAgUmVtb3ZlVUlQbHVnaW5zLAogICAgQWRkRXh0ZW5zaW9uUmVwb3MsCiAgfSwKCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIFRBQlNfVkFMVUVTLAogICAgICBrdWJlVmVyc2lvbjogICAgICAgICAgICAgICAgICAgIG51bGwsCiAgICAgIHZpZXc6ICAgICAgICAgICAgICAgICAgICAgICAgICAgJycsCiAgICAgIGNoYXJ0czogICAgICAgICAgICAgICAgICAgICAgICAgW10sCiAgICAgIGluc3RhbGxpbmc6ICAgICAgICAgICAgICAgICAgICAge30sCiAgICAgIGVycm9yczogICAgICAgICAgICAgICAgICAgICAgICAge30sCiAgICAgIHBsdWdpbnM6ICAgICAgICAgICAgICAgICAgICAgICAgW10sIC8vIFRoZSBpbnN0YWxsZWQgcGx1Z2lucwogICAgICBoZWxtT3BzOiAgICAgICAgICAgICAgICAgICAgICAgIFtdLCAvLyBIZWxtIG9wZXJhdGlvbnMKICAgICAgYWRkRXh0ZW5zaW9uUmVwb3NCYW5uZXJTZXR0aW5nOiB1bmRlZmluZWQsCiAgICAgIGxvYWRpbmc6ICAgICAgICAgICAgICAgICAgICAgICAgdHJ1ZSwKICAgICAgbWVudVRhcmdldEVsZW1lbnQ6ICAgICAgICAgICAgICBudWxsLAogICAgICBtZW51VGFyZ2V0RXZlbnQ6ICAgICAgICAgICAgICAgIG51bGwsCiAgICAgIG1lbnVPcGVuOiAgICAgICAgICAgICAgICAgICAgICAgZmFsc2UsCiAgICAgIGhhc1NlcnZpY2U6ICAgICAgICAgICAgICAgICAgICAgZmFsc2UsCiAgICAgIGRlZmF1bHRJY29uOiAgICAgICAgICAgICAgICAgICAgcmVxdWlyZSgnfnNoZWxsL2Fzc2V0cy9pbWFnZXMvZ2VuZXJpYy1wbHVnaW4uc3ZnJyksCiAgICAgIHJlbG9hZFJlcXVpcmVkOiAgICAgICAgICAgICAgICAgZmFsc2UsCiAgICAgIHJhbmNoZXJWZXJzaW9uOiAgICAgICAgICAgICAgICAgZ2V0VmVyc2lvbkRhdGEoKT8uVmVyc2lvbiwKICAgICAgc2hvd0NhdGFsb2dMaXN0OiAgICAgICAgICAgICAgICBmYWxzZQogICAgfTsKICB9LAoKICBhc3luYyBmZXRjaCgpIHsKICAgIGNvbnN0IGhhc2ggPSB7fTsKCiAgICBjb25zdCBpc1NldHVwID0gYXdhaXQgdGhpcy51cGRhdGVJbnN0YWxsU3RhdHVzKHRydWUpOwoKICAgIGlmIChpc1NldHVwKSB7CiAgICAgIGlmICh0aGlzLiRzdG9yZS5nZXR0ZXJzWydtYW5hZ2VtZW50L3NjaGVtYUZvciddKFVJX1BMVUdJTikpIHsKICAgICAgICBoYXNoLnBsdWdpbnMgPSB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnbWFuYWdlbWVudC9maW5kQWxsJywgeyB0eXBlOiBVSV9QTFVHSU4gfSk7CiAgICAgIH0KICAgIH0KCiAgICBoYXNoLmxvYWQgPSBhd2FpdCB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnY2F0YWxvZy9sb2FkJywgeyByZXNldDogdHJ1ZSB9KTsKCiAgICBpZiAodGhpcy4kc3RvcmUuZ2V0dGVyc1snbWFuYWdlbWVudC9zY2hlbWFGb3InXShNQU5BR0VNRU5ULkNMVVNURVIpKSB7CiAgICAgIGhhc2gubG9jYWxDbHVzdGVyID0gYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ21hbmFnZW1lbnQvZmluZCcsIHsgdHlwZTogTUFOQUdFTUVOVC5DTFVTVEVSLCBpZDogJ2xvY2FsJyB9KTsKICAgIH0KCiAgICBpZiAodGhpcy4kc3RvcmUuZ2V0dGVyc1snbWFuYWdlbWVudC9zY2hlbWFGb3InXShDQVRBTE9HLk9QRVJBVElPTikpIHsKICAgICAgaGFzaC5oZWxtT3BzID0gYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ21hbmFnZW1lbnQvZmluZEFsbCcsIHsgdHlwZTogQ0FUQUxPRy5PUEVSQVRJT04gfSk7CiAgICB9CgogICAgaWYgKHRoaXMuJHN0b3JlLmdldHRlcnNbJ21hbmFnZW1lbnQvc2NoZW1hRm9yJ10oQ0FUQUxPRy5DTFVTVEVSX1JFUE8pKSB7CiAgICAgIGhhc2gucmVwb3MgPSBhd2FpdCB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnbWFuYWdlbWVudC9maW5kQWxsJywgeyB0eXBlOiBDQVRBTE9HLkNMVVNURVJfUkVQTyB9KTsKICAgIH0KCiAgICBjb25zdCByZXMgPSBhd2FpdCBhbGxIYXNoKGhhc2gpOwoKICAgIHRoaXMucGx1Z2lucyA9IHJlcy5wbHVnaW5zIHx8IFtdOwogICAgdGhpcy5yZXBvcyA9IHJlcy5yZXBvcyB8fCBbXTsKICAgIHRoaXMuaGVsbU9wcyA9IHJlcy5oZWxtT3BzIHx8IFtdOwogICAgdGhpcy5rdWJlVmVyc2lvbiA9IHJlcy5sb2NhbENsdXN0ZXI/Lmt1YmVybmV0ZXNWZXJzaW9uQmFzZSB8fCBbXTsKCiAgICB0aGlzLmFkZEV4dGVuc2lvblJlcG9zQmFubmVyU2V0dGluZyA9IGF3YWl0IGZldGNoT3JDcmVhdGVTZXR0aW5nKHRoaXMuJHN0b3JlLCBTRVRUSU5HLkFERF9FWFRFTlNJT05fUkVQT1NfQkFOTkVSX0RJU1BMQVksICd0cnVlJywgdHJ1ZSkgfHwge307CgogICAgY29uc3QgYyA9IHRoaXMuJHN0b3JlLmdldHRlcnNbJ2NhdGFsb2cvcmF3Q2hhcnRzJ107CgogICAgdGhpcy5jaGFydHMgPSBPYmplY3QudmFsdWVzKGMpOwoKICAgIC8vIElmIHRoZXJlIGFyZSBubyBwbHVnaW5zIGluc3RhbGxlZCwgZGVmYXVsdCB0byB0aGUgY2F0YWxvZyB2aWV3CiAgICBpZiAodGhpcy5wbHVnaW5zLmxlbmd0aCA9PT0gMCkgewogICAgICB0aGlzLiRyZWZzLnRhYnM/LnNlbGVjdChUQUJTX1ZBTFVFUy5BVkFJTEFCTEUpOwogICAgfQoKICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogIH0sCgogIGNvbXB1dGVkOiB7CiAgICBwbHVnaW5EZXZlbG9wZXI6IG1hcFByZWYoUExVR0lOX0RFVkVMT1BFUiksCgogICAgLi4ubWFwR2V0dGVycyh7IHVpcGx1Z2luczogJ3VpcGx1Z2lucy9wbHVnaW5zJyB9KSwKICAgIC4uLm1hcEdldHRlcnMoeyB1aUVycm9yczogJ3VpcGx1Z2lucy9lcnJvcnMnIH0pLAogICAgLi4ubWFwR2V0dGVycyh7IHRoZW1lOiAncHJlZnMvdGhlbWUnIH0pLAoKICAgIHNob3dBZGRSZXBvc0Jhbm5lcigpIHsKICAgICAgcmV0dXJuIHRoaXMuYWRkRXh0ZW5zaW9uUmVwb3NCYW5uZXJTZXR0aW5nPy52YWx1ZSA9PT0gJ3RydWUnICYmICghdGhpcy5yZXBvcy5maW5kKChyKSA9PiByLnVybERpc3BsYXkgPT09IFVJX1BMVUdJTlNfUkVQT19VUkwpIHx8ICF0aGlzLnJlcG9zLmZpbmQoKHIpID0+IHIudXJsRGlzcGxheSA9PT0gVUlfUExVR0lOU19QQVJUTkVSU19SRVBPX1VSTCkpOwogICAgfSwKCiAgICBhcHBseURhcmtNb2RlQmcoKSB7CiAgICAgIGlmICh0aGlzLnRoZW1lID09PSAnZGFyaycpIHsKICAgICAgICByZXR1cm4geyAnZGFyay1tb2RlJzogdHJ1ZSB9OwogICAgICB9CgogICAgICByZXR1cm4ge307CiAgICB9LAoKICAgIG1lbnVBY3Rpb25zKCkgewogICAgICBjb25zdCBtZW51QWN0aW9ucyA9IFtdOwoKICAgICAgLy8gQWRkIGxpbmsgdG8gZ28gdG8gdGhlIFJlcG9zIHZpZXcgb2YgdGhlIGxvY2FsIGNsdXN0ZXIKICAgICAgbWVudUFjdGlvbnMucHVzaCh7CiAgICAgICAgYWN0aW9uOiAgJ21hbmFnZVJlcG9zJywKICAgICAgICBsYWJlbDogICB0aGlzLnQoJ3BsdWdpbnMubWFuYWdlUmVwb3MnKSwKICAgICAgICBlbmFibGVkOiB0cnVlCiAgICAgIH0pOwoKICAgICAgLy8gQWRkIGxpbmsgdG8gYWRkIGV4dGVuc2lvbnMgcmVwb3NpdG9yaWVzIChPZmZpY2lhbCwgUGFydG5lcnMsIGV0YykKICAgICAgbWVudUFjdGlvbnMucHVzaCh7CiAgICAgICAgYWN0aW9uOiAgJ2FkZFJhbmNoZXJSZXBvcycsCiAgICAgICAgbGFiZWw6ICAgdGhpcy50KCdwbHVnaW5zLmFkZFJhbmNoZXJSZXBvcycpLAogICAgICAgIGVuYWJsZWQ6IHRydWUKICAgICAgfSk7CgogICAgICAvLyBPbmx5IHNob3cgTWFuYWdlIEV4dGVuc2lvbiBDYXRhbG9ncyB3aGVuIG9uIG1haW4gY2hhcnRzIHZpZXcKICAgICAgaWYgKCF0aGlzLnNob3dDYXRhbG9nTGlzdCkgewogICAgICAgIG1lbnVBY3Rpb25zLnB1c2goewogICAgICAgICAgYWN0aW9uOiAgJ21hbmFnZUV4dGVuc2lvblZpZXcnLAogICAgICAgICAgbGFiZWw6ICAgdGhpcy50KCdwbHVnaW5zLm1hbmFnZUNhdGFsb2cubGFiZWwnKSwKICAgICAgICAgIGVuYWJsZWQ6IHRydWUKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgLy8gT25seSBzaG93IERldmVsb3BlciBMb2FkIGFjdGlvbiBpZiB0aGUgdXNlciBoYXMgdGhpcyBlbmFibGVkIGluIHByZWZlcmVuY2VzCiAgICAgIGlmICh0aGlzLnBsdWdpbkRldmVsb3BlcikgewogICAgICAgIG1lbnVBY3Rpb25zLnB1c2goIHsgZGl2aWRlcjogdHJ1ZSB9KTsKICAgICAgICBtZW51QWN0aW9ucy5wdXNoKHsKICAgICAgICAgIGFjdGlvbjogICdkZXZMb2FkJywKICAgICAgICAgIGxhYmVsOiAgIHRoaXMudCgncGx1Z2lucy5kZXZlbG9wZXIubGFiZWwnKSwKICAgICAgICAgIGVuYWJsZWQ6IHRydWUKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuaGFzU2VydmljZSkgewogICAgICAgIG1lbnVBY3Rpb25zLnB1c2goIHsgZGl2aWRlcjogdHJ1ZSB9KTsKICAgICAgICBtZW51QWN0aW9ucy5wdXNoKHsKICAgICAgICAgIGFjdGlvbjogICdyZW1vdmVQbHVnaW5TdXBwb3J0JywKICAgICAgICAgIGxhYmVsOiAgIHRoaXMudCgncGx1Z2lucy5zZXR1cC5yZW1vdmUubGFiZWwnKSwKICAgICAgICAgIGVuYWJsZWQ6IHRydWUKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgcmV0dXJuIG1lbnVBY3Rpb25zOwogICAgfSwKCiAgICBsaXN0KCkgewogICAgICBjb25zdCBhbGwgPSB0aGlzLmF2YWlsYWJsZTsKCiAgICAgIHN3aXRjaCAodGhpcy52aWV3KSB7CiAgICAgIGNhc2UgVEFCU19WQUxVRVMuSU5TVEFMTEVEOgogICAgICAgIHJldHVybiBhbGwuZmlsdGVyKChwKSA9PiAhIXAuaW5zdGFsbGVkIHx8ICEhcC5pbnN0YWxsaW5nKTsKICAgICAgY2FzZSBUQUJTX1ZBTFVFUy5VUERBVEVTOgogICAgICAgIHJldHVybiB0aGlzLnVwZGF0ZXM7CiAgICAgIGNhc2UgVEFCU19WQUxVRVMuQVZBSUxBQkxFOgogICAgICAgIHJldHVybiBhbGwuZmlsdGVyKChwKSA9PiAhcC5pbnN0YWxsZWQpOwogICAgICBkZWZhdWx0OgogICAgICAgIHJldHVybiBhbGw7CiAgICAgIH0KICAgIH0sCgogICAgaGFzTWVudUFjdGlvbnMoKSB7CiAgICAgIHJldHVybiB0aGlzLm1lbnVBY3Rpb25zPy5sZW5ndGggPiAwOwogICAgfSwKCiAgICAvLyBNZXNzYWdlIHRvIGRpc3BsYXkgd2hlbiB0aGUgdGFiIHZpZXcgaXMgZW1wdHkgKGRlcGVuZHMgb24gdGhlIHRhYikKICAgIGVtcHR5TWVzc2FnZSgpIHsKICAgICAgcmV0dXJuIHRoaXMudChgcGx1Z2lucy5lbXB0eS4keyB0aGlzLnZpZXcgfWApOwogICAgfSwKCiAgICB1cGRhdGVzKCkgewogICAgICByZXR1cm4gdGhpcy5hdmFpbGFibGUuZmlsdGVyKChwbHVnaW4pID0+ICEhcGx1Z2luLnVwZ3JhZGUpOwogICAgfSwKCiAgICBhdmFpbGFibGUoKSB7CiAgICAgIGxldCBhbGwgPSB0aGlzLmNoYXJ0cy5maWx0ZXIoKGMpID0+IGlzVUlQbHVnaW4oYykpOwoKICAgICAgLy8gRmlsdGVyIG91dCBoaWRkZW4gY2hhcnRzCiAgICAgIGFsbCA9IGFsbC5maWx0ZXIoKGMpID0+ICF1aVBsdWdpbkhhc0Fubm90YXRpb24oYywgQ0FUQUxPR19BTk5PVEFUSU9OUy5ISURERU4sICd0cnVlJykpOwoKICAgICAgYWxsID0gYWxsLm1hcCgoY2hhcnQpID0+IHsKICAgICAgICAvLyBMYWJlbCBjYW4gYmUgb3ZlcnJpZGRlbiBieSBjaGFydCBhbm5vdGF0aW9uCiAgICAgICAgY29uc3QgbGFiZWwgPSB1aVBsdWdpbkFubm90YXRpb24oY2hhcnQsIFVJX1BMVUdJTl9DSEFSVF9BTk5PVEFUSU9OUy5ESVNQTEFZX05BTUUpIHx8IGNoYXJ0LmNoYXJ0TmFtZURpc3BsYXk7CiAgICAgICAgY29uc3QgaXRlbSA9IHsKICAgICAgICAgIG5hbWU6ICAgICAgICAgY2hhcnQuY2hhcnROYW1lLAogICAgICAgICAgbGFiZWwsCiAgICAgICAgICBkZXNjcmlwdGlvbjogIGNoYXJ0LmNoYXJ0RGVzY3JpcHRpb24sCiAgICAgICAgICBpZDogICAgICAgICAgIGNoYXJ0LmlkLAogICAgICAgICAgdmVyc2lvbnM6ICAgICBbXSwKICAgICAgICAgIGluc3RhbGxlZDogICAgZmFsc2UsCiAgICAgICAgICBidWlsdGluOiAgICAgIGZhbHNlLAogICAgICAgICAgZXhwZXJpbWVudGFsOiB1aVBsdWdpbkhhc0Fubm90YXRpb24oY2hhcnQsIENBVEFMT0dfQU5OT1RBVElPTlMuRVhQRVJJTUVOVEFMLCAndHJ1ZScpLAogICAgICAgICAgY2VydGlmaWVkOiAgICB1aVBsdWdpbkhhc0Fubm90YXRpb24oY2hhcnQsIENBVEFMT0dfQU5OT1RBVElPTlMuQ0VSVElGSUVELCBDQVRBTE9HX0FOTk9UQVRJT05TLl9SQU5DSEVSKQogICAgICAgIH07CgogICAgICAgIGl0ZW0udmVyc2lvbnMgPSBbLi4uY2hhcnQudmVyc2lvbnNdOwogICAgICAgIGl0ZW0uY2hhcnQgPSBjaGFydDsKCiAgICAgICAgLy8gRmlsdGVyIHRoZSB2ZXJzaW9ucyBhdmFpbGFibGUgdG8gaW5zdGFsbCAocGx1Z2lucy1hcGkgdmVyc2lvbiBhbmQgY3VycmVudCBkYXNoYm9hcmQgdmVyc2lvbikKICAgICAgICBpdGVtLmluc3RhbGxhYmxlVmVyc2lvbnMgPSBpdGVtLnZlcnNpb25zLmZpbHRlcigodmVyc2lvbikgPT4gaXNTdXBwb3J0ZWRDaGFydFZlcnNpb24oeyB2ZXJzaW9uLCBrdWJlVmVyc2lvbjogdGhpcy5rdWJlVmVyc2lvbiB9KSAmJiBpc0NoYXJ0VmVyc2lvbkF2YWlsYWJsZUZvckluc3RhbGwoewogICAgICAgICAgdmVyc2lvbiwgcmFuY2hlclZlcnNpb246IHRoaXMucmFuY2hlclZlcnNpb24sIGt1YmVWZXJzaW9uOiB0aGlzLmt1YmVWZXJzaW9uCiAgICAgICAgfSkpOwoKICAgICAgICAvLyBhZGQgcHJvcCB0byB2ZXJzaW9uIG9iamVjdCBpZiB2ZXJzaW9uIGlzIGNvbXBhdGlibGUgd2l0aCB0aGUgY3VycmVudCBkYXNoYm9hcmQgdmVyc2lvbgogICAgICAgIGl0ZW0udmVyc2lvbnMgPSBpdGVtLnZlcnNpb25zLm1hcCgodmVyc2lvbikgPT4gaXNDaGFydFZlcnNpb25BdmFpbGFibGVGb3JJbnN0YWxsKHsKICAgICAgICAgIHZlcnNpb24sIHJhbmNoZXJWZXJzaW9uOiB0aGlzLnJhbmNoZXJWZXJzaW9uLCBrdWJlVmVyc2lvbjogdGhpcy5rdWJlVmVyc2lvbgogICAgICAgIH0sIHRydWUpKTsKCiAgICAgICAgY29uc3QgbGF0ZXN0Q29tcGF0aWJsZSA9IGl0ZW0uaW5zdGFsbGFibGVWZXJzaW9ucz8uWzBdOwogICAgICAgIGNvbnN0IGxhdGVzdE5vdENvbXBhdGlibGUgPSBpdGVtLnZlcnNpb25zLmZpbmQoKHZlcnNpb24pID0+ICF2ZXJzaW9uLmlzQ29tcGF0aWJsZVdpdGhVaSB8fCAhdmVyc2lvbi5pc0NvbXBhdGlibGVXaXRoS3ViZVZlcnNpb24pOwoKICAgICAgICBpZiAobGF0ZXN0Q29tcGF0aWJsZSkgewogICAgICAgICAgaXRlbS5kaXNwbGF5VmVyc2lvbiA9IGxhdGVzdENvbXBhdGlibGUudmVyc2lvbjsKICAgICAgICAgIGl0ZW0uaWNvbiA9IGxhdGVzdENvbXBhdGlibGUuaWNvbjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgaXRlbS5kaXNwbGF5VmVyc2lvbiA9IGl0ZW0udmVyc2lvbnM/LlswXT8udmVyc2lvbjsKICAgICAgICAgIGl0ZW0uaWNvbiA9IGNoYXJ0Lmljb24gfHwgbGF0ZXN0Q29tcGF0aWJsZT8uYW5ub3RhdGlvbnM/LlsnY2F0YWxvZy5jYXR0bGUuaW8vdWktaWNvbiddOwogICAgICAgIH0KCiAgICAgICAgaWYgKGxhdGVzdE5vdENvbXBhdGlibGUgJiYgaXRlbS5pbnN0YWxsYWJsZVZlcnNpb25zLmxlbmd0aCAmJiBpc0NoYXJ0VmVyc2lvbkhpZ2hlcihsYXRlc3ROb3RDb21wYXRpYmxlLnZlcnNpb24sIGl0ZW0uaW5zdGFsbGFibGVWZXJzaW9ucz8uWzBdLnZlcnNpb24pKSB7CiAgICAgICAgICBpZiAoIWl0ZW0uaXNDb21wYXRpYmxlV2l0aFVpKSB7CiAgICAgICAgICAgIGl0ZW0uaW5jb21wYXRpYmxlUmFuY2hlclZlcnNpb24gPSB0aGlzLnQoJ3BsdWdpbnMuaW5jb21wYXRpYmxlUmFuY2hlclZlcnNpb24nLCB7IHZlcnNpb246IGxhdGVzdE5vdENvbXBhdGlibGUudmVyc2lvbiwgcmFuY2hlclZlcnNpb246IGxhdGVzdE5vdENvbXBhdGlibGUucmVxdWlyZWRVaVZlcnNpb24gfSwgdHJ1ZSk7CiAgICAgICAgICB9IGVsc2UgaWYgKCFpdGVtLmlzQ29tcGF0aWJsZVdpdGhLdWJlVmVyc2lvbikgewogICAgICAgICAgICBpdGVtLmluY29tcGF0aWJsZUt1YmVWZXJzaW9uID0gdGhpcy50KCdwbHVnaW5zLmluY29tcGF0aWJsZUt1YmVWZXJzaW9uJywgeyB2ZXJzaW9uOiBsYXRlc3ROb3RDb21wYXRpYmxlLnZlcnNpb24sIGt1YmVWZXJzaW9uOiBsYXRlc3ROb3RDb21wYXRpYmxlLnJlcXVpcmVkS3ViZVZlcnNpb24gfSwgdHJ1ZSk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAodGhpcy5pbnN0YWxsaW5nW2l0ZW0ubmFtZV0pIHsKICAgICAgICAgIGl0ZW0uaW5zdGFsbGluZyA9IHRoaXMuaW5zdGFsbGluZ1tpdGVtLm5hbWVdOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGl0ZW07CiAgICAgIH0pOwoKICAgICAgLy8gUmVtb3ZlIGNoYXJ0cyB3aXRoIG5vIGluc3RhbGxhYmxlIHZlcnNpb25zCiAgICAgIGFsbCA9IGFsbC5maWx0ZXIoKGMpID0+IGMudmVyc2lvbnMubGVuZ3RoID4gMCk7CgogICAgICAvLyBDaGVjayB0aGF0IGFsbCBvZiB0aGUgbG9hZGVkIHBsdWdpbnMgYXJlIHJlcHJlc2VudGVkCiAgICAgIHRoaXMudWlwbHVnaW5zLmZvckVhY2goKHApID0+IHsKICAgICAgICBjb25zdCBjaGFydCA9IGFsbC5maW5kKChjKSA9PiBjLm5hbWUgPT09IHAubmFtZSk7CgogICAgICAgIGlmICghY2hhcnQpIHsKICAgICAgICAgIC8vIEEgcGx1Z2luIGlzIGxvYWRlZCwgYnV0IHRoZXJlIGlzIG5vIGNoYXJ0LCBzbyBhZGQgYW4gaXRlbSBzbyB0aGF0IGl0IHNob3dzIHVwCiAgICAgICAgICBjb25zdCByYW5jaGVyID0gdHlwZW9mIHAubWV0YWRhdGE/LnJhbmNoZXIgPT09ICdvYmplY3QnID8gcC5tZXRhZGF0YS5yYW5jaGVyIDoge307CiAgICAgICAgICBjb25zdCBsYWJlbCA9IHJhbmNoZXIuYW5ub3RhdGlvbnM/LltVSV9QTFVHSU5fQ0hBUlRfQU5OT1RBVElPTlMuRElTUExBWV9OQU1FXSB8fCBwLm5hbWU7CiAgICAgICAgICBjb25zdCBpdGVtID0gewogICAgICAgICAgICBuYW1lOiAgICAgICAgICAgcC5uYW1lLAogICAgICAgICAgICBsYWJlbCwKICAgICAgICAgICAgZGVzY3JpcHRpb246ICAgIHAubWV0YWRhdGE/LmRlc2NyaXB0aW9uLAogICAgICAgICAgICBpY29uOiAgICAgICAgICAgcC5tZXRhZGF0YT8uaWNvbiwKICAgICAgICAgICAgaWQ6ICAgICAgICAgICAgIHAuaWQsCiAgICAgICAgICAgIHZlcnNpb25zOiAgICAgICBbXSwKICAgICAgICAgICAgZGlzcGxheVZlcnNpb246IHAubWV0YWRhdGE/LnZlcnNpb24gfHwgJy0nLAogICAgICAgICAgICBpbnN0YWxsZWQ6ICAgICAgdHJ1ZSwKICAgICAgICAgICAgYnVpbHRpbjogICAgICAgICEhcC5idWlsdGluLAogICAgICAgICAgfTsKCiAgICAgICAgICAvLyBCdWlsdC1pbiBwbHVnaW5zIGNhbiBjaG9zZSB0byBiZSBoaWRkZW4gLSB1c2VkIHdoZXJlIHdlIGltcGxlbWVudCBhcyBleHRlbnNpb25zCiAgICAgICAgICAvLyBidXQgZG9uJ3Qgd2FudCB0byBzaG93cyB0aGVtIGluZGl2aWR1YWxseSBvbiB0aGUgZXh0ZW5zaW9ucyBwYWdlCiAgICAgICAgICBpZiAoIShpdGVtLmJ1aWx0aW4gJiYgcmFuY2hlcltVSV9QTFVHSU5fQ0hBUlRfQU5OT1RBVElPTlMuSElEREVOX0JVSUxUSU5dKSkgewogICAgICAgICAgICBhbGwucHVzaChpdGVtKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwoKICAgICAgLy8gR28gdGhyb3VnaCB0aGUgQ1JzIGZvciB0aGUgcGx1Z2lucyBhbmQgd2lyZSB0aGVtIGludG8gdGhlIGNhdGFsb2cKICAgICAgdGhpcy5wbHVnaW5zLmZvckVhY2goKHApID0+IHsKICAgICAgICBjb25zdCBjaGFydCA9IGFsbC5maW5kKChjKSA9PiBjLm5hbWUgPT09IHAubmFtZSk7CgogICAgICAgIGlmIChjaGFydCkgewogICAgICAgICAgY2hhcnQuaW5zdGFsbGVkID0gdHJ1ZTsKICAgICAgICAgIGNoYXJ0LnVpcGx1Z2luID0gcDsKICAgICAgICAgIGNoYXJ0LmRpc3BsYXlWZXJzaW9uID0gcC52ZXJzaW9uOwoKICAgICAgICAgIC8vIENhbid0IGRvIHRoaXMgaGVyZQogICAgICAgICAgY2hhcnQuaW5zdGFsbGluZyA9IHRoaXMuaW5zdGFsbGluZ1tjaGFydC5uYW1lXTsKCiAgICAgICAgICAvLyBDaGVjayBmb3IgdXBncmFkZQogICAgICAgICAgaWYgKGNoYXJ0Lmluc3RhbGxhYmxlVmVyc2lvbnM/Lmxlbmd0aCAmJiBwLnZlcnNpb24gIT09IGNoYXJ0Lmluc3RhbGxhYmxlVmVyc2lvbnM/LlswXT8udmVyc2lvbikgewogICAgICAgICAgICBjaGFydC51cGdyYWRlID0gY2hhcnQuaW5zdGFsbGFibGVWZXJzaW9uc1swXS52ZXJzaW9uOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAvLyBObyBjaGFydCwgc28gYWRkIGEgY2FyZCBmb3IgdGhlIHBsdWdpbiBiYXNlZCBvbiBpdHMgQ3VzdG9tIHJlc291cmNlIGJlaW5nIHByZXNlbnQKICAgICAgICAgIGNvbnN0IGl0ZW0gPSB7CiAgICAgICAgICAgIG5hbWU6ICAgICAgICAgICBwLm5hbWUsCiAgICAgICAgICAgIGxhYmVsOiAgICAgICAgICBwLm5hbWUsCiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAgICBwLmRlc2NyaXB0aW9uIHx8ICctJywKICAgICAgICAgICAgaWQ6ICAgICAgICAgICAgIGAkeyBwLm5hbWUgfS0keyBwLnZlcnNpb24gfWAsCiAgICAgICAgICAgIHZlcnNpb25zOiAgICAgICBbXSwKICAgICAgICAgICAgZGlzcGxheVZlcnNpb246IHAudmVyc2lvbiB8fCAnLScsCiAgICAgICAgICAgIGluc3RhbGxlZDogICAgICB0cnVlLAogICAgICAgICAgICBpbnN0YWxsaW5nOiAgICAgZmFsc2UsCiAgICAgICAgICAgIGJ1aWx0aW46ICAgICAgICBmYWxzZSwKICAgICAgICAgICAgdWlwbHVnaW46ICAgICAgIHAsCiAgICAgICAgICB9OwoKICAgICAgICAgIGFsbC5wdXNoKGl0ZW0pOwogICAgICAgIH0KICAgICAgfSk7CgogICAgICAvLyBNZXJnZSBpbiB0aGUgcGx1Z2luIGxvYWQgZXJyb3JzCiAgICAgIE9iamVjdC5rZXlzKHRoaXMudWlFcnJvcnMpLmZvckVhY2goKGUpID0+IHsKICAgICAgICBjb25zdCBjaGFydCA9IGFsbC5maW5kKChjKSA9PiBjLm5hbWUgPT09IGUpOwoKICAgICAgICBpZiAoY2hhcnQpIHsKICAgICAgICAgIGNvbnN0IGVycm9yID0gdGhpcy51aUVycm9yc1tlXTsKCiAgICAgICAgICBpZiAoZXJyb3IgJiYgdHlwZW9mIGVycm9yID09PSAnc3RyaW5nJykgewogICAgICAgICAgICBjaGFydC5lcnJvciA9IHRoaXMudCh0aGlzLnVpRXJyb3JzW2VdKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGNoYXJ0LmVycm9yID0gZmFsc2U7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKCiAgICAgIC8vIE1lcmdlIGluIHRoZSBwbHVnaW4gbG9hZCBlcnJvcnMgZnJvbSBoZWxwIG9wcwogICAgICBPYmplY3Qua2V5cyh0aGlzLmVycm9ycykuZm9yRWFjaCgoZSkgPT4gewogICAgICAgIGNvbnN0IGNoYXJ0ID0gYWxsLmZpbmQoKGMpID0+IGMubmFtZSA9PT0gZSk7CgogICAgICAgIGlmIChjaGFydCkgewogICAgICAgICAgY2hhcnQuaGVsbUVycm9yID0gISF0aGlzLmVycm9yc1tlXTsKICAgICAgICB9CiAgICAgIH0pOwoKICAgICAgYWxsLmZvckVhY2goKHBsdWdpbikgPT4gewogICAgICAgIC8vIENsYW1wIHRoZSBsZW5ndGhzIG9mIHRoZSBkZXNjcmlwdGlvbnMKICAgICAgICBpZiAocGx1Z2luLmRlc2NyaXB0aW9uICYmIHBsdWdpbi5kZXNjcmlwdGlvbi5sZW5ndGggPiBNQVhfREVTQ1JJUFRJT05fTEVOR1RIKSB7CiAgICAgICAgICBwbHVnaW4uZGVzY3JpcHRpb24gPSBgJHsgcGx1Z2luLmRlc2NyaXB0aW9uLnN1YnN0cigwLCBNQVhfREVTQ1JJUFRJT05fTEVOR1RIKSB9IC4uLmA7CiAgICAgICAgfQoKICAgICAgICAvLyBjaGVjayBpZiBrdWJlIHZlcnNpb24gY29tcGF0aWJpbGl0eSBpcyBtZXQgZm9yIGluc3RhbGxlZCBleHRlbnNpb24KICAgICAgICBpZiAocGx1Z2luLnVpcGx1Z2luKSB7CiAgICAgICAgICBjb25zdCB2ZXJzaW9uSW5zdGFsbGVkID0gcGx1Z2luLnVpcGx1Z2luLnNwZWM/LnBsdWdpbj8udmVyc2lvbjsKICAgICAgICAgIGNvbnN0IHZlcnNpb25JbnN0YWxsZWREYXRhID0gcGx1Z2luLnZlcnNpb25zLmZpbmQoKHYpID0+IHYudmVyc2lvbiA9PT0gdmVyc2lvbkluc3RhbGxlZCk7CgogICAgICAgICAgaWYgKHZlcnNpb25JbnN0YWxsZWREYXRhKSB7CiAgICAgICAgICAgIGNvbnN0IGt1YmVWZXJzaW9uVG9DaGVjayA9IHZlcnNpb25JbnN0YWxsZWREYXRhLmFubm90YXRpb25zPy5bVUlfUExVR0lOX0NIQVJUX0FOTk9UQVRJT05TLktVQkVfVkVSU0lPTl07CgogICAgICAgICAgICBpZiAodGhpcy5rdWJlVmVyc2lvbiAmJiAhaXNTdXBwb3J0ZWRDaGFydFZlcnNpb24oeyB2ZXJzaW9uOiB2ZXJzaW9uSW5zdGFsbGVkRGF0YSwga3ViZVZlcnNpb246IHRoaXMua3ViZVZlcnNpb24gfSkpIHsKICAgICAgICAgICAgICBwbHVnaW4uaW5zdGFsbGVkRXJyb3IgPSB0aGlzLnQoJ3BsdWdpbnMuY3VycmVudEluc3RhbGxlZFZlcnNpb25CbG9ja2VkQnlLdWJlVmVyc2lvbicsIHsga3ViZVZlcnNpb246IHRoaXMua3ViZVZlcnNpb24sIGt1YmVWZXJzaW9uVG9DaGVjayB9LCB0cnVlKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CgogICAgICAvLyBTb3J0IGJ5IG5hbWUKICAgICAgcmV0dXJuIHNvcnRCeShhbGwsICduYW1lJywgZmFsc2UpOwogICAgfQogIH0sCgogIHdhdGNoOiB7CiAgICBoZWxtT3BzKG5ldSkgewogICAgICAvLyBHZXQgSGVsbSBvcGVyYXRpb25zIGZvciBVSSBwbHVnaW5zIGFuZCBvcmRlciBieSBkYXRlCiAgICAgIGxldCBwbHVnaW5PcHMgPSBuZXUuZmlsdGVyKChvcCkgPT4gewogICAgICAgIHJldHVybiBvcC5uYW1lc3BhY2UgPT09IFVJX1BMVUdJTl9OQU1FU1BBQ0U7CiAgICAgIH0pOwoKICAgICAgcGx1Z2luT3BzID0gc29ydEJ5KHBsdWdpbk9wcywgJ21ldGFkYXRhLmNyZWF0aW9uVGltZXN0YW1wJywgdHJ1ZSk7CgogICAgICAvLyBHbyB0aHJvdWdoIHRoZSBpbnN0YWxsZWQgcGx1Z2lucwogICAgICAodGhpcy5hdmFpbGFibGUgfHwgW10pLmZvckVhY2goKHBsdWdpbikgPT4gewogICAgICAgIGNvbnN0IG9wID0gcGx1Z2luT3BzLmZpbmQoKG8pID0+IG8uc3RhdHVzPy5yZWxlYXNlTmFtZSA9PT0gcGx1Z2luLm5hbWUpOwoKICAgICAgICBpZiAob3ApIHsKICAgICAgICAgIGNvbnN0IGFjdGl2ZSA9IG9wLm1ldGFkYXRhLnN0YXRlPy50cmFuc2l0aW9uaW5nOwogICAgICAgICAgY29uc3QgZXJyb3IgPSBvcC5tZXRhZGF0YS5zdGF0ZT8uZXJyb3I7CgogICAgICAgICAgVnVlLnNldCh0aGlzLmVycm9ycywgcGx1Z2luLm5hbWUsIGVycm9yKTsKCiAgICAgICAgICBpZiAoYWN0aXZlKSB7CiAgICAgICAgICAgIC8vIENhbiB1c2UgdGhlIHN0YXR1cyBkaXJlY3RseSwgYXBhcnQgZnJvbSB1cGdyYWRlLCB3aGljaCBtYXBzIHRvIGluc3RhbGwKICAgICAgICAgICAgY29uc3Qgc3RhdHVzID0gb3Auc3RhdHVzLmFjdGlvbiA9PT0gJ3VwZ3JhZGUnID8gJ2luc3RhbGwnIDogb3Auc3RhdHVzLmFjdGlvbjsKCiAgICAgICAgICAgIHRoaXMudXBkYXRlUGx1Z2luSW5zdGFsbFN0YXR1cyhwbHVnaW4ubmFtZSwgc3RhdHVzKTsKICAgICAgICAgIH0gZWxzZSBpZiAob3Auc3RhdHVzLmFjdGlvbiA9PT0gJ3VuaW5zdGFsbCcpIHsKICAgICAgICAgICAgLy8gVW5pbnN0YWxsIGhhcyBmaW5pc2hlZAogICAgICAgICAgICB0aGlzLnVwZGF0ZVBsdWdpbkluc3RhbGxTdGF0dXMocGx1Z2luLm5hbWUsIGZhbHNlKTsKICAgICAgICAgIH0gZWxzZSBpZiAoZXJyb3IpIHsKICAgICAgICAgICAgdGhpcy51cGRhdGVQbHVnaW5JbnN0YWxsU3RhdHVzKHBsdWdpbi5uYW1lLCBmYWxzZSk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMudXBkYXRlUGx1Z2luSW5zdGFsbFN0YXR1cyhwbHVnaW4ubmFtZSwgZmFsc2UpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAoKICAgIHBsdWdpbnMobmV1LCBvbGQpIHsKICAgICAgY29uc3QgaW5zdGFsbGVkID0gdGhpcy4kc3RvcmUuZ2V0dGVyc1sndWlwbHVnaW5zL3BsdWdpbnMnXTsKICAgICAgY29uc3Qgc2hvdWxkSGF2ZUxvYWRlZCA9IChpbnN0YWxsZWQgfHwgW10pLmZpbHRlcigocCkgPT4gIXRoaXMudWlFcnJvcnNbcC5uYW1lXSAmJiAhcC5idWlsdGluKTsKICAgICAgbGV0IGNoYW5nZXMgPSAwOwoKICAgICAgLy8gRGlkIHRoZSB1c2VyIHJlbW92ZSBhbiBleHRlbnNpb24KICAgICAgaWYgKG5ldT8ubGVuZ3RoIDwgc2hvdWxkSGF2ZUxvYWRlZC5sZW5ndGgpIHsKICAgICAgICBjaGFuZ2VzKys7CiAgICAgIH0KCiAgICAgIG5ldS5mb3JFYWNoKChwbHVnaW4pID0+IHsKICAgICAgICBjb25zdCBleGlzdGluZyA9IGluc3RhbGxlZC5maW5kKChwKSA9PiAhcC5yZW1vdmVkICYmIHAubmFtZSA9PT0gcGx1Z2luLm5hbWUgJiYgcC52ZXJzaW9uID09PSBwbHVnaW4udmVyc2lvbik7CgogICAgICAgIGlmICghZXhpc3RpbmcgJiYgcGx1Z2luLmlzQ2FjaGVkKSB7CiAgICAgICAgICBpZiAoIXRoaXMudWlFcnJvcnNbcGx1Z2luLm5hbWVdKSB7CiAgICAgICAgICAgIGNoYW5nZXMrKzsKICAgICAgICAgIH0KCiAgICAgICAgICB0aGlzLnVwZGF0ZVBsdWdpbkluc3RhbGxTdGF0dXMocGx1Z2luLm5hbWUsIGZhbHNlKTsKICAgICAgICB9CiAgICAgIH0pOwoKICAgICAgaWYgKGNoYW5nZXMgPiAwKSB7CiAgICAgICAgVnVlLnNldCh0aGlzLCAncmVsb2FkUmVxdWlyZWQnLCB0cnVlKTsKICAgICAgfQogICAgfQogIH0sCgogIC8vIEZvcmdldCB0aGUgdHlwZXMgd2hlbiB3ZSBsZWF2ZSB0aGUgcGFnZQogIGJlZm9yZURlc3Ryb3koKSB7CiAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnbWFuYWdlbWVudC9mb3JnZXRUeXBlJywgVUlfUExVR0lOKTsKICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdtYW5hZ2VtZW50L2ZvcmdldFR5cGUnLCBDQVRBTE9HLk9QRVJBVElPTik7CiAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnbWFuYWdlbWVudC9mb3JnZXRUeXBlJywgQ0FUQUxPRy5BUFApOwogICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ21hbmFnZW1lbnQvZm9yZ2V0VHlwZScsIENBVEFMT0cuQ0xVU1RFUl9SRVBPKTsKICB9LAoKICBtZXRob2RzOiB7CiAgICBhc3luYyByZWZyZXNoQ2hhcnRzKGZvcmNlQ2hhcnRzVXBkYXRlID0gZmFsc2UpIHsKICAgICAgLy8gd2UgbWlnaHQgbmVlZCB0byBmb3JjZSB0aGUgcmVxdWVzdCwgc28gdGhhdCB3ZSBrbm93IGF0IGFsbCB0aW1lcyBpZiB3aGF0J3MgdGhlIHN0YXR1cyBvZiB0aGUgb2ZmaWNhbCBhbmQgcGFydG5lcnMgcmVwb3MgKGluc3RhbGxlZCBvciBub3QpCiAgICAgIC8vIHRpZWQgdG8gdGhlIFNldHVwVUlQbHVnaW5zLCBBZGRFeHRlbnNpb25SZXBvcyBhbmQgUmVtb3ZlVUlQbHVnaW5zIGNoZWNrYm94ZXMKICAgICAgYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2NhdGFsb2cvbG9hZCcsIHsgcmVzZXQ6IHRydWUsIGZvcmNlOiBmb3JjZUNoYXJ0c1VwZGF0ZSB9KTsKICAgICAgY29uc3QgYyA9IHRoaXMuJHN0b3JlLmdldHRlcnNbJ2NhdGFsb2cvcmF3Q2hhcnRzJ107CgogICAgICB0aGlzLmNoYXJ0cyA9IE9iamVjdC52YWx1ZXMoYyk7CiAgICB9LAoKICAgIGFzeW5jIHVwZGF0ZUluc3RhbGxTdGF0dXMoZm9yY2VDaGFydHNVcGRhdGUgPSBmYWxzZSkgewogICAgICBsZXQgaGFzU2VydmljZTsKCiAgICAgIHRyeSB7CiAgICAgICAgY29uc3Qgc2VydmljZSA9IGF3YWl0IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdtYW5hZ2VtZW50L2ZpbmQnLCB7CiAgICAgICAgICB0eXBlOiBTRVJWSUNFLAogICAgICAgICAgaWQ6ICAgYCR7IFVJX1BMVUdJTl9OQU1FU1BBQ0UgfS91aS1wbHVnaW4tb3BlcmF0b3JgLAogICAgICAgICAgb3B0OiAgeyBmb3JjZTogdHJ1ZSB9LAogICAgICAgIH0pOwoKICAgICAgICBoYXNTZXJ2aWNlID0gISFzZXJ2aWNlOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgaGFzU2VydmljZSA9IGZhbHNlOwogICAgICB9CgogICAgICBpZiAoaGFzU2VydmljZSB8fCBmb3JjZUNoYXJ0c1VwZGF0ZSkgewogICAgICAgIHRoaXMucmVmcmVzaENoYXJ0cyhmb3JjZUNoYXJ0c1VwZGF0ZSk7CiAgICAgIH0KCiAgICAgIFZ1ZS5zZXQodGhpcywgJ2hhc1NlcnZpY2UnLCBoYXNTZXJ2aWNlKTsKCiAgICAgIHJldHVybiBoYXNTZXJ2aWNlOwogICAgfSwKCiAgICBmaWx0ZXJDaGFuZ2VkKGYpIHsKICAgICAgdGhpcy52aWV3ID0gZi5zZWxlY3RlZE5hbWU7CiAgICB9LAoKICAgIHJlbW92ZVBsdWdpblN1cHBvcnQoKSB7CiAgICAgIHRoaXMucmVmcmVzaENoYXJ0cyh0cnVlKTsKICAgICAgdGhpcy4kcmVmcy5yZW1vdmVVSVBsdWdpbnMuc2hvd0RpYWxvZygpOwogICAgfSwKCiAgICAvLyBEZXZlbG9wZXIgTG9hZCBpcyBpbiB0aGUgYWN0aW9uIG1lbnUKICAgIHNob3dEZXZlbG9wZXJMb2FkRGlhbG9nKCkgewogICAgICB0aGlzLiRyZWZzLmRldmVsb3Blckluc3RhbGxEaWFsb2cuc2hvd0RpYWxvZygpOwogICAgfSwKCiAgICBzaG93QWRkRXh0ZW5zaW9uUmVwb3NEaWFsb2coKSB7CiAgICAgIHRoaXMudXBkYXRlQWRkUmVwb3NTZXR0aW5nKCk7CiAgICAgIHRoaXMucmVmcmVzaENoYXJ0cyh0cnVlKTsKICAgICAgdGhpcy4kcmVmcy5hZGRFeHRlbnNpb25SZXBvc0RpYWxvZy5zaG93RGlhbG9nKCk7CiAgICB9LAoKICAgIHNob3dDYXRhbG9nTG9hZERpYWxvZygpIHsKICAgICAgdGhpcy4kcmVmcy5jYXRhbG9nTG9hZERpYWxvZy5zaG93RGlhbG9nKCk7CiAgICB9LAoKICAgIHNob3dDYXRhbG9nVW5pbnN0YWxsRGlhbG9nKGV2KSB7CiAgICAgIHRoaXMuJHJlZnMuY2F0YWxvZ1VuaW5zdGFsbERpYWxvZy5zaG93RGlhbG9nKGV2KTsKICAgIH0sCgogICAgc2hvd0luc3RhbGxEaWFsb2cocGx1Z2luLCBtb2RlLCBldikgewogICAgICBldi50YXJnZXQ/LmJsdXIoKTsKICAgICAgZXYucHJldmVudERlZmF1bHQoKTsKICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7CgogICAgICB0aGlzLiRyZWZzLmluc3RhbGxEaWFsb2cuc2hvd0RpYWxvZyhwbHVnaW4sIG1vZGUpOwogICAgfSwKCiAgICBzaG93VW5pbnN0YWxsRGlhbG9nKHBsdWdpbiwgZXYpIHsKICAgICAgZXYudGFyZ2V0Py5ibHVyKCk7CiAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7CiAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpOwoKICAgICAgdGhpcy4kcmVmcy51bmluc3RhbGxEaWFsb2cuc2hvd0RpYWxvZyhwbHVnaW4pOwogICAgfSwKCiAgICBkaWRVbmluc3RhbGwocGx1Z2luKSB7CiAgICAgIGlmIChwbHVnaW4pIHsKICAgICAgICB0aGlzLnVwZGF0ZVBsdWdpbkluc3RhbGxTdGF0dXMocGx1Z2luLm5hbWUsICd1bmluc3RhbGwnKTsKCiAgICAgICAgaWYgKHBsdWdpbi5jYXRhbG9nKSB7CiAgICAgICAgICB0aGlzLnJlZnJlc2hDaGFydHMoKTsKICAgICAgICB9CgogICAgICAgIC8vIENsZWFyIHRoZSBsb2FkIGVycm9yLCBpZiB0aGVyZSB3YXMgb25lCiAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3VpcGx1Z2lucy9zZXRFcnJvcicsIHsgbmFtZTogcGx1Z2luLm5hbWUsIGVycm9yOiBmYWxzZSB9KTsKICAgICAgfQogICAgfSwKCiAgICBkaWRJbnN0YWxsKHBsdWdpbikgewogICAgICBpZiAocGx1Z2luKSB7CiAgICAgICAgLy8gQ2hhbmdlIHRoZSB2aWV3IHRvIGluc3RhbGxlZCBpZiB3ZSBzdGFydGVkIGluc3RhbGxpbmcgYSBwbHVnaW4KICAgICAgICB0aGlzLiRyZWZzLnRhYnM/LnNlbGVjdChUQUJTX1ZBTFVFUy5JTlNUQUxMRUQpOwoKICAgICAgICAvLyBDbGVhciB0aGUgbG9hZCBlcnJvciwgaWYgdGhlcmUgd2FzIG9uZSBwcmV2aW91c2x5CiAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3VpcGx1Z2lucy9zZXRFcnJvcicsIHsgbmFtZTogcGx1Z2luLm5hbWUsIGVycm9yOiBmYWxzZSB9KTsKICAgICAgfQogICAgfSwKCiAgICBzaG93UGx1Z2luRGV0YWlsKHBsdWdpbikgewogICAgICB0aGlzLiRyZWZzLmluZm9QYW5lbC5zaG93KHBsdWdpbik7CiAgICB9LAoKICAgIHVwZGF0ZVBsdWdpbkluc3RhbGxTdGF0dXMobmFtZSwgc3RhdHVzKSB7CiAgICAgIFZ1ZS5zZXQodGhpcy5pbnN0YWxsaW5nLCBuYW1lLCBzdGF0dXMpOwogICAgfSwKCiAgICBzZXRNZW51KGV2ZW50KSB7CiAgICAgIHRoaXMubWVudU9wZW4gPSAhIWV2ZW50OwoKICAgICAgaWYgKGV2ZW50KSB7CiAgICAgICAgdGhpcy5tZW51VGFyZ2V0RWxlbWVudCA9IHRoaXMuJHJlZnMuYWN0aW9uczsKICAgICAgICB0aGlzLm1lbnVUYXJnZXRFdmVudCA9IGV2ZW50OwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMubWVudVRhcmdldEVsZW1lbnQgPSB1bmRlZmluZWQ7CiAgICAgICAgdGhpcy5tZW51VGFyZ2V0RXZlbnQgPSB1bmRlZmluZWQ7CiAgICAgIH0KICAgIH0sCgogICAgcmVsb2FkKCkgewogICAgICB0aGlzLiRyb3V0ZXIuZ28oKTsKICAgIH0sCgogICAgbWFuYWdlUmVwb3MoKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICBuYW1lOiAgICdjLWNsdXN0ZXItcHJvZHVjdC1yZXNvdXJjZScsCiAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICBjbHVzdGVyOiAgJ2xvY2FsJywKICAgICAgICAgIHByb2R1Y3Q6ICBBUFBfUFJPRFVDVCwKICAgICAgICAgIHJlc291cmNlOiBDQVRBTE9HLkNMVVNURVJfUkVQTwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAoKICAgIG1hbmFnZUV4dGVuc2lvblZpZXcoKSB7CiAgICAgIHRoaXMuc2hvd0NhdGFsb2dMaXN0ID0gIXRoaXMuc2hvd0NhdGFsb2dMaXN0OwogICAgfSwKCiAgICB1cGRhdGVBZGRSZXBvc1NldHRpbmcoKSB7CiAgICAgIGlmICh0aGlzLmFkZEV4dGVuc2lvblJlcG9zQmFubmVyU2V0dGluZz8udmFsdWUgPT09ICd0cnVlJykgewogICAgICAgIHRoaXMuYWRkRXh0ZW5zaW9uUmVwb3NCYW5uZXJTZXR0aW5nLnZhbHVlID0gJ2ZhbHNlJzsKICAgICAgICB0aGlzLmFkZEV4dGVuc2lvblJlcG9zQmFubmVyU2V0dGluZy5zYXZlKCk7CiAgICAgIH0KICAgIH0KICB9Cn07Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"node_modules/@rancher/shell/pages/c/_cluster/uiplugins","sourcesContent":["<script>\nimport Vue from 'vue';\nimport { mapGetters } from 'vuex';\nimport { mapPref, PLUGIN_DEVELOPER } from '@shell/store/prefs';\nimport { sortBy } from '@shell/utils/sort';\nimport { allHash } from '@shell/utils/promise';\nimport { CATALOG, UI_PLUGIN, SERVICE, MANAGEMENT } from '@shell/config/types';\nimport { SETTING } from '@shell/config/settings';\nimport { fetchOrCreateSetting } from '@shell/utils/settings';\nimport { getVersionData } from '@shell/config/version';\nimport { CATALOG as CATALOG_ANNOTATIONS } from '@shell/config/labels-annotations';\nimport { NAME as APP_PRODUCT } from '@shell/config/product/apps';\nimport ActionMenu from '@shell/components/ActionMenu';\nimport Tabbed from '@shell/components/Tabbed/index.vue';\nimport Tab from '@shell/components/Tabbed/Tab.vue';\nimport IconMessage from '@shell/components/IconMessage.vue';\nimport LazyImage from '@shell/components/LazyImage';\nimport { BadgeState } from '@components/BadgeState';\nimport UninstallDialog from './UninstallDialog.vue';\nimport InstallDialog from './InstallDialog.vue';\nimport CatalogLoadDialog from './CatalogList/CatalogLoadDialog.vue';\nimport CatalogUninstallDialog from './CatalogList/CatalogUninstallDialog.vue';\nimport DeveloperInstallDialog from './DeveloperInstallDialog.vue';\nimport PluginInfoPanel from './PluginInfoPanel.vue';\nimport SetupUIPlugins from './SetupUIPlugins';\nimport RemoveUIPlugins from './RemoveUIPlugins';\nimport AddExtensionRepos from './AddExtensionRepos';\nimport CatalogList from './CatalogList/index.vue';\nimport Banner from '@components/Banner/Banner.vue';\nimport {\n  isUIPlugin,\n  uiPluginAnnotation,\n  uiPluginHasAnnotation,\n  isSupportedChartVersion,\n  isChartVersionAvailableForInstall,\n  isChartVersionHigher,\n  UI_PLUGIN_NAMESPACE,\n  UI_PLUGIN_CHART_ANNOTATIONS,\n  UI_PLUGINS_REPO_URL,\n  UI_PLUGINS_PARTNERS_REPO_URL\n} from '@shell/config/uiplugins';\n\nconst MAX_DESCRIPTION_LENGTH = 200;\n\nconst TABS_VALUES = {\n  INSTALLED: 'installed',\n  UPDATES:   'updates',\n  AVAILABLE: 'available',\n  ALL:       'all'\n};\n\nexport default {\n  components: {\n    ActionMenu,\n    BadgeState,\n    DeveloperInstallDialog,\n    IconMessage,\n    CatalogList,\n    Banner,\n    CatalogLoadDialog,\n    CatalogUninstallDialog,\n    InstallDialog,\n    LazyImage,\n    PluginInfoPanel,\n    Tab,\n    Tabbed,\n    UninstallDialog,\n    SetupUIPlugins,\n    RemoveUIPlugins,\n    AddExtensionRepos,\n  },\n\n  data() {\n    return {\n      TABS_VALUES,\n      kubeVersion:                    null,\n      view:                           '',\n      charts:                         [],\n      installing:                     {},\n      errors:                         {},\n      plugins:                        [], // The installed plugins\n      helmOps:                        [], // Helm operations\n      addExtensionReposBannerSetting: undefined,\n      loading:                        true,\n      menuTargetElement:              null,\n      menuTargetEvent:                null,\n      menuOpen:                       false,\n      hasService:                     false,\n      defaultIcon:                    require('~shell/assets/images/generic-plugin.svg'),\n      reloadRequired:                 false,\n      rancherVersion:                 getVersionData()?.Version,\n      showCatalogList:                false\n    };\n  },\n\n  async fetch() {\n    const hash = {};\n\n    const isSetup = await this.updateInstallStatus(true);\n\n    if (isSetup) {\n      if (this.$store.getters['management/schemaFor'](UI_PLUGIN)) {\n        hash.plugins = this.$store.dispatch('management/findAll', { type: UI_PLUGIN });\n      }\n    }\n\n    hash.load = await this.$store.dispatch('catalog/load', { reset: true });\n\n    if (this.$store.getters['management/schemaFor'](MANAGEMENT.CLUSTER)) {\n      hash.localCluster = await this.$store.dispatch('management/find', { type: MANAGEMENT.CLUSTER, id: 'local' });\n    }\n\n    if (this.$store.getters['management/schemaFor'](CATALOG.OPERATION)) {\n      hash.helmOps = await this.$store.dispatch('management/findAll', { type: CATALOG.OPERATION });\n    }\n\n    if (this.$store.getters['management/schemaFor'](CATALOG.CLUSTER_REPO)) {\n      hash.repos = await this.$store.dispatch('management/findAll', { type: CATALOG.CLUSTER_REPO });\n    }\n\n    const res = await allHash(hash);\n\n    this.plugins = res.plugins || [];\n    this.repos = res.repos || [];\n    this.helmOps = res.helmOps || [];\n    this.kubeVersion = res.localCluster?.kubernetesVersionBase || [];\n\n    this.addExtensionReposBannerSetting = await fetchOrCreateSetting(this.$store, SETTING.ADD_EXTENSION_REPOS_BANNER_DISPLAY, 'true', true) || {};\n\n    const c = this.$store.getters['catalog/rawCharts'];\n\n    this.charts = Object.values(c);\n\n    // If there are no plugins installed, default to the catalog view\n    if (this.plugins.length === 0) {\n      this.$refs.tabs?.select(TABS_VALUES.AVAILABLE);\n    }\n\n    this.loading = false;\n  },\n\n  computed: {\n    pluginDeveloper: mapPref(PLUGIN_DEVELOPER),\n\n    ...mapGetters({ uiplugins: 'uiplugins/plugins' }),\n    ...mapGetters({ uiErrors: 'uiplugins/errors' }),\n    ...mapGetters({ theme: 'prefs/theme' }),\n\n    showAddReposBanner() {\n      return this.addExtensionReposBannerSetting?.value === 'true' && (!this.repos.find((r) => r.urlDisplay === UI_PLUGINS_REPO_URL) || !this.repos.find((r) => r.urlDisplay === UI_PLUGINS_PARTNERS_REPO_URL));\n    },\n\n    applyDarkModeBg() {\n      if (this.theme === 'dark') {\n        return { 'dark-mode': true };\n      }\n\n      return {};\n    },\n\n    menuActions() {\n      const menuActions = [];\n\n      // Add link to go to the Repos view of the local cluster\n      menuActions.push({\n        action:  'manageRepos',\n        label:   this.t('plugins.manageRepos'),\n        enabled: true\n      });\n\n      // Add link to add extensions repositories (Official, Partners, etc)\n      menuActions.push({\n        action:  'addRancherRepos',\n        label:   this.t('plugins.addRancherRepos'),\n        enabled: true\n      });\n\n      // Only show Manage Extension Catalogs when on main charts view\n      if (!this.showCatalogList) {\n        menuActions.push({\n          action:  'manageExtensionView',\n          label:   this.t('plugins.manageCatalog.label'),\n          enabled: true\n        });\n      }\n\n      // Only show Developer Load action if the user has this enabled in preferences\n      if (this.pluginDeveloper) {\n        menuActions.push( { divider: true });\n        menuActions.push({\n          action:  'devLoad',\n          label:   this.t('plugins.developer.label'),\n          enabled: true\n        });\n      }\n\n      if (this.hasService) {\n        menuActions.push( { divider: true });\n        menuActions.push({\n          action:  'removePluginSupport',\n          label:   this.t('plugins.setup.remove.label'),\n          enabled: true\n        });\n      }\n\n      return menuActions;\n    },\n\n    list() {\n      const all = this.available;\n\n      switch (this.view) {\n      case TABS_VALUES.INSTALLED:\n        return all.filter((p) => !!p.installed || !!p.installing);\n      case TABS_VALUES.UPDATES:\n        return this.updates;\n      case TABS_VALUES.AVAILABLE:\n        return all.filter((p) => !p.installed);\n      default:\n        return all;\n      }\n    },\n\n    hasMenuActions() {\n      return this.menuActions?.length > 0;\n    },\n\n    // Message to display when the tab view is empty (depends on the tab)\n    emptyMessage() {\n      return this.t(`plugins.empty.${ this.view }`);\n    },\n\n    updates() {\n      return this.available.filter((plugin) => !!plugin.upgrade);\n    },\n\n    available() {\n      let all = this.charts.filter((c) => isUIPlugin(c));\n\n      // Filter out hidden charts\n      all = all.filter((c) => !uiPluginHasAnnotation(c, CATALOG_ANNOTATIONS.HIDDEN, 'true'));\n\n      all = all.map((chart) => {\n        // Label can be overridden by chart annotation\n        const label = uiPluginAnnotation(chart, UI_PLUGIN_CHART_ANNOTATIONS.DISPLAY_NAME) || chart.chartNameDisplay;\n        const item = {\n          name:         chart.chartName,\n          label,\n          description:  chart.chartDescription,\n          id:           chart.id,\n          versions:     [],\n          installed:    false,\n          builtin:      false,\n          experimental: uiPluginHasAnnotation(chart, CATALOG_ANNOTATIONS.EXPERIMENTAL, 'true'),\n          certified:    uiPluginHasAnnotation(chart, CATALOG_ANNOTATIONS.CERTIFIED, CATALOG_ANNOTATIONS._RANCHER)\n        };\n\n        item.versions = [...chart.versions];\n        item.chart = chart;\n\n        // Filter the versions available to install (plugins-api version and current dashboard version)\n        item.installableVersions = item.versions.filter((version) => isSupportedChartVersion({ version, kubeVersion: this.kubeVersion }) && isChartVersionAvailableForInstall({\n          version, rancherVersion: this.rancherVersion, kubeVersion: this.kubeVersion\n        }));\n\n        // add prop to version object if version is compatible with the current dashboard version\n        item.versions = item.versions.map((version) => isChartVersionAvailableForInstall({\n          version, rancherVersion: this.rancherVersion, kubeVersion: this.kubeVersion\n        }, true));\n\n        const latestCompatible = item.installableVersions?.[0];\n        const latestNotCompatible = item.versions.find((version) => !version.isCompatibleWithUi || !version.isCompatibleWithKubeVersion);\n\n        if (latestCompatible) {\n          item.displayVersion = latestCompatible.version;\n          item.icon = latestCompatible.icon;\n        } else {\n          item.displayVersion = item.versions?.[0]?.version;\n          item.icon = chart.icon || latestCompatible?.annotations?.['catalog.cattle.io/ui-icon'];\n        }\n\n        if (latestNotCompatible && item.installableVersions.length && isChartVersionHigher(latestNotCompatible.version, item.installableVersions?.[0].version)) {\n          if (!item.isCompatibleWithUi) {\n            item.incompatibleRancherVersion = this.t('plugins.incompatibleRancherVersion', { version: latestNotCompatible.version, rancherVersion: latestNotCompatible.requiredUiVersion }, true);\n          } else if (!item.isCompatibleWithKubeVersion) {\n            item.incompatibleKubeVersion = this.t('plugins.incompatibleKubeVersion', { version: latestNotCompatible.version, kubeVersion: latestNotCompatible.requiredKubeVersion }, true);\n          }\n        }\n\n        if (this.installing[item.name]) {\n          item.installing = this.installing[item.name];\n        }\n\n        return item;\n      });\n\n      // Remove charts with no installable versions\n      all = all.filter((c) => c.versions.length > 0);\n\n      // Check that all of the loaded plugins are represented\n      this.uiplugins.forEach((p) => {\n        const chart = all.find((c) => c.name === p.name);\n\n        if (!chart) {\n          // A plugin is loaded, but there is no chart, so add an item so that it shows up\n          const rancher = typeof p.metadata?.rancher === 'object' ? p.metadata.rancher : {};\n          const label = rancher.annotations?.[UI_PLUGIN_CHART_ANNOTATIONS.DISPLAY_NAME] || p.name;\n          const item = {\n            name:           p.name,\n            label,\n            description:    p.metadata?.description,\n            icon:           p.metadata?.icon,\n            id:             p.id,\n            versions:       [],\n            displayVersion: p.metadata?.version || '-',\n            installed:      true,\n            builtin:        !!p.builtin,\n          };\n\n          // Built-in plugins can chose to be hidden - used where we implement as extensions\n          // but don't want to shows them individually on the extensions page\n          if (!(item.builtin && rancher[UI_PLUGIN_CHART_ANNOTATIONS.HIDDEN_BUILTIN])) {\n            all.push(item);\n          }\n        }\n      });\n\n      // Go through the CRs for the plugins and wire them into the catalog\n      this.plugins.forEach((p) => {\n        const chart = all.find((c) => c.name === p.name);\n\n        if (chart) {\n          chart.installed = true;\n          chart.uiplugin = p;\n          chart.displayVersion = p.version;\n\n          // Can't do this here\n          chart.installing = this.installing[chart.name];\n\n          // Check for upgrade\n          if (chart.installableVersions?.length && p.version !== chart.installableVersions?.[0]?.version) {\n            chart.upgrade = chart.installableVersions[0].version;\n          }\n        } else {\n          // No chart, so add a card for the plugin based on its Custom resource being present\n          const item = {\n            name:           p.name,\n            label:          p.name,\n            description:    p.description || '-',\n            id:             `${ p.name }-${ p.version }`,\n            versions:       [],\n            displayVersion: p.version || '-',\n            installed:      true,\n            installing:     false,\n            builtin:        false,\n            uiplugin:       p,\n          };\n\n          all.push(item);\n        }\n      });\n\n      // Merge in the plugin load errors\n      Object.keys(this.uiErrors).forEach((e) => {\n        const chart = all.find((c) => c.name === e);\n\n        if (chart) {\n          const error = this.uiErrors[e];\n\n          if (error && typeof error === 'string') {\n            chart.error = this.t(this.uiErrors[e]);\n          } else {\n            chart.error = false;\n          }\n        }\n      });\n\n      // Merge in the plugin load errors from help ops\n      Object.keys(this.errors).forEach((e) => {\n        const chart = all.find((c) => c.name === e);\n\n        if (chart) {\n          chart.helmError = !!this.errors[e];\n        }\n      });\n\n      all.forEach((plugin) => {\n        // Clamp the lengths of the descriptions\n        if (plugin.description && plugin.description.length > MAX_DESCRIPTION_LENGTH) {\n          plugin.description = `${ plugin.description.substr(0, MAX_DESCRIPTION_LENGTH) } ...`;\n        }\n\n        // check if kube version compatibility is met for installed extension\n        if (plugin.uiplugin) {\n          const versionInstalled = plugin.uiplugin.spec?.plugin?.version;\n          const versionInstalledData = plugin.versions.find((v) => v.version === versionInstalled);\n\n          if (versionInstalledData) {\n            const kubeVersionToCheck = versionInstalledData.annotations?.[UI_PLUGIN_CHART_ANNOTATIONS.KUBE_VERSION];\n\n            if (this.kubeVersion && !isSupportedChartVersion({ version: versionInstalledData, kubeVersion: this.kubeVersion })) {\n              plugin.installedError = this.t('plugins.currentInstalledVersionBlockedByKubeVersion', { kubeVersion: this.kubeVersion, kubeVersionToCheck }, true);\n            }\n          }\n        }\n      });\n\n      // Sort by name\n      return sortBy(all, 'name', false);\n    }\n  },\n\n  watch: {\n    helmOps(neu) {\n      // Get Helm operations for UI plugins and order by date\n      let pluginOps = neu.filter((op) => {\n        return op.namespace === UI_PLUGIN_NAMESPACE;\n      });\n\n      pluginOps = sortBy(pluginOps, 'metadata.creationTimestamp', true);\n\n      // Go through the installed plugins\n      (this.available || []).forEach((plugin) => {\n        const op = pluginOps.find((o) => o.status?.releaseName === plugin.name);\n\n        if (op) {\n          const active = op.metadata.state?.transitioning;\n          const error = op.metadata.state?.error;\n\n          Vue.set(this.errors, plugin.name, error);\n\n          if (active) {\n            // Can use the status directly, apart from upgrade, which maps to install\n            const status = op.status.action === 'upgrade' ? 'install' : op.status.action;\n\n            this.updatePluginInstallStatus(plugin.name, status);\n          } else if (op.status.action === 'uninstall') {\n            // Uninstall has finished\n            this.updatePluginInstallStatus(plugin.name, false);\n          } else if (error) {\n            this.updatePluginInstallStatus(plugin.name, false);\n          }\n        } else {\n          this.updatePluginInstallStatus(plugin.name, false);\n        }\n      });\n    },\n\n    plugins(neu, old) {\n      const installed = this.$store.getters['uiplugins/plugins'];\n      const shouldHaveLoaded = (installed || []).filter((p) => !this.uiErrors[p.name] && !p.builtin);\n      let changes = 0;\n\n      // Did the user remove an extension\n      if (neu?.length < shouldHaveLoaded.length) {\n        changes++;\n      }\n\n      neu.forEach((plugin) => {\n        const existing = installed.find((p) => !p.removed && p.name === plugin.name && p.version === plugin.version);\n\n        if (!existing && plugin.isCached) {\n          if (!this.uiErrors[plugin.name]) {\n            changes++;\n          }\n\n          this.updatePluginInstallStatus(plugin.name, false);\n        }\n      });\n\n      if (changes > 0) {\n        Vue.set(this, 'reloadRequired', true);\n      }\n    }\n  },\n\n  // Forget the types when we leave the page\n  beforeDestroy() {\n    this.$store.dispatch('management/forgetType', UI_PLUGIN);\n    this.$store.dispatch('management/forgetType', CATALOG.OPERATION);\n    this.$store.dispatch('management/forgetType', CATALOG.APP);\n    this.$store.dispatch('management/forgetType', CATALOG.CLUSTER_REPO);\n  },\n\n  methods: {\n    async refreshCharts(forceChartsUpdate = false) {\n      // we might need to force the request, so that we know at all times if what's the status of the offical and partners repos (installed or not)\n      // tied to the SetupUIPlugins, AddExtensionRepos and RemoveUIPlugins checkboxes\n      await this.$store.dispatch('catalog/load', { reset: true, force: forceChartsUpdate });\n      const c = this.$store.getters['catalog/rawCharts'];\n\n      this.charts = Object.values(c);\n    },\n\n    async updateInstallStatus(forceChartsUpdate = false) {\n      let hasService;\n\n      try {\n        const service = await this.$store.dispatch('management/find', {\n          type: SERVICE,\n          id:   `${ UI_PLUGIN_NAMESPACE }/ui-plugin-operator`,\n          opt:  { force: true },\n        });\n\n        hasService = !!service;\n      } catch (e) {\n        hasService = false;\n      }\n\n      if (hasService || forceChartsUpdate) {\n        this.refreshCharts(forceChartsUpdate);\n      }\n\n      Vue.set(this, 'hasService', hasService);\n\n      return hasService;\n    },\n\n    filterChanged(f) {\n      this.view = f.selectedName;\n    },\n\n    removePluginSupport() {\n      this.refreshCharts(true);\n      this.$refs.removeUIPlugins.showDialog();\n    },\n\n    // Developer Load is in the action menu\n    showDeveloperLoadDialog() {\n      this.$refs.developerInstallDialog.showDialog();\n    },\n\n    showAddExtensionReposDialog() {\n      this.updateAddReposSetting();\n      this.refreshCharts(true);\n      this.$refs.addExtensionReposDialog.showDialog();\n    },\n\n    showCatalogLoadDialog() {\n      this.$refs.catalogLoadDialog.showDialog();\n    },\n\n    showCatalogUninstallDialog(ev) {\n      this.$refs.catalogUninstallDialog.showDialog(ev);\n    },\n\n    showInstallDialog(plugin, mode, ev) {\n      ev.target?.blur();\n      ev.preventDefault();\n      ev.stopPropagation();\n\n      this.$refs.installDialog.showDialog(plugin, mode);\n    },\n\n    showUninstallDialog(plugin, ev) {\n      ev.target?.blur();\n      ev.preventDefault();\n      ev.stopPropagation();\n\n      this.$refs.uninstallDialog.showDialog(plugin);\n    },\n\n    didUninstall(plugin) {\n      if (plugin) {\n        this.updatePluginInstallStatus(plugin.name, 'uninstall');\n\n        if (plugin.catalog) {\n          this.refreshCharts();\n        }\n\n        // Clear the load error, if there was one\n        this.$store.dispatch('uiplugins/setError', { name: plugin.name, error: false });\n      }\n    },\n\n    didInstall(plugin) {\n      if (plugin) {\n        // Change the view to installed if we started installing a plugin\n        this.$refs.tabs?.select(TABS_VALUES.INSTALLED);\n\n        // Clear the load error, if there was one previously\n        this.$store.dispatch('uiplugins/setError', { name: plugin.name, error: false });\n      }\n    },\n\n    showPluginDetail(plugin) {\n      this.$refs.infoPanel.show(plugin);\n    },\n\n    updatePluginInstallStatus(name, status) {\n      Vue.set(this.installing, name, status);\n    },\n\n    setMenu(event) {\n      this.menuOpen = !!event;\n\n      if (event) {\n        this.menuTargetElement = this.$refs.actions;\n        this.menuTargetEvent = event;\n      } else {\n        this.menuTargetElement = undefined;\n        this.menuTargetEvent = undefined;\n      }\n    },\n\n    reload() {\n      this.$router.go();\n    },\n\n    manageRepos() {\n      this.$router.push({\n        name:   'c-cluster-product-resource',\n        params: {\n          cluster:  'local',\n          product:  APP_PRODUCT,\n          resource: CATALOG.CLUSTER_REPO\n        }\n      });\n    },\n\n    manageExtensionView() {\n      this.showCatalogList = !this.showCatalogList;\n    },\n\n    updateAddReposSetting() {\n      if (this.addExtensionReposBannerSetting?.value === 'true') {\n        this.addExtensionReposBannerSetting.value = 'false';\n        this.addExtensionReposBannerSetting.save();\n      }\n    }\n  }\n};\n</script>\n\n<template>\n  <div class=\"plugins\">\n    <div class=\"plugin-header\">\n      <template v-if=\"showCatalogList\">\n        <div class=\"catalog-title\">\n          <h2\n            class=\"mb-0 mr-10\"\n            data-testid=\"extensions-catalog-title\"\n          >\n            <a\n              class=\"link\"\n              @click=\"manageExtensionView()\"\n            >\n              {{ t('plugins.manageCatalog.title') }}:\n            </a>\n            <t k=\"plugins.manageCatalog.subtitle\" />\n          </h2>\n          <BadgeState\n            color=\"bg-warning\"\n            :label=\"t('generic.experimental')\"\n            class=\"badge\"\n          />\n        </div>\n      </template>\n      <template v-else>\n        <h2 data-testid=\"extensions-page-title\">\n          {{ t('plugins.title') }}\n        </h2>\n      </template>\n      <div class=\"actions-container\">\n        <div\n          v-if=\"reloadRequired\"\n          class=\"plugin-reload-banner mr-20\"\n          data-testid=\"extension-reload-banner\"\n        >\n          <i class=\"icon icon-checkmark mr-10\" />\n          <span>\n            {{ t('plugins.reload') }}\n          </span>\n          <button\n            class=\"ml-10 btn btn-sm role-primary\"\n            data-testid=\"extension-reload-banner-reload-btn\"\n            @click=\"reload()\"\n          >\n            {{ t('generic.reload') }}\n          </button>\n        </div>\n        <div v-if=\"hasService && hasMenuActions\">\n          <button\n            ref=\"actions\"\n            aria-haspopup=\"true\"\n            type=\"button\"\n            class=\"btn role-multi-action actions\"\n            data-testid=\"extensions-page-menu\"\n            @click=\"setMenu\"\n          >\n            <i class=\"icon icon-actions\" />\n          </button>\n          <ActionMenu\n            :custom-actions=\"menuActions\"\n            :open=\"menuOpen\"\n            :use-custom-target-element=\"true\"\n            :custom-target-element=\"menuTargetElement\"\n            :custom-target-event=\"menuTargetEvent\"\n            @close=\"setMenu(false)\"\n            @devLoad=\"showDeveloperLoadDialog\"\n            @removePluginSupport=\"removePluginSupport\"\n            @manageRepos=\"manageRepos\"\n            @addRancherRepos=\"showAddExtensionReposDialog\"\n            @manageExtensionView=\"manageExtensionView\"\n          />\n        </div>\n      </div>\n    </div>\n\n    <PluginInfoPanel ref=\"infoPanel\" />\n\n    <div v-if=\"!hasService\">\n      <div\n        v-if=\"loading\"\n        class=\"data-loading\"\n      >\n        <i class=\"icon-spin icon icon-spinner\" />\n        <t\n          k=\"generic.loading\"\n          :raw=\"true\"\n        />\n      </div>\n      <SetupUIPlugins\n        v-else\n        class=\"setup-message\"\n        @done=\"updateInstallStatus(true)\"\n        @refreshCharts=\"refreshCharts(true)\"\n      />\n    </div>\n    <div v-else>\n      <template v-if=\"showCatalogList\">\n        <CatalogList\n          @showCatalogLoadDialog=\"showCatalogLoadDialog\"\n          @showCatalogUninstallDialog=\"showCatalogUninstallDialog($event)\"\n        />\n      </template>\n      <template v-else>\n        <Banner\n          v-if=\"showAddReposBanner\"\n          color=\"warning\"\n          class=\"add-repos-banner mb-20\"\n          data-testid=\"extensions-new-repos-banner\"\n        >\n          <span>{{ t('plugins.addRepos.banner', {}, true) }}</span>\n          <button\n            class=\"ml-10 btn btn-sm role-primary\"\n            data-testid=\"extensions-new-repos-banner-action-btn\"\n            @click=\"showAddExtensionReposDialog()\"\n          >\n            {{ t('plugins.addRepos.bannerBtn') }}\n          </button>\n        </Banner>\n\n        <Tabbed\n          ref=\"tabs\"\n          :tabs-only=\"true\"\n          data-testid=\"extension-tabs\"\n          @changed=\"filterChanged\"\n        >\n          <Tab\n            :name=\"TABS_VALUES.INSTALLED\"\n            data-testid=\"extension-tab-installed\"\n            label-key=\"plugins.tabs.installed\"\n            :weight=\"20\"\n          />\n          <Tab\n            :name=\"TABS_VALUES.AVAILABLE\"\n            data-testid=\"extension-tab-available\"\n            label-key=\"plugins.tabs.available\"\n            :weight=\"19\"\n          />\n          <Tab\n            :name=\"TABS_VALUES.UPDATES\"\n            label-key=\"plugins.tabs.updates\"\n            :weight=\"18\"\n            :badge=\"updates.length\"\n          />\n          <Tab\n            :name=\"TABS_VALUES.ALL\"\n            label-key=\"plugins.tabs.all\"\n            :weight=\"17\"\n          />\n        </Tabbed>\n        <template>\n          <div\n            v-if=\"loading\"\n            class=\"data-loading\"\n          >\n            <i class=\"icon-spin icon icon-spinner\" />\n            <t\n              k=\"generic.loading\"\n              :raw=\"true\"\n            />\n          </div>\n          <div\n            v-else\n            class=\"plugin-list\"\n            :class=\"{'v-margin': !list.length}\"\n          >\n            <IconMessage\n              v-if=\"list.length === 0\"\n              :vertical=\"true\"\n              :subtle=\"true\"\n              icon=\"icon-extension\"\n              :message=\"emptyMessage\"\n            />\n            <template v-else>\n              <div\n                v-for=\"(plugin, i) in list\"\n                :key=\"plugin.name + i\"\n                class=\"plugin\"\n                :data-testid=\"`extension-card-${plugin.name}`\"\n                @click=\"showPluginDetail(plugin)\"\n              >\n                <!-- plugin icon -->\n                <div\n                  class=\"plugin-icon\"\n                  :class=\"applyDarkModeBg\"\n                >\n                  <LazyImage\n                    v-if=\"plugin.icon\"\n                    :initial-src=\"defaultIcon\"\n                    :error-src=\"defaultIcon\"\n                    :src=\"plugin.icon\"\n                    class=\"icon plugin-icon-img\"\n                  />\n                  <img\n                    v-else\n                    :src=\"defaultIcon\"\n                    class=\"icon plugin-icon-img\"\n                  >\n                </div>\n                <!-- plugin card -->\n                <div class=\"plugin-metadata\">\n                  <!-- plugin basic info -->\n                  <div class=\"plugin-name\">\n                    {{ plugin.label }}\n                  </div>\n                  <div>{{ plugin.description }}</div>\n                  <div class=\"plugin-version\">\n                    <span\n                      v-if=\"plugin.installing\"\n                      class=\"plugin-installing\"\n                    >\n                      -\n                    </span>\n                    <span v-else>\n                      <span>{{ plugin.displayVersion }}</span>\n                      <span\n                        v-if=\"plugin.upgrade\"\n                        v-clean-tooltip=\"t('plugins.upgradeAvailable')\"\n                      > -> {{ plugin.upgrade }}</span>\n                      <p\n                        v-if=\"plugin.installedError\"\n                        class=\"incompatible\"\n                      >\n                        <i class=\"icon icon-warning icon-lg text-warning\" />\n                        <span>{{ plugin.installedError }}</span>\n                      </p>\n                      <p\n                        v-else-if=\"plugin.incompatibleRancherVersion\"\n                        class=\"incompatible\"\n                      >{{ plugin.incompatibleRancherVersion }}</p>\n                      <p\n                        v-else-if=\"plugin.incompatibleKubeVersion\"\n                        class=\"incompatible\"\n                      >{{ plugin.incompatibleKubeVersion }}</p>\n                    </span>\n                  </div>\n                  <!-- plugin badges -->\n                  <div\n                    v-if=\"plugin.builtin\"\n                    class=\"plugin-badges\"\n                  >\n                    <div class=\"plugin-builtin\">\n                      {{ t('plugins.labels.builtin') }}\n                    </div>\n                  </div>\n                  <div\n                    v-else\n                    class=\"plugin-badges\"\n                  >\n                    <div\n                      v-if=\"!plugin.certified\"\n                      v-clean-tooltip=\"t('plugins.descriptions.third-party')\"\n                    >\n                      {{ t('plugins.labels.third-party') }}\n                    </div>\n                    <div\n                      v-if=\"plugin.experimental\"\n                      v-clean-tooltip=\"t('plugins.descriptions.experimental')\"\n                    >\n                      {{ t('plugins.labels.experimental') }}\n                    </div>\n                  </div>\n                  <div class=\"plugin-spacer\" />\n                  <!-- plugin badges -->\n                  <div class=\"plugin-actions\">\n                    <template v-if=\"plugin.error\">\n                      <div\n                        v-clean-tooltip=\"plugin.error\"\n                        class=\"plugin-error\"\n                      >\n                        <i class=\"icon icon-warning\" />\n                      </div>\n                    </template>\n                    <!-- plugin status -->\n                    <div\n                      v-if=\"plugin.helmError\"\n                      v-clean-tooltip=\"t('plugins.helmError')\"\n                      class=\"plugin-error\"\n                    >\n                      <i class=\"icon icon-warning\" />\n                    </div>\n\n                    <div class=\"plugin-spacer\" />\n\n                    <div\n                      v-if=\"plugin.installing\"\n                      class=\"plugin-installing\"\n                    >\n                      <i class=\"version-busy icon icon-spin icon-spinner\" />\n                      <div v-if=\"plugin.installing ==='install'\">\n                        {{ t('plugins.labels.installing') }}\n                      </div>\n                      <div v-else>\n                        {{ t('plugins.labels.uninstalling') }}\n                      </div>\n                    </div>\n                    <!-- plugin buttons -->\n                    <div\n                      v-else-if=\"plugin.installed\"\n                      class=\"plugin-buttons\"\n                    >\n                      <button\n                        v-if=\"!plugin.builtin\"\n                        class=\"btn role-secondary\"\n                        :data-testid=\"`extension-card-uninstall-btn-${plugin.name}`\"\n                        @click=\"showUninstallDialog(plugin, $event)\"\n                      >\n                        {{ t('plugins.uninstall.label') }}\n                      </button>\n                      <button\n                        v-if=\"plugin.upgrade\"\n                        class=\"btn role-secondary\"\n                        :data-testid=\"`extension-card-update-btn-${plugin.name}`\"\n                        @click=\"showInstallDialog(plugin, 'update', $event)\"\n                      >\n                        {{ t('plugins.update.label') }}\n                      </button>\n                      <button\n                        v-if=\"!plugin.upgrade && plugin.installableVersions && plugin.installableVersions.length > 1\"\n                        class=\"btn role-secondary\"\n                        :data-testid=\"`extension-card-rollback-btn-${plugin.name}`\"\n                        @click=\"showInstallDialog(plugin, 'rollback', $event)\"\n                      >\n                        {{ t('plugins.rollback.label') }}\n                      </button>\n                    </div>\n                    <div\n                      v-else-if=\"plugin.installableVersions && plugin.installableVersions.length\"\n                      class=\"plugin-buttons\"\n                    >\n                      <button\n                        class=\"btn role-secondary\"\n                        :data-testid=\"`extension-card-install-btn-${plugin.name}`\"\n                        @click=\"showInstallDialog(plugin, 'install', $event)\"\n                      >\n                        {{ t('plugins.install.label') }}\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </template>\n          </div>\n        </template>\n      </template>\n    </div>\n\n    <InstallDialog\n      ref=\"installDialog\"\n      @closed=\"didInstall\"\n      @update=\"updatePluginInstallStatus\"\n    />\n    <UninstallDialog\n      ref=\"uninstallDialog\"\n      @closed=\"didUninstall\"\n      @update=\"updatePluginInstallStatus\"\n    />\n    <CatalogLoadDialog\n      ref=\"catalogLoadDialog\"\n      @closed=\"didInstall\"\n      @refresh=\"() => reloadRequired = true\"\n    />\n    <CatalogUninstallDialog\n      ref=\"catalogUninstallDialog\"\n      @closed=\"didUninstall\"\n      @refresh=\"() => reloadRequired = true\"\n    />\n    <DeveloperInstallDialog\n      ref=\"developerInstallDialog\"\n      @closed=\"didInstall\"\n    />\n    <RemoveUIPlugins\n      ref=\"removeUIPlugins\"\n      @done=\"updateInstallStatus\"\n    />\n    <AddExtensionRepos\n      ref=\"addExtensionReposDialog\"\n      @done=\"updateInstallStatus(true)\"\n    />\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n\n  .setup-message {\n    margin-top: 100px;\n  }\n\n  .data-loading {\n    align-items: center;\n    display: flex;\n    justify-content: center;\n\n    > I {\n      margin-right: 5px;\n    }\n  }\n\n  .plugin-reload-banner {\n    align-items: center;\n    background-color: var(--success-banner-bg);\n    display: flex;\n    padding: 0 10px;\n    border-radius: 5px;\n    min-height: 36px;\n\n    > i {\n      color: var(--success);\n      font-size: 14px;\n      font-weight: bold;\n    }\n\n    > button {\n      line-height: 30px;\n      min-height: 30px;\n    }\n  }\n\n  .plugin-complete {\n    font-size: 18px;\n  }\n\n  .plugin-list {\n    display: flex;\n    flex-wrap: wrap;\n\n    > .plugin:not(:last-child) {\n      margin-right: 20px;\n    }\n\n    &.v-margin {\n      margin-top: 40px;\n    }\n  }\n  .plugins {\n    display: inherit;\n  }\n\n  .plugin-header {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    margin-bottom: 10px;\n\n    .catalog-title {\n      display: flex;\n      flex-direction: row;\n      align-items: center;\n    }\n\n    > h2 {\n      flex: 1;\n      margin-bottom: 0;\n    }\n\n    .link {\n      cursor: pointer;\n    }\n\n    .actions-container {\n      display: flex;\n      flex-direction: row;\n      justify-content: flex-end;\n    }\n\n    .btn.actions {\n      line-height: 36px;\n      min-height: 36px;\n      padding: 0 10px;\n    }\n  }\n\n  .plugin {\n    display: flex;\n    border: 1px solid var(--border);\n    padding: 10px;\n    width: calc(33% - 20px);\n    max-width: 540px;\n    margin-bottom: 20px;\n    cursor: pointer;\n\n    .plugin-icon {\n      font-size: 40px;\n      margin-right:10px;\n      color: #888;\n      width: 44px;\n      height: 44px;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n\n      &.dark-mode {\n        border-radius: calc(2 * var(--border-radius));\n        overflow: hidden;\n        background-color: white;\n      }\n\n      .plugin-icon-img {\n        height: 40px;\n        width: 40px;\n        -o-object-fit: contain;\n        object-fit: contain;\n        top: 2px;\n        left: 2px;\n      }\n    }\n\n    .plugin-spacer {\n      flex: 1;\n    }\n\n    .plugin-metadata {\n      display: flex;\n      flex: 1;\n      flex-direction: column;\n\n      .plugin-buttons {\n        > button:not(:first-child) {\n          margin-left: 5px;\n        }\n      }\n    }\n\n    .plugin-builtin {\n      color: var(--primary);\n      display: block;\n      padding: 2px 0;\n      text-transform: uppercase;\n    }\n\n    .plugin-name {\n      font-size: 16px;\n      font-weight: bold;\n      margin-bottom: 5px;\n      text-transform: capitalize;\n    }\n\n    .plugin-badges {\n      display: flex;\n\n      > div {\n        border: 1px solid var(--border);\n        border-radius: 4px;\n        padding: 2px 8px;\n        margin-right: 10px;\n        font-size: 12px;\n      }\n    }\n\n    .plugin-version {\n      align-items: center;\n      display: inline-flex;\n      font-size: 12px;\n      border-radius: 4px;\n      margin: 5px 0;\n\n      i.icon-spinner {\n        padding-right: 5px;\n        font-size: 16px;\n        height: 16px;\n        width: 16px;\n      }\n\n      .incompatible {\n        margin: 10px 0;\n        font-weight: bold;\n      }\n    }\n\n    .plugin-installing {\n      align-items: center;\n      display: flex;\n\n      > div {\n        font-size: 14px;\n        margin-left: 5px;\n      }\n    }\n\n    .plugin-actions {\n      align-items:center;\n      display: flex;\n\n      $error-icon-size: 22px;\n\n      .plugin-error {\n        display: inline;\n        cursor: help;\n\n        > i {\n          color: var(--error);\n          height: $error-icon-size;\n          font-size: $error-icon-size;\n          width: $error-icon-size;\n        }\n      }\n\n      .btn {\n        line-height: 20px;\n        min-height: 20px;\n        padding: 0 5px;\n      }\n    }\n  }\n  ::v-deep .checkbox-label {\n    font-weight: normal !important;\n  }\n\n  ::v-deep .add-repos-banner .banner__content {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n  }\n\n  @media screen and (max-width: 1200px) {\n    .plugin-list {\n      .plugin {\n        width: calc(50% - 20px);\n      }\n    }\n  }\n\n  @media screen and (max-width: 960px) {\n    .plugin-list {\n      .plugin {\n        margin-right: 0 !important;\n        width: 100%;\n      }\n    }\n  }\n\n</style>\n"]}]}