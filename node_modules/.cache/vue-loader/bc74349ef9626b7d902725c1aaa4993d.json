{"remainingRequest":"/home/ubuntu/suseconf/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ubuntu/suseconf/node_modules/@rancher/shell/components/formatter/WorkloadDetailEndpoints.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/ubuntu/suseconf/node_modules/@rancher/shell/components/formatter/WorkloadDetailEndpoints.vue","mtime":1725338146566},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js","mtime":1725271298942},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1725271300920}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IE5PREUgfSBmcm9tICdAc2hlbGwvY29uZmlnL3R5cGVzJzsKaW1wb3J0IFRhZyBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9UYWcnOwoKZXhwb3J0IGRlZmF1bHQgewogIHByb3BzOiB7CiAgICB2YWx1ZTogewogICAgICB0eXBlOiAgICBbQXJyYXksIFN0cmluZ10sCiAgICAgIGRlZmF1bHQ6IG51bGwsCiAgICB9LAogIH0sCgogIGNvbXBvbmVudHM6IHsgVGFnIH0sCgogIGNvbXB1dGVkOiB7CiAgICBub2RlcygpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLmdldHRlcnNbJ2NsdXN0ZXIvYWxsJ10oTk9ERSk7CiAgICB9LAogICAgLy8gdmFsdWUgbWF5IGJlIEpTT04gZnJvbSAiZmllbGQuY2F0dGxlLmlvL3B1YmxpY0VuZHBvaW50cyIgbGFiZWwKICAgIHBhcnNlZCgpIHsKICAgICAgY29uc3Qgbm9kZXMgPSB0aGlzLm5vZGVzOwogICAgICBjb25zdCBub2RlV2l0aEV4dGVybmFsID0gbm9kZXMuZmluZCgobm9kZSkgPT4gISFub2RlLmV4dGVybmFsSXApIHx8IHt9OwogICAgICBjb25zdCBleHRlcm5hbElwID0gbm9kZVdpdGhFeHRlcm5hbC5leHRlcm5hbElwOwoKICAgICAgaWYgKCB0aGlzLnZhbHVlICYmIHRoaXMudmFsdWUubGVuZ3RoICkgewogICAgICAgIGxldCBvdXQgOwoKICAgICAgICB0cnkgewogICAgICAgICAgb3V0ID0gSlNPTi5wYXJzZSh0aGlzLnZhbHVlKTsKCiAgICAgICAgICBvdXQuZm9yRWFjaCgoZW5kcG9pbnQpID0+IHsKICAgICAgICAgICAgbGV0IHByb3RvY29sID0gJ2h0dHAnOwoKICAgICAgICAgICAgaWYgKGVuZHBvaW50LnBvcnQgPT09IDQ0MykgewogICAgICAgICAgICAgIHByb3RvY29sID0gJ2h0dHBzJzsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgY29uc3QgbGlua0RlZmF1bHREaXNwbGF5ID0gZW5kcG9pbnQucG9ydCA/IGAkeyBlbmRwb2ludC5wb3J0IH0vJHsgZW5kcG9pbnQucHJvdG9jb2wgfWAgOiBlbmRwb2ludC5wcm90b2NvbDsKCiAgICAgICAgICAgIC8vIElmIHRoZXJlJ3MgYW4gaW5ncmVzcyBhbmQgaXQgaGFzIGEgaG9zdG5hbWUsIHdlIHVzZSB0aGUgaG9zdG5hbWUgYWRkcmVzcyBpbnN0ZWFkCiAgICAgICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9yYW5jaGVyL2Rhc2hib2FyZC9pc3N1ZXMvODA4NwogICAgICAgICAgICBpZiAoZW5kcG9pbnQuaW5ncmVzc05hbWUgJiYgZW5kcG9pbnQuaG9zdG5hbWUpIHsKICAgICAgICAgICAgICBlbmRwb2ludC5saW5rID0gYCR7IHByb3RvY29sIH06Ly8keyBlbmRwb2ludC5ob3N0bmFtZSB9JHsgZW5kcG9pbnQucGF0aCB9YDsKICAgICAgICAgICAgICBlbmRwb2ludC5saW5rRGlzcGxheSA9IGVuZHBvaW50Lmxpbms7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoZW5kcG9pbnQuYWRkcmVzc2VzICYmIGVuZHBvaW50LmFkZHJlc3Nlcy5sZW5ndGgpIHsKICAgICAgICAgICAgICBlbmRwb2ludC5saW5rID0gYCR7IHByb3RvY29sIH06Ly8keyBlbmRwb2ludC5hZGRyZXNzZXNbMF0gfTokeyBlbmRwb2ludC5wb3J0IH1gOwogICAgICAgICAgICAgIGVuZHBvaW50LmxpbmtEaXNwbGF5ID0gbGlua0RlZmF1bHREaXNwbGF5OwogICAgICAgICAgICB9IGVsc2UgaWYgKGV4dGVybmFsSXApIHsKICAgICAgICAgICAgICBlbmRwb2ludC5saW5rID0gYCR7IHByb3RvY29sIH06Ly8keyBleHRlcm5hbElwIH06JHsgZW5kcG9pbnQucG9ydCB9YDsKICAgICAgICAgICAgICBlbmRwb2ludC5saW5rRGlzcGxheSA9IGxpbmtEZWZhdWx0RGlzcGxheTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBlbmRwb2ludC5kaXNwbGF5ID0gYFskeyB0aGlzLnQoJ3NlcnZpY2VzUGFnZS5hbnlOb2RlJykgfV06JHsgZW5kcG9pbnQucG9ydCB9YDsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CgogICAgICAgICAgcmV0dXJuIG91dDsKICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgIHJldHVybiB0aGlzLnZhbHVlWzBdOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIG51bGw7CiAgICB9CiAgfSwKfTsK"},{"version":3,"sources":["WorkloadDetailEndpoints.vue"],"names":[],"mappings":";AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"WorkloadDetailEndpoints.vue","sourceRoot":"node_modules/@rancher/shell/components/formatter","sourcesContent":["<script>\nimport { NODE } from '@shell/config/types';\nimport Tag from '@shell/components/Tag';\n\nexport default {\n  props: {\n    value: {\n      type:    [Array, String],\n      default: null,\n    },\n  },\n\n  components: { Tag },\n\n  computed: {\n    nodes() {\n      return this.$store.getters['cluster/all'](NODE);\n    },\n    // value may be JSON from \"field.cattle.io/publicEndpoints\" label\n    parsed() {\n      const nodes = this.nodes;\n      const nodeWithExternal = nodes.find((node) => !!node.externalIp) || {};\n      const externalIp = nodeWithExternal.externalIp;\n\n      if ( this.value && this.value.length ) {\n        let out ;\n\n        try {\n          out = JSON.parse(this.value);\n\n          out.forEach((endpoint) => {\n            let protocol = 'http';\n\n            if (endpoint.port === 443) {\n              protocol = 'https';\n            }\n\n            const linkDefaultDisplay = endpoint.port ? `${ endpoint.port }/${ endpoint.protocol }` : endpoint.protocol;\n\n            // If there's an ingress and it has a hostname, we use the hostname address instead\n            // https://github.com/rancher/dashboard/issues/8087\n            if (endpoint.ingressName && endpoint.hostname) {\n              endpoint.link = `${ protocol }://${ endpoint.hostname }${ endpoint.path }`;\n              endpoint.linkDisplay = endpoint.link;\n            } else if (endpoint.addresses && endpoint.addresses.length) {\n              endpoint.link = `${ protocol }://${ endpoint.addresses[0] }:${ endpoint.port }`;\n              endpoint.linkDisplay = linkDefaultDisplay;\n            } else if (externalIp) {\n              endpoint.link = `${ protocol }://${ externalIp }:${ endpoint.port }`;\n              endpoint.linkDisplay = linkDefaultDisplay;\n            } else {\n              endpoint.display = `[${ this.t('servicesPage.anyNode') }]:${ endpoint.port }`;\n            }\n          });\n\n          return out;\n        } catch (err) {\n          return this.value[0];\n        }\n      }\n\n      return null;\n    }\n  },\n};\n</script>\n\n<template>\n  <span>\n    <template v-for=\"endpoint in parsed\">\n      <Tag\n        v-if=\"endpoint.display\"\n        :key=\"endpoint.display\"\n        class=\"endpoint-tag\"\n      >{{ endpoint.display }}</Tag>\n      <a\n        v-else\n        :key=\"endpoint.link\"\n        class=\"endpoint-link\"\n        :href=\"endpoint.link\"\n        target=\"_blank\"\n        rel=\"nofollow noopener noreferrer\"\n      >{{ endpoint.linkDisplay }}</a>\n    </template>\n  </span>\n</template>\n\n<style lang=\"scss\" scoped>\n.endpoint-tag {\n  display: inline-block;\n}\n.endpoint-tag:not(:first-of-type) {\n  margin: 2px 4px 0 2px;\n}\n.endpoint-link:after {\n  content: ',\\a0';\n  display: inline-block;\n  color: var(--default-text);\n}\n.endpoint-link:last-of-type:after {\n  content: '';\n}\n\n</style>\n"]}]}