{"remainingRequest":"/home/ubuntu/suseconf/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ubuntu/suseconf/node_modules/@rancher/shell/chart/rancher-backup/S3.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/ubuntu/suseconf/node_modules/@rancher/shell/chart/rancher-backup/S3.vue","mtime":1725338146566},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js","mtime":1725271298942},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1725271300920}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IExhYmVsZWRJbnB1dCB9IGZyb20gJ0Bjb21wb25lbnRzL0Zvcm0vTGFiZWxlZElucHV0JzsKaW1wb3J0IHsgQ2hlY2tib3ggfSBmcm9tICdAY29tcG9uZW50cy9Gb3JtL0NoZWNrYm94JzsKaW1wb3J0IEZpbGVTZWxlY3RvciBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9mb3JtL0ZpbGVTZWxlY3Rvcic7CmltcG9ydCBSZXNvdXJjZUxhYmVsZWRTZWxlY3QgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvZm9ybS9SZXNvdXJjZUxhYmVsZWRTZWxlY3QnOwppbXBvcnQgeyBtYXBHZXR0ZXJzIH0gZnJvbSAndnVleCc7CmltcG9ydCB7IFNFQ1JFVCB9IGZyb20gJ0BzaGVsbC9jb25maWcvdHlwZXMnOwoKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIExhYmVsZWRJbnB1dCwKICAgIENoZWNrYm94LAogICAgRmlsZVNlbGVjdG9yLAogICAgUmVzb3VyY2VMYWJlbGVkU2VsZWN0LAogIH0sCgogIHByb3BzOiB7CiAgICB2YWx1ZTogewogICAgICB0eXBlOiAgICBPYmplY3QsCiAgICAgIGRlZmF1bHQ6ICgpID0+IHsKICAgICAgICByZXR1cm4ge307CiAgICAgIH0KICAgIH0sCiAgICBtb2RlOiB7CiAgICAgIHR5cGU6ICAgIFN0cmluZywKICAgICAgZGVmYXVsdDogJ2NyZWF0ZScKICAgIH0sCgogIH0sCgogIGRhdGEoKSB7CiAgICByZXR1cm4geyBTRUNSRVQgfTsKICB9LAoKICBtb3VudGVkKCkgewogICAgdGhpcy4kZW1pdCgndmFsaWQnLCB0aGlzLnZhbGlkKTsKICB9LAoKICBiZWZvcmVEZXN0cm95KCkgewogICAgdGhpcy4kZW1pdCgndmFsaWQnLCB0cnVlKTsKICB9LAoKICB3YXRjaDogewogICAgdmFsaWQoKSB7CiAgICAgIHRoaXMuJGVtaXQoJ3ZhbGlkJywgdGhpcy52YWxpZCk7CiAgICB9CiAgfSwKCiAgY29tcHV0ZWQ6IHsKICAgIGNyZWRlbnRpYWxTZWNyZXQ6IHsKICAgICAgZ2V0KCkgewogICAgICAgIGNvbnN0IHsgY3JlZGVudGlhbFNlY3JldE5hbWUsIGNyZWRlbnRpYWxTZWNyZXROYW1lc3BhY2UgfSA9IHRoaXMudmFsdWU7CgogICAgICAgIHJldHVybiB7IG1ldGFkYXRhOiB7IG5hbWU6IGNyZWRlbnRpYWxTZWNyZXROYW1lLCBuYW1lc3BhY2U6IGNyZWRlbnRpYWxTZWNyZXROYW1lc3BhY2UgfSB9OwogICAgICB9LAoKICAgICAgc2V0KG5ldSkgewogICAgICAgIGNvbnN0IHsgbmFtZSwgbmFtZXNwYWNlIH0gPSBuZXUubWV0YWRhdGE7CgogICAgICAgIHRoaXMuJHNldCh0aGlzLnZhbHVlLCAnY3JlZGVudGlhbFNlY3JldE5hbWUnLCBuYW1lKTsKICAgICAgICB0aGlzLiRzZXQodGhpcy52YWx1ZSwgJ2NyZWRlbnRpYWxTZWNyZXROYW1lc3BhY2UnLCBuYW1lc3BhY2UpOwogICAgICB9CiAgICB9LAogICAgdmFsaWQoKSB7CiAgICAgIHJldHVybiAhIXRoaXMudmFsdWUuZW5kcG9pbnQgJiYgISF0aGlzLnZhbHVlLmJ1Y2tldE5hbWU7CiAgICB9LAogICAgLi4ubWFwR2V0dGVycyh7IHQ6ICdpMThuL3QnIH0pCiAgfSwKCiAgbWV0aG9kczogewogICAgc2V0Q0EoY2EpIHsKICAgICAgdHJ5IHsKICAgICAgICBjb25zdCBlbmNvZGVkID0gYnRvYShjYSk7CgogICAgICAgIHRoaXMuJHNldCh0aGlzLnZhbHVlLCAnZW5kcG9pbnRDQScsIGVuY29kZWQpOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGUKICAgICAgICBjb25zb2xlLndhcm4oZSk7CiAgICAgIH0KICAgIH0sCiAgfSwKCiAgY3JlYXRlZCgpIHsKICAgIGNvbnN0IHsgY3JlZGVudGlhbFNlY3JldE5hbWUsIGNyZWRlbnRpYWxTZWNyZXROYW1lc3BhY2UgfSA9IHRoaXMudmFsdWU7CgogICAgaWYgKGNyZWRlbnRpYWxTZWNyZXROYW1lICYmICFjcmVkZW50aWFsU2VjcmV0TmFtZXNwYWNlKSB7CiAgICAgIHRoaXMudmFsdWUuY3JlZGVudGlhbFNlY3JldE5hbWUgPSAnJzsKICAgIH0KICB9LAp9Owo="},{"version":3,"sources":["S3.vue"],"names":[],"mappings":";AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"S3.vue","sourceRoot":"node_modules/@rancher/shell/chart/rancher-backup","sourcesContent":["<script>\nimport { LabeledInput } from '@components/Form/LabeledInput';\nimport { Checkbox } from '@components/Form/Checkbox';\nimport FileSelector from '@shell/components/form/FileSelector';\nimport ResourceLabeledSelect from '@shell/components/form/ResourceLabeledSelect';\nimport { mapGetters } from 'vuex';\nimport { SECRET } from '@shell/config/types';\n\nexport default {\n  components: {\n    LabeledInput,\n    Checkbox,\n    FileSelector,\n    ResourceLabeledSelect,\n  },\n\n  props: {\n    value: {\n      type:    Object,\n      default: () => {\n        return {};\n      }\n    },\n    mode: {\n      type:    String,\n      default: 'create'\n    },\n\n  },\n\n  data() {\n    return { SECRET };\n  },\n\n  mounted() {\n    this.$emit('valid', this.valid);\n  },\n\n  beforeDestroy() {\n    this.$emit('valid', true);\n  },\n\n  watch: {\n    valid() {\n      this.$emit('valid', this.valid);\n    }\n  },\n\n  computed: {\n    credentialSecret: {\n      get() {\n        const { credentialSecretName, credentialSecretNamespace } = this.value;\n\n        return { metadata: { name: credentialSecretName, namespace: credentialSecretNamespace } };\n      },\n\n      set(neu) {\n        const { name, namespace } = neu.metadata;\n\n        this.$set(this.value, 'credentialSecretName', name);\n        this.$set(this.value, 'credentialSecretNamespace', namespace);\n      }\n    },\n    valid() {\n      return !!this.value.endpoint && !!this.value.bucketName;\n    },\n    ...mapGetters({ t: 'i18n/t' })\n  },\n\n  methods: {\n    setCA(ca) {\n      try {\n        const encoded = btoa(ca);\n\n        this.$set(this.value, 'endpointCA', encoded);\n      } catch (e) {\n        // eslint-disable-next-line no-console\n        console.warn(e);\n      }\n    },\n  },\n\n  created() {\n    const { credentialSecretName, credentialSecretNamespace } = this.value;\n\n    if (credentialSecretName && !credentialSecretNamespace) {\n      this.value.credentialSecretName = '';\n    }\n  },\n};\n</script>\n\n<template>\n  <div>\n    <div class=\"row mb-10\">\n      <div class=\"col span-6\">\n        <ResourceLabeledSelect\n          v-model=\"credentialSecret\"\n          :get-option-label=\"opt=>opt.metadata.name || ''\"\n          option-key=\"id\"\n          :mode=\"mode\"\n          :label=\"t('backupRestoreOperator.s3.credentialSecretName')\"\n          :resource-type=\"SECRET\"\n        />\n      </div>\n      <div class=\"col span-6\">\n        <LabeledInput\n          v-model=\"value.bucketName\"\n          data-testid=\"S3-bucketName\"\n          :mode=\"mode\"\n          :label=\"t('backupRestoreOperator.s3.bucketName')\"\n          required\n        />\n      </div>\n    </div>\n    <div class=\"row mb-10\">\n      <div class=\"col span-6\">\n        <LabeledInput\n          v-model=\"value.region\"\n          :mode=\"mode\"\n          :label=\"t('backupRestoreOperator.s3.region')\"\n        />\n      </div>\n      <div class=\"col span-6\">\n        <LabeledInput\n          v-model=\"value.folder\"\n          :mode=\"mode\"\n          :label=\"t('backupRestoreOperator.s3.folder')\"\n        />\n      </div>\n    </div>\n    <div class=\"row mb-10\">\n      <div class=\"col span-6\">\n        <LabeledInput\n          v-model=\"value.endpoint\"\n          :mode=\"mode\"\n          :label=\"t('backupRestoreOperator.s3.endpoint')\"\n          data-testid=\"S3-endpoint\"\n          required\n        />\n        <Checkbox\n          v-model=\"value.insecureTLSSkipVerify\"\n          class=\"mt-10\"\n          :mode=\"mode\"\n          :label=\"t('backupRestoreOperator.s3.insecureTLSSkipVerify')\"\n        />\n      </div>\n      <div class=\"col span-6\">\n        <LabeledInput\n          v-model=\"value.endpointCA\"\n          :mode=\"mode\"\n          type=\"multiline\"\n          :label=\"t('backupRestoreOperator.s3.endpointCA.label')\"\n        />\n        <div class=\"ca-controls\">\n          <FileSelector\n            v-if=\"mode!=='view'\"\n            class=\"btn btn-sm role-primary mt-5\"\n            :mode=\"mode\"\n            :label=\"t('generic.readFromFile')\"\n            @selected=\"e=> setCA(e)\"\n          />\n          <div class=\"ca-tooltip\">\n            <i\n              v-clean-tooltip=\"t('backupRestoreOperator.s3.endpointCA.prompt')\"\n              class=\"icon icon-info\"\n            />\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<style lang=\"scss\" scoped>\n  .ca-controls {\n    display: flex;\n\n    .ca-tooltip {\n      flex: 1;\n      margin-top: 4px;\n      text-align: right;\n\n      > i {\n        font-size: 16px;\n      };\n    }\n  }\n</style>\n"]}]}