{"remainingRequest":"/home/ubuntu/susecon-2024-ext-demo/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/components/ResourceDetail/index.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/components/ResourceDetail/index.vue","mtime":1725271280091},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/babel-loader/lib/index.js","mtime":1725271298942},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1725271300920}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBDcmVhdGVFZGl0VmlldyBmcm9tICdAc2hlbGwvbWl4aW5zL2NyZWF0ZS1lZGl0LXZpZXcvaW1wbCc7CmltcG9ydCBMb2FkaW5nIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL0xvYWRpbmcnOwppbXBvcnQgUmVzb3VyY2VZYW1sIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL1Jlc291cmNlWWFtbCc7CmltcG9ydCB7CiAgX1ZJRVcsIF9FRElULCBfQ0xPTkUsIF9JTVBPUlQsIF9TVEFHRSwgX0NSRUFURSwKICBBUywgX1lBTUwsIF9ERVRBSUwsIF9DT05GSUcsIF9HUkFQSCwgUFJFVklFVywgTU9ERSwKfSBmcm9tICdAc2hlbGwvY29uZmlnL3F1ZXJ5LXBhcmFtcyc7CmltcG9ydCB7IEZMRUVULCBTQ0hFTUEgfSBmcm9tICdAc2hlbGwvY29uZmlnL3R5cGVzJzsKaW1wb3J0IHsgY3JlYXRlWWFtbCB9IGZyb20gJ0BzaGVsbC91dGlscy9jcmVhdGUteWFtbCc7CmltcG9ydCBNYXN0aGVhZCBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9SZXNvdXJjZURldGFpbC9NYXN0aGVhZCc7CmltcG9ydCBEZXRhaWxUb3AgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvRGV0YWlsVG9wJzsKaW1wb3J0IHsgY2xvbmUsIGRpZmYgfSBmcm9tICdAc2hlbGwvdXRpbHMvb2JqZWN0JzsKaW1wb3J0IEljb25NZXNzYWdlIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL0ljb25NZXNzYWdlJzsKaW1wb3J0IEZvcmNlRGlyZWN0ZWRUcmVlQ2hhcnQgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvZmxlZXQvRm9yY2VEaXJlY3RlZFRyZWVDaGFydCc7CmltcG9ydCB7IGNoZWNrU2NoZW1hc0ZvckZpbmRBbGxIYXNoIH0gZnJvbSAnQHNoZWxsL3V0aWxzL2F1dGgnOwoKZnVuY3Rpb24gbW9kZUZvcihyb3V0ZSkgewogIGlmICggcm91dGUucXVlcnk/Lm1vZGUgPT09IF9JTVBPUlQgKSB7CiAgICByZXR1cm4gX0lNUE9SVDsKICB9CgogIGlmICggcm91dGUucGFyYW1zPy5pZCApIHsKICAgIHJldHVybiByb3V0ZS5xdWVyeS5tb2RlIHx8IF9WSUVXOwogIH0gZWxzZSB7CiAgICByZXR1cm4gX0NSRUFURTsKICB9Cn0KCmFzeW5jIGZ1bmN0aW9uIGdldFlhbWwoc3RvcmUsIG1vZGVsKSB7CiAgbGV0IHlhbWw7CiAgY29uc3Qgb3B0ID0geyBoZWFkZXJzOiB7IGFjY2VwdDogJ2FwcGxpY2F0aW9uL3lhbWwnIH0gfTsKCiAgaWYgKCBtb2RlbC5oYXNMaW5rKCd2aWV3JykgKSB7CiAgICB5YW1sID0gKGF3YWl0IG1vZGVsLmZvbGxvd0xpbmsoJ3ZpZXcnLCBvcHQpKS5kYXRhOwogIH0KCiAgcmV0dXJuIG1vZGVsLmNsZWFuRm9yRG93bmxvYWQoeWFtbCk7Cn0KCmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBMb2FkaW5nLAogICAgRGV0YWlsVG9wLAogICAgRm9yY2VEaXJlY3RlZFRyZWVDaGFydCwKICAgIFJlc291cmNlWWFtbCwKICAgIE1hc3RoZWFkLAogICAgSWNvbk1lc3NhZ2UsCiAgfSwKCiAgbWl4aW5zOiBbQ3JlYXRlRWRpdFZpZXddLAoKICBwcm9wczogewogICAgc3RvcmVPdmVycmlkZTogewogICAgICB0eXBlOiAgICBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6IG51bGwsCiAgICB9LAoKICAgIHJlc291cmNlT3ZlcnJpZGU6IHsKICAgICAgdHlwZTogICAgU3RyaW5nLAogICAgICBkZWZhdWx0OiBudWxsLAogICAgfSwKCiAgICBwYXJlbnRSb3V0ZU92ZXJyaWRlOiB7CiAgICAgIHR5cGU6ICAgIFN0cmluZywKICAgICAgZGVmYXVsdDogbnVsbCwKICAgIH0sCgogICAgZmxleENvbnRlbnQ6IHsKICAgICAgdHlwZTogICAgQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UsCiAgICB9LAoKICAgIC8qKgogICAgICogSW5oZXJpdGVkIGdsb2JhbCBpZGVudGlmaWVyIHByZWZpeCBmb3IgdGVzdHMKICAgICAqIERlZmluZSBhIHRlcm0gYmFzZWQgb24gdGhlIHBhcmVudCBjb21wb25lbnQgdG8gYXZvaWQgY29uZmxpY3RzIG9uIG11bHRpcGxlIGNvbXBvbmVudHMKICAgICAqLwogICAgY29tcG9uZW50VGVzdGlkOiB7CiAgICAgIHR5cGU6ICAgIFN0cmluZywKICAgICAgZGVmYXVsdDogJ3Jlc291cmNlLWRldGFpbHMnCiAgICB9CiAgfSwKCiAgYXN5bmMgZmV0Y2goKSB7CiAgICBjb25zdCBzdG9yZSA9IHRoaXMuJHN0b3JlOwogICAgY29uc3Qgcm91dGUgPSB0aGlzLiRyb3V0ZTsKICAgIGNvbnN0IHBhcmFtcyA9IHJvdXRlLnBhcmFtczsKICAgIGxldCByZXNvdXJjZSA9IHRoaXMucmVzb3VyY2VPdmVycmlkZSB8fCBwYXJhbXMucmVzb3VyY2U7CgogICAgY29uc3QgaW5TdG9yZSA9IHRoaXMuc3RvcmVPdmVycmlkZSB8fCBzdG9yZS5nZXR0ZXJzWydjdXJyZW50U3RvcmUnXShyZXNvdXJjZSk7CiAgICBjb25zdCByZWFsTW9kZSA9IHRoaXMucmVhbE1vZGU7CgogICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHByZWZlci1jb25zdAogICAgbGV0IHsgbmFtZXNwYWNlLCBpZCB9ID0gcGFyYW1zOwoKICAgIC8vIFRoZXJlIGFyZSA2ICJyZWFsIiBtb2RlcyB0aGF0IGNhbiBiZSBwdXQgaW50byB0aGUgcXVlcnkgc3RyaW5nCiAgICAvLyBUaGVzZSBhcmUgbWFwcGVkIGRvd24gdG8gdGhlIDMgcmVndWxhciBwYWdlICJtb2RlInMgdGhhdCBjcmVhdGUtZWRpdC12aWV3IGNvbXBvbmVudHMKICAgIC8vIGtub3cgYWJvdXQ6ICB2aWV3LCBlZGl0LCBjcmVhdGUgKHN0YWdlLCBpbXBvcnQgYW5kIGNsb25lIGJlY29tZSAiY3JlYXRlIikKICAgIGNvbnN0IG1vZGUgPSAoW19DTE9ORSwgX0lNUE9SVCwgX1NUQUdFXS5pbmNsdWRlcyhyZWFsTW9kZSkgPyBfQ1JFQVRFIDogcmVhbE1vZGUpOwoKICAgIGNvbnN0IGdldEdyYXBoQ29uZmlnID0gc3RvcmUuZ2V0dGVyc1sndHlwZS1tYXAvaGFzR3JhcGgnXShyZXNvdXJjZSk7CiAgICBjb25zdCBoYXNHcmFwaCA9ICEhZ2V0R3JhcGhDb25maWc7CiAgICBjb25zdCBoYXNDdXN0b21EZXRhaWwgPSBzdG9yZS5nZXR0ZXJzWyd0eXBlLW1hcC9oYXNDdXN0b21EZXRhaWwnXShyZXNvdXJjZSwgaWQpOwogICAgY29uc3QgaGFzQ3VzdG9tRWRpdCA9IHN0b3JlLmdldHRlcnNbJ3R5cGUtbWFwL2hhc0N1c3RvbUVkaXQnXShyZXNvdXJjZSwgaWQpOwoKICAgIGNvbnN0IHNjaGVtYXMgPSBzdG9yZS5nZXR0ZXJzW2AkeyBpblN0b3JlIH0vYWxsYF0oU0NIRU1BKTsKCiAgICAvLyBBcyBkZXRlcm1pbmVzIHdoYXQgY29tcG9uZW50IHdpbGwgYmUgcmVuZGVyZWQKICAgIGNvbnN0IHJlcXVlc3RlZCA9IHJvdXRlLnF1ZXJ5W0FTXTsKICAgIGxldCBhczsKICAgIGxldCBub3RGb3VuZCA9IGZhbHNlOwoKICAgIGlmICggbW9kZSA9PT0gX1ZJRVcgJiYgaGFzQ3VzdG9tRGV0YWlsICYmICghcmVxdWVzdGVkIHx8IHJlcXVlc3RlZCA9PT0gX0RFVEFJTCkgKSB7CiAgICAgIGFzID0gX0RFVEFJTDsKICAgIH0gZWxzZSBpZiAoIG1vZGUgPT09IF9WSUVXICYmIGhhc0dyYXBoICYmIHJlcXVlc3RlZCA9PT0gX0dSQVBIKSB7CiAgICAgIGFzID0gX0dSQVBIOwogICAgfSBlbHNlIGlmICggaGFzQ3VzdG9tRWRpdCAmJiAoIXJlcXVlc3RlZCB8fCByZXF1ZXN0ZWQgPT09IF9DT05GSUcpICkgewogICAgICBhcyA9IF9DT05GSUc7CiAgICB9IGVsc2UgewogICAgICBhcyA9IF9ZQU1MOwogICAgfQoKICAgIHRoaXMuYXMgPSBhczsKCiAgICBjb25zdCBvcHRpb25zID0gc3RvcmUuZ2V0dGVyc1tgdHlwZS1tYXAvb3B0aW9uc0ZvcmBdKHJlc291cmNlKTsKCiAgICB0aGlzLnNob3dNYXN0aGVhZCA9IFtfQ1JFQVRFLCBfRURJVF0uaW5jbHVkZXMobW9kZSkgPyBvcHRpb25zLnJlc291cmNlRWRpdE1hc3RoZWFkIDogdHJ1ZTsKICAgIGNvbnN0IGNhblZpZXdZYW1sID0gb3B0aW9ucy5jYW5ZYW1sOwoKICAgIGlmICggb3B0aW9ucy5yZXNvdXJjZSApIHsKICAgICAgcmVzb3VyY2UgPSBvcHRpb25zLnJlc291cmNlOwogICAgfQoKICAgIGNvbnN0IHNjaGVtYSA9IHN0b3JlLmdldHRlcnNbYCR7IGluU3RvcmUgfS9zY2hlbWFGb3JgXShyZXNvdXJjZSk7CiAgICBsZXQgbW9kZWwsIGluaXRpYWxNb2RlbCwgbGl2ZU1vZGVsLCB5YW1sOwoKICAgIGlmICggcmVhbE1vZGUgPT09IF9DUkVBVEUgfHwgcmVhbE1vZGUgPT09IF9JTVBPUlQgKSB7CiAgICAgIGlmICggIW5hbWVzcGFjZSApIHsKICAgICAgICBuYW1lc3BhY2UgPSBzdG9yZS5nZXR0ZXJzWydkZWZhdWx0TmFtZXNwYWNlJ107CiAgICAgIH0KCiAgICAgIGNvbnN0IGRhdGEgPSB7IHR5cGU6IHJlc291cmNlIH07CgogICAgICBpZiAoIHNjaGVtYT8uYXR0cmlidXRlcz8ubmFtZXNwYWNlZCApIHsKICAgICAgICBkYXRhLm1ldGFkYXRhID0geyBuYW1lc3BhY2UgfTsKICAgICAgfQoKICAgICAgbGl2ZU1vZGVsID0gYXdhaXQgc3RvcmUuZGlzcGF0Y2goYCR7IGluU3RvcmUgfS9jcmVhdGVgLCBkYXRhKTsKICAgICAgaW5pdGlhbE1vZGVsID0gYXdhaXQgc3RvcmUuZGlzcGF0Y2goYCR7IGluU3RvcmUgfS9jbG9uZWAsIHsgcmVzb3VyY2U6IGxpdmVNb2RlbCB9KTsKICAgICAgbW9kZWwgPSBhd2FpdCBzdG9yZS5kaXNwYXRjaChgJHsgaW5TdG9yZSB9L2Nsb25lYCwgeyByZXNvdXJjZTogbGl2ZU1vZGVsIH0pOwoKICAgICAgaWYgKG1vZGVsLmZvcmNlWWFtbCA9PT0gdHJ1ZSkgewogICAgICAgIGFzID0gX1lBTUw7CiAgICAgICAgdGhpcy5hcyA9IGFzOwogICAgICB9CgogICAgICBpZiAoIGFzID09PSBfWUFNTCApIHsKICAgICAgICB5YW1sID0gY3JlYXRlWWFtbChzY2hlbWFzLCByZXNvdXJjZSwgZGF0YSk7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIGlmICggYXMgPT09IF9HUkFQSCApIHsKICAgICAgICBjb25zdCBncmFwaFNjaGVtYSA9IGF3YWl0IGNoZWNrU2NoZW1hc0ZvckZpbmRBbGxIYXNoKHsKICAgICAgICAgIGNsdXN0ZXI6IHsKICAgICAgICAgICAgaW5TdG9yZVR5cGU6ICdtYW5hZ2VtZW50JywKICAgICAgICAgICAgdHlwZTogICAgICAgIEZMRUVULkNMVVNURVIKICAgICAgICAgIH0sCiAgICAgICAgICBidW5kbGU6IHsKICAgICAgICAgICAgaW5TdG9yZVR5cGU6ICdtYW5hZ2VtZW50JywKICAgICAgICAgICAgdHlwZTogICAgICAgIEZMRUVULkJVTkRMRQogICAgICAgICAgfSwKCiAgICAgICAgICBidW5kbGVEZXBsb3ltZW50OiB7CiAgICAgICAgICAgIGluU3RvcmVUeXBlOiAnbWFuYWdlbWVudCcsCiAgICAgICAgICAgIHR5cGU6ICAgICAgICBGTEVFVC5CVU5ETEVfREVQTE9ZTUVOVAogICAgICAgICAgfQoKICAgICAgICB9LCB0aGlzLiRzdG9yZSk7CgogICAgICAgIHRoaXMuY2FuVmlld0NoYXJ0ID0gZ3JhcGhTY2hlbWEuY2x1c3RlciAmJiBncmFwaFNjaGVtYS5idW5kbGUgJiYgZ3JhcGhTY2hlbWEuYnVuZGxlRGVwbG95bWVudDsKICAgICAgfQoKICAgICAgbGV0IGZxaWQgPSBpZDsKCiAgICAgIGlmICggc2NoZW1hLmF0dHJpYnV0ZXM/Lm5hbWVzcGFjZWQgJiYgbmFtZXNwYWNlICkgewogICAgICAgIGZxaWQgPSBgJHsgbmFtZXNwYWNlIH0vJHsgZnFpZCB9YDsKICAgICAgfQoKICAgICAgdHJ5IHsKICAgICAgICBsaXZlTW9kZWwgPSBhd2FpdCBzdG9yZS5kaXNwYXRjaChgJHsgaW5TdG9yZSB9L2ZpbmRgLCB7CiAgICAgICAgICB0eXBlOiByZXNvdXJjZSwKICAgICAgICAgIGlkOiAgIGZxaWQsCiAgICAgICAgICBvcHQ6ICB7IHdhdGNoOiB0cnVlIH0KICAgICAgICB9KTsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIGlmIChlLnN0YXR1cyA9PT0gNDA0IHx8IGUuc3RhdHVzID09PSA0MDMpIHsKICAgICAgICAgIHN0b3JlLmRpc3BhdGNoKCdsb2FkaW5nRXJyb3InLCBuZXcgRXJyb3IodGhpcy50KCduYXYuZmFpbFdoYWxlLnJlc291cmNlSWROb3RGb3VuZCcsIHsgcmVzb3VyY2UsIGZxaWQgfSwgdHJ1ZSkpKTsKICAgICAgICB9CiAgICAgICAgbGl2ZU1vZGVsID0ge307CiAgICAgICAgbm90Rm91bmQgPSBmcWlkOwogICAgICB9CgogICAgICBpZiAocmVhbE1vZGUgPT09IF9WSUVXKSB7CiAgICAgICAgbW9kZWwgPSBsaXZlTW9kZWw7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbW9kZWwgPSBhd2FpdCBzdG9yZS5kaXNwYXRjaChgJHsgaW5TdG9yZSB9L2Nsb25lYCwgeyByZXNvdXJjZTogbGl2ZU1vZGVsIH0pOwogICAgICB9CgogICAgICBpbml0aWFsTW9kZWwgPSBhd2FpdCBzdG9yZS5kaXNwYXRjaChgJHsgaW5TdG9yZSB9L2Nsb25lYCwgeyByZXNvdXJjZTogbGl2ZU1vZGVsIH0pOwoKICAgICAgaWYgKCBhcyA9PT0gX1lBTUwgKSB7CiAgICAgICAgeWFtbCA9IGF3YWl0IGdldFlhbWwodGhpcy4kc3RvcmUsIGxpdmVNb2RlbCk7CiAgICAgIH0KCiAgICAgIGlmICggYXMgPT09IF9HUkFQSCApIHsKICAgICAgICB0aGlzLmNoYXJ0RGF0YSA9IGxpdmVNb2RlbDsKICAgICAgfQoKICAgICAgaWYgKCBbX0NMT05FLCBfSU1QT1JULCBfU1RBR0VdLmluY2x1ZGVzKHJlYWxNb2RlKSApIHsKICAgICAgICBtb2RlbC5jbGVhbkZvck5ldygpOwogICAgICAgIHlhbWwgPSBtb2RlbC5jbGVhbllhbWwoeWFtbCwgcmVhbE1vZGUpOwogICAgICB9CiAgICB9CgogICAgLy8gRW5zdXJlIGNvbW1vbiBwcm9wZXJ0aWVzIGV4aXN0cwogICAgbW9kZWwgPSBhd2FpdCBzdG9yZS5kaXNwYXRjaChgJHsgaW5TdG9yZSB9L2NsZWFuRm9yRGV0YWlsYCwgbW9kZWwpOwoKICAgIGNvbnN0IG91dCA9IHsKICAgICAgaGFzR3JhcGgsCiAgICAgIGdldEdyYXBoQ29uZmlnLAogICAgICBoYXNDdXN0b21EZXRhaWwsCiAgICAgIGhhc0N1c3RvbUVkaXQsCiAgICAgIGNhblZpZXdZYW1sLAogICAgICByZXNvdXJjZSwKICAgICAgYXMsCiAgICAgIHlhbWwsCiAgICAgIGluaXRpYWxNb2RlbCwKICAgICAgbGl2ZU1vZGVsLAogICAgICBtb2RlLAogICAgICB2YWx1ZTogbW9kZWwsCiAgICAgIG5vdEZvdW5kLAogICAgfTsKCiAgICBmb3IgKCBjb25zdCBrZXkgaW4gb3V0ICkgewogICAgICB0aGlzW2tleV0gPSBvdXRba2V5XTsKICAgIH0KCiAgICBpZiAoIHRoaXMubW9kZSA9PT0gX0NSRUFURSApIHsKICAgICAgdGhpcy52YWx1ZS5hcHBseURlZmF1bHRzKHRoaXMsIHJlYWxNb2RlKTsKICAgIH0KICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjaGFydERhdGE6ICAgICAgIG51bGwsCiAgICAgIHJlc291cmNlU3VidHlwZTogbnVsbCwKCiAgICAgIC8vIFNldCBieSBmZXRjaAogICAgICBoYXNHcmFwaDogICAgICAgIG51bGwsCiAgICAgIGhhc0N1c3RvbURldGFpbDogbnVsbCwKICAgICAgaGFzQ3VzdG9tRWRpdDogICBudWxsLAogICAgICByZXNvdXJjZTogICAgICAgIG51bGwsCiAgICAgIGFzWWFtbDogICAgICAgICAgbnVsbCwKICAgICAgeWFtbDogICAgICAgICAgICBudWxsLAogICAgICBsaXZlTW9kZWw6ICAgICAgIG51bGwsCiAgICAgIGluaXRpYWxNb2RlbDogICAgbnVsbCwKICAgICAgbW9kZTogICAgICAgICAgICBudWxsLAogICAgICBhczogICAgICAgICAgICAgIG51bGwsCiAgICAgIHZhbHVlOiAgICAgICAgICAgbnVsbCwKICAgICAgbW9kZWw6ICAgICAgICAgICBudWxsLAogICAgICBub3RGb3VuZDogICAgICAgIG51bGwsCiAgICAgIGNhblZpZXdDaGFydDogICAgdHJ1ZSwKICAgIH07CiAgfSwKCiAgY29tcHV0ZWQ6IHsKICAgIHJlYWxNb2RlKCkgewogICAgICAvLyBUaGVyZSBhcmUgNSAicmVhbCIgbW9kZXMgdGhhdCB5b3UgY2FuIHN0YXJ0IGluOiB2aWV3LCBlZGl0LCBjcmVhdGUsIHN0YWdlLCBjbG9uZQogICAgICBjb25zdCByZWFsTW9kZSA9IG1vZGVGb3IodGhpcy4kcm91dGUpOwoKICAgICAgcmV0dXJuIHJlYWxNb2RlOwogICAgfSwKCiAgICBpc1ZpZXcoKSB7CiAgICAgIHJldHVybiB0aGlzLm1vZGUgPT09IF9WSUVXOwogICAgfSwKCiAgICBpc1lhbWwoKSB7CiAgICAgIHJldHVybiB0aGlzLmFzID09PSBfWUFNTDsKICAgIH0sCgogICAgaXNEZXRhaWwoKSB7CiAgICAgIHJldHVybiB0aGlzLmFzID09PSBfREVUQUlMOwogICAgfSwKCiAgICBpc0dyYXBoKCkgewogICAgICByZXR1cm4gdGhpcy5hcyA9PT0gX0dSQVBIOwogICAgfSwKCiAgICBvZmZlclByZXZpZXcoKSB7CiAgICAgIHJldHVybiB0aGlzLmFzID09PSBfWUFNTCAmJiBbX0VESVQsIF9DTE9ORSwgX0lNUE9SVCwgX1NUQUdFXS5pbmNsdWRlcyh0aGlzLm1vZGUpOwogICAgfSwKCiAgICBzaG93Q29tcG9uZW50KCkgewogICAgICBzd2l0Y2ggKCB0aGlzLmFzICkgewogICAgICBjYXNlIF9ERVRBSUw6IHJldHVybiB0aGlzLmRldGFpbENvbXBvbmVudDsKICAgICAgY2FzZSBfQ09ORklHOiByZXR1cm4gdGhpcy5lZGl0Q29tcG9uZW50OwogICAgICB9CgogICAgICByZXR1cm4gbnVsbDsKICAgIH0sCiAgfSwKCiAgd2F0Y2g6IHsKICAgICckcm91dGUucXVlcnknKGluTmV1LCBpbk9sZCkgewogICAgICBjb25zdCBuZXUgPSBjbG9uZShpbk5ldSk7CiAgICAgIGNvbnN0IG9sZCA9IGNsb25lKGluT2xkKTsKCiAgICAgIGRlbGV0ZSBuZXVbUFJFVklFV107CiAgICAgIGRlbGV0ZSBvbGRbUFJFVklFV107CgogICAgICBpZiAoICF0aGlzLmlzVmlldyApIHsKICAgICAgICBkZWxldGUgbmV1W0FTXTsKICAgICAgICBkZWxldGUgb2xkW0FTXTsKICAgICAgfQoKICAgICAgY29uc3QgcXVlcnlEaWZmID0gT2JqZWN0LmtleXMoZGlmZihuZXUsIG9sZCkpOwoKICAgICAgaWYgKCBxdWVyeURpZmYuaW5jbHVkZXMoTU9ERSkgfHwgcXVlcnlEaWZmLmluY2x1ZGVzKEFTKSkgewogICAgICAgIHRoaXMuJGZldGNoKCk7CiAgICAgIH0KICAgIH0sCgogICAgLy8gQXV0byByZWZyZXNoIFlBTUwgd2hlbiB0aGUgbW9kZWwgY2hhbmdlcwogICAgYXN5bmMgJ3ZhbHVlLm1ldGFkYXRhLnJlc291cmNlVmVyc2lvbicoYSwgYikgewogICAgICBpZiAoIHRoaXMubW9kZSA9PT0gX1ZJRVcgJiYgdGhpcy5hcyA9PT0gX1lBTUwgJiYgYSAmJiBiICYmIGEgIT09IGIpIHsKICAgICAgICB0aGlzLnlhbWwgPSBhd2FpdCBnZXRZYW1sKHRoaXMuJHN0b3JlLCB0aGlzLmxpdmVNb2RlbCk7CiAgICAgIH0KICAgIH0KICB9LAoKICBjcmVhdGVkKCkgewogICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHByZWZlci1jb25zdAogICAgY29uc3QgaWQgPSB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQ7CiAgICBjb25zdCByZXNvdXJjZSA9IHRoaXMucmVzb3VyY2VPdmVycmlkZSB8fCB0aGlzLiRyb3V0ZS5wYXJhbXMucmVzb3VyY2U7CiAgICBjb25zdCBvcHRpb25zID0gdGhpcy4kc3RvcmUuZ2V0dGVyc1tgdHlwZS1tYXAvb3B0aW9uc0ZvcmBdKHJlc291cmNlKTsKCiAgICBjb25zdCBkZXRhaWxSZXNvdXJjZSA9IG9wdGlvbnMucmVzb3VyY2VEZXRhaWwgfHwgb3B0aW9ucy5yZXNvdXJjZSB8fCByZXNvdXJjZTsKICAgIGNvbnN0IGVkaXRSZXNvdXJjZSA9IG9wdGlvbnMucmVzb3VyY2VFZGl0IHx8IG9wdGlvbnMucmVzb3VyY2UgfHwgcmVzb3VyY2U7CgogICAgLy8gRklYTUU6IFRoZXNlIGFyZW4ndCByaWdodC4uLiBzaWduYXR1cmUgaXMgKHJhd1R5cGUsIHN1YlR5cGUpLi4gbm90IChyYXdUeXBlLCByZXNvdXJjZUlkKQogICAgLy8gUmVtb3ZlIGlkPyBIb3cgZG9lcyBzdWJ0eXBlIGdldCBpbiAoY2x1c3Rlci9ub2RlKQogICAgdGhpcy5kZXRhaWxDb21wb25lbnQgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzWyd0eXBlLW1hcC9pbXBvcnREZXRhaWwnXShkZXRhaWxSZXNvdXJjZSwgaWQpOwogICAgdGhpcy5lZGl0Q29tcG9uZW50ID0gdGhpcy4kc3RvcmUuZ2V0dGVyc1sndHlwZS1tYXAvaW1wb3J0RWRpdCddKGVkaXRSZXNvdXJjZSwgaWQpOwogIH0sCgogIG1ldGhvZHM6IHsKICAgIHNldFN1YnR5cGUoc3VidHlwZSkgewogICAgICB0aGlzLnJlc291cmNlU3VidHlwZSA9IHN1YnR5cGU7CiAgICB9LAoKICAgIGtleUFjdGlvbihhY3QpIHsKICAgICAgY29uc3QgbSA9IHRoaXMubGl2ZU1vZGVsOwoKICAgICAgaWYgKCBtPy5bYWN0XSApIHsKICAgICAgICBtW2FjdF0oKTsKICAgICAgfQogICAgfSwKICB9Cn07Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"node_modules/@rancher/shell/components/ResourceDetail","sourcesContent":["<script>\nimport CreateEditView from '@shell/mixins/create-edit-view/impl';\nimport Loading from '@shell/components/Loading';\nimport ResourceYaml from '@shell/components/ResourceYaml';\nimport {\n  _VIEW, _EDIT, _CLONE, _IMPORT, _STAGE, _CREATE,\n  AS, _YAML, _DETAIL, _CONFIG, _GRAPH, PREVIEW, MODE,\n} from '@shell/config/query-params';\nimport { FLEET, SCHEMA } from '@shell/config/types';\nimport { createYaml } from '@shell/utils/create-yaml';\nimport Masthead from '@shell/components/ResourceDetail/Masthead';\nimport DetailTop from '@shell/components/DetailTop';\nimport { clone, diff } from '@shell/utils/object';\nimport IconMessage from '@shell/components/IconMessage';\nimport ForceDirectedTreeChart from '@shell/components/fleet/ForceDirectedTreeChart';\nimport { checkSchemasForFindAllHash } from '@shell/utils/auth';\n\nfunction modeFor(route) {\n  if ( route.query?.mode === _IMPORT ) {\n    return _IMPORT;\n  }\n\n  if ( route.params?.id ) {\n    return route.query.mode || _VIEW;\n  } else {\n    return _CREATE;\n  }\n}\n\nasync function getYaml(store, model) {\n  let yaml;\n  const opt = { headers: { accept: 'application/yaml' } };\n\n  if ( model.hasLink('view') ) {\n    yaml = (await model.followLink('view', opt)).data;\n  }\n\n  return model.cleanForDownload(yaml);\n}\n\nexport default {\n  components: {\n    Loading,\n    DetailTop,\n    ForceDirectedTreeChart,\n    ResourceYaml,\n    Masthead,\n    IconMessage,\n  },\n\n  mixins: [CreateEditView],\n\n  props: {\n    storeOverride: {\n      type:    String,\n      default: null,\n    },\n\n    resourceOverride: {\n      type:    String,\n      default: null,\n    },\n\n    parentRouteOverride: {\n      type:    String,\n      default: null,\n    },\n\n    flexContent: {\n      type:    Boolean,\n      default: false,\n    },\n\n    /**\n     * Inherited global identifier prefix for tests\n     * Define a term based on the parent component to avoid conflicts on multiple components\n     */\n    componentTestid: {\n      type:    String,\n      default: 'resource-details'\n    }\n  },\n\n  async fetch() {\n    const store = this.$store;\n    const route = this.$route;\n    const params = route.params;\n    let resource = this.resourceOverride || params.resource;\n\n    const inStore = this.storeOverride || store.getters['currentStore'](resource);\n    const realMode = this.realMode;\n\n    // eslint-disable-next-line prefer-const\n    let { namespace, id } = params;\n\n    // There are 6 \"real\" modes that can be put into the query string\n    // These are mapped down to the 3 regular page \"mode\"s that create-edit-view components\n    // know about:  view, edit, create (stage, import and clone become \"create\")\n    const mode = ([_CLONE, _IMPORT, _STAGE].includes(realMode) ? _CREATE : realMode);\n\n    const getGraphConfig = store.getters['type-map/hasGraph'](resource);\n    const hasGraph = !!getGraphConfig;\n    const hasCustomDetail = store.getters['type-map/hasCustomDetail'](resource, id);\n    const hasCustomEdit = store.getters['type-map/hasCustomEdit'](resource, id);\n\n    const schemas = store.getters[`${ inStore }/all`](SCHEMA);\n\n    // As determines what component will be rendered\n    const requested = route.query[AS];\n    let as;\n    let notFound = false;\n\n    if ( mode === _VIEW && hasCustomDetail && (!requested || requested === _DETAIL) ) {\n      as = _DETAIL;\n    } else if ( mode === _VIEW && hasGraph && requested === _GRAPH) {\n      as = _GRAPH;\n    } else if ( hasCustomEdit && (!requested || requested === _CONFIG) ) {\n      as = _CONFIG;\n    } else {\n      as = _YAML;\n    }\n\n    this.as = as;\n\n    const options = store.getters[`type-map/optionsFor`](resource);\n\n    this.showMasthead = [_CREATE, _EDIT].includes(mode) ? options.resourceEditMasthead : true;\n    const canViewYaml = options.canYaml;\n\n    if ( options.resource ) {\n      resource = options.resource;\n    }\n\n    const schema = store.getters[`${ inStore }/schemaFor`](resource);\n    let model, initialModel, liveModel, yaml;\n\n    if ( realMode === _CREATE || realMode === _IMPORT ) {\n      if ( !namespace ) {\n        namespace = store.getters['defaultNamespace'];\n      }\n\n      const data = { type: resource };\n\n      if ( schema?.attributes?.namespaced ) {\n        data.metadata = { namespace };\n      }\n\n      liveModel = await store.dispatch(`${ inStore }/create`, data);\n      initialModel = await store.dispatch(`${ inStore }/clone`, { resource: liveModel });\n      model = await store.dispatch(`${ inStore }/clone`, { resource: liveModel });\n\n      if (model.forceYaml === true) {\n        as = _YAML;\n        this.as = as;\n      }\n\n      if ( as === _YAML ) {\n        yaml = createYaml(schemas, resource, data);\n      }\n    } else {\n      if ( as === _GRAPH ) {\n        const graphSchema = await checkSchemasForFindAllHash({\n          cluster: {\n            inStoreType: 'management',\n            type:        FLEET.CLUSTER\n          },\n          bundle: {\n            inStoreType: 'management',\n            type:        FLEET.BUNDLE\n          },\n\n          bundleDeployment: {\n            inStoreType: 'management',\n            type:        FLEET.BUNDLE_DEPLOYMENT\n          }\n\n        }, this.$store);\n\n        this.canViewChart = graphSchema.cluster && graphSchema.bundle && graphSchema.bundleDeployment;\n      }\n\n      let fqid = id;\n\n      if ( schema.attributes?.namespaced && namespace ) {\n        fqid = `${ namespace }/${ fqid }`;\n      }\n\n      try {\n        liveModel = await store.dispatch(`${ inStore }/find`, {\n          type: resource,\n          id:   fqid,\n          opt:  { watch: true }\n        });\n      } catch (e) {\n        if (e.status === 404 || e.status === 403) {\n          store.dispatch('loadingError', new Error(this.t('nav.failWhale.resourceIdNotFound', { resource, fqid }, true)));\n        }\n        liveModel = {};\n        notFound = fqid;\n      }\n\n      if (realMode === _VIEW) {\n        model = liveModel;\n      } else {\n        model = await store.dispatch(`${ inStore }/clone`, { resource: liveModel });\n      }\n\n      initialModel = await store.dispatch(`${ inStore }/clone`, { resource: liveModel });\n\n      if ( as === _YAML ) {\n        yaml = await getYaml(this.$store, liveModel);\n      }\n\n      if ( as === _GRAPH ) {\n        this.chartData = liveModel;\n      }\n\n      if ( [_CLONE, _IMPORT, _STAGE].includes(realMode) ) {\n        model.cleanForNew();\n        yaml = model.cleanYaml(yaml, realMode);\n      }\n    }\n\n    // Ensure common properties exists\n    model = await store.dispatch(`${ inStore }/cleanForDetail`, model);\n\n    const out = {\n      hasGraph,\n      getGraphConfig,\n      hasCustomDetail,\n      hasCustomEdit,\n      canViewYaml,\n      resource,\n      as,\n      yaml,\n      initialModel,\n      liveModel,\n      mode,\n      value: model,\n      notFound,\n    };\n\n    for ( const key in out ) {\n      this[key] = out[key];\n    }\n\n    if ( this.mode === _CREATE ) {\n      this.value.applyDefaults(this, realMode);\n    }\n  },\n  data() {\n    return {\n      chartData:       null,\n      resourceSubtype: null,\n\n      // Set by fetch\n      hasGraph:        null,\n      hasCustomDetail: null,\n      hasCustomEdit:   null,\n      resource:        null,\n      asYaml:          null,\n      yaml:            null,\n      liveModel:       null,\n      initialModel:    null,\n      mode:            null,\n      as:              null,\n      value:           null,\n      model:           null,\n      notFound:        null,\n      canViewChart:    true,\n    };\n  },\n\n  computed: {\n    realMode() {\n      // There are 5 \"real\" modes that you can start in: view, edit, create, stage, clone\n      const realMode = modeFor(this.$route);\n\n      return realMode;\n    },\n\n    isView() {\n      return this.mode === _VIEW;\n    },\n\n    isYaml() {\n      return this.as === _YAML;\n    },\n\n    isDetail() {\n      return this.as === _DETAIL;\n    },\n\n    isGraph() {\n      return this.as === _GRAPH;\n    },\n\n    offerPreview() {\n      return this.as === _YAML && [_EDIT, _CLONE, _IMPORT, _STAGE].includes(this.mode);\n    },\n\n    showComponent() {\n      switch ( this.as ) {\n      case _DETAIL: return this.detailComponent;\n      case _CONFIG: return this.editComponent;\n      }\n\n      return null;\n    },\n  },\n\n  watch: {\n    '$route.query'(inNeu, inOld) {\n      const neu = clone(inNeu);\n      const old = clone(inOld);\n\n      delete neu[PREVIEW];\n      delete old[PREVIEW];\n\n      if ( !this.isView ) {\n        delete neu[AS];\n        delete old[AS];\n      }\n\n      const queryDiff = Object.keys(diff(neu, old));\n\n      if ( queryDiff.includes(MODE) || queryDiff.includes(AS)) {\n        this.$fetch();\n      }\n    },\n\n    // Auto refresh YAML when the model changes\n    async 'value.metadata.resourceVersion'(a, b) {\n      if ( this.mode === _VIEW && this.as === _YAML && a && b && a !== b) {\n        this.yaml = await getYaml(this.$store, this.liveModel);\n      }\n    }\n  },\n\n  created() {\n    // eslint-disable-next-line prefer-const\n    const id = this.$route.params.id;\n    const resource = this.resourceOverride || this.$route.params.resource;\n    const options = this.$store.getters[`type-map/optionsFor`](resource);\n\n    const detailResource = options.resourceDetail || options.resource || resource;\n    const editResource = options.resourceEdit || options.resource || resource;\n\n    // FIXME: These aren't right... signature is (rawType, subType).. not (rawType, resourceId)\n    // Remove id? How does subtype get in (cluster/node)\n    this.detailComponent = this.$store.getters['type-map/importDetail'](detailResource, id);\n    this.editComponent = this.$store.getters['type-map/importEdit'](editResource, id);\n  },\n\n  methods: {\n    setSubtype(subtype) {\n      this.resourceSubtype = subtype;\n    },\n\n    keyAction(act) {\n      const m = this.liveModel;\n\n      if ( m?.[act] ) {\n        m[act]();\n      }\n    },\n  }\n};\n</script>\n\n<template>\n  <Loading v-if=\"$fetchState.pending || notFound\" />\n  <div v-else>\n    <Masthead\n      v-if=\"showMasthead\"\n      :resource=\"resource\"\n      :value=\"liveModel\"\n      :mode=\"mode\"\n      :real-mode=\"realMode\"\n      :as=\"as\"\n      :has-graph=\"hasGraph\"\n      :has-detail=\"hasCustomDetail\"\n      :has-edit=\"hasCustomEdit\"\n      :can-view-yaml=\"canViewYaml\"\n      :resource-subtype=\"resourceSubtype\"\n      :parent-route-override=\"parentRouteOverride\"\n      :store-override=\"storeOverride\"\n    >\n      <DetailTop\n        v-if=\"isView && isDetail\"\n        :value=\"liveModel\"\n      />\n    </Masthead>\n\n    <ForceDirectedTreeChart\n      v-if=\"isGraph && canViewChart\"\n      :data=\"chartData\"\n      :fdc-config=\"getGraphConfig\"\n    />\n\n    <ResourceYaml\n      v-else-if=\"isYaml\"\n      ref=\"resourceyaml\"\n      v-model=\"value\"\n      :mode=\"mode\"\n      :yaml=\"yaml\"\n      :offer-preview=\"offerPreview\"\n      :done-route=\"doneRoute\"\n      :done-override=\"value.doneOverride\"\n      :class=\"{'flex-content': flexContent}\"\n    />\n\n    <component\n      :is=\"showComponent\"\n      v-else\n      ref=\"comp\"\n      v-model=\"value\"\n      v-bind=\"_data\"\n      :done-params=\"doneParams\"\n      :done-route=\"doneRoute\"\n      :mode=\"mode\"\n      :initial-value=\"initialModel\"\n      :live-value=\"liveModel\"\n      :real-mode=\"realMode\"\n      :class=\"{'flex-content': flexContent}\"\n      @set-subtype=\"setSubtype\"\n    />\n\n    <button\n      v-if=\"isView\"\n      v-shortkey.once=\"['shift','d']\"\n      :data-testid=\"componentTestid + '-detail'\"\n      class=\"hide\"\n      @shortkey=\"keyAction('goToDetail')\"\n    />\n    <button\n      v-if=\"isView\"\n      v-shortkey.once=\"['shift','c']\"\n      :data-testid=\"componentTestid + '-config'\"\n      class=\"hide\"\n      @shortkey=\"keyAction('goToViewConfig')\"\n    />\n    <button\n      v-if=\"isView\"\n      v-shortkey.once=\"['shift','y']\"\n      :data-testid=\"componentTestid + '-yaml'\"\n      class=\"hide\"\n      @shortkey=\"keyAction('goToViewYaml')\"\n    />\n    <button\n      v-if=\"isView\"\n      v-shortkey.once=\"['shift','e']\"\n      :data-testid=\"componentTestid + '-edit'\"\n      class=\"hide\"\n      @shortkey=\"keyAction('goToEdit')\"\n    />\n  </div>\n</template>\n\n<style lang='scss' scoped>\n.flex-content {\n  display: flex;\n  flex-direction: column;\n  flex-grow: 1;\n}\n</style>\n"]}]}