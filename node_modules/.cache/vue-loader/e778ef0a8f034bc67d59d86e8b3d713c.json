{"remainingRequest":"/home/ubuntu/suseconf/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ubuntu/suseconf/node_modules/@rancher/shell/edit/auth/azuread.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/ubuntu/suseconf/node_modules/@rancher/shell/edit/auth/azuread.vue","mtime":1725338146566},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js","mtime":1725271298942},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1725271300920}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgaXNFcXVhbCBmcm9tICdsb2Rhc2gvaXNFcXVhbCc7DQppbXBvcnQgTG9hZGluZyBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9Mb2FkaW5nJzsNCmltcG9ydCBDcmVhdGVFZGl0VmlldyBmcm9tICdAc2hlbGwvbWl4aW5zL2NyZWF0ZS1lZGl0LXZpZXcnOw0KaW1wb3J0IEZvcm1WYWxpZGF0aW9uIGZyb20gJ0BzaGVsbC9taXhpbnMvZm9ybS12YWxpZGF0aW9uJzsNCmltcG9ydCBDcnVSZXNvdXJjZSBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9DcnVSZXNvdXJjZSc7DQppbXBvcnQgSW5mb0JveCBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9JbmZvQm94JzsNCmltcG9ydCB7IFJhZGlvR3JvdXAgfSBmcm9tICdAY29tcG9uZW50cy9Gb3JtL1JhZGlvJzsNCmltcG9ydCB7IExhYmVsZWRJbnB1dCB9IGZyb20gJ0Bjb21wb25lbnRzL0Zvcm0vTGFiZWxlZElucHV0JzsNCmltcG9ydCB7IENoZWNrYm94IH0gZnJvbSAnQGNvbXBvbmVudHMvRm9ybS9DaGVja2JveCc7DQppbXBvcnQgQXV0aEJhbm5lciBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9hdXRoL0F1dGhCYW5uZXInOw0KaW1wb3J0IENvcHlUb0NsaXBib2FyZFRleHQgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvQ29weVRvQ2xpcGJvYXJkVGV4dC52dWUnOw0KaW1wb3J0IEFsbG93ZWRQcmluY2lwYWxzIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL2F1dGgvQWxsb3dlZFByaW5jaXBhbHMnOw0KaW1wb3J0IEF1dGhDb25maWcgZnJvbSAnQHNoZWxsL21peGlucy9hdXRoLWNvbmZpZyc7DQppbXBvcnQgeyBBWlVSRV9NSUdSQVRFRCB9IGZyb20gJ0BzaGVsbC9jb25maWcvbGFiZWxzLWFubm90YXRpb25zJzsNCmltcG9ydCB7IGdldCB9IGZyb20gJ0BzaGVsbC91dGlscy9vYmplY3QnOw0KaW1wb3J0IEF1dGhQcm92aWRlcldhcm5pbmdCYW5uZXJzIGZyb20gJ0BzaGVsbC9lZGl0L2F1dGgvQXV0aFByb3ZpZGVyV2FybmluZ0Jhbm5lcnMnOw0KaW1wb3J0IGZvcm1SdWxlc0dlbmVyYXRvciBmcm9tICdAc2hlbGwvdXRpbHMvdmFsaWRhdG9ycy9mb3JtUnVsZXMvaW5kZXgnOw0KDQpjb25zdCBURU5BTlRfSURfVE9LRU4gPSAnX19bW1RFTkFOVF9JRF1dX18nOw0KDQovLyBBenVyZSBBRCBHcmFwaCB3aWxsIGJlIGRlcHJlY2F0ZWQgZW5kIG9mIDIwMjIsIHNlZTogaHR0cHM6Ly9kb2NzLm1pY3Jvc29mdC5jb20vZW4tdXMvZ3JhcGgvbWlncmF0ZS1henVyZS1hZC1ncmFwaC1vdmVydmlldw0KZXhwb3J0IGNvbnN0IE9MRF9FTkRQT0lOVFMgPSB7DQogIHN0YW5kYXJkOiB7DQogICAgZ3JhcGhFbmRwb2ludDogJ2h0dHBzOi8vZ3JhcGgud2luZG93cy5uZXQvJywNCiAgICB0b2tlbkVuZHBvaW50OiBgaHR0cHM6Ly9sb2dpbi5taWNyb3NvZnRvbmxpbmUuY29tLyR7IFRFTkFOVF9JRF9UT0tFTiB9L29hdXRoMi90b2tlbmAsDQogICAgYXV0aEVuZHBvaW50OiAgYGh0dHBzOi8vbG9naW4ubWljcm9zb2Z0b25saW5lLmNvbS8keyBURU5BTlRfSURfVE9LRU4gfS9vYXV0aDIvYXV0aG9yaXplYA0KICB9LA0KICBjaGluYTogew0KICAgIGdyYXBoRW5kcG9pbnQ6ICdodHRwczovL2dyYXBoLmNoaW5hY2xvdWRhcGkuY24vJywNCiAgICB0b2tlbkVuZHBvaW50OiBgaHR0cHM6Ly9sb2dpbi5jaGluYWNsb3VkYXBpLmNuLyR7IFRFTkFOVF9JRF9UT0tFTiB9L29hdXRoMi90b2tlbmAsDQogICAgYXV0aEVuZHBvaW50OiAgYGh0dHBzOi8vbG9naW4uY2hpbmFjbG91ZGFwaS5jbi8keyBURU5BTlRfSURfVE9LRU4gfS9vYXV0aDIvYXV0aG9yaXplYA0KICB9DQp9Ow0KDQpjb25zdCBFTkRQT0lOVF9NQVBQSU5HID0gew0KICBzdGFuZGFyZDogew0KICAgIGVuZHBvaW50OiAgICAgICdodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vJywNCiAgICBncmFwaEVuZHBvaW50OiAnaHR0cHM6Ly9ncmFwaC5taWNyb3NvZnQuY29tJywNCiAgICB0b2tlbkVuZHBvaW50OiBgaHR0cHM6Ly9sb2dpbi5taWNyb3NvZnRvbmxpbmUuY29tLyR7IFRFTkFOVF9JRF9UT0tFTiB9L29hdXRoMi92Mi4wL3Rva2VuYCwNCiAgICBhdXRoRW5kcG9pbnQ6ICBgaHR0cHM6Ly9sb2dpbi5taWNyb3NvZnRvbmxpbmUuY29tLyR7IFRFTkFOVF9JRF9UT0tFTiB9L29hdXRoMi92Mi4wL2F1dGhvcml6ZWANCiAgfSwNCiAgY2hpbmE6IHsNCiAgICBlbmRwb2ludDogICAgICAnaHR0cHM6Ly9sb2dpbi5wYXJ0bmVyLm1pY3Jvc29mdG9ubGluZS5jbi8nLA0KICAgIGdyYXBoRW5kcG9pbnQ6ICdodHRwczovL21pY3Jvc29mdGdyYXBoLmNoaW5hY2xvdWRhcGkuY24nLA0KICAgIHRva2VuRW5kcG9pbnQ6IGBodHRwczovL2xvZ2luLnBhcnRuZXIubWljcm9zb2Z0b25saW5lLmNuLyR7IFRFTkFOVF9JRF9UT0tFTiB9L29hdXRoMi92Mi4wL3Rva2VuYCwNCiAgICBhdXRoRW5kcG9pbnQ6ICBgaHR0cHM6Ly9sb2dpbi5wYXJ0bmVyLm1pY3Jvc29mdG9ubGluZS5jbi8keyBURU5BTlRfSURfVE9LRU4gfS9vYXV0aDIvdjIuMC9hdXRob3JpemVgDQogIH0sDQogIGN1c3RvbTogew0KICAgIGVuZHBvaW50OiAgICAgICdodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vJywNCiAgICBncmFwaEVuZHBvaW50OiAnJywNCiAgICB0b2tlbkVuZHBvaW50OiAnJywNCiAgICBhdXRoRW5kcG9pbnQ6ICAnJw0KICB9DQp9Ow0KDQpleHBvcnQgZGVmYXVsdCB7DQogIGNvbXBvbmVudHM6IHsNCiAgICBMb2FkaW5nLA0KICAgIENydVJlc291cmNlLA0KICAgIEluZm9Cb3gsDQogICAgUmFkaW9Hcm91cCwNCiAgICBMYWJlbGVkSW5wdXQsDQogICAgQ2hlY2tib3gsDQogICAgQ29weVRvQ2xpcGJvYXJkVGV4dCwNCiAgICBBbGxvd2VkUHJpbmNpcGFscywNCiAgICBBdXRoQmFubmVyLA0KICAgIEF1dGhQcm92aWRlcldhcm5pbmdCYW5uZXJzDQogIH0sDQoNCiAgbWl4aW5zOiBbQ3JlYXRlRWRpdFZpZXcsIEF1dGhDb25maWcsIEZvcm1WYWxpZGF0aW9uXSwNCg0KICBhc3luYyBmZXRjaCgpIHsNCiAgICBhd2FpdCB0aGlzLnJlbG9hZE1vZGVsKCk7DQoNCiAgICBpZiAoIHRoaXMudmFsdWU/LmdyYXBoRW5kcG9pbnQgKSB7DQogICAgICB0aGlzLnNldEluaXRpYWxFbmRwb2ludCh0aGlzLnZhbHVlLmdyYXBoRW5kcG9pbnQpOw0KICAgIH0NCiAgfSwNCg0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBpc0dyb3VwTWVtYmVyc2hpcEZpbHRlckVuYWJsZWQ6ICEhdGhpcy52YWx1ZS5ncm91cE1lbWJlcnNoaXBGaWx0ZXIsDQogICAgICBlbmRwb2ludDogICAgICAgICAgICAgICAgICAgICAgICdzdGFuZGFyZCcsDQogICAgICBvbGRFbmRwb2ludDogICAgICAgICAgICAgICAgICAgIGZhbHNlLA0KDQogICAgICAvLyBTdG9yaW5nIHRoZSBhcHBsaWNhdGlvblNlY3JldCBpcyBuZWNlc3NhcnkgYmVjYXVzZSBub3JtYW4gZG9lc24ndCBzdXBwb3J0IHJldHVybmluZyBzZWNyZXRzIGFuZCB3aGVuIHdlDQogICAgICAvLyBvdmVycmlkZSB0aGUgc3RldmUgYXV0aGNvbmZpZyB3aXRoIGEgbm9ybWFuIGNvbmZpZyB0aGUgYXBwbGljYXRpb25TZWNyZXQgaXMgbG9zdA0KICAgICAgYXBwbGljYXRpb25TZWNyZXQ6IHRoaXMudmFsdWUuYXBwbGljYXRpb25TZWNyZXQsDQogICAgICBmdkZvcm1SdWxlU2V0czogICAgWw0KICAgICAgICB7IHBhdGg6ICd0ZW5hbnRJZCcsIHJ1bGVzOiBbJ3RlbmFudElkUmVxdWlyZWQnXSB9LA0KICAgICAgICB7IHBhdGg6ICdhcHBsaWNhdGlvbklkJywgcnVsZXM6IFsnYXBwbGljYXRpb25JZFJlcXVpcmVkJ10gfSwNCiAgICAgICAgeyBwYXRoOiAnYXBwbGljYXRpb25TZWNyZXQnLCBydWxlczogWydhcHBsaWNhdGlvblNlY3JldFJlcXVpcmVkJ10gfSwNCiAgICAgICAgeyBwYXRoOiAnZW5kcG9pbnQnLCBydWxlczogWydlbmRwb2ludFJlcXVpcmVkJywgJ2VuZHBvaW50TXVzdEJlVVJMJ10gfSwNCiAgICAgICAgeyBwYXRoOiAnZ3JhcGhFbmRwb2ludCcsIHJ1bGVzOiBbJ2dyYXBoRW5kcG9pbnRSZXF1aXJlZCcsICdncmFwaEVuZHBvaW50TXVzdEJlVVJMJ10gfSwNCiAgICAgICAgeyBwYXRoOiAndG9rZW5FbmRwb2ludCcsIHJ1bGVzOiBbJ3Rva2VuRW5kcG9pbnRSZXF1aXJlZCcsICd0b2tlbkVuZHBvaW50TXVzdEJlVVJMJ10gfSwNCiAgICAgICAgeyBwYXRoOiAnYXV0aEVuZHBvaW50JywgcnVsZXM6IFsnYXV0aEVuZHBvaW50UmVxdWlyZWQnLCAnYXV0aEVuZHBvaW50TXVzdEJlVVJMJ10gfSwNCiAgICAgIF0NCiAgICB9Ow0KICB9LA0KDQogIGNvbXB1dGVkOiB7DQogICAgLy8gQ2Fubm90IHBhc3MgdGhpcy5tb2RlbCBhcyBhIHJvb3RPYmplY3QgYmVjYXVzZSBpdCBpcyB1bmRlZmluZWQgYXQgdGhhdCBwb2ludCwgc28gaGFkIHRvIHVzZSBhIHdvcmthcm91bmQNCiAgICBmdkV4dHJhUnVsZXMoKSB7DQogICAgICByZXR1cm4gew0KICAgICAgICB0ZW5hbnRJZFJlcXVpcmVkOiAgICAgICAgICB0aGlzLm1vZGVsRmllbGRSZXF1aXJlZCgndGVuYW50SWQnLCAnYXV0aENvbmZpZy5henVyZWFkLnRlbmFudElkLmxhYmVsJyksDQogICAgICAgIGFwcGxpY2F0aW9uSWRSZXF1aXJlZDogICAgIHRoaXMubW9kZWxGaWVsZFJlcXVpcmVkKCdhcHBsaWNhdGlvbklkJywgJ2F1dGhDb25maWcuYXp1cmVhZC5hcHBsaWNhdGlvbklkLmxhYmVsJyksDQogICAgICAgIGFwcGxpY2F0aW9uU2VjcmV0UmVxdWlyZWQ6IHRoaXMuYXBwbGljYXRpb25TZWNyZXRSZXF1aXJlZCgpLA0KICAgICAgICBlbmRwb2ludFJlcXVpcmVkOiAgICAgICAgICB0aGlzLm1vZGVsRmllbGRSZXF1aXJlZCgnZW5kcG9pbnQnLCAnYXV0aENvbmZpZy5henVyZWFkLmVuZHBvaW50LmxhYmVsJyksDQogICAgICAgIGVuZHBvaW50TXVzdEJlVVJMOiAgICAgICAgIHRoaXMubW9kZWxGaWVsZFVSTCgnZW5kcG9pbnQnKSwNCiAgICAgICAgZ3JhcGhFbmRwb2ludFJlcXVpcmVkOiAgICAgdGhpcy5tb2RlbEZpZWxkUmVxdWlyZWQoJ2dyYXBoRW5kcG9pbnQnLCAnYXV0aENvbmZpZy5henVyZWFkLmdyYXBoRW5kcG9pbnQubGFiZWwnKSwNCiAgICAgICAgZ3JhcGhFbmRwb2ludE11c3RCZVVSTDogICAgdGhpcy5tb2RlbEZpZWxkVVJMKCdncmFwaEVuZHBvaW50JyksDQogICAgICAgIHRva2VuRW5kcG9pbnRSZXF1aXJlZDogICAgIHRoaXMubW9kZWxGaWVsZFJlcXVpcmVkKCd0b2tlbkVuZHBvaW50JywgJ2F1dGhDb25maWcuYXp1cmVhZC50b2tlbkVuZHBvaW50LmxhYmVsJyksDQogICAgICAgIHRva2VuRW5kcG9pbnRNdXN0QmVVUkw6ICAgIHRoaXMubW9kZWxGaWVsZFVSTCgndG9rZW5FbmRwb2ludCcpLA0KICAgICAgICBhdXRoRW5kcG9pbnRSZXF1aXJlZDogICAgICB0aGlzLm1vZGVsRmllbGRSZXF1aXJlZCgnYXV0aEVuZHBvaW50JywgJ2F1dGhDb25maWcuYXp1cmVhZC5hdXRoRW5kcG9pbnQubGFiZWwnKSwNCiAgICAgICAgYXV0aEVuZHBvaW50TXVzdEJlVVJMOiAgICAgdGhpcy5tb2RlbEZpZWxkVVJMKCdhdXRoRW5kcG9pbnQnKQ0KICAgICAgfTsNCiAgICB9LA0KDQogICAgdEFyZ3MoKSB7DQogICAgICByZXR1cm4gew0KICAgICAgICBiYXNlVXJsOiAgdGhpcy5iYXNlVXJsLA0KICAgICAgICBwcm92aWRlcjogdGhpcy5kaXNwbGF5TmFtZSwNCiAgICAgICAgdXNlcm5hbWU6IHRoaXMucHJpbmNpcGFsLmxvZ2luTmFtZSB8fCB0aGlzLnByaW5jaXBhbC5uYW1lDQogICAgICB9Ow0KICAgIH0sDQoNCiAgICByZXBseVVybCgpIHsNCiAgICAgIHJldHVybiBgJHsgdGhpcy5zZXJ2ZXJVcmwgfS92ZXJpZnktYXV0aC1henVyZWA7DQogICAgfSwNCg0KICAgIHRlbmFudElkKCkgew0KICAgICAgcmV0dXJuIHRoaXMubW9kZWw/LnRlbmFudElkOw0KICAgIH0sDQoNCiAgICB0b1NhdmUoKSB7DQogICAgICBjb25zdCBhcHBsaWNhdGlvblNlY3JldCA9IHRoaXMuZ2V0TmV3QXBwbGljYXRpb25TZWNyZXQoKTsNCg0KICAgICAgaWYgKGFwcGxpY2F0aW9uU2VjcmV0KSB7DQogICAgICAgIHRoaXMuJHNldCh0aGlzLm1vZGVsLCAnYXBwbGljYXRpb25TZWNyZXQnLCBhcHBsaWNhdGlvblNlY3JldCk7DQogICAgICB9DQoNCiAgICAgIHJldHVybiB7DQogICAgICAgIGNvbmZpZzogew0KICAgICAgICAgIC4uLnRoaXMubW9kZWwsDQogICAgICAgICAgZW5hYmxlZDogICAgIHRydWUsDQogICAgICAgICAgZGVzY3JpcHRpb246ICdFbmFibGUgQXp1cmVBRCcNCiAgICAgICAgfQ0KICAgICAgfTsNCiAgICB9LA0KDQogICAgbmVlZHNVcGRhdGUoKSB7DQogICAgICByZXR1cm4gKA0KICAgICAgICBnZXQodGhpcy5tb2RlbCwgYGFubm90YXRpb25zLiIkeyBBWlVSRV9NSUdSQVRFRCB9ImApICE9PSAndHJ1ZScNCiAgICAgICk7DQogICAgfSwNCg0KICAgIG1vZGFsQ29uZmlnKCkgew0KICAgICAgcmV0dXJuIHsNCiAgICAgICAgYXBwbHlBY3Rpb246IHRoaXMudXBkYXRlRW5kcG9pbnQsDQogICAgICAgIGFwcGx5TW9kZTogICAndXBkYXRlJywNCiAgICAgICAgdGl0bGU6ICAgICAgIHRoaXMudCgnYXV0aENvbmZpZy5henVyZWFkLnVwZGF0ZUVuZHBvaW50Lm1vZGFsLnRpdGxlJyksDQogICAgICAgIGJvZHk6ICAgICAgICB0aGlzLnQoJ2F1dGhDb25maWcuYXp1cmVhZC51cGRhdGVFbmRwb2ludC5tb2RhbC5ib2R5JywgbnVsbCwgeyByYXc6IHRydWUgfSkNCiAgICAgIH07DQogICAgfSwNCiAgICBlZGl0TWVtYmVyQ29uZmlnKCkgew0KICAgICAgcmV0dXJuIHRoaXMubW9kZWwuZW5hYmxlZCAmJiAhdGhpcy5pc0VuYWJsaW5nICYmICF0aGlzLmVkaXRDb25maWc7DQogICAgfQ0KICB9LA0KDQogIHdhdGNoOiB7DQogICAgZW5kcG9pbnQodmFsdWUpIHsNCiAgICAgIHRoaXMuc2V0RW5kcG9pbnRzKHZhbHVlKTsNCiAgICB9LA0KDQogICAgdGVuYW50SWQoKSB7DQogICAgICBpZiAodGhpcy5lbmRwb2ludCAhPT0gJ2N1c3RvbScpIHsNCiAgICAgICAgdGhpcy5zZXRFbmRwb2ludHModGhpcy5lbmRwb2ludCk7DQogICAgICB9DQogICAgfSwNCg0KICAgIG1vZGVsOiB7DQogICAgICBkZWVwOiB0cnVlLA0KICAgICAgaGFuZGxlcigpIHsNCiAgICAgICAgdGhpcy5tb2RlbC5hY2Nlc3NNb2RlID0gdGhpcy5tb2RlbC5hY2Nlc3NNb2RlIHx8ICd1bnJlc3RyaWN0ZWQnOw0KICAgICAgICB0aGlzLm1vZGVsLnJhbmNoZXJVcmwgPSB0aGlzLm1vZGVsLnJhbmNoZXJVcmwgfHwgdGhpcy5yZXBseVVybDsNCg0KICAgICAgICBpZiAodGhpcy5tb2RlbC5hcHBsaWNhdGlvblNlY3JldCkgew0KICAgICAgICAgIHRoaXMuJHNldCh0aGlzLCAnYXBwbGljYXRpb25TZWNyZXQnLCB0aGlzLm1vZGVsLmFwcGxpY2F0aW9uU2VjcmV0KTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0sDQoNCiAgfSwNCg0KICBtZXRob2RzOiB7DQogICAgdG9nZ2xlR3JvdXBNZW1iZXJzaGlwRmlsdGVyKGVuYWJsZWQpIHsNCiAgICAgIC8vIHJlc2V0IHRoZSB2YWx1ZSBvZiBncm91cE1lbWJlcnNoaXBGaWx0ZXIgd2hlbiBpdHMgZmlsdGVyIGdldHMgZGlzYWJsZWQNCiAgICAgIGlmICghZW5hYmxlZCkgew0KICAgICAgICB0aGlzLm1vZGVsLmdyb3VwTWVtYmVyc2hpcEZpbHRlciA9ICcnOw0KICAgICAgfQ0KICAgIH0sDQoNCiAgICBzZXRFbmRwb2ludHMoZW5kcG9pbnQpIHsNCiAgICAgIGlmICh0aGlzLmVkaXRDb25maWcgfHwgIXRoaXMubW9kZWwuZW5hYmxlZCkgew0KICAgICAgICBjb25zdCBlbmRwb2ludFR5cGUgPSB0aGlzLm9sZEVuZHBvaW50ICYmIGVuZHBvaW50ICE9PSAnY3VzdG9tJyA/IE9MRF9FTkRQT0lOVFMgOiBFTkRQT0lOVF9NQVBQSU5HOw0KDQogICAgICAgIE9iamVjdC5rZXlzKGVuZHBvaW50VHlwZVtlbmRwb2ludF0pLmZvckVhY2goKGtleSkgPT4gew0KICAgICAgICAgIHRoaXMuJHNldCgNCiAgICAgICAgICAgIHRoaXMubW9kZWwsDQogICAgICAgICAgICBrZXksDQogICAgICAgICAgICBlbmRwb2ludFR5cGVbZW5kcG9pbnRdW2tleV0ucmVwbGFjZSgNCiAgICAgICAgICAgICAgVEVOQU5UX0lEX1RPS0VOLA0KICAgICAgICAgICAgICB0aGlzLm1vZGVsLnRlbmFudElkDQogICAgICAgICAgICApDQogICAgICAgICAgKTsNCiAgICAgICAgfSk7DQogICAgICB9DQogICAgfSwNCg0KICAgIHNldEluaXRpYWxFbmRwb2ludChlbmRwb2ludCkgew0KICAgICAgY29uc3QgbmV3RW5kcG9pbnRLZXkgPSB0aGlzLmRldGVybWluZUVuZHBvaW50S2V5VHlwZShFTkRQT0lOVF9NQVBQSU5HKTsNCiAgICAgIGNvbnN0IG9sZEVuZHBvaW50S2V5ID0gT2JqZWN0LmtleXMoT0xEX0VORFBPSU5UUykuZmluZCgoa2V5KSA9PiBPTERfRU5EUE9JTlRTW2tleV0uZ3JhcGhFbmRwb2ludCA9PT0gZW5kcG9pbnQpOw0KDQogICAgICBpZiAoIG9sZEVuZHBvaW50S2V5ICkgew0KICAgICAgICB0aGlzLmVuZHBvaW50ID0gdGhpcy5kZXRlcm1pbmVFbmRwb2ludEtleVR5cGUoT0xEX0VORFBPSU5UUyk7DQogICAgICAgIHRoaXMub2xkRW5kcG9pbnQgPSB0cnVlOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGhpcy5lbmRwb2ludCA9IG5ld0VuZHBvaW50S2V5Ow0KICAgICAgfQ0KICAgIH0sDQoNCiAgICBkZXRlcm1pbmVFbmRwb2ludEtleVR5cGUoZW5kcG9pbnRUeXBlcykgew0KICAgICAgbGV0IG91dCA9ICdjdXN0b20nOw0KDQogICAgICBmb3IgKCBjb25zdCBbZW5kcG9pbnRLZXksIGVuZHBvaW50S2V5VmFsdWVzXSBvZiBPYmplY3QuZW50cmllcyhlbmRwb2ludFR5cGVzKSApIHsNCiAgICAgICAgY29uc3QgbWFwcGVkVmFsdWVzID0gT2JqZWN0LnZhbHVlcyhlbmRwb2ludEtleVZhbHVlcykubWFwKChlbmRwb2ludCkgPT4gZW5kcG9pbnQucmVwbGFjZShURU5BTlRfSURfVE9LRU4sIHRoaXMubW9kZWw/LnRlbmFudElkKSk7DQogICAgICAgIGNvbnN0IHZhbHVlc1RvQ2hlY2sgPSBPYmplY3Qua2V5cyhlbmRwb2ludEtleVZhbHVlcykubWFwKChrZXkpID0+IHRoaXMudmFsdWVba2V5XSk7DQoNCiAgICAgICAgaWYgKCBpc0VxdWFsKG1hcHBlZFZhbHVlcywgdmFsdWVzVG9DaGVjaykgKSB7DQogICAgICAgICAgb3V0ID0gZW5kcG9pbnRLZXk7DQogICAgICAgIH0NCiAgICAgIH0NCg0KICAgICAgcmV0dXJuIG91dDsNCiAgICB9LA0KDQogICAgZ2V0TmV3QXBwbGljYXRpb25TZWNyZXQoKSB7DQogICAgICBjb25zdCBhcHBsaWNhdGlvblNlY3JldE9ySWQgPQ0KICAgICAgICB0aGlzLm1vZGVsLmFwcGxpY2F0aW9uU2VjcmV0IHx8IHRoaXMuYXBwbGljYXRpb25TZWNyZXQ7DQoNCiAgICAgIC8vIFRoZSBhcHBsaWNhdGlvbiBzZWNyZXQgY29tZXMgYmFjayBhcyBhbiBJRCBmcm9tIHN0ZXZlIEFQSSBhbmQgdGhpcyBpbmRpY2F0ZXMNCiAgICAgIC8vIHRoYXQgdGhlIGN1cnJlbnQgYXBwbGljYXRpb24gc2VjcmV0IGlzbid0IG5ldw0KICAgICAgaWYgKGFwcGxpY2F0aW9uU2VjcmV0T3JJZC5pbmNsdWRlcygnY2F0dGxlLWdsb2JhbC1kYXRhJykpIHsNCiAgICAgICAgcmV0dXJuIG51bGw7DQogICAgICB9DQoNCiAgICAgIHJldHVybiBhcHBsaWNhdGlvblNlY3JldE9ySWQ7DQogICAgfSwNCg0KICAgIHByb21wdFVwZGF0ZSgpIHsNCiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdtYW5hZ2VtZW50L3Byb21wdE1vZGFsJywgew0KICAgICAgICBjb21wb25lbnQ6ICAgICAgJ0dlbmVyaWNQcm9tcHQnLA0KICAgICAgICBjb21wb25lbnRQcm9wczogdGhpcy5tb2RhbENvbmZpZw0KICAgICAgfSk7DQogICAgfSwNCg0KICAgIC8vIHVwZGF0ZSB0aGUgYXV0aGNvbmZpZyB0byBjaGFuZ2UgdGhlIGF6dXJlIGFkIGdyYXBoIGVuZHBvaW50IHRvIHRoZSBtaWNyb3NvZnQgZ3JhcGggZW5kcG9pbnQNCiAgICAvLyBvbmx5IHJlbGV2YW50IGZvciBzZXR1cHMgdXBncmFkaW5nIHRvIDIuNi42IHdpdGggYXp1cmVhZCBhdXRoIGFscmVhZHkgZW5hYmxlZA0KICAgIHVwZGF0ZUVuZHBvaW50KGJ0bkNCKSB7DQogICAgICBpZiAodGhpcy5uZWVkc1VwZGF0ZSkgew0KICAgICAgICB0aGlzLm1vZGVsDQogICAgICAgICAgLmRvQWN0aW9uKCd1cGdyYWRlJykNCiAgICAgICAgICAudGhlbigoKSA9PiB7DQogICAgICAgICAgICB0aGlzLnJlbG9hZE1vZGVsKCk7DQogICAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnZ3Jvd2wvc3VjY2VzcycsIHsgbWVzc2FnZTogJ0dyYXBoIGVuZHBvaW50IHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5LicgfSk7DQogICAgICAgICAgICBidG5DQih0cnVlKTsNCiAgICAgICAgICB9KQ0KICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7DQogICAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnZ3Jvd2wvZnJvbUVycm9yJywgew0KICAgICAgICAgICAgICB0aXRsZTogJ0Vycm9yIHVwZGF0aW5nIGdyYXBoIGVuZHBvaW50JywNCiAgICAgICAgICAgICAgZXJyDQogICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIGJ0bkNCKGZhbHNlKTsNCiAgICAgICAgICB9KTsNCiAgICAgIH0NCiAgICB9LA0KICAgIG1vZGVsRmllbGRSZXF1aXJlZChwYXRoLCBsYWJlbCkgew0KICAgICAgcmV0dXJuICgpID0+IHsNCiAgICAgICAgcmV0dXJuICF0aGlzLm1vZGVsW3BhdGhdID8gYCR7IHRoaXMudCgndmFsaWRhdGlvbi5yZXF1aXJlZCcsIHsga2V5OiB0aGlzLnQobGFiZWwpIH0pIH1gIDogdW5kZWZpbmVkOw0KICAgICAgfTsNCiAgICB9LA0KICAgIGFwcGxpY2F0aW9uU2VjcmV0UmVxdWlyZWQoKSB7DQogICAgICByZXR1cm4gKCkgPT4gew0KICAgICAgICByZXR1cm4gIXRoaXMuZWRpdE1lbWJlckNvbmZpZyAmJiAhdGhpcy5tb2RlbC5hcHBsaWNhdGlvblNlY3JldCA/IGAkeyB0aGlzLnQoJ3ZhbGlkYXRpb24ucmVxdWlyZWQnLCB7IGtleTogdGhpcy50KCdhdXRoQ29uZmlnLmF6dXJlYWQuYXBwbGljYXRpb25TZWNyZXQubGFiZWwnKSB9KSB9YCA6IHVuZGVmaW5lZDsNCiAgICAgIH07DQogICAgfSwNCiAgICBtb2RlbEZpZWxkVVJMKHBhdGgpIHsNCiAgICAgIHJldHVybiAoKSA9PiB7DQogICAgICAgIGNvbnN0IHJ1bGUgPSBmb3JtUnVsZXNHZW5lcmF0b3IodGhpcy4kc3RvcmUuZ2V0dGVyc1snaTE4bi90J10sIHt9KS51cmw7DQoNCiAgICAgICAgcmV0dXJuIHJ1bGUodGhpcy5tb2RlbFtwYXRoXSk7DQogICAgICB9Ow0KICAgIH0NCiAgfQ0KfTsNCg=="},{"version":3,"sources":["azuread.vue"],"names":[],"mappings":";AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"azuread.vue","sourceRoot":"node_modules/@rancher/shell/edit/auth","sourcesContent":["<script>\r\nimport isEqual from 'lodash/isEqual';\r\nimport Loading from '@shell/components/Loading';\r\nimport CreateEditView from '@shell/mixins/create-edit-view';\r\nimport FormValidation from '@shell/mixins/form-validation';\r\nimport CruResource from '@shell/components/CruResource';\r\nimport InfoBox from '@shell/components/InfoBox';\r\nimport { RadioGroup } from '@components/Form/Radio';\r\nimport { LabeledInput } from '@components/Form/LabeledInput';\r\nimport { Checkbox } from '@components/Form/Checkbox';\r\nimport AuthBanner from '@shell/components/auth/AuthBanner';\r\nimport CopyToClipboardText from '@shell/components/CopyToClipboardText.vue';\r\nimport AllowedPrincipals from '@shell/components/auth/AllowedPrincipals';\r\nimport AuthConfig from '@shell/mixins/auth-config';\r\nimport { AZURE_MIGRATED } from '@shell/config/labels-annotations';\r\nimport { get } from '@shell/utils/object';\r\nimport AuthProviderWarningBanners from '@shell/edit/auth/AuthProviderWarningBanners';\r\nimport formRulesGenerator from '@shell/utils/validators/formRules/index';\r\n\r\nconst TENANT_ID_TOKEN = '__[[TENANT_ID]]__';\r\n\r\n// Azure AD Graph will be deprecated end of 2022, see: https://docs.microsoft.com/en-us/graph/migrate-azure-ad-graph-overview\r\nexport const OLD_ENDPOINTS = {\r\n  standard: {\r\n    graphEndpoint: 'https://graph.windows.net/',\r\n    tokenEndpoint: `https://login.microsoftonline.com/${ TENANT_ID_TOKEN }/oauth2/token`,\r\n    authEndpoint:  `https://login.microsoftonline.com/${ TENANT_ID_TOKEN }/oauth2/authorize`\r\n  },\r\n  china: {\r\n    graphEndpoint: 'https://graph.chinacloudapi.cn/',\r\n    tokenEndpoint: `https://login.chinacloudapi.cn/${ TENANT_ID_TOKEN }/oauth2/token`,\r\n    authEndpoint:  `https://login.chinacloudapi.cn/${ TENANT_ID_TOKEN }/oauth2/authorize`\r\n  }\r\n};\r\n\r\nconst ENDPOINT_MAPPING = {\r\n  standard: {\r\n    endpoint:      'https://login.microsoftonline.com/',\r\n    graphEndpoint: 'https://graph.microsoft.com',\r\n    tokenEndpoint: `https://login.microsoftonline.com/${ TENANT_ID_TOKEN }/oauth2/v2.0/token`,\r\n    authEndpoint:  `https://login.microsoftonline.com/${ TENANT_ID_TOKEN }/oauth2/v2.0/authorize`\r\n  },\r\n  china: {\r\n    endpoint:      'https://login.partner.microsoftonline.cn/',\r\n    graphEndpoint: 'https://microsoftgraph.chinacloudapi.cn',\r\n    tokenEndpoint: `https://login.partner.microsoftonline.cn/${ TENANT_ID_TOKEN }/oauth2/v2.0/token`,\r\n    authEndpoint:  `https://login.partner.microsoftonline.cn/${ TENANT_ID_TOKEN }/oauth2/v2.0/authorize`\r\n  },\r\n  custom: {\r\n    endpoint:      'https://login.microsoftonline.com/',\r\n    graphEndpoint: '',\r\n    tokenEndpoint: '',\r\n    authEndpoint:  ''\r\n  }\r\n};\r\n\r\nexport default {\r\n  components: {\r\n    Loading,\r\n    CruResource,\r\n    InfoBox,\r\n    RadioGroup,\r\n    LabeledInput,\r\n    Checkbox,\r\n    CopyToClipboardText,\r\n    AllowedPrincipals,\r\n    AuthBanner,\r\n    AuthProviderWarningBanners\r\n  },\r\n\r\n  mixins: [CreateEditView, AuthConfig, FormValidation],\r\n\r\n  async fetch() {\r\n    await this.reloadModel();\r\n\r\n    if ( this.value?.graphEndpoint ) {\r\n      this.setInitialEndpoint(this.value.graphEndpoint);\r\n    }\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      isGroupMembershipFilterEnabled: !!this.value.groupMembershipFilter,\r\n      endpoint:                       'standard',\r\n      oldEndpoint:                    false,\r\n\r\n      // Storing the applicationSecret is necessary because norman doesn't support returning secrets and when we\r\n      // override the steve authconfig with a norman config the applicationSecret is lost\r\n      applicationSecret: this.value.applicationSecret,\r\n      fvFormRuleSets:    [\r\n        { path: 'tenantId', rules: ['tenantIdRequired'] },\r\n        { path: 'applicationId', rules: ['applicationIdRequired'] },\r\n        { path: 'applicationSecret', rules: ['applicationSecretRequired'] },\r\n        { path: 'endpoint', rules: ['endpointRequired', 'endpointMustBeURL'] },\r\n        { path: 'graphEndpoint', rules: ['graphEndpointRequired', 'graphEndpointMustBeURL'] },\r\n        { path: 'tokenEndpoint', rules: ['tokenEndpointRequired', 'tokenEndpointMustBeURL'] },\r\n        { path: 'authEndpoint', rules: ['authEndpointRequired', 'authEndpointMustBeURL'] },\r\n      ]\r\n    };\r\n  },\r\n\r\n  computed: {\r\n    // Cannot pass this.model as a rootObject because it is undefined at that point, so had to use a workaround\r\n    fvExtraRules() {\r\n      return {\r\n        tenantIdRequired:          this.modelFieldRequired('tenantId', 'authConfig.azuread.tenantId.label'),\r\n        applicationIdRequired:     this.modelFieldRequired('applicationId', 'authConfig.azuread.applicationId.label'),\r\n        applicationSecretRequired: this.applicationSecretRequired(),\r\n        endpointRequired:          this.modelFieldRequired('endpoint', 'authConfig.azuread.endpoint.label'),\r\n        endpointMustBeURL:         this.modelFieldURL('endpoint'),\r\n        graphEndpointRequired:     this.modelFieldRequired('graphEndpoint', 'authConfig.azuread.graphEndpoint.label'),\r\n        graphEndpointMustBeURL:    this.modelFieldURL('graphEndpoint'),\r\n        tokenEndpointRequired:     this.modelFieldRequired('tokenEndpoint', 'authConfig.azuread.tokenEndpoint.label'),\r\n        tokenEndpointMustBeURL:    this.modelFieldURL('tokenEndpoint'),\r\n        authEndpointRequired:      this.modelFieldRequired('authEndpoint', 'authConfig.azuread.authEndpoint.label'),\r\n        authEndpointMustBeURL:     this.modelFieldURL('authEndpoint')\r\n      };\r\n    },\r\n\r\n    tArgs() {\r\n      return {\r\n        baseUrl:  this.baseUrl,\r\n        provider: this.displayName,\r\n        username: this.principal.loginName || this.principal.name\r\n      };\r\n    },\r\n\r\n    replyUrl() {\r\n      return `${ this.serverUrl }/verify-auth-azure`;\r\n    },\r\n\r\n    tenantId() {\r\n      return this.model?.tenantId;\r\n    },\r\n\r\n    toSave() {\r\n      const applicationSecret = this.getNewApplicationSecret();\r\n\r\n      if (applicationSecret) {\r\n        this.$set(this.model, 'applicationSecret', applicationSecret);\r\n      }\r\n\r\n      return {\r\n        config: {\r\n          ...this.model,\r\n          enabled:     true,\r\n          description: 'Enable AzureAD'\r\n        }\r\n      };\r\n    },\r\n\r\n    needsUpdate() {\r\n      return (\r\n        get(this.model, `annotations.\"${ AZURE_MIGRATED }\"`) !== 'true'\r\n      );\r\n    },\r\n\r\n    modalConfig() {\r\n      return {\r\n        applyAction: this.updateEndpoint,\r\n        applyMode:   'update',\r\n        title:       this.t('authConfig.azuread.updateEndpoint.modal.title'),\r\n        body:        this.t('authConfig.azuread.updateEndpoint.modal.body', null, { raw: true })\r\n      };\r\n    },\r\n    editMemberConfig() {\r\n      return this.model.enabled && !this.isEnabling && !this.editConfig;\r\n    }\r\n  },\r\n\r\n  watch: {\r\n    endpoint(value) {\r\n      this.setEndpoints(value);\r\n    },\r\n\r\n    tenantId() {\r\n      if (this.endpoint !== 'custom') {\r\n        this.setEndpoints(this.endpoint);\r\n      }\r\n    },\r\n\r\n    model: {\r\n      deep: true,\r\n      handler() {\r\n        this.model.accessMode = this.model.accessMode || 'unrestricted';\r\n        this.model.rancherUrl = this.model.rancherUrl || this.replyUrl;\r\n\r\n        if (this.model.applicationSecret) {\r\n          this.$set(this, 'applicationSecret', this.model.applicationSecret);\r\n        }\r\n      }\r\n    },\r\n\r\n  },\r\n\r\n  methods: {\r\n    toggleGroupMembershipFilter(enabled) {\r\n      // reset the value of groupMembershipFilter when its filter gets disabled\r\n      if (!enabled) {\r\n        this.model.groupMembershipFilter = '';\r\n      }\r\n    },\r\n\r\n    setEndpoints(endpoint) {\r\n      if (this.editConfig || !this.model.enabled) {\r\n        const endpointType = this.oldEndpoint && endpoint !== 'custom' ? OLD_ENDPOINTS : ENDPOINT_MAPPING;\r\n\r\n        Object.keys(endpointType[endpoint]).forEach((key) => {\r\n          this.$set(\r\n            this.model,\r\n            key,\r\n            endpointType[endpoint][key].replace(\r\n              TENANT_ID_TOKEN,\r\n              this.model.tenantId\r\n            )\r\n          );\r\n        });\r\n      }\r\n    },\r\n\r\n    setInitialEndpoint(endpoint) {\r\n      const newEndpointKey = this.determineEndpointKeyType(ENDPOINT_MAPPING);\r\n      const oldEndpointKey = Object.keys(OLD_ENDPOINTS).find((key) => OLD_ENDPOINTS[key].graphEndpoint === endpoint);\r\n\r\n      if ( oldEndpointKey ) {\r\n        this.endpoint = this.determineEndpointKeyType(OLD_ENDPOINTS);\r\n        this.oldEndpoint = true;\r\n      } else {\r\n        this.endpoint = newEndpointKey;\r\n      }\r\n    },\r\n\r\n    determineEndpointKeyType(endpointTypes) {\r\n      let out = 'custom';\r\n\r\n      for ( const [endpointKey, endpointKeyValues] of Object.entries(endpointTypes) ) {\r\n        const mappedValues = Object.values(endpointKeyValues).map((endpoint) => endpoint.replace(TENANT_ID_TOKEN, this.model?.tenantId));\r\n        const valuesToCheck = Object.keys(endpointKeyValues).map((key) => this.value[key]);\r\n\r\n        if ( isEqual(mappedValues, valuesToCheck) ) {\r\n          out = endpointKey;\r\n        }\r\n      }\r\n\r\n      return out;\r\n    },\r\n\r\n    getNewApplicationSecret() {\r\n      const applicationSecretOrId =\r\n        this.model.applicationSecret || this.applicationSecret;\r\n\r\n      // The application secret comes back as an ID from steve API and this indicates\r\n      // that the current application secret isn't new\r\n      if (applicationSecretOrId.includes('cattle-global-data')) {\r\n        return null;\r\n      }\r\n\r\n      return applicationSecretOrId;\r\n    },\r\n\r\n    promptUpdate() {\r\n      this.$store.dispatch('management/promptModal', {\r\n        component:      'GenericPrompt',\r\n        componentProps: this.modalConfig\r\n      });\r\n    },\r\n\r\n    // update the authconfig to change the azure ad graph endpoint to the microsoft graph endpoint\r\n    // only relevant for setups upgrading to 2.6.6 with azuread auth already enabled\r\n    updateEndpoint(btnCB) {\r\n      if (this.needsUpdate) {\r\n        this.model\r\n          .doAction('upgrade')\r\n          .then(() => {\r\n            this.reloadModel();\r\n            this.$store.dispatch('growl/success', { message: 'Graph endpoint updated successfully.' });\r\n            btnCB(true);\r\n          })\r\n          .catch((err) => {\r\n            this.$store.dispatch('growl/fromError', {\r\n              title: 'Error updating graph endpoint',\r\n              err\r\n            });\r\n            btnCB(false);\r\n          });\r\n      }\r\n    },\r\n    modelFieldRequired(path, label) {\r\n      return () => {\r\n        return !this.model[path] ? `${ this.t('validation.required', { key: this.t(label) }) }` : undefined;\r\n      };\r\n    },\r\n    applicationSecretRequired() {\r\n      return () => {\r\n        return !this.editMemberConfig && !this.model.applicationSecret ? `${ this.t('validation.required', { key: this.t('authConfig.azuread.applicationSecret.label') }) }` : undefined;\r\n      };\r\n    },\r\n    modelFieldURL(path) {\r\n      return () => {\r\n        const rule = formRulesGenerator(this.$store.getters['i18n/t'], {}).url;\r\n\r\n        return rule(this.model[path]);\r\n      };\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<template>\r\n  <Loading v-if=\"$fetchState.pending\" />\r\n  <div v-else>\r\n    <CruResource\r\n      :done-route=\"doneRoute\"\r\n      :mode=\"mode\"\r\n      :resource=\"model\"\r\n      :subtypes=\"[]\"\r\n      :validation-passed=\"fvFormIsValid\"\r\n      :finish-button-mode=\"model && model.enabled ? 'edit' : 'enable'\"\r\n      :can-yaml=\"false\"\r\n      :errors=\"errors\"\r\n      :show-cancel=\"showCancel\"\r\n      :cancel-event=\"true\"\r\n      @error=\"e=>errors = e\"\r\n      @finish=\"save\"\r\n      @cancel=\"cancel\"\r\n    >\r\n      <template v-if=\"editMemberConfig\">\r\n        <AuthBanner\r\n          :t-args=\"tArgs\"\r\n          :disable=\"disable\"\r\n          :edit=\"goToEdit\"\r\n        >\r\n          <template slot=\"rows\">\r\n            <tr>\r\n              <td>{{ t(`authConfig.azuread.tenantId.label`) }}:</td>\r\n              <td>{{ model.tenantId }}</td>\r\n            </tr>\r\n            <tr>\r\n              <td>{{ t(`authConfig.azuread.applicationId.label`) }}:</td>\r\n              <td>{{ model.applicationId }}</td>\r\n            </tr>\r\n            <tr>\r\n              <td>{{ t(`authConfig.azuread.endpoint.label`) }}:</td>\r\n              <td>{{ model.endpoint }}</td>\r\n            </tr>\r\n            <tr>\r\n              <td>{{ t(`authConfig.azuread.graphEndpoint.label`) }}:</td>\r\n              <td>{{ model.graphEndpoint }}</td>\r\n            </tr>\r\n            <tr>\r\n              <td>{{ t(`authConfig.azuread.tokenEndpoint.label`) }}:</td>\r\n              <td>{{ model.tokenEndpoint }}</td>\r\n            </tr>\r\n            <tr>\r\n              <td>{{ t(`authConfig.azuread.authEndpoint.label`) }}:</td>\r\n              <td>{{ model.authEndpoint }}</td>\r\n            </tr>\r\n          </template>\r\n          <template\r\n            v-if=\"needsUpdate\"\r\n            slot=\"actions\"\r\n          >\r\n            <button\r\n              type=\"button\"\r\n              class=\"btn btn-sm role-secondary mr-10 update\"\r\n              @click=\"promptUpdate\"\r\n            >\r\n              {{ t('authConfig.azuread.updateEndpoint.button') }}\r\n            </button>\r\n          </template>\r\n        </AuthBanner>\r\n\r\n        <hr>\r\n\r\n        <AllowedPrincipals\r\n          provider=\"azuread\"\r\n          :auth-config=\"model\"\r\n          :mode=\"mode\"\r\n        />\r\n      </template>\r\n\r\n      <template v-else>\r\n        <AuthProviderWarningBanners\r\n          v-if=\"!model.enabled\"\r\n          :t-args=\"tArgs\"\r\n        />\r\n\r\n        <InfoBox\r\n          v-if=\"!model.enabled\"\r\n          id=\"reply-info\"\r\n          class=\"mt-20 mb-20 p-10\"\r\n        >\r\n          {{ t('authConfig.azuread.reply.info') }}\r\n          <br>\r\n          <label class=\"reply-url\">{{ t('authConfig.azuread.reply.label') }} </label>\r\n          <CopyToClipboardText\r\n            :plain=\"true\"\r\n            :text=\"replyUrl\"\r\n          />\r\n        </InfoBox>\r\n\r\n        <div class=\"row mb-20\">\r\n          <div class=\"col span-6\">\r\n            <LabeledInput\r\n              id=\"tenant-id\"\r\n              v-model=\"model.tenantId\"\r\n              :label=\"t('authConfig.azuread.tenantId.label')\"\r\n              :mode=\"mode\"\r\n              :required=\"true\"\r\n              :rules=\"fvGetAndReportPathRules('tenantId')\"\r\n              :tooltip=\"t('authConfig.azuread.tenantId.tooltip')\"\r\n              :placeholder=\"t('authConfig.azuread.tenantId.placeholder')\"\r\n              data-testid=\"input-azureAD-tenantId\"\r\n            />\r\n          </div>\r\n        </div>\r\n        <div class=\"row mb-20\">\r\n          <div class=\"col span-6\">\r\n            <LabeledInput\r\n              id=\"application-id\"\r\n              v-model=\"model.applicationId\"\r\n              :label=\"t('authConfig.azuread.applicationId.label')\"\r\n              :mode=\"mode\"\r\n              :required=\"true\"\r\n              :rules=\"fvGetAndReportPathRules('applicationId')\"\r\n              :placeholder=\"t('authConfig.azuread.applicationId.placeholder')\"\r\n              data-testid=\"input-azureAD-applcationId\"\r\n            />\r\n          </div>\r\n          <div class=\"col span-6\">\r\n            <LabeledInput\r\n              id=\"application-secret\"\r\n              v-model=\"model.applicationSecret\"\r\n              type=\"password\"\r\n              :label=\"t('authConfig.azuread.applicationSecret.label')\"\r\n              :required=\"true\"\r\n              :rules=\"fvGetAndReportPathRules('applicationSecret')\"\r\n              :mode=\"mode\"\r\n              data-testid=\"input-azureAD-applicationSecret\"\r\n            />\r\n          </div>\r\n        </div>\r\n        <div class=\"row mb-20\">\r\n          <div class=\"col span-12\">\r\n            <Checkbox\r\n              v-model=\"isGroupMembershipFilterEnabled\"\r\n              class=\"mb-10 mr-10\"\r\n              :mode=\"mode\"\r\n              :label=\"t('authConfig.azuread.groupMembershipFilter.enable')\"\r\n              :tooltip=\"t('authConfig.azuread.groupMembershipFilter.tooltip')\"\r\n              data-testid=\"checkbox-azureAD-groupMembershipFilter\"\r\n              @input=\"toggleGroupMembershipFilter\"\r\n            />\r\n            <div v-if=\"isGroupMembershipFilterEnabled\">\r\n              <LabeledInput\r\n                v-model=\"model.groupMembershipFilter\"\r\n                :label=\"t('authConfig.azuread.groupMembershipFilter.label')\"\r\n                placeholder=\"e.g. (displayName eq 'group1') or (displayName eq 'group2')\"\r\n                :mode=\"mode\"\r\n                class=\"mb-10\"\r\n                data-testid=\"input-azureAD-groupMembershipFilter\"\r\n              />\r\n              <a\r\n                :href=\"t('authConfig.azuread.groupMembershipFilter.externalHelpLink')\"\r\n                target=\"_blank\"\r\n                rel=\"noopener noreferrer nofollow\"\r\n              >\r\n                {{ t('authConfig.azuread.groupMembershipFilter.externalHelp') }} <i class=\"icon icon-external-link\" />\r\n              </a>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <RadioGroup\r\n          v-model=\"endpoint\"\r\n          class=\"mb-20\"\r\n          :required=\"true\"\r\n          :label=\"t('authConfig.azuread.endpoints.label')\"\r\n          name=\"endpoints\"\r\n          :options=\"['standard', 'china', 'custom']\"\r\n          :mode=\"mode\"\r\n          :labels=\"[t('authConfig.azuread.endpoints.standard'), t('authConfig.azuread.endpoints.china'), t('authConfig.azuread.endpoints.custom')]\"\r\n          data-testid=\"endpoints-radio-input\"\r\n        />\r\n        <div v-if=\"endpoint === 'custom'\">\r\n          <div class=\"row mb-20\">\r\n            <div class=\"col span-6\">\r\n              <LabeledInput\r\n                v-model=\"model.endpoint\"\r\n                :label=\"t('authConfig.azuread.endpoint.label')\"\r\n                :mode=\"mode\"\r\n                :required=\"true\"\r\n                :rules=\"fvGetAndReportPathRules('endpoint')\"\r\n                data-testid=\"input-azureAD-endpoint\"\r\n              />\r\n            </div>\r\n            <div class=\"col span-6\">\r\n              <LabeledInput\r\n                v-model=\"model.graphEndpoint\"\r\n                :label=\"t('authConfig.azuread.graphEndpoint.label')\"\r\n                :required=\"true\"\r\n                :rules=\"fvGetAndReportPathRules('graphEndpoint')\"\r\n                :mode=\"mode\"\r\n                data-testid=\"input-azureAD-graphEndpoint\"\r\n              />\r\n            </div>\r\n          </div>\r\n          <div class=\"row mb-20\">\r\n            <div class=\"col span-6\">\r\n              <LabeledInput\r\n                v-model=\"model.tokenEndpoint\"\r\n                :label=\"t('authConfig.azuread.tokenEndpoint.label')\"\r\n                :mode=\"mode\"\r\n                :required=\"true\"\r\n                :rules=\"fvGetAndReportPathRules('tokenEndpoint')\"\r\n                data-testid=\"input-azureAD-tokenEndpoint\"\r\n              />\r\n            </div>\r\n            <div class=\"col span-6\">\r\n              <LabeledInput\r\n                v-model=\"model.authEndpoint\"\r\n                :label=\"t('authConfig.azuread.authEndpoint.label')\"\r\n                :required=\"true\"\r\n                :rules=\"fvGetAndReportPathRules('authEndpoint')\"\r\n                :mode=\"mode\"\r\n                data-testid=\"input-azureAD-authEndpoint\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </template>\r\n    </CruResource>\r\n  </div>\r\n</template>\r\n\r\n<style lang=\"scss\">\r\n#reply-info {\r\n  flex-grow: 0;\r\n}\r\n\r\n.reply-url {\r\n  color: inherit;\r\n  font-weight: 700;\r\n}\r\n</style>\r\n"]}]}