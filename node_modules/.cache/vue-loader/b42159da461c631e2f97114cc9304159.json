{"remainingRequest":"/home/ubuntu/suseconf/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ubuntu/suseconf/node_modules/@rancher/shell/pages/c/_cluster/uiplugins/CatalogList/CatalogLoadDialog.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/ubuntu/suseconf/node_modules/@rancher/shell/pages/c/_cluster/uiplugins/CatalogList/CatalogLoadDialog.vue","mtime":1725338146566},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js","mtime":1725271298942},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1725271300920}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICd2dWV4JzsKaW1wb3J0IGlzRW1wdHkgZnJvbSAnbG9kYXNoL2lzRW1wdHknOwoKaW1wb3J0IHsgQ0FUQUxPRywgU0VDUkVULCBTRVJWSUNFLCBXT1JLTE9BRF9UWVBFUyB9IGZyb20gJ0BzaGVsbC9jb25maWcvdHlwZXMnOwppbXBvcnQgeyBVSV9QTFVHSU5fTEFCRUxTLCBVSV9QTFVHSU5fTkFNRVNQQUNFIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy91aXBsdWdpbnMnOwppbXBvcnQgeyBUWVBFUyBhcyBTRUNSRVRfVFlQRVMgfSBmcm9tICdAc2hlbGwvbW9kZWxzL3NlY3JldCc7CmltcG9ydCB7IGFsbEhhc2ggfSBmcm9tICdAc2hlbGwvdXRpbHMvcHJvbWlzZSc7CgppbXBvcnQgUmVzb3VyY2VNYW5hZ2VyIGZyb20gJ0BzaGVsbC9taXhpbnMvcmVzb3VyY2UtbWFuYWdlcic7CgppbXBvcnQgQXN5bmNCdXR0b24gZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvQXN5bmNCdXR0b24nOwppbXBvcnQgQXBwTW9kYWwgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvQXBwTW9kYWwnOwppbXBvcnQgTGFiZWxlZFNlbGVjdCBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9mb3JtL0xhYmVsZWRTZWxlY3QnOwppbXBvcnQgTG9hZGluZyBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9Mb2FkaW5nLnZ1ZSc7CmltcG9ydCB7IEJhbm5lciB9IGZyb20gJ0Bjb21wb25lbnRzL0Jhbm5lcic7CmltcG9ydCB7IExhYmVsZWRJbnB1dCB9IGZyb20gJ0Bjb21wb25lbnRzL0Zvcm0vTGFiZWxlZElucHV0JzsKCmNvbnN0IERFRkFVTFRfREVQTE9ZTUVOVCA9IHsKICB0eXBlOiAgICAgV09SS0xPQURfVFlQRVMuREVQTE9ZTUVOVCwKICBtZXRhZGF0YTogewogICAgbmFtZTogICAgICAnJywKICAgIG5hbWVzcGFjZTogVUlfUExVR0lOX05BTUVTUEFDRSwKICAgIGxhYmVsczogICAge30KICB9LAogIHNwZWM6IHsKICAgIHJlcGxpY2FzOiAxLAogICAgc2VsZWN0b3I6IHsgbWF0Y2hMYWJlbHM6IHt9IH0sCiAgICB0ZW1wbGF0ZTogewogICAgICBtZXRhZGF0YTogewogICAgICAgIG5hbWVzcGFjZTogVUlfUExVR0lOX05BTUVTUEFDRSwKICAgICAgICBsYWJlbHM6ICAgIHt9CiAgICAgIH0sCiAgICAgIHNwZWM6IHsKICAgICAgICBjb250YWluZXJzOiBbCiAgICAgICAgICB7CiAgICAgICAgICAgIGltYWdlOiAgICAgICAgICAgJycsCiAgICAgICAgICAgIGltYWdlUHVsbFBvbGljeTogJ0Fsd2F5cycsCiAgICAgICAgICAgIG5hbWU6ICAgICAgICAgICAgJ2NvbnRhaW5lci0wJwogICAgICAgICAgfQogICAgICAgIF0sCiAgICAgICAgaW1hZ2VQdWxsU2VjcmV0czogW10sCiAgICAgICAgcmVzdGFydFBvbGljeTogICAgJ0Fsd2F5cycKICAgICAgfQogICAgfQogIH0KfTsKCmNvbnN0IERFRkFVTFRfU0VSVklDRSA9IHsKICB0eXBlOiAgICAgU0VSVklDRSwKICBtZXRhZGF0YTogewogICAgbmFtZTogICAgICAnJywKICAgIG5hbWVzcGFjZTogVUlfUExVR0lOX05BTUVTUEFDRSwKICAgIGxhYmVsczogICAgeyBbVUlfUExVR0lOX0xBQkVMUy5DQVRBTE9HX0lNQUdFXTogJycgfQogIH0sCiAgc3BlYzogewogICAgcG9ydHM6IFsKICAgICAgewogICAgICAgIG5hbWU6ICAgICAgICcnLAogICAgICAgIHBvcnQ6ICAgICAgIDgwODAsCiAgICAgICAgcHJvdG9jb2w6ICAgJ1RDUCcsCiAgICAgICAgdGFyZ2V0UG9ydDogODA4MAogICAgICB9CiAgICBdLAogICAgc2VsZWN0b3I6IHsgW1VJX1BMVUdJTl9MQUJFTFMuQ0FUQUxPR19JTUFHRV06ICcnIH0sCiAgICB0eXBlOiAgICAgJ0NsdXN0ZXJJUCcKICB9Cn07Cgpjb25zdCBERUZBVUxUX1JFUE8gPSB7CiAgdHlwZTogICAgIENBVEFMT0cuQ0xVU1RFUl9SRVBPLAogIG1ldGFkYXRhOiB7CiAgICBuYW1lOiAgICcnLAogICAgbGFiZWxzOiB7IFtVSV9QTFVHSU5fTEFCRUxTLkNBVEFMT0dfSU1BR0VdOiAnJyB9CiAgfSwKICBzcGVjOiB7IHVybDogbnVsbCB9Cn07Cgpjb25zdCBpbml0aWFsU3RhdGUgPSAoKSA9PiB7CiAgY29uc3QgZGVwbG95bWVudFZhbHVlcyA9IHN0cnVjdHVyZWRDbG9uZShERUZBVUxUX0RFUExPWU1FTlQpOwogIGNvbnN0IHNlcnZpY2VWYWx1ZXMgPSBzdHJ1Y3R1cmVkQ2xvbmUoREVGQVVMVF9TRVJWSUNFKTsKICBjb25zdCByZXBvVmFsdWVzID0gc3RydWN0dXJlZENsb25lKERFRkFVTFRfUkVQTyk7CgogIHJldHVybiB7CiAgICBkZXBsb3ltZW50VmFsdWVzLAogICAgc2VydmljZVZhbHVlcywKICAgIHJlcG9WYWx1ZXMsCiAgICBjYW5Nb2RpZnlOYW1lOiAgICAgICAgICAgICAgdHJ1ZSwKICAgIGNhbk1vZGlmeUltYWdlOiAgICAgICAgICAgICB0cnVlLAogICAgaW1hZ2VQdWxsU2VjcmV0czogICAgICAgICAgIFtdLAogICAgaW1hZ2VQdWxsTmFtZXNwYWNlZFNlY3JldHM6IFtdLAogICAgZXh0ZW5zaW9uVXJsOiAgICAgICAgICAgICAgIG51bGwsCiAgICBleHRlbnNpb25EZXBsb3ltZW50OiAgICAgICAgbnVsbCwKICAgIGV4dGVuc2lvblN2YzogICAgICAgICAgICAgICBudWxsLAogICAgZXh0ZW5zaW9uUmVwbzogICAgICAgICAgICAgIG51bGwsCiAgICBleHRlbnNpb25DcmQ6ICAgICAgICAgICAgICAgbnVsbAogIH07Cn07CgpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgQXN5bmNCdXR0b24sIEJhbm5lciwgTGFiZWxlZElucHV0LCBMb2FkaW5nLCBMYWJlbGVkU2VsZWN0LCBBcHBNb2RhbCwKICB9LAoKICBtaXhpbnM6IFtSZXNvdXJjZU1hbmFnZXJdLAoKICBhc3luYyBmZXRjaCgpIHsKICAgIGNvbnN0IGhhc2ggPSB7fTsKCiAgICBpZiAoIHRoaXMuJHN0b3JlLmdldHRlcnNbJ21hbmFnZW1lbnQvY2FuTGlzdCddKFdPUktMT0FEX1RZUEVTLkRFUExPWU1FTlQpICkgewogICAgICBoYXNoLmRlcGxveW1lbnRzID0gdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ21hbmFnZW1lbnQvZmluZEFsbCcsIHsgdHlwZTogV09SS0xPQURfVFlQRVMuREVQTE9ZTUVOVCB9KTsKICAgIH0KCiAgICBpZiAoIHRoaXMuJHN0b3JlLmdldHRlcnNbJ21hbmFnZW1lbnQvY2FuTGlzdCddKFNFUlZJQ0UpICkgewogICAgICBoYXNoLnNlcnZpY2VzID0gdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ21hbmFnZW1lbnQvZmluZEFsbCcsIHsgdHlwZTogU0VSVklDRSB9KTsKICAgIH0KCiAgICBhd2FpdCBhbGxIYXNoKGhhc2gpOwoKICAgIHRoaXMuc2Vjb25kYXJ5UmVzb3VyY2VEYXRhID0gdGhpcy5zZWNvbmRhcnlSZXNvdXJjZURhdGFDb25maWcoKTsKICAgIHRoaXMucmVzb3VyY2VNYW5hZ2VyRmV0Y2hTZWNvbmRhcnlSZXNvdXJjZXModGhpcy5zZWNvbmRhcnlSZXNvdXJjZURhdGEpOwogIH0sCgogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICAuLi5pbml0aWFsU3RhdGUoKSwKICAgICAgc2Vjb25kYXJ5UmVzb3VyY2VEYXRhOiBudWxsLAogICAgICBzaG93TW9kYWw6ICAgICAgICAgICAgIGZhbHNlLAogICAgfTsKICB9LAoKICBjb21wdXRlZDogewogICAgLi4ubWFwR2V0dGVycyh7IGFsbFJlcG9zOiAnY2F0YWxvZy9yZXBvcycgfSksCgogICAgbmFtZXNwYWNlZERlcGxveW1lbnRzKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuZ2V0dGVyc1snbWFuYWdlbWVudC9hbGwnXShXT1JLTE9BRF9UWVBFUy5ERVBMT1lNRU5UKS5maWx0ZXIoKGRlcCkgPT4gZGVwLm1ldGFkYXRhLm5hbWVzcGFjZSA9PT0gVUlfUExVR0lOX05BTUVTUEFDRSk7CiAgICB9LAoKICAgIG5hbWVzcGFjZWRTZXJ2aWNlcygpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLmdldHRlcnNbJ21hbmFnZW1lbnQvYWxsJ10oU0VSVklDRSkuZmlsdGVyKChzdmMpID0+IHN2Yy5tZXRhZGF0YS5uYW1lc3BhY2UgPT09IFVJX1BMVUdJTl9OQU1FU1BBQ0UpOwogICAgfQogIH0sCgogIG1ldGhvZHM6IHsKICAgIHNlY29uZGFyeVJlc291cmNlRGF0YUNvbmZpZygpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBuYW1lc3BhY2U6IFVJX1BMVUdJTl9OQU1FU1BBQ0UsCiAgICAgICAgZGF0YTogICAgICB7CiAgICAgICAgICBbU0VDUkVUXTogewogICAgICAgICAgICBhcHBseVRvOiBbCiAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdmFyOiAgICAgICAgICdpbWFnZVB1bGxOYW1lc3BhY2VkU2VjcmV0cycsCiAgICAgICAgICAgICAgICBwYXJzaW5nRnVuYzogKGRhdGEpID0+IHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGRhdGEuZmlsdGVyKChzZWNyZXQpID0+IChzZWNyZXQuX3R5cGUgPT09IFNFQ1JFVF9UWVBFUy5ET0NLRVIgfHwgc2VjcmV0Ll90eXBlID09PSBTRUNSRVRfVFlQRVMuRE9DS0VSX0pTT04pKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIF0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH07CiAgICB9LAoKICAgIHNob3dEaWFsb2coKSB7CiAgICAgIHRoaXMuc2hvd01vZGFsID0gdHJ1ZTsKICAgIH0sCgogICAgY2xvc2VEaWFsb2cocmVzdWx0KSB7CiAgICAgIHRoaXMuc2hvd01vZGFsID0gZmFsc2U7CiAgICAgIHRoaXMuJGVtaXQoJ2Nsb3NlZCcsIHJlc3VsdCk7CgogICAgICAvLyBSZXNldCBzdGF0ZQogICAgICBPYmplY3QuYXNzaWduKHRoaXMuJGRhdGEsIGluaXRpYWxTdGF0ZSgpKTsKICAgICAgdGhpcy5zZWNvbmRhcnlSZXNvdXJjZURhdGEgPSB0aGlzLnNlY29uZGFyeVJlc291cmNlRGF0YUNvbmZpZygpOwogICAgICB0aGlzLnJlc291cmNlTWFuYWdlckZldGNoU2Vjb25kYXJ5UmVzb3VyY2VzKHRoaXMuc2Vjb25kYXJ5UmVzb3VyY2VEYXRhKTsKICAgIH0sCgogICAgYXN5bmMgbG9hZEltYWdlKGJ0bkNiKSB7CiAgICAgIHRyeSB7CiAgICAgICAgaWYgKCFpc0VtcHR5KHRoaXMuZGVwbG95bWVudFZhbHVlcy5zcGVjLnRlbXBsYXRlLnNwZWMuY29udGFpbmVyc1swXS5pbWFnZSkpIHsKICAgICAgICAgIGNvbnN0IGltYWdlID0gdGhpcy5kZXBsb3ltZW50VmFsdWVzLnNwZWMudGVtcGxhdGUuc3BlYy5jb250YWluZXJzWzBdLmltYWdlOwogICAgICAgICAgY29uc3QgbmFtZSA9IHRoaXMuZXh0cmFjdEltYWdlTmFtZShpbWFnZSk7CgogICAgICAgICAgaWYgKG5hbWUpIHsKICAgICAgICAgICAgLy8gQ3JlYXRlIGRlcGxveW1lbnQKICAgICAgICAgICAgYXdhaXQgdGhpcy5sb2FkRGVwbG95bWVudChpbWFnZSwgbmFtZSwgYnRuQ2IpOwoKICAgICAgICAgICAgaWYgKHRoaXMuZXh0ZW5zaW9uRGVwbG95bWVudCkgewogICAgICAgICAgICAgIC8vIENyZWF0ZSBzZXJ2aWNlCiAgICAgICAgICAgICAgYXdhaXQgdGhpcy5sb2FkU2VydmljZShuYW1lLCBidG5DYik7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICh0aGlzLmV4dGVuc2lvblN2YykgewogICAgICAgICAgICAgIC8vIENyZWF0ZSBoZWxtIHJlcG8KICAgICAgICAgICAgICBhd2FpdCB0aGlzLmxvYWRSZXBvKG5hbWUsIGJ0bkNiKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKHRoaXMuZXh0ZW5zaW9uUmVwbykgewogICAgICAgICAgICAgIGJ0bkNiKHRydWUpOwogICAgICAgICAgICAgIHRoaXMuY2xvc2VEaWFsb2coKTsKICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnZ3Jvd2wvc3VjY2VzcycsIHsKICAgICAgICAgICAgICAgIHRpdGxlOiAgIHRoaXMudCgncGx1Z2lucy5tYW5hZ2VDYXRhbG9nLmltYWdlTG9hZC5zdWNjZXNzLnRpdGxlJywgeyBuYW1lIH0pLAogICAgICAgICAgICAgICAgbWVzc2FnZTogdGhpcy50KCdwbHVnaW5zLm1hbmFnZUNhdGFsb2cuaW1hZ2VMb2FkLnN1Y2Nlc3MubWVzc2FnZScpLAogICAgICAgICAgICAgICAgdGltZW91dDogNDAwMCwKICAgICAgICAgICAgICB9LCB7IHJvb3Q6IHRydWUgfSk7CiAgICAgICAgICAgICAgdGhpcy4kZW1pdCgncmVmcmVzaCcpOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VuYWJsZSB0byBkZXRlcm1pbmUgaW1hZ2UgbmFtZScpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIHRoaXMuaGFuZGxlR3Jvd2xFcnJvcihlLCB0cnVlKTsKICAgICAgICBidG5DYihmYWxzZSk7CiAgICAgIH0KICAgIH0sCgogICAgYXN5bmMgbG9hZERlcGxveW1lbnQoaW1hZ2UsIG5hbWUsIGJ0bkNiKSB7CiAgICAgIGNvbnN0IGV4aXN0cyA9IHRoaXMubmFtZXNwYWNlZERlcGxveW1lbnRzLmZpbmQoKGRlcCkgPT4gZGVwLnNwZWMudGVtcGxhdGUuc3BlYy5jb250YWluZXJzWzBdLmltYWdlID09PSBpbWFnZSk7CgogICAgICBpZiAoIWV4aXN0cykgewogICAgICAgIC8vIFNldHMgZGVwbG95bWVudFZhbHVlcyB3aXRoIG5hbWUsIGxhYmVscywgYW5kIGltYWdlUHVsbFNlY3JldHMKICAgICAgICBjb25zdCBkZXBsb3ltZW50VmFsdWVzID0gdGhpcy5wYXJzZURlcGxveW1lbnRWYWx1ZXMobmFtZSk7CgogICAgICAgIHRoaXMuZXh0ZW5zaW9uRGVwbG95bWVudCA9IGF3YWl0IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdtYW5hZ2VtZW50L2NyZWF0ZScsIGRlcGxveW1lbnRWYWx1ZXMpOwoKICAgICAgICB0cnkgewogICAgICAgICAgYXdhaXQgdGhpcy5leHRlbnNpb25EZXBsb3ltZW50LnNhdmUoKTsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICB0aGlzLmhhbmRsZUdyb3dsRXJyb3IoZSwgdHJ1ZSk7CiAgICAgICAgICBidG5DYihmYWxzZSk7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGNvbnN0IGVycm9yID0gewogICAgICAgICAgX3N0YXR1c1RleHQ6IHRoaXMudCgncGx1Z2lucy5tYW5hZ2VDYXRhbG9nLmltYWdlTG9hZC5lcnJvci5leGlzdHMuZGVwbG95bWVudC50aXRsZScpLAogICAgICAgICAgbWVzc2FnZTogICAgIHRoaXMudCgncGx1Z2lucy5tYW5hZ2VDYXRhbG9nLmltYWdlTG9hZC5lcnJvci5leGlzdHMuZGVwbG95bWVudC5tZXNzYWdlJywgeyBpbWFnZSB9KQogICAgICAgIH07CgogICAgICAgIHRoaXMuaGFuZGxlR3Jvd2xFcnJvcihlcnJvcik7CiAgICAgICAgYnRuQ2IoZmFsc2UpOwogICAgICB9CiAgICB9LAoKICAgIGFzeW5jIGxvYWRTZXJ2aWNlKG5hbWUsIGJ0bkNiKSB7CiAgICAgIGNvbnN0IHNlcnZpY2VOYW1lID0gYCR7IG5hbWUgfS1zdmNgOwogICAgICBjb25zdCBleGlzdHMgPSB0aGlzLm5hbWVzcGFjZWRTZXJ2aWNlcy5maW5kKChzdmMpID0+IHN2Yy5tZXRhZGF0YS5uYW1lID09PSBzZXJ2aWNlTmFtZSk7CgogICAgICBpZiAoZXhpc3RzKSB7CiAgICAgICAgY29uc3QgZXJyb3IgPSB7CiAgICAgICAgICBfc3RhdHVzVGV4dDogdGhpcy50KCdwbHVnaW5zLm1hbmFnZUNhdGFsb2cuaW1hZ2VMb2FkLmVycm9yLmV4aXN0cy5zZXJ2aWNlLnRpdGxlJyksCiAgICAgICAgICBtZXNzYWdlOiAgICAgdGhpcy50KCdwbHVnaW5zLm1hbmFnZUNhdGFsb2cuaW1hZ2VMb2FkLmVycm9yLmV4aXN0cy5zZXJ2aWNlLm1lc3NhZ2UnLCB7IHN2Yzogc2VydmljZU5hbWUgfSkKICAgICAgICB9OwoKICAgICAgICB0aGlzLmhhbmRsZUdyb3dsRXJyb3IoZXJyb3IsIHRydWUpOwogICAgICAgIGJ0bkNiKGZhbHNlKTsKCiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICAvLyBTZXRzIHNlcnZpY2VWYWx1ZXMgd2l0aCBuYW1lLCBsYWJlbCwgYW5kIHNlbGVjdG9yCiAgICAgIGNvbnN0IHNlcnZpY2VWYWx1ZXMgPSB0aGlzLnBhcnNlU2VydmljZVZhbHVlcyhuYW1lLCBzZXJ2aWNlTmFtZSk7CiAgICAgIGNvbnN0IHNlcnZpY2VSZXNvdXJjZSA9IGF3YWl0IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdtYW5hZ2VtZW50L2NyZWF0ZScsIHNlcnZpY2VWYWx1ZXMpOwoKICAgICAgdHJ5IHsKICAgICAgICBhd2FpdCBzZXJ2aWNlUmVzb3VyY2Uuc2F2ZSgpOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgdGhpcy5oYW5kbGVHcm93bEVycm9yKGUsIHRydWUpOwogICAgICAgIGJ0bkNiKGZhbHNlKTsKCiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB0cnkgewogICAgICAgIHRoaXMuZXh0ZW5zaW9uU3ZjID0gYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ21hbmFnZW1lbnQvZmluZCcsIHsKICAgICAgICAgIHR5cGU6ICAgICAgU0VSVklDRSwKICAgICAgICAgIGlkOiAgICAgICAgYCR7IFVJX1BMVUdJTl9OQU1FU1BBQ0UgfS8keyBzZXJ2aWNlUmVzb3VyY2UubWV0YWRhdGEubmFtZSB9YCwKICAgICAgICAgIG5hbWVzcGFjZTogVUlfUExVR0lOX05BTUVTUEFDRQogICAgICAgIH0pOwoKICAgICAgICBpZiAodGhpcy5leHRlbnNpb25TdmMpIHsKICAgICAgICAgIHRoaXMuZXh0ZW5zaW9uVXJsID0gYGh0dHA6Ly8keyB0aGlzLmV4dGVuc2lvblN2Yy5zcGVjLmNsdXN0ZXJJUCB9OiR7IHRoaXMuZXh0ZW5zaW9uU3ZjLnNwZWMucG9ydHNbMF0ucG9ydCB9YDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdFcnJvciBmZXRjaGluZyBleHRlbnNpb24gc2VydmljZScpOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIHRoaXMuaGFuZGxlR3Jvd2xFcnJvcihlLCB0cnVlKTsKICAgICAgICBidG5DYihmYWxzZSk7CiAgICAgIH0KICAgIH0sCgogICAgYXN5bmMgbG9hZFJlcG8obmFtZSwgYnRuQ2IpIHsKICAgICAgY29uc3QgY2hhcnROYW1lID0gYCR7IG5hbWUgfS1jaGFydHNgOwogICAgICBjb25zdCBleGlzdHMgPSB0aGlzLmFsbFJlcG9zLmZpbmQoKHJlcG8pID0+IHJlcG8ubWV0YWRhdGEubmFtZSA9PT0gY2hhcnROYW1lKTsKCiAgICAgIGlmIChleGlzdHMpIHsKICAgICAgICBjb25zdCBlcnJvciA9IHsKICAgICAgICAgIF9zdGF0dXNUZXh0OiB0aGlzLnQoJ3BsdWdpbnMubWFuYWdlQ2F0YWxvZy5pbWFnZUxvYWQuZXJyb3IuZXhpc3RzLnJlcG8udGl0bGUnKSwKICAgICAgICAgIG1lc3NhZ2U6ICAgICB0aGlzLnQoJ3BsdWdpbnMubWFuYWdlQ2F0YWxvZy5pbWFnZUxvYWQuZXJyb3IuZXhpc3RzLnJlcG8ubWVzc2FnZScsIHsgcmVwbzogY2hhcnROYW1lIH0pCiAgICAgICAgfTsKCiAgICAgICAgdGhpcy5oYW5kbGVHcm93bEVycm9yKGVycm9yKTsKICAgICAgICBidG5DYihmYWxzZSk7CiAgICAgICAgdGhpcy5jbGVhbigpOwoKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIC8vIFNldCByZXBvVmFsdWVzIHdpdGggbmFtZSwgbGFiZWwsIGFuZCB1cmwKICAgICAgY29uc3QgcmVwb1ZhbHVlcyA9IHRoaXMucGFyc2VSZXBvVmFsdWVzKGNoYXJ0TmFtZSk7CgogICAgICB0aGlzLmV4dGVuc2lvblJlcG8gPSBhd2FpdCB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnbWFuYWdlbWVudC9jcmVhdGUnLCByZXBvVmFsdWVzKTsKCiAgICAgIHRyeSB7CiAgICAgICAgYXdhaXQgdGhpcy5leHRlbnNpb25SZXBvLnNhdmUoKTsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIHRoaXMuaGFuZGxlR3Jvd2xFcnJvcihlLCB0cnVlKTsKICAgICAgICBidG5DYihmYWxzZSk7CiAgICAgIH0KICAgIH0sCgogICAgcGFyc2VEZXBsb3ltZW50VmFsdWVzKG5hbWUpIHsKICAgICAgbGV0IG91dCA9IHt9OwoKICAgICAgdGhpcy4kc2V0KHRoaXMuZGVwbG95bWVudFZhbHVlcy5tZXRhZGF0YSwgJ25hbWUnLCBuYW1lKTsKCiAgICAgIGNvbnN0IGFkZExhYmVsID0geyBbVUlfUExVR0lOX0xBQkVMUy5DQVRBTE9HX0lNQUdFXTogbmFtZSB9OwogICAgICBjb25zdCBhZGRUbyA9IFsnbWV0YWRhdGEubGFiZWxzJywgJ3NwZWMuc2VsZWN0b3IubWF0Y2hMYWJlbHMnLCAnc3BlYy50ZW1wbGF0ZS5tZXRhZGF0YS5sYWJlbHMnXTsKCiAgICAgIC8vIFBvcHVsYXRlcyB3b3JrbG9hZHNlbGVjdG9yIGxhYmVscwogICAgICBvdXQgPSB0aGlzLmFzc2lnbkxhYmVscyh0aGlzLmRlcGxveW1lbnRWYWx1ZXMsIGFkZExhYmVsLCBhZGRUbyk7CgogICAgICBpZiAodGhpcy5pbWFnZVB1bGxTZWNyZXRzLmxlbmd0aCkgewogICAgICAgIG91dC5zcGVjLnRlbXBsYXRlLnNwZWMuaW1hZ2VQdWxsU2VjcmV0cyA9IHRoaXMuaW1hZ2VQdWxsU2VjcmV0cy5tYXAoKHNlY3JldCkgPT4gewogICAgICAgICAgcmV0dXJuIHsgbmFtZTogc2VjcmV0IH07CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHJldHVybiBvdXQ7CiAgICB9LAoKICAgIHBhcnNlU2VydmljZVZhbHVlcyhuYW1lLCBzZXJ2aWNlTmFtZSkgewogICAgICBjb25zdCBvdXQgPSB0aGlzLnNlcnZpY2VWYWx1ZXM7CgogICAgICBvdXQubWV0YWRhdGEubmFtZSA9IHNlcnZpY2VOYW1lOwogICAgICBvdXQubWV0YWRhdGEubGFiZWxzW1VJX1BMVUdJTl9MQUJFTFMuQ0FUQUxPR19JTUFHRV0gPSBuYW1lOwogICAgICBvdXQuc3BlYy5zZWxlY3RvcltVSV9QTFVHSU5fTEFCRUxTLkNBVEFMT0dfSU1BR0VdID0gbmFtZTsKCiAgICAgIHJldHVybiBvdXQ7CiAgICB9LAoKICAgIHBhcnNlUmVwb1ZhbHVlcyhjaGFydE5hbWUpIHsKICAgICAgY29uc3Qgb3V0ID0gdGhpcy5yZXBvVmFsdWVzOwoKICAgICAgb3V0Lm1ldGFkYXRhLm5hbWUgPSBjaGFydE5hbWU7CiAgICAgIG91dC5tZXRhZGF0YS5sYWJlbHNbVUlfUExVR0lOX0xBQkVMUy5DQVRBTE9HX0lNQUdFXSA9IHRoaXMuZGVwbG95bWVudFZhbHVlcy5tZXRhZGF0YS5uYW1lOwogICAgICBvdXQuc3BlYy51cmwgPSB0aGlzLmV4dGVuc2lvblVybDsKCiAgICAgIHJldHVybiBvdXQ7CiAgICB9LAoKICAgIGFzc2lnbkxhYmVscyhzb3VyY2UsIGxhYmVscywgYXJncykgewogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFyZ3MubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCBwYXRoID0gYXJnc1tpXS5zcGxpdCgnLicpOwogICAgICAgIGxldCBjdXJyZW50T2JqID0gc291cmNlOwoKICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHBhdGgubGVuZ3RoIC0gMTsgaisrKSB7CiAgICAgICAgICBjdXJyZW50T2JqID0gY3VycmVudE9ialtwYXRoW2pdXTsKICAgICAgICB9CgogICAgICAgIGN1cnJlbnRPYmpbcGF0aFtwYXRoLmxlbmd0aCAtIDFdXSA9IGxhYmVsczsKICAgICAgfQoKICAgICAgcmV0dXJuIHNvdXJjZTsKICAgIH0sCgogICAgZXh0cmFjdEltYWdlVmVyc2lvbihpbWFnZSkgewogICAgICAvLyBSZXR1cm5zIHRoZSB2ZXJzaW9uIG51bWJlciB3aXRoIG9wdGlvbmFsIHByZS1yZWxlYXNlIGlkZW50aWZpZXJzCiAgICAgIGNvbnN0IHJlZ2V4ID0gLzooXGQrXC5cZCtcLlxkKyhbLVx3XGRdKykqKSQvOwogICAgICBjb25zdCBtYXRjaGVzID0gcmVnZXguZXhlYyhpbWFnZSk7CgogICAgICBpZiAobWF0Y2hlcykgewogICAgICAgIHJldHVybiBtYXRjaGVzWzFdOwogICAgICB9CgogICAgICByZXR1cm4gbnVsbDsKICAgIH0sCgogICAgZXh0cmFjdEltYWdlTmFtZShpbWFnZSkgewogICAgICAvLyBSZXR1cm5zIHRoZSBuYW1lIHdpdGhpbiB0aGUgaW1hZ2UgdGhhdCBwcmVmaXhlcyB0aGUgdmVyc2lvbiBudW1iZXIKICAgICAgY29uc3QgcmVnZXggPSAvXC8oW14vOl0rKSg/OjpcZCtcLlxkK1wuXGQrKC1bYS16QS1aMC05XSspP3wkKS87CiAgICAgIGNvbnN0IG1hdGNoZXMgPSByZWdleC5leGVjKGltYWdlKTsKCiAgICAgIGlmIChtYXRjaGVzKSB7CiAgICAgICAgcmV0dXJuIG1hdGNoZXNbMV07CiAgICAgIH0KCiAgICAgIHJldHVybiBudWxsOwogICAgfSwKCiAgICBjbGVhbigpIHsKICAgICAgLy8gUmVtb3ZlIGZhaWxlZCByZXNvdXJjZXMKICAgICAgaWYgKHRoaXMuZXh0ZW5zaW9uRGVwbG95bWVudCkgewogICAgICAgIHRoaXMuZXh0ZW5zaW9uRGVwbG95bWVudC5yZW1vdmUoKTsKICAgICAgfQogICAgICBpZiAodGhpcy5leHRlbnNpb25TdmMpIHsKICAgICAgICB0aGlzLmV4dGVuc2lvblN2Yy5yZW1vdmUoKTsKICAgICAgfQogICAgICBpZiAodGhpcy5leHRlbnNpb25SZXBvKSB7CiAgICAgICAgdGhpcy5leHRlbnNpb25SZXBvLnJlbW92ZSgpOwogICAgICB9CiAgICB9LAoKICAgIGhhbmRsZUdyb3dsRXJyb3IoZSwgY2xlYW4gPSBmYWxzZSkgewogICAgICBjb25zdCBlcnJvciA9IGU/LmRhdGEgfHwgZTsKCiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdncm93bC9lcnJvcicsIHsKICAgICAgICB0aXRsZTogICBlcnJvci5fc3RhdHVzVGV4dCwKICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLAogICAgICAgIHRpbWVvdXQ6IDUwMDAsCiAgICAgIH0sIHsgcm9vdDogdHJ1ZSB9KTsKCiAgICAgIGlmIChjbGVhbikgewogICAgICAgIHRoaXMuY2xlYW4oKTsKICAgICAgfQogICAgfQogIH0KfTsK"},{"version":3,"sources":["CatalogLoadDialog.vue"],"names":[],"mappings":";AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"CatalogLoadDialog.vue","sourceRoot":"node_modules/@rancher/shell/pages/c/_cluster/uiplugins/CatalogList","sourcesContent":["<script>\nimport { mapGetters } from 'vuex';\nimport isEmpty from 'lodash/isEmpty';\n\nimport { CATALOG, SECRET, SERVICE, WORKLOAD_TYPES } from '@shell/config/types';\nimport { UI_PLUGIN_LABELS, UI_PLUGIN_NAMESPACE } from '@shell/config/uiplugins';\nimport { TYPES as SECRET_TYPES } from '@shell/models/secret';\nimport { allHash } from '@shell/utils/promise';\n\nimport ResourceManager from '@shell/mixins/resource-manager';\n\nimport AsyncButton from '@shell/components/AsyncButton';\nimport AppModal from '@shell/components/AppModal';\nimport LabeledSelect from '@shell/components/form/LabeledSelect';\nimport Loading from '@shell/components/Loading.vue';\nimport { Banner } from '@components/Banner';\nimport { LabeledInput } from '@components/Form/LabeledInput';\n\nconst DEFAULT_DEPLOYMENT = {\n  type:     WORKLOAD_TYPES.DEPLOYMENT,\n  metadata: {\n    name:      '',\n    namespace: UI_PLUGIN_NAMESPACE,\n    labels:    {}\n  },\n  spec: {\n    replicas: 1,\n    selector: { matchLabels: {} },\n    template: {\n      metadata: {\n        namespace: UI_PLUGIN_NAMESPACE,\n        labels:    {}\n      },\n      spec: {\n        containers: [\n          {\n            image:           '',\n            imagePullPolicy: 'Always',\n            name:            'container-0'\n          }\n        ],\n        imagePullSecrets: [],\n        restartPolicy:    'Always'\n      }\n    }\n  }\n};\n\nconst DEFAULT_SERVICE = {\n  type:     SERVICE,\n  metadata: {\n    name:      '',\n    namespace: UI_PLUGIN_NAMESPACE,\n    labels:    { [UI_PLUGIN_LABELS.CATALOG_IMAGE]: '' }\n  },\n  spec: {\n    ports: [\n      {\n        name:       '',\n        port:       8080,\n        protocol:   'TCP',\n        targetPort: 8080\n      }\n    ],\n    selector: { [UI_PLUGIN_LABELS.CATALOG_IMAGE]: '' },\n    type:     'ClusterIP'\n  }\n};\n\nconst DEFAULT_REPO = {\n  type:     CATALOG.CLUSTER_REPO,\n  metadata: {\n    name:   '',\n    labels: { [UI_PLUGIN_LABELS.CATALOG_IMAGE]: '' }\n  },\n  spec: { url: null }\n};\n\nconst initialState = () => {\n  const deploymentValues = structuredClone(DEFAULT_DEPLOYMENT);\n  const serviceValues = structuredClone(DEFAULT_SERVICE);\n  const repoValues = structuredClone(DEFAULT_REPO);\n\n  return {\n    deploymentValues,\n    serviceValues,\n    repoValues,\n    canModifyName:              true,\n    canModifyImage:             true,\n    imagePullSecrets:           [],\n    imagePullNamespacedSecrets: [],\n    extensionUrl:               null,\n    extensionDeployment:        null,\n    extensionSvc:               null,\n    extensionRepo:              null,\n    extensionCrd:               null\n  };\n};\n\nexport default {\n  components: {\n    AsyncButton, Banner, LabeledInput, Loading, LabeledSelect, AppModal,\n  },\n\n  mixins: [ResourceManager],\n\n  async fetch() {\n    const hash = {};\n\n    if ( this.$store.getters['management/canList'](WORKLOAD_TYPES.DEPLOYMENT) ) {\n      hash.deployments = this.$store.dispatch('management/findAll', { type: WORKLOAD_TYPES.DEPLOYMENT });\n    }\n\n    if ( this.$store.getters['management/canList'](SERVICE) ) {\n      hash.services = this.$store.dispatch('management/findAll', { type: SERVICE });\n    }\n\n    await allHash(hash);\n\n    this.secondaryResourceData = this.secondaryResourceDataConfig();\n    this.resourceManagerFetchSecondaryResources(this.secondaryResourceData);\n  },\n\n  data() {\n    return {\n      ...initialState(),\n      secondaryResourceData: null,\n      showModal:             false,\n    };\n  },\n\n  computed: {\n    ...mapGetters({ allRepos: 'catalog/repos' }),\n\n    namespacedDeployments() {\n      return this.$store.getters['management/all'](WORKLOAD_TYPES.DEPLOYMENT).filter((dep) => dep.metadata.namespace === UI_PLUGIN_NAMESPACE);\n    },\n\n    namespacedServices() {\n      return this.$store.getters['management/all'](SERVICE).filter((svc) => svc.metadata.namespace === UI_PLUGIN_NAMESPACE);\n    }\n  },\n\n  methods: {\n    secondaryResourceDataConfig() {\n      return {\n        namespace: UI_PLUGIN_NAMESPACE,\n        data:      {\n          [SECRET]: {\n            applyTo: [\n              {\n                var:         'imagePullNamespacedSecrets',\n                parsingFunc: (data) => {\n                  return data.filter((secret) => (secret._type === SECRET_TYPES.DOCKER || secret._type === SECRET_TYPES.DOCKER_JSON));\n                }\n              }\n            ]\n          }\n        }\n      };\n    },\n\n    showDialog() {\n      this.showModal = true;\n    },\n\n    closeDialog(result) {\n      this.showModal = false;\n      this.$emit('closed', result);\n\n      // Reset state\n      Object.assign(this.$data, initialState());\n      this.secondaryResourceData = this.secondaryResourceDataConfig();\n      this.resourceManagerFetchSecondaryResources(this.secondaryResourceData);\n    },\n\n    async loadImage(btnCb) {\n      try {\n        if (!isEmpty(this.deploymentValues.spec.template.spec.containers[0].image)) {\n          const image = this.deploymentValues.spec.template.spec.containers[0].image;\n          const name = this.extractImageName(image);\n\n          if (name) {\n            // Create deployment\n            await this.loadDeployment(image, name, btnCb);\n\n            if (this.extensionDeployment) {\n              // Create service\n              await this.loadService(name, btnCb);\n            }\n\n            if (this.extensionSvc) {\n              // Create helm repo\n              await this.loadRepo(name, btnCb);\n            }\n\n            if (this.extensionRepo) {\n              btnCb(true);\n              this.closeDialog();\n              this.$store.dispatch('growl/success', {\n                title:   this.t('plugins.manageCatalog.imageLoad.success.title', { name }),\n                message: this.t('plugins.manageCatalog.imageLoad.success.message'),\n                timeout: 4000,\n              }, { root: true });\n              this.$emit('refresh');\n            }\n          } else {\n            throw new Error('Unable to determine image name');\n          }\n        }\n      } catch (e) {\n        this.handleGrowlError(e, true);\n        btnCb(false);\n      }\n    },\n\n    async loadDeployment(image, name, btnCb) {\n      const exists = this.namespacedDeployments.find((dep) => dep.spec.template.spec.containers[0].image === image);\n\n      if (!exists) {\n        // Sets deploymentValues with name, labels, and imagePullSecrets\n        const deploymentValues = this.parseDeploymentValues(name);\n\n        this.extensionDeployment = await this.$store.dispatch('management/create', deploymentValues);\n\n        try {\n          await this.extensionDeployment.save();\n        } catch (e) {\n          this.handleGrowlError(e, true);\n          btnCb(false);\n        }\n      } else {\n        const error = {\n          _statusText: this.t('plugins.manageCatalog.imageLoad.error.exists.deployment.title'),\n          message:     this.t('plugins.manageCatalog.imageLoad.error.exists.deployment.message', { image })\n        };\n\n        this.handleGrowlError(error);\n        btnCb(false);\n      }\n    },\n\n    async loadService(name, btnCb) {\n      const serviceName = `${ name }-svc`;\n      const exists = this.namespacedServices.find((svc) => svc.metadata.name === serviceName);\n\n      if (exists) {\n        const error = {\n          _statusText: this.t('plugins.manageCatalog.imageLoad.error.exists.service.title'),\n          message:     this.t('plugins.manageCatalog.imageLoad.error.exists.service.message', { svc: serviceName })\n        };\n\n        this.handleGrowlError(error, true);\n        btnCb(false);\n\n        return;\n      }\n\n      // Sets serviceValues with name, label, and selector\n      const serviceValues = this.parseServiceValues(name, serviceName);\n      const serviceResource = await this.$store.dispatch('management/create', serviceValues);\n\n      try {\n        await serviceResource.save();\n      } catch (e) {\n        this.handleGrowlError(e, true);\n        btnCb(false);\n\n        return;\n      }\n\n      try {\n        this.extensionSvc = await this.$store.dispatch('management/find', {\n          type:      SERVICE,\n          id:        `${ UI_PLUGIN_NAMESPACE }/${ serviceResource.metadata.name }`,\n          namespace: UI_PLUGIN_NAMESPACE\n        });\n\n        if (this.extensionSvc) {\n          this.extensionUrl = `http://${ this.extensionSvc.spec.clusterIP }:${ this.extensionSvc.spec.ports[0].port }`;\n        } else {\n          throw new Error('Error fetching extension service');\n        }\n      } catch (e) {\n        this.handleGrowlError(e, true);\n        btnCb(false);\n      }\n    },\n\n    async loadRepo(name, btnCb) {\n      const chartName = `${ name }-charts`;\n      const exists = this.allRepos.find((repo) => repo.metadata.name === chartName);\n\n      if (exists) {\n        const error = {\n          _statusText: this.t('plugins.manageCatalog.imageLoad.error.exists.repo.title'),\n          message:     this.t('plugins.manageCatalog.imageLoad.error.exists.repo.message', { repo: chartName })\n        };\n\n        this.handleGrowlError(error);\n        btnCb(false);\n        this.clean();\n\n        return;\n      }\n\n      // Set repoValues with name, label, and url\n      const repoValues = this.parseRepoValues(chartName);\n\n      this.extensionRepo = await this.$store.dispatch('management/create', repoValues);\n\n      try {\n        await this.extensionRepo.save();\n      } catch (e) {\n        this.handleGrowlError(e, true);\n        btnCb(false);\n      }\n    },\n\n    parseDeploymentValues(name) {\n      let out = {};\n\n      this.$set(this.deploymentValues.metadata, 'name', name);\n\n      const addLabel = { [UI_PLUGIN_LABELS.CATALOG_IMAGE]: name };\n      const addTo = ['metadata.labels', 'spec.selector.matchLabels', 'spec.template.metadata.labels'];\n\n      // Populates workloadselector labels\n      out = this.assignLabels(this.deploymentValues, addLabel, addTo);\n\n      if (this.imagePullSecrets.length) {\n        out.spec.template.spec.imagePullSecrets = this.imagePullSecrets.map((secret) => {\n          return { name: secret };\n        });\n      }\n\n      return out;\n    },\n\n    parseServiceValues(name, serviceName) {\n      const out = this.serviceValues;\n\n      out.metadata.name = serviceName;\n      out.metadata.labels[UI_PLUGIN_LABELS.CATALOG_IMAGE] = name;\n      out.spec.selector[UI_PLUGIN_LABELS.CATALOG_IMAGE] = name;\n\n      return out;\n    },\n\n    parseRepoValues(chartName) {\n      const out = this.repoValues;\n\n      out.metadata.name = chartName;\n      out.metadata.labels[UI_PLUGIN_LABELS.CATALOG_IMAGE] = this.deploymentValues.metadata.name;\n      out.spec.url = this.extensionUrl;\n\n      return out;\n    },\n\n    assignLabels(source, labels, args) {\n      for (let i = 0; i < args.length; i++) {\n        const path = args[i].split('.');\n        let currentObj = source;\n\n        for (let j = 0; j < path.length - 1; j++) {\n          currentObj = currentObj[path[j]];\n        }\n\n        currentObj[path[path.length - 1]] = labels;\n      }\n\n      return source;\n    },\n\n    extractImageVersion(image) {\n      // Returns the version number with optional pre-release identifiers\n      const regex = /:(\\d+\\.\\d+\\.\\d+([-\\w\\d]+)*)$/;\n      const matches = regex.exec(image);\n\n      if (matches) {\n        return matches[1];\n      }\n\n      return null;\n    },\n\n    extractImageName(image) {\n      // Returns the name within the image that prefixes the version number\n      const regex = /\\/([^/:]+)(?::\\d+\\.\\d+\\.\\d+(-[a-zA-Z0-9]+)?|$)/;\n      const matches = regex.exec(image);\n\n      if (matches) {\n        return matches[1];\n      }\n\n      return null;\n    },\n\n    clean() {\n      // Remove failed resources\n      if (this.extensionDeployment) {\n        this.extensionDeployment.remove();\n      }\n      if (this.extensionSvc) {\n        this.extensionSvc.remove();\n      }\n      if (this.extensionRepo) {\n        this.extensionRepo.remove();\n      }\n    },\n\n    handleGrowlError(e, clean = false) {\n      const error = e?.data || e;\n\n      this.$store.dispatch('growl/error', {\n        title:   error._statusText,\n        message: error.message,\n        timeout: 5000,\n      }, { root: true });\n\n      if (clean) {\n        this.clean();\n      }\n    }\n  }\n};\n</script>\n\n<template>\n  <app-modal\n    v-if=\"showModal\"\n    name=\"catalogLoadDialog\"\n    height=\"auto\"\n    :scrollable=\"true\"\n    @close=\"closeDialog()\"\n  >\n    <Loading\n      v-if=\"$fetchState.loading\"\n      mode=\"relative\"\n    />\n    <div\n      v-else\n      class=\"plugin-install-dialog\"\n    >\n      <template>\n        <div>\n          <h4>\n            {{ t('plugins.manageCatalog.imageLoad.load') }}\n          </h4>\n          <p>\n            {{ t('plugins.manageCatalog.imageLoad.prompt') }}\n          </p>\n\n          <div class=\"custom mt-10\">\n            <Banner\n              color=\"info\"\n              :label=\"t('plugins.manageCatalog.imageLoad.banner')\"\n              class=\"mt-10\"\n            />\n          </div>\n\n          <div class=\"custom mt-10\">\n            <div class=\"fields\">\n              <LabeledInput\n                v-model.trim=\"deploymentValues.spec.template.spec.containers[0].image\"\n                label-key=\"plugins.manageCatalog.imageLoad.fields.image.label\"\n                placeholder-key=\"plugins.manageCatalog.imageLoad.fields.image.placeholder\"\n              />\n            </div>\n          </div>\n          <div class=\"custom mt-10\">\n            <div class=\"fields\">\n              <LabeledSelect\n                v-model=\"imagePullSecrets\"\n                :label=\"t('plugins.manageCatalog.imageLoad.fields.imagePullSecrets.label')\"\n                :tooltip=\"t('plugins.manageCatalog.imageLoad.fields.imagePullSecrets.tooltip')\"\n                :multiple=\"true\"\n                :taggable=\"true\"\n                :options=\"imagePullNamespacedSecrets\"\n                option-label=\"metadata.name\"\n                :reduce=\"service => service.metadata.name\"\n              />\n              <Banner\n                color=\"warning\"\n                class=\"mt-10\"\n              >\n                <span v-clean-html=\"t('plugins.manageCatalog.imageLoad.fields.secrets.banner', {}, true)\" />\n              </Banner>\n            </div>\n          </div>\n        </div>\n      </template>\n\n      <div class=\"custom mt-10\">\n        <div class=\"fields\">\n          <div class=\"dialog-buttons mt-20\">\n            <button\n              class=\"btn role-secondary\"\n              data-testid=\"image-load-ext-modal-cancel-btn\"\n              @click=\"closeDialog()\"\n            >\n              {{ t('generic.cancel') }}\n            </button>\n            <AsyncButton\n              mode=\"load\"\n              data-testid=\"image-load-ext-modal-install-btn\"\n              @click=\"loadImage\"\n            />\n          </div>\n        </div>\n      </div>\n    </div>\n  </app-modal>\n</template>\n\n<style lang=\"scss\" scoped>\n  .plugin-install-dialog {\n    padding: 10px;\n\n    h4 {\n      font-weight: bold;\n    }\n\n    .dialog-panel {\n      display: flex;\n      flex-direction: column;\n      min-height: 100px;\n\n      p {\n        margin-bottom: 5px;\n      }\n\n      .dialog-info {\n        flex: 1;\n      }\n    }\n\n    .dialog-buttons {\n      display: flex;\n      justify-content: flex-end;\n      margin-top: 10px;\n\n      > *:not(:last-child) {\n        margin-right: 10px;\n      }\n    }\n  }\n</style>\n"]}]}