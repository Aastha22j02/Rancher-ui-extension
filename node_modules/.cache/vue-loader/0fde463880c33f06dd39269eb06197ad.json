{"remainingRequest":"/home/ubuntu/suseconf/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ubuntu/suseconf/node_modules/@rancher/shell/pages/c/_cluster/settings/links.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/ubuntu/suseconf/node_modules/@rancher/shell/pages/c/_cluster/settings/links.vue","mtime":1725338146566},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js","mtime":1725271298942},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1725271300920}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBMb2FkaW5nIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL0xvYWRpbmcnOwppbXBvcnQgQXN5bmNCdXR0b24gZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvQXN5bmNCdXR0b24nOwppbXBvcnQgQmFubmVyIGZyb20gJ0Bjb21wb25lbnRzL0Jhbm5lci9CYW5uZXIudnVlJzsKaW1wb3J0IHsgTUFOQUdFTUVOVCB9IGZyb20gJ0BzaGVsbC9jb25maWcvdHlwZXMnOwppbXBvcnQgeyBmZXRjaE9yQ3JlYXRlU2V0dGluZyB9IGZyb20gJ0BzaGVsbC91dGlscy9zZXR0aW5ncyc7CmltcG9ydCB7IFNFVFRJTkcgfSBmcm9tICdAc2hlbGwvY29uZmlnL3NldHRpbmdzJzsKaW1wb3J0IHsgX0VESVQsIF9WSUVXIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy9xdWVyeS1wYXJhbXMnOwppbXBvcnQgS2V5VmFsdWUgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvZm9ybS9LZXlWYWx1ZSc7CmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICd2dWV4JzsKaW1wb3J0IHsgaXNSYW5jaGVyUHJpbWUgfSBmcm9tICdAc2hlbGwvY29uZmlnL3ZlcnNpb24nOwppbXBvcnQgRGVmYXVsdExpbmtzRWRpdG9yIGZyb20gJy4vRGVmYXVsdExpbmtzRWRpdG9yJzsKaW1wb3J0IHsgQ1VTVE9NX0xJTktTX0NPTExFQ1RJVkVfVkVSU0lPTiwgZmV0Y2hMaW5rcyB9IGZyb20gJ0BzaGVsbC9jb25maWcvaG9tZS1saW5rcyc7CmltcG9ydCBUYWJUaXRsZSBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9UYWJUaXRsZSc7CgpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgS2V5VmFsdWUsCiAgICBMb2FkaW5nLAogICAgQXN5bmNCdXR0b24sCiAgICBCYW5uZXIsCiAgICBEZWZhdWx0TGlua3NFZGl0b3IsCiAgICBUYWJUaXRsZQogIH0sCiAgYXN5bmMgZmV0Y2goKSB7CiAgICB0aGlzLnZhbHVlID0gYXdhaXQgZmV0Y2hMaW5rcyh0aGlzLiRzdG9yZSwgdGhpcy5oYXNTdXBwb3J0LCBmYWxzZSwgKHN0cikgPT4gdGhpcy50KHN0cikpOwogIH0sCgogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBkZWZhdWx0c0Rpc2FibGVkOiB0cnVlLAogICAgICBpc1JhbmNoZXJQcmltZTogICBpc1JhbmNoZXJQcmltZSgpLAogICAgICB1aUN1c3RvbUxpbmtzOiAgICB7fSwKICAgICAgYmFubmVyVmFsOiAgICAgICAge30sCiAgICAgIHZhbHVlOiAgICAgICAgICAgIFtdLAogICAgICBlcnJvcnM6ICAgICAgICAgICBbXSwKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgLi4ubWFwR2V0dGVycyh7IG11bHRpV2l0aEZhbGxiYWNrOiAnaTE4bi9tdWx0aVdpdGhGYWxsYmFjaycgfSksCgogICAgbW9kZSgpIHsKICAgICAgY29uc3Qgc2NoZW1hID0gdGhpcy4kc3RvcmUuZ2V0dGVyc1tgbWFuYWdlbWVudC9zY2hlbWFGb3JgXShNQU5BR0VNRU5ULlNFVFRJTkcpOwoKICAgICAgcmV0dXJuIHNjaGVtYT8ucmVzb3VyY2VNZXRob2RzPy5pbmNsdWRlcygnUFVUJykgPyBfRURJVCA6IF9WSUVXOwogICAgfSwKCiAgICBhbGxWYWx1ZXMoKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgdmVyc2lvbjogIENVU1RPTV9MSU5LU19DT0xMRUNUSVZFX1ZFUlNJT04sCiAgICAgICAgZGVmYXVsdHM6IHRoaXMudmFsdWUuZGVmYXVsdHMuZmlsdGVyKChvYmopID0+IG9iai5lbmFibGVkKS5tYXAoKG9iaikgPT4gb2JqLmtleSksCiAgICAgICAgY3VzdG9tOiAgIHRoaXMudmFsdWUuY3VzdG9tCiAgICAgIH07CiAgICB9LAoKICAgIGhhc1N1cHBvcnQoKSB7CiAgICAgIHJldHVybiBpc1JhbmNoZXJQcmltZSgpIHx8IHRoaXMuJHN0b3JlLmdldHRlcnNbJ21hbmFnZW1lbnQvYnlJZCddKE1BTkFHRU1FTlQuU0VUVElORywgU0VUVElORy5TVVBQT1JURUQgKT8udmFsdWUgPT09ICd0cnVlJzsKICAgIH0sCiAgfSwKICBtZXRob2RzOiB7CiAgICBkZXByZWNhdGVJc3N1ZUxpbmtzKCkgewogICAgICBpZiAodGhpcy51aUlzc3Vlc1NldHRpbmcudmFsdWUgfHwgdGhpcy51aUlzc3Vlc1NldHRpbmcudmFsdWUpIHsKICAgICAgICB0aGlzLnVpSXNzdWVzU2V0dGluZy52YWx1ZSA9ICcnOwogICAgICAgIHRoaXMudWlDb21tdW5pdHlTZXR0aW5nLnZhbHVlID0gJyc7CgogICAgICAgIHJldHVybiB0aGlzLnVpSXNzdWVzU2V0dGluZy5zYXZlKCk7CiAgICAgIH0KICAgIH0sCgogICAgYXN5bmMgc2F2ZShidG5DQikgewogICAgICB0aGlzLmVycm9ycyA9IFtdOwogICAgICB0cnkgewogICAgICAgIGNvbnN0IHVpQ3VzdG9tTGlua3MgPSBhd2FpdCBmZXRjaE9yQ3JlYXRlU2V0dGluZyh0aGlzLiRzdG9yZSwgU0VUVElORy5VSV9DVVNUT01fTElOS1MsICcnKTsKCiAgICAgICAgdWlDdXN0b21MaW5rcy52YWx1ZSA9IEpTT04uc3RyaW5naWZ5KHRoaXMuYWxsVmFsdWVzKTsKCiAgICAgICAgYXdhaXQgdWlDdXN0b21MaW5rcy5zYXZlKCk7CgogICAgICAgIHRoaXMudmFsdWUgPSBhd2FpdCBmZXRjaExpbmtzKHRoaXMuJHN0b3JlLCB0aGlzLmhhc1N1cHBvcnQsIGZhbHNlLCAoc3RyKSA9PiB0aGlzLnQoc3RyKSk7CiAgICAgICAgYnRuQ0IodHJ1ZSk7CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIHRoaXMuZXJyb3JzLnB1c2goZXJyKTsKICAgICAgICBidG5DQihmYWxzZSk7CiAgICAgIH0KICAgIH0sCiAgfQp9Owo="},{"version":3,"sources":["links.vue"],"names":[],"mappings":";AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"links.vue","sourceRoot":"node_modules/@rancher/shell/pages/c/_cluster/settings","sourcesContent":["<script>\nimport Loading from '@shell/components/Loading';\nimport AsyncButton from '@shell/components/AsyncButton';\nimport Banner from '@components/Banner/Banner.vue';\nimport { MANAGEMENT } from '@shell/config/types';\nimport { fetchOrCreateSetting } from '@shell/utils/settings';\nimport { SETTING } from '@shell/config/settings';\nimport { _EDIT, _VIEW } from '@shell/config/query-params';\nimport KeyValue from '@shell/components/form/KeyValue';\nimport { mapGetters } from 'vuex';\nimport { isRancherPrime } from '@shell/config/version';\nimport DefaultLinksEditor from './DefaultLinksEditor';\nimport { CUSTOM_LINKS_COLLECTIVE_VERSION, fetchLinks } from '@shell/config/home-links';\nimport TabTitle from '@shell/components/TabTitle';\n\nexport default {\n  components: {\n    KeyValue,\n    Loading,\n    AsyncButton,\n    Banner,\n    DefaultLinksEditor,\n    TabTitle\n  },\n  async fetch() {\n    this.value = await fetchLinks(this.$store, this.hasSupport, false, (str) => this.t(str));\n  },\n\n  data() {\n    return {\n      defaultsDisabled: true,\n      isRancherPrime:   isRancherPrime(),\n      uiCustomLinks:    {},\n      bannerVal:        {},\n      value:            [],\n      errors:           [],\n    };\n  },\n  computed: {\n    ...mapGetters({ multiWithFallback: 'i18n/multiWithFallback' }),\n\n    mode() {\n      const schema = this.$store.getters[`management/schemaFor`](MANAGEMENT.SETTING);\n\n      return schema?.resourceMethods?.includes('PUT') ? _EDIT : _VIEW;\n    },\n\n    allValues() {\n      return {\n        version:  CUSTOM_LINKS_COLLECTIVE_VERSION,\n        defaults: this.value.defaults.filter((obj) => obj.enabled).map((obj) => obj.key),\n        custom:   this.value.custom\n      };\n    },\n\n    hasSupport() {\n      return isRancherPrime() || this.$store.getters['management/byId'](MANAGEMENT.SETTING, SETTING.SUPPORTED )?.value === 'true';\n    },\n  },\n  methods: {\n    deprecateIssueLinks() {\n      if (this.uiIssuesSetting.value || this.uiIssuesSetting.value) {\n        this.uiIssuesSetting.value = '';\n        this.uiCommunitySetting.value = '';\n\n        return this.uiIssuesSetting.save();\n      }\n    },\n\n    async save(btnCB) {\n      this.errors = [];\n      try {\n        const uiCustomLinks = await fetchOrCreateSetting(this.$store, SETTING.UI_CUSTOM_LINKS, '');\n\n        uiCustomLinks.value = JSON.stringify(this.allValues);\n\n        await uiCustomLinks.save();\n\n        this.value = await fetchLinks(this.$store, this.hasSupport, false, (str) => this.t(str));\n        btnCB(true);\n      } catch (err) {\n        this.errors.push(err);\n        btnCB(false);\n      }\n    },\n  }\n};\n</script>\n<template>\n  <Loading v-if=\"$fetchState.pending\" />\n  <div v-else>\n    <h1 class=\"mb-20\">\n      <TabTitle>{{ t(\"customLinks.label\") }}</TabTitle>\n    </h1>\n    <div>\n      <label class=\"text-label\">\n        {{ t(`customLinks.description`, {}, true) }}\n      </label>\n    </div>\n    <div class=\"mt-20\">\n      <KeyValue\n        v-model=\"value.custom\"\n        :title=\"'Custom Links'\"\n        :as-map=\"false\"\n        key-name=\"label\"\n        :key-label=\"t('customLinks.settings.keyLabel')\"\n        :value-label=\"t('customLinks.settings.valueLabel')\"\n        :add-label=\"t('customLinks.addLink')\"\n        :read-allowed=\"false\"\n        :protip=\"false\"\n        :mode=\"mode\"\n      />\n    </div>\n    <div class=\"ui-links-setting mt-20\">\n      <DefaultLinksEditor\n        v-model=\"value.defaults\"\n        :mode=\"mode\"\n      />\n    </div>\n    <template v-for=\"err in errors\">\n      <Banner\n        :key=\"err\"\n        color=\"error\"\n        :label=\"err\"\n      />\n    </template>\n    <div\n      v-if=\"mode === 'edit'\"\n      class=\"mt-20\"\n    >\n      <AsyncButton\n        class=\"pull-right\"\n        mode=\"apply\"\n        @click=\"save\"\n      />\n    </div>\n  </div>\n</template>\n<style scoped lang='scss'>\n.overlay {\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  top: 0;\n  left: 0;\n  background-color: var(--overlay-bg);\n  z-index: 1;\n}\n.ui-links-setting {\n  P {\n    line-height: 1.25;\n    margin-bottom: 10px;\n  }\n\n  .underline {\n    text-decoration: underline;\n  }\n}\n.action {\n  display: flex;\n  input {\n    margin-right: 5px;\n  }\n}\n</style>\n"]}]}