{"remainingRequest":"/home/ubuntu/suseconf/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ubuntu/suseconf/node_modules/@rancher/shell/components/EtcdInfoBanner.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/ubuntu/suseconf/node_modules/@rancher/shell/components/EtcdInfoBanner.vue","mtime":1725338146566},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js","mtime":1725271298942},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1725271300920}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgeyBCYW5uZXIgfSBmcm9tICdAY29tcG9uZW50cy9CYW5uZXInOw0KaW1wb3J0IExvYWRpbmcgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvTG9hZGluZyc7DQppbXBvcnQgeyBtYXBHZXR0ZXJzIH0gZnJvbSAndnVleCc7DQppbXBvcnQgeyBoYXNMZWFkZXIsIGxlYWRlckNoYW5nZXMsIGZhaWxlZFByb3Bvc2FscyB9IGZyb20gJ0BzaGVsbC91dGlscy9ncmFmYW5hJzsNCmltcG9ydCB7IENBVEFMT0cgfSBmcm9tICdAc2hlbGwvY29uZmlnL3R5cGVzJzsNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBjb21wb25lbnRzOiB7IEJhbm5lciwgTG9hZGluZyB9LA0KICBhc3luYyBmZXRjaCgpIHsNCiAgICBjb25zdCBpblN0b3JlID0gdGhpcy4kc3RvcmUuZ2V0dGVyc1snY3VycmVudFByb2R1Y3QnXS5pblN0b3JlOw0KICAgIGxldCBtb25pdG9yaW5nVmVyc2lvbiA9ICcnOw0KDQogICAgaWYgKHRoaXMuJHN0b3JlLmdldHRlcnNbYCR7IGluU3RvcmUgfS9jYW5MaXN0YF0oQ0FUQUxPRy5BUFApKSB7DQogICAgICB0cnkgew0KICAgICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLiRzdG9yZS5kaXNwYXRjaChgJHsgaW5TdG9yZSB9L2ZpbmRgLCB7IHR5cGU6IENBVEFMT0cuQVBQLCBpZDogJ2NhdHRsZS1tb25pdG9yaW5nLXN5c3RlbS9yYW5jaGVyLW1vbml0b3JpbmcnIH0pOw0KDQogICAgICAgIG1vbml0b3JpbmdWZXJzaW9uID0gcmVzPy5jdXJyZW50VmVyc2lvbjsNCiAgICAgIH0gY2F0Y2ggKGVycikgew0KDQogICAgICB9DQogICAgfQ0KDQogICAgY29uc3QgbGVhZGVyID0gYXdhaXQgaGFzTGVhZGVyKG1vbml0b3JpbmdWZXJzaW9uLCB0aGlzLiRzdG9yZS5kaXNwYXRjaCwgdGhpcy5jdXJyZW50Q2x1c3Rlci5pZCk7DQoNCiAgICB0aGlzLmhhc0xlYWRlciA9IGxlYWRlciA/ICdZZXMnIDogJ05vJzsNCiAgICB0aGlzLmxlYWRlckNoYW5nZXMgPSBhd2FpdCBsZWFkZXJDaGFuZ2VzKG1vbml0b3JpbmdWZXJzaW9uLCB0aGlzLiRzdG9yZS5kaXNwYXRjaCwgdGhpcy5jdXJyZW50Q2x1c3Rlci5pZCk7DQogICAgdGhpcy5mYWlsZWRQcm9wb3NhbHMgPSBhd2FpdCBmYWlsZWRQcm9wb3NhbHMobW9uaXRvcmluZ1ZlcnNpb24sIHRoaXMuJHN0b3JlLmRpc3BhdGNoLCB0aGlzLmN1cnJlbnRDbHVzdGVyLmlkKTsNCiAgfSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgaGFzTGVhZGVyOiAgICAgICAnTm8nLA0KICAgICAgbGVhZGVyQ2hhbmdlczogICAwLA0KICAgICAgZmFpbGVkUHJvcG9zYWxzOiAwDQogICAgfTsNCiAgfSwNCiAgY29tcHV0ZWQ6IHsgLi4ubWFwR2V0dGVycyhbJ2N1cnJlbnRDbHVzdGVyJ10pIH0NCn07DQo="},{"version":3,"sources":["EtcdInfoBanner.vue"],"names":[],"mappings":";AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"EtcdInfoBanner.vue","sourceRoot":"node_modules/@rancher/shell/components","sourcesContent":["<script>\r\nimport { Banner } from '@components/Banner';\r\nimport Loading from '@shell/components/Loading';\r\nimport { mapGetters } from 'vuex';\r\nimport { hasLeader, leaderChanges, failedProposals } from '@shell/utils/grafana';\r\nimport { CATALOG } from '@shell/config/types';\r\n\r\nexport default {\r\n  components: { Banner, Loading },\r\n  async fetch() {\r\n    const inStore = this.$store.getters['currentProduct'].inStore;\r\n    let monitoringVersion = '';\r\n\r\n    if (this.$store.getters[`${ inStore }/canList`](CATALOG.APP)) {\r\n      try {\r\n        const res = await this.$store.dispatch(`${ inStore }/find`, { type: CATALOG.APP, id: 'cattle-monitoring-system/rancher-monitoring' });\r\n\r\n        monitoringVersion = res?.currentVersion;\r\n      } catch (err) {\r\n\r\n      }\r\n    }\r\n\r\n    const leader = await hasLeader(monitoringVersion, this.$store.dispatch, this.currentCluster.id);\r\n\r\n    this.hasLeader = leader ? 'Yes' : 'No';\r\n    this.leaderChanges = await leaderChanges(monitoringVersion, this.$store.dispatch, this.currentCluster.id);\r\n    this.failedProposals = await failedProposals(monitoringVersion, this.$store.dispatch, this.currentCluster.id);\r\n  },\r\n  data() {\r\n    return {\r\n      hasLeader:       'No',\r\n      leaderChanges:   0,\r\n      failedProposals: 0\r\n    };\r\n  },\r\n  computed: { ...mapGetters(['currentCluster']) }\r\n};\r\n</script>\r\n\r\n<template>\r\n  <Loading v-if=\"$fetchState.pending\" />\r\n  <Banner\r\n    v-else\r\n    class=\"banner\"\r\n    color=\"info\"\r\n  >\r\n    <div class=\"datum\">\r\n      <label>{{ t('etcdInfoBanner.hasLeader') }}</label> {{ hasLeader }},\r\n    </div>\r\n    <div class=\"datum\">\r\n      <label>{{ t('etcdInfoBanner.leaderChanges') }}</label> {{ leaderChanges }},\r\n    </div>\r\n    <div class=\"datum\">\r\n      <label>{{ t('etcdInfoBanner.failedProposals') }}</label> {{ failedProposals }}\r\n    </div>\r\n  </Banner>\r\n</template>\r\n\r\n<style lang='scss' scoped>\r\n    .banner {\r\n        display: flex;\r\n        justify-content: space-evenly;\r\n        align-items: center;\r\n\r\n        .datum {\r\n            text-align: center;\r\n            margin-right: 5px;\r\n        }\r\n\r\n        & ::v-deep label {\r\n            color: var(--info);\r\n        }\r\n    }\r\n\r\n</style>\r\n"]}]}