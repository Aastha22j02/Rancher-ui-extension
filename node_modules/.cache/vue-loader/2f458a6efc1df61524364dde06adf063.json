{"remainingRequest":"/home/ubuntu/suseconf/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ubuntu/suseconf/node_modules/@rancher/shell/edit/logging.banzaicloud.io.output/index.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/ubuntu/suseconf/node_modules/@rancher/shell/edit/logging.banzaicloud.io.output/index.vue","mtime":1725338146566},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js","mtime":1725271298942},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1725271300920}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBDcmVhdGVFZGl0VmlldyBmcm9tICdAc2hlbGwvbWl4aW5zL2NyZWF0ZS1lZGl0LXZpZXcnOwppbXBvcnQgTG9hZGluZyBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9Mb2FkaW5nJzsKaW1wb3J0IHsgTE9HR0lORywgU0NIRU1BIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy90eXBlcyc7CmltcG9ydCBUYWJiZWQgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvVGFiYmVkJzsKaW1wb3J0IFRhYiBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9UYWJiZWQvVGFiJzsKaW1wb3J0IENydVJlc291cmNlIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL0NydVJlc291cmNlJzsKaW1wb3J0IE5hbWVOc0Rlc2NyaXB0aW9uIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL2Zvcm0vTmFtZU5zRGVzY3JpcHRpb24nOwppbXBvcnQgTGFiZWxzIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL2Zvcm0vTGFiZWxzJzsKaW1wb3J0IExhYmVsZWRTZWxlY3QgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvZm9ybS9MYWJlbGVkU2VsZWN0JzsKaW1wb3J0IHsgQmFubmVyIH0gZnJvbSAnQGNvbXBvbmVudHMvQmFubmVyJzsKaW1wb3J0IHsgUFJPVklERVJTIH0gZnJvbSAnQHNoZWxsL21vZGVscy9sb2dnaW5nLmJhbnphaWNsb3VkLmlvLm91dHB1dCc7CmltcG9ydCB7IF9WSUVXIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy9xdWVyeS1wYXJhbXMnOwppbXBvcnQgeyBjbG9uZSwgc2V0IH0gZnJvbSAnQHNoZWxsL3V0aWxzL29iamVjdCc7CmltcG9ydCBpc0VxdWFsIGZyb20gJ2xvZGFzaC9pc0VxdWFsJzsKaW1wb3J0IGlzRW1wdHkgZnJvbSAnbG9kYXNoL2lzRW1wdHknOwppbXBvcnQganN5YW1sIGZyb20gJ2pzLXlhbWwnOwppbXBvcnQgeyBjcmVhdGVZYW1sIH0gZnJvbSAnQHNoZWxsL3V0aWxzL2NyZWF0ZS15YW1sJzsKaW1wb3J0IFlhbWxFZGl0b3IsIHsgRURJVE9SX01PREVTIH0gZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvWWFtbEVkaXRvcic7CgpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgQmFubmVyLCBDcnVSZXNvdXJjZSwgTGFiZWxzLCBMYWJlbGVkU2VsZWN0LCBOYW1lTnNEZXNjcmlwdGlvbiwgVGFiLCBUYWJiZWQsIFlhbWxFZGl0b3IsIExvYWRpbmcKICB9LCAvLwoKICBtaXhpbnM6IFtDcmVhdGVFZGl0Vmlld10sCgogIGFzeW5jIGZldGNoKCkgewogICAgY29uc3Qgc2NoZW1hcyA9IHRoaXMuJHN0b3JlLmdldHRlcnNbJ2NsdXN0ZXIvYWxsJ10oU0NIRU1BKTsKICAgIGNvbnN0IHJlc291cmNlU2NoZW1hID0gdGhpcy4kc3RvcmUuZ2V0dGVyc1snY2x1c3Rlci9ieUlkJ10oU0NIRU1BLCBMT0dHSU5HLk9VVFBVVCk7CiAgICBjb25zdCBzY2hlbWFEZWZpbml0aW9uID0gYXdhaXQgcmVzb3VyY2VTY2hlbWEuZmV0Y2hSZXNvdXJjZUZpZWxkcygpOwoKICAgIGxldCBidWZmZXJZYW1sID0gJyc7CgogICAgaWYgKCAhaXNFbXB0eSh0aGlzLnZhbHVlLnNwZWNbdGhpcy5zZWxlY3RlZFByb3ZpZGVyXT8uYnVmZmVyKSApIHsKICAgICAgYnVmZmVyWWFtbCA9IGpzeWFtbC5kdW1wKHRoaXMudmFsdWUuc3BlY1t0aGlzLnNlbGVjdGVkUHJvdmlkZXJdLmJ1ZmZlcik7CiAgICB9IGVsc2UgaWYgKHNjaGVtYURlZmluaXRpb24pIHsKICAgICAgYnVmZmVyWWFtbCA9IGNyZWF0ZVlhbWwoCiAgICAgICAgc2NoZW1hcywKICAgICAgICBgaW8uYmFuemFpY2xvdWQubG9nZ2luZy52MWJldGExLk91dHB1dC5zcGVjLiR7IHRoaXMuc2VsZWN0ZWRQcm92aWRlciB9LmJ1ZmZlcmAsCiAgICAgICAge30sCiAgICAgICAgdHJ1ZSwKICAgICAgICAxLAogICAgICAgICcnLAogICAgICAgIExPR0dJTkcuT1VUUFVUCiAgICAgICk7CgogICAgICAvLyBjcmVhdGVZYW1sIGRvZXNuJ3Qgc3VwcG9ydCBwYXNzaW5nIHJlZmVyZW5jZSB0eXBlcyAoYXJyYXksIG1hcCkgYXMgdGhlIGZpcnN0IHR5cGUuIEFzIHN1Y2gKICAgICAgLy8gSSdtIG1hbmlwdWxhdGluZyB0aGUgb3V0cHV0IHNpbmNlIEknbSBub3Qgc3VyZSBpdCdzIHNvbWV0aGluZyB3ZSB3YW50IHRvIGFjdHVhbGx5IHN1cHBvcnQKICAgICAgLy8gc2VlaW5nIGFzIGl0J3MgcmVhbGx5IGNyZWF0ZVJlc291cmNlWWFtbCBhbmQgdGhpcyBoZXJlIGlzIGEgZ3JheSBhcmVhIGJldHdlZW4gc3Bvb2ZlZCB0eXBlcwogICAgICAvLyBhbmQganVzdCBhIGZpZWxkIHdpdGhpbiBhIHNwZWMuCiAgICAgIGJ1ZmZlcllhbWwgPSBidWZmZXJZYW1sLnN1YnN0cmluZyhidWZmZXJZYW1sLmluZGV4T2YoJ1xuJykgKyAxKS5yZXBsYWNlKC8jIHsyfS9nLCAnIycpOwogICAgfQoKICAgIGlmIChidWZmZXJZYW1sLmxlbmd0aCkgewogICAgICB0aGlzLmJ1ZmZlcllhbWwgPSBidWZmZXJZYW1sOwogICAgICB0aGlzLmluaXRpYWxCdWZmZXJZYW1sID0gYnVmZmVyWWFtbDsKICAgIH0KICB9LAoKICBkYXRhKCkgewogICAgaWYgKHRoaXMuaXNDcmVhdGUpIHsKICAgICAgdGhpcy52YWx1ZS5tZXRhZGF0YS5uYW1lc3BhY2UgPSAnZGVmYXVsdCc7CiAgICB9CgogICAgc2V0KHRoaXMudmFsdWUsICdzcGVjJywgdGhpcy52YWx1ZS5zcGVjIHx8IHt9KTsKCiAgICBjb25zdCBwcm92aWRlcnMgPSBQUk9WSURFUlMubWFwKChwcm92aWRlcikgPT4gKHsKICAgICAgLi4ucHJvdmlkZXIsCiAgICAgIHZhbHVlOiBwcm92aWRlci5uYW1lLAogICAgICBsYWJlbDogdGhpcy50KHByb3ZpZGVyLmxhYmVsS2V5KQogICAgfSkpOwoKICAgIGlmICh0aGlzLm1vZGUgIT09IF9WSUVXKSB7CiAgICAgIHByb3ZpZGVycy5mb3JFYWNoKChwcm92aWRlcikgPT4gewogICAgICAgIHRoaXMuJHNldCh0aGlzLnZhbHVlLnNwZWMsIHByb3ZpZGVyLm5hbWUsIHRoaXMudmFsdWUuc3BlY1twcm92aWRlci5uYW1lXSB8fCBjbG9uZShwcm92aWRlci5kZWZhdWx0KSk7CiAgICAgIH0pOwogICAgfQoKICAgIGNvbnN0IHNlbGVjdGVkUHJvdmlkZXJzID0gcHJvdmlkZXJzLmZpbHRlcigocHJvdmlkZXIpID0+IHsKICAgICAgY29uc3Qgc3BlY1Byb3ZpZGVyID0gdGhpcy52YWx1ZS5zcGVjW3Byb3ZpZGVyLm5hbWVdOwogICAgICBjb25zdCBjb3JyZWN0ZWRTcGVjUHJvdmlkZXIgPSBwcm92aWRlci5uYW1lID09PSAnZm9yd2FyZCcgPyBzcGVjUHJvdmlkZXI/LnNlcnZlcnM/LlswXSB8fCB7fSA6IHNwZWNQcm92aWRlcjsKCiAgICAgIHJldHVybiAhaXNFbXB0eShjb3JyZWN0ZWRTcGVjUHJvdmlkZXIpICYmICFpc0VxdWFsKGNvcnJlY3RlZFNwZWNQcm92aWRlciwgcHJvdmlkZXIuZGVmYXVsdCk7CiAgICB9KTsKCiAgICBjb25zdCBoYXNNdWx0aXBsZVByb3ZpZGVyc1NlbGVjdGVkID0gc2VsZWN0ZWRQcm92aWRlcnM/Lmxlbmd0aCA+IDE7CgogICAgY29uc3Qgc2VsZWN0ZWRQcm92aWRlciA9IHNlbGVjdGVkUHJvdmlkZXJzPy5bMF0/LnZhbHVlIHx8IHByb3ZpZGVyc1swXS52YWx1ZTsKCiAgICByZXR1cm4gewogICAgICBidWZmZXJZYW1sOiAnJywKICAgICAgcHJvdmlkZXJzLAogICAgICBzZWxlY3RlZFByb3ZpZGVyLAogICAgICBoYXNNdWx0aXBsZVByb3ZpZGVyc1NlbGVjdGVkLAogICAgICBMT0dHSU5HCiAgICB9OwogIH0sCgogIGNvbXB1dGVkOiB7CiAgICBFRElUT1JfTU9ERVMoKSB7CiAgICAgIHJldHVybiBFRElUT1JfTU9ERVM7CiAgICB9LAogICAgZW5hYmxlZFByb3ZpZGVycygpIHsKICAgICAgcmV0dXJuIHRoaXMucHJvdmlkZXJzLmZpbHRlcigocCkgPT4gcC5lbmFibGVkKTsKICAgIH0sCiAgICBpc05hbWVzcGFjZWQoKSB7CiAgICAgIHJldHVybiB0aGlzLnZhbHVlLnR5cGUgIT09IExPR0dJTkc/LkNMVVNURVJfT1VUUFVUOwogICAgfSwKICAgIGNydU1vZGUoKSB7CiAgICAgIGlmICh0aGlzLmhhc011bHRpcGxlUHJvdmlkZXJzU2VsZWN0ZWQgfHwgIXRoaXMudmFsdWUuYWxsUHJvdmlkZXJzU3VwcG9ydGVkKSB7CiAgICAgICAgcmV0dXJuIF9WSUVXOwogICAgICB9CgogICAgICByZXR1cm4gdGhpcy5tb2RlOwogICAgfQogIH0sCgogIG1ldGhvZHM6IHsKICAgIGdldENvbXBvbmVudChuYW1lKSB7CiAgICAgIHJldHVybiByZXF1aXJlKGAuL3Byb3ZpZGVycy8keyBuYW1lIH1gKS5kZWZhdWx0OwogICAgfSwKICAgIGxhdW5jaChwcm92aWRlcikgewogICAgICB0aGlzLiRyZWZzLnRhYmJlZC5zZWxlY3QocHJvdmlkZXIubmFtZSk7CiAgICB9LAogICAgc2F2ZVNldHRpbmdzKGRvbmUpIHsKICAgICAgY29uc3QgdCA9IHRoaXMuJHN0b3JlLmdldHRlcnNbJ2kxOG4vdCddOwoKICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRQcm92aWRlciA9PT0gJ2xva2knKSB7CiAgICAgICAgY29uc3QgdXJsQ2hlY2sgPSBbJ2h0dHBzOi8vJywgJ2h0dHA6Ly8nXS5zb21lKChjaGVja1ZhbHVlKSA9PiB0aGlzLnZhbHVlLnNwZWNbJ2xva2knXS51cmwudG9Mb3dlckNhc2UoKS5zdGFydHNXaXRoKGNoZWNrVmFsdWUpKTsKICAgICAgICBjb25zdCBpc0xva2lIdHRwcyA9IHRoaXMudmFsdWUuc3BlY1snbG9raSddLnVybCA/IHVybENoZWNrIDogdW5kZWZpbmVkOwoKICAgICAgICBpZiAoIWlzTG9raUh0dHBzKSB7CiAgICAgICAgICB0aGlzLmVycm9ycyA9IFt0KCdsb2dnaW5nLmxva2kudXJsSW52YWxpZCcpXTsKCiAgICAgICAgICByZXR1cm4gZG9uZShmYWxzZSk7CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLmVycm9ycyA9IFtdOwoKICAgICAgdGhpcy52YWx1ZS5zcGVjID0geyBbdGhpcy5zZWxlY3RlZFByb3ZpZGVyXTogdGhpcy52YWx1ZS5zcGVjW3RoaXMuc2VsZWN0ZWRQcm92aWRlcl0gfTsKCiAgICAgIGNvbnN0IGJ1ZmZlckpzb24gPSBqc3lhbWwubG9hZCh0aGlzLmJ1ZmZlcllhbWwpOwoKICAgICAgaWYgKCFpc0VtcHR5KGJ1ZmZlckpzb24pKSB7CiAgICAgICAgdGhpcy52YWx1ZS5zcGVjW3RoaXMuc2VsZWN0ZWRQcm92aWRlcl0uYnVmZmVyID0gYnVmZmVySnNvbjsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRkZWxldGUodGhpcy52YWx1ZS5zcGVjW3RoaXMuc2VsZWN0ZWRQcm92aWRlcl0sICdidWZmZXInKTsKICAgICAgfQogICAgICB0aGlzLnNhdmUoZG9uZSk7CiAgICB9LAogICAgdGFiQ2hhbmdlZCh7IHRhYiB9KSB7CiAgICAgIGlmICggdGFiLm5hbWUgPT09ICdidWZmZXInICkgewogICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICAgIGlmICggdGhpcy4kcmVmcy55YW1sICkgewogICAgICAgICAgICB0aGlzLiRyZWZzLnlhbWwucmVmcmVzaCgpOwogICAgICAgICAgICB0aGlzLiRyZWZzLnlhbWwuZm9jdXMoKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIG9uWWFtbEVkaXRvclJlYWR5KGNtKSB7CiAgICAgIGNtLmdldE1vZGUoKS5mb2xkID0gJ3lhbWxjb21tZW50cyc7CiAgICAgIGNtLmV4ZWNDb21tYW5kKCdmb2xkQWxsJyk7CiAgICAgIGNtLmV4ZWNDb21tYW5kKCd1bmZvbGQnKTsKICAgIH0sCiAgfQp9Owo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"node_modules/@rancher/shell/edit/logging.banzaicloud.io.output","sourcesContent":["<script>\nimport CreateEditView from '@shell/mixins/create-edit-view';\nimport Loading from '@shell/components/Loading';\nimport { LOGGING, SCHEMA } from '@shell/config/types';\nimport Tabbed from '@shell/components/Tabbed';\nimport Tab from '@shell/components/Tabbed/Tab';\nimport CruResource from '@shell/components/CruResource';\nimport NameNsDescription from '@shell/components/form/NameNsDescription';\nimport Labels from '@shell/components/form/Labels';\nimport LabeledSelect from '@shell/components/form/LabeledSelect';\nimport { Banner } from '@components/Banner';\nimport { PROVIDERS } from '@shell/models/logging.banzaicloud.io.output';\nimport { _VIEW } from '@shell/config/query-params';\nimport { clone, set } from '@shell/utils/object';\nimport isEqual from 'lodash/isEqual';\nimport isEmpty from 'lodash/isEmpty';\nimport jsyaml from 'js-yaml';\nimport { createYaml } from '@shell/utils/create-yaml';\nimport YamlEditor, { EDITOR_MODES } from '@shell/components/YamlEditor';\n\nexport default {\n  components: {\n    Banner, CruResource, Labels, LabeledSelect, NameNsDescription, Tab, Tabbed, YamlEditor, Loading\n  }, //\n\n  mixins: [CreateEditView],\n\n  async fetch() {\n    const schemas = this.$store.getters['cluster/all'](SCHEMA);\n    const resourceSchema = this.$store.getters['cluster/byId'](SCHEMA, LOGGING.OUTPUT);\n    const schemaDefinition = await resourceSchema.fetchResourceFields();\n\n    let bufferYaml = '';\n\n    if ( !isEmpty(this.value.spec[this.selectedProvider]?.buffer) ) {\n      bufferYaml = jsyaml.dump(this.value.spec[this.selectedProvider].buffer);\n    } else if (schemaDefinition) {\n      bufferYaml = createYaml(\n        schemas,\n        `io.banzaicloud.logging.v1beta1.Output.spec.${ this.selectedProvider }.buffer`,\n        {},\n        true,\n        1,\n        '',\n        LOGGING.OUTPUT\n      );\n\n      // createYaml doesn't support passing reference types (array, map) as the first type. As such\n      // I'm manipulating the output since I'm not sure it's something we want to actually support\n      // seeing as it's really createResourceYaml and this here is a gray area between spoofed types\n      // and just a field within a spec.\n      bufferYaml = bufferYaml.substring(bufferYaml.indexOf('\\n') + 1).replace(/# {2}/g, '#');\n    }\n\n    if (bufferYaml.length) {\n      this.bufferYaml = bufferYaml;\n      this.initialBufferYaml = bufferYaml;\n    }\n  },\n\n  data() {\n    if (this.isCreate) {\n      this.value.metadata.namespace = 'default';\n    }\n\n    set(this.value, 'spec', this.value.spec || {});\n\n    const providers = PROVIDERS.map((provider) => ({\n      ...provider,\n      value: provider.name,\n      label: this.t(provider.labelKey)\n    }));\n\n    if (this.mode !== _VIEW) {\n      providers.forEach((provider) => {\n        this.$set(this.value.spec, provider.name, this.value.spec[provider.name] || clone(provider.default));\n      });\n    }\n\n    const selectedProviders = providers.filter((provider) => {\n      const specProvider = this.value.spec[provider.name];\n      const correctedSpecProvider = provider.name === 'forward' ? specProvider?.servers?.[0] || {} : specProvider;\n\n      return !isEmpty(correctedSpecProvider) && !isEqual(correctedSpecProvider, provider.default);\n    });\n\n    const hasMultipleProvidersSelected = selectedProviders?.length > 1;\n\n    const selectedProvider = selectedProviders?.[0]?.value || providers[0].value;\n\n    return {\n      bufferYaml: '',\n      providers,\n      selectedProvider,\n      hasMultipleProvidersSelected,\n      LOGGING\n    };\n  },\n\n  computed: {\n    EDITOR_MODES() {\n      return EDITOR_MODES;\n    },\n    enabledProviders() {\n      return this.providers.filter((p) => p.enabled);\n    },\n    isNamespaced() {\n      return this.value.type !== LOGGING?.CLUSTER_OUTPUT;\n    },\n    cruMode() {\n      if (this.hasMultipleProvidersSelected || !this.value.allProvidersSupported) {\n        return _VIEW;\n      }\n\n      return this.mode;\n    }\n  },\n\n  methods: {\n    getComponent(name) {\n      return require(`./providers/${ name }`).default;\n    },\n    launch(provider) {\n      this.$refs.tabbed.select(provider.name);\n    },\n    saveSettings(done) {\n      const t = this.$store.getters['i18n/t'];\n\n      if (this.selectedProvider === 'loki') {\n        const urlCheck = ['https://', 'http://'].some((checkValue) => this.value.spec['loki'].url.toLowerCase().startsWith(checkValue));\n        const isLokiHttps = this.value.spec['loki'].url ? urlCheck : undefined;\n\n        if (!isLokiHttps) {\n          this.errors = [t('logging.loki.urlInvalid')];\n\n          return done(false);\n        }\n      }\n\n      this.errors = [];\n\n      this.value.spec = { [this.selectedProvider]: this.value.spec[this.selectedProvider] };\n\n      const bufferJson = jsyaml.load(this.bufferYaml);\n\n      if (!isEmpty(bufferJson)) {\n        this.value.spec[this.selectedProvider].buffer = bufferJson;\n      } else {\n        this.$delete(this.value.spec[this.selectedProvider], 'buffer');\n      }\n      this.save(done);\n    },\n    tabChanged({ tab }) {\n      if ( tab.name === 'buffer' ) {\n        this.$nextTick(() => {\n          if ( this.$refs.yaml ) {\n            this.$refs.yaml.refresh();\n            this.$refs.yaml.focus();\n          }\n        });\n      }\n    },\n    onYamlEditorReady(cm) {\n      cm.getMode().fold = 'yamlcomments';\n      cm.execCommand('foldAll');\n      cm.execCommand('unfold');\n    },\n  }\n};\n</script>\n\n<template>\n  <Loading v-if=\"$fetchState.pending\" />\n  <div\n    v-else\n    class=\"output\"\n  >\n    <CruResource\n      :done-route=\"doneRoute\"\n      :mode=\"cruMode\"\n      :resource=\"value\"\n      :subtypes=\"[]\"\n      :validation-passed=\"true\"\n      :errors=\"errors\"\n      :can-yaml=\"true\"\n      @error=\"e=>errors = e\"\n      @finish=\"saveSettings\"\n      @cancel=\"done\"\n    >\n      <NameNsDescription\n        v-if=\"!isView\"\n        :value=\"value\"\n        :mode=\"mode\"\n        label=\"generic.name\"\n        :register-before-hook=\"registerBeforeHook\"\n        :namespaced=\"isNamespaced\"\n      />\n      <Banner\n        v-if=\"hasMultipleProvidersSelected\"\n        color=\"info\"\n      >\n        This output is configured with multiple providers. We currently only support a single provider per output. You can view or edit the YAML.\n      </Banner>\n      <Banner\n        v-else-if=\"!value.allProvidersSupported\"\n        color=\"info\"\n      >\n        This output is configured with providers we don't support yet. You can view or edit the YAML.\n      </Banner>\n      <Tabbed\n        v-else\n        ref=\"tabbed\"\n        :side-tabs=\"true\"\n        @changed=\"tabChanged($event)\"\n      >\n        <Tab\n          name=\"Output\"\n          label=\"Output\"\n          :weight=\"2\"\n        >\n          <div class=\"row\">\n            <div class=\"col span-6\">\n              <LabeledSelect\n                v-model=\"selectedProvider\"\n                label=\"Output\"\n                :options=\"providers\"\n                :mode=\"mode\"\n              />\n            </div>\n          </div>\n          <div class=\"spacer\" />\n          <component\n            :is=\"getComponent(selectedProvider)\"\n            :value=\"value.spec[selectedProvider]\"\n            :namespace=\"value.namespace\"\n            :mode=\"mode\"\n          />\n        </Tab>\n        <Tab\n          name=\"buffer\"\n          :label=\"t('logging.output.buffer.label')\"\n          :weight=\"1\"\n        >\n          <YamlEditor\n            ref=\"yaml\"\n            v-model=\"bufferYaml\"\n            :scrolling=\"false\"\n            :initial-yaml-values=\"initialBufferYaml\"\n            :editor-mode=\"isView ? EDITOR_MODES.VIEW_CODE : EDITOR_MODES.EDIT_CODE\"\n            @onReady=\"onYamlEditorReady\"\n          />\n        </Tab>\n        <Tab\n          v-if=\"!isView\"\n          name=\"labels-and-annotations\"\n          label-key=\"generic.labelsAndAnnotations\"\n          :weight=\"0\"\n        >\n          <Labels\n            default-container-class=\"labels-and-annotations-container\"\n            :value=\"value\"\n            :mode=\"mode\"\n            :display-side-by-side=\"false\"\n          />\n        </Tab>\n      </Tabbed>\n    </CruResource>\n  </div>\n</template>\n\n<style lang=\"scss\">\n  $chart: 110px;\n  $side: 15px;\n  $margin: 10px;\n  $logo: 60px;\n\n.output {\n  display: flex;\n  flex-direction: column;\n  flex-grow: 1;\n\n  .side-tabs {\n    flex: 1;\n  }\n  .provider {\n    h1 {\n      display: inline-block;\n    }\n  }\n\n  .box-container {\n    display: flex;\n    justify-content: flex-start;\n    flex-wrap: wrap;\n    margin: 0 -1*$margin;\n\n    @media only screen and (min-width: map-get($breakpoints, '--viewport-4')) {\n      .toggle-gradient-box {\n        width: 100%;\n      }\n    }\n    @media only screen and (min-width: map-get($breakpoints, '--viewport-7')) {\n      .toggle-gradient-box {\n        width: calc(50% - 2 * #{$margin});\n      }\n    }\n    @media only screen and (min-width: map-get($breakpoints, '--viewport-9')) {\n      .toggle-gradient-box {\n        width: calc(33.33333% - 2 * #{$margin});\n      }\n    }\n    @media only screen and (min-width: map-get($breakpoints, '--viewport-12')) {\n      .toggle-gradient-box {\n        width: calc(25% - 2 * #{$margin});\n      }\n    }\n\n    .toggle-gradient-box {\n      margin: $margin;\n      padding: $margin;\n      position: relative;\n      border-radius: calc( 1.5 * var(--border-radius));\n\n      &:hover {\n        box-shadow: 0 0 30px var(--shadow);\n        transition: box-shadow 0.1s ease-in-out;\n        cursor: pointer;\n      }\n\n      .side-label {\n        transform: rotate(180deg);\n        position: absolute;\n        top: 0;\n        left: 0;\n        bottom: 0;\n        min-width: calc(1.5 * var(--border-radius));\n        width: $side;\n        border-top-right-radius: calc( 1.5 * var(--border-radius));\n        border-bottom-right-radius: calc( 1.5 * var(--border-radius));\n\n        label {\n          text-align: center;\n          writing-mode: tb;\n          height: 100%;\n          padding: 0 2px;\n          display: block;\n          white-space: no-wrap;\n          text-overflow: ellipsis;\n        }\n      }\n\n      .logo {\n        text-align: center;\n        width: $logo;\n        height: $logo;\n        border-radius: calc(2 * var(--border-radius));\n        overflow: hidden;\n        background-color: white;\n        display: inline-block;\n        vertical-align: middle;\n\n        img {\n          width: $logo - 4px;\n          height: $logo - 4px;\n          object-fit: contain;\n          position: relative;\n          top: 2px;\n        }\n      }\n\n      &:hover {\n        background-position: right center;\n      }\n\n      .name {\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        margin-bottom: 0;\n        display: inline-block;\n        vertical-align: middle;\n      }\n    }\n  }\n}\n</style>\n"]}]}