{"remainingRequest":"/home/ubuntu/suseconf/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ubuntu/suseconf/node_modules/@rancher/shell/edit/monitoring.coreos.com.alertmanagerconfig/receiverConfig.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/ubuntu/suseconf/node_modules/@rancher/shell/edit/monitoring.coreos.com.alertmanagerconfig/receiverConfig.vue","mtime":1725338146566},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js","mtime":1725271298942},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1725271300920}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBBcnJheUxpc3RHcm91cGVkIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL2Zvcm0vQXJyYXlMaXN0R3JvdXBlZCc7CmltcG9ydCBMb2FkaW5nIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL0xvYWRpbmcnOwppbXBvcnQgeyBCYW5uZXIgfSBmcm9tICdAY29tcG9uZW50cy9CYW5uZXInOwppbXBvcnQgQ3J1UmVzb3VyY2UgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvQ3J1UmVzb3VyY2UnOwppbXBvcnQgeyBMYWJlbGVkSW5wdXQgfSBmcm9tICdAY29tcG9uZW50cy9Gb3JtL0xhYmVsZWRJbnB1dCc7CmltcG9ydCBUYWJiZWQgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvVGFiYmVkJzsKaW1wb3J0IFRhYiBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9UYWJiZWQvVGFiJzsKaW1wb3J0IFlhbWxFZGl0b3IsIHsgRURJVE9SX01PREVTIH0gZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvWWFtbEVkaXRvcic7CmltcG9ydCBDcmVhdGVFZGl0VmlldyBmcm9tICdAc2hlbGwvbWl4aW5zL2NyZWF0ZS1lZGl0LXZpZXcnOwppbXBvcnQganN5YW1sIGZyb20gJ2pzLXlhbWwnOwppbXBvcnQgQnV0dG9uRHJvcGRvd24gZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvQnV0dG9uRHJvcGRvd24nOwppbXBvcnQgeyBfQ1JFQVRFLCBfVklFVyB9IGZyb20gJ0BzaGVsbC9jb25maWcvcXVlcnktcGFyYW1zJzsKaW1wb3J0IEZvcm1WYWxpZGF0aW9uIGZyb20gJ0BzaGVsbC9taXhpbnMvZm9ybS12YWxpZGF0aW9uJzsKaW1wb3J0IHsgZmV0Y2hBbGVydE1hbmFnZXJDb25maWdTcGVjcyB9IGZyb20gJ0BzaGVsbC91dGlscy9hbGVydG1hbmFnZXJjb25maWcnOwoKLy8gaTE4bi11c2VzIG1vbml0b3JpbmdSZWNlaXZlci5zbGFjay4qLCBtb25pdG9yaW5nUmVjZWl2ZXIuZW1haWwuKiwgbW9uaXRvcmluZ1JlY2VpdmVyLnBhZ2VyZHV0eS4qCi8vIGkxOG4tdXNlcyBtb25pdG9yaW5nUmVjZWl2ZXIub3BzZ2VuaWUuKiwgbW9uaXRvcmluZ1JlY2VpdmVyLndlYmhvb2suKiwgbW9uaXRvcmluZ1JlY2VpdmVyLmN1c3RvbS4qCmV4cG9ydCBjb25zdCBSRUNFSVZFUlNfVFlQRVMgPSBbCiAgewogICAgbmFtZTogICdzbGFjaycsCiAgICBsYWJlbDogJ21vbml0b3JpbmdSZWNlaXZlci5zbGFjay5sYWJlbCcsCiAgICB0aXRsZTogJ21vbml0b3JpbmdSZWNlaXZlci5zbGFjay50aXRsZScsCiAgICBpbmZvOiAgJ21vbml0b3JpbmdSZWNlaXZlci5zbGFjay5pbmZvJywKICAgIGtleTogICAnc2xhY2tDb25maWdzJywKICAgIGxvZ286ICByZXF1aXJlKGBAc2hlbGwvYXNzZXRzL2ltYWdlcy92ZW5kb3Ivc2xhY2suc3ZnYCkKICB9LAogIHsKICAgIG5hbWU6ICAnZW1haWwnLAogICAgbGFiZWw6ICdtb25pdG9yaW5nUmVjZWl2ZXIuZW1haWwubGFiZWwnLAogICAgdGl0bGU6ICdtb25pdG9yaW5nUmVjZWl2ZXIuZW1haWwudGl0bGUnLAogICAga2V5OiAgICdlbWFpbENvbmZpZ3MnLAogICAgbG9nbzogIHJlcXVpcmUoYEBzaGVsbC9hc3NldHMvaW1hZ2VzL3ZlbmRvci9lbWFpbC5zdmdgKQogIH0sCiAgewogICAgbmFtZTogICdwYWdlcmR1dHknLAogICAgbGFiZWw6ICdtb25pdG9yaW5nUmVjZWl2ZXIucGFnZXJkdXR5LmxhYmVsJywKICAgIHRpdGxlOiAnbW9uaXRvcmluZ1JlY2VpdmVyLnBhZ2VyZHV0eS50aXRsZScsCiAgICBpbmZvOiAgJ21vbml0b3JpbmdSZWNlaXZlci5wYWdlcmR1dHkuaW5mbycsCiAgICBrZXk6ICAgJ3BhZ2VyZHV0eUNvbmZpZ3MnLAogICAgbG9nbzogIHJlcXVpcmUoYEBzaGVsbC9hc3NldHMvaW1hZ2VzL3ZlbmRvci9wYWdlcmR1dHkuc3ZnYCkKICB9LAogIHsKICAgIG5hbWU6ICAnb3BzZ2VuaWUnLAogICAgbGFiZWw6ICdtb25pdG9yaW5nUmVjZWl2ZXIub3BzZ2VuaWUubGFiZWwnLAogICAgdGl0bGU6ICdtb25pdG9yaW5nUmVjZWl2ZXIub3BzZ2VuaWUudGl0bGUnLAogICAga2V5OiAgICdvcHNnZW5pZUNvbmZpZ3MnLAogICAgbG9nbzogIHJlcXVpcmUoYEBzaGVsbC9hc3NldHMvaW1hZ2VzL3ZlbmRvci9lbWFpbC5zdmdgKQogIH0sCiAgewogICAgbmFtZTogICd3ZWJob29rJywKICAgIGxhYmVsOiAnbW9uaXRvcmluZ1JlY2VpdmVyLndlYmhvb2subGFiZWwnLAogICAgdGl0bGU6ICdtb25pdG9yaW5nUmVjZWl2ZXIud2ViaG9vay50aXRsZScsCiAgICBrZXk6ICAgJ3dlYmhvb2tDb25maWdzJywKICAgIGxvZ286ICByZXF1aXJlKGBAc2hlbGwvYXNzZXRzL2ltYWdlcy92ZW5kb3Ivd2ViaG9vay5zdmdgKSwKICB9LAogIHsKICAgIG5hbWU6ICAnY3VzdG9tJywKICAgIGxhYmVsOiAnbW9uaXRvcmluZ1JlY2VpdmVyLmN1c3RvbS5sYWJlbCcsCiAgICB0aXRsZTogJ21vbml0b3JpbmdSZWNlaXZlci5jdXN0b20udGl0bGUnLAogICAgaW5mbzogICdtb25pdG9yaW5nUmVjZWl2ZXIuY3VzdG9tLmluZm8nLAogICAga2V5OiAgICd3ZWJob29rQ29uZmlncycsCiAgICBsb2dvOiAgcmVxdWlyZShgQHNoZWxsL2Fzc2V0cy9pbWFnZXMvdmVuZG9yL2N1c3RvbS5zdmdgKQogIH0sCl07CgpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgQXJyYXlMaXN0R3JvdXBlZCwKICAgIEJhbm5lciwKICAgIEJ1dHRvbkRyb3Bkb3duLAogICAgQ3J1UmVzb3VyY2UsCiAgICBMYWJlbGVkSW5wdXQsCiAgICBMb2FkaW5nLAogICAgVGFiYmVkLAogICAgVGFiLAogICAgWWFtbEVkaXRvcgogIH0sCgogIHByb3BzOiB7CgogICAgdmFsdWU6IHsKICAgICAgdHlwZTogICAgT2JqZWN0LAogICAgICBkZWZhdWx0OiAoKSA9PiB7CiAgICAgICAgcmV0dXJuIHt9OwogICAgICB9CiAgICB9LAogICAgbW9kZTogewogICAgICB0eXBlOiAgICBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICcnCiAgICB9LAogICAgYWxlcnRtYW5hZ2VyQ29uZmlnUmVzb3VyY2U6IHsKICAgICAgdHlwZTogICAgIE9iamVjdCwKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0sCiAgICBhbGVydG1hbmFnZXJDb25maWdJZDogewogICAgICB0eXBlOiAgICAgU3RyaW5nLAogICAgICByZXF1aXJlZDogdHJ1ZQogICAgfSwKICAgIHNhdmVPdmVycmlkZTogewogICAgICB0eXBlOiAgICAgRnVuY3Rpb24sCiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICB9LAogIH0sCgogIG1peGluczogW0NyZWF0ZUVkaXRWaWV3LCBGb3JtVmFsaWRhdGlvbl0sCgogIGFzeW5jIGZldGNoKCkgewogICAgLyoqCiAgICAgKiBleGFtcGxlIHJlY2VpdmVyIHZhbHVlOgogICAgICogewogICAgICogICBuYW1lOiAnbmFtZScsCiAgICAgKiAgIHNsYWNrQ29uZmlnczogWy4uLl0KICAgICAqIH0KICAgICAqLwogICAgY29uc3QgeyByZWNlaXZlclNjaGVtYSB9ID0gYXdhaXQgZmV0Y2hBbGVydE1hbmFnZXJDb25maWdTcGVjcyh0aGlzLiRzdG9yZSk7CgogICAgaWYgKCFyZWNlaXZlclNjaGVtYSkgewogICAgICB0aHJvdyBuZXcgRXJyb3IoIkNhbid0IHJlbmRlciB0aGUgZm9ybSBiZWNhdXNlIHRoZSBBbGVydG1hbmFnZXJDb25maWcgc2NoZW1hLCBvciBpdCdzIGRlZmluaXRpb25zLCBpcyBub3QgbG9hZGVkIHlldC4iKTsKICAgIH0KCiAgICBjb25zdCBleHBlY3RlZEZpZWxkcyA9IE9iamVjdC5rZXlzKHJlY2VpdmVyU2NoZW1hLnJlc291cmNlRmllbGRzKTsKICAgIGNvbnN0IHN1ZmZpeCA9IHt9OwoKICAgIE9iamVjdC5rZXlzKHRoaXMudmFsdWUpLmZvckVhY2goKGtleSkgPT4gewogICAgICBpZiAoIWV4cGVjdGVkRmllbGRzLmluY2x1ZGVzKGtleSkpIHsKICAgICAgICBzdWZmaXhba2V5XSA9IHRoaXMudmFsdWVba2V5XTsKICAgICAgfQogICAgfSk7CgogICAgbGV0IHN1ZmZpeFlhbWwgPSBqc3lhbWwuZHVtcChzdWZmaXgpOwoKICAgIGlmIChzdWZmaXhZYW1sLnRyaW0oKSA9PT0gJ3t9JykgewogICAgICBzdWZmaXhZYW1sID0gJyc7CiAgICB9CgogICAgdGhpcy5leHBlY3RlZEZpZWxkcyA9IGV4cGVjdGVkRmllbGRzOwogICAgdGhpcy5zdWZmaXhZYW1sID0gc3VmZml4WWFtbDsKICB9LAoKICBkYXRhKHByb3BzKSB7CiAgICBjb25zdCBjdXJyZW50UmVjZWl2ZXIgPSB7fTsKICAgIGNvbnN0IG1vZGUgPSB0aGlzLiRyb3V0ZS5xdWVyeS5tb2RlOwoKICAgIGlmIChtb2RlID09PSBfQ1JFQVRFKSB7CiAgICAgIFJFQ0VJVkVSU19UWVBFUy5mb3JFYWNoKChyZWNlaXZlclR5cGUpID0+IHsKICAgICAgICB0aGlzLiRzZXQoY3VycmVudFJlY2VpdmVyLCByZWNlaXZlclR5cGUua2V5LCBjdXJyZW50UmVjZWl2ZXJbcmVjZWl2ZXJUeXBlLmtleV0gfHwgW10pOwogICAgICB9KTsKICAgIH0KCiAgICByZXR1cm4gewogICAgICBjcmVhdGU6ICAgICAgICAgX0NSRUFURSwKICAgICAgRURJVE9SX01PREVTLAogICAgICBmaWxlRm91bmQ6ICAgICAgZmFsc2UsCiAgICAgIHJlY2VpdmVyVHlwZXM6ICBSRUNFSVZFUlNfVFlQRVMsCiAgICAgIHZpZXc6ICAgICAgICAgICBfVklFVywKICAgICAgeWFtbEVycm9yOiAgICAgICcnLAogICAgICBmdkZvcm1SdWxlU2V0czogWwogICAgICAgIHsgcGF0aDogJ25hbWUnLCBydWxlczogWydyZXF1aXJlZCcsICdkdXBsaWNhdGVOYW1lJ10gfQogICAgICBdLAogICAgICBmdlJlcG9ydGVkVmFsaWRhdGlvblBhdGhzOiBbJ3ZhbHVlJ10KICAgIH07CiAgfSwKCiAgbW91bnRlZCgpIHsKICAgIGlmICh0aGlzLm1vZGUgPT09IHRoaXMuY3JlYXRlKSB7CiAgICAgIGlmICghdGhpcy5hbGVydG1hbmFnZXJDb25maWdSZXNvdXJjZS5zcGVjLnJlY2VpdmVycykgewogICAgICAgIHRoaXMuYWxlcnRtYW5hZ2VyQ29uZmlnUmVzb3VyY2Uuc3BlYy5yZWNlaXZlcnMgPSBbXTsKICAgICAgfQogICAgICB0aGlzLmFsZXJ0bWFuYWdlckNvbmZpZ1Jlc291cmNlLnNwZWMucmVjZWl2ZXJzLnB1c2godGhpcy52YWx1ZSk7CiAgICB9CiAgfSwKCiAgY29tcHV0ZWQ6IHsKICAgIGVkaXRvck1vZGUoKSB7CiAgICAgIGlmICggdGhpcy4kcm91dGUucXVlcnkubW9kZSA9PT0gX1ZJRVcgKSB7CiAgICAgICAgcmV0dXJuIEVESVRPUl9NT0RFUy5WSUVXX0NPREU7CiAgICAgIH0KCiAgICAgIHJldHVybiBFRElUT1JfTU9ERVMuRURJVF9DT0RFOwogICAgfSwKICAgIGFsZXJ0bWFuYWdlckNvbmZpZ05hbWVzcGFjZSgpIHsKICAgICAgcmV0dXJuIHRoaXMuYWxlcnRtYW5hZ2VyQ29uZmlnUmVzb3VyY2U/Lm1ldGFkYXRhPy5uYW1lc3BhY2UgfHwgJyc7CiAgICB9LAogICAgcmVjZWl2ZXJOYW1lRGlzYWJsZWQoKSB7CiAgICAgIHJldHVybiB0aGlzLiRyb3V0ZS5xdWVyeS5tb2RlID09PSBfVklFVzsKICAgIH0sCiAgICBmdkV4dHJhUnVsZXMoKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgZHVwbGljYXRlTmFtZTogKCkgPT4gewogICAgICAgICAgY29uc3QgcmVjZWl2ZXJzQXJyYXkgPSB0aGlzLmFsZXJ0bWFuYWdlckNvbmZpZ1Jlc291cmNlLnNwZWMucmVjZWl2ZXJzOwogICAgICAgICAgY29uc3QgcmVjZWl2ZXJOYW1lc0FycmF5ID0gcmVjZWl2ZXJzQXJyYXkubWFwKChSKSA9PiBSLm5hbWUpOwogICAgICAgICAgY29uc3QgcmVjZWl2ZXJzU2V0ID0gbmV3IFNldChyZWNlaXZlck5hbWVzQXJyYXkpOwoKICAgICAgICAgIGlmIChyZWNlaXZlcnNBcnJheS5sZW5ndGggIT09IHJlY2VpdmVyc1NldC5zaXplKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5nZXR0ZXJzWydpMThuL3QnXSgnbW9uaXRvcmluZy5hbGVydGluZy52YWxpZGF0aW9uLmR1cGxpY2F0ZWRSZWNlaXZlck5hbWUnLCB7IG5hbWU6IHRoaXMudmFsdWUubmFtZSB9KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH07CiAgICB9CiAgfSwKCiAgd2F0Y2g6IHsKICAgIHN1ZmZpeFlhbWwodmFsdWUpIHsKICAgICAgdHJ5IHsKICAgICAgICAvLyBXZSBuZWVkIHRoaXMgc3RlcCBzbyB3ZSBkb24ndCBqdXN0IGtlZXAgYWRkaW5nIG5ldyBrZXlzIHdoZW4gbW9kaWZ5aW5nIHRoZSBjdXN0b20gZmllbGQKICAgICAgICBPYmplY3Qua2V5cyh0aGlzLnZhbHVlKS5mb3JFYWNoKChrZXkpID0+IHsKICAgICAgICAgIGlmICghdGhpcy5leHBlY3RlZEZpZWxkcy5pbmNsdWRlcyhrZXkpKSB7CiAgICAgICAgICAgIHRoaXMuJGRlbGV0ZSh0aGlzLnZhbHVlLCBrZXkpOwogICAgICAgICAgfQogICAgICAgIH0pOwoKICAgICAgICBjb25zdCBzdWZmaXggPSBqc3lhbWwubG9hZCh2YWx1ZSk7CgogICAgICAgIE9iamVjdC5hc3NpZ24odGhpcy52YWx1ZSwgc3VmZml4KTsKICAgICAgICB0aGlzLnlhbWxFcnJvciA9ICcnOwogICAgICB9IGNhdGNoIChleCkgewogICAgICAgIHRoaXMueWFtbEVycm9yID0gYFRoZXJlIHdhcyBhIHByb2JsZW0gcGFyc2luZyB0aGUgQ3VzdG9tIENvbmZpZzogJHsgZXggfWA7CiAgICAgIH0KICAgIH0sCiAgfSwKCiAgbWV0aG9kczogewogICAgZ2V0Q29tcG9uZW50KG5hbWUpIHsKICAgICAgcmV0dXJuIHJlcXVpcmUoYC4vdHlwZXMvJHsgbmFtZSB9YCkuZGVmYXVsdDsKICAgIH0sCgogICAgbmF2aWdhdGVUbyhyZWNlaXZlclR5cGUpIHsKICAgICAgdGhpcy4kcmVmcy50YWJiZWQuc2VsZWN0KHJlY2VpdmVyVHlwZS5uYW1lKTsKICAgIH0sCgogICAgZ2V0Q291bnQocmVjZWl2ZXJUeXBlKSB7CiAgICAgIGNvbnN0IGZvdW5kID0gdGhpcy52YWx1ZT8uW3JlY2VpdmVyVHlwZS5rZXldIHx8IFtdOwoKICAgICAgcmV0dXJuIGZvdW5kLmxlbmd0aDsKICAgIH0sCgogICAgdGFiQ2hhbmdlZCh7IHRhYiB9KSB7CiAgICAgIHdpbmRvdy5zY3JvbGxUb3AgPSAwOwogICAgICBpZiAoIHRhYi5uYW1lID09PSAnY3VzdG9tJyApIHsKICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgICBpZiAoIHRoaXMuJHJlZnMuY3VzdG9tRWRpdG9yICkgewogICAgICAgICAgICB0aGlzLiRyZWZzLmN1c3RvbUVkaXRvclswXS5yZWZyZXNoKCk7CiAgICAgICAgICAgIHRoaXMuJHJlZnMuY3VzdG9tRWRpdG9yWzBdLmZvY3VzKCk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCgogICAgcmVkaXJlY3RBZnRlckNhbmNlbCgpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2godGhpcy5hbGVydG1hbmFnZXJDb25maWdSZXNvdXJjZS5fZGV0YWlsTG9jYXRpb24pOwogICAgfSwKCiAgICBjcmVhdGVBZGRPcHRpb25zKHJlY2VpdmVyVHlwZSkgewogICAgICByZXR1cm4gcmVjZWl2ZXJUeXBlLmFkZE9wdGlvbnMubWFwKCk7CiAgICB9LAoKICAgIHNldEVycm9yKGVycikgewogICAgICBpZiAoIWVycikgewogICAgICAgIHRoaXMuZXJyb3JzID0gW107CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5lcnJvcnMgPSBbZXJyXTsKICAgICAgfQogICAgfQogIH0KfTsK"},{"version":3,"sources":["receiverConfig.vue"],"names":[],"mappings":";AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"receiverConfig.vue","sourceRoot":"node_modules/@rancher/shell/edit/monitoring.coreos.com.alertmanagerconfig","sourcesContent":["<script>\nimport ArrayListGrouped from '@shell/components/form/ArrayListGrouped';\nimport Loading from '@shell/components/Loading';\nimport { Banner } from '@components/Banner';\nimport CruResource from '@shell/components/CruResource';\nimport { LabeledInput } from '@components/Form/LabeledInput';\nimport Tabbed from '@shell/components/Tabbed';\nimport Tab from '@shell/components/Tabbed/Tab';\nimport YamlEditor, { EDITOR_MODES } from '@shell/components/YamlEditor';\nimport CreateEditView from '@shell/mixins/create-edit-view';\nimport jsyaml from 'js-yaml';\nimport ButtonDropdown from '@shell/components/ButtonDropdown';\nimport { _CREATE, _VIEW } from '@shell/config/query-params';\nimport FormValidation from '@shell/mixins/form-validation';\nimport { fetchAlertManagerConfigSpecs } from '@shell/utils/alertmanagerconfig';\n\n// i18n-uses monitoringReceiver.slack.*, monitoringReceiver.email.*, monitoringReceiver.pagerduty.*\n// i18n-uses monitoringReceiver.opsgenie.*, monitoringReceiver.webhook.*, monitoringReceiver.custom.*\nexport const RECEIVERS_TYPES = [\n  {\n    name:  'slack',\n    label: 'monitoringReceiver.slack.label',\n    title: 'monitoringReceiver.slack.title',\n    info:  'monitoringReceiver.slack.info',\n    key:   'slackConfigs',\n    logo:  require(`@shell/assets/images/vendor/slack.svg`)\n  },\n  {\n    name:  'email',\n    label: 'monitoringReceiver.email.label',\n    title: 'monitoringReceiver.email.title',\n    key:   'emailConfigs',\n    logo:  require(`@shell/assets/images/vendor/email.svg`)\n  },\n  {\n    name:  'pagerduty',\n    label: 'monitoringReceiver.pagerduty.label',\n    title: 'monitoringReceiver.pagerduty.title',\n    info:  'monitoringReceiver.pagerduty.info',\n    key:   'pagerdutyConfigs',\n    logo:  require(`@shell/assets/images/vendor/pagerduty.svg`)\n  },\n  {\n    name:  'opsgenie',\n    label: 'monitoringReceiver.opsgenie.label',\n    title: 'monitoringReceiver.opsgenie.title',\n    key:   'opsgenieConfigs',\n    logo:  require(`@shell/assets/images/vendor/email.svg`)\n  },\n  {\n    name:  'webhook',\n    label: 'monitoringReceiver.webhook.label',\n    title: 'monitoringReceiver.webhook.title',\n    key:   'webhookConfigs',\n    logo:  require(`@shell/assets/images/vendor/webhook.svg`),\n  },\n  {\n    name:  'custom',\n    label: 'monitoringReceiver.custom.label',\n    title: 'monitoringReceiver.custom.title',\n    info:  'monitoringReceiver.custom.info',\n    key:   'webhookConfigs',\n    logo:  require(`@shell/assets/images/vendor/custom.svg`)\n  },\n];\n\nexport default {\n  components: {\n    ArrayListGrouped,\n    Banner,\n    ButtonDropdown,\n    CruResource,\n    LabeledInput,\n    Loading,\n    Tabbed,\n    Tab,\n    YamlEditor\n  },\n\n  props: {\n\n    value: {\n      type:    Object,\n      default: () => {\n        return {};\n      }\n    },\n    mode: {\n      type:    String,\n      default: ''\n    },\n    alertmanagerConfigResource: {\n      type:     Object,\n      required: true\n    },\n    alertmanagerConfigId: {\n      type:     String,\n      required: true\n    },\n    saveOverride: {\n      type:     Function,\n      required: true\n    },\n  },\n\n  mixins: [CreateEditView, FormValidation],\n\n  async fetch() {\n    /**\n     * example receiver value:\n     * {\n     *   name: 'name',\n     *   slackConfigs: [...]\n     * }\n     */\n    const { receiverSchema } = await fetchAlertManagerConfigSpecs(this.$store);\n\n    if (!receiverSchema) {\n      throw new Error(\"Can't render the form because the AlertmanagerConfig schema, or it's definitions, is not loaded yet.\");\n    }\n\n    const expectedFields = Object.keys(receiverSchema.resourceFields);\n    const suffix = {};\n\n    Object.keys(this.value).forEach((key) => {\n      if (!expectedFields.includes(key)) {\n        suffix[key] = this.value[key];\n      }\n    });\n\n    let suffixYaml = jsyaml.dump(suffix);\n\n    if (suffixYaml.trim() === '{}') {\n      suffixYaml = '';\n    }\n\n    this.expectedFields = expectedFields;\n    this.suffixYaml = suffixYaml;\n  },\n\n  data(props) {\n    const currentReceiver = {};\n    const mode = this.$route.query.mode;\n\n    if (mode === _CREATE) {\n      RECEIVERS_TYPES.forEach((receiverType) => {\n        this.$set(currentReceiver, receiverType.key, currentReceiver[receiverType.key] || []);\n      });\n    }\n\n    return {\n      create:         _CREATE,\n      EDITOR_MODES,\n      fileFound:      false,\n      receiverTypes:  RECEIVERS_TYPES,\n      view:           _VIEW,\n      yamlError:      '',\n      fvFormRuleSets: [\n        { path: 'name', rules: ['required', 'duplicateName'] }\n      ],\n      fvReportedValidationPaths: ['value']\n    };\n  },\n\n  mounted() {\n    if (this.mode === this.create) {\n      if (!this.alertmanagerConfigResource.spec.receivers) {\n        this.alertmanagerConfigResource.spec.receivers = [];\n      }\n      this.alertmanagerConfigResource.spec.receivers.push(this.value);\n    }\n  },\n\n  computed: {\n    editorMode() {\n      if ( this.$route.query.mode === _VIEW ) {\n        return EDITOR_MODES.VIEW_CODE;\n      }\n\n      return EDITOR_MODES.EDIT_CODE;\n    },\n    alertmanagerConfigNamespace() {\n      return this.alertmanagerConfigResource?.metadata?.namespace || '';\n    },\n    receiverNameDisabled() {\n      return this.$route.query.mode === _VIEW;\n    },\n    fvExtraRules() {\n      return {\n        duplicateName: () => {\n          const receiversArray = this.alertmanagerConfigResource.spec.receivers;\n          const receiverNamesArray = receiversArray.map((R) => R.name);\n          const receiversSet = new Set(receiverNamesArray);\n\n          if (receiversArray.length !== receiversSet.size) {\n            return this.$store.getters['i18n/t']('monitoring.alerting.validation.duplicatedReceiverName', { name: this.value.name });\n          }\n        }\n      };\n    }\n  },\n\n  watch: {\n    suffixYaml(value) {\n      try {\n        // We need this step so we don't just keep adding new keys when modifying the custom field\n        Object.keys(this.value).forEach((key) => {\n          if (!this.expectedFields.includes(key)) {\n            this.$delete(this.value, key);\n          }\n        });\n\n        const suffix = jsyaml.load(value);\n\n        Object.assign(this.value, suffix);\n        this.yamlError = '';\n      } catch (ex) {\n        this.yamlError = `There was a problem parsing the Custom Config: ${ ex }`;\n      }\n    },\n  },\n\n  methods: {\n    getComponent(name) {\n      return require(`./types/${ name }`).default;\n    },\n\n    navigateTo(receiverType) {\n      this.$refs.tabbed.select(receiverType.name);\n    },\n\n    getCount(receiverType) {\n      const found = this.value?.[receiverType.key] || [];\n\n      return found.length;\n    },\n\n    tabChanged({ tab }) {\n      window.scrollTop = 0;\n      if ( tab.name === 'custom' ) {\n        this.$nextTick(() => {\n          if ( this.$refs.customEditor ) {\n            this.$refs.customEditor[0].refresh();\n            this.$refs.customEditor[0].focus();\n          }\n        });\n      }\n    },\n\n    redirectAfterCancel() {\n      this.$router.push(this.alertmanagerConfigResource._detailLocation);\n    },\n\n    createAddOptions(receiverType) {\n      return receiverType.addOptions.map();\n    },\n\n    setError(err) {\n      if (!err) {\n        this.errors = [];\n      } else {\n        this.errors = [err];\n      }\n    }\n  }\n};\n</script>\n\n<template>\n  <CruResource\n    class=\"receiver\"\n    :done-route=\"alertmanagerConfigResource._detailLocation\"\n    :mode=\"mode\"\n    :resource=\"alertmanagerConfigResource\"\n    :subtypes=\"[]\"\n    :can-yaml=\"true\"\n    :errors=\"errors\"\n    :cancel-event=\"true\"\n    :validation-passed=\"fvFormIsValid\"\n    @error=\"e=>errors = e\"\n    @finish=\"saveOverride\"\n    @cancel=\"redirectAfterCancel\"\n  >\n    <div class=\"row mb-10\">\n      <div class=\"col span-6\">\n        <LabeledInput\n          v-model=\"value.name\"\n          :is-disabled=\"receiverNameDisabled\"\n          :label=\"t('generic.name')\"\n          :required=\"true\"\n          :mode=\"mode\"\n          :rules=\"fvGetAndReportPathRules('name')\"\n          data-testid=\"v2-monitoring-receiver-name\"\n        />\n      </div>\n    </div>\n    <Tabbed\n      ref=\"tabbed\"\n      :side-tabs=\"true\"\n      default-tab=\"overview\"\n      @changed=\"tabChanged\"\n    >\n      <Tab\n        :label=\"t('generic.overview')\"\n        :weight=\"receiverTypes.length\"\n        name=\"overview\"\n      >\n        <div class=\"box-container create-resource-container \">\n          <div\n            v-for=\"(receiverType, i) in receiverTypes\"\n            :key=\"i\"\n            class=\"mb-10 subtype-banner\"\n            primary-color-var=\"--primary-color\"\n            @click=\"navigateTo(receiverType)\"\n          >\n            <div class=\"left\">\n              <div class=\"logo\">\n                <img :src=\"receiverType.logo\">\n              </div>\n              <h4 class=\"name ml-10\">\n                <t :k=\"receiverType.label\" />\n              </h4>\n            </div>\n            <div\n              v-if=\"receiverType.name !== 'custom'\"\n              class=\"right\"\n            >\n              {{ getCount(receiverType) }}\n            </div>\n          </div>\n        </div>\n      </Tab>\n      <Tab\n        v-for=\"(receiverType, i) in receiverTypes\"\n        :key=\"i\"\n        :label=\"t(receiverType.label)\"\n        :name=\"receiverType.name\"\n        :weight=\"receiverTypes.length - i\"\n      >\n        <YamlEditor\n          v-if=\"receiverType.name === 'custom'\"\n          ref=\"customEditor\"\n          v-model=\"suffixYaml\"\n          :scrolling=\"false\"\n          :editor-mode=\"editorMode\"\n        />\n        <div v-else>\n          <ArrayListGrouped\n            v-model=\"value[receiverType.key]\"\n            class=\"namespace-list\"\n            :mode=\"mode\"\n            :default-add-value=\"{}\"\n            :add-label=\"t('monitoringReceiver.addButton', { type: t(receiverType.label) })\"\n          >\n            <template #default=\"props\">\n              <component\n                :is=\"getComponent(receiverType.name)\"\n                :value=\"props.row.value\"\n                :mode=\"mode\"\n                :namespace=\"alertmanagerConfigNamespace\"\n              />\n            </template>\n          </ArrayListGrouped>\n        </div>\n      </Tab>\n    </Tabbed>\n  </CruResource>\n</template>\n\n<style lang=\"scss\">\n  .receiver {\n    $margin: 10px;\n    $logo: 60px;\n\n    .box-container.create-resource-container {\n      display: flex;\n      justify-content: space-between;\n      flex-wrap: wrap;\n      margin: 0 -1*$margin;\n\n      .subtype-banner{\n        justify-content: space-between;\n        align-items: center;\n        flex-direction: row;\n      }\n    }\n\n    .right {\n      padding: 30px;\n      border-left: 1px solid var(--border);\n    }\n\n    .logo {\n      text-align: center;\n      width: $logo;\n      height: $logo;\n      border-radius: calc(2 * var(--border-radius));\n      overflow: hidden;\n      background-color: white;\n      display: inline-block;\n      vertical-align: middle;\n\n      img {\n        width: $logo - 4px;\n        height: $logo - 4px;\n        object-fit: contain;\n        position: relative;\n        top: 2px;\n      }\n    }\n\n    .name {\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      margin-bottom: 0;\n      display: inline-block;\n      vertical-align: middle;\n    }\n  }\n</style>\n"]}]}