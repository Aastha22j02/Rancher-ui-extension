{"remainingRequest":"/home/ubuntu/suseconf/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ubuntu/suseconf/node_modules/@rancher/shell/pages/c/_cluster/auth/config/index.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/ubuntu/suseconf/node_modules/@rancher/shell/pages/c/_cluster/auth/config/index.vue","mtime":1725338146566},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js","mtime":1725271298942},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1725271300920}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IE1BTkFHRU1FTlQgfSBmcm9tICdAc2hlbGwvY29uZmlnL3R5cGVzJzsKaW1wb3J0IFNlbGVjdEljb25HcmlkIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL1NlbGVjdEljb25HcmlkJzsKaW1wb3J0IHsgc29ydEJ5IH0gZnJvbSAnQHNoZWxsL3V0aWxzL3NvcnQnOwppbXBvcnQgeyBNT0RFLCBfRURJVCB9IGZyb20gJ0BzaGVsbC9jb25maWcvcXVlcnktcGFyYW1zJzsKaW1wb3J0IHsgYXV0aFByb3ZpZGVyc0luZm8gfSBmcm9tICdAc2hlbGwvdXRpbHMvYXV0aCc7CmltcG9ydCB7IEJhbm5lciB9IGZyb20gJ0Bjb21wb25lbnRzL0Jhbm5lcic7CmltcG9ydCBMb2FkaW5nIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL0xvYWRpbmcnOwoKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIFNlbGVjdEljb25HcmlkLCBCYW5uZXIsIExvYWRpbmcKICB9LAoKICBhc3luYyBmZXRjaCgpIHsKICAgIGNvbnN0IGF1dGhQcm92cyA9IGF3YWl0IGF1dGhQcm92aWRlcnNJbmZvKHRoaXMuJHN0b3JlKTsKCiAgICBpZiAoISFhdXRoUHJvdnMuZW5hYmxlZExvY2F0aW9uKSB7CiAgICAgIHJldHVybiB0aGlzLiRyb3V0ZXIucmVwbGFjZShhdXRoUHJvdnMuZW5hYmxlZExvY2F0aW9uKTsKICAgIH0KCiAgICB0aGlzLiRzZXQodGhpcywgJ2VuYWJsZWQnLCBhdXRoUHJvdnMuZW5hYmxlZCk7CiAgICB0aGlzLiRzZXQodGhpcywgJ25vbkxvY2FsJywgYXV0aFByb3ZzLm5vbkxvY2FsKTsKICB9LAoKICBkYXRhKCkgewogICAgY29uc3QgcmVzb3VyY2UgPSBNQU5BR0VNRU5ULkFVVEhfQ09ORklHOwogICAgY29uc3QgZ2V0dGVycyA9IHRoaXMuJHN0b3JlLmdldHRlcnM7CiAgICBjb25zdCBpblN0b3JlID0gZ2V0dGVyc1snY3VycmVudFN0b3JlJ10ocmVzb3VyY2UpOwogICAgY29uc3QgaGFzTGlzdENvbXBvbmVudCA9IGdldHRlcnNbJ3R5cGUtbWFwL2hhc0N1c3RvbUxpc3QnXShyZXNvdXJjZSk7CiAgICBjb25zdCBoYXNFZGl0Q29tcG9uZW50ID0gZ2V0dGVyc1sndHlwZS1tYXAvaGFzQ3VzdG9tRWRpdCddKHJlc291cmNlKTsKICAgIGNvbnN0IHNjaGVtYSA9IGdldHRlcnNbYCR7IGluU3RvcmUgfS9zY2hlbWFGb3JgXShyZXNvdXJjZSk7CgogICAgcmV0dXJuIHsKICAgICAgcmVzb3VyY2UsCiAgICAgIHNjaGVtYSwKICAgICAgaGFzTGlzdENvbXBvbmVudCwKICAgICAgaGFzRWRpdENvbXBvbmVudCwKCiAgICAgIC8vIFByb3ZpZGVkIGJ5IGZldGNoIGxhdGVyCiAgICAgIGVuYWJsZWQ6ICBmYWxzZSwKICAgICAgbm9uTG9jYWw6IG51bGwsCiAgICB9OwogIH0sCgogIGNvbXB1dGVkOiB7CiAgICByb3dzKCkgewogICAgICByZXR1cm4gc29ydEJ5KHRoaXMubm9uTG9jYWwsIFsnc2lkZUxhYmVsJywgJ25hbWVEaXNwbGF5J10pOwogICAgfSwKCiAgICBkaXNwbGF5TmFtZSgpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLmdldHRlcnNbJ3R5cGUtbWFwL2xhYmVsRm9yJ10odGhpcy5zY2hlbWEsIDIpOwogICAgfSwKCiAgICBsb2NhbFVzZXJzUm91dGUoKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgbmFtZTogICAnYy1jbHVzdGVyLXByb2R1Y3QtcmVzb3VyY2UnLAogICAgICAgIHBhcmFtczogewogICAgICAgICAgY2x1c3RlcjogdGhpcy4kcm91dGUucGFyYW1zLmNsdXN0ZXIsIHByb2R1Y3Q6ICdhdXRoJywgcmVzb3VyY2U6IE1BTkFHRU1FTlQuVVNFUgogICAgICAgIH0KICAgICAgfTsKICAgIH0sCiAgfSwKCiAgbWV0aG9kczogewogICAgY29sb3JGb3Iocm93KSB7CiAgICAgIGNvbnN0IHR5cGVzID0gWydsZGFwJywgJ29hdXRoJywgJ3NhbWwnLCAnb2lkYyddOwoKICAgICAgY29uc3QgaWR4ID0gdHlwZXMuaW5kZXhPZihyb3cuY29uZmlnVHlwZSk7CgogICAgICBpZiAoIGlkeCA9PT0gLTEgKSB7CiAgICAgICAgcmV0dXJuICdjb2xvcjgnOwogICAgICB9CgogICAgICByZXR1cm4gYGNvbG9yJHsgaWR4ICsgMSB9YDsKICAgIH0sCgogICAgZ29UbyhpZCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgbmFtZTogICAnYy1jbHVzdGVyLWF1dGgtY29uZmlnLWlkJywKICAgICAgICBwYXJhbXM6IHsgaWQgfSwKICAgICAgICBxdWVyeTogIHsgW01PREVdOiBfRURJVCB9CiAgICAgIH0pOwogICAgfSwKICB9Cn07Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"node_modules/@rancher/shell/pages/c/_cluster/auth/config","sourcesContent":["<script>\nimport { MANAGEMENT } from '@shell/config/types';\nimport SelectIconGrid from '@shell/components/SelectIconGrid';\nimport { sortBy } from '@shell/utils/sort';\nimport { MODE, _EDIT } from '@shell/config/query-params';\nimport { authProvidersInfo } from '@shell/utils/auth';\nimport { Banner } from '@components/Banner';\nimport Loading from '@shell/components/Loading';\n\nexport default {\n  components: {\n    SelectIconGrid, Banner, Loading\n  },\n\n  async fetch() {\n    const authProvs = await authProvidersInfo(this.$store);\n\n    if (!!authProvs.enabledLocation) {\n      return this.$router.replace(authProvs.enabledLocation);\n    }\n\n    this.$set(this, 'enabled', authProvs.enabled);\n    this.$set(this, 'nonLocal', authProvs.nonLocal);\n  },\n\n  data() {\n    const resource = MANAGEMENT.AUTH_CONFIG;\n    const getters = this.$store.getters;\n    const inStore = getters['currentStore'](resource);\n    const hasListComponent = getters['type-map/hasCustomList'](resource);\n    const hasEditComponent = getters['type-map/hasCustomEdit'](resource);\n    const schema = getters[`${ inStore }/schemaFor`](resource);\n\n    return {\n      resource,\n      schema,\n      hasListComponent,\n      hasEditComponent,\n\n      // Provided by fetch later\n      enabled:  false,\n      nonLocal: null,\n    };\n  },\n\n  computed: {\n    rows() {\n      return sortBy(this.nonLocal, ['sideLabel', 'nameDisplay']);\n    },\n\n    displayName() {\n      return this.$store.getters['type-map/labelFor'](this.schema, 2);\n    },\n\n    localUsersRoute() {\n      return {\n        name:   'c-cluster-product-resource',\n        params: {\n          cluster: this.$route.params.cluster, product: 'auth', resource: MANAGEMENT.USER\n        }\n      };\n    },\n  },\n\n  methods: {\n    colorFor(row) {\n      const types = ['ldap', 'oauth', 'saml', 'oidc'];\n\n      const idx = types.indexOf(row.configType);\n\n      if ( idx === -1 ) {\n        return 'color8';\n      }\n\n      return `color${ idx + 1 }`;\n    },\n\n    goTo(id) {\n      this.$router.push({\n        name:   'c-cluster-auth-config-id',\n        params: { id },\n        query:  { [MODE]: _EDIT }\n      });\n    },\n  }\n};\n</script>\n\n<template>\n  <Loading v-if=\"$fetchState.pending\" />\n  <div v-else>\n    <h1 class=\"m-0\">\n      {{ displayName }}\n    </h1>\n    <Banner\n      v-if=\"!enabled.length\"\n      :label=\"t('authConfig.noneEnabled')\"\n      color=\"info\"\n    >\n      <div>\n        {{ t('authConfig.localEnabled') }}\n        <router-link :to=\"localUsersRoute\">\n          {{ t('authConfig.manageLocal') }}\n        </router-link>\n        <br>\n        {{ t('authConfig.noneEnabled') }}\n      </div>\n    </Banner>\n    <SelectIconGrid\n      :rows=\"rows\"\n      :color-for=\"colorFor\"\n      name-field=\"provider\"\n      @clicked=\"(row) => goTo(row.id)\"\n    />\n  </div>\n</template>\n"]}]}