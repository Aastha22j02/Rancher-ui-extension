{"remainingRequest":"/home/ubuntu/susecon-2024-ext-demo/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/chart/monitoring/index.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/chart/monitoring/index.vue","mtime":1725271280091},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/babel-loader/lib/index.js","mtime":1725271298942},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1725271300920}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBpc0VtcHR5IGZyb20gJ2xvZGFzaC9pc0VtcHR5JzsKaW1wb3J0IG1lcmdlIGZyb20gJ2xvZGFzaC9tZXJnZSc7CgppbXBvcnQgeyBtYXBHZXR0ZXJzIH0gZnJvbSAndnVleCc7CgppbXBvcnQgQWxlcnRpbmcgZnJvbSAnQHNoZWxsL2NoYXJ0L21vbml0b3JpbmcvYWxlcnRpbmcnOwppbXBvcnQgeyBDaGVja2JveCB9IGZyb20gJ0Bjb21wb25lbnRzL0Zvcm0vQ2hlY2tib3gnOwppbXBvcnQgQ2x1c3RlclNlbGVjdG9yIGZyb20gJ0BzaGVsbC9jaGFydC9tb25pdG9yaW5nL0NsdXN0ZXJTZWxlY3Rvcic7CmltcG9ydCBHcmFmYW5hIGZyb20gJ0BzaGVsbC9jaGFydC9tb25pdG9yaW5nL2dyYWZhbmEnOwppbXBvcnQgeyBMYWJlbGVkSW5wdXQgfSBmcm9tICdAY29tcG9uZW50cy9Gb3JtL0xhYmVsZWRJbnB1dCc7CmltcG9ydCBMb2FkaW5nIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL0xvYWRpbmcnOwppbXBvcnQgUHJvbWV0aGV1cyBmcm9tICdAc2hlbGwvY2hhcnQvbW9uaXRvcmluZy9wcm9tZXRoZXVzJzsKaW1wb3J0IFRhYiBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9UYWJiZWQvVGFiJzsKCmltcG9ydCB7IGFsbEhhc2ggfSBmcm9tICdAc2hlbGwvdXRpbHMvcHJvbWlzZSc7CmltcG9ydCB7IFNUT1JBR0VfQ0xBU1MsIFBWQywgU0VDUkVULCBXT1JLTE9BRF9UWVBFUyB9IGZyb20gJ0BzaGVsbC9jb25maWcvdHlwZXMnOwppbXBvcnQgeyBDQVRUTEVfTU9OSVRPUklOR19OQU1FU1BBQ0UgfSBmcm9tICdAc2hlbGwvdXRpbHMvbW9uaXRvcmluZyc7CgpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgQWxlcnRpbmcsCiAgICBDaGVja2JveCwKICAgIENsdXN0ZXJTZWxlY3RvciwKICAgIEdyYWZhbmEsCiAgICBMYWJlbGVkSW5wdXQsCiAgICBMb2FkaW5nLAogICAgUHJvbWV0aGV1cywKICAgIFRhYgogIH0sCgogIGhhc1RhYnM6IHRydWUsCgogIHByb3BzOiB7CiAgICBjaGFydDogewogICAgICB0eXBlOiAgICBPYmplY3QsCiAgICAgIGRlZmF1bHQ6ICgpID0+ICh7fSksCiAgICB9LAoKICAgIG1vZGU6IHsKICAgICAgdHlwZTogICAgU3RyaW5nLAogICAgICBkZWZhdWx0OiAnY3JlYXRlJywKICAgIH0sCgogICAgdmFsdWU6IHsKICAgICAgdHlwZTogICAgT2JqZWN0LAogICAgICBkZWZhdWx0OiAoKSA9PiB7CiAgICAgICAgcmV0dXJuIHt9OwogICAgICB9LAogICAgfSwKICB9LAoKICBhc3luYyBmZXRjaCgpIHsKICAgIGNvbnN0IHsgJHN0b3JlIH0gPSB0aGlzOwoKICAgIC8vIEZldGNoIGFsbCB0aGUgcmVzb3VyY2VzIHJlcXVpcmVkIGZvciBhbGwgdGhlIHRhYnMgYXN5bmNyb25vdXNseSB1cCBmcm9udAogICAgY29uc3QgaGFzaFByb21pc2VzID0gewogICAgICBuYW1lc3BhY2VzOiAgICAgICAgJHN0b3JlLmdldHRlcnNbJ25hbWVzcGFjZXMnXSgpLAogICAgICBwdmNzOiAgICAgICAgICAgICAgJHN0b3JlLmRpc3BhdGNoKCdjbHVzdGVyL2ZpbmRBbGwnLCB7IHR5cGU6IFBWQyB9KSwKICAgICAgLy8gVXNlZCBpbiBBbGVydGluZyB0YWIKICAgICAgbW9uaXRvcmluZ1NlY3JldHM6ICRzdG9yZS5kaXNwYXRjaCgnY2x1c3Rlci9maW5kQWxsJywgewogICAgICAgIHR5cGU6IFNFQ1JFVCwKICAgICAgICBvcHQ6ICB7IG5hbWVzcGFjZWQ6IENBVFRMRV9NT05JVE9SSU5HX05BTUVTUEFDRSB9CiAgICAgIH0pLAogICAgICBzdG9yYWdlQ2xhc3NlczogJHN0b3JlLmRpc3BhdGNoKCdjbHVzdGVyL2ZpbmRBbGwnLCB7IHR5cGU6IFNUT1JBR0VfQ0xBU1MgfSksCiAgICB9OwoKICAgIC8vIEFyZSB3ZSBlZGl0aW5nIGFuIGV4aXN0aW5nIGNoYXJ0PwogICAgLy8gKHBvcnRlZCBmcm9tIHNoZWxsL2NoYXJ0L21vbml0b3JpbmcvcHJvbWV0aGV1cy9pbmRleC52dWUpCiAgICBjb25zdCB7IGV4aXN0aW5nID0gZmFsc2UgfSA9IHRoaXMuJGF0dHJzOwoKICAgIC8vIElmIG5lZWRlZCwgZmV0Y2ggYWxsIHRoZSB3b3JrbG9hZHMgdGhhdCBoYXZlIHByb21ldGhldXMgb3BlcmF0b3IgbGlrZSBjb250YWluZXJzCiAgICB0aGlzLndvcmtsb2FkVHlwZXMgPSAhZXhpc3RpbmcgPyBPYmplY3QudmFsdWVzKFdPUktMT0FEX1RZUEVTKSA6IFtdOwoKICAgIHRoaXMud29ya2xvYWRUeXBlcy5mb3JFYWNoKCh0eXBlKSA9PiB7CiAgICAgIC8vIFdlJ2xsIHVzZSBhIGZpbHRlciB0byBmZXRjaCB0aGUgcmVzdWx0cy4gQXRtIHRoZXJlJ3Mgbm8gbmVhdCB3YXkgdG8gZGlmZmVyZW50aWF0ZSBiZXR3ZWVuIEFMTCByZXN1bHRzIGFuZCBKVVNUIGZpbHRlcmVkCiAgICAgIC8vIFNvIHRvIGF2b2lkIGNhbGxzIHRvIGFsbCBnZXR0aW5nIHRoZXNlIGZpbHRlcmVkIChhbmQgdmljZS12ZXJzYSkgZm9yZ2V0IHR5cGUgYmVmb3JlIGFuZCBhZnRlcgogICAgICAkc3RvcmUuZGlzcGF0Y2goJ2NsdXN0ZXIvZm9yZ2V0VHlwZScsIHR5cGUpOwogICAgICBoYXNoUHJvbWlzZXNbdHlwZV0gPSAkc3RvcmUuZGlzcGF0Y2goJ2NsdXN0ZXIvZmluZEFsbCcsIHsKICAgICAgICB0eXBlLAogICAgICAgIG9wdDogewogICAgICAgICAgd2F0Y2g6ICBmYWxzZSwKICAgICAgICAgIC8vIFdlJ3JlIG9ubHkgaW50ZXJlc3RlZCBpbiBpbWFnZXMgd2l0aCBvcGVyYXRvciBsaWtlIG5hbWVzIChub3RlOiB0aGVzZSB3aWxsIG1hdGNoIHBhcnRpYWwgc3RyaW5ncykKICAgICAgICAgIGZpbHRlcjogeyAnc3BlYy50ZW1wbGF0ZS5zcGVjLmNvbnRhaW5lcnMuaW1hZ2UnOiBbJ3F1YXkuaW8vY29yZW9zL3Byb21ldGhldXMtb3BlcmF0b3InLCAncmFuY2hlci9jb3Jlb3MtcHJvbWV0aGV1cy1vcGVyYXRvciddIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgfSk7CgogICAgY29uc3QgaGFzaCA9IGF3YWl0IGFsbEhhc2goaGFzaFByb21pc2VzKTsKCiAgICB0aGlzLnRhcmdldE5hbWVzcGFjZSA9IGhhc2gubmFtZXNwYWNlc1t0aGlzLmNoYXJ0LnRhcmdldE5hbWVzcGFjZV0gfHwgZmFsc2U7CgogICAgaWYgKCFpc0VtcHR5KGhhc2guc3RvcmFnZUNsYXNzZXMpKSB7CiAgICAgIHRoaXMuc3RvcmFnZUNsYXNzZXMgPSBoYXNoLnN0b3JhZ2VDbGFzc2VzOwogICAgfQoKICAgIGlmICghaXNFbXB0eShoYXNoLnB2Y3MpKSB7CiAgICAgIHRoaXMucHZjcyA9IGhhc2gucHZjczsKICAgIH0KCiAgICBpZiAoIWlzRW1wdHkoaGFzaC5tb25pdG9yaW5nU2VjcmV0cykpIHsKICAgICAgdGhpcy5tb25pdG9yaW5nU2VjcmV0cyA9IGhhc2gubW9uaXRvcmluZ1NlY3JldHM7CiAgICB9CgogICAgdGhpcy53b3JrbG9hZFR5cGVzLmZvckVhY2goKHR5cGUpID0+IHsKICAgICAgaWYgKGhhc2hbdHlwZV0pIHsKICAgICAgICB0aGlzLmZpbHRlcmVkV29ya2xvYWRzLnB1c2goLi4uaGFzaFt0eXBlXSk7CiAgICAgIH0KICAgIH0pOwogIH0sCgogIGJlZm9yZURlc3Ryb3koKSB7CiAgICB0aGlzLndvcmtsb2FkVHlwZXMuZm9yRWFjaCgodHlwZSkgPT4gewogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnY2x1c3Rlci9mb3JnZXRUeXBlJywgdHlwZSk7CiAgICB9KTsKICB9LAoKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgYWNjZXNzTW9kZXM6IFsKICAgICAgICB7CiAgICAgICAgICBpZDogICAgJ1JlYWRXcml0ZU9uY2UnLAogICAgICAgICAgbGFiZWw6ICdtb25pdG9yaW5nLmFjY2Vzc01vZGVzLm9uY2UnLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgaWQ6ICAgICdSZWFkT25seU1hbnknLAogICAgICAgICAgbGFiZWw6ICdtb25pdG9yaW5nLmFjY2Vzc01vZGVzLnJlYWRPbmx5TWFueScsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBpZDogICAgJ1JlYWRXcml0ZU1hbnknLAogICAgICAgICAgbGFiZWw6ICdtb25pdG9yaW5nLmFjY2Vzc01vZGVzLm1hbnknLAogICAgICAgIH0sCiAgICAgIF0sCiAgICAgIGNsdXN0ZXJUeXBlOiAgICAgICAgICAge30sCiAgICAgIGRpc2FibGVBZ2dyZWdhdGVSb2xlczogZmFsc2UsCiAgICAgIHByb21ldGhldXNSZXNvdXJjZXM6ICAgW10sCiAgICAgIHB2Y3M6ICAgICAgICAgICAgICAgICAgW10sCiAgICAgIG1vbml0b3JpbmdTZWNyZXRzOiAgICAgW10sCiAgICAgIHN0b3JhZ2VDbGFzc2VzOiAgICAgICAgW10sCiAgICAgIHRhcmdldE5hbWVzcGFjZTogICAgICAgbnVsbCwKICAgICAgZmlsdGVyZWRXb3JrbG9hZHM6ICAgICBbXSwKICAgICAgd29ya2xvYWRUeXBlczogICAgICAgICBbXQogICAgfTsKICB9LAoKICBjb21wdXRlZDogewogICAgLi4ubWFwR2V0dGVycyhbJ2N1cnJlbnRDbHVzdGVyJ10pLAogICAgcHJvdmlkZXIoKSB7CiAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRDbHVzdGVyLnN0YXR1cy5wcm92aWRlci50b0xvd2VyQ2FzZSgpOwogICAgfSwKICB9LAoKICB3YXRjaDogewogICAgJ3ZhbHVlLmdsb2JhbC5yYmFjLnVzZXJSb2xlcy5jcmVhdGUnKGNyZWF0ZVVzZXJSb2xlcykgewogICAgICBpZiAoY3JlYXRlVXNlclJvbGVzKSB7CiAgICAgICAgdGhpcy5kaXNhYmxlQWdncmVnYXRlUm9sZXMgPSBmYWxzZTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnZhbHVlLmdsb2JhbC5yYmFjLnVzZXJSb2xlcy5hZ2dyZWdhdGVUb0RlZmF1bHRSb2xlcyA9IGZhbHNlOwogICAgICAgIHRoaXMuZGlzYWJsZUFnZ3JlZ2F0ZVJvbGVzID0gdHJ1ZTsKICAgICAgfQogICAgfSwKICB9LAoKICBjcmVhdGVkKCkgewogICAgaWYgKHRoaXMubW9kZSA9PT0gJ2NyZWF0ZScpIHsKICAgICAgLy8gbWVyZ2UgaGVyZSBkb2Vzbid0IHdvcmsgKGV4aXN0aW5nIHZhbHVlcyBhcmUgbG9zdCB3aGVuIGdvaW5nIGZyb20gZm9ybSB0byB5YW1sIGFuZCBiYWNrIGFnYWluKSBzbyBpbnN0ZWFkIHN1cHBseSBzb21lIGJldHRlciBkZWZhdWx0IHZhbHVlcwogICAgICAvLyBhbnkgY2hhbmdlcyBoZXJlIG5lZWQgdG8gcmVzcGVjdCB0aGUgb3JkZXIgb2YgcHJvcGVydGllcyAocmVmbGVjdGVkIGluIHRoZSB5YW1sIGRpZmYpCiAgICAgIGNvbnN0IGV4dGVuZGVkRGVmYXVsdHMgPSB7CiAgICAgICAgZ2xvYmFsOiB7CiAgICAgICAgICByYmFjOiB7CiAgICAgICAgICAgIHVzZXJSb2xlczogewogICAgICAgICAgICAgIGNyZWF0ZTogICAgICAgICAgICAgICAgICB0aGlzLm1lcmdlVmFsdWUodGhpcy52YWx1ZT8uZ2xvYmFsPy5yYmFjPy51c2VyUm9sZXM/LmNyZWF0ZSwgdHJ1ZSksCiAgICAgICAgICAgICAgYWdncmVnYXRlVG9EZWZhdWx0Um9sZXM6IHRoaXMubWVyZ2VWYWx1ZSh0aGlzLnZhbHVlPy5nbG9iYWw/LnJiYWM/LnVzZXJSb2xlcz8uYWdncmVnYXRlVG9EZWZhdWx0Um9sZXMsIHRydWUpLAogICAgICAgICAgICB9LAogICAgICAgICAgfSwKICAgICAgICB9LAogICAgICAgIHByb21ldGhldXM6IHsKICAgICAgICAgIHByb21ldGhldXNTcGVjOiB7CiAgICAgICAgICAgIHNjcmFwZUludGVydmFsOiAgICAgdGhpcy5tZXJnZVZhbHVlKHRoaXMudmFsdWU/LnByb21ldGhldXM/LnByb21ldGhldXNTcGVjPy5zY3JhcGVJbnRlcnZhbCwgJzFtJyksCiAgICAgICAgICAgIGV2YWx1YXRpb25JbnRlcnZhbDogdGhpcy5tZXJnZVZhbHVlKHRoaXMudmFsdWU/LnByb21ldGhldXM/LnByb21ldGhldXNTcGVjPy5ldmFsdWF0aW9uSW50ZXJ2YWwsICcxbScpLAogICAgICAgICAgICByZXRlbnRpb246ICAgICAgICAgIHRoaXMubWVyZ2VWYWx1ZSh0aGlzLnZhbHVlPy5wcm9tZXRoZXVzPy5wcm9tZXRoZXVzU3BlYz8ucmV0ZW50aW9uLCAnMTBkJyksCiAgICAgICAgICAgIHJldGVudGlvblNpemU6ICAgICAgdGhpcy5tZXJnZVZhbHVlKHRoaXMudmFsdWU/LnByb21ldGhldXM/LnByb21ldGhldXNTcGVjPy5yZXRlbnRpb25TaXplLCAnNTBHaUInKSwKICAgICAgICAgICAgZW5hYmxlQWRtaW5BUEk6ICAgICB0aGlzLm1lcmdlVmFsdWUodGhpcy52YWx1ZT8ucHJvbWV0aGV1cz8ucHJvbWV0aGV1c1NwZWM/LmVuYWJsZUFkbWluQVBJLCBmYWxzZSksCiAgICAgICAgICB9LAogICAgICAgIH0sCiAgICAgIH07CgogICAgICBtZXJnZSh0aGlzLnZhbHVlLCBleHRlbmRlZERlZmF1bHRzKTsKCiAgICAgIGlmICh0aGlzLnByb3ZpZGVyLnN0YXJ0c1dpdGgoJ3JrZTInKSkgewogICAgICAgIHRoaXMuJHNldCh0aGlzLnZhbHVlLnJrZTJJbmdyZXNzTmdpbngsICdlbmFibGVkJywgdHJ1ZSk7CiAgICAgICAgdGhpcy4kc2V0KHRoaXMudmFsdWUucmtlMkV0Y2QsICdlbmFibGVkJywgdHJ1ZSk7CiAgICAgICAgdGhpcy4kc2V0KHRoaXMudmFsdWUucmtlRXRjZCwgJ2VuYWJsZWQnLCBmYWxzZSk7CiAgICAgIH0gZWxzZSBpZiAodGhpcy5wcm92aWRlci5zdGFydHNXaXRoKCdya2UnKSkgewogICAgICAgIHRoaXMuJHNldCh0aGlzLnZhbHVlLCAnaW5ncmVzc05naW54JywgdGhpcy52YWx1ZS5pbmdyZXNzTmdpbnggfHwge30pOwogICAgICAgIHRoaXMuJHNldCh0aGlzLnZhbHVlLmluZ3Jlc3NOZ2lueCwgJ2VuYWJsZWQnLCB0cnVlKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRzZXQodGhpcy52YWx1ZS5ya2VFdGNkLCAnZW5hYmxlZCcsIGZhbHNlKTsKICAgICAgfQogICAgfQoKICAgIHRoaXMuJGVtaXQoJ3JlZ2lzdGVyLWJlZm9yZS1ob29rJywgdGhpcy53aWxsU2F2ZSwgJ3dpbGxTYXZlJyk7CiAgfSwKCiAgbWV0aG9kczogewogICAgd2lsbFNhdmUoKSB7CiAgICAgIGNvbnN0IHsgcHJvbWV0aGV1c1NwZWMgfSA9IHRoaXMudmFsdWUucHJvbWV0aGV1czsKICAgICAgY29uc3Qgc2VsZWN0b3IgPQogICAgICAgIHByb21ldGhldXNTcGVjPy5zdG9yYWdlU3BlYz8udm9sdW1lQ2xhaW1UZW1wbGF0ZT8uc3BlYz8uc2VsZWN0b3I7CgogICAgICAvLyBUaGlzIHdvcmtzIGZvciBVSSBlZGl0b3IgaW5zdGFsbGF0aW9uCiAgICAgIC8vIEhvd2V2ZXIsIGl0IGRvZXNuJ3Qgd29yayBmb3IgeWFtbCBlZGl0b3IgaW5zdGFsbGF0aW9uCiAgICAgIC8vIEdsb2JhbCB2YWx1ZXMgbGF0ZXIgbWVyZ2VkIGFnYWluIGluIGNoYXJ0cy9pbnN0YWxsLnZ1ZSBhZGRHbG9iYWxWYWx1ZXNUbygpCiAgICAgIC8vIFdlIHN0aWxsIG5lZWQgdG8gcmVtb3ZlIHRoZSBnbG9iYWwgdmFsdWVzIGZyb20gY2hhcnRzL2luc3RhbGwudnVlIGFkZEdsb2JhbFZhbHVlc1RvKCkKICAgICAgaWYgKAogICAgICAgIHNlbGVjdG9yICYmCiAgICAgICAgaXNFbXB0eShzZWxlY3Rvci5tYXRjaEV4cHJlc3Npb25zKSAmJgogICAgICAgIGlzRW1wdHkoc2VsZWN0b3IubWF0Y2hMYWJlbHMpCiAgICAgICkgewogICAgICAgIGRlbGV0ZSB0aGlzLnZhbHVlLnByb21ldGhldXMucHJvbWV0aGV1c1NwZWMuc3RvcmFnZVNwZWMKICAgICAgICAgIC52b2x1bWVDbGFpbVRlbXBsYXRlLnNwZWMuc2VsZWN0b3I7CiAgICAgIH0KICAgIH0sCgogICAgbWVyZ2VWYWx1ZSh2YWx1ZSwgZGVmYXVsdFZhbHVlKSB7CiAgICAgIHJldHVybiB2YWx1ZSA9PT0gdW5kZWZpbmVkIHx8ICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnICYmICF2YWx1ZS5sZW5ndGgpID8gZGVmYXVsdFZhbHVlIDogdmFsdWU7CiAgICB9CiAgfSwKfTsK"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"node_modules/@rancher/shell/chart/monitoring","sourcesContent":["<script>\nimport isEmpty from 'lodash/isEmpty';\nimport merge from 'lodash/merge';\n\nimport { mapGetters } from 'vuex';\n\nimport Alerting from '@shell/chart/monitoring/alerting';\nimport { Checkbox } from '@components/Form/Checkbox';\nimport ClusterSelector from '@shell/chart/monitoring/ClusterSelector';\nimport Grafana from '@shell/chart/monitoring/grafana';\nimport { LabeledInput } from '@components/Form/LabeledInput';\nimport Loading from '@shell/components/Loading';\nimport Prometheus from '@shell/chart/monitoring/prometheus';\nimport Tab from '@shell/components/Tabbed/Tab';\n\nimport { allHash } from '@shell/utils/promise';\nimport { STORAGE_CLASS, PVC, SECRET, WORKLOAD_TYPES } from '@shell/config/types';\nimport { CATTLE_MONITORING_NAMESPACE } from '@shell/utils/monitoring';\n\nexport default {\n  components: {\n    Alerting,\n    Checkbox,\n    ClusterSelector,\n    Grafana,\n    LabeledInput,\n    Loading,\n    Prometheus,\n    Tab\n  },\n\n  hasTabs: true,\n\n  props: {\n    chart: {\n      type:    Object,\n      default: () => ({}),\n    },\n\n    mode: {\n      type:    String,\n      default: 'create',\n    },\n\n    value: {\n      type:    Object,\n      default: () => {\n        return {};\n      },\n    },\n  },\n\n  async fetch() {\n    const { $store } = this;\n\n    // Fetch all the resources required for all the tabs asyncronously up front\n    const hashPromises = {\n      namespaces:        $store.getters['namespaces'](),\n      pvcs:              $store.dispatch('cluster/findAll', { type: PVC }),\n      // Used in Alerting tab\n      monitoringSecrets: $store.dispatch('cluster/findAll', {\n        type: SECRET,\n        opt:  { namespaced: CATTLE_MONITORING_NAMESPACE }\n      }),\n      storageClasses: $store.dispatch('cluster/findAll', { type: STORAGE_CLASS }),\n    };\n\n    // Are we editing an existing chart?\n    // (ported from shell/chart/monitoring/prometheus/index.vue)\n    const { existing = false } = this.$attrs;\n\n    // If needed, fetch all the workloads that have prometheus operator like containers\n    this.workloadTypes = !existing ? Object.values(WORKLOAD_TYPES) : [];\n\n    this.workloadTypes.forEach((type) => {\n      // We'll use a filter to fetch the results. Atm there's no neat way to differentiate between ALL results and JUST filtered\n      // So to avoid calls to all getting these filtered (and vice-versa) forget type before and after\n      $store.dispatch('cluster/forgetType', type);\n      hashPromises[type] = $store.dispatch('cluster/findAll', {\n        type,\n        opt: {\n          watch:  false,\n          // We're only interested in images with operator like names (note: these will match partial strings)\n          filter: { 'spec.template.spec.containers.image': ['quay.io/coreos/prometheus-operator', 'rancher/coreos-prometheus-operator'] }\n        }\n      });\n    });\n\n    const hash = await allHash(hashPromises);\n\n    this.targetNamespace = hash.namespaces[this.chart.targetNamespace] || false;\n\n    if (!isEmpty(hash.storageClasses)) {\n      this.storageClasses = hash.storageClasses;\n    }\n\n    if (!isEmpty(hash.pvcs)) {\n      this.pvcs = hash.pvcs;\n    }\n\n    if (!isEmpty(hash.monitoringSecrets)) {\n      this.monitoringSecrets = hash.monitoringSecrets;\n    }\n\n    this.workloadTypes.forEach((type) => {\n      if (hash[type]) {\n        this.filteredWorkloads.push(...hash[type]);\n      }\n    });\n  },\n\n  beforeDestroy() {\n    this.workloadTypes.forEach((type) => {\n      this.$store.dispatch('cluster/forgetType', type);\n    });\n  },\n\n  data() {\n    return {\n      accessModes: [\n        {\n          id:    'ReadWriteOnce',\n          label: 'monitoring.accessModes.once',\n        },\n        {\n          id:    'ReadOnlyMany',\n          label: 'monitoring.accessModes.readOnlyMany',\n        },\n        {\n          id:    'ReadWriteMany',\n          label: 'monitoring.accessModes.many',\n        },\n      ],\n      clusterType:           {},\n      disableAggregateRoles: false,\n      prometheusResources:   [],\n      pvcs:                  [],\n      monitoringSecrets:     [],\n      storageClasses:        [],\n      targetNamespace:       null,\n      filteredWorkloads:     [],\n      workloadTypes:         []\n    };\n  },\n\n  computed: {\n    ...mapGetters(['currentCluster']),\n    provider() {\n      return this.currentCluster.status.provider.toLowerCase();\n    },\n  },\n\n  watch: {\n    'value.global.rbac.userRoles.create'(createUserRoles) {\n      if (createUserRoles) {\n        this.disableAggregateRoles = false;\n      } else {\n        this.value.global.rbac.userRoles.aggregateToDefaultRoles = false;\n        this.disableAggregateRoles = true;\n      }\n    },\n  },\n\n  created() {\n    if (this.mode === 'create') {\n      // merge here doesn't work (existing values are lost when going from form to yaml and back again) so instead supply some better default values\n      // any changes here need to respect the order of properties (reflected in the yaml diff)\n      const extendedDefaults = {\n        global: {\n          rbac: {\n            userRoles: {\n              create:                  this.mergeValue(this.value?.global?.rbac?.userRoles?.create, true),\n              aggregateToDefaultRoles: this.mergeValue(this.value?.global?.rbac?.userRoles?.aggregateToDefaultRoles, true),\n            },\n          },\n        },\n        prometheus: {\n          prometheusSpec: {\n            scrapeInterval:     this.mergeValue(this.value?.prometheus?.prometheusSpec?.scrapeInterval, '1m'),\n            evaluationInterval: this.mergeValue(this.value?.prometheus?.prometheusSpec?.evaluationInterval, '1m'),\n            retention:          this.mergeValue(this.value?.prometheus?.prometheusSpec?.retention, '10d'),\n            retentionSize:      this.mergeValue(this.value?.prometheus?.prometheusSpec?.retentionSize, '50GiB'),\n            enableAdminAPI:     this.mergeValue(this.value?.prometheus?.prometheusSpec?.enableAdminAPI, false),\n          },\n        },\n      };\n\n      merge(this.value, extendedDefaults);\n\n      if (this.provider.startsWith('rke2')) {\n        this.$set(this.value.rke2IngressNginx, 'enabled', true);\n        this.$set(this.value.rke2Etcd, 'enabled', true);\n        this.$set(this.value.rkeEtcd, 'enabled', false);\n      } else if (this.provider.startsWith('rke')) {\n        this.$set(this.value, 'ingressNginx', this.value.ingressNginx || {});\n        this.$set(this.value.ingressNginx, 'enabled', true);\n      } else {\n        this.$set(this.value.rkeEtcd, 'enabled', false);\n      }\n    }\n\n    this.$emit('register-before-hook', this.willSave, 'willSave');\n  },\n\n  methods: {\n    willSave() {\n      const { prometheusSpec } = this.value.prometheus;\n      const selector =\n        prometheusSpec?.storageSpec?.volumeClaimTemplate?.spec?.selector;\n\n      // This works for UI editor installation\n      // However, it doesn't work for yaml editor installation\n      // Global values later merged again in charts/install.vue addGlobalValuesTo()\n      // We still need to remove the global values from charts/install.vue addGlobalValuesTo()\n      if (\n        selector &&\n        isEmpty(selector.matchExpressions) &&\n        isEmpty(selector.matchLabels)\n      ) {\n        delete this.value.prometheus.prometheusSpec.storageSpec\n          .volumeClaimTemplate.spec.selector;\n      }\n    },\n\n    mergeValue(value, defaultValue) {\n      return value === undefined || (typeof value === 'string' && !value.length) ? defaultValue : value;\n    }\n  },\n};\n</script>\n\n<template>\n  <Loading\n    v-if=\"$fetchState.pending\"\n    mode=\"relative\"\n  />\n  <div\n    v-else\n    class=\"config-monitoring-container\"\n  >\n    <Tab\n      name=\"general\"\n      :label=\"t('monitoring.tabs.general')\"\n      :weight=\"99\"\n    >\n      <div>\n        <div class=\"row mb-20\">\n          <div class=\"col span-6\">\n            <ClusterSelector\n              :value=\"value\"\n              :mode=\"mode\"\n              @onClusterTypeChanged=\"clusterType = $event\"\n            />\n          </div>\n        </div>\n        <div\n          v-if=\"clusterType.group === 'managed'\"\n          class=\"row mb-20\"\n        >\n          <Checkbox\n            v-model=\"value.prometheusOperator.hostNetwork\"\n            label-key=\"monitoring.hostNetwork.label\"\n            :tooltip=\"t('monitoring.hostNetwork.tip', {}, true)\"\n          />\n        </div>\n        <div class=\"row\">\n          <div class=\"col span-6\">\n            <Checkbox\n              v-model=\"value.global.rbac.userRoles.create\"\n              label-key=\"monitoring.createDefaultRoles.label\"\n              :tooltip=\"t('monitoring.createDefaultRoles.tip', {}, true)\"\n            />\n          </div>\n          <div class=\"col span-6\">\n            <Checkbox\n              v-model=\"value.global.rbac.userRoles.aggregateToDefaultRoles\"\n              label-key=\"monitoring.aggregateDefaultRoles.label\"\n              :tooltip=\"{\n                content: t('monitoring.aggregateDefaultRoles.tip', {}, true),\n                autoHide: false,\n              }\"\n              :disabled=\"disableAggregateRoles\"\n            />\n          </div>\n        </div>\n        <div\n          v-if=\"provider === 'rke' && value.rkeEtcd\"\n          class=\"row mt-20\"\n        >\n          <div class=\"col span-6\">\n            <LabeledInput\n              v-model=\"value.rkeEtcd.clients.https.certDir\"\n              :label=\"t('monitoring.etcdNodeDirectory.label')\"\n              :tooltip=\"t('monitoring.etcdNodeDirectory.tooltip', {}, true)\"\n              :hover-tooltip=\"true\"\n              :mode=\"mode\"\n            />\n          </div>\n        </div>\n      </div>\n    </Tab>\n    <Tab\n      name=\"prometheus\"\n      :label=\"t('monitoring.tabs.prometheus')\"\n      :weight=\"98\"\n    >\n      <div>\n        <Prometheus\n          v-model=\"value\"\n          v-bind=\"$attrs\"\n          :access-modes=\"accessModes\"\n          :mode=\"mode\"\n          :storage-classes=\"storageClasses\"\n          :prometheus-pods=\"prometheusResources\"\n          :filteredWorkloads=\"filteredWorkloads\"\n        />\n      </div>\n    </Tab>\n    <Tab\n      name=\"alerting\"\n      :label=\"t('monitoring.tabs.alerting')\"\n      :weight=\"97\"\n    >\n      <div>\n        <Alerting\n          v-model=\"value\"\n          :mode=\"mode\"\n          :monitoringSecrets=\"monitoringSecrets\"\n        />\n      </div>\n    </Tab>\n    <Tab\n      name=\"grafana\"\n      :label=\"t('monitoring.tabs.grafana')\"\n      :weight=\"96\"\n    >\n      <div>\n        <Grafana\n          v-model=\"value\"\n          :access-modes=\"accessModes\"\n          :mode=\"mode\"\n          :pvcs=\"pvcs\"\n          :storage-classes=\"storageClasses\"\n        />\n      </div>\n    </Tab>\n  </div>\n</template>\n"]}]}