{"remainingRequest":"/home/ubuntu/susecon-2024-ext-demo/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/pages/c/_cluster/settings/links.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/pages/c/_cluster/settings/links.vue","mtime":1725271280091},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/babel-loader/lib/index.js","mtime":1725271298942},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1725271300920}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBMb2FkaW5nIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL0xvYWRpbmcnOwppbXBvcnQgQXN5bmNCdXR0b24gZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvQXN5bmNCdXR0b24nOwppbXBvcnQgQmFubmVyIGZyb20gJ0Bjb21wb25lbnRzL0Jhbm5lci9CYW5uZXIudnVlJzsKaW1wb3J0IHsgTUFOQUdFTUVOVCB9IGZyb20gJ0BzaGVsbC9jb25maWcvdHlwZXMnOwppbXBvcnQgeyBmZXRjaE9yQ3JlYXRlU2V0dGluZyB9IGZyb20gJ0BzaGVsbC91dGlscy9zZXR0aW5ncyc7CmltcG9ydCB7IFNFVFRJTkcgfSBmcm9tICdAc2hlbGwvY29uZmlnL3NldHRpbmdzJzsKaW1wb3J0IHsgX0VESVQsIF9WSUVXIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy9xdWVyeS1wYXJhbXMnOwppbXBvcnQgS2V5VmFsdWUgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvZm9ybS9LZXlWYWx1ZSc7CmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICd2dWV4JzsKaW1wb3J0IHsgaXNSYW5jaGVyUHJpbWUgfSBmcm9tICdAc2hlbGwvY29uZmlnL3ZlcnNpb24nOwppbXBvcnQgRGVmYXVsdExpbmtzRWRpdG9yIGZyb20gJy4vRGVmYXVsdExpbmtzRWRpdG9yJzsKaW1wb3J0IHsgQ1VTVE9NX0xJTktTX1ZFUlNJT04sIGZldGNoTGlua3MgfSBmcm9tICdAc2hlbGwvY29uZmlnL2hvbWUtbGlua3MnOwoKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIEtleVZhbHVlLAogICAgTG9hZGluZywKICAgIEFzeW5jQnV0dG9uLAogICAgQmFubmVyLAogICAgRGVmYXVsdExpbmtzRWRpdG9yLAogIH0sCiAgYXN5bmMgZmV0Y2goKSB7CiAgICB0aGlzLnZhbHVlID0gYXdhaXQgZmV0Y2hMaW5rcyh0aGlzLiRzdG9yZSwgdGhpcy5oYXNTdXBwb3J0LCBmYWxzZSwgKHN0cikgPT4gdGhpcy50KHN0cikpOwogIH0sCgogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBkZWZhdWx0c0Rpc2FibGVkOiB0cnVlLAogICAgICBpc1JhbmNoZXJQcmltZTogICBpc1JhbmNoZXJQcmltZSgpLAogICAgICB1aUN1c3RvbUxpbmtzOiAgICB7fSwKICAgICAgYmFubmVyVmFsOiAgICAgICAge30sCiAgICAgIHZhbHVlOiAgICAgICAgICAgIFtdLAogICAgICBlcnJvcnM6ICAgICAgICAgICBbXSwKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgLi4ubWFwR2V0dGVycyh7IG11bHRpV2l0aEZhbGxiYWNrOiAnaTE4bi9tdWx0aVdpdGhGYWxsYmFjaycgfSksCgogICAgbW9kZSgpIHsKICAgICAgY29uc3Qgc2NoZW1hID0gdGhpcy4kc3RvcmUuZ2V0dGVyc1tgbWFuYWdlbWVudC9zY2hlbWFGb3JgXShNQU5BR0VNRU5ULlNFVFRJTkcpOwoKICAgICAgcmV0dXJuIHNjaGVtYT8ucmVzb3VyY2VNZXRob2RzPy5pbmNsdWRlcygnUFVUJykgPyBfRURJVCA6IF9WSUVXOwogICAgfSwKCiAgICBhbGxWYWx1ZXMoKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgdmVyc2lvbjogIENVU1RPTV9MSU5LU19WRVJTSU9OLAogICAgICAgIGRlZmF1bHRzOiB0aGlzLnZhbHVlLmRlZmF1bHRzLmZpbHRlcigob2JqKSA9PiBvYmouZW5hYmxlZCkubWFwKChvYmopID0+IG9iai5rZXkpLAogICAgICAgIGN1c3RvbTogICB0aGlzLnZhbHVlLmN1c3RvbQogICAgICB9OwogICAgfSwKCiAgICBoYXNTdXBwb3J0KCkgewogICAgICByZXR1cm4gaXNSYW5jaGVyUHJpbWUoKSB8fCB0aGlzLiRzdG9yZS5nZXR0ZXJzWydtYW5hZ2VtZW50L2J5SWQnXShNQU5BR0VNRU5ULlNFVFRJTkcsIFNFVFRJTkcuU1VQUE9SVEVEICk/LnZhbHVlID09PSAndHJ1ZSc7CiAgICB9LAogIH0sCiAgbWV0aG9kczogewogICAgZGVwcmVjYXRlSXNzdWVMaW5rcygpIHsKICAgICAgaWYgKHRoaXMudWlJc3N1ZXNTZXR0aW5nLnZhbHVlIHx8IHRoaXMudWlJc3N1ZXNTZXR0aW5nLnZhbHVlKSB7CiAgICAgICAgdGhpcy51aUlzc3Vlc1NldHRpbmcudmFsdWUgPSAnJzsKICAgICAgICB0aGlzLnVpQ29tbXVuaXR5U2V0dGluZy52YWx1ZSA9ICcnOwoKICAgICAgICByZXR1cm4gdGhpcy51aUlzc3Vlc1NldHRpbmcuc2F2ZSgpOwogICAgICB9CiAgICB9LAoKICAgIGFzeW5jIHNhdmUoYnRuQ0IpIHsKICAgICAgdGhpcy5lcnJvcnMgPSBbXTsKICAgICAgdHJ5IHsKICAgICAgICBjb25zdCB1aUN1c3RvbUxpbmtzID0gYXdhaXQgZmV0Y2hPckNyZWF0ZVNldHRpbmcodGhpcy4kc3RvcmUsIFNFVFRJTkcuVUlfQ1VTVE9NX0xJTktTLCAnJyk7CgogICAgICAgIHVpQ3VzdG9tTGlua3MudmFsdWUgPSBKU09OLnN0cmluZ2lmeSh0aGlzLmFsbFZhbHVlcyk7CgogICAgICAgIGF3YWl0IHVpQ3VzdG9tTGlua3Muc2F2ZSgpOwoKICAgICAgICB0aGlzLnZhbHVlID0gYXdhaXQgZmV0Y2hMaW5rcyh0aGlzLiRzdG9yZSwgdGhpcy5oYXNTdXBwb3J0LCBmYWxzZSwgKHN0cikgPT4gdGhpcy50KHN0cikpOwogICAgICAgIGJ0bkNCKHRydWUpOwogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICB0aGlzLmVycm9ycy5wdXNoKGVycik7CiAgICAgICAgYnRuQ0IoZmFsc2UpOwogICAgICB9CiAgICB9LAogIH0KfTsK"},{"version":3,"sources":["links.vue"],"names":[],"mappings":";AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"links.vue","sourceRoot":"node_modules/@rancher/shell/pages/c/_cluster/settings","sourcesContent":["<script>\nimport Loading from '@shell/components/Loading';\nimport AsyncButton from '@shell/components/AsyncButton';\nimport Banner from '@components/Banner/Banner.vue';\nimport { MANAGEMENT } from '@shell/config/types';\nimport { fetchOrCreateSetting } from '@shell/utils/settings';\nimport { SETTING } from '@shell/config/settings';\nimport { _EDIT, _VIEW } from '@shell/config/query-params';\nimport KeyValue from '@shell/components/form/KeyValue';\nimport { mapGetters } from 'vuex';\nimport { isRancherPrime } from '@shell/config/version';\nimport DefaultLinksEditor from './DefaultLinksEditor';\nimport { CUSTOM_LINKS_VERSION, fetchLinks } from '@shell/config/home-links';\n\nexport default {\n  components: {\n    KeyValue,\n    Loading,\n    AsyncButton,\n    Banner,\n    DefaultLinksEditor,\n  },\n  async fetch() {\n    this.value = await fetchLinks(this.$store, this.hasSupport, false, (str) => this.t(str));\n  },\n\n  data() {\n    return {\n      defaultsDisabled: true,\n      isRancherPrime:   isRancherPrime(),\n      uiCustomLinks:    {},\n      bannerVal:        {},\n      value:            [],\n      errors:           [],\n    };\n  },\n  computed: {\n    ...mapGetters({ multiWithFallback: 'i18n/multiWithFallback' }),\n\n    mode() {\n      const schema = this.$store.getters[`management/schemaFor`](MANAGEMENT.SETTING);\n\n      return schema?.resourceMethods?.includes('PUT') ? _EDIT : _VIEW;\n    },\n\n    allValues() {\n      return {\n        version:  CUSTOM_LINKS_VERSION,\n        defaults: this.value.defaults.filter((obj) => obj.enabled).map((obj) => obj.key),\n        custom:   this.value.custom\n      };\n    },\n\n    hasSupport() {\n      return isRancherPrime() || this.$store.getters['management/byId'](MANAGEMENT.SETTING, SETTING.SUPPORTED )?.value === 'true';\n    },\n  },\n  methods: {\n    deprecateIssueLinks() {\n      if (this.uiIssuesSetting.value || this.uiIssuesSetting.value) {\n        this.uiIssuesSetting.value = '';\n        this.uiCommunitySetting.value = '';\n\n        return this.uiIssuesSetting.save();\n      }\n    },\n\n    async save(btnCB) {\n      this.errors = [];\n      try {\n        const uiCustomLinks = await fetchOrCreateSetting(this.$store, SETTING.UI_CUSTOM_LINKS, '');\n\n        uiCustomLinks.value = JSON.stringify(this.allValues);\n\n        await uiCustomLinks.save();\n\n        this.value = await fetchLinks(this.$store, this.hasSupport, false, (str) => this.t(str));\n        btnCB(true);\n      } catch (err) {\n        this.errors.push(err);\n        btnCB(false);\n      }\n    },\n  }\n};\n</script>\n<template>\n  <Loading v-if=\"$fetchState.pending\" />\n  <div v-else>\n    <h1 class=\"mb-20\">\n      {{ t(\"customLinks.label\") }}\n    </h1>\n    <div>\n      <label class=\"text-label\">\n        {{ t(`customLinks.description`, {}, true) }}\n      </label>\n    </div>\n    <div class=\"mt-20\">\n      <KeyValue\n        v-model=\"value.custom\"\n        :title=\"'Custom Links'\"\n        :as-map=\"false\"\n        key-name=\"label\"\n        :key-label=\"t('customLinks.settings.keyLabel')\"\n        :value-label=\"t('customLinks.settings.valueLabel')\"\n        :add-label=\"t('customLinks.addLink')\"\n        :read-allowed=\"false\"\n        :protip=\"false\"\n        :mode=\"mode\"\n      />\n    </div>\n    <div class=\"ui-links-setting mt-20\">\n      <DefaultLinksEditor\n        v-model=\"value.defaults\"\n        :mode=\"mode\"\n      />\n    </div>\n    <template v-for=\"err in errors\">\n      <Banner\n        :key=\"err\"\n        color=\"error\"\n        :label=\"err\"\n      />\n    </template>\n    <div\n      v-if=\"mode === 'edit'\"\n      class=\"mt-20\"\n    >\n      <AsyncButton\n        class=\"pull-right\"\n        mode=\"apply\"\n        @click=\"save\"\n      />\n    </div>\n  </div>\n</template>\n<style scoped lang='scss'>\n.overlay {\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  top: 0;\n  left: 0;\n  background-color: var(--overlay-bg);\n  z-index: 1;\n}\n.ui-links-setting {\n  P {\n    line-height: 1.25;\n    margin-bottom: 10px;\n  }\n\n  .underline {\n    text-decoration: underline;\n  }\n}\n.action {\n  display: flex;\n  input {\n    margin-right: 5px;\n  }\n}\n</style>\n"]}]}