{"remainingRequest":"/home/ubuntu/susecon-2024-ext-demo/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/components/CodeMirror.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/components/CodeMirror.vue","mtime":1725271280091},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/babel-loader/lib/index.js","mtime":1725271298942},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1725271300920}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IEtFWU1BUCB9IGZyb20gJ0BzaGVsbC9zdG9yZS9wcmVmcyc7CmltcG9ydCB7IF9FRElULCBfVklFVyB9IGZyb20gJ0BzaGVsbC9jb25maWcvcXVlcnktcGFyYW1zJzsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAgJ0NvZGVNaXJyb3InLAogIHByb3BzOiB7CiAgICAvKioKICAgICAqIFNldHMgdGhlIGVkaXQgbW9kZSBmb3IgVGV4dCBBcmVhLgogICAgICogQHZhbHVlcyBfRURJVCwgX1ZJRVcKICAgICAqLwogICAgbW9kZTogewogICAgICB0eXBlOiAgICBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6IF9FRElUCiAgICB9LAogICAgdmFsdWU6IHsKICAgICAgdHlwZTogICAgIFN0cmluZywKICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICB9LAogICAgb3B0aW9uczogewogICAgICB0eXBlOiAgICBPYmplY3QsCiAgICAgIGRlZmF1bHQ6ICgpID0+IHt9CiAgICB9LAogICAgYXNUZXh0QXJlYTogewogICAgICB0eXBlOiAgICBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfSwKICAgIHNob3dLZXlNYXBCb3g6IHsKICAgICAgdHlwZTogICAgQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0sCiAgfSwKCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGNvZGVNaXJyb3JSZWY6ICAgICAgIG51bGwsCiAgICAgIGxvYWRlZDogICAgICAgICAgICAgIGZhbHNlLAogICAgICBzaG93S2V5TWFwQ2xvc2VJY29uOiBmYWxzZSwKICAgICAgcmVtb3ZlS2V5TWFwQm94OiAgICAgZmFsc2UsCiAgICB9OwogIH0sCgogIGNvbXB1dGVkOiB7CiAgICBpc0Rpc2FibGVkKCkgewogICAgICByZXR1cm4gdGhpcy5tb2RlID09PSBfVklFVzsKICAgIH0sCgogICAgY29tYmluZWRPcHRpb25zKCkgewogICAgICBjb25zdCB0aGVtZSA9IHRoaXMuJHN0b3JlLmdldHRlcnNbJ3ByZWZzL3RoZW1lJ107CiAgICAgIGNvbnN0IGtleW1hcCA9IHRoaXMuJHN0b3JlLmdldHRlcnNbJ3ByZWZzL2dldCddKEtFWU1BUCk7CgogICAgICBjb25zdCBvdXQgPSB7CiAgICAgICAgLy8gY29kZW1pcnJvciBkZWZhdWx0IG9wdGlvbnMKICAgICAgICB0YWJTaXplOiAgICAgICAgICAgICAgICAgMiwKICAgICAgICBpbmRlbnRXaXRoVGFiczogICAgICAgICAgZmFsc2UsCiAgICAgICAgbW9kZTogICAgICAgICAgICAgICAgICAgICd5YW1sJywKICAgICAgICBrZXlNYXA6ICAgICAgICAgICAgICAgICAga2V5bWFwLAogICAgICAgIHRoZW1lOiAgICAgICAgICAgICAgICAgICBgYmFzZTE2LSR7IHRoZW1lIH1gLAogICAgICAgIGxpbmVOdW1iZXJzOiAgICAgICAgICAgICB0cnVlLAogICAgICAgIGxpbmU6ICAgICAgICAgICAgICAgICAgICB0cnVlLAogICAgICAgIHN0eWxlQWN0aXZlTGluZTogICAgICAgICB0cnVlLAogICAgICAgIGxpbmVXcmFwcGluZzogICAgICAgICAgICB0cnVlLAogICAgICAgIGZvbGRHdXR0ZXI6ICAgICAgICAgICAgICB0cnVlLAogICAgICAgIHN0eWxlU2VsZWN0ZWRUZXh0OiAgICAgICB0cnVlLAogICAgICAgIHNob3dDdXJzb3JXaGVuU2VsZWN0aW5nOiB0cnVlLAogICAgICB9OwoKICAgICAgaWYgKHRoaXMuYXNUZXh0QXJlYSkgewogICAgICAgIG91dC5saW5lTnVtYmVycyA9IGZhbHNlOwogICAgICAgIG91dC50YWJTaXplID0gMDsKICAgICAgICBvdXQuZXh0cmFLZXlzID0geyBUYWI6IGZhbHNlIH07CiAgICAgIH0KCiAgICAgIE9iamVjdC5hc3NpZ24ob3V0LCB0aGlzLm9wdGlvbnMpOwoKICAgICAgcmV0dXJuIG91dDsKICAgIH0sCgogICAga2V5TWFwVGV4dCgpIHsKICAgICAgcmV0dXJuIHRoaXMuY29tYmluZWRPcHRpb25zPy5rZXlNYXAgPyB0aGlzLnQoYHByZWZzLmtleW1hcC4keyB0aGlzLmNvbWJpbmVkT3B0aW9ucy5rZXlNYXAgfWApIDogbnVsbDsKICAgIH0sCiAgfSwKCiAgY3JlYXRlZCgpIHsKICAgIGlmICh3aW5kb3cuX19jb2RlTWlycm9yTG9hZGVyKSB7CiAgICAgIHdpbmRvdy5fX2NvZGVNaXJyb3JMb2FkZXIoKS50aGVuKCgpID0+IHsKICAgICAgICB0aGlzLmxvYWRlZCA9IHRydWU7CiAgICAgIH0pOwogICAgfSBlbHNlIHsKICAgICAgY29uc29sZS5lcnJvcignQ29kZSBtaXJyb3IgbG9hZGVyIG5vdCBhdmFpbGFibGUnKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1jb25zb2xlCiAgICB9CiAgfSwKCiAgbWV0aG9kczogewoKICAgIGZvY3VzKCkgewogICAgICBpZiAoIHRoaXMuJHJlZnMuY29kZU1pcnJvclJlZiApIHsKICAgICAgICB0aGlzLiRyZWZzLmNvZGVNaXJyb3JSZWYuY29kZW1pcnJvci5mb2N1cygpOwogICAgICB9CiAgICB9LAoKICAgIHJlZnJlc2goKSB7CiAgICAgIGlmICggdGhpcy4kcmVmcy5jb2RlTWlycm9yUmVmICkgewogICAgICAgIHRoaXMuJHJlZnMuY29kZU1pcnJvclJlZi5yZWZyZXNoKCk7CiAgICAgIH0KICAgIH0sCgogICAgb25SZWFkeShjb2RlTWlycm9yUmVmKSB7CiAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICBjb2RlTWlycm9yUmVmLnJlZnJlc2goKTsKICAgICAgICB0aGlzLmNvZGVNaXJyb3JSZWYgPSBjb2RlTWlycm9yUmVmOwogICAgICB9KTsKICAgICAgdGhpcy4kZW1pdCgnb25SZWFkeScsIGNvZGVNaXJyb3JSZWYpOwogICAgfSwKCiAgICBvbklucHV0KG5ld0NvZGUpIHsKICAgICAgdGhpcy4kZW1pdCgnb25JbnB1dCcsIG5ld0NvZGUpOwogICAgfSwKCiAgICBvbkNoYW5nZXMoY29kZU1pcnJvclJlZiwgY2hhbmdlcykgewogICAgICB0aGlzLiRlbWl0KCdvbkNoYW5nZXMnLCBjb2RlTWlycm9yUmVmLCBjaGFuZ2VzKTsKICAgIH0sCgogICAgb25Gb2N1cygpIHsKICAgICAgdGhpcy4kZW1pdCgnb25Gb2N1cycsIHRydWUpOwogICAgfSwKCiAgICBvbkJsdXIoKSB7CiAgICAgIHRoaXMuJGVtaXQoJ29uRm9jdXMnLCBmYWxzZSk7CiAgICB9LAoKICAgIHVwZGF0ZVZhbHVlKHZhbHVlKSB7CiAgICAgIGlmICggdGhpcy4kcmVmcy5jb2RlTWlycm9yUmVmICkgewogICAgICAgIHRoaXMuJHJlZnMuY29kZU1pcnJvclJlZi5jb2RlbWlycm9yLmRvYy5zZXRWYWx1ZSh2YWx1ZSk7CiAgICAgIH0KICAgIH0sCgogICAgY2xvc2VLZXlNYXBJbmZvKCkgewogICAgICB0aGlzLnJlbW92ZUtleU1hcEJveCA9IHRydWU7CiAgICB9LAoKICAgIG9uS2V5TWFwTW91c2VPdmVyKHYpIHsKICAgICAgdGhpcy5zaG93S2V5TWFwQ2xvc2VJY29uID0gdjsKICAgIH0KICB9Cn07Cg=="},{"version":3,"sources":["CodeMirror.vue"],"names":[],"mappings":";AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"CodeMirror.vue","sourceRoot":"node_modules/@rancher/shell/components","sourcesContent":["<script>\nimport { KEYMAP } from '@shell/store/prefs';\nimport { _EDIT, _VIEW } from '@shell/config/query-params';\n\nexport default {\n  name:  'CodeMirror',\n  props: {\n    /**\n     * Sets the edit mode for Text Area.\n     * @values _EDIT, _VIEW\n     */\n    mode: {\n      type:    String,\n      default: _EDIT\n    },\n    value: {\n      type:     String,\n      required: true,\n    },\n    options: {\n      type:    Object,\n      default: () => {}\n    },\n    asTextArea: {\n      type:    Boolean,\n      default: false\n    },\n    showKeyMapBox: {\n      type:    Boolean,\n      default: false\n    },\n  },\n\n  data() {\n    return {\n      codeMirrorRef:       null,\n      loaded:              false,\n      showKeyMapCloseIcon: false,\n      removeKeyMapBox:     false,\n    };\n  },\n\n  computed: {\n    isDisabled() {\n      return this.mode === _VIEW;\n    },\n\n    combinedOptions() {\n      const theme = this.$store.getters['prefs/theme'];\n      const keymap = this.$store.getters['prefs/get'](KEYMAP);\n\n      const out = {\n        // codemirror default options\n        tabSize:                 2,\n        indentWithTabs:          false,\n        mode:                    'yaml',\n        keyMap:                  keymap,\n        theme:                   `base16-${ theme }`,\n        lineNumbers:             true,\n        line:                    true,\n        styleActiveLine:         true,\n        lineWrapping:            true,\n        foldGutter:              true,\n        styleSelectedText:       true,\n        showCursorWhenSelecting: true,\n      };\n\n      if (this.asTextArea) {\n        out.lineNumbers = false;\n        out.tabSize = 0;\n        out.extraKeys = { Tab: false };\n      }\n\n      Object.assign(out, this.options);\n\n      return out;\n    },\n\n    keyMapText() {\n      return this.combinedOptions?.keyMap ? this.t(`prefs.keymap.${ this.combinedOptions.keyMap }`) : null;\n    },\n  },\n\n  created() {\n    if (window.__codeMirrorLoader) {\n      window.__codeMirrorLoader().then(() => {\n        this.loaded = true;\n      });\n    } else {\n      console.error('Code mirror loader not available'); // eslint-disable-line no-console\n    }\n  },\n\n  methods: {\n\n    focus() {\n      if ( this.$refs.codeMirrorRef ) {\n        this.$refs.codeMirrorRef.codemirror.focus();\n      }\n    },\n\n    refresh() {\n      if ( this.$refs.codeMirrorRef ) {\n        this.$refs.codeMirrorRef.refresh();\n      }\n    },\n\n    onReady(codeMirrorRef) {\n      this.$nextTick(() => {\n        codeMirrorRef.refresh();\n        this.codeMirrorRef = codeMirrorRef;\n      });\n      this.$emit('onReady', codeMirrorRef);\n    },\n\n    onInput(newCode) {\n      this.$emit('onInput', newCode);\n    },\n\n    onChanges(codeMirrorRef, changes) {\n      this.$emit('onChanges', codeMirrorRef, changes);\n    },\n\n    onFocus() {\n      this.$emit('onFocus', true);\n    },\n\n    onBlur() {\n      this.$emit('onFocus', false);\n    },\n\n    updateValue(value) {\n      if ( this.$refs.codeMirrorRef ) {\n        this.$refs.codeMirrorRef.codemirror.doc.setValue(value);\n      }\n    },\n\n    closeKeyMapInfo() {\n      this.removeKeyMapBox = true;\n    },\n\n    onKeyMapMouseOver(v) {\n      this.showKeyMapCloseIcon = v;\n    }\n  }\n};\n</script>\n\n<template>\n  <div\n    class=\"code-mirror\"\n    :class=\"{['as-text-area']: asTextArea}\"\n  >\n    <div v-if=\"loaded\">\n      <div\n        v-if=\"showKeyMapBox && !removeKeyMapBox && keyMapText\"\n        class=\"keymap overlay\"\n      >\n        <div\n          v-clean-tooltip=\"t('codeMirror.keymap.tooltip')\"\n          class=\"label\"\n          data-testid=\"code-mirror-keymap\"\n          @mouseover=\"onKeyMapMouseOver(true)\"\n          @mouseleave=\"onKeyMapMouseOver(false)\"\n        >\n          <span>\n            {{ keyMapText }}\n          </span>\n          <i\n            v-if=\"showKeyMapCloseIcon\"\n            class=\"icon icon-close icon-sm\"\n            @click=\"closeKeyMapInfo\"\n          />\n        </div>\n      </div>\n      <codemirror\n        ref=\"codeMirrorRef\"\n        :value=\"value\"\n        :options=\"combinedOptions\"\n        :disabled=\"isDisabled\"\n        @ready=\"onReady\"\n        @input=\"onInput\"\n        @changes=\"onChanges\"\n        @focus=\"onFocus\"\n        @blur=\"onBlur\"\n      />\n    </div>\n    <div v-else>\n      Loading...\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\">\n  .code-mirror {\n    z-index: 0;\n\n    .overlay {\n      position: sticky;\n      display: grid;\n      top: 0;\n      float: right;\n      height: 0;\n      z-index: 1;\n\n      .label {\n        border-radius: 2px;\n        border-style: dashed;\n        border-width: 0.1px;\n        margin: 7px 7px 0 0;\n        padding: 7px;\n        color: var(--darker);\n        background-color: var(--overlay-bg);\n        font-size: 12px;\n\n        .icon {\n          cursor: pointer;\n        }\n      }\n    }\n\n    .vue-codemirror .CodeMirror {\n      height: initial;\n      background: none\n    }\n\n    &.as-text-area {\n      min-height: 40px;\n      position: relative;\n      display: block;\n      box-sizing: border-box;\n      width: 100%;\n      padding: 10px;\n      background-color: var(--input-bg);\n      border-radius: var(--border-radius);\n      border: solid var(--border-width) var(--input-border);\n      color: var(--input-text);\n\n      &:hover {\n        border-color: var(--input-hover-border);\n      }\n\n      &:focus, &.focus {\n        outline: none;\n        border-color: var(--outline);\n      }\n\n      .CodeMirror-wrap pre {\n        word-break: break-word;\n      }\n      .CodeMirror-code {\n        .CodeMirror-line {\n          &:not(:last-child)>span:after,\n          .cm-markdown-single-trailing-space-odd:before,\n          .cm-markdown-single-trailing-space-even:before {\n            color: var(--muted);\n            position: absolute;\n            line-height: 20px;\n            pointer-events: none;\n          }\n          &:not(:last-child)>span:after {\n            content: '↵';\n            margin-left: 2px;\n          }\n          .cm-markdown-single-trailing-space-odd:before,\n          .cm-markdown-single-trailing-space-even:before {\n            font-weight: bold;\n            content: '·';\n          }\n        }\n      }\n\n      .CodeMirror-lines {\n        color: var(--input-text);\n        padding: 0;\n\n        .CodeMirror-line > span > span {\n          &.cm-overlay {\n            font-family: monospace;\n          }\n        }\n\n        .CodeMirror-line > span {\n          font-family: $body-font;\n        }\n      }\n\n      .CodeMirror-sizer {\n        min-height: 20px;\n      }\n\n      .CodeMirror-selected {\n        background-color: var(--primary) !important;\n      }\n\n      .CodeMirror-selectedtext {\n        color: var(--primary-text);\n      }\n\n      .CodeMirror-line::selection,\n      .CodeMirror-line > span::selection,\n      .CodeMirror-line > span > span::selection {\n        color: var(--primary-text);\n        background-color: var(--primary);\n      }\n\n      .CodeMirror-line::-moz-selection,\n      .CodeMirror-line > span::-moz-selection,\n      .CodeMirror-line > span > span::-moz-selection {\n        color: var(--primary-text);\n        background-color: var(--primary);\n      }\n    }\n  }\n</style>\n"]}]}