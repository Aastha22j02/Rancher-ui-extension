{"remainingRequest":"/home/ubuntu/suseconf/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ubuntu/suseconf/node_modules/@rancher/shell/pages/c/_cluster/apps/charts/index.vue?vue&type=style&index=0&id=62062b3e&lang=scss&scoped=true","dependencies":[{"path":"/home/ubuntu/suseconf/node_modules/@rancher/shell/pages/c/_cluster/apps/charts/index.vue","mtime":1725338146566},{"path":"/home/ubuntu/suseconf/node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js","mtime":1725271300564},{"path":"/home/ubuntu/suseconf/node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1725271300920},{"path":"/home/ubuntu/suseconf/node_modules/postcss-loader/src/index.js","mtime":1725271300857},{"path":"/home/ubuntu/suseconf/node_modules/sass-loader/dist/cjs.js","mtime":1725271288422},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1725271300920}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5sZWZ0LXJpZ2h0LXNwbGl0IHsKICAgIHBhZGRpbmc6IDAgMCAyMHB4IDA7CiAgICB3aWR0aDogMTAwJTsKICAgIHotaW5kZXg6IHotaW5kZXgoJ2ZpeGVkVGFibGVIZWFkZXInKTsKICAgIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50OwogICAgZGlzcGxheTogZ3JpZDsKICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogNDAlIGF1dG8gYXV0bzsKICAgIGFsaWduLWNvbnRlbnQ6IGNlbnRlcjsKICAgIGdyaWQtY29sdW1uLWdhcDogMTBweDsKCiAgICAuZmlsdGVyLWJsb2NrIHsKICAgICAgZGlzcGxheTogZmxleDsKICAgIH0KICAgIC5yZWZyZXNoLWJ0biB7CiAgICAgIG1hcmdpbi1sZWZ0OiAxMHB4OwogICAgfQoKICAgICYud2l0aC1vcy1vcHRpb25zIHsKICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiA0MCUgYXV0byBhdXRvIGF1dG87CiAgICB9CgogICAgQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiBtYXAtZ2V0KCRicmVha3BvaW50cywgJy0tdmlld3BvcnQtMTInKSkgewogICAgICAmewogICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogYXV0byBhdXRvICFpbXBvcnRhbnQ7CiAgICAgICAgZ3JpZC10ZW1wbGF0ZS1yb3dzOiA0MHB4IDQwcHg7CiAgICAgICAgZ3JpZC1yb3ctZ2FwOiAyMHB4OwogICAgICB9CiAgICB9CgogICAgQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiBtYXAtZ2V0KCRicmVha3BvaW50cywgJy0tdmlld3BvcnQtNycpKSB7CiAgICAgICZ7CiAgICAgICAgJnsKICAgICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogYXV0byAhaW1wb3J0YW50OwogICAgICAgICAgZ3JpZC10ZW1wbGF0ZS1yb3dzOiA0MHB4IDQwcHggNDBweCAhaW1wb3J0YW50OwoKICAgICAgICAgICYud2l0aC1vcy1vcHRpb25zIHsKICAgICAgICAgICAgZ3JpZC10ZW1wbGF0ZS1yb3dzOiA0MHB4IDQwcHggNDBweCA0MHB4ICFpbXBvcnRhbnQ7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9Cn0KCi5jaGVja2JveC1zZWxlY3QgewogIC52c19fc2VhcmNoIHsKICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgIHJpZ2h0OiAwCiAgfQoKICAudnNfX3NlbGVjdGVkLW9wdGlvbnMgIHsKICAgIG92ZXJmbG93OiBoaWRkZW47CiAgICB3aGl0ZS1zcGFjZTogbm93cmFwOwogICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7CiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgICBsaW5lLWhlaWdodDogMi40cmVtOwogIH0KfQoKLmNoZWNrYm94LW91dGVyLWNvbnRhaW5lci5pbi1zZWxlY3QgewogIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgtNXB4KTsKICBwYWRkaW5nOiA3cHggMCA2cHggMTNweDsKICB3aWR0aDogY2FsYygxMDAlICsgMTBweCk7CgogIDo6di1kZWVwIC5jaGVja2JveC1sYWJlbCB7CiAgICBkaXNwbGF5OiBmbGV4OwogICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKCiAgICAmIGkgewogICAgICBsaW5lLWhlaWdodDogaW5oZXJpdDsKICAgIH0KICB9CgogICY6Zmlyc3QtY2hpbGQgewogICAgJjpob3ZlciB7CiAgICAgIGJhY2tncm91bmQ6IHZhcigtLWlucHV0LWhvdmVyLWJnKTsKICAgIH0KICB9CgogICY6aG92ZXIgOjp2LWRlZXAgLmNoZWNrYm94LWxhYmVsIHsKICAgICAgY29sb3I6IHZhcigtLWJvZHktdGV4dCk7CiAgICB9CgogICYucmFuY2hlciB7CiAgICAgICY6aG92ZXIgewogICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1hcHAtcmFuY2hlci1hY2NlbnQpOwogICAgfQogICAgJjpob3ZlciA6OnYtZGVlcCAuY2hlY2tib3gtbGFiZWwgewogICAgICBjb2xvcjogdmFyKC0tYXBwLXJhbmNoZXItYWNjZW50LXRleHQpOwogICAgfQogICAgJiBpIHsKICAgICAgY29sb3I6IHZhcigtLWFwcC1yYW5jaGVyLWFjY2VudCkKICAgIH0KICB9CgogICYucGFydG5lciB7CiAgICAgICY6aG92ZXIgewogICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1hcHAtcGFydG5lci1hY2NlbnQpOwogICAgfQogICAgJjpob3ZlciA6OnYtZGVlcCAuY2hlY2tib3gtbGFiZWwgewogICAgICBjb2xvcjogdmFyKC0tYXBwLXBhcnRuZXItYWNjZW50LXRleHQpOwogICAgfQogICAgJiBpIHsKICAgICAgY29sb3I6IHZhcigtLWFwcC1wYXJ0bmVyLWFjY2VudCkKICAgIH0KICB9CgogICYuY29sb3IxIHsKICAgICY6aG92ZXIgewogICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1hcHAtY29sb3IxLWFjY2VudCk7CiAgICB9CiAgICAmOmhvdmVyIDo6di1kZWVwIC5jaGVja2JveC1sYWJlbCB7CiAgICAgIGNvbG9yOiB2YXIoLS1hcHAtY29sb3IxLWFjY2VudC10ZXh0KTsKICAgIH0KICAgICYgaSB7CiAgICAgIGNvbG9yOiB2YXIoLS1hcHAtY29sb3IxLWFjY2VudCkKICAgIH0KICB9CiAgJi5jb2xvcjIgewogICAgJjpob3ZlciB7CiAgICAgIGJhY2tncm91bmQ6IHZhcigtLWFwcC1jb2xvcjItYWNjZW50KTsKICAgIH0KICAgICY6aG92ZXIgOjp2LWRlZXAgLmNoZWNrYm94LWxhYmVsIHsKICAgICAgY29sb3I6IHZhcigtLWFwcC1jb2xvcjItYWNjZW50LXRleHQpOwogICAgfQogICAgJiBpIHsKICAgICAgY29sb3I6IHZhcigtLWFwcC1jb2xvcjItYWNjZW50KQogICAgfQogIH0KICAmLmNvbG9yMyB7CiAgICAmOmhvdmVyIHsKICAgICAgYmFja2dyb3VuZDogdmFyKC0tYXBwLWNvbG9yMy1hY2NlbnQpOwogICAgfQogICAgJjpob3ZlciA6OnYtZGVlcCAuY2hlY2tib3gtbGFiZWwgewogICAgICBjb2xvcjogdmFyKC0tYXBwLWNvbG9yMy1hY2NlbnQtdGV4dCk7CiAgICB9CiAgICAmIGkgewogICAgICBjb2xvcjogdmFyKC0tYXBwLWNvbG9yMy1hY2NlbnQpCiAgICB9CiAgfQogICYuY29sb3I0IHsKICAgICY6aG92ZXIgewogICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1hcHAtY29sb3I0LWFjY2VudCk7CiAgICB9CiAgICAmOmhvdmVyIDo6di1kZWVwLmNoZWNrYm94LWxhYmVsIHsKICAgICAgY29sb3I6IHZhcigtLWFwcC1jb2xvcjQtYWNjZW50LXRleHQpOwogICAgfQogICAgJiBpIHsKICAgICAgY29sb3I6IHZhcigtLWFwcC1jb2xvcjQtYWNjZW50KQogICAgfQogIH0KICAmLmNvbG9yNSB7CiAgICAmOmhvdmVyIHsKICAgICAgYmFja2dyb3VuZDogdmFyKC0tYXBwLWNvbG9yNS1hY2NlbnQpOwogICAgfQogICAgJjpob3ZlciA6OnYtZGVlcCAuY2hlY2tib3gtbGFiZWwgewogICAgICBjb2xvcjogdmFyKC0tYXBwLWNvbG9yNS1hY2NlbnQtdGV4dCk7CiAgICB9CiAgICAmIGkgewogICAgICBjb2xvcjogdmFyKC0tYXBwLWNvbG9yNS1hY2NlbnQpCiAgICB9CiAgfQogICYuY29sb3I2IHsKICAgICY6aG92ZXIgewogICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1hcHAtY29sb3I2LWFjY2VudCk7CiAgICB9CiAgICAmOmhvdmVyIDo6di1kZWVwIC5jaGVja2JveC1sYWJlbCB7CiAgICAgIGNvbG9yOiB2YXIoLS1hcHAtY29sb3I2LWFjY2VudC10ZXh0KTsKICAgIH0KICAgICYgaSB7CiAgICAgIGNvbG9yOiB2YXIoLS1hcHAtY29sb3I2LWFjY2VudCkKICAgIH0KICB9CiAgJi5jb2xvcjcgewogICAgJjpob3ZlciB7CiAgICAgIGJhY2tncm91bmQ6IHZhcigtLWFwcC1jb2xvcjctYWNjZW50KTsKICAgIH0KICAgICY6aG92ZXIgOjp2LWRlZXAgLmNoZWNrYm94LWxhYmVsIHsKICAgICAgY29sb3I6IHZhcigtLWFwcC1jb2xvcjctYWNjZW50LXRleHQpOwogICAgfQogICAgJiBpIHsKICAgICAgY29sb3I6IHZhcigtLWFwcC1jb2xvcjctYWNjZW50KQogICAgfQogIH0KICAmLmNvbG9yOCB7CiAgICAmOmhvdmVyIHsKICAgICAgYmFja2dyb3VuZDogdmFyKC0tYXBwLWNvbG9yOC1hY2NlbnQpOwogICAgfQogICAgJiBpIHsKICAgICAgY29sb3I6IHZhcigtLWFwcC1jb2xvcjgtYWNjZW50KQogICAgfQogIH0KfQoK"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AA4gBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"node_modules/@rancher/shell/pages/c/_cluster/apps/charts","sourcesContent":["<script>\nimport AsyncButton from '@shell/components/AsyncButton';\nimport Loading from '@shell/components/Loading';\nimport { Banner } from '@components/Banner';\nimport Carousel from '@shell/components/Carousel';\nimport ButtonGroup from '@shell/components/ButtonGroup';\nimport SelectIconGrid from '@shell/components/SelectIconGrid';\nimport TypeDescription from '@shell/components/TypeDescription';\nimport {\n  REPO_TYPE, REPO, CHART, VERSION, SEARCH_QUERY, _FLAGGED, CATEGORY, DEPRECATED as DEPRECATED_QUERY, HIDDEN, OPERATING_SYSTEM\n} from '@shell/config/query-params';\nimport { lcFirst } from '@shell/utils/string';\nimport { sortBy } from '@shell/utils/sort';\nimport { mapGetters } from 'vuex';\nimport { Checkbox } from '@components/Form/Checkbox';\nimport Select from '@shell/components/form/Select';\nimport { mapPref, HIDE_REPOS, SHOW_PRE_RELEASE, SHOW_CHART_MODE } from '@shell/store/prefs';\nimport { removeObject, addObject, findBy } from '@shell/utils/array';\nimport { compatibleVersionsFor, filterAndArrangeCharts } from '@shell/store/catalog';\nimport { CATALOG } from '@shell/config/labels-annotations';\nimport { isUIPlugin } from '@shell/config/uiplugins';\nimport TabTitle from '@shell/components/TabTitle';\n\nexport default {\n  name:       'Charts',\n  components: {\n    AsyncButton,\n    Banner,\n    Carousel,\n    ButtonGroup,\n    Loading,\n    Checkbox,\n    Select,\n    SelectIconGrid,\n    TypeDescription,\n    TabTitle\n  },\n\n  async fetch() {\n    await this.$store.dispatch('catalog/load');\n\n    const query = this.$route.query;\n\n    this.searchQuery = query[SEARCH_QUERY] || '';\n    this.showDeprecated = query[DEPRECATED_QUERY] === 'true' || query[DEPRECATED_QUERY] === _FLAGGED;\n    this.showHidden = query[HIDDEN] === _FLAGGED;\n    this.category = query[CATEGORY] || '';\n    this.allRepos = this.areAllEnabled();\n  },\n\n  data() {\n    return {\n      allRepos:        null,\n      category:        null,\n      operatingSystem: null,\n      searchQuery:     null,\n      showDeprecated:  null,\n      showHidden:      null,\n      chartOptions:    [\n        {\n          label: 'Browse',\n          value: 'browse',\n        },\n        {\n          label: 'Featured',\n          value: 'featured'\n        }\n      ]\n    };\n  },\n\n  computed: {\n    ...mapGetters(['currentCluster']),\n    ...mapGetters({ allCharts: 'catalog/charts', loadingErrors: 'catalog/errors' }),\n\n    chartMode: mapPref(SHOW_CHART_MODE),\n\n    hideRepos: mapPref(HIDE_REPOS),\n\n    repoOptions() {\n      let nextColor = 0;\n      // Colors 3 and 4 match `rancher` and `partner` colors, so just avoid them\n      const colors = [1, 2, 5, 6, 7, 8];\n\n      let out = this.$store.getters['catalog/repos'].map((r) => {\n        return {\n          _key:    r._key,\n          label:   r.nameDisplay,\n          color:   r.color,\n          weight:  ( r.isRancher ? 1 : ( r.isPartner ? 2 : 3 ) ),\n          enabled: !this.hideRepos.includes(r._key),\n        };\n      });\n\n      out = sortBy(out, ['weight', 'label']);\n\n      for ( const entry of out ) {\n        if ( !entry.color ) {\n          entry.color = `color${ colors[nextColor] }`;\n          nextColor++;\n          if ( nextColor >= colors.length ) {\n            nextColor = 0;\n          }\n        }\n      }\n\n      return out;\n    },\n\n    repoOptionsForDropdown() {\n      return [{\n        label: this.t('catalog.repo.all'), all: true, enabled: this.areAllEnabled()\n      }, ...this.repoOptions];\n    },\n\n    flattenedRepoNames() {\n      const allChecked = this.repoOptionsForDropdown.find((repo) => repo.all && repo.enabled);\n\n      if (allChecked) {\n        return allChecked.label;\n      }\n\n      // None checked\n      if (!this.repoOptionsForDropdown.find((repo) => repo.enabled)) {\n        return this.t('generic.none');\n      }\n\n      const shownRepos = this.repoOptions.filter((repo) => !this.hideRepos.includes(repo._key));\n      const reducedRepos = shownRepos.reduce((acc, c, i) => {\n        acc += c.label;\n        const length = shownRepos.length;\n\n        if (i < length - 1) {\n          acc += ', ';\n        }\n\n        return acc;\n      }, '');\n\n      return reducedRepos;\n    },\n\n    /**\n     * Filter allll charts by invalid entries (deprecated, hidden and ui plugin).\n     *\n     * This does not include any user provided filters (like selected repos, categories and text query)\n     */\n    enabledCharts() {\n      return (this.allCharts || []).filter((c) => {\n        if ( c.deprecated && !this.showDeprecated ) {\n          return false;\n        }\n\n        if ( c.hidden && !this.showHidden ) {\n          return false;\n        }\n\n        if (isUIPlugin(c)) {\n          return false;\n        }\n\n        return true;\n      });\n    },\n\n    /**\n     * Filter enabled charts allll filters. These are what the user will see in the list\n     */\n    filteredCharts() {\n      return this.filterCharts({\n        category:    this.category,\n        searchQuery: this.searchQuery,\n        hideRepos:   this.hideRepos\n      });\n    },\n\n    /**\n     * Filter valid charts (alll filters minus user provided ones) by whether they are featured or not\n     *\n     * This will power the carousel\n     */\n    featuredCharts() {\n      const filteredCharts = this.filterCharts({});\n\n      const featuredCharts = filteredCharts.filter((value) => value.featured).sort((a, b) => a.featured - b.featured);\n\n      return featuredCharts.slice(0, 5);\n    },\n\n    categories() {\n      const map = {};\n\n      // Filter charts by everything except itself\n      const charts = this.filterCharts({\n        searchQuery: this.searchQuery,\n        hideRepos:   this.hideRepos\n      });\n\n      for ( const chart of charts ) {\n        for ( const c of chart.categories ) {\n          if ( !map[c] ) {\n            const labelKey = `catalog.charts.categories.${ lcFirst(c) }`;\n\n            map[c] = {\n              label: this.$store.getters['i18n/withFallback'](labelKey, null, c),\n              value: c,\n              count: 0\n            };\n          }\n\n          map[c].count++;\n        }\n      }\n\n      const out = Object.values(map);\n\n      out.unshift({\n        label: this.t('catalog.charts.categories.all'),\n        value: '',\n        count: charts.length\n      });\n\n      return sortBy(out, ['label']);\n    },\n\n    showCarousel() {\n      return this.chartMode === 'featured' && this.featuredCharts.length;\n    }\n\n  },\n\n  watch: {\n    searchQuery(q) {\n      this.$router.applyQuery({ [SEARCH_QUERY]: q || undefined });\n    },\n\n    category(cat) {\n      this.$router.applyQuery({ [CATEGORY]: cat || undefined });\n    },\n\n    operatingSystem(os) {\n      this.$router.applyQuery({ [OPERATING_SYSTEM]: os || undefined });\n    },\n\n    showDeprecated(neu) {\n      this.$router.applyQuery({ [DEPRECATED_QUERY]: neu || undefined });\n    }\n  },\n\n  mounted() {\n    if ( typeof window !== 'undefined' ) {\n      window.c = this;\n    }\n  },\n\n  methods: {\n    colorForChart(chart) {\n      const repos = this.repoOptions;\n      const repo = findBy(repos, '_key', chart.repoKey);\n\n      if ( repo ) {\n        return repo.color;\n      }\n\n      return null;\n    },\n\n    toggleAll(on) {\n      for ( const r of this.repoOptions ) {\n        this.toggleRepo(r, on, false);\n      }\n\n      this.$nextTick(() => {\n        this.allRepos = this.areAllEnabled();\n      });\n    },\n\n    areAllEnabled() {\n      const all = this.$store.getters['catalog/repos'];\n\n      for ( const r of all ) {\n        if ( this.hideRepos.includes(r._key) ) {\n          return false;\n        }\n      }\n\n      return true;\n    },\n\n    toggleRepo(repo, on, updateAll = true) {\n      const hidden = this.hideRepos;\n\n      if ( on ) {\n        removeObject(hidden, repo._key);\n      } else {\n        addObject(hidden, repo._key);\n      }\n\n      this.hideRepos = hidden;\n\n      if ( updateAll ) {\n        this.allRepos = this.areAllEnabled();\n      }\n    },\n\n    selectChart(chart) {\n      let version;\n      const OSs = this.currentCluster.workerOSs;\n      const showPrerelease = this.$store.getters['prefs/get'](SHOW_PRE_RELEASE);\n      const compatibleVersions = compatibleVersionsFor(chart, OSs, showPrerelease);\n      const versions = chart.versions;\n\n      if (compatibleVersions.length > 0) {\n        version = compatibleVersions[0].version;\n      } else {\n        version = versions[0].version;\n      }\n\n      const query = {\n        [REPO_TYPE]: chart.repoType,\n        [REPO]:      chart.repoName,\n        [CHART]:     chart.chartName,\n        [VERSION]:   version\n      };\n\n      if (chart.deprecated && this.showDeprecated) {\n        query[DEPRECATED_QUERY] = 'true';\n      }\n\n      this.$router.push({\n        name:   'c-cluster-apps-charts-chart',\n        params: {\n          cluster: this.$route.params.cluster,\n          product: this.$store.getters['productId'],\n        },\n        query\n      });\n    },\n\n    focusSearch() {\n      if ( this.$refs.searchQuery ) {\n        this.$refs.searchQuery.focus();\n        this.$refs.searchQuery.select();\n      }\n    },\n\n    async refresh(btnCb) {\n      try {\n        await this.$store.dispatch('catalog/refresh');\n        btnCb(true);\n      } catch (e) {\n        this.$store.dispatch('growl/fromError', e);\n        btnCb(false);\n      }\n    },\n\n    filterCharts({ category, searchQuery, hideRepos }) {\n      const enabledCharts = (this.enabledCharts || []);\n      const clusterProvider = this.currentCluster.status.provider || 'other';\n\n      return filterAndArrangeCharts(enabledCharts, {\n        clusterProvider,\n        category,\n        searchQuery,\n        showDeprecated: this.showDeprecated,\n        showHidden:     this.showHidden,\n        hideRepos,\n        hideTypes:      [CATALOG._CLUSTER_TPL],\n        showPrerelease: this.$store.getters['prefs/get'](SHOW_PRE_RELEASE),\n      });\n    }\n  },\n};\n</script>\n\n<template>\n  <Loading v-if=\"$fetchState.pending\" />\n  <div v-else>\n    <header>\n      <div class=\"title\">\n        <h1\n          data-testid=\"charts-header-title\"\n          class=\"m-0\"\n        >\n          <TabTitle>{{ t('catalog.charts.header') }}</TabTitle>\n        </h1>\n      </div>\n      <div\n        v-if=\"featuredCharts.length > 0\"\n        class=\"actions-container\"\n      >\n        <ButtonGroup\n          v-model=\"chartMode\"\n          :options=\"chartOptions\"\n        />\n      </div>\n    </header>\n    <div v-if=\"showCarousel\">\n      <h3>{{ t('catalog.charts.featuredCharts') }}</h3>\n      <Carousel\n        :sliders=\"featuredCharts\"\n        data-testid=\"charts-carousel\"\n        @clicked=\"(row) => selectChart(row)\"\n      />\n    </div>\n\n    <TypeDescription resource=\"chart\" />\n    <div class=\"left-right-split\">\n      <Select\n        :searchable=\"false\"\n        :options=\"repoOptionsForDropdown\"\n        :value=\"flattenedRepoNames\"\n        class=\"checkbox-select\"\n        :close-on-select=\"false\"\n        data-testid=\"charts-filter-repos\"\n        @option:selecting=\"$event.all ? toggleAll(!$event.enabled) : toggleRepo($event, !$event.enabled) \"\n      >\n        <template #selected-option=\"selected\">\n          {{ selected.label }}\n        </template>\n        <template #option=\"repo\">\n          <Checkbox\n            :value=\"repo.enabled\"\n            :label=\"repo.label\"\n            class=\"pull-left repo in-select\"\n            :class=\"{ [repo.color]: true}\"\n            :color=\"repo.color\"\n          >\n            <template #label>\n              <span>{{ repo.label }}</span><i\n                v-if=\"!repo.all\"\n                class=\" pl-5 icon icon-dot icon-sm\"\n                :class=\"{[repo.color]: true}\"\n              />\n            </template>\n          </Checkbox>\n        </template>\n      </Select>\n\n      <Select\n        v-model=\"category\"\n        :clearable=\"false\"\n        :searchable=\"false\"\n        :options=\"categories\"\n        placement=\"bottom\"\n        label=\"label\"\n        style=\"min-width: 200px;\"\n        :reduce=\"opt => opt.value\"\n        data-testid=\"charts-filter-category\"\n      >\n        <template #option=\"opt\">\n          {{ opt.label }} ({{ opt.count }})\n        </template>\n      </Select>\n\n      <div class=\"filter-block\">\n        <input\n          ref=\"searchQuery\"\n          v-model=\"searchQuery\"\n          type=\"search\"\n          class=\"input-sm\"\n          :placeholder=\"t('catalog.charts.search')\"\n          data-testid=\"charts-filter-input\"\n        >\n\n        <button\n          v-shortkey.once=\"['/']\"\n          class=\"hide\"\n          @shortkey=\"focusSearch()\"\n        />\n        <AsyncButton\n          class=\"refresh-btn\"\n          mode=\"refresh\"\n          size=\"sm\"\n          @click=\"refresh\"\n        />\n      </div>\n\n      <div class=\"mt-10\">\n        <Checkbox\n          v-model=\"showDeprecated\"\n          :label=\"t('catalog.charts.deprecatedChartsFilter.label')\"\n          data-testid=\"charts-show-deprecated-filter\"\n        />\n      </div>\n    </div>\n\n    <Banner\n      v-for=\"err in loadingErrors\"\n      :key=\"err\"\n      color=\"error\"\n      :label=\"err\"\n    />\n\n    <div v-if=\"allCharts.length\">\n      <div\n        v-if=\"filteredCharts.length === 0\"\n        style=\"width: 100%;\"\n      >\n        <div class=\"m-50 text-center\">\n          <h1>{{ t('catalog.charts.noCharts') }}</h1>\n        </div>\n      </div>\n      <SelectIconGrid\n        v-else\n        data-testid=\"chart-selection-grid\"\n        component-test-id=\"chart-selection\"\n        :rows=\"filteredCharts\"\n        name-field=\"chartNameDisplay\"\n        description-field=\"chartDescription\"\n        :color-for=\"colorForChart\"\n        @clicked=\"(row) => selectChart(row)\"\n      />\n    </div>\n    <div\n      v-else\n      class=\"m-50 text-center\"\n    >\n      <h1>{{ t('catalog.charts.noCharts') }}</h1>\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n.left-right-split {\n    padding: 0 0 20px 0;\n    width: 100%;\n    z-index: z-index('fixedTableHeader');\n    background: transparent;\n    display: grid;\n    grid-template-columns: 40% auto auto;\n    align-content: center;\n    grid-column-gap: 10px;\n\n    .filter-block {\n      display: flex;\n    }\n    .refresh-btn {\n      margin-left: 10px;\n    }\n\n    &.with-os-options {\n      grid-template-columns: 40% auto auto auto;\n    }\n\n    @media only screen and (max-width: map-get($breakpoints, '--viewport-12')) {\n      &{\n        grid-template-columns: auto auto !important;\n        grid-template-rows: 40px 40px;\n        grid-row-gap: 20px;\n      }\n    }\n\n    @media only screen and (max-width: map-get($breakpoints, '--viewport-7')) {\n      &{\n        &{\n          grid-template-columns: auto !important;\n          grid-template-rows: 40px 40px 40px !important;\n\n          &.with-os-options {\n            grid-template-rows: 40px 40px 40px 40px !important;\n          }\n        }\n      }\n    }\n}\n\n.checkbox-select {\n  .vs__search {\n    position: absolute;\n    right: 0\n  }\n\n  .vs__selected-options  {\n    overflow: hidden;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n    display: inline-block;\n    line-height: 2.4rem;\n  }\n}\n\n.checkbox-outer-container.in-select {\n  transform: translateX(-5px);\n  padding: 7px 0 6px 13px;\n  width: calc(100% + 10px);\n\n  ::v-deep .checkbox-label {\n    display: flex;\n    align-items: center;\n\n    & i {\n      line-height: inherit;\n    }\n  }\n\n  &:first-child {\n    &:hover {\n      background: var(--input-hover-bg);\n    }\n  }\n\n  &:hover ::v-deep .checkbox-label {\n      color: var(--body-text);\n    }\n\n  &.rancher {\n      &:hover {\n      background: var(--app-rancher-accent);\n    }\n    &:hover ::v-deep .checkbox-label {\n      color: var(--app-rancher-accent-text);\n    }\n    & i {\n      color: var(--app-rancher-accent)\n    }\n  }\n\n  &.partner {\n      &:hover {\n      background: var(--app-partner-accent);\n    }\n    &:hover ::v-deep .checkbox-label {\n      color: var(--app-partner-accent-text);\n    }\n    & i {\n      color: var(--app-partner-accent)\n    }\n  }\n\n  &.color1 {\n    &:hover {\n      background: var(--app-color1-accent);\n    }\n    &:hover ::v-deep .checkbox-label {\n      color: var(--app-color1-accent-text);\n    }\n    & i {\n      color: var(--app-color1-accent)\n    }\n  }\n  &.color2 {\n    &:hover {\n      background: var(--app-color2-accent);\n    }\n    &:hover ::v-deep .checkbox-label {\n      color: var(--app-color2-accent-text);\n    }\n    & i {\n      color: var(--app-color2-accent)\n    }\n  }\n  &.color3 {\n    &:hover {\n      background: var(--app-color3-accent);\n    }\n    &:hover ::v-deep .checkbox-label {\n      color: var(--app-color3-accent-text);\n    }\n    & i {\n      color: var(--app-color3-accent)\n    }\n  }\n  &.color4 {\n    &:hover {\n      background: var(--app-color4-accent);\n    }\n    &:hover ::v-deep.checkbox-label {\n      color: var(--app-color4-accent-text);\n    }\n    & i {\n      color: var(--app-color4-accent)\n    }\n  }\n  &.color5 {\n    &:hover {\n      background: var(--app-color5-accent);\n    }\n    &:hover ::v-deep .checkbox-label {\n      color: var(--app-color5-accent-text);\n    }\n    & i {\n      color: var(--app-color5-accent)\n    }\n  }\n  &.color6 {\n    &:hover {\n      background: var(--app-color6-accent);\n    }\n    &:hover ::v-deep .checkbox-label {\n      color: var(--app-color6-accent-text);\n    }\n    & i {\n      color: var(--app-color6-accent)\n    }\n  }\n  &.color7 {\n    &:hover {\n      background: var(--app-color7-accent);\n    }\n    &:hover ::v-deep .checkbox-label {\n      color: var(--app-color7-accent-text);\n    }\n    & i {\n      color: var(--app-color7-accent)\n    }\n  }\n  &.color8 {\n    &:hover {\n      background: var(--app-color8-accent);\n    }\n    & i {\n      color: var(--app-color8-accent)\n    }\n  }\n}\n\n</style>\n"]}]}