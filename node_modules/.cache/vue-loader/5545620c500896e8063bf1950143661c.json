{"remainingRequest":"/home/ubuntu/suseconf/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ubuntu/suseconf/node_modules/@rancher/shell/edit/resources.cattle.io.backup.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/ubuntu/suseconf/node_modules/@rancher/shell/edit/resources.cattle.io.backup.vue","mtime":1725338146566},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js","mtime":1725271298942},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1725271300920}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBDcnVSZXNvdXJjZSBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9DcnVSZXNvdXJjZSc7CmltcG9ydCBjcmVhdGVFZGl0VmlldyBmcm9tICdAc2hlbGwvbWl4aW5zL2NyZWF0ZS1lZGl0LXZpZXcnOwppbXBvcnQgZm9ybVZhbGlkYXRpb24gZnJvbSAnQHNoZWxsL21peGlucy9mb3JtLXZhbGlkYXRpb24nOwppbXBvcnQgeyBMYWJlbGVkSW5wdXQgfSBmcm9tICdAY29tcG9uZW50cy9Gb3JtL0xhYmVsZWRJbnB1dCc7CmltcG9ydCBVbml0SW5wdXQgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvZm9ybS9Vbml0SW5wdXQnOwppbXBvcnQgTGFiZWxlZFNlbGVjdCBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9mb3JtL0xhYmVsZWRTZWxlY3QnOwppbXBvcnQgeyBCYW5uZXIgfSBmcm9tICdAY29tcG9uZW50cy9CYW5uZXInOwppbXBvcnQgeyBSYWRpb0dyb3VwIH0gZnJvbSAnQGNvbXBvbmVudHMvRm9ybS9SYWRpbyc7CmltcG9ydCBOYW1lTnNEZXNjcmlwdGlvbiBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9mb3JtL05hbWVOc0Rlc2NyaXB0aW9uJzsKaW1wb3J0IExvYWRpbmcgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvTG9hZGluZyc7CmltcG9ydCBTMyBmcm9tICdAc2hlbGwvY2hhcnQvcmFuY2hlci1iYWNrdXAvUzMnOwppbXBvcnQgeyBtYXBHZXR0ZXJzIH0gZnJvbSAndnVleCc7CmltcG9ydCB7IFNFQ1JFVCwgQkFDS1VQX1JFU1RPUkUsIENBVEFMT0cgfSBmcm9tICdAc2hlbGwvY29uZmlnL3R5cGVzJzsKaW1wb3J0IHsgYWxsSGFzaCB9IGZyb20gJ0BzaGVsbC91dGlscy9wcm9taXNlJzsKaW1wb3J0IHsgTkFNRVNQQUNFLCBfVklFVyB9IGZyb20gJ0BzaGVsbC9jb25maWcvcXVlcnktcGFyYW1zJzsKaW1wb3J0IHsgc29ydEJ5IH0gZnJvbSAnQHNoZWxsL3V0aWxzL3NvcnQnOwppbXBvcnQgeyBnZXQgfSBmcm9tICdAc2hlbGwvdXRpbHMvb2JqZWN0JzsKaW1wb3J0IHsgZm9ybWF0RW5jcnlwdGlvblNlY3JldE5hbWVzIH0gZnJvbSAnQHNoZWxsL3V0aWxzL2Zvcm1hdHRlcic7CmltcG9ydCB7IEZpbHRlckFyZ3MsIFBhZ2luYXRpb25QYXJhbUZpbHRlciB9IGZyb20gJ0BzaGVsbC90eXBlcy9zdG9yZS9wYWdpbmF0aW9uLnR5cGVzJzsKaW1wb3J0IHsgU0VDUkVUX1RZUEVTIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy9zZWNyZXQnOwoKZXhwb3J0IGRlZmF1bHQgewoKICBjb21wb25lbnRzOiB7CiAgICBDcnVSZXNvdXJjZSwKICAgIFVuaXRJbnB1dCwKICAgIExhYmVsZWRJbnB1dCwKICAgIExhYmVsZWRTZWxlY3QsCiAgICBSYWRpb0dyb3VwLAogICAgTmFtZU5zRGVzY3JpcHRpb24sCiAgICBCYW5uZXIsCiAgICBMb2FkaW5nLAogICAgUzMsCiAgfSwKICBtaXhpbnM6IFtjcmVhdGVFZGl0VmlldywgZm9ybVZhbGlkYXRpb25dLAoKICBwcm9wczogewogICAgdmFsdWU6IHsKICAgICAgdHlwZTogICAgT2JqZWN0LAogICAgICBkZWZhdWx0OiAoKSA9PiB7CiAgICAgICAgcmV0dXJuIHt9OwogICAgICB9CiAgICB9LAogICAgbW9kZTogewogICAgICB0eXBlOiAgICBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICdjcmVhdGUnCiAgICB9CiAgfSwKCiAgYXN5bmMgZmV0Y2goKSB7CiAgICBjb25zdCBoYXNoID0gYXdhaXQgYWxsSGFzaCh7CiAgICAgIGNhdGFsb2c6ICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnY2F0YWxvZy9sb2FkJyksCiAgICAgIHJlc291cmNlU2V0OiB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnY2x1c3Rlci9maW5kJywgeyB0eXBlOiBCQUNLVVBfUkVTVE9SRS5SRVNPVVJDRV9TRVQsIGlkOiB0aGlzLnZhbHVlPy5zcGVjPy5yZXNvdXJjZVNldE5hbWUgfHwgJ3JhbmNoZXItcmVzb3VyY2Utc2V0JyB9KSwKICAgICAgYXBwczogICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdjbHVzdGVyL2ZpbmRBbGwnLCB7IHR5cGU6IENBVEFMT0cuQVBQIH0pCiAgICB9KTsKCiAgICB0aGlzLmFwcHMgPSBoYXNoLmFwcHM7CiAgICB0aGlzLnJlc291cmNlU2V0ID0gaGFzaC5yZXNvdXJjZVNldDsKCiAgICBjb25zdCBCUk9SZWxlYXNlID0gdGhpcy5hcHBzLmZpbHRlcigocmVsZWFzZSkgPT4gZ2V0KHJlbGVhc2UsICdzcGVjLm5hbWUnKSA9PT0gJ3JhbmNoZXItYmFja3VwJylbMF07CgogICAgdGhpcy5jaGFydE5hbWVzcGFjZSA9IEJST1JlbGVhc2U/LnNwZWMubmFtZXNwYWNlIHx8ICcnOwoKICAgIGlmICh0aGlzLiRzdG9yZS5nZXR0ZXJzW2BjbHVzdGVyL3BhZ2luYXRpb25FbmFibGVkYF0oU0VDUkVUKSkgewogICAgICBjb25zdCBmaW5kUGFnZUFyZ3MgPSB7IC8vIE9mIHR5cGUgQWN0aW9uRmluZFBhZ2VBcmdzCiAgICAgICAgbmFtZXNwYWNlZDogdGhpcy5jaGFydE5hbWVzcGFjZSwKICAgICAgICBwYWdpbmF0aW9uOiBuZXcgRmlsdGVyQXJncyh7CiAgICAgICAgICBmaWx0ZXJzOiBQYWdpbmF0aW9uUGFyYW1GaWx0ZXIuY3JlYXRlU2luZ2xlRmllbGQoewogICAgICAgICAgICBmaWVsZDogJ21ldGFkYXRhLmZpZWxkcy4xJywKICAgICAgICAgICAgdmFsdWU6IFNFQ1JFVF9UWVBFUy5PUEFRVUUKICAgICAgICAgIH0pCiAgICAgICAgfSksCiAgICAgIH07CgogICAgICAvLyBEbyBhIG9uZSB0aW1lIHJlcXVlc3QgdG8gZ2V0IHRoZXNlIHR5cGUgb2Ygc2VjcmV0cy4uLi4gYW5kIHRoZXJlJ3MgYSBjb250cm9sIG9uIHRoaXMgcGFnZSB0aGF0IHdpbGwgZmV0Y2ggYW5kIGNhY2hlIHNlY3JldHMKICAgICAgY29uc3QgdXJsID0gdGhpcy4kc3RvcmUuZ2V0dGVyc1tgY2x1c3Rlci91cmxGb3JgXShTRUNSRVQsIG51bGwsIGZpbmRQYWdlQXJncyk7CiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuJHN0b3JlLmRpc3BhdGNoKGBjbHVzdGVyL3JlcXVlc3RgLCB7IHVybCB9KTsKCiAgICAgIHRoaXMuc2VjcmV0cyA9IHJlcz8uZGF0YSB8fCBbXTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMuc2VjcmV0cyA9IGF3YWl0IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdjbHVzdGVyL2ZpbmRBbGwnLCB7IHR5cGU6IFNFQ1JFVCB9KTsKICAgIH0KICB9LAoKICBkYXRhKCkgewogICAgaWYgKCF0aGlzLnZhbHVlLnNwZWMpIHsKICAgICAgdGhpcy4kc2V0KHRoaXMudmFsdWUsICdzcGVjJywgeyByZXRlbnRpb25Db3VudDogMTAgfSk7CiAgICB9CiAgICBsZXQgczMgPSB7fTsKICAgIGxldCB1c2VFbmNyeXB0aW9uID0gZmFsc2U7CiAgICBsZXQgc2V0U2NoZWR1bGUgPSBmYWxzZTsKICAgIGxldCBzdG9yYWdlU291cmNlID0gJ3VzZURlZmF1bHQnOwoKICAgIGlmICh0aGlzLnZhbHVlLnNwZWMuZW5jcnlwdGlvbkNvbmZpZ1NlY3JldE5hbWUpIHsKICAgICAgdXNlRW5jcnlwdGlvbiA9IHRydWU7CiAgICB9CgogICAgaWYgKHRoaXMudmFsdWUuc3BlYy5zY2hlZHVsZSkgewogICAgICBzZXRTY2hlZHVsZSA9IHRydWU7CiAgICB9CgogICAgaWYgKHRoaXMudmFsdWU/LnNwZWM/LnN0b3JhZ2VMb2NhdGlvbj8uczMpIHsKICAgICAgc3RvcmFnZVNvdXJjZSA9ICdjb25maWd1cmVTMyc7CiAgICAgIHMzID0gdGhpcy52YWx1ZS5zcGVjLnN0b3JhZ2VMb2NhdGlvbi5zMzsKICAgIH0KCiAgICByZXR1cm4gewogICAgICBzZWNyZXRzOiAgICAgICAgW10sCiAgICAgIHJlc291cmNlU2V0OiAgICBudWxsLAogICAgICBzMywKICAgICAgc3RvcmFnZVNvdXJjZSwKICAgICAgdXNlRW5jcnlwdGlvbiwKICAgICAgYXBwczogICAgICAgICAgIFtdLAogICAgICBzZXRTY2hlZHVsZSwKICAgICAgbmFtZTogICAgICAgICAgIHRoaXMudmFsdWU/Lm1ldGFkYXRhPy5uYW1lLAogICAgICBmdkZvcm1SdWxlU2V0czogW3sKICAgICAgICBwYXRoOiAnbWV0YWRhdGEubmFtZScsIHJ1bGVzOiBbJ2Ruc0xhYmVsJywgJ25vVXBwZXJDYXNlJ10sIHRyYW5zbGF0aW9uS2V5OiAnbmFtZU5zRGVzY3JpcHRpb24ubmFtZS5sYWJlbCcKICAgICAgfV0sCiAgICAgIGNoYXJ0TmFtZXNwYWNlOiBudWxsLAogICAgfTsKICB9LAoKICBjb21wdXRlZDogewogICAgaXNWaWV3KCkgewogICAgICByZXR1cm4gdGhpcy5tb2RlID09PSBfVklFVzsKICAgIH0sCgogICAgZW5jcnlwdGlvblNlY3JldE5hbWVzKCkgewogICAgICByZXR1cm4gZm9ybWF0RW5jcnlwdGlvblNlY3JldE5hbWVzKHRoaXMuc2VjcmV0cywgdGhpcy5jaGFydE5hbWVzcGFjZSk7CiAgICB9LAoKICAgIHN0b3JhZ2VPcHRpb25zKCkgewogICAgICBjb25zdCBvcHRpb25zID0gWyd1c2VEZWZhdWx0JywgJ2NvbmZpZ3VyZVMzJ107CiAgICAgIGNvbnN0IGxhYmVscyA9IFt0aGlzLnQoJ2JhY2t1cFJlc3RvcmVPcGVyYXRvci5zdG9yYWdlU291cmNlLnVzZURlZmF1bHQnKSwgdGhpcy50KCdiYWNrdXBSZXN0b3JlT3BlcmF0b3Iuc3RvcmFnZVNvdXJjZS5jb25maWd1cmVTMycpXTsKCiAgICAgIHJldHVybiB7IG9wdGlvbnMsIGxhYmVscyB9OwogICAgfSwKCiAgICBlbmNyeXB0aW9uT3B0aW9ucygpIHsKICAgICAgY29uc3Qgb3B0aW9ucyA9IFtmYWxzZSwgdHJ1ZV07CiAgICAgIGNvbnN0IGxhYmVscyA9IFt0aGlzLnQoJ2JhY2t1cFJlc3RvcmVPcGVyYXRvci5lbmNyeXB0aW9uQ29uZmlnTmFtZS5vcHRpb25zLm5vbmUnKSwgdGhpcy50KCdiYWNrdXBSZXN0b3JlT3BlcmF0b3IuZW5jcnlwdGlvbkNvbmZpZ05hbWUub3B0aW9ucy5zZWNyZXQnLCB7fSwgdHJ1ZSldOwoKICAgICAgcmV0dXJuIHsgb3B0aW9ucywgbGFiZWxzIH07CiAgICB9LAoKICAgIG5hbWVzcGFjZXMoKSB7CiAgICAgIGNvbnN0IGNob2ljZXMgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzWydjbHVzdGVyL2FsbCddKE5BTUVTUEFDRSk7CiAgICAgIGNvbnN0IG91dCA9IHNvcnRCeShjaG9pY2VzLm1hcCgob2JqKSA9PiB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGxhYmVsOiBvYmoubmFtZURpc3BsYXksCiAgICAgICAgICB2YWx1ZTogb2JqLmlkLAogICAgICAgIH07CiAgICAgIH0pLCAnbGFiZWwnKTsKCiAgICAgIHJldHVybiBvdXQ7CiAgICB9LAoKICAgIHZhbGlkYXRlZCgpIHsKICAgICAgcmV0dXJuICEhdGhpcy5uYW1lICYmICghdGhpcy51c2VFbmNyeXB0aW9uIHx8ICEhdGhpcy52YWx1ZT8uc3BlYz8uZW5jcnlwdGlvbkNvbmZpZ1NlY3JldE5hbWUpICYmIHRoaXMuZnZGb3JtSXNWYWxpZDsKICAgIH0sCgogICAgLi4ubWFwR2V0dGVycyh7IHQ6ICdpMThuL3QnIH0pCiAgfSwKCiAgd2F0Y2g6IHsKICAgIHN0b3JhZ2VTb3VyY2UobmV1KSB7CiAgICAgIGlmIChuZXUgPT09ICd1c2VEZWZhdWx0JykgewogICAgICAgIGRlbGV0ZSB0aGlzLnZhbHVlLnNwZWMuc3RvcmFnZUxvY2F0aW9uOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJHNldCh0aGlzLnZhbHVlLnNwZWMsICdzdG9yYWdlTG9jYXRpb24nLCB7IHMzOiB0aGlzLnMzIH0pOwogICAgICB9CiAgICB9LAoKICAgIHJlc291cmNlU2V0KG5ldSkgewogICAgICBpZiAobmV1Py5tZXRhZGF0YT8ubmFtZSkgewogICAgICAgIHRoaXMuJHNldCh0aGlzLnZhbHVlLnNwZWMsICdyZXNvdXJjZVNldE5hbWUnLCBuZXU/Lm1ldGFkYXRhPy5uYW1lKTsKICAgICAgfQogICAgfSwKCiAgICBzZXRTY2hlZHVsZShuZXUpIHsKICAgICAgaWYgKCFuZXUpIHsKICAgICAgICBkZWxldGUgdGhpcy52YWx1ZS5zcGVjLnNjaGVkdWxlOwogICAgICAgIGRlbGV0ZSB0aGlzLnZhbHVlLnNwZWMucmV0ZW50aW9uQ291bnQ7CiAgICAgIH0KICAgIH0sCgogICAgdXNlRW5jcnlwdGlvbihuZXUpIHsKICAgICAgaWYgKCFuZXUpIHsKICAgICAgICB0aGlzLnZhbHVlLnNwZWMuZW5jcnlwdGlvbkNvbmZpZ1NlY3JldE5hbWUgPSAnJzsKICAgICAgfQogICAgfQogIH0KfTsK"},{"version":3,"sources":["resources.cattle.io.backup.vue"],"names":[],"mappings":";AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"resources.cattle.io.backup.vue","sourceRoot":"node_modules/@rancher/shell/edit","sourcesContent":["<script>\nimport CruResource from '@shell/components/CruResource';\nimport createEditView from '@shell/mixins/create-edit-view';\nimport formValidation from '@shell/mixins/form-validation';\nimport { LabeledInput } from '@components/Form/LabeledInput';\nimport UnitInput from '@shell/components/form/UnitInput';\nimport LabeledSelect from '@shell/components/form/LabeledSelect';\nimport { Banner } from '@components/Banner';\nimport { RadioGroup } from '@components/Form/Radio';\nimport NameNsDescription from '@shell/components/form/NameNsDescription';\nimport Loading from '@shell/components/Loading';\nimport S3 from '@shell/chart/rancher-backup/S3';\nimport { mapGetters } from 'vuex';\nimport { SECRET, BACKUP_RESTORE, CATALOG } from '@shell/config/types';\nimport { allHash } from '@shell/utils/promise';\nimport { NAMESPACE, _VIEW } from '@shell/config/query-params';\nimport { sortBy } from '@shell/utils/sort';\nimport { get } from '@shell/utils/object';\nimport { formatEncryptionSecretNames } from '@shell/utils/formatter';\nimport { FilterArgs, PaginationParamFilter } from '@shell/types/store/pagination.types';\nimport { SECRET_TYPES } from '@shell/config/secret';\n\nexport default {\n\n  components: {\n    CruResource,\n    UnitInput,\n    LabeledInput,\n    LabeledSelect,\n    RadioGroup,\n    NameNsDescription,\n    Banner,\n    Loading,\n    S3,\n  },\n  mixins: [createEditView, formValidation],\n\n  props: {\n    value: {\n      type:    Object,\n      default: () => {\n        return {};\n      }\n    },\n    mode: {\n      type:    String,\n      default: 'create'\n    }\n  },\n\n  async fetch() {\n    const hash = await allHash({\n      catalog:     this.$store.dispatch('catalog/load'),\n      resourceSet: this.$store.dispatch('cluster/find', { type: BACKUP_RESTORE.RESOURCE_SET, id: this.value?.spec?.resourceSetName || 'rancher-resource-set' }),\n      apps:        this.$store.dispatch('cluster/findAll', { type: CATALOG.APP })\n    });\n\n    this.apps = hash.apps;\n    this.resourceSet = hash.resourceSet;\n\n    const BRORelease = this.apps.filter((release) => get(release, 'spec.name') === 'rancher-backup')[0];\n\n    this.chartNamespace = BRORelease?.spec.namespace || '';\n\n    if (this.$store.getters[`cluster/paginationEnabled`](SECRET)) {\n      const findPageArgs = { // Of type ActionFindPageArgs\n        namespaced: this.chartNamespace,\n        pagination: new FilterArgs({\n          filters: PaginationParamFilter.createSingleField({\n            field: 'metadata.fields.1',\n            value: SECRET_TYPES.OPAQUE\n          })\n        }),\n      };\n\n      // Do a one time request to get these type of secrets.... and there's a control on this page that will fetch and cache secrets\n      const url = this.$store.getters[`cluster/urlFor`](SECRET, null, findPageArgs);\n      const res = await this.$store.dispatch(`cluster/request`, { url });\n\n      this.secrets = res?.data || [];\n    } else {\n      this.secrets = await this.$store.dispatch('cluster/findAll', { type: SECRET });\n    }\n  },\n\n  data() {\n    if (!this.value.spec) {\n      this.$set(this.value, 'spec', { retentionCount: 10 });\n    }\n    let s3 = {};\n    let useEncryption = false;\n    let setSchedule = false;\n    let storageSource = 'useDefault';\n\n    if (this.value.spec.encryptionConfigSecretName) {\n      useEncryption = true;\n    }\n\n    if (this.value.spec.schedule) {\n      setSchedule = true;\n    }\n\n    if (this.value?.spec?.storageLocation?.s3) {\n      storageSource = 'configureS3';\n      s3 = this.value.spec.storageLocation.s3;\n    }\n\n    return {\n      secrets:        [],\n      resourceSet:    null,\n      s3,\n      storageSource,\n      useEncryption,\n      apps:           [],\n      setSchedule,\n      name:           this.value?.metadata?.name,\n      fvFormRuleSets: [{\n        path: 'metadata.name', rules: ['dnsLabel', 'noUpperCase'], translationKey: 'nameNsDescription.name.label'\n      }],\n      chartNamespace: null,\n    };\n  },\n\n  computed: {\n    isView() {\n      return this.mode === _VIEW;\n    },\n\n    encryptionSecretNames() {\n      return formatEncryptionSecretNames(this.secrets, this.chartNamespace);\n    },\n\n    storageOptions() {\n      const options = ['useDefault', 'configureS3'];\n      const labels = [this.t('backupRestoreOperator.storageSource.useDefault'), this.t('backupRestoreOperator.storageSource.configureS3')];\n\n      return { options, labels };\n    },\n\n    encryptionOptions() {\n      const options = [false, true];\n      const labels = [this.t('backupRestoreOperator.encryptionConfigName.options.none'), this.t('backupRestoreOperator.encryptionConfigName.options.secret', {}, true)];\n\n      return { options, labels };\n    },\n\n    namespaces() {\n      const choices = this.$store.getters['cluster/all'](NAMESPACE);\n      const out = sortBy(choices.map((obj) => {\n        return {\n          label: obj.nameDisplay,\n          value: obj.id,\n        };\n      }), 'label');\n\n      return out;\n    },\n\n    validated() {\n      return !!this.name && (!this.useEncryption || !!this.value?.spec?.encryptionConfigSecretName) && this.fvFormIsValid;\n    },\n\n    ...mapGetters({ t: 'i18n/t' })\n  },\n\n  watch: {\n    storageSource(neu) {\n      if (neu === 'useDefault') {\n        delete this.value.spec.storageLocation;\n      } else {\n        this.$set(this.value.spec, 'storageLocation', { s3: this.s3 });\n      }\n    },\n\n    resourceSet(neu) {\n      if (neu?.metadata?.name) {\n        this.$set(this.value.spec, 'resourceSetName', neu?.metadata?.name);\n      }\n    },\n\n    setSchedule(neu) {\n      if (!neu) {\n        delete this.value.spec.schedule;\n        delete this.value.spec.retentionCount;\n      }\n    },\n\n    useEncryption(neu) {\n      if (!neu) {\n        this.value.spec.encryptionConfigSecretName = '';\n      }\n    }\n  }\n};\n</script>\n\n<template>\n  <Loading v-if=\"$fetchState.pending\" />\n  <CruResource\n    v-else\n    :validation-passed=\"validated\"\n    :done-route=\"doneRoute\"\n    :resource=\"value\"\n    :mode=\"mode\"\n    :errors=\"fvUnreportedValidationErrors\"\n    @finish=\"save\"\n  >\n    <template>\n      <NameNsDescription\n        :mode=\"mode\"\n        :value=\"value\"\n        :namespaced=\"false\"\n        :rules=\"{name: fvGetAndReportPathRules('metadata.name')}\"\n        @change=\"name=value.metadata.name\"\n      />\n      <template v-if=\"!!resourceSet\">\n        <div class=\"bordered-section\">\n          <RadioGroup\n            v-model=\"setSchedule\"\n            :mode=\"mode\"\n            :label=\"t('backupRestoreOperator.schedule.label')\"\n            name=\"setSchedule\"\n            :options=\"[false, true]\"\n            :labels=\"[t('backupRestoreOperator.schedule.options.disabled'), t('backupRestoreOperator.schedule.options.enabled')]\"\n          />\n          <div\n            v-if=\"setSchedule\"\n            class=\"row mt-10 mb-10\"\n          >\n            <div class=\"col span-6\">\n              <LabeledInput\n                v-model=\"value.spec.schedule\"\n                type=\"cron\"\n                :mode=\"mode\"\n                :label=\"t('backupRestoreOperator.schedule.label')\"\n                :placeholder=\"t('backupRestoreOperator.schedule.placeholder')\"\n              />\n            </div>\n            <div class=\"col span-6\">\n              <UnitInput\n                v-model=\"value.spec.retentionCount\"\n                :suffix=\"t('backupRestoreOperator.retentionCount.units', {count: value.spec.retentionCount || 0})\"\n                :mode=\"mode\"\n                :label=\"t('backupRestoreOperator.retentionCount.label')\"\n              />\n            </div>\n          </div>\n        </div>\n\n        <div class=\"bordered-section\">\n          <div class=\"row\">\n            <div class=\"col span-12\">\n              <RadioGroup\n                v-model=\"useEncryption\"\n                name=\"useEncryption\"\n                :label=\"t('backupRestoreOperator.encryption')\"\n                :options=\"encryptionOptions.options\"\n                :labels=\"encryptionOptions.labels\"\n                :mode=\"mode\"\n              />\n            </div>\n          </div>\n          <div\n            v-if=\"useEncryption\"\n            :style=\"{'align-items':'center'}\"\n            class=\"row mt-10\"\n          >\n            <div class=\"col span-6\">\n              <LabeledSelect\n                v-model=\"value.spec.encryptionConfigSecretName\"\n                :tooltip=\"t('backupRestoreOperator.encryptionConfigName.backuptip', { ns: chartNamespace}, true)\"\n                :hover-tooltip=\"true\"\n                :mode=\"mode\"\n                :options=\"encryptionSecretNames\"\n                :label=\"t('backupRestoreOperator.encryptionConfigName.label')\"\n              />\n            </div>\n          </div>\n        </div>\n\n        <div class=\"row\">\n          <div class=\"col span-12\">\n            <span\n              v-if=\"isView\"\n              class=\"text-label\"\n            >{{ t('backupRestoreOperator.s3.titles.location') }}</span>\n            <RadioGroup\n              v-else\n              v-model=\"storageSource\"\n              name=\"storageSource\"\n              :label=\"t('backupRestoreOperator.s3.titles.location')\"\n              :options=\"storageOptions.options\"\n              :labels=\"storageOptions.labels\"\n              :mode=\"mode\"\n            />\n          </div>\n        </div>\n\n        <template v-if=\"storageSource !== 'useDefault'\">\n          <div class=\"row mt-10\">\n            <div class=\"col span-12\">\n              <S3\n                :value=\"s3\"\n                :mode=\"mode\"\n              />\n            </div>\n          </div>\n        </template>\n        <template v-else-if=\"isView\">\n          <span>{{ t('generic.default') }}</span>\n        </template>\n      </template>\n      <Banner\n        v-else\n        color=\"error\"\n      >\n        <span v-clean-html=\"t('backupRestoreOperator.noResourceSet')\" />\n      </Banner>\n    </template>\n  </CruResource>\n</template>\n"]}]}