{"remainingRequest":"/home/ubuntu/suseconf/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ubuntu/suseconf/node_modules/@rancher/shell/pages/auth/login.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/ubuntu/suseconf/node_modules/@rancher/shell/pages/auth/login.vue","mtime":1725338146566},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js","mtime":1725271298942},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1725271300920}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IHJlbW92ZU9iamVjdCB9IGZyb20gJ0BzaGVsbC91dGlscy9hcnJheSc7CmltcG9ydCB7IFVTRVJOQU1FIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy9jb29raWVzJzsKaW1wb3J0IHsgTGFiZWxlZElucHV0IH0gZnJvbSAnQGNvbXBvbmVudHMvRm9ybS9MYWJlbGVkSW5wdXQnOwppbXBvcnQgQXN5bmNCdXR0b24gZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvQXN5bmNCdXR0b24nOwppbXBvcnQgTG9jYWxlU2VsZWN0b3IgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvTG9jYWxlU2VsZWN0b3InOwppbXBvcnQgQnJhbmRJbWFnZSBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9CcmFuZEltYWdlJzsKaW1wb3J0IEluZm9Cb3ggZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvSW5mb0JveCc7CmltcG9ydCBDb3B5Q29kZSBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9Db3B5Q29kZSc7CmltcG9ydCB7IEJhbm5lciB9IGZyb20gJ0Bjb21wb25lbnRzL0Jhbm5lcic7CmltcG9ydCB7CiAgTE9DQUwsIExPR0dFRF9PVVQsIFRJTUVEX09VVCwgSVNfU1NPLCBfRkxBR0dFRAp9IGZyb20gJ0BzaGVsbC9jb25maWcvcXVlcnktcGFyYW1zJzsKaW1wb3J0IHsgQ2hlY2tib3ggfSBmcm9tICdAY29tcG9uZW50cy9Gb3JtL0NoZWNrYm94JzsKaW1wb3J0IFBhc3N3b3JkIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL2Zvcm0vUGFzc3dvcmQnOwppbXBvcnQgeyBzb3J0QnkgfSBmcm9tICdAc2hlbGwvdXRpbHMvc29ydCc7CmltcG9ydCB7IGNvbmZpZ1R5cGUgfSBmcm9tICdAc2hlbGwvbW9kZWxzL21hbmFnZW1lbnQuY2F0dGxlLmlvLmF1dGhjb25maWcnOwppbXBvcnQgeyBtYXBHZXR0ZXJzIH0gZnJvbSAndnVleCc7CmltcG9ydCB7IF9NVUxUSSB9IGZyb20gJ0BzaGVsbC9wbHVnaW5zL2Rhc2hib2FyZC1zdG9yZS9hY3Rpb25zJzsKaW1wb3J0IHsgTUFOQUdFTUVOVCwgTk9STUFOIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy90eXBlcyc7CmltcG9ydCB7IFNFVFRJTkcgfSBmcm9tICdAc2hlbGwvY29uZmlnL3NldHRpbmdzJzsKaW1wb3J0IHsgTE9HSU5fRVJST1JTIH0gZnJvbSAnQHNoZWxsL3N0b3JlL2F1dGgnOwppbXBvcnQgewogIGdldEJyYW5kLAogIGdldFZlbmRvciwKICBzZXRCcmFuZCwKICBzZXRWZW5kb3IKfSBmcm9tICdAc2hlbGwvY29uZmlnL3ByaXZhdGUtbGFiZWwnOwppbXBvcnQgbG9hZFBsdWdpbnMgZnJvbSAnQHNoZWxsL3BsdWdpbnMvcGx1Z2luJzsKaW1wb3J0IExvYWRpbmcgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvTG9hZGluZyc7CmltcG9ydCB7IGdldEdsb2JhbEJhbm5lckZvbnRTaXplcyB9IGZyb20gJ0BzaGVsbC91dGlscy9iYW5uZXJzJzsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAgICAgICAnTG9naW4nLAogIGNvbXBvbmVudHM6IHsKICAgIExhYmVsZWRJbnB1dCwgQXN5bmNCdXR0b24sIENoZWNrYm94LCBCcmFuZEltYWdlLCBCYW5uZXIsIEluZm9Cb3gsIENvcHlDb2RlLCBQYXNzd29yZCwgTG9jYWxlU2VsZWN0b3IsIExvYWRpbmcKICB9LAoKICBkYXRhKCkgewogICAgY29uc3QgdXNlcm5hbWUgPSB0aGlzLiRjb29raWVzLmdldChVU0VSTkFNRSwgeyBwYXJzZUpTT046IGZhbHNlIH0pIHx8ICcnOwoKICAgIHJldHVybiB7CiAgICAgIHVzZXJuYW1lLAogICAgICByZW1lbWJlcjogISF1c2VybmFtZSwKICAgICAgcGFzc3dvcmQ6ICcnLAoKICAgICAgdGltZWRPdXQ6ICAgICAgICAgICB0aGlzLiRyb3V0ZS5xdWVyeVtUSU1FRF9PVVRdID09PSBfRkxBR0dFRCwKICAgICAgbG9nZ2VkT3V0OiAgICAgICAgICB0aGlzLiRyb3V0ZS5xdWVyeVtMT0dHRURfT1VUXSA9PT0gX0ZMQUdHRUQsCiAgICAgIGlzU3NvTG9nb3V0OiAgICAgICAgdGhpcy4kcm91dGUucXVlcnlbSVNfU1NPXSA9PT0gX0ZMQUdHRUQsCiAgICAgIGVycjogICAgICAgICAgICAgICAgdGhpcy4kcm91dGUucXVlcnkuZXJyLAogICAgICBzaG93TG9jYWxlU2VsZWN0b3I6ICFwcm9jZXNzLmVudi5sb2dpbkxvY2FsZVNlbGVjdG9yIHx8IHByb2Nlc3MuZW52LmxvZ2luTG9jYWxlU2VsZWN0b3IgPT09ICd0cnVlJywKCiAgICAgIGhhc0xvY2FsOiAgICAgICAgICAgZmFsc2UsCiAgICAgIHNob3dMb2NhbDogICAgICAgICAgZmFsc2UsCiAgICAgIHByb3ZpZGVyczogICAgICAgICAgW10sCiAgICAgIHByb3ZpZGVyQ29tcG9uZW50czogW10sCiAgICAgIGN1c3RvbUxvZ2luRXJyb3I6ICAge30sCiAgICAgIGZpcnN0TG9naW46ICAgICAgICAgZmFsc2UsCiAgICAgIHZlbmRvcjogICAgICAgICAgICAgZ2V0VmVuZG9yKCkKICAgIH07CiAgfSwKCiAgY29tcHV0ZWQ6IHsKICAgIC4uLm1hcEdldHRlcnMoeyB0OiAnaTE4bi90JyB9KSwKCiAgICBzaW5nbGVQcm92aWRlcigpIHsKICAgICAgcmV0dXJuIHRoaXMucHJvdmlkZXJzLmxlbmd0aCA9PT0gMSA/IHRoaXMucHJvdmlkZXJzWzBdIDogdW5kZWZpbmVkOwogICAgfSwKCiAgICBub25Mb2NhbFByb21wdCgpIHsKICAgICAgaWYgKHRoaXMuc2luZ2xlUHJvdmlkZXIpIHsKICAgICAgICBjb25zdCBwcm92aWRlciA9IHRoaXMuZGlzcGxheU5hbWUodGhpcy5zaW5nbGVQcm92aWRlcik7CgogICAgICAgIHJldHVybiB0aGlzLnQoJ2xvZ2luLnVzZVByb3ZpZGVyJywgeyBwcm92aWRlciB9KTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXMudCgnbG9naW4udXNlTm9uTG9jYWwnKTsKICAgIH0sCgogICAgZXJyb3JNZXNzYWdlKCkgewogICAgICBpZiAodGhpcy5lcnIgPT09IExPR0lOX0VSUk9SUy5DTElFTlRfVU5BVVRIT1JJWkVEKSB7CiAgICAgICAgcmV0dXJuIHRoaXMudCgnbG9naW4uY2xpZW50RXJyb3InKTsKICAgICAgfSBlbHNlIGlmICh0aGlzLmVyciA9PT0gTE9HSU5fRVJST1JTLkNMSUVOVCB8fCB0aGlzLmVyciA9PT0gTE9HSU5fRVJST1JTLlNFUlZFUikgewogICAgICAgIHJldHVybiB0aGlzLnQoJ2xvZ2luLmVycm9yJyk7CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzLmVycj8ubGVuZ3RoID8gdGhpcy50KCdsb2dpbi5zcGVjaWZpY0Vycm9yJywgeyBtc2c6IHRoaXMuZXJyIH0pIDogJyc7CiAgICB9LAoKICAgIGVycm9yVG9EaXNwbGF5KCkgewogICAgICBpZiAodGhpcy5jdXN0b21Mb2dpbkVycm9yPy5zaG93TWVzc2FnZSA9PT0gJ3RydWUnICYmIHRoaXMuY3VzdG9tTG9naW5FcnJvcj8ubWVzc2FnZSAmJiB0aGlzLmVycm9yTWVzc2FnZSkgewogICAgICAgIHJldHVybiBgJHsgdGhpcy5jdXN0b21Mb2dpbkVycm9yLm1lc3NhZ2UgfSBcbiAkeyB0aGlzLmVycm9yTWVzc2FnZSB9YDsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuZXJyb3JNZXNzYWdlKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuZXJyb3JNZXNzYWdlOwogICAgICB9CgogICAgICByZXR1cm4gJyc7CiAgICB9LAoKICAgIGt1YmVjdGxDbWQoKSB7CiAgICAgIHJldHVybiAia3ViZWN0bCBnZXQgc2VjcmV0IC0tbmFtZXNwYWNlIGNhdHRsZS1zeXN0ZW0gYm9vdHN0cmFwLXNlY3JldCAtbyBnby10ZW1wbGF0ZT0ne3suZGF0YS5ib290c3RyYXBQYXNzd29yZHxiYXNlNjRkZWNvZGV9fXt7XCJcXG5cIn19JyI7CiAgICB9LAoKICAgIGhhc0xvZ2luTWVzc2FnZSgpIHsKICAgICAgcmV0dXJuIHRoaXMuZXJyb3JUb0Rpc3BsYXkgfHwgdGhpcy5sb2dnZWRPdXQgfHwgdGhpcy50aW1lZE91dDsKICAgIH0sCgogICAgLy8gQXBwbHkgYm90dG9tIG1hcmdpbiBzbyB0aGF0IHRoZSBsb2NhbGUgc2VjbGV0b3IgY29udHJvbCBsaWZ0cyB1cCB0byBhdm9pZCB0aGUgZm9vdGVyIGZpeGVkIGJhbm5lciwgaWYgaXQgaXMgc2hvd24KICAgIGxvY2FsZVNlbGVjdG9yU3R5bGUoKSB7CiAgICAgIGNvbnN0IGdsb2JhbEJhbm5lclNldHRpbmdzID0gZ2V0R2xvYmFsQmFubmVyRm9udFNpemVzKHRoaXMuJHN0b3JlKTsKCiAgICAgIHJldHVybiB7IG1hcmdpbkJvdHRvbTogZ2xvYmFsQmFubmVyU2V0dGluZ3M/LmZvb3RlckZvbnQgfTsKICAgIH0KICB9LAoKICBhc3luYyBmZXRjaCgpIHsKICAgIGNvbnN0IHsgZmlyc3RMb2dpblNldHRpbmcgfSA9IGF3YWl0IHRoaXMubG9hZEluaXRpYWxTZXR0aW5ncygpOwogICAgY29uc3QgeyB2YWx1ZSB9ID0gYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ21hbmFnZW1lbnQvZmluZCcsIHsgdHlwZTogTUFOQUdFTUVOVC5TRVRUSU5HLCBpZDogU0VUVElORy5CQU5ORVJTIH0pOwogICAgY29uc3QgZHJpdmVycyA9IGF3YWl0IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdhdXRoL2dldEF1dGhQcm92aWRlcnMnKTsKICAgIGNvbnN0IHByb3ZpZGVycyA9IHNvcnRCeShkcml2ZXJzLm1hcCgoeCkgPT4geC5pZCksIFsnaWQnXSk7CiAgICBjb25zdCBoYXNMb2NhbCA9IHByb3ZpZGVycy5pbmNsdWRlcygnbG9jYWwnKTsKICAgIGNvbnN0IGhhc090aGVycyA9IGhhc0xvY2FsICYmICEhcHJvdmlkZXJzLmZpbmQoKHgpID0+IHggIT09ICdsb2NhbCcpOwoKICAgIGlmICggaGFzTG9jYWwgKSB7CiAgICAgIC8vIExvY2FsIGlzIHNwZWNpYWwgYW5kIGhhbmRsZWQgaGVyZSBzbyB0aGF0IGl0IGNhbiBiZSB0b2dnbGVkCiAgICAgIHJlbW92ZU9iamVjdChwcm92aWRlcnMsICdsb2NhbCcpOwogICAgfQoKICAgIHRoaXMudmVuZG9yID0gZ2V0VmVuZG9yKCk7CiAgICB0aGlzLnByb3ZpZGVycyA9IHByb3ZpZGVyczsKICAgIHRoaXMuaGFzTG9jYWwgPSBoYXNMb2NhbDsKICAgIHRoaXMuc2hvd0xvY2FsID0gIWhhc090aGVycyB8fCAodGhpcy4kcm91dGUucXVlcnlbTE9DQUxdID09PSBfRkxBR0dFRCk7CiAgICB0aGlzLmN1c3RvbUxvZ2luRXJyb3IgPSBKU09OLnBhcnNlKHZhbHVlKS5sb2dpbkVycm9yOwogICAgdGhpcy5maXJzdExvZ2luID0gZmlyc3RMb2dpblNldHRpbmc/LnZhbHVlID09PSAndHJ1ZSc7CiAgICB0aGlzLnVzZXJuYW1lID0gdGhpcy5maXJzdExvZ2luID8gJ2FkbWluJyA6IHRoaXMudXNlcm5hbWU7CgogICAgdGhpcy5wcm92aWRlckNvbXBvbmVudHMgPSB0aGlzLnByb3ZpZGVycy5tYXAoKG5hbWUpID0+IHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLmdldHRlcnNbJ3R5cGUtbWFwL2ltcG9ydExvZ2luJ10oY29uZmlnVHlwZVtuYW1lXSB8fCBuYW1lKTsKICAgIH0pOwoKICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgdGhpcy5mb2N1c1NvbWV0aGluZygpOwogICAgfSk7CiAgfSwKCiAgbWV0aG9kczogewogICAgYXN5bmMgbG9hZEluaXRpYWxTZXR0aW5ncygpIHsKICAgICAgbGV0IGZpcnN0TG9naW5TZXR0aW5nLCBwbFNldHRpbmcsIGJyYW5kOwoKICAgICAgLy8gTG9hZCBzZXR0aW5ncy4KICAgICAgLy8gRm9yIG5ld2VyIHZlcnNpb25zIHRoaXMgd2lsbCByZXR1cm4gYWxsIHNldHRpbmdzIGlmIHlvdSBhcmUgc29tZWhvdyBsb2dnZWQgaW4sCiAgICAgIC8vIGFuZCBqdXN0IHRoZSBwdWJsaWMgb25lcyBpZiB5b3UgYXJlbid0LgogICAgICB0cnkgewogICAgICAgIGZpcnN0TG9naW5TZXR0aW5nID0gdGhpcy4kc3RvcmUuZ2V0dGVyc1snbWFuYWdlbWVudC9ieUlkJ10oTUFOQUdFTUVOVC5TRVRUSU5HLCBTRVRUSU5HLkZJUlNUX0xPR0lOKTsKICAgICAgICBwbFNldHRpbmcgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzWydtYW5hZ2VtZW50L2J5SWQnXShNQU5BR0VNRU5ULlNFVFRJTkcsIFNFVFRJTkcuUEwpOwogICAgICAgIGJyYW5kID0gdGhpcy4kc3RvcmUuZ2V0dGVyc1snbWFuYWdlbWVudC9ieUlkJ10oTUFOQUdFTUVOVC5TRVRUSU5HLCBTRVRUSU5HLkJSQU5EKTsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIC8vIE9sZGVyIHZlcnNpb25zIHVzZWQgTm9ybWFuIEFQSSB0byBnZXQgdGhlc2UKICAgICAgICBmaXJzdExvZ2luU2V0dGluZyA9IGF3YWl0IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdyYW5jaGVyL2ZpbmQnLCB7CiAgICAgICAgICB0eXBlOiBOT1JNQU4uU0VUVElORywKICAgICAgICAgIGlkOiAgIFNFVFRJTkcuRklSU1RfTE9HSU4sCiAgICAgICAgICBvcHQ6ICB7IHVybDogYC92My9zZXR0aW5ncy8keyBTRVRUSU5HLkZJUlNUX0xPR0lOIH1gIH0KICAgICAgICB9KTsKCiAgICAgICAgcGxTZXR0aW5nID0gYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3JhbmNoZXIvZmluZCcsIHsKICAgICAgICAgIHR5cGU6IE5PUk1BTi5TRVRUSU5HLAogICAgICAgICAgaWQ6ICAgU0VUVElORy5QTCwKICAgICAgICAgIG9wdDogIHsgdXJsOiBgL3YzL3NldHRpbmdzLyR7IFNFVFRJTkcuUEwgfWAgfQogICAgICAgIH0pOwoKICAgICAgICBicmFuZCA9IGF3YWl0IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdyYW5jaGVyL2ZpbmQnLCB7CiAgICAgICAgICB0eXBlOiBOT1JNQU4uU0VUVElORywKICAgICAgICAgIGlkOiAgIFNFVFRJTkcuQlJBTkQsCiAgICAgICAgICBvcHQ6ICB7IHVybDogYC92My9zZXR0aW5ncy8keyBTRVRUSU5HLkJSQU5EIH1gIH0KICAgICAgICB9KTsKICAgICAgfQoKICAgICAgaWYgKHBsU2V0dGluZy52YWx1ZT8ubGVuZ3RoICYmIHBsU2V0dGluZy52YWx1ZSAhPT0gZ2V0VmVuZG9yKCkpIHsKICAgICAgICBzZXRWZW5kb3IocGxTZXR0aW5nLnZhbHVlKTsKICAgICAgfQoKICAgICAgaWYgKGJyYW5kPy52YWx1ZT8ubGVuZ3RoICYmIGJyYW5kLnZhbHVlICE9PSBnZXRCcmFuZCgpKSB7CiAgICAgICAgc2V0QnJhbmQoYnJhbmQudmFsdWUpOwogICAgICB9CgogICAgICByZXR1cm4gewogICAgICAgIGZpcnN0TG9naW5TZXR0aW5nLCBwbFNldHRpbmcsIGJyYW5kCiAgICAgIH07CiAgICB9LAoKICAgIGRpc3BsYXlOYW1lKHByb3ZpZGVyKSB7CiAgICAgIHJldHVybiB0aGlzLnQoYG1vZGVsLmF1dGhDb25maWcucHJvdmlkZXIuJHsgcHJvdmlkZXIgfWApOwogICAgfSwKCiAgICB0b2dnbGVMb2NhbCgpIHsKICAgICAgdGhpcy5zaG93TG9jYWwgPSAhdGhpcy5zaG93TG9jYWw7CiAgICAgIHRoaXMuJHJvdXRlci5hcHBseVF1ZXJ5KHsgW0xPQ0FMXTogX0ZMQUdHRUQgfSk7CiAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICB0aGlzLmZvY3VzU29tZXRoaW5nKCk7CiAgICAgIH0pOwogICAgfSwKCiAgICBmb2N1c1NvbWV0aGluZygpIHsKICAgICAgaWYgKCAhdGhpcy5zaG93TG9jYWwgKSB7CiAgICAgICAgLy8gT25lIG9mIHRoZSBwcm92aWRlciBjb21wb25lbnRzIHdpbGwgaGFuZGxlIGl0CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBsZXQgZWxlbTsKCiAgICAgIGlmICggdGhpcy51c2VybmFtZSApIHsKICAgICAgICBlbGVtID0gdGhpcy4kcmVmcy5wYXNzd29yZDsKICAgICAgfSBlbHNlIHsKICAgICAgICBlbGVtID0gdGhpcy4kcmVmcy51c2VybmFtZTsKICAgICAgfQoKICAgICAgaWYgKCBlbGVtPy5mb2N1cyApIHsKICAgICAgICBlbGVtLmZvY3VzKCk7CgogICAgICAgIGlmICggZWxlbS5zZWxlY3QgKSB7CiAgICAgICAgICBlbGVtLnNlbGVjdCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwKCiAgICBoYW5kbGVQcm92aWRlckVycm9yKGVycikgewogICAgICB0aGlzLmVyciA9IGVycjsKICAgIH0sCgogICAgYXN5bmMgbG9naW5Mb2NhbChidXR0b25DYikgewogICAgICB0cnkgewogICAgICAgIGF3YWl0IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdhdXRoL2xvZ2luJywgewogICAgICAgICAgcHJvdmlkZXI6ICdsb2NhbCcsCiAgICAgICAgICBib2R5OiAgICAgewogICAgICAgICAgICB1c2VybmFtZTogdGhpcy51c2VybmFtZSwKICAgICAgICAgICAgcGFzc3dvcmQ6IHRoaXMucGFzc3dvcmQKICAgICAgICAgIH0KICAgICAgICB9KTsKCiAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdyYW5jaGVyL2ZpbmRBbGwnLCB7CiAgICAgICAgICB0eXBlOiBOT1JNQU4uVVNFUiwKICAgICAgICAgIG9wdDogIHsgdXJsOiAnL3YzL3VzZXJzP21lPXRydWUnLCBsb2FkOiBfTVVMVEkgfQogICAgICAgIH0pOwoKICAgICAgICBpZiAoISF1c2VyPy5bMF0pIHsKICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdhdXRoL2dvdFVzZXInLCB1c2VyWzBdKTsKICAgICAgICB9CgogICAgICAgIGlmICggdGhpcy5yZW1lbWJlciApIHsKICAgICAgICAgIHRoaXMuJGNvb2tpZXMuc2V0KFVTRVJOQU1FLCB0aGlzLnVzZXJuYW1lLCB7CiAgICAgICAgICAgIGVuY29kZTogICAoeCkgPT4geCwKICAgICAgICAgICAgbWF4QWdlOiAgIDg2NDAwICogMzY1LAogICAgICAgICAgICBwYXRoOiAgICAgJy8nLAogICAgICAgICAgICBzYW1lU2l0ZTogdHJ1ZSwKICAgICAgICAgICAgc2VjdXJlOiAgIHRydWUsCiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kY29va2llcy5yZW1vdmUoVVNFUk5BTUUpOwogICAgICAgIH0KCiAgICAgICAgLy8gVXNlciBsb2dnZWQgd2l0aCBsb2NhbCBsb2dpbiAtIHdlIGRvbid0IGRvIGFueSByZWRpcmVjdC9yZWxvYWQsIHNvIHRoZSBib290LXRpbWUgcGx1Z2luIHdpbGwgbm90IHJ1biBhZ2FpbiB0byBsYW9kIHRoZSBwbHVnaW5zCiAgICAgICAgLy8gc28gd2UgbWFudWFsbHkgbG9hZCB0aGVtIGhlcmUgLSBvdGhlciBTU08gYXV0aCBwcm92aWRlcnMgYm91bmNlIG91dCBhbmQgYmFjayB0byB0aGUgRGFzaGJvYXJkLCBzbyBvbiB0aGUgYm91bmNlLWJhY2sKICAgICAgICAvLyB0aGUgcGx1Z2lucyB3aWxsIGxvYWQgdmlhIHRoZSBib290LXRpbWUgcGx1Z2luCiAgICAgICAgYXdhaXQgbG9hZFBsdWdpbnMoewogICAgICAgICAgYXBwOiAgICAgdGhpcy4kc3RvcmUuYXBwLAogICAgICAgICAgc3RvcmU6ICAgdGhpcy4kc3RvcmUsCiAgICAgICAgICAkcGx1Z2luOiB0aGlzLiRzdG9yZS4kcGx1Z2luCiAgICAgICAgfSk7CgogICAgICAgIGlmICh0aGlzLmZpcnN0TG9naW4gfHwgdXNlclswXT8ubXVzdENoYW5nZVBhc3N3b3JkKSB7CiAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnYXV0aC9zZXRJbml0aWFsUGFzcycsIHRoaXMucGFzc3dvcmQpOwogICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goeyBuYW1lOiAnYXV0aC1zZXR1cCcgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJHJvdXRlci5yZXBsYWNlKCcvJyk7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICB0aGlzLmVyciA9IGVycjsKICAgICAgICB0aGlzLnRpbWVkT3V0ID0gbnVsbDsKICAgICAgICB0aGlzLmxvZ2dlZE91dCA9IG51bGw7CgogICAgICAgIGJ1dHRvbkNiKGZhbHNlKTsKICAgICAgfQogICAgfSwKICB9Cn07Cg=="},{"version":3,"sources":["login.vue"],"names":[],"mappings":";AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"login.vue","sourceRoot":"node_modules/@rancher/shell/pages/auth","sourcesContent":["<script>\nimport { removeObject } from '@shell/utils/array';\nimport { USERNAME } from '@shell/config/cookies';\nimport { LabeledInput } from '@components/Form/LabeledInput';\nimport AsyncButton from '@shell/components/AsyncButton';\nimport LocaleSelector from '@shell/components/LocaleSelector';\nimport BrandImage from '@shell/components/BrandImage';\nimport InfoBox from '@shell/components/InfoBox';\nimport CopyCode from '@shell/components/CopyCode';\nimport { Banner } from '@components/Banner';\nimport {\n  LOCAL, LOGGED_OUT, TIMED_OUT, IS_SSO, _FLAGGED\n} from '@shell/config/query-params';\nimport { Checkbox } from '@components/Form/Checkbox';\nimport Password from '@shell/components/form/Password';\nimport { sortBy } from '@shell/utils/sort';\nimport { configType } from '@shell/models/management.cattle.io.authconfig';\nimport { mapGetters } from 'vuex';\nimport { _MULTI } from '@shell/plugins/dashboard-store/actions';\nimport { MANAGEMENT, NORMAN } from '@shell/config/types';\nimport { SETTING } from '@shell/config/settings';\nimport { LOGIN_ERRORS } from '@shell/store/auth';\nimport {\n  getBrand,\n  getVendor,\n  setBrand,\n  setVendor\n} from '@shell/config/private-label';\nimport loadPlugins from '@shell/plugins/plugin';\nimport Loading from '@shell/components/Loading';\nimport { getGlobalBannerFontSizes } from '@shell/utils/banners';\n\nexport default {\n  name:       'Login',\n  components: {\n    LabeledInput, AsyncButton, Checkbox, BrandImage, Banner, InfoBox, CopyCode, Password, LocaleSelector, Loading\n  },\n\n  data() {\n    const username = this.$cookies.get(USERNAME, { parseJSON: false }) || '';\n\n    return {\n      username,\n      remember: !!username,\n      password: '',\n\n      timedOut:           this.$route.query[TIMED_OUT] === _FLAGGED,\n      loggedOut:          this.$route.query[LOGGED_OUT] === _FLAGGED,\n      isSsoLogout:        this.$route.query[IS_SSO] === _FLAGGED,\n      err:                this.$route.query.err,\n      showLocaleSelector: !process.env.loginLocaleSelector || process.env.loginLocaleSelector === 'true',\n\n      hasLocal:           false,\n      showLocal:          false,\n      providers:          [],\n      providerComponents: [],\n      customLoginError:   {},\n      firstLogin:         false,\n      vendor:             getVendor()\n    };\n  },\n\n  computed: {\n    ...mapGetters({ t: 'i18n/t' }),\n\n    singleProvider() {\n      return this.providers.length === 1 ? this.providers[0] : undefined;\n    },\n\n    nonLocalPrompt() {\n      if (this.singleProvider) {\n        const provider = this.displayName(this.singleProvider);\n\n        return this.t('login.useProvider', { provider });\n      }\n\n      return this.t('login.useNonLocal');\n    },\n\n    errorMessage() {\n      if (this.err === LOGIN_ERRORS.CLIENT_UNAUTHORIZED) {\n        return this.t('login.clientError');\n      } else if (this.err === LOGIN_ERRORS.CLIENT || this.err === LOGIN_ERRORS.SERVER) {\n        return this.t('login.error');\n      }\n\n      return this.err?.length ? this.t('login.specificError', { msg: this.err }) : '';\n    },\n\n    errorToDisplay() {\n      if (this.customLoginError?.showMessage === 'true' && this.customLoginError?.message && this.errorMessage) {\n        return `${ this.customLoginError.message } \\n ${ this.errorMessage }`;\n      }\n\n      if (this.errorMessage) {\n        return this.errorMessage;\n      }\n\n      return '';\n    },\n\n    kubectlCmd() {\n      return \"kubectl get secret --namespace cattle-system bootstrap-secret -o go-template='{{.data.bootstrapPassword|base64decode}}{{\\\"\\\\n\\\"}}'\";\n    },\n\n    hasLoginMessage() {\n      return this.errorToDisplay || this.loggedOut || this.timedOut;\n    },\n\n    // Apply bottom margin so that the locale secletor control lifts up to avoid the footer fixed banner, if it is shown\n    localeSelectorStyle() {\n      const globalBannerSettings = getGlobalBannerFontSizes(this.$store);\n\n      return { marginBottom: globalBannerSettings?.footerFont };\n    }\n  },\n\n  async fetch() {\n    const { firstLoginSetting } = await this.loadInitialSettings();\n    const { value } = await this.$store.dispatch('management/find', { type: MANAGEMENT.SETTING, id: SETTING.BANNERS });\n    const drivers = await this.$store.dispatch('auth/getAuthProviders');\n    const providers = sortBy(drivers.map((x) => x.id), ['id']);\n    const hasLocal = providers.includes('local');\n    const hasOthers = hasLocal && !!providers.find((x) => x !== 'local');\n\n    if ( hasLocal ) {\n      // Local is special and handled here so that it can be toggled\n      removeObject(providers, 'local');\n    }\n\n    this.vendor = getVendor();\n    this.providers = providers;\n    this.hasLocal = hasLocal;\n    this.showLocal = !hasOthers || (this.$route.query[LOCAL] === _FLAGGED);\n    this.customLoginError = JSON.parse(value).loginError;\n    this.firstLogin = firstLoginSetting?.value === 'true';\n    this.username = this.firstLogin ? 'admin' : this.username;\n\n    this.providerComponents = this.providers.map((name) => {\n      return this.$store.getters['type-map/importLogin'](configType[name] || name);\n    });\n\n    this.$nextTick(() => {\n      this.focusSomething();\n    });\n  },\n\n  methods: {\n    async loadInitialSettings() {\n      let firstLoginSetting, plSetting, brand;\n\n      // Load settings.\n      // For newer versions this will return all settings if you are somehow logged in,\n      // and just the public ones if you aren't.\n      try {\n        firstLoginSetting = this.$store.getters['management/byId'](MANAGEMENT.SETTING, SETTING.FIRST_LOGIN);\n        plSetting = this.$store.getters['management/byId'](MANAGEMENT.SETTING, SETTING.PL);\n        brand = this.$store.getters['management/byId'](MANAGEMENT.SETTING, SETTING.BRAND);\n      } catch (e) {\n        // Older versions used Norman API to get these\n        firstLoginSetting = await this.$store.dispatch('rancher/find', {\n          type: NORMAN.SETTING,\n          id:   SETTING.FIRST_LOGIN,\n          opt:  { url: `/v3/settings/${ SETTING.FIRST_LOGIN }` }\n        });\n\n        plSetting = await this.$store.dispatch('rancher/find', {\n          type: NORMAN.SETTING,\n          id:   SETTING.PL,\n          opt:  { url: `/v3/settings/${ SETTING.PL }` }\n        });\n\n        brand = await this.$store.dispatch('rancher/find', {\n          type: NORMAN.SETTING,\n          id:   SETTING.BRAND,\n          opt:  { url: `/v3/settings/${ SETTING.BRAND }` }\n        });\n      }\n\n      if (plSetting.value?.length && plSetting.value !== getVendor()) {\n        setVendor(plSetting.value);\n      }\n\n      if (brand?.value?.length && brand.value !== getBrand()) {\n        setBrand(brand.value);\n      }\n\n      return {\n        firstLoginSetting, plSetting, brand\n      };\n    },\n\n    displayName(provider) {\n      return this.t(`model.authConfig.provider.${ provider }`);\n    },\n\n    toggleLocal() {\n      this.showLocal = !this.showLocal;\n      this.$router.applyQuery({ [LOCAL]: _FLAGGED });\n      this.$nextTick(() => {\n        this.focusSomething();\n      });\n    },\n\n    focusSomething() {\n      if ( !this.showLocal ) {\n        // One of the provider components will handle it\n        return;\n      }\n\n      let elem;\n\n      if ( this.username ) {\n        elem = this.$refs.password;\n      } else {\n        elem = this.$refs.username;\n      }\n\n      if ( elem?.focus ) {\n        elem.focus();\n\n        if ( elem.select ) {\n          elem.select();\n        }\n      }\n    },\n\n    handleProviderError(err) {\n      this.err = err;\n    },\n\n    async loginLocal(buttonCb) {\n      try {\n        await this.$store.dispatch('auth/login', {\n          provider: 'local',\n          body:     {\n            username: this.username,\n            password: this.password\n          }\n        });\n\n        const user = await this.$store.dispatch('rancher/findAll', {\n          type: NORMAN.USER,\n          opt:  { url: '/v3/users?me=true', load: _MULTI }\n        });\n\n        if (!!user?.[0]) {\n          this.$store.dispatch('auth/gotUser', user[0]);\n        }\n\n        if ( this.remember ) {\n          this.$cookies.set(USERNAME, this.username, {\n            encode:   (x) => x,\n            maxAge:   86400 * 365,\n            path:     '/',\n            sameSite: true,\n            secure:   true,\n          });\n        } else {\n          this.$cookies.remove(USERNAME);\n        }\n\n        // User logged with local login - we don't do any redirect/reload, so the boot-time plugin will not run again to laod the plugins\n        // so we manually load them here - other SSO auth providers bounce out and back to the Dashboard, so on the bounce-back\n        // the plugins will load via the boot-time plugin\n        await loadPlugins({\n          app:     this.$store.app,\n          store:   this.$store,\n          $plugin: this.$store.$plugin\n        });\n\n        if (this.firstLogin || user[0]?.mustChangePassword) {\n          this.$store.dispatch('auth/setInitialPass', this.password);\n          this.$router.push({ name: 'auth-setup' });\n        } else {\n          this.$router.replace('/');\n        }\n      } catch (err) {\n        this.err = err;\n        this.timedOut = null;\n        this.loggedOut = null;\n\n        buttonCb(false);\n      }\n    },\n  }\n};\n</script>\n\n<template>\n  <Loading v-if=\"$fetchState.pending\" />\n  <main\n    v-else\n    class=\"main-layout login\"\n  >\n    <div class=\"row gutless mb-20\">\n      <div class=\"col span-6 p-20\">\n        <p class=\"text-center\">\n          {{ t('login.howdy') }}\n        </p>\n        <h1 class=\"text-center login-welcome\">\n          {{ t('login.welcome', {vendor}) }}\n        </h1>\n        <div\n          class=\"login-messages\"\n          data-testid=\"login__messages\"\n          :class=\"{'login-messages--hasContent': hasLoginMessage}\"\n        >\n          <Banner\n            v-if=\"errorToDisplay\"\n            :label=\"errorToDisplay\"\n            color=\"error\"\n          />\n          <h4\n            v-else-if=\"loggedOut\"\n            class=\"text-success text-center\"\n          >\n            {{ isSsoLogout ? t('login.loggedOutFromSso') : t('login.loggedOut') }}\n          </h4>\n          <h4\n            v-else-if=\"timedOut\"\n            class=\"text-error text-center\"\n          >\n            {{ t('login.loginAgain') }}\n          </h4>\n        </div>\n        <div\n          v-if=\"firstLogin\"\n          class=\"first-login-message pl-10 pr-10\"\n          :class=\"{'mt-30': !hasLoginMessage}\"\n          data-testid=\"first-login-message\"\n        >\n          <t\n            k=\"setup.defaultPassword.intro\"\n            :raw=\"true\"\n          />\n\n          <div>\n            <t\n              k=\"setup.defaultPassword.dockerPrefix\"\n              :raw=\"true\"\n            />\n          </div>\n          <ul>\n            <li>\n              <t\n                k=\"setup.defaultPassword.dockerPs\"\n                :raw=\"true\"\n              />\n            </li>\n            <li>\n              <CopyCode>\n                docker logs <u>container-id</u> 2&gt;&amp;1 | grep \"Bootstrap Password:\"\n              </CopyCode>\n            </li>\n          </ul>\n          <div>\n            <t\n              k=\"setup.defaultPassword.dockerSuffix\"\n              :raw=\"true\"\n            />\n          </div>\n\n          <br>\n          <div>\n            <t\n              k=\"setup.defaultPassword.helmPrefix\"\n              :raw=\"true\"\n            />\n          </div>\n          <br>\n          <CopyCode>\n            {{ kubectlCmd }}\n          </CopyCode>\n          <br>\n          <div>\n            <t\n              k=\"setup.defaultPassword.helmSuffix\"\n              :raw=\"true\"\n            />\n          </div>\n        </div>\n\n        <div\n          v-if=\"(!hasLocal || (hasLocal && !showLocal)) && providers.length\"\n          :class=\"{'mt-30': !hasLoginMessage}\"\n        >\n          <component\n            :is=\"providerComponents[idx]\"\n            v-for=\"(name, idx) in providers\"\n            :key=\"name\"\n            class=\"mb-10\"\n            :focus-on-mount=\"(idx === 0 && !showLocal)\"\n            :name=\"name\"\n            :open=\"!showLocal\"\n            @showInputs=\"showLocal = false\"\n            @error=\"handleProviderError\"\n          />\n        </div>\n        <template v-if=\"hasLocal\">\n          <form\n            v-if=\"showLocal\"\n            :class=\"{'mt-30': !hasLoginMessage}\"\n          >\n            <div class=\"span-6 offset-3\">\n              <div class=\"mb-20\">\n                <LabeledInput\n                  v-if=\"!firstLogin\"\n                  id=\"username\"\n                  ref=\"username\"\n                  v-model.trim=\"username\"\n                  data-testid=\"local-login-username\"\n                  :label=\"t('login.username')\"\n                  autocomplete=\"username\"\n                />\n              </div>\n              <div class=\"\">\n                <Password\n                  id=\"password\"\n                  ref=\"password\"\n                  v-model=\"password\"\n                  data-testid=\"local-login-password\"\n                  :label=\"t('login.password')\"\n                  autocomplete=\"password\"\n                />\n              </div>\n            </div>\n            <div class=\"mt-20\">\n              <div class=\"col span-12 text-center\">\n                <AsyncButton\n                  id=\"submit\"\n                  data-testid=\"login-submit\"\n                  type=\"submit\"\n                  :action-label=\"t('login.loginWithLocal')\"\n                  :waiting-label=\"t('login.loggingIn')\"\n                  :success-label=\"t('login.loggedIn')\"\n                  :error-label=\"t('asyncButton.default.error')\"\n                  @click=\"loginLocal\"\n                />\n                <div\n                  v-if=\"!firstLogin\"\n                  class=\"mt-20\"\n                >\n                  <Checkbox\n                    v-model=\"remember\"\n                    :label=\"t('login.remember.label')\"\n                    type=\"checkbox\"\n                  />\n                </div>\n              </div>\n            </div>\n          </form>\n          <div\n            v-if=\"hasLocal && !showLocal\"\n            class=\"mt-20 text-center\"\n          >\n            <a\n              id=\"login-useLocal\"\n              data-testid=\"login-useLocal\"\n              role=\"button\"\n              @click=\"toggleLocal\"\n            >\n              {{ t('login.useLocal') }}\n            </a>\n          </div>\n          <div\n            v-if=\"hasLocal && showLocal && providers.length\"\n            class=\"mt-20 text-center\"\n          >\n            <a\n              role=\"button\"\n              @click=\"toggleLocal\"\n            >\n              {{ nonLocalPrompt }}\n            </a>\n          </div>\n        </template>\n        <div\n          v-if=\"showLocaleSelector\"\n          class=\"locale-selector\"\n        >\n          <LocaleSelector\n            :style=\"localeSelectorStyle\"\n            mode=\"login\"\n          />\n        </div>\n      </div>\n      <BrandImage\n        class=\"col span-6 landscape\"\n        data-testid=\"login-landscape__img\"\n        file-name=\"login-landscape.svg\"\n      />\n    </div>\n  </main>\n</template>\n\n<style lang=\"scss\" scoped>\n  .login {\n    overflow: hidden;\n\n    .row {\n      align-items: center;\n    }\n\n    .landscape {\n      height: 100vh;\n      margin: 0;\n      object-fit: cover;\n    }\n\n    .login-welcome {\n      margin: 0\n    }\n\n    .login-messages {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n\n      .banner {\n        margin: 5px;\n      }\n      h4 {\n        margin: 0;\n      }\n      &--hasContent {\n        min-height: 70px;\n      }\n\n      .text-error, .banner {\n        max-width: 80%;\n      }\n    }\n\n    .first-login-message {\n      .banner {\n        margin-bottom: 0;\n        border-left: 0;\n\n        ::v-deep code {\n          font-size: 12px;\n          padding: 0;\n        }\n      }\n    }\n  }\n\n  .gutless {\n    height: 100vh;\n    & > .span-6 {\n      overflow-y: auto;\n      display: flex;\n      flex-direction: column;\n      height: 100%;\n      place-content: center;\n    }\n  }\n  .locale-selector {\n    position: absolute;\n    bottom: 30px;\n  }\n</style>\n"]}]}