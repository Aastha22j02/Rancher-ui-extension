{"remainingRequest":"/home/ubuntu/suseconf/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ubuntu/suseconf/node_modules/@rancher/shell/components/formatter/LiveDate.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/ubuntu/suseconf/node_modules/@rancher/shell/components/formatter/LiveDate.vue","mtime":1725338146566},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js","mtime":1725271298942},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1725271300920}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBkYXkgZnJvbSAnZGF5anMnOwppbXBvcnQgeyBEQVRFX0ZPUk1BVCwgVElNRV9GT1JNQVQgfSBmcm9tICdAc2hlbGwvc3RvcmUvcHJlZnMnOwppbXBvcnQgeyBlc2NhcGVIdG1sIH0gZnJvbSAnQHNoZWxsL3V0aWxzL3N0cmluZyc7CmltcG9ydCB7IGRpZmZGcm9tIH0gZnJvbSAnQHNoZWxsL3V0aWxzL3RpbWUnOwoKZXhwb3J0IGRlZmF1bHQgewogIHByb3BzOiB7CiAgICB2YWx1ZTogewogICAgICB0eXBlOiAgICBbU3RyaW5nLCBOdW1iZXJdLAogICAgICBkZWZhdWx0OiAnJwogICAgfSwKCiAgICBhZGRTdWZmaXg6IHsKICAgICAgdHlwZTogICAgQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UsCiAgICB9LAoKICAgIGFkZFByZWZpeDogewogICAgICB0eXBlOiAgICBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfSwKCiAgICBzdWZmaXg6IHsKICAgICAgdHlwZTogICAgU3RyaW5nLAogICAgICBkZWZhdWx0OiAnYWdvJywKICAgIH0sCgogICAgdG9vbHRpcFBsYWNlbWVudDogewogICAgICB0eXBlOiAgICBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICdhdXRvJwogICAgfSwKCiAgICBzaG93VG9vbHRpcDogewogICAgICB0eXBlOiAgICBCb29sZWFuLAogICAgICBkZWZhdWx0OiB0cnVlCiAgICB9LAoKICAgIC8qKgogICAgICogRGV0ZXJtaW5lcyBpZiB0aGUgbGl2ZSBkYXRlIHNob3VsZCBiZWhhdmUgbGlrZSBhIGNvdW50ZG93biBieSBjb21wYXJpbmcKICAgICAqIHRoZSBwcm92aWRlZCB2YWx1ZSBhbmQgdGhlIGN1cnJlbnQgZGF0ZS4gV2hlbiB0aGUgY291bnRkb3duIHJlYWNoZXMgMCwgYQogICAgICogIi0iIGlzIHJlbmRlcmVkLgogICAgICovCiAgICBpc0NvdW50ZG93bjogewogICAgICB0eXBlOiAgICBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZSwKICAgIH0KICB9LAoKICBtb3VudGVkKCkgewogICAgLy8gU2V0IGluaXRpYWwgdmFsdWU7CiAgICB0aGlzLmxpdmVVcGRhdGUoZGF5KCkpOwogIH0sCgogIGRhdGEoKSB7CiAgICByZXR1cm4geyBsYWJlbDogJy0nIH07CiAgfSwKCiAgY29tcHV0ZWQ6IHsKICAgIHRpdGxlKCkgewogICAgICBpZiAoICF0aGlzLnZhbHVlICkgewogICAgICAgIHJldHVybiAnJzsKICAgICAgfQoKICAgICAgY29uc3QgZGF0ZUZvcm1hdCA9IGVzY2FwZUh0bWwoIHRoaXMuJHN0b3JlLmdldHRlcnNbJ3ByZWZzL2dldCddKERBVEVfRk9STUFUKSk7CiAgICAgIGNvbnN0IHRpbWVGb3JtYXQgPSBlc2NhcGVIdG1sKCB0aGlzLiRzdG9yZS5nZXR0ZXJzWydwcmVmcy9nZXQnXShUSU1FX0ZPUk1BVCkpOwoKICAgICAgY29uc3Qgb3V0ID0gZGF5KHRoaXMudmFsdWUpLmZvcm1hdChgJHsgZGF0ZUZvcm1hdCB9ICR7IHRpbWVGb3JtYXQgfWApOwoKICAgICAgcmV0dXJuIG91dDsKICAgIH0sCgogICAgc3VmZml4ZWRMYWJlbCgpIHsKICAgICAgaWYgKCF0aGlzLnZhbHVlKSB7CiAgICAgICAgLy8gSWYgdGhlcmUgaXMgbm8gdmFsdWUsIHRoZW4gZG8gbm90IHNob3cgdGhlIHN1ZmZpeAogICAgICAgIHJldHVybiB0aGlzLmxhYmVsOwogICAgICB9CgogICAgICBsZXQgb3V0ID0gdGhpcy5sYWJlbCB8fCAnJzsKCiAgICAgIGlmIChvdXQgJiYgdGhpcy5hZGRTdWZmaXgpIHsKICAgICAgICBjb25zdCBleGlzdHMgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzWydpMThuL2V4aXN0cyddOwogICAgICAgIGNvbnN0IHN1ZmZpeEtleSA9IGBzdWZmaXguJHsgdGhpcy5zdWZmaXggfWA7CiAgICAgICAgY29uc3Qgc3VmZml4ID0gZXhpc3RzKHN1ZmZpeEtleSkgPyB0aGlzLnQoc3VmZml4S2V5KSA6IHRoaXMuc3VmZml4OwoKICAgICAgICBvdXQgPSBgJHsgb3V0IH0gJHsgc3VmZml4IH1gOwogICAgICB9CgogICAgICByZXR1cm4gb3V0OwogICAgfSwKCiAgICBkYXlWYWx1ZSgpIHsKICAgICAgaWYgKCF0aGlzLnZhbHVlKSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KCiAgICAgIHJldHVybiBkYXkodGhpcy52YWx1ZSk7CiAgICB9CiAgfSwKCiAgd2F0Y2g6IHsKICAgIHZhbHVlKCkgewogICAgICB0aGlzLmxpdmVVcGRhdGUoZGF5KCkpOwogICAgfQogIH0sCgogIG1ldGhvZHM6IHsKICAgIGxpdmVVcGRhdGUobm93KSB7CiAgICAgIGlmICghdGhpcy5kYXlWYWx1ZSkgewogICAgICAgIGlmICh0aGlzLmxhYmVsICE9PSAnLScpIHsKICAgICAgICAgIHRoaXMubGFiZWwgPSAnLSc7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gMzAwOwogICAgICB9CgogICAgICBpZiAodGhpcy5pc0NvdW50ZG93biAmJiBub3cudmFsdWVPZigpID4gdGhpcy5kYXlWYWx1ZT8udmFsdWVPZigpKSB7CiAgICAgICAgdGhpcy5sYWJlbCA9ICctJzsKCiAgICAgICAgcmV0dXJuIDMwMDsKICAgICAgfQoKICAgICAgY29uc3QgZGlmZiA9IGRpZmZGcm9tKHRoaXMuZGF5VmFsdWUsIG5vdyk7CiAgICAgIGNvbnN0IHByZWZpeCA9IChkaWZmLmRpZmYgPCAwIHx8ICF0aGlzLmFkZFByZWZpeCA/ICcnIDogJy0nKTsKCiAgICAgIGxldCBsYWJlbCA9IGRpZmYubGFiZWw7CgogICAgICBpZiAoIGRpZmYuZGlmZiA9PT0gMCApIHsKICAgICAgICBsYWJlbCA9ICdKdXN0IG5vdyc7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbGFiZWwgKz0gYCAkeyBwcmVmaXggfSR7IHRoaXMudChkaWZmLnVuaXRzS2V5LCB7IGNvdW50OiBkaWZmLmxhYmVsIH0pIH1gOwogICAgICAgIGxhYmVsID0gbGFiZWwudHJpbSgpOwogICAgICB9CgogICAgICBpZiAoIHRoaXMubGFiZWwgIT09IGxhYmVsICkgewogICAgICAgIHRoaXMubGFiZWwgPSBsYWJlbDsKICAgICAgfQoKICAgICAgcmV0dXJuIGRpZmYubmV4dCB8fCAxOwogICAgfSwKICB9Cn07Cg=="},{"version":3,"sources":["LiveDate.vue"],"names":[],"mappings":";AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"LiveDate.vue","sourceRoot":"node_modules/@rancher/shell/components/formatter","sourcesContent":["<script>\nimport day from 'dayjs';\nimport { DATE_FORMAT, TIME_FORMAT } from '@shell/store/prefs';\nimport { escapeHtml } from '@shell/utils/string';\nimport { diffFrom } from '@shell/utils/time';\n\nexport default {\n  props: {\n    value: {\n      type:    [String, Number],\n      default: ''\n    },\n\n    addSuffix: {\n      type:    Boolean,\n      default: false,\n    },\n\n    addPrefix: {\n      type:    Boolean,\n      default: false\n    },\n\n    suffix: {\n      type:    String,\n      default: 'ago',\n    },\n\n    tooltipPlacement: {\n      type:    String,\n      default: 'auto'\n    },\n\n    showTooltip: {\n      type:    Boolean,\n      default: true\n    },\n\n    /**\n     * Determines if the live date should behave like a countdown by comparing\n     * the provided value and the current date. When the countdown reaches 0, a\n     * \"-\" is rendered.\n     */\n    isCountdown: {\n      type:    Boolean,\n      default: false,\n    }\n  },\n\n  mounted() {\n    // Set initial value;\n    this.liveUpdate(day());\n  },\n\n  data() {\n    return { label: '-' };\n  },\n\n  computed: {\n    title() {\n      if ( !this.value ) {\n        return '';\n      }\n\n      const dateFormat = escapeHtml( this.$store.getters['prefs/get'](DATE_FORMAT));\n      const timeFormat = escapeHtml( this.$store.getters['prefs/get'](TIME_FORMAT));\n\n      const out = day(this.value).format(`${ dateFormat } ${ timeFormat }`);\n\n      return out;\n    },\n\n    suffixedLabel() {\n      if (!this.value) {\n        // If there is no value, then do not show the suffix\n        return this.label;\n      }\n\n      let out = this.label || '';\n\n      if (out && this.addSuffix) {\n        const exists = this.$store.getters['i18n/exists'];\n        const suffixKey = `suffix.${ this.suffix }`;\n        const suffix = exists(suffixKey) ? this.t(suffixKey) : this.suffix;\n\n        out = `${ out } ${ suffix }`;\n      }\n\n      return out;\n    },\n\n    dayValue() {\n      if (!this.value) {\n        return null;\n      }\n\n      return day(this.value);\n    }\n  },\n\n  watch: {\n    value() {\n      this.liveUpdate(day());\n    }\n  },\n\n  methods: {\n    liveUpdate(now) {\n      if (!this.dayValue) {\n        if (this.label !== '-') {\n          this.label = '-';\n        }\n\n        return 300;\n      }\n\n      if (this.isCountdown && now.valueOf() > this.dayValue?.valueOf()) {\n        this.label = '-';\n\n        return 300;\n      }\n\n      const diff = diffFrom(this.dayValue, now);\n      const prefix = (diff.diff < 0 || !this.addPrefix ? '' : '-');\n\n      let label = diff.label;\n\n      if ( diff.diff === 0 ) {\n        label = 'Just now';\n      } else {\n        label += ` ${ prefix }${ this.t(diff.unitsKey, { count: diff.label }) }`;\n        label = label.trim();\n      }\n\n      if ( this.label !== label ) {\n        this.label = label;\n      }\n\n      return diff.next || 1;\n    },\n  }\n};\n</script>\n\n<template>\n  <span\n    v-if=\"!suffixedLabel\"\n    class=\"text-muted\"\n  >\n    &mdash;\n  </span>\n  <span\n    v-else-if=\"showTooltip\"\n    v-clean-tooltip=\"{content: title, placement: tooltipPlacement}\"\n    class=\"live-date\"\n  >\n    {{ suffixedLabel }}\n  </span>\n  <span\n    v-else\n    class=\"live-date\"\n  >\n    {{ suffixedLabel }}\n  </span>\n</template>\n"]}]}