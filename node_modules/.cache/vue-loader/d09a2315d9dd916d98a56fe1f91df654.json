{"remainingRequest":"/home/ubuntu/suseconf/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ubuntu/suseconf/node_modules/@rancher/shell/edit/provisioning.cattle.io.cluster/tabs/Advanced.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/ubuntu/suseconf/node_modules/@rancher/shell/edit/provisioning.cattle.io.cluster/tabs/Advanced.vue","mtime":1725338146566},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js","mtime":1725271298942},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1725271300920}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IHsgX1ZJRVcgfSBmcm9tICdAc2hlbGwvY29uZmlnL3F1ZXJ5LXBhcmFtcyc7CmltcG9ydCB7IEJhbm5lciB9IGZyb20gJ0Bjb21wb25lbnRzL0Jhbm5lcic7CmltcG9ydCBBcnJheUxpc3RHcm91cGVkIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL2Zvcm0vQXJyYXlMaXN0R3JvdXBlZCc7CmltcG9ydCBNYXRjaEV4cHJlc3Npb25zIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL2Zvcm0vTWF0Y2hFeHByZXNzaW9ucyc7CmltcG9ydCBBcnJheUxpc3QgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvZm9ybS9BcnJheUxpc3QnOwppbXBvcnQgeyBDaGVja2JveCB9IGZyb20gJ0Bjb21wb25lbnRzL0Zvcm0vQ2hlY2tib3gnOwppbXBvcnQgRGlyZWN0b3J5Q29uZmlnIGZyb20gJ0BzaGVsbC9lZGl0L3Byb3Zpc2lvbmluZy5jYXR0bGUuaW8uY2x1c3Rlci90YWJzL0RpcmVjdG9yeUNvbmZpZy52dWUnOwoKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIEJhbm5lciwKICAgIEFycmF5TGlzdEdyb3VwZWQsCiAgICBNYXRjaEV4cHJlc3Npb25zLAogICAgQXJyYXlMaXN0LAogICAgQ2hlY2tib3gsCiAgICBEaXJlY3RvcnlDb25maWcKICB9LAoKICBwcm9wczogewogICAgbW9kZTogewogICAgICB0eXBlOiAgICAgU3RyaW5nLAogICAgICByZXF1aXJlZDogdHJ1ZSwKICAgIH0sCgogICAgdmFsdWU6IHsKICAgICAgdHlwZTogICAgIE9iamVjdCwKICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICB9LAoKICAgIGhhdmVBcmdJbmZvOiB7CiAgICAgIHR5cGU6ICAgICBCb29sZWFuLAogICAgICByZXF1aXJlZDogdHJ1ZQogICAgfSwKCiAgICBzZWxlY3RlZFZlcnNpb246IHsKICAgICAgdHlwZTogICAgIE9iamVjdCwKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0sCiAgfSwKCiAgY29tcHV0ZWQ6IHsKICAgIGlzVmlldygpIHsKICAgICAgcmV0dXJuIHRoaXMubW9kZSA9PT0gX1ZJRVc7CiAgICB9LAogICAgcmtlQ29uZmlnKCkgewogICAgICByZXR1cm4gdGhpcy52YWx1ZS5zcGVjLnJrZUNvbmZpZzsKICAgIH0sCiAgICBhZ2VudEFyZ3MoKSB7CiAgICAgIHJldHVybiB0aGlzLnNlbGVjdGVkVmVyc2lvbj8uYWdlbnRBcmdzIHx8IHt9OwogICAgfSwKICAgIHNlcnZlckFyZ3MoKSB7CiAgICAgIHJldHVybiB0aGlzLnNlbGVjdGVkVmVyc2lvbj8uc2VydmVyQXJncyB8fCB7fTsKICAgIH0sCiAgICBzZXJ2ZXJDb25maWcoKSB7CiAgICAgIHJldHVybiB0aGlzLnZhbHVlLnNwZWMucmtlQ29uZmlnLm1hY2hpbmVHbG9iYWxDb25maWc7CiAgICB9LAogICAgYWdlbnRDb25maWcoKSB7CiAgICAgIHJldHVybiB0aGlzLnZhbHVlLmFnZW50Q29uZmlnOwogICAgfSwKICAgIGFkdmFuY2VkVGl0bGVBbHQoKSB7CiAgICAgIGNvbnN0IG1hY2hpbmVTZWxlY3Rvckxlbmd0aCA9IHRoaXMucmtlQ29uZmlnLm1hY2hpbmVTZWxlY3RvckNvbmZpZy5sZW5ndGg7CgogICAgICByZXR1cm4gdGhpcy50KCdjbHVzdGVyLmFkdmFuY2VkLmFyZ0luZm8ubWFjaGluZVNlbGVjdG9yLnRpdGxlQWx0JywgeyBjb3VudDogbWFjaGluZVNlbGVjdG9yTGVuZ3RoIH0pOwogICAgfSwKICAgIHByb3RlY3RLZXJuZWxEZWZhdWx0cygpIHsKICAgICAgcmV0dXJuICh0aGlzLmFnZW50Q29uZmlnIHx8IHRoaXMuc2VydmVyQ29uZmlnKVsncHJvdGVjdC1rZXJuZWwtZGVmYXVsdHMnXTsKICAgIH0sCiAgICBrdWJlbGV0QXJnVG9vbHRpcCgpIHsKICAgICAgaWYgKHRoaXMuc2VydmVyQ29uZmlnPy5bJ2t1YmVsZXQtYXJnJ10pIHsKICAgICAgICByZXR1cm4gdGhpcy50KGBjbHVzdGVyLmFkdmFuY2VkLmFyZ0luZm8udG9vbHRpcC4keyB0aGlzLmFnZW50Q29uZmlnPy5bJ2t1YmVsZXQtYXJnJ10gPyAnbWl4ZWQtYXJncycgOiAnZ2xvYmFsLWFyZ3MnIH1gLCBudWxsLCB7IHJhdzogdHJ1ZSB9KTsKICAgICAgfQoKICAgICAgcmV0dXJuIG51bGw7CiAgICB9CiAgfSwKCiAgbWV0aG9kczogewogICAgY2FuUmVtb3ZlS3ViZWxldFJvdyhyb3csIGkpIHsKICAgICAgcmV0dXJuIGkgIT09IDAgfHwgIXRoaXMuYWdlbnRDb25maWc7CiAgICB9LAogICAgc2hvd0VtcHR5S3ViZWxldEFyZyhjb25maWcpIHsKICAgICAgcmV0dXJuICF0aGlzLnNlcnZlckFyZz8uWydrdWJlbGV0LWFyZyddPy5sZW5ndGggJiYgIWNvbmZpZz8uWydrdWJlbGV0LWFyZyddPy5sZW5ndGg7CiAgICB9LAogICAgb25JbnB1dFByb3RlY3RLZXJuZWxEZWZhdWx0cyh2YWx1ZSkgewogICAgICBWdWUuc2V0KHRoaXMuYWdlbnRDb25maWcgfHwgdGhpcy5zZXJ2ZXJDb25maWcsICdwcm90ZWN0LWtlcm5lbC1kZWZhdWx0cycsIHZhbHVlKTsKICAgIH0KICB9Cn07Cg=="},{"version":3,"sources":["Advanced.vue"],"names":[],"mappings":";AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Advanced.vue","sourceRoot":"node_modules/@rancher/shell/edit/provisioning.cattle.io.cluster/tabs","sourcesContent":["<script>\nimport Vue from 'vue';\nimport { _VIEW } from '@shell/config/query-params';\nimport { Banner } from '@components/Banner';\nimport ArrayListGrouped from '@shell/components/form/ArrayListGrouped';\nimport MatchExpressions from '@shell/components/form/MatchExpressions';\nimport ArrayList from '@shell/components/form/ArrayList';\nimport { Checkbox } from '@components/Form/Checkbox';\nimport DirectoryConfig from '@shell/edit/provisioning.cattle.io.cluster/tabs/DirectoryConfig.vue';\n\nexport default {\n  components: {\n    Banner,\n    ArrayListGrouped,\n    MatchExpressions,\n    ArrayList,\n    Checkbox,\n    DirectoryConfig\n  },\n\n  props: {\n    mode: {\n      type:     String,\n      required: true,\n    },\n\n    value: {\n      type:     Object,\n      required: true,\n    },\n\n    haveArgInfo: {\n      type:     Boolean,\n      required: true\n    },\n\n    selectedVersion: {\n      type:     Object,\n      required: true\n    },\n  },\n\n  computed: {\n    isView() {\n      return this.mode === _VIEW;\n    },\n    rkeConfig() {\n      return this.value.spec.rkeConfig;\n    },\n    agentArgs() {\n      return this.selectedVersion?.agentArgs || {};\n    },\n    serverArgs() {\n      return this.selectedVersion?.serverArgs || {};\n    },\n    serverConfig() {\n      return this.value.spec.rkeConfig.machineGlobalConfig;\n    },\n    agentConfig() {\n      return this.value.agentConfig;\n    },\n    advancedTitleAlt() {\n      const machineSelectorLength = this.rkeConfig.machineSelectorConfig.length;\n\n      return this.t('cluster.advanced.argInfo.machineSelector.titleAlt', { count: machineSelectorLength });\n    },\n    protectKernelDefaults() {\n      return (this.agentConfig || this.serverConfig)['protect-kernel-defaults'];\n    },\n    kubeletArgTooltip() {\n      if (this.serverConfig?.['kubelet-arg']) {\n        return this.t(`cluster.advanced.argInfo.tooltip.${ this.agentConfig?.['kubelet-arg'] ? 'mixed-args' : 'global-args' }`, null, { raw: true });\n      }\n\n      return null;\n    }\n  },\n\n  methods: {\n    canRemoveKubeletRow(row, i) {\n      return i !== 0 || !this.agentConfig;\n    },\n    showEmptyKubeletArg(config) {\n      return !this.serverArg?.['kubelet-arg']?.length && !config?.['kubelet-arg']?.length;\n    },\n    onInputProtectKernelDefaults(value) {\n      Vue.set(this.agentConfig || this.serverConfig, 'protect-kernel-defaults', value);\n    }\n  }\n};\n</script>\n\n<template>\n  <div>\n    <Banner\n      class=\"mt-0\"\n      color=\"info\"\n      label-key=\"cluster.jwtAuthentication.banner\"\n      data-testid=\"jwt-authentication-banner\"\n    />\n    <template v-if=\"haveArgInfo\">\n      <DirectoryConfig\n        v-model=\"value.spec.rkeConfig.dataDirectories\"\n        :mode=\"mode\"\n      />\n      <h3>{{ t('cluster.advanced.argInfo.title') }}</h3>\n      <ArrayListGrouped\n        v-if=\"agentArgs['kubelet-arg']\"\n        v-model=\"rkeConfig.machineSelectorConfig\"\n        class=\"mb-20\"\n        :mode=\"mode\"\n        :add-label=\"t('cluster.advanced.argInfo.machineSelector.label')\"\n        :can-remove=\"canRemoveKubeletRow\"\n        :default-add-value=\"{machineLabelSelector: { matchExpressions: [], matchLabels: {} }, config: {'kubelet-arg': []}}\"\n      >\n        <template #default=\"{row, i}\">\n          <template v-if=\"row.value.machineLabelSelector\">\n            <h3>{{ t('cluster.advanced.argInfo.machineSelector.title') }}</h3>\n            <MatchExpressions\n              v-model=\"row.value.machineLabelSelector\"\n              class=\"mb-20\"\n              :mode=\"mode\"\n              :show-remove=\"false\"\n              :initial-empty-row=\"true\"\n            />\n            <h3>{{ t('cluster.advanced.argInfo.machineSelector.subTitle') }}</h3>\n          </template>\n          <h3 v-else>\n            {{ advancedTitleAlt }}\n            <i\n              v-if=\"kubeletArgTooltip\"\n              v-clean-tooltip=\"kubeletArgTooltip\"\n              class=\"icon icon-info\"\n            />\n          </h3>\n\n          <ArrayList\n            v-if=\"i === 0 && serverConfig['kubelet-arg']\"\n            v-model=\"serverConfig['kubelet-arg']\"\n            class=\"mb-10\"\n            data-testid=\"global-kubelet-arg\"\n            :mode=\"mode\"\n            :add-label=\"t('cluster.advanced.argInfo.machineGlobal.listLabel')\"\n          >\n            <template #empty>\n              {{ '' }}\n            </template>\n          </ArrayList>\n\n          <ArrayList\n            v-if=\"row.value.config && (row.value.config['kubelet-arg'] || !serverConfig['kubelet-arg'])\"\n            v-model=\"row.value.config['kubelet-arg']\"\n            data-testid=\"selector-kubelet-arg\"\n            :mode=\"mode\"\n            :add-label=\"t('cluster.advanced.argInfo.machineSelector.listLabel')\"\n            :initial-empty-row=\"!!row.value.machineLabelSelector\"\n          >\n            <template\n              v-if=\"i === 0\"\n              #empty\n            >\n              {{ '' }}\n            </template>\n          </ArrayList>\n\n          <div\n            v-if=\"i === 0 && isView && showEmptyKubeletArg(row.value.config)\"\n            class=\"text-muted\"\n          >\n            &mdash;\n          </div>\n        </template>\n      </ArrayListGrouped>\n      <Banner\n        v-if=\"rkeConfig.machineSelectorConfig.length > 1\"\n        color=\"info\"\n        :label=\"t('cluster.advanced.argInfo.machineSelector.bannerLabel')\"\n      />\n\n      <ArrayList\n        v-if=\"serverArgs['kube-controller-manager-arg']\"\n        v-model=\"serverConfig['kube-controller-manager-arg']\"\n        :mode=\"mode\"\n        :title=\"t('cluster.advanced.argInfo.machineSelector.kubeControllerManagerTitle')\"\n        class=\"mb-20\"\n      />\n      <ArrayList\n        v-if=\"serverArgs['kube-apiserver-arg']\"\n        v-model=\"serverConfig['kube-apiserver-arg']\"\n        :mode=\"mode\"\n        :title=\"t('cluster.advanced.argInfo.machineSelector.kubeApiServerTitle')\"\n        class=\"mb-20\"\n      />\n      <ArrayList\n        v-if=\"serverArgs['kube-scheduler-arg']\"\n        v-model=\"serverConfig['kube-scheduler-arg']\"\n        :mode=\"mode\"\n        :title=\"t('cluster.advanced.argInfo.machineSelector.kubeSchedulerTitle')\"\n      />\n    </template>\n    <template v-if=\"agentArgs && agentArgs['protect-kernel-defaults']\">\n      <div class=\"spacer\" />\n\n      <div class=\"row\">\n        <div class=\"col span-12\">\n          <Checkbox\n            data-testid=\"protect-kernel-defaults\"\n            :value=\"protectKernelDefaults\"\n            :mode=\"mode\"\n            :label=\"t('cluster.advanced.agentArgs.label')\"\n            @input=\"onInputProtectKernelDefaults($event)\"\n          />\n        </div>\n      </div>\n    </template>\n  </div>\n</template>\n"]}]}