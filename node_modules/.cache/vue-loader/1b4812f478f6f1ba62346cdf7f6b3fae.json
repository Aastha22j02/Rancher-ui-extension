{"remainingRequest":"/home/ubuntu/suseconf/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ubuntu/suseconf/node_modules/@rancher/shell/dialog/AddCustomBadgeDialog.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/ubuntu/suseconf/node_modules/@rancher/shell/dialog/AddCustomBadgeDialog.vue","mtime":1725338146566},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js","mtime":1725271298942},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1725271300920}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICd2dWV4JzsKaW1wb3J0IHsgQ0xVU1RFUl9CQURHRSB9IGZyb20gJ0BzaGVsbC9jb25maWcvbGFiZWxzLWFubm90YXRpb25zJzsKaW1wb3J0IEFzeW5jQnV0dG9uIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL0FzeW5jQnV0dG9uJzsKaW1wb3J0IHsgQ2FyZCB9IGZyb20gJ0Bjb21wb25lbnRzL0NhcmQnOwppbXBvcnQgeyBCYW5uZXIgfSBmcm9tICdAY29tcG9uZW50cy9CYW5uZXInOwppbXBvcnQgQ2x1c3RlckJhZGdlIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL0NsdXN0ZXJCYWRnZSc7CmltcG9ydCBDbHVzdGVyUHJvdmlkZXJJY29uIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL0NsdXN0ZXJQcm92aWRlckljb24nOwppbXBvcnQgeyBleGNlcHRpb25Ub0Vycm9yc0FycmF5IH0gZnJvbSAnQHNoZWxsL3V0aWxzL2Vycm9yJzsKaW1wb3J0IHsgQ2hlY2tib3ggfSBmcm9tICdAY29tcG9uZW50cy9Gb3JtL0NoZWNrYm94JzsKaW1wb3J0IHsgTGFiZWxlZElucHV0IH0gZnJvbSAnQGNvbXBvbmVudHMvRm9ybS9MYWJlbGVkSW5wdXQnOwppbXBvcnQgQ29sb3JJbnB1dCBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9mb3JtL0NvbG9ySW5wdXQnOwppbXBvcnQgeyBwYXJzZUNvbG9yLCB0ZXh0Q29sb3IgfSBmcm9tICdAc2hlbGwvdXRpbHMvY29sb3InOwppbXBvcnQgeyBOT1JNQU4gfSBmcm9tICdAc2hlbGwvY29uZmlnL3R5cGVzJzsKaW1wb3J0IHsgYWJicmV2aWF0ZUNsdXN0ZXJOYW1lIH0gZnJvbSAnQHNoZWxsL3V0aWxzL2NsdXN0ZXInOwppbXBvcnQgeyBfQ1JFQVRFLCBfRURJVCB9IGZyb20gJ0BzaGVsbC9jb25maWcvcXVlcnktcGFyYW1zJzsKaW1wb3J0IENsdXN0ZXJJY29uTWVudSBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9DbHVzdGVySWNvbk1lbnUnOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICAgICAgICdBZGRDdXN0b21CYWRnZURpYWxvZycsCiAgY29tcG9uZW50czogewogICAgQ2FyZCwKICAgIEFzeW5jQnV0dG9uLAogICAgQmFubmVyLAogICAgQ2hlY2tib3gsCiAgICBMYWJlbGVkSW5wdXQsCiAgICBDb2xvcklucHV0LAogICAgQ2x1c3RlckJhZGdlLAogICAgQ2x1c3Rlckljb25NZW51LAogICAgQ2x1c3RlclByb3ZpZGVySWNvbiwKICB9LAogIHByb3BzOiB7CiAgICBpc0NyZWF0ZTogICAgICAgIHsgdHlwZTogQm9vbGVhbiwgZGVmYXVsdDogZmFsc2UgfSwKICAgIGNsdXN0ZXJOYW1lOiAgICAgeyB0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6ICcnIH0sCiAgICBtb2RlOiAgICAgICAgICAgIHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiBfQ1JFQVRFIH0sCiAgICBjbHVzdGVyRXhwbG9yZXI6IHsKICAgICAgdHlwZTogICAgT2JqZWN0LAogICAgICBkZWZhdWx0OiBudWxsCiAgICB9LAogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHVzZUN1c3RvbUNvbW1lbnQ6IG51bGwsCiAgICAgIGVycm9yczogICAgICAgICAgIFtdLAogICAgICBiYWRnZUJnQ29sb3I6ICAgICAnJywKICAgICAgYmFkZ2VDb21tZW50OiAgICAgJycsCiAgICAgIGJhZGdlQXNJY29uOiAgICAgIG51bGwsCiAgICAgIGJhZGdlQ29sb3JQaWNrZXI6IGZhbHNlLAogICAgICBsZXR0ZXI6ICAgICAgICAgICAnJywKICAgICAgY2x1c3RlcjogICAgICAgICAge30sCiAgICB9OwogIH0sCiAgY3JlYXRlZCgpIHsKICAgIGlmICh0aGlzLmNsdXN0ZXJFeHBsb3JlcikgewogICAgICB0aGlzLnNldEJhZGdlUHJvcGVydGllcyh0aGlzLmNsdXN0ZXJFeHBsb3Jlcik7CiAgICB9CgogICAgaWYgKHRoaXMuaXNDcmVhdGUpIHsKICAgICAgdGhpcy5zZXRCYWRnZVByb3BlcnRpZXModGhpcy5nZXRQcmV2aWV3Q2x1c3Rlcik7CiAgICB9CiAgfSwKCiAgYXN5bmMgZmV0Y2goKSB7CiAgICAvLyBJTkZPOiBEbyBub3QgZmV0Y2ggdGhlIGNsdXN0ZXIgb2JqZWN0IGlmIGl0J3MgYSBjcmVhdGUgb3IgY2x1c3RlciBleHBsb3JlciBzaW5jZSBpdCB3b24ndCBleGlzdAogICAgaWYgKHRoaXMuaXNDcmVhdGUgfHwgdGhpcy5jbHVzdGVyRXhwbG9yZXIpIHsKICAgICAgcmV0dXJuOwogICAgfQogICAgLy8gSU5GTzogRmV0Y2ggdGhlIGNsdXN0ZXIgb2JqZWN0IGlmIGl0J3MgYW4gZWRpdAogICAgYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3JhbmNoZXIvZmluZCcsIHsgdHlwZTogTk9STUFOLkNMVVNURVIsIGlkOiB0aGlzLmN1cnJlbnRDbHVzdGVyPy5pZCB9KTsKCiAgICBpZiAodGhpcy5jdXJyZW50Q2x1c3Rlci5tZXRhZGF0YT8uYW5ub3RhdGlvbnMpIHsKICAgICAgdGhpcy5iYWRnZUNvbW1lbnQgPSB0aGlzLmN1cnJlbnRDbHVzdGVyLm1ldGFkYXRhPy5hbm5vdGF0aW9uc1tDTFVTVEVSX0JBREdFLlRFWFRdOwogICAgICB0aGlzLnVzZUN1c3RvbUNvbW1lbnQgPSB0aGlzLmJhZGdlQ29tbWVudD8ubGVuZ3RoID4gMDsKICAgICAgdGhpcy5iYWRnZUJnQ29sb3IgPSB0aGlzLmN1cnJlbnRDbHVzdGVyLm1ldGFkYXRhPy5hbm5vdGF0aW9uc1tDTFVTVEVSX0JBREdFLkNPTE9SXSB8fCAndHJhbnNwYXJlbnQnOwogICAgICB0aGlzLmJhZGdlQXNJY29uID0gISF0aGlzLmN1cnJlbnRDbHVzdGVyLm1ldGFkYXRhPy5hbm5vdGF0aW9uc1tDTFVTVEVSX0JBREdFLklDT05fVEVYVF0gfHwgZmFsc2U7CiAgICAgIHRoaXMuYmFkZ2VDb2xvclBpY2tlciA9IHRoaXMuYmFkZ2VCZ0NvbG9yICE9PSAndHJhbnNwYXJlbnQnOwogICAgICB0aGlzLmxldHRlciA9IHRoaXMuY3VycmVudENsdXN0ZXIubWV0YWRhdGE/LmFubm90YXRpb25zW0NMVVNURVJfQkFER0UuSUNPTl9URVhUXSB8fCBhYmJyZXZpYXRlQ2x1c3Rlck5hbWUodGhpcy5jdXJyZW50Q2x1c3Rlci5uYW1lRGlzcGxheSk7CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgLy8gSU5GTzogSWYgdGhlIHVzZXIgaGFzIGEgY3VzdG9tIGNvbW1lbnQsIHNldCB0aGUgYmFkZ2UgdGV4dAogICAgdXNlQ3VzdG9tQ29tbWVudDogewogICAgICBoYW5kbGVyKG5ldSwgb2xkKSB7CiAgICAgICAgaWYgKG5ldSAhPT0gb2xkKSB7CiAgICAgICAgICB0aGlzLmJhZGdlQ29tbWVudCA9IG5ldSA/IHRoaXMuYmFkZ2VDb21tZW50IDogJyc7CiAgICAgICAgfQogICAgICB9LAogICAgICBpbW1lZGlhdGU6IHRydWUsCiAgICB9LAogICAgYmFkZ2VDb2xvclBpY2tlcjogewogICAgICBoYW5kbGVyKCkgewogICAgICAgIHRoaXMuYmFkZ2VCZ0NvbG9yID0gdGhpcy5iYWRnZUNvbG9yUGlja2VyID8gdGhpcy5iYWRnZUJnQ29sb3IgOiAndHJhbnNwYXJlbnQnOwogICAgICB9LAogICAgICBpbW1lZGlhdGU6IHRydWUsCiAgICB9LAogICAgYmFkZ2VBc0ljb246IHsKICAgICAgaGFuZGxlcihuZXUsIG9sZCkgewogICAgICAgIGlmIChuZXUgIT09IG9sZCkgewogICAgICAgICAgdGhpcy5sZXR0ZXIgPSBuZXUgPyB0aGlzLmxldHRlciA6IGFiYnJldmlhdGVDbHVzdGVyTmFtZSh0aGlzLmNsdXN0ZXJOYW1lKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGltbWVkaWF0ZTogdHJ1ZSwKICAgIH0sCiAgfSwKICBjb21wdXRlZDogewogICAgLi4ubWFwR2V0dGVycyhbJ2N1cnJlbnRDbHVzdGVyJ10pLAogICAgLi4ubWFwR2V0dGVycygnY3VzdG9taXNhdGlvbicsIFsnZ2V0UHJldmlld0NsdXN0ZXInXSksCiAgICBjYW5TdWJtaXQoKSB7CiAgICAgIGlmICh0aGlzLm1vZGUgPT09IF9DUkVBVEUpIHsKICAgICAgICByZXR1cm4gdGhpcy5iYWRnZUFzSWNvbiB8fCB0aGlzLnVzZUN1c3RvbUNvbW1lbnQ7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLm1vZGUgPT09IF9FRElUKSB7CiAgICAgICAgaWYgKHRoaXMudXNlQ3VzdG9tQ29tbWVudCAmJiB0aGlzLmJhZGdlQ29tbWVudC5sZW5ndGggPD0gMCkgewogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgaWYgKHRoaXMuYmFkZ2VBc0ljb24gJiYgdGhpcy5sZXR0ZXIubGVuZ3RoIDw9IDApIHsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CgogICAgICByZXR1cm4gdGhpcy5iYWRnZUFzSWNvbiAhPT0gdGhpcy5jdXJyZW50Q2x1c3Rlci5tZXRhZGF0YT8uYW5ub3RhdGlvbnNbQ0xVU1RFUl9CQURHRS5JQ09OX1RFWFRdIHx8IHRoaXMudXNlQ3VzdG9tQ29tbWVudCAhPT0gISF0aGlzLmN1cnJlbnRDbHVzdGVyLm1ldGFkYXRhPy5hbm5vdGF0aW9uc1tDTFVTVEVSX0JBREdFLlRFWFRdIHx8ICh0aGlzLmJhZGdlQXNJY29uICYmIHRoaXMubGV0dGVyLmxlbmd0aCA+IDEpOwogICAgfSwKICAgIC8vIEZha2UgY2x1c3RlciBvYmplY3QgZm9yIHVzZSB3aXRoIGJhZGdlIGNvbXBvbmVudAogICAgcHJldmlld0NsdXN0ZXIoKSB7CiAgICAgIHJldHVybiB0aGlzLmlzQ3JlYXRlIHx8ICF0aGlzLmN1cnJlbnRDbHVzdGVyID8gdGhpcy5nZW5lcmF0ZUJhZGdlT2JqZWN0KGZhbHNlLCAnJywgdHJ1ZSkgOiB0aGlzLmdlbmVyYXRlQmFkZ2VPYmplY3QodGhpcy5jdXJyZW50Q2x1c3Rlci5pc0xvY2FsLCB0aGlzLmN1cnJlbnRDbHVzdGVyLnByb3ZpZGVyTmF2TG9nbywgdGhpcy5jdXJyZW50Q2x1c3Rlci5yZWFkeSk7CiAgICB9LAoKICAgIGRpc3BsYXlDbHVzdGVyUHJldkljb24oKSB7CiAgICAgIHJldHVybiAhdGhpcy5iYWRnZUFzSWNvbiA/IHsgLi4udGhpcy5wcmV2aWV3Q2x1c3Rlci5iYWRnZSwgaWNvblRleHQ6IG51bGwgfSA6IHRoaXMucHJldmlld0NsdXN0ZXI/LmJhZGdlOwogICAgfSwKCiAgICBwcmV2aWV3TmFtZSgpIHsKICAgICAgaWYgKHRoaXMuaXNDcmVhdGUgfHwgdGhpcy5jbHVzdGVyRXhwbG9yZXIpIHsKICAgICAgICByZXR1cm4gdGhpcy5jbHVzdGVyTmFtZTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXMuY3VycmVudENsdXN0ZXI/Lm5hbWVEaXNwbGF5IHx8ICcnOwogICAgfSwKICB9LAogIG1ldGhvZHM6IHsKICAgIGNsb3NlKCkgewogICAgICB0aGlzLiRlbWl0KCdjbG9zZScpOwogICAgfSwKCiAgICAvLyBJTkZPOiBTZXQgdGhlIGJhZGdlIHByb3BlcnRpZXMgYmFzZWQgb24gdGhlIGNsdXN0ZXIgb2JqZWN0CiAgICBzZXRCYWRnZVByb3BlcnRpZXMoY2x1c3RlcikgewogICAgICB0aGlzLmNsdXN0ZXIgPSBjbHVzdGVyOwogICAgICB0aGlzLmJhZGdlQXNJY29uID0gdGhpcy5jbHVzdGVyPy5iYWRnZT8uaWNvblRleHQ/Lmxlbmd0aCA+IDAgfHwgZmFsc2U7CiAgICAgIHRoaXMubGV0dGVyID0gdGhpcy5jbHVzdGVyPy5iYWRnZT8uaWNvblRleHQgfHwgYWJicmV2aWF0ZUNsdXN0ZXJOYW1lKHRoaXMuY2x1c3Rlck5hbWUpOwogICAgICB0aGlzLnVzZUN1c3RvbUNvbW1lbnQgPSB0aGlzLmNsdXN0ZXI/LmJhZGdlPy50ZXh0Py5sZW5ndGggPiAwIHx8IGZhbHNlOwogICAgICB0aGlzLmJhZGdlQmdDb2xvciA9IHRoaXMuY2x1c3Rlcj8uYmFkZ2U/LmNvbG9yIHx8ICd0cmFuc3BhcmVudCc7CiAgICAgIHRoaXMuYmFkZ2VDb21tZW50ID0gdGhpcy5jbHVzdGVyPy5iYWRnZT8udGV4dCB8fCBudWxsOwogICAgICB0aGlzLmJhZGdlQ29sb3JQaWNrZXIgPSB0aGlzLmJhZGdlQmdDb2xvciAhPT0gJ3RyYW5zcGFyZW50JzsKICAgIH0sCgogICAgLy8gSU5GTzogR2VuZXJhdGUgYSBiYWRnZSBvYmplY3QgZm9yIHRoZSBwcmV2aWV3IGNsdXN0ZXIKICAgIGdlbmVyYXRlQmFkZ2VPYmplY3QoaXNMb2NhbCwgcHJvdmlkZXJOYXZMb2dvLCByZWFkeSkgewogICAgICByZXR1cm4gewogICAgICAgIGlzTG9jYWwsCiAgICAgICAgcHJvdmlkZXJOYXZMb2dvLAogICAgICAgIHJlYWR5OiAgICAgICAgICAgICAgcmVhZHkgPz8gdHJ1ZSwKICAgICAgICByZW1vdmVQcmV2aWV3Q29sb3I6ICF0aGlzLmJhZGdlQXNJY29uLAogICAgICAgIGJhZGdlOiAgICAgICAgICAgICAgewogICAgICAgICAgdGV4dDogICAgICB0aGlzLmJhZGdlQ29tbWVudCwKICAgICAgICAgIGNvbG9yOiAgICAgdGhpcy5iYWRnZUJnQ29sb3IsCiAgICAgICAgICB0ZXh0Q29sb3I6IHRleHRDb2xvcihwYXJzZUNvbG9yKHRoaXMuYmFkZ2VCZ0NvbG9yKSksCiAgICAgICAgICBpY29uVGV4dDogIHRoaXMuYmFkZ2VBc0ljb24gPyB0aGlzLmxldHRlci50b1VwcGVyQ2FzZSgpIDogYWJicmV2aWF0ZUNsdXN0ZXJOYW1lKHRoaXMucHJldmlld05hbWUpLAogICAgICAgIH0KICAgICAgfTsKICAgIH0sCgogICAgYXN5bmMgYXBwbHkoYnV0dG9uRG9uZSkgewogICAgICB0cnkgewogICAgICAgIC8vIElORk86IElmIHdlJ3JlIGVkaXRpbmcgYSBjbHVzdGVyLCB1cGRhdGUgdGhlIGNsdXN0ZXIgb2JqZWN0CiAgICAgICAgaWYgKCF0aGlzLmlzQ3JlYXRlICYmICF0aGlzLmNsdXN0ZXJFeHBsb3JlcikgewogICAgICAgICAgY29uc3Qgbm9ybWFuID0gYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3JhbmNoZXIvZmluZCcsIHsgdHlwZTogTk9STUFOLkNMVVNURVIsIGlkOiB0aGlzLmN1cnJlbnRDbHVzdGVyPy5pZCB9KTsKCiAgICAgICAgICBkZWxldGUgbm9ybWFuLmFubm90YXRpb25zW0NMVVNURVJfQkFER0UuQ09MT1JdOwogICAgICAgICAgZGVsZXRlIG5vcm1hbi5hbm5vdGF0aW9uc1tDTFVTVEVSX0JBREdFLklDT05fVEVYVF07CiAgICAgICAgICBkZWxldGUgbm9ybWFuLmFubm90YXRpb25zW0NMVVNURVJfQkFER0UuVEVYVF07CgogICAgICAgICAgdGhpcy4kc2V0KG5vcm1hbi5hbm5vdGF0aW9ucywgQ0xVU1RFUl9CQURHRS5DT0xPUiwgdGhpcy5iYWRnZUNvbG9yUGlja2VyID8gdGhpcy5iYWRnZUJnQ29sb3IgOiAndHJhbnNwYXJlbnQnKTsKICAgICAgICAgIHRoaXMuJHNldChub3JtYW4uYW5ub3RhdGlvbnMsIENMVVNURVJfQkFER0UuSUNPTl9URVhULCB0aGlzLmxldHRlci50b1VwcGVyQ2FzZSgpKTsKICAgICAgICAgIHRoaXMuJHNldChub3JtYW4uYW5ub3RhdGlvbnMsIENMVVNURVJfQkFER0UuVEVYVCwgdGhpcy5iYWRnZUNvbW1lbnQpOwoKICAgICAgICAgIGF3YWl0IG5vcm1hbi5zYXZlKCk7CgogICAgICAgICAgYnV0dG9uRG9uZSh0cnVlKTsKICAgICAgICAgIHRoaXMuY2xvc2UoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgLy8gSU5GTzogSWYgaXQncyBhIGNyZWF0ZSwgdXBkYXRlIHRoZSBwcmV2aWV3IGNsdXN0ZXIgb2JqZWN0IGluIHRoZSBzdG9yZS4KICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnY3VzdG9taXNhdGlvbi9zZXRQcmV2aWV3Q2x1c3RlcicsIHsgLi4udGhpcy5wcmV2aWV3Q2x1c3RlciB9KTsKCiAgICAgICAgICBidXR0b25Eb25lKHRydWUpOwogICAgICAgICAgdGhpcy5jbG9zZSgpOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgdGhpcy5lcnJvcnMgPSBleGNlcHRpb25Ub0Vycm9yc0FycmF5KGVycik7CiAgICAgICAgYnV0dG9uRG9uZShmYWxzZSk7CiAgICAgIH0KICAgIH0KICB9Cn07Cg=="},{"version":3,"sources":["AddCustomBadgeDialog.vue"],"names":[],"mappings":";AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AddCustomBadgeDialog.vue","sourceRoot":"node_modules/@rancher/shell/dialog","sourcesContent":["<script>\nimport { mapGetters } from 'vuex';\nimport { CLUSTER_BADGE } from '@shell/config/labels-annotations';\nimport AsyncButton from '@shell/components/AsyncButton';\nimport { Card } from '@components/Card';\nimport { Banner } from '@components/Banner';\nimport ClusterBadge from '@shell/components/ClusterBadge';\nimport ClusterProviderIcon from '@shell/components/ClusterProviderIcon';\nimport { exceptionToErrorsArray } from '@shell/utils/error';\nimport { Checkbox } from '@components/Form/Checkbox';\nimport { LabeledInput } from '@components/Form/LabeledInput';\nimport ColorInput from '@shell/components/form/ColorInput';\nimport { parseColor, textColor } from '@shell/utils/color';\nimport { NORMAN } from '@shell/config/types';\nimport { abbreviateClusterName } from '@shell/utils/cluster';\nimport { _CREATE, _EDIT } from '@shell/config/query-params';\nimport ClusterIconMenu from '@shell/components/ClusterIconMenu';\n\nexport default {\n  name:       'AddCustomBadgeDialog',\n  components: {\n    Card,\n    AsyncButton,\n    Banner,\n    Checkbox,\n    LabeledInput,\n    ColorInput,\n    ClusterBadge,\n    ClusterIconMenu,\n    ClusterProviderIcon,\n  },\n  props: {\n    isCreate:        { type: Boolean, default: false },\n    clusterName:     { type: String, default: '' },\n    mode:            { type: String, default: _CREATE },\n    clusterExplorer: {\n      type:    Object,\n      default: null\n    },\n  },\n  data() {\n    return {\n      useCustomComment: null,\n      errors:           [],\n      badgeBgColor:     '',\n      badgeComment:     '',\n      badgeAsIcon:      null,\n      badgeColorPicker: false,\n      letter:           '',\n      cluster:          {},\n    };\n  },\n  created() {\n    if (this.clusterExplorer) {\n      this.setBadgeProperties(this.clusterExplorer);\n    }\n\n    if (this.isCreate) {\n      this.setBadgeProperties(this.getPreviewCluster);\n    }\n  },\n\n  async fetch() {\n    // INFO: Do not fetch the cluster object if it's a create or cluster explorer since it won't exist\n    if (this.isCreate || this.clusterExplorer) {\n      return;\n    }\n    // INFO: Fetch the cluster object if it's an edit\n    await this.$store.dispatch('rancher/find', { type: NORMAN.CLUSTER, id: this.currentCluster?.id });\n\n    if (this.currentCluster.metadata?.annotations) {\n      this.badgeComment = this.currentCluster.metadata?.annotations[CLUSTER_BADGE.TEXT];\n      this.useCustomComment = this.badgeComment?.length > 0;\n      this.badgeBgColor = this.currentCluster.metadata?.annotations[CLUSTER_BADGE.COLOR] || 'transparent';\n      this.badgeAsIcon = !!this.currentCluster.metadata?.annotations[CLUSTER_BADGE.ICON_TEXT] || false;\n      this.badgeColorPicker = this.badgeBgColor !== 'transparent';\n      this.letter = this.currentCluster.metadata?.annotations[CLUSTER_BADGE.ICON_TEXT] || abbreviateClusterName(this.currentCluster.nameDisplay);\n    }\n  },\n  watch: {\n    // INFO: If the user has a custom comment, set the badge text\n    useCustomComment: {\n      handler(neu, old) {\n        if (neu !== old) {\n          this.badgeComment = neu ? this.badgeComment : '';\n        }\n      },\n      immediate: true,\n    },\n    badgeColorPicker: {\n      handler() {\n        this.badgeBgColor = this.badgeColorPicker ? this.badgeBgColor : 'transparent';\n      },\n      immediate: true,\n    },\n    badgeAsIcon: {\n      handler(neu, old) {\n        if (neu !== old) {\n          this.letter = neu ? this.letter : abbreviateClusterName(this.clusterName);\n        }\n      },\n      immediate: true,\n    },\n  },\n  computed: {\n    ...mapGetters(['currentCluster']),\n    ...mapGetters('customisation', ['getPreviewCluster']),\n    canSubmit() {\n      if (this.mode === _CREATE) {\n        return this.badgeAsIcon || this.useCustomComment;\n      }\n\n      if (this.mode === _EDIT) {\n        if (this.useCustomComment && this.badgeComment.length <= 0) {\n          return false;\n        }\n\n        if (this.badgeAsIcon && this.letter.length <= 0) {\n          return false;\n        }\n\n        return true;\n      }\n\n      return this.badgeAsIcon !== this.currentCluster.metadata?.annotations[CLUSTER_BADGE.ICON_TEXT] || this.useCustomComment !== !!this.currentCluster.metadata?.annotations[CLUSTER_BADGE.TEXT] || (this.badgeAsIcon && this.letter.length > 1);\n    },\n    // Fake cluster object for use with badge component\n    previewCluster() {\n      return this.isCreate || !this.currentCluster ? this.generateBadgeObject(false, '', true) : this.generateBadgeObject(this.currentCluster.isLocal, this.currentCluster.providerNavLogo, this.currentCluster.ready);\n    },\n\n    displayClusterPrevIcon() {\n      return !this.badgeAsIcon ? { ...this.previewCluster.badge, iconText: null } : this.previewCluster?.badge;\n    },\n\n    previewName() {\n      if (this.isCreate || this.clusterExplorer) {\n        return this.clusterName;\n      }\n\n      return this.currentCluster?.nameDisplay || '';\n    },\n  },\n  methods: {\n    close() {\n      this.$emit('close');\n    },\n\n    // INFO: Set the badge properties based on the cluster object\n    setBadgeProperties(cluster) {\n      this.cluster = cluster;\n      this.badgeAsIcon = this.cluster?.badge?.iconText?.length > 0 || false;\n      this.letter = this.cluster?.badge?.iconText || abbreviateClusterName(this.clusterName);\n      this.useCustomComment = this.cluster?.badge?.text?.length > 0 || false;\n      this.badgeBgColor = this.cluster?.badge?.color || 'transparent';\n      this.badgeComment = this.cluster?.badge?.text || null;\n      this.badgeColorPicker = this.badgeBgColor !== 'transparent';\n    },\n\n    // INFO: Generate a badge object for the preview cluster\n    generateBadgeObject(isLocal, providerNavLogo, ready) {\n      return {\n        isLocal,\n        providerNavLogo,\n        ready:              ready ?? true,\n        removePreviewColor: !this.badgeAsIcon,\n        badge:              {\n          text:      this.badgeComment,\n          color:     this.badgeBgColor,\n          textColor: textColor(parseColor(this.badgeBgColor)),\n          iconText:  this.badgeAsIcon ? this.letter.toUpperCase() : abbreviateClusterName(this.previewName),\n        }\n      };\n    },\n\n    async apply(buttonDone) {\n      try {\n        // INFO: If we're editing a cluster, update the cluster object\n        if (!this.isCreate && !this.clusterExplorer) {\n          const norman = await this.$store.dispatch('rancher/find', { type: NORMAN.CLUSTER, id: this.currentCluster?.id });\n\n          delete norman.annotations[CLUSTER_BADGE.COLOR];\n          delete norman.annotations[CLUSTER_BADGE.ICON_TEXT];\n          delete norman.annotations[CLUSTER_BADGE.TEXT];\n\n          this.$set(norman.annotations, CLUSTER_BADGE.COLOR, this.badgeColorPicker ? this.badgeBgColor : 'transparent');\n          this.$set(norman.annotations, CLUSTER_BADGE.ICON_TEXT, this.letter.toUpperCase());\n          this.$set(norman.annotations, CLUSTER_BADGE.TEXT, this.badgeComment);\n\n          await norman.save();\n\n          buttonDone(true);\n          this.close();\n        } else {\n          // INFO: If it's a create, update the preview cluster object in the store.\n          this.$store.commit('customisation/setPreviewCluster', { ...this.previewCluster });\n\n          buttonDone(true);\n          this.close();\n        }\n      } catch (err) {\n        this.errors = exceptionToErrorsArray(err);\n        buttonDone(false);\n      }\n    }\n  }\n};\n</script>\n\n<template>\n  <Card\n    class=\"prompt-badge\"\n    :show-highlight-border=\"false\"\n  >\n    <h4\n      slot=\"title\"\n      class=\"text-default-text\"\n    >\n      {{ t('clusterBadge.modal.title') }}\n    </h4>\n\n    <div\n      slot=\"body\"\n      class=\"cluster-badge-body\"\n    >\n      <div>{{ t('clusterBadge.modal.previewTitle') }}</div>\n      <div class=\"badge-preview\">\n        <div class=\"badge-preview-sidenav\">\n          <p> {{ t('clusterBadge.modal.previewSide') }}</p>\n\n          <div>\n            <ClusterIconMenu :cluster=\"previewCluster\" />\n            <span>{{ clusterName }}</span>\n          </div>\n        </div>\n        <span class=\"badge-preview-separator\" />\n        <div class=\"badge-preview-header\">\n          <p> {{ t('clusterBadge.modal.previewHeader') }}</p>\n          <div\n            class=\"col span-12\"\n          >\n            <ClusterProviderIcon\n              :cluster=\"{...previewCluster, badge: displayClusterPrevIcon}\"\n            />\n            <div class=\"cluster-name\">\n              {{ previewName }}\n            </div>\n            <ClusterBadge\n              v-if=\"useCustomComment\"\n              :cluster=\"previewCluster\"\n            />\n          </div>\n        </div>\n      </div>\n\n      <div class=\"badge-customisation\">\n        <!-- Badge abbreviation toggle & customisation -->\n        <div class=\"badge-customisation-badge\">\n          <Checkbox\n            v-model=\"badgeAsIcon\"\n            :label=\"t('clusterBadge.modal.badgeAsIcon')\"\n\n            :tooltip=\"t('clusterBadge.modal.maxCharsTooltip')\"\n          />\n\n          <LabeledInput\n            v-model.trim=\"letter\"\n            :disabled=\"!badgeAsIcon\"\n            class=\"badge-icon-text\"\n            :label=\"t('clusterBadge.modal.iconText')\"\n            :maxlength=\"3\"\n          />\n        </div>\n\n        <!-- Comment toggle & customisation section -->\n        <div>\n          <Checkbox\n            v-model=\"useCustomComment\"\n            :label=\"t('clusterBadge.modal.checkbox')\"\n          />\n\n          <LabeledInput\n            v-model.trim=\"badgeComment\"\n            :disabled=\"!useCustomComment\"\n            :label=\"t('clusterBadge.modal.comment')\"\n            :maxlength=\"32\"\n          />\n        </div>\n\n        <!-- Color toggle & customisation section -->\n        <div class=\"badge-customisation-color\">\n          <Checkbox\n            v-model=\"badgeColorPicker\"\n            :label=\"t('clusterBadge.modal.badgeBgColor')\"\n          />\n          <ColorInput\n            v-model=\"badgeBgColor\"\n            :disabled=\"!badgeColorPicker\"\n            :default-value=\"badgeBgColor\"\n          />\n        </div>\n      </div>\n    </div>\n\n    <div\n      slot=\"actions\"\n      class=\"bottom\"\n    >\n      <Banner\n        v-for=\"(err, i) in errors\"\n        :key=\"i\"\n        color=\"error\"\n        :label=\"err\"\n      />\n      <div class=\"buttons\">\n        <button\n          class=\"btn role-secondary mr-10\"\n          @click=\"close\"\n        >\n          {{ t('generic.cancel') }}\n        </button>\n        <AsyncButton\n          :action-label=\"t('clusterBadge.modal.buttonAction')\"\n          :disabled=\"!canSubmit\"\n          @click=\"apply\"\n        />\n      </div>\n    </div>\n  </Card>\n</template>\n<style lang='scss' scoped>\n.card-container {\n  padding: 1rem;\n}\n\n.badge-preview {\n  display: flex;\n  width: 100%;\n  gap: 40px;\n  padding: 10px 5px;\n  margin-bottom: 30px;\n  margin-top: 5px;\n  background: var(--body-bg);\n  border-radius: 5px;\n\n  p {\n    font-size: 11px;\n    font-weight: light;\n    padding: 5px 0;\n  }\n\n  &-sidenav {\n    display: flex;\n    flex-direction: column;\n\n    div {\n      display: flex;\n      gap: 10px;\n      align-items: center;\n    }\n  }\n\n  &-separator {\n    display: flex;\n    border-left: 1px solid var(--border);\n    width: 2px;\n    height: 30px;\n    align-self: end;\n  }\n\n   &-header {\n    display: flex;\n    flex-direction: column;\n\n    div {\n      display: flex;\n      min-height: 32px;\n      align-items: center;\n\n      .cluster-badge {\n        min-height: auto;\n      }\n    }\n  }\n}\n\n.prompt-badge {\n  margin: 0;\n\n  .cluster-badge-body {\n    min-height: 50px;\n    display: flex;\n    flex-direction: column;\n\n    .cluster-name {\n      margin: 0 10px;\n      font-size: 16px;\n    }\n\n    .cluster-badge-icon-preview {\n      width: 32px;\n      height: 32px;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      border-radius: 5px;\n      font-weight: bold;\n    }\n\n    .cluster-badge-preview {\n      cursor: default;\n      border-radius: 10px;\n      font-size: 12px;\n      padding: 2px 10px;\n    }\n\n    ::v-deep .badge-icon-text input {\n      text-transform: uppercase;\n    }\n  }\n}\n\n.badge-customisation {\n  display: flex;\n  gap: 10px;\n\n  div {\n    display: flex;\n    flex-direction: column;\n    flex: 1;\n    gap: 10px;\n\n    .color-input {\n      display: flex;\n      padding: 6px 10px;\n      min-height: 61px;\n    }\n  }\n\n  &-color {\n    display: flex;\n    flex-direction: column;\n    gap: 10px;\n  }\n}\n\n.bottom {\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n\n  .banner {\n    margin-top: 0;\n  }\n\n  .buttons {\n    display: flex;\n    justify-content: flex-end;\n    width: 100%;\n  }\n}\n</style>\n"]}]}