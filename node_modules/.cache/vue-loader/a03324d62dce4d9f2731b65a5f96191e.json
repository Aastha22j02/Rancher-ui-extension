{"remainingRequest":"/home/ubuntu/suseconf/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ubuntu/suseconf/node_modules/@rancher/shell/edit/fleet.cattle.io.gitrepo.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/ubuntu/suseconf/node_modules/@rancher/shell/edit/fleet.cattle.io.gitrepo.vue","mtime":1725338146566},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js","mtime":1725271298942},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1725271300920}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IHsgZXhjZXB0aW9uVG9FcnJvcnNBcnJheSB9IGZyb20gJ0BzaGVsbC91dGlscy9lcnJvcic7CmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICd2dWV4JzsKaW1wb3J0IHsKICBBVVRIX1RZUEUsIEZMRUVULCBOT1JNQU4sIFNFQ1JFVCwgVklSVFVBTF9IQVJWRVNURVJfUFJPVklERVIKfSBmcm9tICdAc2hlbGwvY29uZmlnL3R5cGVzJzsKaW1wb3J0IHsgc2V0IH0gZnJvbSAnQHNoZWxsL3V0aWxzL29iamVjdCc7CmltcG9ydCBBcnJheUxpc3QgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvZm9ybS9BcnJheUxpc3QnOwppbXBvcnQgeyBCYW5uZXIgfSBmcm9tICdAY29tcG9uZW50cy9CYW5uZXInOwppbXBvcnQgQ3JlYXRlRWRpdFZpZXcgZnJvbSAnQHNoZWxsL21peGlucy9jcmVhdGUtZWRpdC12aWV3JzsKaW1wb3J0IENydVJlc291cmNlIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL0NydVJlc291cmNlJzsKaW1wb3J0IElucHV0V2l0aFNlbGVjdCBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9mb3JtL0lucHV0V2l0aFNlbGVjdCc7CmltcG9ydCBqc3lhbWwgZnJvbSAnanMteWFtbCc7CmltcG9ydCB7IExhYmVsZWRJbnB1dCB9IGZyb20gJ0Bjb21wb25lbnRzL0Zvcm0vTGFiZWxlZElucHV0JzsKaW1wb3J0IExhYmVsZWRTZWxlY3QgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvZm9ybS9MYWJlbGVkU2VsZWN0JzsKaW1wb3J0IExhYmVscyBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9mb3JtL0xhYmVscyc7CmltcG9ydCBMb2FkaW5nIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL0xvYWRpbmcnOwppbXBvcnQgTmFtZU5zRGVzY3JpcHRpb24gZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvZm9ybS9OYW1lTnNEZXNjcmlwdGlvbic7CmltcG9ydCBZYW1sRWRpdG9yIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL1lhbWxFZGl0b3InOwppbXBvcnQgeyBiYXNlNjREZWNvZGUsIGJhc2U2NEVuY29kZSB9IGZyb20gJ0BzaGVsbC91dGlscy9jcnlwdG8nOwppbXBvcnQgU2VsZWN0T3JDcmVhdGVBdXRoU2VjcmV0IGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL2Zvcm0vU2VsZWN0T3JDcmVhdGVBdXRoU2VjcmV0JzsKaW1wb3J0IHsgX0NSRUFURSB9IGZyb20gJ0BzaGVsbC9jb25maWcvcXVlcnktcGFyYW1zJzsKaW1wb3J0IHsgaXNIYXJ2ZXN0ZXJDbHVzdGVyIH0gZnJvbSAnQHNoZWxsL3V0aWxzL2NsdXN0ZXInOwppbXBvcnQgeyBDQVBJLCBDQVRBTE9HLCBGTEVFVCBhcyBGTEVFVF9MQUJFTFMgfSBmcm9tICdAc2hlbGwvY29uZmlnL2xhYmVscy1hbm5vdGF0aW9ucyc7CmltcG9ydCB7IFNFQ1JFVF9UWVBFUyB9IGZyb20gJ0BzaGVsbC9jb25maWcvc2VjcmV0JzsKaW1wb3J0IHsgY2hlY2tTY2hlbWFzRm9yRmluZEFsbEhhc2ggfSBmcm9tICdAc2hlbGwvdXRpbHMvYXV0aCc7CmltcG9ydCBDaGVja2JveCBmcm9tICdAY29tcG9uZW50cy9Gb3JtL0NoZWNrYm94L0NoZWNrYm94LnZ1ZSc7Cgpjb25zdCBfVkVSSUZZID0gJ3ZlcmlmeSc7CmNvbnN0IF9TS0lQID0gJ3NraXAnOwpjb25zdCBfU1BFQ0lGWSA9ICdzcGVjaWZ5JzsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnQ3J1R2l0UmVwbycsCgogIGNvbXBvbmVudHM6IHsKICAgIENoZWNrYm94LAogICAgQXJyYXlMaXN0LAogICAgQmFubmVyLAogICAgQ3J1UmVzb3VyY2UsCiAgICBJbnB1dFdpdGhTZWxlY3QsCiAgICBMYWJlbHMsCiAgICBMYWJlbGVkSW5wdXQsCiAgICBMYWJlbGVkU2VsZWN0LAogICAgTG9hZGluZywKICAgIE5hbWVOc0Rlc2NyaXB0aW9uLAogICAgWWFtbEVkaXRvciwKICAgIFNlbGVjdE9yQ3JlYXRlQXV0aFNlY3JldCwKICB9LAoKICBtaXhpbnM6IFtDcmVhdGVFZGl0Vmlld10sCgogIGFzeW5jIGZldGNoKCkgewogICAgY29uc3QgaGFzaCA9IGF3YWl0IGNoZWNrU2NoZW1hc0ZvckZpbmRBbGxIYXNoKHsKICAgICAgYWxsQ2x1c3RlcnM6IHsKICAgICAgICBpblN0b3JlVHlwZTogJ21hbmFnZW1lbnQnLAogICAgICAgIHR5cGU6ICAgICAgICBGTEVFVC5DTFVTVEVSCiAgICAgIH0sCgogICAgICBhbGxDbHVzdGVyR3JvdXBzOiB7CiAgICAgICAgaW5TdG9yZVR5cGU6ICdtYW5hZ2VtZW50JywKICAgICAgICB0eXBlOiAgICAgICAgRkxFRVQuQ0xVU1RFUl9HUk9VUAogICAgICB9CiAgICB9LCB0aGlzLiRzdG9yZSk7CgogICAgdGhpcy5hbGxDbHVzdGVycyA9IGhhc2guYWxsQ2x1c3RlcnMgfHwgW107CiAgICB0aGlzLmFsbENsdXN0ZXJHcm91cHMgPSBoYXNoLmFsbENsdXN0ZXJHcm91cHMgfHwgW107CgogICAgbGV0IHRscyA9IF9WRVJJRlk7CgogICAgaWYgKCB0aGlzLnZhbHVlLnNwZWMuaW5zZWN1cmVTa2lwVExTVmVyaWZ5ICkgewogICAgICB0bHMgPSBfU0tJUDsKICAgIH0gZWxzZSBpZiAoIHRoaXMudmFsdWUuc3BlYy5jYUJ1bmRsZSApIHsKICAgICAgdHJ5IHsKICAgICAgICB0aGlzLmNhQnVuZGxlID0gYmFzZTY0RGVjb2RlKHRoaXMudmFsdWUuc3BlYy5jYUJ1bmRsZSk7CiAgICAgICAgdGxzID0gX1NQRUNJRlk7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAvLyBIbW0uLi4KICAgICAgfQogICAgfQoKICAgIHRoaXMudGxzTW9kZSA9IHRsczsKCiAgICBpZiAodGhpcy52YWx1ZS5zcGVjLmNvcnJlY3REcmlmdCA9PT0gdW5kZWZpbmVkKSB7CiAgICAgIFZ1ZS5zZXQodGhpcy52YWx1ZS5zcGVjLCAnY29ycmVjdERyaWZ0JywgeyBlbmFibGVkOiBmYWxzZSB9KTsKICAgIH0KCiAgICB0aGlzLnVwZGF0ZVRhcmdldHMoKTsKICB9LAoKICBkYXRhKCkgewogICAgY29uc3QgdGFyZ2V0SW5mbyA9IHRoaXMudmFsdWUudGFyZ2V0SW5mbzsKICAgIGNvbnN0IHRhcmdldENsdXN0ZXIgPSB0YXJnZXRJbmZvLmNsdXN0ZXI7CiAgICBjb25zdCB0YXJnZXRDbHVzdGVyR3JvdXAgPSB0YXJnZXRJbmZvLmNsdXN0ZXJHcm91cDsKICAgIGNvbnN0IHRhcmdldEFkdmFuY2VkID0gdGFyZ2V0SW5mby5hZHZhbmNlZDsKCiAgICBjb25zdCByZWYgPSAoIHRoaXMudmFsdWUuc3BlYz8ucmV2aXNpb24gPyAncmV2aXNpb24nIDogJ2JyYW5jaCcgKTsKICAgIGNvbnN0IHJlZlZhbHVlID0gdGhpcy52YWx1ZS5zcGVjPy5bcmVmXSB8fCAnJzsKCiAgICBsZXQgdGFyZ2V0TW9kZSA9IHRhcmdldEluZm8ubW9kZTsKCiAgICBpZiAoIHRoaXMucmVhbE1vZGUgPT09IF9DUkVBVEUgKSB7CiAgICAgIHRhcmdldE1vZGUgPSAnYWxsJzsKICAgIH0gZWxzZSBpZiAoIHRhcmdldE1vZGUgPT09ICdjbHVzdGVyJyApIHsKICAgICAgdGFyZ2V0TW9kZSA9IGBjbHVzdGVyOi8vJHsgdGFyZ2V0Q2x1c3RlciB9YDsKICAgIH0gZWxzZSBpZiAoIHRhcmdldE1vZGUgPT09ICdjbHVzdGVyR3JvdXAnICkgewogICAgICB0YXJnZXRNb2RlID0gYGdyb3VwOi8vJHsgdGFyZ2V0Q2x1c3Rlckdyb3VwIH1gOwogICAgfQoKICAgIGNvbnN0IHN0ZXBSZXBvSW5mbyA9IHsKICAgICAgbmFtZTogICAgICAgICAgICdzdGVwUmVwb0luZm8nLAogICAgICB0aXRsZTogICAgICAgICAgdGhpcy50KCdmbGVldC5naXRSZXBvLmFkZC5zdGVwcy5yZXBvSW5mby50aXRsZScpLAogICAgICBsYWJlbDogICAgICAgICAgdGhpcy50KCdmbGVldC5naXRSZXBvLmFkZC5zdGVwcy5yZXBvSW5mby5sYWJlbCcpLAogICAgICBzdWJ0ZXh0OiAgICAgICAgdGhpcy50KCdmbGVldC5naXRSZXBvLmFkZC5zdGVwcy5yZXBvSW5mby5zdWJ0ZXh0JyksCiAgICAgIGRlc2NyaXB0aW9uS2V5OiAnZmxlZXQuZ2l0UmVwby5hZGQuc3RlcHMucmVwb0luZm8uZGVzY3JpcHRpb24nLAogICAgICByZWFkeTogICAgICAgICAgZmFsc2UsCiAgICAgIHdlaWdodDogICAgICAgICAzMAogICAgfTsKCiAgICBjb25zdCBzdGVwVGFyZ2V0SW5mbyA9IHsKICAgICAgbmFtZTogICAgICAgICAgICdzdGVwVGFyZ2V0SW5mbycsCiAgICAgIHRpdGxlOiAgICAgICAgICB0aGlzLnQoJ2ZsZWV0LmdpdFJlcG8uYWRkLnN0ZXBzLnRhcmdldEluZm8udGl0bGUnKSwKICAgICAgbGFiZWw6ICAgICAgICAgIHRoaXMudCgnZmxlZXQuZ2l0UmVwby5hZGQuc3RlcHMudGFyZ2V0SW5mby5sYWJlbCcpLAogICAgICBzdWJ0ZXh0OiAgICAgICAgdGhpcy50KCdmbGVldC5naXRSZXBvLmFkZC5zdGVwcy50YXJnZXRJbmZvLnN1YnRleHQnKSwKICAgICAgZGVzY3JpcHRpb25LZXk6ICdmbGVldC5naXRSZXBvLnN0ZXBzLmFkZC50YXJnZXRJbmZvLmRlc2NyaXB0aW9uJywKICAgICAgcmVhZHk6ICAgICAgICAgIHRydWUsCiAgICAgIHdlaWdodDogICAgICAgICAzMAogICAgfTsKCiAgICBjb25zdCBhZGRSZXBvc2l0b3J5U3RlcHMgPSBbc3RlcFJlcG9JbmZvLCBzdGVwVGFyZ2V0SW5mb10uc29ydCgoYSwgYikgPT4gKGIud2VpZ2h0IHx8IDApIC0gKGEud2VpZ2h0IHx8IDApKTsKCiAgICByZXR1cm4gewogICAgICBhbGxDbHVzdGVyczogICAgICAgICAgICAgW10sCiAgICAgIGFsbENsdXN0ZXJHcm91cHM6ICAgICAgICBbXSwKICAgICAgYWxsV29ya3NwYWNlczogICAgICAgICAgIFtdLAogICAgICB0ZW1wQ2FjaGVkVmFsdWVzOiAgICAgICAge30sCiAgICAgIHVzZXJuYW1lOiAgICAgICAgICAgICAgICBudWxsLAogICAgICBwYXNzd29yZDogICAgICAgICAgICAgICAgbnVsbCwKICAgICAgcHVibGljS2V5OiAgICAgICAgICAgICAgIG51bGwsCiAgICAgIHByaXZhdGVLZXk6ICAgICAgICAgICAgICBudWxsLAogICAgICB0bHNNb2RlOiAgICAgICAgICAgICAgICAgbnVsbCwKICAgICAgY2FCdW5kbGU6ICAgICAgICAgICAgICAgIG51bGwsCiAgICAgIHRhcmdldEFkdmFuY2VkRXJyb3JzOiAgICBudWxsLAogICAgICBtYXRjaGluZ0NsdXN0ZXJzOiAgICAgICAgbnVsbCwKICAgICAgcmVmLAogICAgICByZWZWYWx1ZSwKICAgICAgdGFyZ2V0TW9kZSwKICAgICAgdGFyZ2V0Q2x1c3RlciwKICAgICAgdGFyZ2V0Q2x1c3Rlckdyb3VwLAogICAgICB0YXJnZXRBZHZhbmNlZCwKICAgICAgc3RlcFJlcG9JbmZvLAogICAgICBzdGVwVGFyZ2V0SW5mbywKICAgICAgYWRkUmVwb3NpdG9yeVN0ZXBzLAogICAgICBkaXNwbGF5SGVsbVJlcG9VUkxSZWdleDogZmFsc2UKICAgIH07CiAgfSwKCiAgY29tcHV0ZWQ6IHsKICAgIC4uLm1hcEdldHRlcnMoWyd3b3Jrc3BhY2UnXSksCgogICAgX1NQRUNJRlkoKSB7CiAgICAgIHJldHVybiBfU1BFQ0lGWTsKICAgIH0sCgogICAgaXNMb2NhbCgpIHsKICAgICAgcmV0dXJuIHRoaXMudmFsdWUubWV0YWRhdGEubmFtZXNwYWNlID09PSAnZmxlZXQtbG9jYWwnOwogICAgfSwKCiAgICBpc1RscygpIHsKICAgICAgcmV0dXJuICEodGhpcy52YWx1ZT8uc3BlYz8ucmVwbyB8fCAnJykuc3RhcnRzV2l0aCgnaHR0cDovLycpOwogICAgfSwKCiAgICB0YXJnZXRPcHRpb25zKCkgewogICAgICBjb25zdCBvdXQgPSBbCiAgICAgICAgewogICAgICAgICAgbGFiZWw6ICdObyBDbHVzdGVycycsCiAgICAgICAgICB2YWx1ZTogJ25vbmUnCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBsYWJlbDogJ0FsbCBDbHVzdGVycyBpbiB0aGUgV29ya3NwYWNlJywKICAgICAgICAgIHZhbHVlOiAnYWxsJywKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGxhYmVsOiAnQWR2YW5jZWQnLAogICAgICAgICAgdmFsdWU6ICdhZHZhbmNlZCcKICAgICAgICB9LAogICAgICBdOwoKICAgICAgY29uc3QgY2x1c3RlcnMgPSB0aGlzLmFsbENsdXN0ZXJzCiAgICAgICAgLmZpbHRlcigoeCkgPT4gewogICAgICAgICAgcmV0dXJuIHgubWV0YWRhdGEubmFtZXNwYWNlID09PSB0aGlzLnZhbHVlLm1ldGFkYXRhLm5hbWVzcGFjZTsKICAgICAgICB9KQogICAgICAgIC5maWx0ZXIoKHgpID0+ICFpc0hhcnZlc3RlckNsdXN0ZXIoeCkpCiAgICAgICAgLm1hcCgoeCkgPT4gewogICAgICAgICAgcmV0dXJuIHsgbGFiZWw6IHgubmFtZURpc3BsYXksIHZhbHVlOiBgY2x1c3RlcjovLyR7IHgubWV0YWRhdGEubmFtZSB9YCB9OwogICAgICAgIH0pOwoKICAgICAgaWYgKCBjbHVzdGVycy5sZW5ndGggKSB7CiAgICAgICAgb3V0LnB1c2goeyBraW5kOiAnZGl2aWRlcicsIGRpc2FibGVkOiB0cnVlIH0pOwogICAgICAgIG91dC5wdXNoKHsKICAgICAgICAgIGtpbmQ6ICAgICAndGl0bGUnLAogICAgICAgICAgbGFiZWw6ICAgICdDbHVzdGVycycsCiAgICAgICAgICBkaXNhYmxlZDogdHJ1ZSwKICAgICAgICB9KTsKCiAgICAgICAgb3V0LnB1c2goLi4uY2x1c3RlcnMpOwogICAgICB9CgogICAgICBjb25zdCBncm91cHMgPSB0aGlzLmFsbENsdXN0ZXJHcm91cHMKICAgICAgICAuZmlsdGVyKCh4KSA9PiB4Lm1ldGFkYXRhLm5hbWVzcGFjZSA9PT0gdGhpcy52YWx1ZS5tZXRhZGF0YS5uYW1lc3BhY2UpCiAgICAgICAgLm1hcCgoeCkgPT4gewogICAgICAgICAgcmV0dXJuIHsgbGFiZWw6IHgubmFtZURpc3BsYXksIHZhbHVlOiBgZ3JvdXA6Ly8keyB4Lm1ldGFkYXRhLm5hbWUgfWAgfTsKICAgICAgICB9KTsKCiAgICAgIGlmICggZ3JvdXBzLmxlbmd0aCApIHsKICAgICAgICBvdXQucHVzaCh7IGtpbmQ6ICdkaXZpZGVyJywgZGlzYWJsZWQ6IHRydWUgfSk7CiAgICAgICAgb3V0LnB1c2goewogICAgICAgICAga2luZDogICAgICd0aXRsZScsCiAgICAgICAgICBsYWJlbDogICAgJ0NsdXN0ZXIgR3JvdXBzJywKICAgICAgICAgIGRpc2FibGVkOiB0cnVlCiAgICAgICAgfSk7CgogICAgICAgIG91dC5wdXNoKC4uLmdyb3Vwcyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBvdXQ7CiAgICB9LAoKICAgIGNsdXN0ZXJOYW1lcygpIHsKICAgICAgY29uc3Qgb3V0ID0gdGhpcy5hbGxDbHVzdGVycwogICAgICAgIC5maWx0ZXIoKHgpID0+IHgubWV0YWRhdGEubmFtZXNwYWNlID09PSB0aGlzLnZhbHVlLm1ldGFkYXRhLm5hbWVzcGFjZSkKICAgICAgICAubWFwKCh4KSA9PiB4Lm1ldGFkYXRhLm5hbWUpOwoKICAgICAgcmV0dXJuIG91dDsKICAgIH0sCgogICAgY2x1c3Rlckdyb3VwTmFtZXMoKSB7CiAgICAgIGNvbnN0IG91dCA9IHRoaXMuYWxsQ2x1c3Rlckdyb3VwcwogICAgICAgIC5maWx0ZXIoKHgpID0+IHgubWV0YWRhdGEubmFtZXNwYWNlID09PSB0aGlzLnZhbHVlLm1ldGFkYXRhLm5hbWVzcGFjZSkKICAgICAgICAubWFwKCh4KSA9PiB4Lm1ldGFkYXRhLm5hbWUpOwoKICAgICAgcmV0dXJuIG91dDsKICAgIH0sCgogICAgdGxzT3B0aW9ucygpIHsKICAgICAgcmV0dXJuIFsKICAgICAgICB7IGxhYmVsOiB0aGlzLnQoJ2ZsZWV0LmdpdFJlcG8udGxzLnZlcmlmeScpLCB2YWx1ZTogX1ZFUklGWSB9LAogICAgICAgIHsgbGFiZWw6IHRoaXMudCgnZmxlZXQuZ2l0UmVwby50bHMuc3BlY2lmeScpLCB2YWx1ZTogX1NQRUNJRlkgfSwKICAgICAgICB7IGxhYmVsOiB0aGlzLnQoJ2ZsZWV0LmdpdFJlcG8udGxzLnNraXAnKSwgdmFsdWU6IF9TS0lQIH0sCiAgICAgIF07CiAgICB9LAoKICAgIHN0ZXBPbmVSZXF1aXJlcygpIHsKICAgICAgcmV0dXJuICEhdGhpcy52YWx1ZS5tZXRhZGF0YS5uYW1lICYmICEhdGhpcy5yZWZWYWx1ZTsKICAgIH0sCiAgfSwKCiAgd2F0Y2g6IHsKICAgICd2YWx1ZS5tZXRhZGF0YS5uYW1lc3BhY2UnOiAndXBkYXRlVGFyZ2V0cycsCiAgICB0YXJnZXRNb2RlOiAgICAgICAgICAgICAgICAgJ3VwZGF0ZVRhcmdldHMnLAogICAgdGFyZ2V0Q2x1c3RlcjogICAgICAgICAgICAgICd1cGRhdGVUYXJnZXRzJywKICAgIHRhcmdldENsdXN0ZXJHcm91cDogICAgICAgICAndXBkYXRlVGFyZ2V0cycsCiAgICB0YXJnZXRBZHZhbmNlZDogICAgICAgICAgICAgJ3VwZGF0ZVRhcmdldHMnLAogICAgdGxzTW9kZTogICAgICAgICAgICAgICAgICAgICd1cGRhdGVUbHMnLAogICAgY2FCdW5kbGU6ICAgICAgICAgICAgICAgICAgICd1cGRhdGVUbHMnLAoKICAgIHdvcmtzcGFjZShuZXUpIHsKICAgICAgaWYgKCB0aGlzLmlzQ3JlYXRlICkgewogICAgICAgIHNldCh0aGlzLnZhbHVlLCAnbWV0YWRhdGEubmFtZXNwYWNlJywgbmV1KTsKICAgICAgfQogICAgfSwKICB9LAoKICBjcmVhdGVkKCkgewogICAgdGhpcy5yZWdpc3RlckJlZm9yZUhvb2sodGhpcy5jbGVhblRMUywgJ2NsZWFuVExTJyk7CiAgICB0aGlzLnJlZ2lzdGVyQmVmb3JlSG9vayh0aGlzLmRvQ3JlYXRlU2VjcmV0cywgYHJlZ2lzdGVyQXV0aFNlY3JldHMkeyBuZXcgRGF0ZSgpLmdldFRpbWUoKSB9YCwgOTkpOwogIH0sCgogIG1ldGhvZHM6IHsKICAgIHNldCwKCiAgICBjbGVhblRMUygpIHsKICAgICAgaWYgKCF0aGlzLmlzVGxzKSB7CiAgICAgICAgZGVsZXRlIHRoaXMudmFsdWUuc3BlYy5pbnNlY3VyZVNraXBUTFNWZXJpZnk7CiAgICAgICAgZGVsZXRlIHRoaXMudmFsdWUuc3BlYy5jYUJ1bmRsZTsKICAgICAgfQogICAgfSwKCiAgICB1cGRhdGVDYWNoZWRBdXRoVmFsKHZhbCwga2V5KSB7CiAgICAgIHRoaXMudGVtcENhY2hlZFZhbHVlc1trZXldID0gdHlwZW9mIHZhbCA9PT0gJ3N0cmluZycgPyB7IHNlbGVjdGVkOiB2YWwgfSA6IHsgLi4udmFsIH07CgogICAgICBpZiAoa2V5ID09PSAnaGVsbVNlY3JldE5hbWUnKSB7CiAgICAgICAgdGhpcy50b2dnbGVIZWxtUmVwb1VSTFJlZ2V4KHZhbCAmJiB2YWwuc2VsZWN0ZWQgIT09IEFVVEhfVFlQRS5fTk9ORSk7CiAgICAgIH0KICAgIH0sCgogICAgdXBkYXRlQXV0aCh2YWwsIGtleSkgewogICAgICBjb25zdCBzcGVjID0gdGhpcy52YWx1ZS5zcGVjOwoKICAgICAgaWYgKCB2YWwgKSB7CiAgICAgICAgc3BlY1trZXldID0gdmFsOwogICAgICB9IGVsc2UgewogICAgICAgIGRlbGV0ZSBzcGVjW2tleV07CiAgICAgIH0KCiAgICAgIHRoaXMudXBkYXRlQ2FjaGVkQXV0aFZhbCh2YWwsIGtleSk7CiAgICB9LAoKICAgIHRvZ2dsZUhlbG1SZXBvVVJMUmVnZXgoYWN0aXZlKSB7CiAgICAgIHRoaXMuZGlzcGxheUhlbG1SZXBvVVJMUmVnZXggPSBhY3RpdmU7CgogICAgICBpZiAoIWFjdGl2ZSkgewogICAgICAgIGRlbGV0ZSB0aGlzLnZhbHVlLnNwZWM/LmhlbG1SZXBvVVJMUmVnZXg7CiAgICAgIH0KICAgIH0sCgogICAgdXBkYXRlVGFyZ2V0cygpIHsKICAgICAgY29uc3Qgc3BlYyA9IHRoaXMudmFsdWUuc3BlYzsKICAgICAgY29uc3QgbW9kZSA9IHRoaXMudGFyZ2V0TW9kZTsKCiAgICAgIGxldCBraW5kLCB2YWx1ZTsKICAgICAgY29uc3QgbWF0Y2ggPSBtb2RlLm1hdGNoKC8oW146XSspKDpcL1wvKC4qKSk/JC8pOwoKICAgICAgaWYgKCBtYXRjaCApIHsKICAgICAgICBraW5kID0gbWF0Y2hbMV07CiAgICAgICAgdmFsdWUgPSBtYXRjaFszXTsKICAgICAgfQoKICAgICAgaWYgKCBraW5kID09PSAnYWxsJyApIHsKICAgICAgICBzcGVjLnRhcmdldHMgPSBbewogICAgICAgICAgY2x1c3RlclNlbGVjdG9yOiB7CiAgICAgICAgICAgIG1hdGNoRXhwcmVzc2lvbnM6IFt7CiAgICAgICAgICAgICAga2V5OiAgICAgIENBUEkuUFJPVklERVIsCiAgICAgICAgICAgICAgb3BlcmF0b3I6ICdOb3RJbicsCiAgICAgICAgICAgICAgdmFsdWVzOiAgIFsKICAgICAgICAgICAgICAgIFZJUlRVQUxfSEFSVkVTVEVSX1BST1ZJREVSCiAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgfV0sCiAgICAgICAgICB9LAogICAgICAgIH1dOwogICAgICB9IGVsc2UgaWYgKCBraW5kID09PSAnbm9uZScgKSB7CiAgICAgICAgc3BlYy50YXJnZXRzID0gW107CiAgICAgIH0gZWxzZSBpZiAoIGtpbmQgPT09ICdjbHVzdGVyJyApIHsKICAgICAgICBzcGVjLnRhcmdldHMgPSBbCiAgICAgICAgICB7IGNsdXN0ZXJOYW1lOiB2YWx1ZSB9LAogICAgICAgIF07CiAgICAgIH0gZWxzZSBpZiAoIGtpbmQgPT09ICdncm91cCcgKSB7CiAgICAgICAgc3BlYy50YXJnZXRzID0gWwogICAgICAgICAgeyBjbHVzdGVyR3JvdXA6IHZhbHVlIH0KICAgICAgICBdOwogICAgICB9IGVsc2UgaWYgKCBraW5kID09PSAnYWR2YW5jZWQnICkgewogICAgICAgIHRyeSB7CiAgICAgICAgICBjb25zdCBwYXJzZWQgPSBqc3lhbWwubG9hZCh0aGlzLnRhcmdldEFkdmFuY2VkKTsKCiAgICAgICAgICBzcGVjLnRhcmdldHMgPSBwYXJzZWQ7CiAgICAgICAgICB0aGlzLnRhcmdldEFkdmFuY2VkRXJyb3JzID0gbnVsbDsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICB0aGlzLnRhcmdldEFkdmFuY2VkRXJyb3JzID0gZXhjZXB0aW9uVG9FcnJvcnNBcnJheShlKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgc3BlYy50YXJnZXRzID0gW107CiAgICAgIH0KCiAgICAgIHRoaXMuc3RlcE9uZVJlYWR5KCk7CiAgICB9LAoKICAgIGNoYW5nZVJlZih7IHRleHQsIHNlbGVjdGVkIH0pIHsKICAgICAgdGhpcy5yZWYgPSBzZWxlY3RlZDsKICAgICAgdGhpcy5yZWZWYWx1ZSA9IHRleHQ7CiAgICAgIGNvbnN0IHNwZWMgPSB0aGlzLnZhbHVlLnNwZWM7CgogICAgICBpZiAoIHNlbGVjdGVkID09PSAnYnJhbmNoJyApIHsKICAgICAgICBzcGVjLmJyYW5jaCA9IHRleHQ7CiAgICAgICAgZGVsZXRlIHNwZWMucmV2aXNpb247CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZGVsZXRlIHNwZWMuYnJhbmNoOwogICAgICAgIHNwZWMucmV2aXNpb24gPSB0ZXh0OwogICAgICB9CgogICAgICB0aGlzLnN0ZXBPbmVSZWFkeSgpOwogICAgfSwKCiAgICBhc3luYyBkb0NyZWF0ZVNlY3JldHMoKSB7CiAgICAgIGlmICh0aGlzLnRlbXBDYWNoZWRWYWx1ZXMuY2xpZW50U2VjcmV0TmFtZSkgewogICAgICAgIGF3YWl0IHRoaXMuZG9DcmVhdGUoJ2NsaWVudFNlY3JldE5hbWUnLCB0aGlzLnRlbXBDYWNoZWRWYWx1ZXMuY2xpZW50U2VjcmV0TmFtZSk7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLnRlbXBDYWNoZWRWYWx1ZXMuaGVsbVNlY3JldE5hbWUpIHsKICAgICAgICBhd2FpdCB0aGlzLmRvQ3JlYXRlKCdoZWxtU2VjcmV0TmFtZScsIHRoaXMudGVtcENhY2hlZFZhbHVlcy5oZWxtU2VjcmV0TmFtZSk7CiAgICAgIH0KICAgIH0sCgogICAgYXN5bmMgZG9DcmVhdGUobmFtZSwgY3JlZGVudGlhbHMpIHsKICAgICAgY29uc3QgeyBzZWxlY3RlZCwgcHVibGljS2V5LCBwcml2YXRlS2V5IH0gPSBjcmVkZW50aWFsczsKCiAgICAgIGlmICggIVtBVVRIX1RZUEUuX1NTSCwgQVVUSF9UWVBFLl9CQVNJQywgQVVUSF9UWVBFLl9TM10uaW5jbHVkZXMoc2VsZWN0ZWQpICkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgbGV0IHNlY3JldDsKCiAgICAgIGlmICggc2VsZWN0ZWQgPT09IEFVVEhfVFlQRS5fUzMgKSB7CiAgICAgICAgc2VjcmV0ID0gYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goYHJhbmNoZXIvY3JlYXRlYCwgewogICAgICAgICAgdHlwZTogICAgICAgICAgICAgICBOT1JNQU4uQ0xPVURfQ1JFREVOVElBTCwKICAgICAgICAgIHMzY3JlZGVudGlhbENvbmZpZzogewogICAgICAgICAgICBhY2Nlc3NLZXk6IHB1YmxpY0tleSwKICAgICAgICAgICAgc2VjcmV0S2V5OiBwcml2YXRlS2V5LAogICAgICAgICAgfSwKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBzZWNyZXQgPSBhd2FpdCB0aGlzLiRzdG9yZS5kaXNwYXRjaChgJHsgQ0FUQUxPRy5fTUFOQUdFTUVOVCB9L2NyZWF0ZWAsIHsKICAgICAgICAgIHR5cGU6ICAgICBTRUNSRVQsCiAgICAgICAgICBtZXRhZGF0YTogewogICAgICAgICAgICBuYW1lc3BhY2U6ICAgIHRoaXMudmFsdWUubWV0YWRhdGEubmFtZXNwYWNlLAogICAgICAgICAgICBnZW5lcmF0ZU5hbWU6ICdhdXRoLScsCiAgICAgICAgICAgIGxhYmVsczogICAgICAgeyBbRkxFRVRfTEFCRUxTLk1BTkFHRURdOiAndHJ1ZScgfQogICAgICAgICAgfQogICAgICAgIH0pOwoKICAgICAgICBsZXQgdHlwZSwgcHVibGljRmllbGQsIHByaXZhdGVGaWVsZDsKCiAgICAgICAgc3dpdGNoICggc2VsZWN0ZWQgKSB7CiAgICAgICAgY2FzZSBBVVRIX1RZUEUuX1NTSDoKICAgICAgICAgIHR5cGUgPSBTRUNSRVRfVFlQRVMuU1NIOwogICAgICAgICAgcHVibGljRmllbGQgPSAnc3NoLXB1YmxpY2tleSc7CiAgICAgICAgICBwcml2YXRlRmllbGQgPSAnc3NoLXByaXZhdGVrZXknOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSBBVVRIX1RZUEUuX0JBU0lDOgogICAgICAgICAgdHlwZSA9IFNFQ1JFVF9UWVBFUy5CQVNJQzsKICAgICAgICAgIHB1YmxpY0ZpZWxkID0gJ3VzZXJuYW1lJzsKICAgICAgICAgIHByaXZhdGVGaWVsZCA9ICdwYXNzd29yZCc7CiAgICAgICAgICBicmVhazsKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbmtub3duIHR5cGUnKTsKICAgICAgICB9CgogICAgICAgIHNlY3JldC5fdHlwZSA9IHR5cGU7CiAgICAgICAgc2VjcmV0LmRhdGEgPSB7CiAgICAgICAgICBbcHVibGljRmllbGRdOiAgYmFzZTY0RW5jb2RlKHB1YmxpY0tleSksCiAgICAgICAgICBbcHJpdmF0ZUZpZWxkXTogYmFzZTY0RW5jb2RlKHByaXZhdGVLZXkpLAogICAgICAgIH07CiAgICAgIH0KCiAgICAgIGF3YWl0IHNlY3JldC5zYXZlKCk7CgogICAgICBhd2FpdCB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgdGhpcy51cGRhdGVBdXRoKHNlY3JldC5tZXRhZGF0YS5uYW1lLCBuYW1lKTsKICAgICAgfSk7CgogICAgICByZXR1cm4gc2VjcmV0OwogICAgfSwKCiAgICB1cGRhdGVUbHNNb2RlKGV2ZW50KSB7CiAgICAgIHRoaXMudGxzTW9kZSA9IGV2ZW50OwogICAgfSwKCiAgICBvblVwZGF0ZVJlcG9OYW1lKCkgewogICAgICB0aGlzLnN0ZXBPbmVSZWFkeSgpOwogICAgfSwKCiAgICBzdGVwT25lUmVhZHkoKSB7CiAgICAgIHRoaXMuJHNldCh0aGlzLmFkZFJlcG9zaXRvcnlTdGVwc1swXSwgJ3JlYWR5JywgdGhpcy5zdGVwT25lUmVxdWlyZXMpOwogICAgfSwKCiAgICB1cGRhdGVUbHMoKSB7CiAgICAgIGNvbnN0IHNwZWMgPSB0aGlzLnZhbHVlLnNwZWM7CgogICAgICBpZiAoIHRoaXMudGxzTW9kZSA9PT0gX1NQRUNJRlkgKSB7CiAgICAgICAgc3BlYy5pbnNlY3VyZVNraXBUTFNWZXJpZnkgPSBmYWxzZTsKICAgICAgICBjb25zdCBjYUJ1bmRsZSA9ICh0aGlzLmNhQnVuZGxlIHx8ICcnKS50cmltKCk7CgogICAgICAgIGlmICggY2FCdW5kbGUgKSB7CiAgICAgICAgICBzcGVjLmNhQnVuZGxlID0gYmFzZTY0RW5jb2RlKGAkeyBjYUJ1bmRsZSB9XG5gKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgZGVsZXRlIHNwZWMuY2FCdW5kbGU7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGlmICggdGhpcy50bHNNb2RlID09PSBfU0tJUCApIHsKICAgICAgICAgIHNwZWMuaW5zZWN1cmVTa2lwVExTVmVyaWZ5ID0gdHJ1ZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgc3BlYy5pbnNlY3VyZVNraXBUTFNWZXJpZnkgPSBmYWxzZTsKICAgICAgICB9CgogICAgICAgIGlmICggdGhpcy5saXZlVmFsdWUuY2FCdW5kbGUgKSB7CiAgICAgICAgICBzcGVjLmNhQnVuZGxlID0gdGhpcy5saXZlVmFsdWUuY2FCdW5kbGU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGRlbGV0ZSBzcGVjLmNhQnVuZGxlOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICB9Cn07Cg=="},{"version":3,"sources":["fleet.cattle.io.gitrepo.vue"],"names":[],"mappings":";AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"fleet.cattle.io.gitrepo.vue","sourceRoot":"node_modules/@rancher/shell/edit","sourcesContent":["<script>\nimport Vue from 'vue';\nimport { exceptionToErrorsArray } from '@shell/utils/error';\nimport { mapGetters } from 'vuex';\nimport {\n  AUTH_TYPE, FLEET, NORMAN, SECRET, VIRTUAL_HARVESTER_PROVIDER\n} from '@shell/config/types';\nimport { set } from '@shell/utils/object';\nimport ArrayList from '@shell/components/form/ArrayList';\nimport { Banner } from '@components/Banner';\nimport CreateEditView from '@shell/mixins/create-edit-view';\nimport CruResource from '@shell/components/CruResource';\nimport InputWithSelect from '@shell/components/form/InputWithSelect';\nimport jsyaml from 'js-yaml';\nimport { LabeledInput } from '@components/Form/LabeledInput';\nimport LabeledSelect from '@shell/components/form/LabeledSelect';\nimport Labels from '@shell/components/form/Labels';\nimport Loading from '@shell/components/Loading';\nimport NameNsDescription from '@shell/components/form/NameNsDescription';\nimport YamlEditor from '@shell/components/YamlEditor';\nimport { base64Decode, base64Encode } from '@shell/utils/crypto';\nimport SelectOrCreateAuthSecret from '@shell/components/form/SelectOrCreateAuthSecret';\nimport { _CREATE } from '@shell/config/query-params';\nimport { isHarvesterCluster } from '@shell/utils/cluster';\nimport { CAPI, CATALOG, FLEET as FLEET_LABELS } from '@shell/config/labels-annotations';\nimport { SECRET_TYPES } from '@shell/config/secret';\nimport { checkSchemasForFindAllHash } from '@shell/utils/auth';\nimport Checkbox from '@components/Form/Checkbox/Checkbox.vue';\n\nconst _VERIFY = 'verify';\nconst _SKIP = 'skip';\nconst _SPECIFY = 'specify';\n\nexport default {\n  name: 'CruGitRepo',\n\n  components: {\n    Checkbox,\n    ArrayList,\n    Banner,\n    CruResource,\n    InputWithSelect,\n    Labels,\n    LabeledInput,\n    LabeledSelect,\n    Loading,\n    NameNsDescription,\n    YamlEditor,\n    SelectOrCreateAuthSecret,\n  },\n\n  mixins: [CreateEditView],\n\n  async fetch() {\n    const hash = await checkSchemasForFindAllHash({\n      allClusters: {\n        inStoreType: 'management',\n        type:        FLEET.CLUSTER\n      },\n\n      allClusterGroups: {\n        inStoreType: 'management',\n        type:        FLEET.CLUSTER_GROUP\n      }\n    }, this.$store);\n\n    this.allClusters = hash.allClusters || [];\n    this.allClusterGroups = hash.allClusterGroups || [];\n\n    let tls = _VERIFY;\n\n    if ( this.value.spec.insecureSkipTLSVerify ) {\n      tls = _SKIP;\n    } else if ( this.value.spec.caBundle ) {\n      try {\n        this.caBundle = base64Decode(this.value.spec.caBundle);\n        tls = _SPECIFY;\n      } catch (e) {\n        // Hmm...\n      }\n    }\n\n    this.tlsMode = tls;\n\n    if (this.value.spec.correctDrift === undefined) {\n      Vue.set(this.value.spec, 'correctDrift', { enabled: false });\n    }\n\n    this.updateTargets();\n  },\n\n  data() {\n    const targetInfo = this.value.targetInfo;\n    const targetCluster = targetInfo.cluster;\n    const targetClusterGroup = targetInfo.clusterGroup;\n    const targetAdvanced = targetInfo.advanced;\n\n    const ref = ( this.value.spec?.revision ? 'revision' : 'branch' );\n    const refValue = this.value.spec?.[ref] || '';\n\n    let targetMode = targetInfo.mode;\n\n    if ( this.realMode === _CREATE ) {\n      targetMode = 'all';\n    } else if ( targetMode === 'cluster' ) {\n      targetMode = `cluster://${ targetCluster }`;\n    } else if ( targetMode === 'clusterGroup' ) {\n      targetMode = `group://${ targetClusterGroup }`;\n    }\n\n    const stepRepoInfo = {\n      name:           'stepRepoInfo',\n      title:          this.t('fleet.gitRepo.add.steps.repoInfo.title'),\n      label:          this.t('fleet.gitRepo.add.steps.repoInfo.label'),\n      subtext:        this.t('fleet.gitRepo.add.steps.repoInfo.subtext'),\n      descriptionKey: 'fleet.gitRepo.add.steps.repoInfo.description',\n      ready:          false,\n      weight:         30\n    };\n\n    const stepTargetInfo = {\n      name:           'stepTargetInfo',\n      title:          this.t('fleet.gitRepo.add.steps.targetInfo.title'),\n      label:          this.t('fleet.gitRepo.add.steps.targetInfo.label'),\n      subtext:        this.t('fleet.gitRepo.add.steps.targetInfo.subtext'),\n      descriptionKey: 'fleet.gitRepo.steps.add.targetInfo.description',\n      ready:          true,\n      weight:         30\n    };\n\n    const addRepositorySteps = [stepRepoInfo, stepTargetInfo].sort((a, b) => (b.weight || 0) - (a.weight || 0));\n\n    return {\n      allClusters:             [],\n      allClusterGroups:        [],\n      allWorkspaces:           [],\n      tempCachedValues:        {},\n      username:                null,\n      password:                null,\n      publicKey:               null,\n      privateKey:              null,\n      tlsMode:                 null,\n      caBundle:                null,\n      targetAdvancedErrors:    null,\n      matchingClusters:        null,\n      ref,\n      refValue,\n      targetMode,\n      targetCluster,\n      targetClusterGroup,\n      targetAdvanced,\n      stepRepoInfo,\n      stepTargetInfo,\n      addRepositorySteps,\n      displayHelmRepoURLRegex: false\n    };\n  },\n\n  computed: {\n    ...mapGetters(['workspace']),\n\n    _SPECIFY() {\n      return _SPECIFY;\n    },\n\n    isLocal() {\n      return this.value.metadata.namespace === 'fleet-local';\n    },\n\n    isTls() {\n      return !(this.value?.spec?.repo || '').startsWith('http://');\n    },\n\n    targetOptions() {\n      const out = [\n        {\n          label: 'No Clusters',\n          value: 'none'\n        },\n        {\n          label: 'All Clusters in the Workspace',\n          value: 'all',\n        },\n        {\n          label: 'Advanced',\n          value: 'advanced'\n        },\n      ];\n\n      const clusters = this.allClusters\n        .filter((x) => {\n          return x.metadata.namespace === this.value.metadata.namespace;\n        })\n        .filter((x) => !isHarvesterCluster(x))\n        .map((x) => {\n          return { label: x.nameDisplay, value: `cluster://${ x.metadata.name }` };\n        });\n\n      if ( clusters.length ) {\n        out.push({ kind: 'divider', disabled: true });\n        out.push({\n          kind:     'title',\n          label:    'Clusters',\n          disabled: true,\n        });\n\n        out.push(...clusters);\n      }\n\n      const groups = this.allClusterGroups\n        .filter((x) => x.metadata.namespace === this.value.metadata.namespace)\n        .map((x) => {\n          return { label: x.nameDisplay, value: `group://${ x.metadata.name }` };\n        });\n\n      if ( groups.length ) {\n        out.push({ kind: 'divider', disabled: true });\n        out.push({\n          kind:     'title',\n          label:    'Cluster Groups',\n          disabled: true\n        });\n\n        out.push(...groups);\n      }\n\n      return out;\n    },\n\n    clusterNames() {\n      const out = this.allClusters\n        .filter((x) => x.metadata.namespace === this.value.metadata.namespace)\n        .map((x) => x.metadata.name);\n\n      return out;\n    },\n\n    clusterGroupNames() {\n      const out = this.allClusterGroups\n        .filter((x) => x.metadata.namespace === this.value.metadata.namespace)\n        .map((x) => x.metadata.name);\n\n      return out;\n    },\n\n    tlsOptions() {\n      return [\n        { label: this.t('fleet.gitRepo.tls.verify'), value: _VERIFY },\n        { label: this.t('fleet.gitRepo.tls.specify'), value: _SPECIFY },\n        { label: this.t('fleet.gitRepo.tls.skip'), value: _SKIP },\n      ];\n    },\n\n    stepOneRequires() {\n      return !!this.value.metadata.name && !!this.refValue;\n    },\n  },\n\n  watch: {\n    'value.metadata.namespace': 'updateTargets',\n    targetMode:                 'updateTargets',\n    targetCluster:              'updateTargets',\n    targetClusterGroup:         'updateTargets',\n    targetAdvanced:             'updateTargets',\n    tlsMode:                    'updateTls',\n    caBundle:                   'updateTls',\n\n    workspace(neu) {\n      if ( this.isCreate ) {\n        set(this.value, 'metadata.namespace', neu);\n      }\n    },\n  },\n\n  created() {\n    this.registerBeforeHook(this.cleanTLS, 'cleanTLS');\n    this.registerBeforeHook(this.doCreateSecrets, `registerAuthSecrets${ new Date().getTime() }`, 99);\n  },\n\n  methods: {\n    set,\n\n    cleanTLS() {\n      if (!this.isTls) {\n        delete this.value.spec.insecureSkipTLSVerify;\n        delete this.value.spec.caBundle;\n      }\n    },\n\n    updateCachedAuthVal(val, key) {\n      this.tempCachedValues[key] = typeof val === 'string' ? { selected: val } : { ...val };\n\n      if (key === 'helmSecretName') {\n        this.toggleHelmRepoURLRegex(val && val.selected !== AUTH_TYPE._NONE);\n      }\n    },\n\n    updateAuth(val, key) {\n      const spec = this.value.spec;\n\n      if ( val ) {\n        spec[key] = val;\n      } else {\n        delete spec[key];\n      }\n\n      this.updateCachedAuthVal(val, key);\n    },\n\n    toggleHelmRepoURLRegex(active) {\n      this.displayHelmRepoURLRegex = active;\n\n      if (!active) {\n        delete this.value.spec?.helmRepoURLRegex;\n      }\n    },\n\n    updateTargets() {\n      const spec = this.value.spec;\n      const mode = this.targetMode;\n\n      let kind, value;\n      const match = mode.match(/([^:]+)(:\\/\\/(.*))?$/);\n\n      if ( match ) {\n        kind = match[1];\n        value = match[3];\n      }\n\n      if ( kind === 'all' ) {\n        spec.targets = [{\n          clusterSelector: {\n            matchExpressions: [{\n              key:      CAPI.PROVIDER,\n              operator: 'NotIn',\n              values:   [\n                VIRTUAL_HARVESTER_PROVIDER\n              ],\n            }],\n          },\n        }];\n      } else if ( kind === 'none' ) {\n        spec.targets = [];\n      } else if ( kind === 'cluster' ) {\n        spec.targets = [\n          { clusterName: value },\n        ];\n      } else if ( kind === 'group' ) {\n        spec.targets = [\n          { clusterGroup: value }\n        ];\n      } else if ( kind === 'advanced' ) {\n        try {\n          const parsed = jsyaml.load(this.targetAdvanced);\n\n          spec.targets = parsed;\n          this.targetAdvancedErrors = null;\n        } catch (e) {\n          this.targetAdvancedErrors = exceptionToErrorsArray(e);\n        }\n      } else {\n        spec.targets = [];\n      }\n\n      this.stepOneReady();\n    },\n\n    changeRef({ text, selected }) {\n      this.ref = selected;\n      this.refValue = text;\n      const spec = this.value.spec;\n\n      if ( selected === 'branch' ) {\n        spec.branch = text;\n        delete spec.revision;\n      } else {\n        delete spec.branch;\n        spec.revision = text;\n      }\n\n      this.stepOneReady();\n    },\n\n    async doCreateSecrets() {\n      if (this.tempCachedValues.clientSecretName) {\n        await this.doCreate('clientSecretName', this.tempCachedValues.clientSecretName);\n      }\n\n      if (this.tempCachedValues.helmSecretName) {\n        await this.doCreate('helmSecretName', this.tempCachedValues.helmSecretName);\n      }\n    },\n\n    async doCreate(name, credentials) {\n      const { selected, publicKey, privateKey } = credentials;\n\n      if ( ![AUTH_TYPE._SSH, AUTH_TYPE._BASIC, AUTH_TYPE._S3].includes(selected) ) {\n        return;\n      }\n\n      let secret;\n\n      if ( selected === AUTH_TYPE._S3 ) {\n        secret = await this.$store.dispatch(`rancher/create`, {\n          type:               NORMAN.CLOUD_CREDENTIAL,\n          s3credentialConfig: {\n            accessKey: publicKey,\n            secretKey: privateKey,\n          },\n        });\n      } else {\n        secret = await this.$store.dispatch(`${ CATALOG._MANAGEMENT }/create`, {\n          type:     SECRET,\n          metadata: {\n            namespace:    this.value.metadata.namespace,\n            generateName: 'auth-',\n            labels:       { [FLEET_LABELS.MANAGED]: 'true' }\n          }\n        });\n\n        let type, publicField, privateField;\n\n        switch ( selected ) {\n        case AUTH_TYPE._SSH:\n          type = SECRET_TYPES.SSH;\n          publicField = 'ssh-publickey';\n          privateField = 'ssh-privatekey';\n          break;\n        case AUTH_TYPE._BASIC:\n          type = SECRET_TYPES.BASIC;\n          publicField = 'username';\n          privateField = 'password';\n          break;\n        default:\n          throw new Error('Unknown type');\n        }\n\n        secret._type = type;\n        secret.data = {\n          [publicField]:  base64Encode(publicKey),\n          [privateField]: base64Encode(privateKey),\n        };\n      }\n\n      await secret.save();\n\n      await this.$nextTick(() => {\n        this.updateAuth(secret.metadata.name, name);\n      });\n\n      return secret;\n    },\n\n    updateTlsMode(event) {\n      this.tlsMode = event;\n    },\n\n    onUpdateRepoName() {\n      this.stepOneReady();\n    },\n\n    stepOneReady() {\n      this.$set(this.addRepositorySteps[0], 'ready', this.stepOneRequires);\n    },\n\n    updateTls() {\n      const spec = this.value.spec;\n\n      if ( this.tlsMode === _SPECIFY ) {\n        spec.insecureSkipTLSVerify = false;\n        const caBundle = (this.caBundle || '').trim();\n\n        if ( caBundle ) {\n          spec.caBundle = base64Encode(`${ caBundle }\\n`);\n        } else {\n          delete spec.caBundle;\n        }\n      } else {\n        if ( this.tlsMode === _SKIP ) {\n          spec.insecureSkipTLSVerify = true;\n        } else {\n          spec.insecureSkipTLSVerify = false;\n        }\n\n        if ( this.liveValue.caBundle ) {\n          spec.caBundle = this.liveValue.caBundle;\n        } else {\n          delete spec.caBundle;\n        }\n      }\n    },\n  }\n};\n</script>\n\n<template>\n  <Loading v-if=\"$fetchState.pending\" />\n\n  <CruResource\n    v-else\n    :done-route=\"doneRoute\"\n    :mode=\"mode\"\n    :resource=\"value\"\n    :subtypes=\"[]\"\n    :validation-passed=\"true\"\n    :errors=\"errors\"\n    :steps=\"addRepositorySteps\"\n    :edit-first-step=\"true\"\n    :finish-mode=\"'finish'\"\n    class=\"wizard\"\n    @cancel=\"done\"\n    @error=\"e=>errors = e\"\n    @finish=\"save\"\n  >\n    <template #noticeBanner>\n      <Banner\n        v-if=\"isLocal && mode === 'create'\"\n        color=\"info\"\n      >\n        {{ t('fleet.gitRepo.createLocalBanner') }}\n      </Banner>\n    </template>\n    <template #stepRepoInfo>\n      <NameNsDescription\n        v-if=\"!isView\"\n        v-model=\"value\"\n        :namespaced=\"false\"\n        :mode=\"mode\"\n        @change=\"onUpdateRepoName\"\n      />\n\n      <div class=\"row\">\n        <div class=\"col span-6\">\n          <Banner\n            color=\"info col span-6\"\n          >\n            <div>\n              {{ t('fleet.gitRepo.repo.protocolBanner') }}\n            </div>\n          </Banner>\n        </div>\n      </div>\n      <div\n        class=\"row\"\n        :class=\"{'mt-20': isView}\"\n      >\n        <div class=\"col span-6\">\n          <LabeledInput\n            v-model=\"value.spec.repo\"\n            :mode=\"mode\"\n            label-key=\"fleet.gitRepo.repo.label\"\n            :placeholder=\"t('fleet.gitRepo.repo.placeholder', null, true)\"\n          />\n        </div>\n        <div class=\"col span-6\">\n          <InputWithSelect\n            :data-testid=\"`gitrepo-${ref}`\"\n            :mode=\"mode\"\n            :select-label=\"t('fleet.gitRepo.ref.label')\"\n            :select-value=\"ref\"\n            :text-label=\"t(`fleet.gitRepo.ref.${ref}Label`)\"\n            :text-placeholder=\"t(`fleet.gitRepo.ref.${ref}Placeholder`)\"\n            :text-value=\"refValue\"\n            :text-required=\"true\"\n            :options=\"[{label: t('fleet.gitRepo.ref.branch'), value: 'branch'}, {label: t('fleet.gitRepo.ref.revision'), value: 'revision'}]\"\n            @input=\"changeRef($event)\"\n          />\n        </div>\n      </div>\n      <SelectOrCreateAuthSecret\n        :value=\"value.spec.clientSecretName\"\n        :register-before-hook=\"registerBeforeHook\"\n        :namespace=\"value.metadata.namespace\"\n        :delegate-create-to-parent=\"true\"\n        in-store=\"management\"\n        :pre-select=\"tempCachedValues.clientSecretName\"\n        :mode=\"mode\"\n        generate-name=\"gitrepo-auth-\"\n        label-key=\"fleet.gitRepo.auth.git\"\n        :cache-secrets=\"true\"\n        @input=\"updateAuth($event, 'clientSecretName')\"\n        @inputauthval=\"updateCachedAuthVal($event, 'clientSecretName')\"\n      />\n      <SelectOrCreateAuthSecret\n        data-testid=\"gitrepo-helm-auth\"\n        :value=\"value.spec.helmSecretName\"\n        :register-before-hook=\"registerBeforeHook\"\n        :namespace=\"value.metadata.namespace\"\n        :delegate-create-to-parent=\"true\"\n        in-store=\"management\"\n        :mode=\"mode\"\n        generate-name=\"helmrepo-auth-\"\n        label-key=\"fleet.gitRepo.auth.helm\"\n        :pre-select=\"tempCachedValues.helmSecretName\"\n        :cache-secrets=\"true\"\n        @input=\"updateAuth($event, 'helmSecretName')\"\n        @inputauthval=\"updateCachedAuthVal($event, 'helmSecretName')\"\n      />\n\n      <div\n        v-if=\"displayHelmRepoURLRegex\"\n        class=\"row mt-20\"\n      >\n        <div\n          class=\"col span-6\"\n          data-testid=\"gitrepo-helm-repo-url-regex\"\n        >\n          <LabeledInput\n            v-model=\"value.spec.helmRepoURLRegex\"\n            :mode=\"mode\"\n            label-key=\"fleet.gitRepo.helmRepoURLRegex\"\n          />\n        </div>\n      </div>\n\n      <template v-if=\"isTls\">\n        <div class=\"spacer\" />\n        <div class=\"row\">\n          <div class=\"col span-6\">\n            <LabeledSelect\n              :label=\"t('fleet.gitRepo.tls.label')\"\n              :mode=\"mode\"\n              :value=\"tlsMode\"\n              :options=\"tlsOptions\"\n              @input=\"updateTlsMode($event)\"\n            />\n          </div>\n          <div\n            v-if=\"tlsMode === _SPECIFY\"\n            class=\"col span-6\"\n          >\n            <LabeledInput\n              v-model=\"caBundle\"\n              :mode=\"mode\"\n              type=\"multiline\"\n              label-key=\"fleet.gitRepo.caBundle.label\"\n              placeholder-key=\"fleet.gitRepo.caBundle.placeholder\"\n            />\n          </div>\n        </div>\n      </template>\n      <div class=\"spacer\" />\n      <h2 v-t=\"'fleet.gitRepo.resources.label'\" />\n      <div>\n        <Checkbox\n          v-model=\"value.spec.correctDrift.enabled\"\n          data-testid=\"GitRepo-correctDrift-checkbox\"\n          class=\"check\"\n          type=\"checkbox\"\n          label-key=\"fleet.gitRepo.resources.correctDrift\"\n          :mode=\"mode\"\n        />\n        <Banner\n          data-testid=\"GitRepo-correctDrift-banner\"\n          color=\"info\"\n        >\n          {{ t('fleet.gitRepo.resources.correctDriftBanner') }}\n        </Banner>\n      </div>\n\n      <Checkbox\n        v-model=\"value.spec.keepResources\"\n        class=\"check\"\n        type=\"checkbox\"\n        label-key=\"fleet.gitRepo.resources.keepResources\"\n        :mode=\"mode\"\n      />\n      <Banner\n        color=\"info\"\n      >\n        {{ t('fleet.gitRepo.resources.keepResourcesBanner') }}\n      </Banner>\n      <div class=\"spacer\" />\n      <h2 v-t=\"'fleet.gitRepo.paths.label'\" />\n      <ArrayList\n        v-model=\"value.spec.paths\"\n        data-testid=\"gitRepo-paths\"\n        :mode=\"mode\"\n        :initial-empty-row=\"false\"\n        :value-placeholder=\"t('fleet.gitRepo.paths.placeholder')\"\n        :add-label=\"t('fleet.gitRepo.paths.addLabel')\"\n      >\n        <template #empty>\n          <Banner label-key=\"fleet.gitRepo.paths.empty\" />\n        </template>\n      </ArrayList>\n    </template>\n    <template #stepTargetInfo>\n      <h2 v-t=\"isLocal ? 'fleet.gitRepo.target.labelLocal' : 'fleet.gitRepo.target.label'\" />\n\n      <template v-if=\"!isLocal\">\n        <div class=\"row\">\n          <div class=\"col span-6\">\n            <LabeledSelect\n              v-model=\"targetMode\"\n              :options=\"targetOptions\"\n              option-key=\"value\"\n              :mode=\"mode\"\n              :selectable=\"option => !option.disabled\"\n              :label=\"t('fleet.gitRepo.target.selectLabel')\"\n              data-testid=\"fleet-gitrepo-target-cluster\"\n            >\n              <template v-slot:option=\"opt\">\n                <hr v-if=\"opt.kind === 'divider'\">\n                <div v-else-if=\"opt.kind === 'title'\">\n                  {{ opt.label }}\n                </div>\n                <div v-else>\n                  {{ opt.label }}\n                </div>\n              </template>\n            </LabeledSelect>\n          </div>\n        </div>\n\n        <div\n          v-if=\"targetMode === 'advanced'\"\n          class=\"row mt-10\"\n        >\n          <div class=\"col span-12\">\n            <YamlEditor v-model=\"targetAdvanced\" />\n          </div>\n        </div>\n\n        <Banner\n          v-for=\"(err, i) in targetAdvancedErrors\"\n          :key=\"i\"\n          color=\"error\"\n          :label=\"err\"\n        />\n      </template>\n\n      <div class=\"row mt-20\">\n        <div class=\"col span-6\">\n          <LabeledInput\n            v-model=\"value.spec.serviceAccount\"\n            :mode=\"mode\"\n            label-key=\"fleet.gitRepo.serviceAccount.label\"\n            placeholder-key=\"fleet.gitRepo.serviceAccount.placeholder\"\n          />\n        </div>\n        <div class=\"col span-6\">\n          <LabeledInput\n            v-model=\"value.spec.targetNamespace\"\n            :mode=\"mode\"\n            label-key=\"fleet.gitRepo.targetNamespace.label\"\n            placeholder-key=\"fleet.gitRepo.targetNamespace.placeholder\"\n            label=\"Target Namespace\"\n            placeholder=\"Optional: Require all resources to be in this namespace\"\n          />\n        </div>\n      </div>\n      <div class=\"spacer\" />\n      <Labels\n        :value=\"value\"\n        :mode=\"mode\"\n        :display-side-by-side=\"false\"\n      />\n    </template>\n  </CruResource>\n</template>\n"]}]}