{"remainingRequest":"/home/ubuntu/suseconf/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ubuntu/suseconf/node_modules/@rancher/shell/components/nav/NamespaceFilter.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/ubuntu/suseconf/node_modules/@rancher/shell/components/nav/NamespaceFilter.vue","mtime":1725338146566},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/babel-loader/lib/index.js","mtime":1725271298942},{"path":"/home/ubuntu/suseconf/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/suseconf/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1725271300920}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICd2dWV4JzsKaW1wb3J0IHsgTkFNRVNQQUNFX0ZJTFRFUlMsIEFMTF9OQU1FU1BBQ0VTIH0gZnJvbSAnQHNoZWxsL3N0b3JlL3ByZWZzJzsKaW1wb3J0IHsgTkFNRVNQQUNFLCBNQU5BR0VNRU5UIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy90eXBlcyc7CmltcG9ydCB7IHNvcnRCeSB9IGZyb20gJ0BzaGVsbC91dGlscy9zb3J0JzsKaW1wb3J0IHsgaXNBcnJheSwgYWRkT2JqZWN0cywgZmluZEJ5LCBmaWx0ZXJCeSB9IGZyb20gJ0BzaGVsbC91dGlscy9hcnJheSc7CmltcG9ydCB7CiAgTkFNRVNQQUNFX0ZJTFRFUl9BTExfVVNFUiBhcyBBTExfVVNFUiwKICBOQU1FU1BBQ0VfRklMVEVSX0FMTCBhcyBBTEwsCiAgTkFNRVNQQUNFX0ZJTFRFUl9BTExfU1lTVEVNIGFzIEFMTF9TWVNURU0sCiAgTkFNRVNQQUNFX0ZJTFRFUl9BTExfT1JQSEFOUyBhcyBBTExfT1JQSEFOUywKICBOQU1FU1BBQ0VfRklMVEVSX05BTUVTUEFDRURfWUVTIGFzIE5BTUVTUEFDRURfWUVTLAogIE5BTUVTUEFDRV9GSUxURVJfTkFNRVNQQUNFRF9OTyBhcyBOQU1FU1BBQ0VEX05PLAogIGNyZWF0ZU5hbWVzcGFjZUZpbHRlcktleSwKICBOQU1FU1BBQ0VfRklMVEVSX0tJTkRTLAogIE5BTUVTUEFDRV9GSUxURVJfTlNfRlVMTF9QUkVGSVgsCiAgTkFNRVNQQUNFX0ZJTFRFUl9QX0ZVTExfUFJFRklYLAp9IGZyb20gJ0BzaGVsbC91dGlscy9uYW1lc3BhY2UtZmlsdGVyJzsKaW1wb3J0IHsgS0VZIH0gZnJvbSAnQHNoZWxsL3V0aWxzL3BsYXRmb3JtJzsKaW1wb3J0IHBBbmRORmlsdGVyaW5nIGZyb20gJ0BzaGVsbC9wbHVnaW5zL3N0ZXZlL3Byb2plY3RBbmROYW1lc3BhY2VGaWx0ZXJpbmcudXRpbHMnOwppbXBvcnQgeyBTRVRUSU5HIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy9zZXR0aW5ncyc7CmltcG9ydCBwYWdpbmF0aW9uVXRpbHMgZnJvbSAnQHNoZWxsL3V0aWxzL3BhZ2luYXRpb24tdXRpbHMnOwoKY29uc3QgZm9yY2VkTmFtZXNwYWNlVmFsaWRUeXBlcyA9IFtOQU1FU1BBQ0VfRklMVEVSX0tJTkRTLkRJVklERVIsIE5BTUVTUEFDRV9GSUxURVJfS0lORFMuUFJPSkVDVCwgTkFNRVNQQUNFX0ZJTFRFUl9LSU5EUy5OQU1FU1BBQ0VdOwoKZXhwb3J0IGRlZmF1bHQgewoKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaXNPcGVuOiAgICAgICAgICAgICAgZmFsc2UsCiAgICAgIGZpbHRlcjogICAgICAgICAgICAgICcnLAogICAgICBoaWRkZW46ICAgICAgICAgICAgICAwLAogICAgICB0b3RhbDogICAgICAgICAgICAgICAwLAogICAgICBhY3RpdmVFbGVtZW50OiAgICAgICBudWxsLAogICAgICBjYWNoZWRGaWx0ZXJlZDogICAgICBbXSwKICAgICAgTkFNRVNQQUNFX0ZJTFRFUl9LSU5EUywKICAgICAgbmFtZXNwYWNlRmlsdGVyTW9kZTogdW5kZWZpbmVkLAogICAgfTsKICB9LAoKICBhc3luYyBmZXRjaCgpIHsKICAgIC8vIERldGVybWluZSBpZiBmaWx0ZXJpbmcgYnkgc3BlY2lmaWMgbmFtZXNwYWNlcy9wcm9qZWN0cyBpcyByZXF1aXJlZAogICAgLy8gVGhpcyBpcyBkb25lIG9uY2UgYW5kIHVwIGZyb250CiAgICAvLyAtIGl0IGRvZXNuJ3QgbmVlZCB0byBiZSByZS1hY3RpdmUKICAgIC8vIC0gYWRkZWQgaXQgYXMgYSBjb21wdXRlZCBjYXVzZWQgbWFzc2l2ZSBhbW91bnRzIG9mIGNodXJuIGFyb3VuZCB0aGUgYGZpbHRlcmVkYCB3YXRjaGVyCiAgICBhd2FpdCB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnbWFuYWdlbWVudC9maW5kJywgeyB0eXBlOiBNQU5BR0VNRU5ULlNFVFRJTkcsIGlkOiBTRVRUSU5HLlVJX1BFUkZPUk1BTkNFIH0pOwogICAgdGhpcy5uYW1lc3BhY2VGaWx0ZXJNb2RlID0gdGhpcy5jYWxjTmFtZXNwYWNlRmlsdGVyTW9kZSgpOwogIH0sCgogIGNvbXB1dGVkOiB7CiAgICAuLi5tYXBHZXR0ZXJzKFsnY3VycmVudFByb2R1Y3QnXSksCgogICAgaGFzRmlsdGVyKCkgewogICAgICByZXR1cm4gdGhpcy5maWx0ZXIubGVuZ3RoID4gMDsKICAgIH0sCgogICAgcGFnaW5hdGVkTGlzdEZpbHRlck1vZGUoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5nZXR0ZXJzW2AkeyB0aGlzLmN1cnJlbnRQcm9kdWN0LmluU3RvcmUgfS9wYWdpbmF0aW9uRW5hYmxlZGBdKHRoaXMuJHJvdXRlLnBhcmFtcz8ucmVzb3VyY2UpID8gcGFnaW5hdGlvblV0aWxzLnZhbGlkTnNQcm9qZWN0RmlsdGVycyA6IG51bGw7CiAgICB9LAoKICAgIGZpbHRlcmVkKCkgewogICAgICBsZXQgb3V0ID0gdGhpcy5vcHRpb25zOwoKICAgICAgb3V0ID0gb3V0LmZpbHRlcigoaXRlbSkgPT4gewogICAgICAgIC8vIEZpbHRlciBvdXQgYW55dGhpbmcgbm90IGFwcGxpY2FibGUgdG8gc2luZ2xldG9uIHNlbGVjdGlvbgogICAgICAgIGlmICh0aGlzLm5hbWVzcGFjZUZpbHRlck1vZGU/Lmxlbmd0aCkgewogICAgICAgICAgLy8gV2UgYWx3YXlzIHNob3cgZGl2aWRlcnMsIHByb2plY3RzIGFuZCBuYW1lc3BhY2VzCiAgICAgICAgICBpZiAoIWZvcmNlZE5hbWVzcGFjZVZhbGlkVHlwZXMuaW5jbHVkZXMoaXRlbS5raW5kKSkgewogICAgICAgICAgICBjb25zdCB2YWxpZEN1c3RvbVR5cGUgPSB0aGlzLm5hbWVzcGFjZUZpbHRlck1vZGUuZmluZCgocHJlZml4KSA9PiBpdGVtLmtpbmQuc3RhcnRzV2l0aChwcmVmaXgpKTsKCiAgICAgICAgICAgIGlmICghdmFsaWRDdXN0b21UeXBlKSB7CiAgICAgICAgICAgICAgLy8gSGlkZSBhbnkgaW52YWxpZCBvcHRpb24gdGhhdCdzIG5vdCBzZWxlY3RlZAogICAgICAgICAgICAgIHJldHVybiB0aGlzLnZhbHVlLmZpbmRJbmRleCgodikgPT4gdi5pZCA9PT0gaXRlbS5pZCkgPj0gMDsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgLy8gRmlsdGVyIGJ5IHRoZSBjdXJyZW50IGZpbHRlcgogICAgICAgIGlmICh0aGlzLmhhc0ZpbHRlcikgewogICAgICAgICAgcmV0dXJuIGl0ZW0ua2luZCAhPT0gTkFNRVNQQUNFX0ZJTFRFUl9LSU5EUy5TUEVDSUFMICYmIGl0ZW0ubGFiZWwudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyh0aGlzLmZpbHRlci50b0xvd2VyQ2FzZSgpKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9KTsKCiAgICAgIGlmIChvdXQ/LlswXT8ua2luZCA9PT0gTkFNRVNQQUNFX0ZJTFRFUl9LSU5EUy5ESVZJREVSKSB7CiAgICAgICAgb3V0LnNwbGljZSgwLCAxKTsKICAgICAgfQoKICAgICAgY29uc3QgbWFwcGVkID0gdGhpcy52YWx1ZS5yZWR1Y2UoKG0sIHYpID0+IHsKICAgICAgICBtW3YuaWRdID0gdjsKCiAgICAgICAgcmV0dXJuIG07CiAgICAgIH0sIHt9KTsKCiAgICAgIC8vIE1hcmsgYWxsIG9mIHRoZSBzZWxlY3RlZCBvcHRpb25zCiAgICAgIG91dC5mb3JFYWNoKChpKSA9PiB7CiAgICAgICAgaS5zZWxlY3RlZCA9ICEhbWFwcGVkW2kuaWRdIHx8IChpLmlkID09PSBBTEwgJiYgdGhpcy52YWx1ZSAmJiB0aGlzLnZhbHVlLmxlbmd0aCA9PT0gMCk7CiAgICAgICAgaS5lbGVtZW50SWQgPSAoaS5pZCB8fCAnJykucmVwbGFjZSgnOi8vJywgJ18nKTsKICAgICAgICBpLmVuYWJsZWQgPSB0cnVlOwogICAgICAgIC8vIEFyZSB3ZSBpbiByZXN0cmljdGVkIHJlc291cmNlIHR5cGUgbW9kZSwgaWYgc28gaXMgdGhpcyBhbiBhbGxvd2VkIHR5cGU/CiAgICAgICAgaWYgKHRoaXMubmFtZXNwYWNlRmlsdGVyTW9kZT8ubGVuZ3RoKSB7CiAgICAgICAgICBjb25zdCBpc0xhc3RTZWxlY3RlZCA9IGkuc2VsZWN0ZWQgJiYgKGkuaWQgPT09IEFMTCB8fCB0aGlzLnZhbHVlLmxlbmd0aCA9PT0gMSk7CiAgICAgICAgICBjb25zdCBraW5kQWxsb3dlZCA9IHRoaXMubmFtZXNwYWNlRmlsdGVyTW9kZS5maW5kKChmKSA9PiBmID09PSBpLmtpbmQpOwogICAgICAgICAgY29uc3QgaXNOb3RJblByb2plY3RHcm91cCA9IGkuaWQgPT09IEFMTF9PUlBIQU5TOwoKICAgICAgICAgIGkuZW5hYmxlZCA9ICghaXNMYXN0U2VsZWN0ZWQgJiYga2luZEFsbG93ZWQpICYmICFpc05vdEluUHJvamVjdEdyb3VwOwogICAgICAgIH0gZWxzZSBpZiAodGhpcy5wYWdpbmF0ZWRMaXN0RmlsdGVyTW9kZT8ubGVuZ3RoKSB7CiAgICAgICAgICBpLmVuYWJsZWQgPSAhIWkuaWQgJiYgcGFnaW5hdGlvblV0aWxzLnZhbGlkYXRlTnNQcm9qZWN0RmlsdGVyKGkuaWQpOwogICAgICAgIH0KICAgICAgfSk7CgogICAgICByZXR1cm4gb3V0OwogICAgfSwKCiAgICB0b29sdGlwKCkgewogICAgICBpZiAodGhpcy5pc09wZW4gfHwgKHRoaXMudG90YWwgKyB0aGlzLmhpZGRlbikgPT09IDApIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQoKICAgICAgbGV0IHRvb2x0aXAgPSAnPGRpdiBjbGFzcz0ibnMtZmlsdGVyLXRvb2x0aXAiPic7CgogICAgICAodGhpcy52YWx1ZSB8fCBbXSkuZm9yRWFjaCgodikgPT4gewogICAgICAgIHRvb2x0aXAgKz0gYDxkaXYgY2xhc3M9Im5zLWZpbHRlci10b29sdGlwLWl0ZW0iPjxkaXY+JHsgdi5sYWJlbCB9PC9kaXY+PC9kaXY+YDsKICAgICAgfSk7CgogICAgICB0b29sdGlwICs9ICc8L2Rpdj4nOwoKICAgICAgcmV0dXJuIHsKICAgICAgICBjb250ZW50OiAgIHRvb2x0aXAsCiAgICAgICAgcGxhY2VtZW50OiAnYm90dG9tJywKICAgICAgICBkZWxheTogICAgIHsgc2hvdzogNTAwIH0KICAgICAgfTsKICAgIH0sCgogICAga2V5KCkgewogICAgICByZXR1cm4gY3JlYXRlTmFtZXNwYWNlRmlsdGVyS2V5KHRoaXMuJHN0b3JlLmdldHRlcnNbJ2NsdXN0ZXJJZCddLCB0aGlzLmN1cnJlbnRQcm9kdWN0KTsKICAgIH0sCgogICAgb3B0aW9ucygpIHsKICAgICAgY29uc3QgdCA9IHRoaXMuJHN0b3JlLmdldHRlcnNbJ2kxOG4vdCddOwogICAgICBsZXQgb3V0ID0gW107CgogICAgICBjb25zdCBwYXJhbXMgPSB7IC4uLnRoaXMuJHJvdXRlLnBhcmFtcyB9OwogICAgICBjb25zdCByZXNvdXJjZSA9IHBhcmFtcy5yZXNvdXJjZTsKICAgICAgLy8gU29tZXRpbWVzLCBkaWZmZXJlbnQgcGFnZXMgbWF5IGhhdmUgZGlmZmVyZW50IG5hbWVzcGFjZXMgdG8gZmlsdGVyCiAgICAgIGNvbnN0IG5vdEZpbHRlck5hbWVzcGFjZXMgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzW2B0eXBlLW1hcC9vcHRpb25zRm9yYF0ocmVzb3VyY2UpLm5vdEZpbHRlck5hbWVzcGFjZSB8fCBbXTsKCiAgICAgIC8vIFRPRE86IEFkZCByZXR1cm4gaW5mbwogICAgICBpZiAodGhpcy5jdXJyZW50UHJvZHVjdD8uY3VzdG9tTmFtZXNwYWNlRmlsdGVyICYmIHRoaXMuY3VycmVudFByb2R1Y3Q/LmluU3RvcmUpIHsKICAgICAgICAvLyBTb21ldGltZXMgdGhlIGNvbXBvbmVudCBjYW4gc2hvdyBiZWZvcmUgdGhlICdjdXJyZW50UHJvZHVjdCcgaGFzIGNhdWdodCB1cCwgc28gYWNjZXNzIHRoZSBwcm9kdWN0IHZpYSB0aGUgZ2V0dGVyIHJhdGhlcgogICAgICAgIC8vIHRoYW4gY2FjaGluZyBpdCBpbiB0aGUgYGZldGNoYAoKICAgICAgICAvLyBUaGUgbmFtZXNwYWNlIGRpc3BsYXkgb24gdGhlIGxpc3QgYW5kIGVkaXQgcGFnZXMgc2hvdWxkIGJlIHRoZSBzYW1lIGFzIGluIHRoZSBuYW1lc3BhY2VGaWx0ZXIgY29tcG9uZW50CiAgICAgICAgaWYgKHRoaXMuJHN0b3JlLmdldHRlcnNbYCR7IHRoaXMuY3VycmVudFByb2R1Y3QuaW5TdG9yZSB9L2ZpbHRlck5hbWVzcGFjZWBdKSB7CiAgICAgICAgICBjb25zdCBhbGxOYW1lc3BhY2VzID0gdGhpcy4kc3RvcmUuZ2V0dGVyc1tgJHsgdGhpcy5jdXJyZW50UHJvZHVjdC5pblN0b3JlIH0vZmlsdGVyTmFtZXNwYWNlYF0obm90RmlsdGVyTmFtZXNwYWNlcyk7CgogICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdjaGFuZ2VBbGxOYW1lc3BhY2VzJywgYWxsTmFtZXNwYWNlcyk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gdGhpcy4kc3RvcmUuZ2V0dGVyc1tgJHsgdGhpcy5jdXJyZW50UHJvZHVjdC5pblN0b3JlIH0vbmFtZXNwYWNlRmlsdGVyT3B0aW9uc2BdKHsKICAgICAgICAgIGFkZE5hbWVzcGFjZSwKICAgICAgICAgIGRpdmlkZXIsCiAgICAgICAgICBub3RGaWx0ZXJOYW1lc3BhY2VzCiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIC8vIFRPRE86IEFkZCByZXR1cm4gaW5mbwogICAgICBpZiAoIXRoaXMuY3VycmVudFByb2R1Y3Q/LmhpZGVTeXN0ZW1SZXNvdXJjZXMpIHsKICAgICAgICBvdXQgPSBbCiAgICAgICAgICB7CiAgICAgICAgICAgIGlkOiAgICBBTEwsCiAgICAgICAgICAgIGtpbmQ6ICBOQU1FU1BBQ0VfRklMVEVSX0tJTkRTLlNQRUNJQUwsCiAgICAgICAgICAgIGxhYmVsOiB0KCduYXYubnMuYWxsJyksCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBpZDogICAgQUxMX1VTRVIsCiAgICAgICAgICAgIGtpbmQ6ICBOQU1FU1BBQ0VfRklMVEVSX0tJTkRTLlNQRUNJQUwsCiAgICAgICAgICAgIGxhYmVsOiB0KCduYXYubnMudXNlcicpLAogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgaWQ6ICAgIEFMTF9TWVNURU0sCiAgICAgICAgICAgIGtpbmQ6ICBOQU1FU1BBQ0VfRklMVEVSX0tJTkRTLlNQRUNJQUwsCiAgICAgICAgICAgIGxhYmVsOiB0KCduYXYubnMuc3lzdGVtJyksCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBpZDogICAgTkFNRVNQQUNFRF9ZRVMsCiAgICAgICAgICAgIGtpbmQ6ICBOQU1FU1BBQ0VfRklMVEVSX0tJTkRTLlNQRUNJQUwsCiAgICAgICAgICAgIGxhYmVsOiB0KCduYXYubnMubmFtZXNwYWNlZCcpLAogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgaWQ6ICAgIE5BTUVTUEFDRURfTk8sCiAgICAgICAgICAgIGtpbmQ6ICBOQU1FU1BBQ0VfRklMVEVSX0tJTkRTLlNQRUNJQUwsCiAgICAgICAgICAgIGxhYmVsOiB0KCduYXYubnMuY2x1c3RlckxldmVsJyksCiAgICAgICAgICB9LAogICAgICAgIF07CgogICAgICAgIGRpdmlkZXIob3V0KTsKICAgICAgfQoKICAgICAgY29uc3QgaW5TdG9yZSA9IHRoaXMuJHN0b3JlLmdldHRlcnNbJ2N1cnJlbnRTdG9yZSddKE5BTUVTUEFDRSk7CgogICAgICBpZiAoIWluU3RvcmUpIHsKICAgICAgICByZXR1cm4gb3V0OwogICAgICB9CgogICAgICBsZXQgbmFtZXNwYWNlcyA9IHNvcnRCeSgKICAgICAgICB0aGlzLiRzdG9yZS5nZXR0ZXJzW2AkeyBpblN0b3JlIH0vYWxsYF0oTkFNRVNQQUNFKSwKICAgICAgICBbJ25hbWVEaXNwbGF5J10KICAgICAgKTsKCiAgICAgIG5hbWVzcGFjZXMgPSB0aGlzLmZpbHRlck5hbWVzcGFjZXMobmFtZXNwYWNlcyk7CgogICAgICAvLyBpc1JhbmNoZXIgPSBtZ210IHNjaGVtYXMgYXJlIGxvYWRlZCBhbmQgdGhlcmUncyBhIHByb2plY3Qgc2NoZW1hCiAgICAgIGlmICh0aGlzLiRzdG9yZS5nZXR0ZXJzWydpc1JhbmNoZXInXSkgewogICAgICAgIGNvbnN0IGNsdXN0ZXIgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzWydjdXJyZW50Q2x1c3RlciddOwogICAgICAgIGxldCBwcm9qZWN0cyA9IHRoaXMuJHN0b3JlLmdldHRlcnNbJ21hbmFnZW1lbnQvYWxsJ10oCiAgICAgICAgICBNQU5BR0VNRU5ULlBST0pFQ1QKICAgICAgICApOwoKICAgICAgICBwcm9qZWN0cyA9IHByb2plY3RzLmZpbHRlcigocCkgPT4gewogICAgICAgICAgcmV0dXJuIHRoaXMuY3VycmVudFByb2R1Y3Q/LmhpZGVTeXN0ZW1SZXNvdXJjZXMgPyAhcC5pc1N5c3RlbSAmJiBwLnNwZWMuY2x1c3Rlck5hbWUgPT09IGNsdXN0ZXIuaWQgOiBwLnNwZWMuY2x1c3Rlck5hbWUgPT09IGNsdXN0ZXIuaWQ7CiAgICAgICAgfSk7CiAgICAgICAgcHJvamVjdHMgPSBzb3J0QnkoZmlsdGVyQnkocHJvamVjdHMsICdzcGVjLmNsdXN0ZXJOYW1lJywgY2x1c3Rlci5pZCksIFsKICAgICAgICAgICduYW1lRGlzcGxheScsCiAgICAgICAgXSk7CiAgICAgICAgY29uc3QgcHJvamVjdHNCeUlkID0ge307CiAgICAgICAgY29uc3QgbmFtZXNwYWNlc0J5UHJvamVjdCA9IHt9OwogICAgICAgIGxldCBmaXJzdFByb2plY3QgPSB0cnVlOwoKICAgICAgICBuYW1lc3BhY2VzQnlQcm9qZWN0W251bGxdID0gW107IC8vIEZvciBuYW1lc3BhY2VzIG5vdCBpbiBhIHByb2plY3QKICAgICAgICBmb3IgKGNvbnN0IHByb2plY3Qgb2YgcHJvamVjdHMpIHsKICAgICAgICAgIHByb2plY3RzQnlJZFtwcm9qZWN0Lm1ldGFkYXRhLm5hbWVdID0gcHJvamVjdDsKICAgICAgICB9CgogICAgICAgIGZvciAoY29uc3QgbmFtZXNwYWNlIG9mIG5hbWVzcGFjZXMpIHsKICAgICAgICAgIGxldCBwcm9qZWN0SWQgPSBuYW1lc3BhY2UucHJvamVjdElkOwoKICAgICAgICAgIGlmICghcHJvamVjdElkIHx8ICFwcm9qZWN0c0J5SWRbcHJvamVjdElkXSkgewogICAgICAgICAgICAvLyBJZiB0aGVyZSdzIGEgcHJvamVjdElkIGJ1dCB0aGF0IHByb2plY3QgZG9lc24ndCBleGlzdCwgdHJlYXQgaXQgbGlrZSBubyBwcm9qZWN0CiAgICAgICAgICAgIHByb2plY3RJZCA9IG51bGw7CiAgICAgICAgICB9CgogICAgICAgICAgbGV0IGVudHJ5ID0gbmFtZXNwYWNlc0J5UHJvamVjdFtwcm9qZWN0SWRdOwoKICAgICAgICAgIGlmICghZW50cnkpIHsKICAgICAgICAgICAgZW50cnkgPSBbXTsKICAgICAgICAgICAgbmFtZXNwYWNlc0J5UHJvamVjdFtuYW1lc3BhY2UucHJvamVjdElkXSA9IGVudHJ5OwogICAgICAgICAgfQogICAgICAgICAgZW50cnkucHVzaChuYW1lc3BhY2UpOwogICAgICAgIH0KCiAgICAgICAgZm9yIChjb25zdCBwcm9qZWN0IG9mIHByb2plY3RzKSB7CiAgICAgICAgICBjb25zdCBpZCA9IHByb2plY3QubWV0YWRhdGEubmFtZTsKCiAgICAgICAgICBpZiAoZmlyc3RQcm9qZWN0KSB7CiAgICAgICAgICAgIGZpcnN0UHJvamVjdCA9IGZhbHNlOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZGl2aWRlcihvdXQpOwogICAgICAgICAgfQoKICAgICAgICAgIG91dC5wdXNoKHsKICAgICAgICAgICAgaWQ6ICAgIGAkeyBOQU1FU1BBQ0VfRklMVEVSX1BfRlVMTF9QUkVGSVggfSR7IGlkIH1gLAogICAgICAgICAgICBraW5kOiAgTkFNRVNQQUNFX0ZJTFRFUl9LSU5EUy5QUk9KRUNULAogICAgICAgICAgICBsYWJlbDogdCgnbmF2Lm5zLnByb2plY3QnLCB7IG5hbWU6IHByb2plY3QubmFtZURpc3BsYXkgfSksCiAgICAgICAgICB9KTsKCiAgICAgICAgICBjb25zdCBmb3JUaGlzUHJvamVjdCA9IG5hbWVzcGFjZXNCeVByb2plY3RbaWRdIHx8IFtdOwoKICAgICAgICAgIGFkZE5hbWVzcGFjZShvdXQsIGZvclRoaXNQcm9qZWN0KTsKICAgICAgICB9CgogICAgICAgIGNvbnN0IG9ycGhhbnMgPSBuYW1lc3BhY2VzQnlQcm9qZWN0W251bGxdOwoKICAgICAgICBpZiAob3JwaGFucy5sZW5ndGgpIHsKICAgICAgICAgIGlmICghZmlyc3RQcm9qZWN0KSB7CiAgICAgICAgICAgIGRpdmlkZXIob3V0KTsKICAgICAgICAgIH0KCiAgICAgICAgICBvdXQucHVzaCh7CiAgICAgICAgICAgIGlkOiAgICAgICBBTExfT1JQSEFOUywKICAgICAgICAgICAga2luZDogICAgIE5BTUVTUEFDRV9GSUxURVJfS0lORFMuUFJPSkVDVCwKICAgICAgICAgICAgbGFiZWw6ICAgIHQoJ25hdi5ucy5vcnBoYW4nKSwKICAgICAgICAgICAgZGlzYWJsZWQ6IHRydWUsCiAgICAgICAgICB9KTsKCiAgICAgICAgICBhZGROYW1lc3BhY2Uob3V0LCBvcnBoYW5zKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYWRkTmFtZXNwYWNlKG91dCwgbmFtZXNwYWNlcyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBvdXQ7CgogICAgICBmdW5jdGlvbiBhZGROYW1lc3BhY2Uob3V0LCBuYW1lc3BhY2VzKSB7CiAgICAgICAgaWYgKCFpc0FycmF5KG5hbWVzcGFjZXMpKSB7CiAgICAgICAgICBuYW1lc3BhY2VzID0gW25hbWVzcGFjZXNdOwogICAgICAgIH0KCiAgICAgICAgYWRkT2JqZWN0cygKICAgICAgICAgIG91dCwKICAgICAgICAgIG5hbWVzcGFjZXMubWFwKChuYW1lc3BhY2UpID0+IHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICBpZDogICAgYCR7IE5BTUVTUEFDRV9GSUxURVJfTlNfRlVMTF9QUkVGSVggfSR7IG5hbWVzcGFjZS5pZCB9YCwKICAgICAgICAgICAgICBraW5kOiAgTkFNRVNQQUNFX0ZJTFRFUl9LSU5EUy5OQU1FU1BBQ0UsCiAgICAgICAgICAgICAgbGFiZWw6IHQoJ25hdi5ucy5uYW1lc3BhY2UnLCB7IG5hbWU6IG5hbWVzcGFjZS5uYW1lRGlzcGxheSB9KSwKICAgICAgICAgICAgfTsKICAgICAgICAgIH0pCiAgICAgICAgKTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gZGl2aWRlcihvdXQpIHsKICAgICAgICBvdXQucHVzaCh7CiAgICAgICAgICBraW5kOiAgICAgTkFNRVNQQUNFX0ZJTFRFUl9LSU5EUy5ESVZJREVSLAogICAgICAgICAgbGFiZWw6ICAgIGBEaXZpZGVyICR7IG91dC5sZW5ndGggfWAsCiAgICAgICAgICBkaXNhYmxlZDogdHJ1ZSwKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKCiAgICBpc1NpbmdsZVNwZWNpYWwoKSB7CiAgICAgIHJldHVybiB0aGlzLnZhbHVlICYmIHRoaXMudmFsdWUubGVuZ3RoID09PSAxICYmIHRoaXMudmFsdWVbMF0ua2luZCA9PT0gTkFNRVNQQUNFX0ZJTFRFUl9LSU5EUy5TUEVDSUFMOwogICAgfSwKCiAgICB2YWx1ZTogewogICAgICBnZXQoKSB7CiAgICAgICAgLy8gVXNlIGxhc3QgcGlja2VkIGZpbHRlciBmcm9tIHVzZXIgcHJlZmVyZW5jZXMKICAgICAgICBjb25zdCBwcmVmcyA9IHRoaXMuJHN0b3JlLmdldHRlcnNbJ3ByZWZzL2dldCddKE5BTUVTUEFDRV9GSUxURVJTKTsKICAgICAgICBjb25zdCB2YWx1ZXMgPSBwcmVmcyAmJiBwcmVmc1t0aGlzLmtleV0gPyBwcmVmc1t0aGlzLmtleV0gOiB0aGlzLmRlZmF1bHRPcHRpb24oKTsKICAgICAgICBjb25zdCBvcHRpb25zID0gdGhpcy5vcHRpb25zOwoKICAgICAgICAvLyBSZW1vdmUgdmFsdWVzIHRoYXQgYXJlIG5vdCB2YWxpZCBvcHRpb25zCiAgICAgICAgY29uc3QgZmlsdGVycyA9IHZhbHVlcwogICAgICAgICAgLm1hcCgodmFsdWUpID0+IHsKICAgICAgICAgICAgcmV0dXJuIGZpbmRCeShvcHRpb25zLCAnaWQnLCB2YWx1ZSk7CiAgICAgICAgICB9KQogICAgICAgICAgLmZpbHRlcigoeCkgPT4gISF4KTsKCiAgICAgICAgcmV0dXJuIGZpbHRlcnM7CiAgICAgIH0sCgogICAgICBzZXQobmV1KSB7CiAgICAgICAgY29uc3Qgb2xkID0gKHRoaXMudmFsdWUgfHwgW10pLnNsaWNlKCk7CgogICAgICAgIG5ldSA9IG5ldS5maWx0ZXIoKHgpID0+ICEheC5pZCk7CgogICAgICAgIGNvbnN0IGxhc3QgPSBuZXVbbmV1Lmxlbmd0aCAtIDFdOwogICAgICAgIGNvbnN0IGxhc3RJc1NwZWNpYWwgPSBsYXN0Py5raW5kID09PSBOQU1FU1BBQ0VfRklMVEVSX0tJTkRTLlNQRUNJQUw7CiAgICAgICAgY29uc3QgaGFkVXNlciA9ICEhb2xkLmZpbmQoKHgpID0+IHguaWQgPT09IEFMTF9VU0VSKTsKICAgICAgICBjb25zdCBoYWRBbGwgPSAhIW9sZC5maW5kKCh4KSA9PiB4LmlkID09PSBBTEwpOwoKICAgICAgICBpZiAobGFzdElzU3BlY2lhbCkgewogICAgICAgICAgbmV1ID0gW2xhc3RdOwogICAgICAgIH0KCiAgICAgICAgaWYgKG5ldS5sZW5ndGggPiAxKSB7CiAgICAgICAgICBuZXUgPSBuZXUuZmlsdGVyKCh4KSA9PiB4LmtpbmQgIT09IE5BTUVTUEFDRV9GSUxURVJfS0lORFMuU1BFQ0lBTCk7CiAgICAgICAgfQoKICAgICAgICBpZiAobmV1LmZpbmQoKHgpID0+IHguaWQgPT09ICdhbGwnKSkgewogICAgICAgICAgbmV1ID0gW107CiAgICAgICAgfQoKICAgICAgICBsZXQgaWRzOwoKICAgICAgICAvLyBJZiB0aGVyZSB3YXMgc29tZXRoaW5nIHNlbGVjdGVkIGFuZCB5b3UgcmVtb3ZlIGl0LCBnbyBiYWNrIHRvIHVzZXIgYnkgZGVmYXVsdAogICAgICAgIC8vIFVubGVzcyBpdCB3YXMgdXNlciBvciBhbGwKICAgICAgICBpZiAobmV1Lmxlbmd0aCA9PT0gMCAmJiAhaGFkVXNlciAmJiAhaGFkQWxsKSB7CiAgICAgICAgICBpZHMgPSB0aGlzLmRlZmF1bHRPcHRpb24oKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgaWRzID0gbmV1Lm1hcCgoeCkgPT4geC5pZCk7CiAgICAgICAgfQoKICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnc3dpdGNoTmFtZXNwYWNlcycsIHsKICAgICAgICAgICAgaWRzLAogICAgICAgICAgICBrZXk6IHRoaXMua2V5CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfSwKICAgIH0KICB9LAoKICBiZWZvcmVEZXN0cm95KCkgewogICAgdGhpcy5yZW1vdmVDbG9zZUtleUhhbmRsZXIoKTsKICB9LAoKICBtb3VudGVkKCkgewogICAgdGhpcy5sYXlvdXQoKTsKICB9LAoKICB3YXRjaDogewogICAgdmFsdWUobmV1KSB7CiAgICAgIHRoaXMubGF5b3V0KCk7CiAgICB9LAoKICAgIC8qKgogICAgICogV2hlbiB0aGVyZSBhcmUgdGhvdXNhbmRzIG9mIGVudHJpZXMgY2VydGFpbiBhY3Rpb25zIChkcm9wIGRvd24gb3BlbmVkLCBzZWxlY3Rpb24gY2hhbmdlZCwgZXRjKSB0YWtlIGEgbG9uZyB0aW1lIHRvIGNvbXBsZXRlICh1cHdhcmRzCiAgICAgKiBvZiA1IHNlY29uZHMpCiAgICAgKgogICAgICogVGhpcyBpcyBjYXVzZWQgYnkgY2h1cm4gb2YgdGhlIGZpbHRlcmVkIGFuZCBvcHRpb25zIGNvbXB1dGVkIHByb3BlcnRpZXMgY2F1c2luZyBtdWx0aXBsZSByZW5kZXJzIGZvciBlYWNoIGFjdGlvbi4KICAgICAqCiAgICAgKiBUbyBicmVhayB0aGlzIG11bHRpcGxlLXJlbmRlciBwZXIgY3ljbGUgYmVoYXZpb3VyIGRldGF0Y2ggYGZpbHRlcmVkYCBmcm9tIHRoZSB2YWx1ZSB1c2VkIGluIGB2LWZvcmAuCiAgICAgKgogICAgICovCiAgICBmaWx0ZXJlZChuZXUpIHsKICAgICAgaWYgKCEhbmV1KSB7CiAgICAgICAgdGhpcy5jYWNoZWRGaWx0ZXJlZCA9IG5ldTsKICAgICAgfQogICAgfQogIH0sCgogIG1ldGhvZHM6IHsKICAgIGZpbHRlck5hbWVzcGFjZXMobmFtZXNwYWNlcykgewogICAgICBpZiAodGhpcy4kc3RvcmUuZ2V0dGVyc1sncHJlZnMvZ2V0J10oQUxMX05BTUVTUEFDRVMpKSB7CiAgICAgICAgLy8gSWYgYWxsIG5hbWVzcGFjZXMgb3B0aW9ucyBhcmUgdHVybmVkIG9uIGluIHRoZSB1c2VyIHByZWZlcmVuY2VzLAogICAgICAgIC8vIHJldHVybiBhbGwgbmFtZXNwYWNlcyBpbmNsdWRpbmcgc3lzdGVtIG5hbWVzcGFjZXMgYW5kIFJCQUMKICAgICAgICAvLyBtYW5hZ2VtZW50IG5hbWVzcGFjZXMuCiAgICAgICAgcmV0dXJuIG5hbWVzcGFjZXM7CiAgICAgIH0KCiAgICAgIHJldHVybiBuYW1lc3BhY2VzLmZpbHRlcigobmFtZXNwYWNlKSA9PiB7CiAgICAgICAgLy8gT3RoZXJ3aXNlIG9ubHkgZmlsdGVyIG91dCBvYnNjdXJlIG5hbWVzcGFjZXMsIHN1Y2ggYXMgbmFtZXNwYWNlcwogICAgICAgIC8vIHRoYXQgUmFuY2hlciB1c2VzIHRvIG1hbmFnZSBSQkFDIGZvciBwcm9qZWN0cywgd2hpY2ggc2hvdWxkIG5vdCBiZQogICAgICAgIC8vIGVkaXRlZCBvciBkZWxldGVkIGJ5IFJhbmNoZXIgdXNlcnMuCiAgICAgICAgcmV0dXJuICFuYW1lc3BhY2UuaXNPYnNjdXJlOwogICAgICB9KTsKICAgIH0sCiAgICAvLyBMYXlvdXQgdGhlIGNvbnRlbnQgaW4gdGhlIGRyb3Bkb3duIGJveCB0byBiZXN0IHVzZSB0aGUgc3BhY2UgdG8gc2hvdyB0aGUgc2VsZWN0aW9uCiAgICBsYXlvdXQoKSB7CiAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICAvLyBPbmUgd2UgaGF2ZSByZS1yZW5kZXJlZCwgc2VlIHdoYXQgd2UgY2FuIGZpdCBpbiB0aGUgY29udHJvbCB0byBzaG93IHRoZSBzZWxlY3RlZCBuYW1lc3BhY2VzCiAgICAgICAgaWYgKHRoaXMuJHJlZnMudmFsdWVzKSB7CiAgICAgICAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLiRyZWZzLnZhbHVlczsKICAgICAgICAgIGNvbnN0IG92ZXJmbG93ID0gY29udGFpbmVyLnNjcm9sbFdpZHRoID4gY29udGFpbmVyLm9mZnNldFdpZHRoOwogICAgICAgICAgbGV0IGhpZGRlbiA9IDA7CgogICAgICAgICAgY29uc3QgZHJvcGRvd24gPSB0aGlzLiRyZWZzLmRyb3Bkb3duOwogICAgICAgICAgLy8gUmVtb3ZlIHBhZGRpbmcgYW5kIGRyb3Bkb3duIGFycm93IHNpemUKICAgICAgICAgIGNvbnN0IG1heFdpZHRoID0gZHJvcGRvd24ub2Zmc2V0V2lkdGggLSAyMCAtIDI0OwoKICAgICAgICAgIC8vIElmIHdlIGFyZSBvdmVyZmxvd2luZywgdGhlbiBhbGxvdyBzb21lIHNwYWNlIGZvciB0aGUgK04gaW5kaWNhdG9yCiAgICAgICAgICBjb25zdCBpdGVtQ291bnQgPSB0aGlzLiRyZWZzLnZhbHVlID8gdGhpcy4kcmVmcy52YWx1ZS5sZW5ndGggOiAwOwogICAgICAgICAgbGV0IGN1cnJlbnRXaWR0aCA9IDA7CiAgICAgICAgICBsZXQgc2hvdyA9IHRydWU7CgogICAgICAgICAgdGhpcy50b3RhbCA9IDA7CgogICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpdGVtQ291bnQ7IGkrKykgewogICAgICAgICAgICBjb25zdCBpdGVtID0gdGhpcy4kcmVmcy52YWx1ZVtpXTsKICAgICAgICAgICAgbGV0IGl0ZW1XaWR0aCA9IGl0ZW0ub2Zmc2V0V2lkdGggKyAxMDsKCiAgICAgICAgICAgIC8vIElmIHRoaXMgaXMgdGhlIGZpcnN0IGl0ZW0gYW5kIHdlIGhhdmUgb3ZlcmZsb3cgdGhlbiBhZGQgb24gc29tZSBzcGFjZSBmb3IgdGhlICtOCiAgICAgICAgICAgIGlmIChpID09PSAwICYmIG92ZXJmbG93KSB7CiAgICAgICAgICAgICAgaXRlbVdpZHRoICs9IDQwOwogICAgICAgICAgICB9CgogICAgICAgICAgICBjdXJyZW50V2lkdGggKz0gaXRlbVdpZHRoOwoKICAgICAgICAgICAgaWYgKHNob3cpIHsKICAgICAgICAgICAgICBpZiAoaSA9PT0gMCkgewogICAgICAgICAgICAgICAgLy8gQ2FuJ3QgZXZlbiBmaXQgdGhlIGZpcnN0IGl0ZW0gaW4KICAgICAgICAgICAgICAgIGlmIChpdGVtV2lkdGggPiBtYXhXaWR0aCkgewogICAgICAgICAgICAgICAgICBzaG93ID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgIHRoaXMudG90YWwgPSB0aGlzLnZhbHVlLmxlbmd0aDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgc2hvdyA9IGN1cnJlbnRXaWR0aCA8IG1heFdpZHRoOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgaGlkZGVuICs9IHNob3cgPyAwIDogMTsKICAgICAgICAgICAgaXRlbS5zdHlsZS52aXNpYmlsaXR5ID0gc2hvdyA/ICd2aXNpYmxlJyA6ICdoaWRkZW4nOwogICAgICAgICAgfQoKICAgICAgICAgIHRoaXMuaGlkZGVuID0gdGhpcy50b3RhbCA+IDAgPyAwIDogaGlkZGVuOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgYWRkQ2xvc2VLZXlIYW5kbGVyKCkgewogICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIHRoaXMuY2xvc2VLZXlIYW5kbGVyKTsKICAgIH0sCiAgICByZW1vdmVDbG9zZUtleUhhbmRsZXIoKSB7CiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleXVwJywgdGhpcy5jbG9zZUtleUhhbmRsZXIpOwogICAgfSwKICAgIGNsb3NlS2V5SGFuZGxlcihlKSB7CiAgICAgIGlmIChlLmtleUNvZGUgPT09IEtFWS5FU0NBUEUgKSB7CiAgICAgICAgdGhpcy5jbG9zZSgpOwogICAgICB9CiAgICB9LAogICAgLy8gS2V5Ym9hcmQgc3VwcG9ydAogICAgaXRlbUtleUhhbmRsZXIoZSwgb3B0KSB7CiAgICAgIGlmIChlLmtleUNvZGUgPT09IEtFWS5ET1dOICkgewogICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgIHRoaXMuZG93bigpOwogICAgICB9IGVsc2UgaWYgKGUua2V5Q29kZSA9PT0gS0VZLlVQICkgewogICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgIHRoaXMudXAoKTsKICAgICAgfSBlbHNlIGlmIChlLmtleUNvZGUgPT09IEtFWS5TUEFDRSB8fCBlLmtleUNvZGUgPT09IEtFWS5DUikgewogICAgICAgIGlmICh0aGlzLm5hbWVzcGFjZUZpbHRlck1vZGUgJiYgIW9wdC5lbmFibGVkKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgIHRoaXMuc2VsZWN0T3B0aW9uKG9wdCk7CiAgICAgICAgZS50YXJnZXQuZm9jdXMoKTsKICAgICAgfQogICAgfSwKICAgIGlucHV0S2V5SGFuZGxlcihlKSB7CiAgICAgIHN3aXRjaCAoZS5rZXlDb2RlKSB7CiAgICAgIGNhc2UgS0VZLkRPV046CiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgdGhpcy5kb3duKHRydWUpOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlIEtFWS5UQUI6CiAgICAgICAgLy8gVGFiIG91dCBvZiB0aGUgaW5wdXQgYm94CiAgICAgICAgdGhpcy5jbG9zZSgpOwogICAgICAgIGUudGFyZ2V0LmJsdXIoKTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSBLRVkuQ1I6CiAgICAgICAgaWYgKHRoaXMuZmlsdGVyZWQubGVuZ3RoID09PSAxKSB7CiAgICAgICAgICB0aGlzLnNlbGVjdE9wdGlvbih0aGlzLmZpbHRlcmVkWzBdKTsKICAgICAgICAgIHRoaXMuZmlsdGVyID0gJyc7CiAgICAgICAgfQogICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9LAogICAgbW91c2VPdmVyKGV2ZW50KSB7CiAgICAgIGNvbnN0IGVsID0gZXZlbnQ/LnBhdGg/LmZpbmQoKGUpID0+IGUuY2xhc3NMaXN0LmNvbnRhaW5zKCducy1vcHRpb24nKSk7CgogICAgICB0aGlzLmFjdGl2ZUVsZW1lbnQgPSBlbDsKICAgIH0sCiAgICBzZXRBY3RpdmVFbGVtZW50KGVsKSB7CiAgICAgIGlmICghZWw/LmZvY3VzKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBlbC5mb2N1cygpOwogICAgICB0aGlzLmFjdGl2ZUVsZW1lbnQgPSBudWxsOwogICAgfSwKICAgIGRvd24oaW5wdXQpIHsKICAgICAgY29uc3QgZXhpc2luZyA9IHRoaXMuYWN0aXZlRWxlbWVudCB8fCBkb2N1bWVudC5hY3RpdmVFbGVtZW50OwoKICAgICAgLy8gRm9jdXMgdGhlIGZpcnN0IGVsZW1lbnQgaW4gdGhlIGxpc3QKICAgICAgaWYgKGlucHV0IHx8ICFleGlzaW5nKSB7CiAgICAgICAgaWYgKHRoaXMuJHJlZnMub3B0aW9ucykgewogICAgICAgICAgY29uc3QgYyA9IHRoaXMuJHJlZnMub3B0aW9ucy5jaGlsZHJlbjsKCiAgICAgICAgICBpZiAoYyAmJiBjLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgdGhpcy5zZXRBY3RpdmVFbGVtZW50KGNbMF0pOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBsZXQgbmV4dCA9IGV4aXNpbmcubmV4dFNpYmxpbmc7CgogICAgICAgIGlmIChuZXh0Py5jaGlsZHJlbj8ubGVuZ3RoKSB7CiAgICAgICAgICBjb25zdCBpdGVtID0gbmV4dC5jaGlsZHJlblswXTsKCiAgICAgICAgICAvLyBTa2lwIG92ZXIgZGl2aWRlcnMgKGFzc3VtZXMgd2UgZG9uJ3QgaGF2ZSB0d28gZGl2aWRlcnMgbmV4dCB0byBlYWNoIG90aGVyKQogICAgICAgICAgaWYgKGl0ZW0uY2xhc3NMaXN0LmNvbnRhaW5zKCducy1kaXZpZGVyJykpIHsKICAgICAgICAgICAgbmV4dCA9IG5leHQubmV4dFNpYmxpbmc7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAobmV4dD8uZm9jdXMpIHsKICAgICAgICAgIHRoaXMuc2V0QWN0aXZlRWxlbWVudChuZXh0KTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICB1cCgpIHsKICAgICAgaWYgKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQpIHsKICAgICAgICBsZXQgcHJldiA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQucHJldmlvdXNTaWJsaW5nOwoKICAgICAgICBpZiAocHJldj8uY2hpbGRyZW4/Lmxlbmd0aCkgewogICAgICAgICAgY29uc3QgaXRlbSA9IHByZXYuY2hpbGRyZW5bMF07CgogICAgICAgICAgaWYgKGl0ZW0uY2xhc3NMaXN0LmNvbnRhaW5zKCducy1kaXZpZGVyJykpIHsKICAgICAgICAgICAgcHJldiA9IHByZXYucHJldmlvdXNTaWJsaW5nOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKHByZXY/LmZvY3VzKSB7CiAgICAgICAgICB0aGlzLnNldEFjdGl2ZUVsZW1lbnQocHJldik7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgdG9nZ2xlKCkgewogICAgICBpZiAodGhpcy5pc09wZW4pIHsKICAgICAgICB0aGlzLmNsb3NlKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5vcGVuKCk7CiAgICAgIH0KICAgIH0sCiAgICBvcGVuKCkgewogICAgICB0aGlzLmlzT3BlbiA9IHRydWU7CiAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICB0aGlzLiRyZWZzLmZpbHRlci5mb2N1cygpOwogICAgICB9KTsKICAgICAgdGhpcy5hZGRDbG9zZUtleUhhbmRsZXIoKTsKICAgICAgdGhpcy5sYXlvdXQoKTsKICAgIH0sCiAgICBjbG9zZSgpIHsKICAgICAgdGhpcy5pc09wZW4gPSBmYWxzZTsKICAgICAgdGhpcy5hY3RpdmVFbGVtZW50ID0gbnVsbDsKICAgICAgdGhpcy5yZW1vdmVDbG9zZUtleUhhbmRsZXIoKTsKICAgICAgdGhpcy5sYXlvdXQoKTsKICAgIH0sCiAgICBjbGVhcigpIHsKICAgICAgdGhpcy52YWx1ZSA9IFtdOwogICAgfSwKICAgIHNlbGVjdE9wdGlvbihvcHRpb24pIHsKICAgICAgLy8gSWdub3JlIGNsaWNrIGZvciBhIGRpdmlkZXIKICAgICAgaWYgKG9wdGlvbi5raW5kID09PSBOQU1FU1BBQ0VfRklMVEVSX0tJTkRTLkRJVklERVIpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGNvbnN0IGN1cnJlbnQgPSB0aGlzLnZhbHVlOwoKICAgICAgLy8gUmVtb3ZlIGludmFsaWQKICAgICAgaWYgKCEhdGhpcy5uYW1lc3BhY2VGaWx0ZXJNb2RlPy5sZW5ndGgpIHsKICAgICAgICB0aGlzLnZhbHVlLmZvckVhY2goKHYpID0+IHsKICAgICAgICAgIGlmICghdGhpcy5uYW1lc3BhY2VGaWx0ZXJNb2RlLmZpbmQoKGYpID0+IGYgPT09IHYua2luZCkpIHsKICAgICAgICAgICAgY29uc3QgaW5kZXggPSBjdXJyZW50LmZpbmRJbmRleCgoYykgPT4gYy5pZCA9PT0gdi5pZCk7CgogICAgICAgICAgICBjdXJyZW50LnNwbGljZShpbmRleCwgMSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIGNvbnN0IGV4aXN0cyA9IGN1cnJlbnQuZmluZEluZGV4KCh2KSA9PiB2LmlkID09PSBvcHRpb24uaWQpOwoKICAgICAgLy8gUmVtb3ZlIGlmIGl0IGV4aXN0cyAob3IgYWx3YXlzIGFkZCBpZiBpbiBzaW5nbGV0b24gbW9kZSAtIHdlJ3ZlIHJlc2V0IHRoZSBsaXN0IGFib3ZlKQogICAgICBpZiAoZXhpc3RzICE9PSAtMSkgewogICAgICAgIGN1cnJlbnQuc3BsaWNlKGV4aXN0cywgMSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY3VycmVudC5wdXNoKG9wdGlvbik7CiAgICAgIH0KCiAgICAgIHRoaXMudmFsdWUgPSBjdXJyZW50OwoKICAgICAgaWYgKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQpIHsKICAgICAgICBkb2N1bWVudC5hY3RpdmVFbGVtZW50LmJsdXIoKTsKICAgICAgfQogICAgfSwKICAgIGhhbmRsZVZhbHVlTW91c2VEb3duKG5zLCBldmVudCkgewogICAgICB0aGlzLnJlbW92ZU9wdGlvbihucywgZXZlbnQpOwoKICAgICAgaWYgKHRoaXMudmFsdWUubGVuZ3RoID09PSAwKSB7CiAgICAgICAgdGhpcy5vcGVuKCk7CiAgICAgIH0KICAgIH0sCgogICAgcmVtb3ZlT3B0aW9uKG5zLCBldmVudCkgewogICAgICB0aGlzLnNlbGVjdE9wdGlvbihucyk7CiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOwogICAgfSwKCiAgICBkZWZhdWx0T3B0aW9uKCkgewogICAgICAvLyBOb3RlIC0gVGhpcyBpcyBvbmUgcGxhY2Ugd2hlcmUgYSBkZWZhdWx0IG5zL3Byb2plY3QgZmlsdGVyIHZhbHVlIGlzIHByb3ZpZGVkIChBTExfVVNFUikKICAgICAgLy8gVGhlcmUncyBhbHNvLi4KICAgICAgLy8gLSBkYXNoYm9hcmQgcm9vdCBzdG9yZSBgbG9hZENsdXN0ZXJgIC0tPiB3aGVuIGB1cGRhdGVOYW1lc3BhY2VzYCBpcyBkaXNwYXRjaGVkCiAgICAgIC8vIC0gaGFydmVzdGVyIHJvb3Qgc3RvcmUgYGxvYWRDbHVzdGVyYCAtLT4gd2hlbiBgdXBkYXRlTmFtZXNwYWNlc2AgaXMgZGlzcGF0Y2hlZCAoY2FuIGJlIGRpc2NhcmRlZCkKICAgICAgLy8gRHVlIHRvIHRoaXMsIHdlIGNhbid0IHJlYWxseSBzZXQgYSBuaWNlciBkZWZhdWx0IHdoZW4gZm9yY2VkIG5zL3Byb2plY3QgZmlsdGVyaW5nIGlzIG9uIChBTExfVVNFUiBpcyBpbnZhbGlkKQogICAgICBpZiAodGhpcy5jdXJyZW50UHJvZHVjdD8uY3VzdG9tTmFtZXNwYWNlRmlsdGVyKSB7CiAgICAgICAgcmV0dXJuIFtdOwogICAgICB9CgogICAgICByZXR1cm4gW0FMTF9VU0VSXTsKICAgIH0sCgogICAgY2FsY05hbWVzcGFjZUZpbHRlck1vZGUoKSB7CiAgICAgIGlmIChwQW5kTkZpbHRlcmluZy5pc0VuYWJsZWQodGhpcy4kc3RvcmUuZ2V0dGVycykpIHsKICAgICAgICByZXR1cm4gW05BTUVTUEFDRV9GSUxURVJfS0lORFMuTkFNRVNQQUNFLCBOQU1FU1BBQ0VfRklMVEVSX0tJTkRTLlBST0pFQ1RdOwogICAgICB9CgogICAgICByZXR1cm4gbnVsbDsKICAgIH0sCiAgfQp9Owo="},{"version":3,"sources":["NamespaceFilter.vue"],"names":[],"mappings":";AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"NamespaceFilter.vue","sourceRoot":"node_modules/@rancher/shell/components/nav","sourcesContent":["<script>\nimport { mapGetters } from 'vuex';\nimport { NAMESPACE_FILTERS, ALL_NAMESPACES } from '@shell/store/prefs';\nimport { NAMESPACE, MANAGEMENT } from '@shell/config/types';\nimport { sortBy } from '@shell/utils/sort';\nimport { isArray, addObjects, findBy, filterBy } from '@shell/utils/array';\nimport {\n  NAMESPACE_FILTER_ALL_USER as ALL_USER,\n  NAMESPACE_FILTER_ALL as ALL,\n  NAMESPACE_FILTER_ALL_SYSTEM as ALL_SYSTEM,\n  NAMESPACE_FILTER_ALL_ORPHANS as ALL_ORPHANS,\n  NAMESPACE_FILTER_NAMESPACED_YES as NAMESPACED_YES,\n  NAMESPACE_FILTER_NAMESPACED_NO as NAMESPACED_NO,\n  createNamespaceFilterKey,\n  NAMESPACE_FILTER_KINDS,\n  NAMESPACE_FILTER_NS_FULL_PREFIX,\n  NAMESPACE_FILTER_P_FULL_PREFIX,\n} from '@shell/utils/namespace-filter';\nimport { KEY } from '@shell/utils/platform';\nimport pAndNFiltering from '@shell/plugins/steve/projectAndNamespaceFiltering.utils';\nimport { SETTING } from '@shell/config/settings';\nimport paginationUtils from '@shell/utils/pagination-utils';\n\nconst forcedNamespaceValidTypes = [NAMESPACE_FILTER_KINDS.DIVIDER, NAMESPACE_FILTER_KINDS.PROJECT, NAMESPACE_FILTER_KINDS.NAMESPACE];\n\nexport default {\n\n  data() {\n    return {\n      isOpen:              false,\n      filter:              '',\n      hidden:              0,\n      total:               0,\n      activeElement:       null,\n      cachedFiltered:      [],\n      NAMESPACE_FILTER_KINDS,\n      namespaceFilterMode: undefined,\n    };\n  },\n\n  async fetch() {\n    // Determine if filtering by specific namespaces/projects is required\n    // This is done once and up front\n    // - it doesn't need to be re-active\n    // - added it as a computed caused massive amounts of churn around the `filtered` watcher\n    await this.$store.dispatch('management/find', { type: MANAGEMENT.SETTING, id: SETTING.UI_PERFORMANCE });\n    this.namespaceFilterMode = this.calcNamespaceFilterMode();\n  },\n\n  computed: {\n    ...mapGetters(['currentProduct']),\n\n    hasFilter() {\n      return this.filter.length > 0;\n    },\n\n    paginatedListFilterMode() {\n      return this.$store.getters[`${ this.currentProduct.inStore }/paginationEnabled`](this.$route.params?.resource) ? paginationUtils.validNsProjectFilters : null;\n    },\n\n    filtered() {\n      let out = this.options;\n\n      out = out.filter((item) => {\n        // Filter out anything not applicable to singleton selection\n        if (this.namespaceFilterMode?.length) {\n          // We always show dividers, projects and namespaces\n          if (!forcedNamespaceValidTypes.includes(item.kind)) {\n            const validCustomType = this.namespaceFilterMode.find((prefix) => item.kind.startsWith(prefix));\n\n            if (!validCustomType) {\n              // Hide any invalid option that's not selected\n              return this.value.findIndex((v) => v.id === item.id) >= 0;\n            }\n          }\n        }\n\n        // Filter by the current filter\n        if (this.hasFilter) {\n          return item.kind !== NAMESPACE_FILTER_KINDS.SPECIAL && item.label.toLowerCase().includes(this.filter.toLowerCase());\n        }\n\n        return true;\n      });\n\n      if (out?.[0]?.kind === NAMESPACE_FILTER_KINDS.DIVIDER) {\n        out.splice(0, 1);\n      }\n\n      const mapped = this.value.reduce((m, v) => {\n        m[v.id] = v;\n\n        return m;\n      }, {});\n\n      // Mark all of the selected options\n      out.forEach((i) => {\n        i.selected = !!mapped[i.id] || (i.id === ALL && this.value && this.value.length === 0);\n        i.elementId = (i.id || '').replace('://', '_');\n        i.enabled = true;\n        // Are we in restricted resource type mode, if so is this an allowed type?\n        if (this.namespaceFilterMode?.length) {\n          const isLastSelected = i.selected && (i.id === ALL || this.value.length === 1);\n          const kindAllowed = this.namespaceFilterMode.find((f) => f === i.kind);\n          const isNotInProjectGroup = i.id === ALL_ORPHANS;\n\n          i.enabled = (!isLastSelected && kindAllowed) && !isNotInProjectGroup;\n        } else if (this.paginatedListFilterMode?.length) {\n          i.enabled = !!i.id && paginationUtils.validateNsProjectFilter(i.id);\n        }\n      });\n\n      return out;\n    },\n\n    tooltip() {\n      if (this.isOpen || (this.total + this.hidden) === 0) {\n        return null;\n      }\n\n      let tooltip = '<div class=\"ns-filter-tooltip\">';\n\n      (this.value || []).forEach((v) => {\n        tooltip += `<div class=\"ns-filter-tooltip-item\"><div>${ v.label }</div></div>`;\n      });\n\n      tooltip += '</div>';\n\n      return {\n        content:   tooltip,\n        placement: 'bottom',\n        delay:     { show: 500 }\n      };\n    },\n\n    key() {\n      return createNamespaceFilterKey(this.$store.getters['clusterId'], this.currentProduct);\n    },\n\n    options() {\n      const t = this.$store.getters['i18n/t'];\n      let out = [];\n\n      const params = { ...this.$route.params };\n      const resource = params.resource;\n      // Sometimes, different pages may have different namespaces to filter\n      const notFilterNamespaces = this.$store.getters[`type-map/optionsFor`](resource).notFilterNamespace || [];\n\n      // TODO: Add return info\n      if (this.currentProduct?.customNamespaceFilter && this.currentProduct?.inStore) {\n        // Sometimes the component can show before the 'currentProduct' has caught up, so access the product via the getter rather\n        // than caching it in the `fetch`\n\n        // The namespace display on the list and edit pages should be the same as in the namespaceFilter component\n        if (this.$store.getters[`${ this.currentProduct.inStore }/filterNamespace`]) {\n          const allNamespaces = this.$store.getters[`${ this.currentProduct.inStore }/filterNamespace`](notFilterNamespaces);\n\n          this.$store.commit('changeAllNamespaces', allNamespaces);\n        }\n\n        return this.$store.getters[`${ this.currentProduct.inStore }/namespaceFilterOptions`]({\n          addNamespace,\n          divider,\n          notFilterNamespaces\n        });\n      }\n\n      // TODO: Add return info\n      if (!this.currentProduct?.hideSystemResources) {\n        out = [\n          {\n            id:    ALL,\n            kind:  NAMESPACE_FILTER_KINDS.SPECIAL,\n            label: t('nav.ns.all'),\n          },\n          {\n            id:    ALL_USER,\n            kind:  NAMESPACE_FILTER_KINDS.SPECIAL,\n            label: t('nav.ns.user'),\n          },\n          {\n            id:    ALL_SYSTEM,\n            kind:  NAMESPACE_FILTER_KINDS.SPECIAL,\n            label: t('nav.ns.system'),\n          },\n          {\n            id:    NAMESPACED_YES,\n            kind:  NAMESPACE_FILTER_KINDS.SPECIAL,\n            label: t('nav.ns.namespaced'),\n          },\n          {\n            id:    NAMESPACED_NO,\n            kind:  NAMESPACE_FILTER_KINDS.SPECIAL,\n            label: t('nav.ns.clusterLevel'),\n          },\n        ];\n\n        divider(out);\n      }\n\n      const inStore = this.$store.getters['currentStore'](NAMESPACE);\n\n      if (!inStore) {\n        return out;\n      }\n\n      let namespaces = sortBy(\n        this.$store.getters[`${ inStore }/all`](NAMESPACE),\n        ['nameDisplay']\n      );\n\n      namespaces = this.filterNamespaces(namespaces);\n\n      // isRancher = mgmt schemas are loaded and there's a project schema\n      if (this.$store.getters['isRancher']) {\n        const cluster = this.$store.getters['currentCluster'];\n        let projects = this.$store.getters['management/all'](\n          MANAGEMENT.PROJECT\n        );\n\n        projects = projects.filter((p) => {\n          return this.currentProduct?.hideSystemResources ? !p.isSystem && p.spec.clusterName === cluster.id : p.spec.clusterName === cluster.id;\n        });\n        projects = sortBy(filterBy(projects, 'spec.clusterName', cluster.id), [\n          'nameDisplay',\n        ]);\n        const projectsById = {};\n        const namespacesByProject = {};\n        let firstProject = true;\n\n        namespacesByProject[null] = []; // For namespaces not in a project\n        for (const project of projects) {\n          projectsById[project.metadata.name] = project;\n        }\n\n        for (const namespace of namespaces) {\n          let projectId = namespace.projectId;\n\n          if (!projectId || !projectsById[projectId]) {\n            // If there's a projectId but that project doesn't exist, treat it like no project\n            projectId = null;\n          }\n\n          let entry = namespacesByProject[projectId];\n\n          if (!entry) {\n            entry = [];\n            namespacesByProject[namespace.projectId] = entry;\n          }\n          entry.push(namespace);\n        }\n\n        for (const project of projects) {\n          const id = project.metadata.name;\n\n          if (firstProject) {\n            firstProject = false;\n          } else {\n            divider(out);\n          }\n\n          out.push({\n            id:    `${ NAMESPACE_FILTER_P_FULL_PREFIX }${ id }`,\n            kind:  NAMESPACE_FILTER_KINDS.PROJECT,\n            label: t('nav.ns.project', { name: project.nameDisplay }),\n          });\n\n          const forThisProject = namespacesByProject[id] || [];\n\n          addNamespace(out, forThisProject);\n        }\n\n        const orphans = namespacesByProject[null];\n\n        if (orphans.length) {\n          if (!firstProject) {\n            divider(out);\n          }\n\n          out.push({\n            id:       ALL_ORPHANS,\n            kind:     NAMESPACE_FILTER_KINDS.PROJECT,\n            label:    t('nav.ns.orphan'),\n            disabled: true,\n          });\n\n          addNamespace(out, orphans);\n        }\n      } else {\n        addNamespace(out, namespaces);\n      }\n\n      return out;\n\n      function addNamespace(out, namespaces) {\n        if (!isArray(namespaces)) {\n          namespaces = [namespaces];\n        }\n\n        addObjects(\n          out,\n          namespaces.map((namespace) => {\n            return {\n              id:    `${ NAMESPACE_FILTER_NS_FULL_PREFIX }${ namespace.id }`,\n              kind:  NAMESPACE_FILTER_KINDS.NAMESPACE,\n              label: t('nav.ns.namespace', { name: namespace.nameDisplay }),\n            };\n          })\n        );\n      }\n\n      function divider(out) {\n        out.push({\n          kind:     NAMESPACE_FILTER_KINDS.DIVIDER,\n          label:    `Divider ${ out.length }`,\n          disabled: true,\n        });\n      }\n    },\n\n    isSingleSpecial() {\n      return this.value && this.value.length === 1 && this.value[0].kind === NAMESPACE_FILTER_KINDS.SPECIAL;\n    },\n\n    value: {\n      get() {\n        // Use last picked filter from user preferences\n        const prefs = this.$store.getters['prefs/get'](NAMESPACE_FILTERS);\n        const values = prefs && prefs[this.key] ? prefs[this.key] : this.defaultOption();\n        const options = this.options;\n\n        // Remove values that are not valid options\n        const filters = values\n          .map((value) => {\n            return findBy(options, 'id', value);\n          })\n          .filter((x) => !!x);\n\n        return filters;\n      },\n\n      set(neu) {\n        const old = (this.value || []).slice();\n\n        neu = neu.filter((x) => !!x.id);\n\n        const last = neu[neu.length - 1];\n        const lastIsSpecial = last?.kind === NAMESPACE_FILTER_KINDS.SPECIAL;\n        const hadUser = !!old.find((x) => x.id === ALL_USER);\n        const hadAll = !!old.find((x) => x.id === ALL);\n\n        if (lastIsSpecial) {\n          neu = [last];\n        }\n\n        if (neu.length > 1) {\n          neu = neu.filter((x) => x.kind !== NAMESPACE_FILTER_KINDS.SPECIAL);\n        }\n\n        if (neu.find((x) => x.id === 'all')) {\n          neu = [];\n        }\n\n        let ids;\n\n        // If there was something selected and you remove it, go back to user by default\n        // Unless it was user or all\n        if (neu.length === 0 && !hadUser && !hadAll) {\n          ids = this.defaultOption();\n        } else {\n          ids = neu.map((x) => x.id);\n        }\n\n        this.$nextTick(() => {\n          this.$store.dispatch('switchNamespaces', {\n            ids,\n            key: this.key\n          });\n        });\n      },\n    }\n  },\n\n  beforeDestroy() {\n    this.removeCloseKeyHandler();\n  },\n\n  mounted() {\n    this.layout();\n  },\n\n  watch: {\n    value(neu) {\n      this.layout();\n    },\n\n    /**\n     * When there are thousands of entries certain actions (drop down opened, selection changed, etc) take a long time to complete (upwards\n     * of 5 seconds)\n     *\n     * This is caused by churn of the filtered and options computed properties causing multiple renders for each action.\n     *\n     * To break this multiple-render per cycle behaviour detatch `filtered` from the value used in `v-for`.\n     *\n     */\n    filtered(neu) {\n      if (!!neu) {\n        this.cachedFiltered = neu;\n      }\n    }\n  },\n\n  methods: {\n    filterNamespaces(namespaces) {\n      if (this.$store.getters['prefs/get'](ALL_NAMESPACES)) {\n        // If all namespaces options are turned on in the user preferences,\n        // return all namespaces including system namespaces and RBAC\n        // management namespaces.\n        return namespaces;\n      }\n\n      return namespaces.filter((namespace) => {\n        // Otherwise only filter out obscure namespaces, such as namespaces\n        // that Rancher uses to manage RBAC for projects, which should not be\n        // edited or deleted by Rancher users.\n        return !namespace.isObscure;\n      });\n    },\n    // Layout the content in the dropdown box to best use the space to show the selection\n    layout() {\n      this.$nextTick(() => {\n        // One we have re-rendered, see what we can fit in the control to show the selected namespaces\n        if (this.$refs.values) {\n          const container = this.$refs.values;\n          const overflow = container.scrollWidth > container.offsetWidth;\n          let hidden = 0;\n\n          const dropdown = this.$refs.dropdown;\n          // Remove padding and dropdown arrow size\n          const maxWidth = dropdown.offsetWidth - 20 - 24;\n\n          // If we are overflowing, then allow some space for the +N indicator\n          const itemCount = this.$refs.value ? this.$refs.value.length : 0;\n          let currentWidth = 0;\n          let show = true;\n\n          this.total = 0;\n\n          for (let i = 0; i < itemCount; i++) {\n            const item = this.$refs.value[i];\n            let itemWidth = item.offsetWidth + 10;\n\n            // If this is the first item and we have overflow then add on some space for the +N\n            if (i === 0 && overflow) {\n              itemWidth += 40;\n            }\n\n            currentWidth += itemWidth;\n\n            if (show) {\n              if (i === 0) {\n                // Can't even fit the first item in\n                if (itemWidth > maxWidth) {\n                  show = false;\n                  this.total = this.value.length;\n                }\n              } else {\n                show = currentWidth < maxWidth;\n              }\n            }\n\n            hidden += show ? 0 : 1;\n            item.style.visibility = show ? 'visible' : 'hidden';\n          }\n\n          this.hidden = this.total > 0 ? 0 : hidden;\n        }\n      });\n    },\n    addCloseKeyHandler() {\n      document.addEventListener('keyup', this.closeKeyHandler);\n    },\n    removeCloseKeyHandler() {\n      document.removeEventListener('keyup', this.closeKeyHandler);\n    },\n    closeKeyHandler(e) {\n      if (e.keyCode === KEY.ESCAPE ) {\n        this.close();\n      }\n    },\n    // Keyboard support\n    itemKeyHandler(e, opt) {\n      if (e.keyCode === KEY.DOWN ) {\n        e.preventDefault();\n        e.stopPropagation();\n        this.down();\n      } else if (e.keyCode === KEY.UP ) {\n        e.preventDefault();\n        e.stopPropagation();\n        this.up();\n      } else if (e.keyCode === KEY.SPACE || e.keyCode === KEY.CR) {\n        if (this.namespaceFilterMode && !opt.enabled) {\n          return;\n        }\n        e.preventDefault();\n        e.stopPropagation();\n        this.selectOption(opt);\n        e.target.focus();\n      }\n    },\n    inputKeyHandler(e) {\n      switch (e.keyCode) {\n      case KEY.DOWN:\n        e.preventDefault();\n        e.stopPropagation();\n        this.down(true);\n        break;\n      case KEY.TAB:\n        // Tab out of the input box\n        this.close();\n        e.target.blur();\n        break;\n      case KEY.CR:\n        if (this.filtered.length === 1) {\n          this.selectOption(this.filtered[0]);\n          this.filter = '';\n        }\n        break;\n      }\n    },\n    mouseOver(event) {\n      const el = event?.path?.find((e) => e.classList.contains('ns-option'));\n\n      this.activeElement = el;\n    },\n    setActiveElement(el) {\n      if (!el?.focus) {\n        return;\n      }\n\n      el.focus();\n      this.activeElement = null;\n    },\n    down(input) {\n      const exising = this.activeElement || document.activeElement;\n\n      // Focus the first element in the list\n      if (input || !exising) {\n        if (this.$refs.options) {\n          const c = this.$refs.options.children;\n\n          if (c && c.length > 0) {\n            this.setActiveElement(c[0]);\n          }\n        }\n      } else {\n        let next = exising.nextSibling;\n\n        if (next?.children?.length) {\n          const item = next.children[0];\n\n          // Skip over dividers (assumes we don't have two dividers next to each other)\n          if (item.classList.contains('ns-divider')) {\n            next = next.nextSibling;\n          }\n        }\n\n        if (next?.focus) {\n          this.setActiveElement(next);\n        }\n      }\n    },\n    up() {\n      if (document.activeElement) {\n        let prev = document.activeElement.previousSibling;\n\n        if (prev?.children?.length) {\n          const item = prev.children[0];\n\n          if (item.classList.contains('ns-divider')) {\n            prev = prev.previousSibling;\n          }\n        }\n\n        if (prev?.focus) {\n          this.setActiveElement(prev);\n        }\n      }\n    },\n    toggle() {\n      if (this.isOpen) {\n        this.close();\n      } else {\n        this.open();\n      }\n    },\n    open() {\n      this.isOpen = true;\n      this.$nextTick(() => {\n        this.$refs.filter.focus();\n      });\n      this.addCloseKeyHandler();\n      this.layout();\n    },\n    close() {\n      this.isOpen = false;\n      this.activeElement = null;\n      this.removeCloseKeyHandler();\n      this.layout();\n    },\n    clear() {\n      this.value = [];\n    },\n    selectOption(option) {\n      // Ignore click for a divider\n      if (option.kind === NAMESPACE_FILTER_KINDS.DIVIDER) {\n        return;\n      }\n\n      const current = this.value;\n\n      // Remove invalid\n      if (!!this.namespaceFilterMode?.length) {\n        this.value.forEach((v) => {\n          if (!this.namespaceFilterMode.find((f) => f === v.kind)) {\n            const index = current.findIndex((c) => c.id === v.id);\n\n            current.splice(index, 1);\n          }\n        });\n      }\n\n      const exists = current.findIndex((v) => v.id === option.id);\n\n      // Remove if it exists (or always add if in singleton mode - we've reset the list above)\n      if (exists !== -1) {\n        current.splice(exists, 1);\n      } else {\n        current.push(option);\n      }\n\n      this.value = current;\n\n      if (document.activeElement) {\n        document.activeElement.blur();\n      }\n    },\n    handleValueMouseDown(ns, event) {\n      this.removeOption(ns, event);\n\n      if (this.value.length === 0) {\n        this.open();\n      }\n    },\n\n    removeOption(ns, event) {\n      this.selectOption(ns);\n      event.preventDefault();\n      event.stopPropagation();\n    },\n\n    defaultOption() {\n      // Note - This is one place where a default ns/project filter value is provided (ALL_USER)\n      // There's also..\n      // - dashboard root store `loadCluster` --> when `updateNamespaces` is dispatched\n      // - harvester root store `loadCluster` --> when `updateNamespaces` is dispatched (can be discarded)\n      // Due to this, we can't really set a nicer default when forced ns/project filtering is on (ALL_USER is invalid)\n      if (this.currentProduct?.customNamespaceFilter) {\n        return [];\n      }\n\n      return [ALL_USER];\n    },\n\n    calcNamespaceFilterMode() {\n      if (pAndNFiltering.isEnabled(this.$store.getters)) {\n        return [NAMESPACE_FILTER_KINDS.NAMESPACE, NAMESPACE_FILTER_KINDS.PROJECT];\n      }\n\n      return null;\n    },\n  }\n};\n</script>\n\n<template>\n  <div\n    v-if=\"!$fetchState.pending\"\n    class=\"ns-filter\"\n    data-testid=\"namespaces-filter\"\n    tabindex=\"0\"\n    @focus=\"open()\"\n  >\n    <div\n      v-if=\"isOpen\"\n      class=\"ns-glass\"\n      @click=\"close()\"\n    />\n\n    <!-- Select Dropdown control -->\n    <div\n      ref=\"dropdown\"\n      class=\"ns-dropdown\"\n      data-testid=\"namespaces-dropdown\"\n      :class=\"{ 'ns-open': isOpen }\"\n      @click=\"toggle()\"\n    >\n      <!-- No filters found or available -->\n      <div\n        v-if=\"value.length === 0\"\n        ref=\"values\"\n        data-testid=\"namespaces-values-none\"\n        class=\"ns-values\"\n      >\n        {{ t('nav.ns.all') }}\n      </div>\n\n      <!-- Filtered by set with custom label E.g. \"All namespaces\" -->\n      <div\n        v-else-if=\"isSingleSpecial\"\n        ref=\"values\"\n        data-testid=\"namespaces-values-label\"\n        class=\"ns-values\"\n      >\n        {{ value[0].label }}\n      </div>\n\n      <!-- All the selected namespaces -->\n      <div\n        v-else\n        ref=\"values\"\n        v-clean-tooltip=\"tooltip\"\n        data-testid=\"namespaces-values\"\n        class=\"ns-values\"\n      >\n        <div\n          v-if=\"total\"\n          ref=\"total\"\n          data-testid=\"namespaces-values-total\"\n          class=\"ns-value ns-abs\"\n        >\n          {{ t('namespaceFilter.selected.label', { total }) }}\n        </div>\n        <div\n          v-for=\"(ns, j) in value\"\n          ref=\"value\"\n          :key=\"ns.id\"\n          :data-testid=\"`namespaces-value-${j}`\"\n          class=\"ns-value\"\n        >\n          <div>{{ ns.label }}</div>\n          <!-- block user from removing the last selection if ns forced filtering is on -->\n          <i\n            v-if=\"!namespaceFilterMode || value.length > 1\"\n            class=\"icon icon-close\"\n            :data-testid=\"`namespaces-values-close-${j}`\"\n            @click=\"removeOption(ns, $event)\"\n            @mousedown=\"handleValueMouseDown(ns, $event)\"\n          />\n        </div>\n      </div>\n\n      <!-- Inform user if more namespaces are selected -->\n      <div\n        v-if=\"hidden > 0\"\n        ref=\"more\"\n        v-clean-tooltip=\"tooltip\"\n        class=\"ns-more\"\n      >\n        {{ t('namespaceFilter.more', { more: hidden }) }}\n      </div>\n      <i\n        v-if=\"!isOpen\"\n        class=\"icon icon-chevron-down\"\n      />\n      <i\n        v-else\n        class=\"icon icon-chevron-up\"\n      />\n    </div>\n    <button\n      v-shortkey.once=\"['n']\"\n      class=\"hide\"\n      @shortkey=\"open()\"\n    />\n\n    <!-- Dropdown menu -->\n    <div\n      v-if=\"isOpen\"\n      class=\"ns-dropdown-menu\"\n      data-testid=\"namespaces-menu\"\n    >\n      <div class=\"ns-controls\">\n        <div class=\"ns-input\">\n          <input\n            ref=\"filter\"\n            v-model=\"filter\"\n            tabindex=\"0\"\n            class=\"ns-filter-input\"\n            @keydown=\"inputKeyHandler($event)\"\n          >\n          <i\n            v-if=\"hasFilter\"\n            class=\"ns-filter-clear icon icon-close\"\n            @click=\"filter = ''\"\n          />\n        </div>\n        <div\n          v-if=\"namespaceFilterMode\"\n          class=\"ns-singleton-info\"\n        >\n          <i\n            v-clean-tooltip=\"t('resourceList.nsFilterToolTip')\"\n            class=\"icon icon-info\"\n          />\n        </div>\n        <div\n          v-else\n          class=\"ns-clear\"\n        >\n          <i\n            class=\"icon icon-close\"\n            @click=\"clear()\"\n          />\n        </div>\n      </div>\n      <div class=\"ns-divider mt-0\" />\n      <div\n        ref=\"options\"\n        class=\"ns-options\"\n        role=\"list\"\n      >\n        <div\n          v-for=\"(opt, i) in cachedFiltered\"\n          :id=\"opt.elementId\"\n          :key=\"opt.id\"\n          tabindex=\"0\"\n          class=\"ns-option\"\n          :disabled=\"!opt.enabled\"\n          :class=\"{\n            'ns-selected': opt.selected,\n            'ns-single-match': cachedFiltered.length === 1 && !opt.selected,\n          }\"\n          :data-testid=\"`namespaces-option-${i}`\"\n          @click=\"opt.enabled && selectOption(opt)\"\n          @mouseover=\"opt.enabled && mouseOver($event)\"\n          @keydown=\"itemKeyHandler($event, opt)\"\n        >\n          <div\n            v-if=\"opt.kind === NAMESPACE_FILTER_KINDS.DIVIDER\"\n            class=\"ns-divider\"\n          />\n          <div\n            v-else\n            class=\"ns-item\"\n          >\n            <i\n              v-if=\"opt.kind === NAMESPACE_FILTER_KINDS.NAMESPACE\"\n              class=\"icon icon-folder\"\n            />\n            <div>{{ opt.label }}</div>\n            <i\n              v-if=\"opt.selected\"\n              class=\"icon icon-checkmark\"\n            />\n          </div>\n        </div>\n        <div\n          v-if=\"cachedFiltered.length === 0\"\n          class=\"ns-none\"\n          data-testid=\"namespaces-option-none\"\n        >\n          {{ t('namespaceFilter.noMatchingOptions') }}\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n  $ns_dropdown_size: 24px;\n\n  .ns-abs {\n    position: absolute;\n  }\n\n  .ns-filter {\n    width: 280px;\n    display: inline-block;\n\n    $glass-z-index: 2;\n    $dropdown-z-index: 1000;\n\n    .ns-glass {\n      height: 100vh;\n      left: 0;\n      opacity: 0;\n      position: absolute;\n      top: 0;\n      width: 100vw;\n      z-index: $glass-z-index;\n    }\n\n    .ns-controls {\n      align-items: center;\n      display: flex;\n    }\n\n    .ns-clear {\n      &:hover {\n        color: var(--primary);\n        cursor: pointer;\n      }\n    }\n\n    .ns-singleton-info, .ns-clear {\n      align-items: center;\n      display: flex;\n      > i {\n        padding-right: 5px;\n      }\n    }\n\n    .ns-input {\n      flex: 1;\n      padding: 5px;\n      position: relative;\n    }\n\n    .ns-filter-input {\n      height: 24px;\n    }\n\n    .ns-filter-clear {\n      cursor: pointer;\n      position: absolute;\n      right: 10px;\n      top: 5px;\n      line-height: 24px;\n      text-align: center;\n      width: 24px;\n    }\n\n    .ns-dropdown-menu {\n      background-color: var(--header-bg);\n      border: 1px solid var(--primary-border);\n      border-bottom-left-radius: var(--border-radius);\n      border-bottom-right-radius: var(--border-radius);\n      color: var(--header-btn-text);\n      margin-top: -1px;\n      padding-bottom: 10px;\n      position: relative;\n      z-index: $dropdown-z-index;\n\n      .ns-options {\n        max-height: 50vh;\n        overflow-y: auto;\n\n        .ns-none {\n          color: var(--muted);\n          padding: 0 10px;\n        }\n      }\n\n      .ns-divider {\n        border-top: 1px solid var(--border);\n        cursor: default;\n        margin-top: 10px;\n        padding-bottom: 10px;\n      }\n\n      .ns-option {\n\n        &[disabled] {\n          cursor: default;\n        }\n\n        &:not([disabled]) {\n          &:focus {\n            background-color: var(--dropdown-hover-bg);\n            color: var(--dropdown-hover-text);\n          }\n          .ns-item {\n             &:hover, &:focus {\n              background-color: var(--dropdown-hover-bg);\n              color: var(--dropdown-hover-text);\n              cursor: pointer;\n\n              > i {\n                color: var(--dropdown-hover-text);\n              }\n            }\n          }\n\n          &.ns-selected {\n            &:hover,&:focus {\n              .ns-item {\n                > * {\n                  background-color: var(--dropdown-hover-bg);\n                  color: var(--dropdown-hover-text);\n                }\n              }\n            }\n          }\n\n          &.ns-selected:not(:hover) {\n            .ns-item {\n              > * {\n                color: var(--dropdown-hover-bg);\n              }\n            }\n\n            &:focus {\n              .ns-item {\n                > * {\n                  color: var(--dropdown-hover-text);\n                }\n              }\n            }\n          }\n        }\n\n        .ns-item {\n          align-items: center;\n          display: flex;\n          height: 24px;\n          line-height: 24px;\n          padding: 0 10px;\n\n          > i {\n            color: var(--muted);\n            margin: 0 5px;\n          }\n\n          > div {\n            flex: 1;\n            overflow: hidden;\n            text-overflow: ellipsis;\n            white-space: nowrap;\n          }\n\n        }\n\n        &.ns-single-match {\n          .ns-item {\n            background-color: var(--dropdown-hover-bg);\n            > * {\n              color: var(--dropdown-hover-text);\n            }\n          }\n        }\n      }\n    }\n\n    .ns-dropdown {\n      align-items: center;\n      display: flex;\n      border: 1px solid var(--header-border);\n      border-radius: var(--border-radius);\n      color: var(--header-btn-text);\n      cursor: pointer;\n      height: 40px;\n      padding: 0 10px;\n      position: relative;\n      z-index: $dropdown-z-index;\n\n      &.ns-open {\n        border-bottom-left-radius: 0;\n        border-bottom-right-radius: 0;\n        border-color: var(--primary-border);\n      }\n\n      > .ns-values {\n        flex: 1;\n      }\n\n      &:hover {\n        > i {\n          color: var(--primary);\n        }\n      }\n\n      > i {\n        height: $ns_dropdown_size;\n        width: $ns_dropdown_size;\n        cursor: pointer;\n        text-align: center;\n        line-height: $ns_dropdown_size;\n      }\n\n      .ns-more {\n        border: 1px solid var(--header-border);\n        border-radius: 5px;\n        padding: 2px 8px;\n        margin-left: 4px;\n      }\n\n      .ns-values {\n        display: flex;\n        overflow: hidden;\n\n        .ns-value {\n          align-items: center;\n          background-color: rgba(0,0,0,.05);\n          border: 1px solid var(--header-border);\n          border-radius: 5px;\n          color: var(--tag-text);\n          display: flex;\n          line-height: 20px;\n          padding: 2px 5px;\n          white-space: nowrap;\n\n          > i {\n            margin-left: 5px;\n\n            &:hover {\n              color: var(--primary);\n            };\n          }\n\n          // Spacing between tags\n          &:not(:last-child) {\n            margin-right: 5px;\n          }\n        }\n      }\n    }\n  }\n</style>\n<style lang=\"scss\">\n  .tooltip {\n    .ns-filter-tooltip {\n      background-color: var(--body-bg);\n      margin: -6px;\n      padding: 6px;\n\n      .ns-filter-tooltip-item {\n        > div {\n          background-color: rgba(0,0,0,.05);\n          border: 1px solid var(--header-border);\n          border-radius: 5px;\n          color: var(--tag-text);\n          display: inline-block;\n          line-height: 20px;\n          padding: 2px 5px;\n          white-space: nowrap;\n          margin: 4px 0;\n        }\n      }\n    }\n  }\n</style>\n"]}]}