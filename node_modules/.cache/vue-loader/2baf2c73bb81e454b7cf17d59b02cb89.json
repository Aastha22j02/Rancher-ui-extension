{"remainingRequest":"/home/ubuntu/susecon-2024-ext-demo/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/edit/provisioning.cattle.io.cluster/import.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/@rancher/shell/edit/provisioning.cattle.io.cluster/import.vue","mtime":1725271280091},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/babel-loader/lib/index.js","mtime":1725271298942},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1725271300920}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBDcmVhdGVFZGl0VmlldyBmcm9tICdAc2hlbGwvbWl4aW5zL2NyZWF0ZS1lZGl0LXZpZXcnOwoKaW1wb3J0IENydVJlc291cmNlIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL0NydVJlc291cmNlJzsKaW1wb3J0IExvYWRpbmcgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvTG9hZGluZyc7CmltcG9ydCBOYW1lTnNEZXNjcmlwdGlvbiBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9mb3JtL05hbWVOc0Rlc2NyaXB0aW9uJzsKaW1wb3J0IFRhYiBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9UYWJiZWQvVGFiJzsKaW1wb3J0IFRhYmJlZCBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9UYWJiZWQnOwppbXBvcnQgeyBDQVBJLCBIQ0kgfSBmcm9tICdAc2hlbGwvY29uZmlnL3R5cGVzJzsKaW1wb3J0IENsdXN0ZXJNZW1iZXJzaGlwRWRpdG9yLCB7IGNhblZpZXdDbHVzdGVyTWVtYmVyc2hpcEVkaXRvciB9IGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL2Zvcm0vTWVtYmVycy9DbHVzdGVyTWVtYmVyc2hpcEVkaXRvcic7CmltcG9ydCB7IEJhbm5lciB9IGZyb20gJ0Bjb21wb25lbnRzL0Jhbm5lcic7CgppbXBvcnQgeyBOQU1FIGFzIEhBUlZFU1RFUl9NQU5BR0VSIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy9oYXJ2ZXN0ZXItbWFuYWdlci10eXBlcyc7CmltcG9ydCB7IEhBUlZFU1RFUiBhcyBIQVJWRVNURVJfRkVBVFVSRSwgbWFwRmVhdHVyZSB9IGZyb20gJ0BzaGVsbC9zdG9yZS9mZWF0dXJlcyc7CmltcG9ydCB7IGFkZE9iamVjdCB9IGZyb20gJ0BzaGVsbC91dGlscy9hcnJheSc7CmltcG9ydCB7IEhJREVfREVTQywgbWFwUHJlZiB9IGZyb20gJ0BzaGVsbC9zdG9yZS9wcmVmcyc7CmltcG9ydCBMYWJlbHMgZnJvbSAnQHNoZWxsL2VkaXQvcHJvdmlzaW9uaW5nLmNhdHRsZS5pby5jbHVzdGVyL0xhYmVscyc7CmltcG9ydCBBZ2VudEVudiBmcm9tICdAc2hlbGwvZWRpdC9wcm92aXNpb25pbmcuY2F0dGxlLmlvLmNsdXN0ZXIvQWdlbnRFbnYnOwoKY29uc3QgSEFSVkVTVEVSX0hJREVfS0VZID0gJ2NtLWhhcnZlc3Rlci1pbXBvcnQnOwoKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIEJhbm5lciwKICAgIENsdXN0ZXJNZW1iZXJzaGlwRWRpdG9yLAogICAgTG9hZGluZywKICAgIE5hbWVOc0Rlc2NyaXB0aW9uLAogICAgQ3J1UmVzb3VyY2UsCiAgICBUYWIsCiAgICBUYWJiZWQsCiAgICBMYWJlbHMsCiAgICBBZ2VudEVudgogIH0sCgogIG1peGluczogW0NyZWF0ZUVkaXRWaWV3XSwKCiAgcHJvcHM6IHsKICAgIG1vZGU6IHsKICAgICAgdHlwZTogICAgIFN0cmluZywKICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICB9LAoKICAgIHZhbHVlOiB7CiAgICAgIHR5cGU6ICAgICBPYmplY3QsCiAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgfSwKCiAgICBwcm92aWRlcjogewogICAgICB0eXBlOiAgICAgU3RyaW5nLAogICAgICByZXF1aXJlZDogdHJ1ZSwKICAgIH0sCiAgfSwKCiAgZmV0Y2goKSB7CiAgICAvLyBpZiAoICF0aGlzLnZhbHVlLnNwZWMucmtlQ29uZmlnICkgewogICAgLy8gc2V0KHRoaXMudmFsdWUuc3BlYywgJ3JrZUNvbmZpZycsIHt9KTsKICAgIC8vIH0KICB9LAoKICBkYXRhKCkgewogICAgcmV0dXJuIHsgbWVtYmVyc2hpcFVwZGF0ZToge30gfTsKICB9LAoKICBjb21wdXRlZDogewogICAgY2FuTWFuYWdlTWVtYmVycygpIHsKICAgICAgcmV0dXJuIGNhblZpZXdDbHVzdGVyTWVtYmVyc2hpcEVkaXRvcih0aGlzLiRzdG9yZSk7CiAgICB9LAoKICAgIGhpZGVEZXNjcmlwdGlvbnM6IG1hcFByZWYoSElERV9ERVNDKSwKCiAgICBoYXJ2ZXN0ZXJFbmFibGVkOiBtYXBGZWF0dXJlKEhBUlZFU1RFUl9GRUFUVVJFKSwKCiAgICBoYXJ2ZXN0ZXJMb2NhdGlvbigpIHsKICAgICAgcmV0dXJuIHRoaXMuaXNDcmVhdGUgJiYgIXRoaXMuaGlkZURlc2NyaXB0aW9ucy5pbmNsdWRlcyhIQVJWRVNURVJfSElERV9LRVkpICYmIHRoaXMuaGFydmVzdGVyRW5hYmxlZCA/IHsKICAgICAgICBuYW1lOiAgIGBjLWNsdXN0ZXItcHJvZHVjdC1yZXNvdXJjZWAsCiAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICBwcm9kdWN0OiAgSEFSVkVTVEVSX01BTkFHRVIsCiAgICAgICAgICByZXNvdXJjZTogSENJLkNMVVNURVIsCiAgICAgICAgfQogICAgICB9IDogbnVsbDsKICAgIH0KICB9LAoKICBjcmVhdGVkKCkgewogICAgdGhpcy5yZWdpc3RlckFmdGVySG9vayh0aGlzLnNhdmVSb2xlQmluZGluZ3MsICdzYXZlLXJvbGUtYmluZGluZ3MnKTsKICB9LAoKICBtZXRob2RzOiB7CiAgICBkb25lKCkgewogICAgICByZXR1cm4gdGhpcy4kcm91dGVyLnJlcGxhY2UoewogICAgICAgIG5hbWU6ICAgJ2MtY2x1c3Rlci1wcm9kdWN0LXJlc291cmNlLW5hbWVzcGFjZS1pZCcsCiAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICByZXNvdXJjZTogIENBUEkuUkFOQ0hFUl9DTFVTVEVSLAogICAgICAgICAgbmFtZXNwYWNlOiB0aGlzLnZhbHVlLm1ldGFkYXRhLm5hbWVzcGFjZSwKICAgICAgICAgIGlkOiAgICAgICAgdGhpcy52YWx1ZS5tZXRhZGF0YS5uYW1lLAogICAgICAgIH0sCiAgICAgIH0pOwogICAgfSwKCiAgICBhc3luYyBzYXZlUm9sZUJpbmRpbmdzKCkgewogICAgICBhd2FpdCB0aGlzLnZhbHVlLndhaXRGb3JNZ210KCk7CgogICAgICBpZiAodGhpcy5tZW1iZXJzaGlwVXBkYXRlLnNhdmUpIHsKICAgICAgICBhd2FpdCB0aGlzLm1lbWJlcnNoaXBVcGRhdGUuc2F2ZSh0aGlzLnZhbHVlLm1nbXQuaWQpOwogICAgICB9CiAgICB9LAoKICAgIGFzeW5jIHNhdmVPdmVycmlkZShidG5DYikgewogICAgICBhd2FpdCB0aGlzLnNhdmUoYnRuQ2IpOwogICAgfSwKCiAgICBvbk1lbWJlcnNoaXBVcGRhdGUodXBkYXRlKSB7CiAgICAgIHRoaXMuJHNldCh0aGlzLCAnbWVtYmVyc2hpcFVwZGF0ZScsIHVwZGF0ZSk7CiAgICB9LAoKICAgIGhpZGVIYXJ2ZXN0ZXJOb3RpY2UoKSB7CiAgICAgIGNvbnN0IG5ldSA9IHRoaXMuaGlkZURlc2NyaXB0aW9ucy5zbGljZSgpOwoKICAgICAgYWRkT2JqZWN0KG5ldSwgSEFSVkVTVEVSX0hJREVfS0VZKTsKCiAgICAgIHRoaXMuaGlkZURlc2NyaXB0aW9ucyA9IG5ldTsKICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["import.vue"],"names":[],"mappings":";AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA","file":"import.vue","sourceRoot":"node_modules/@rancher/shell/edit/provisioning.cattle.io.cluster","sourcesContent":["<script>\nimport CreateEditView from '@shell/mixins/create-edit-view';\n\nimport CruResource from '@shell/components/CruResource';\nimport Loading from '@shell/components/Loading';\nimport NameNsDescription from '@shell/components/form/NameNsDescription';\nimport Tab from '@shell/components/Tabbed/Tab';\nimport Tabbed from '@shell/components/Tabbed';\nimport { CAPI, HCI } from '@shell/config/types';\nimport ClusterMembershipEditor, { canViewClusterMembershipEditor } from '@shell/components/form/Members/ClusterMembershipEditor';\nimport { Banner } from '@components/Banner';\n\nimport { NAME as HARVESTER_MANAGER } from '@shell/config/harvester-manager-types';\nimport { HARVESTER as HARVESTER_FEATURE, mapFeature } from '@shell/store/features';\nimport { addObject } from '@shell/utils/array';\nimport { HIDE_DESC, mapPref } from '@shell/store/prefs';\nimport Labels from '@shell/edit/provisioning.cattle.io.cluster/Labels';\nimport AgentEnv from '@shell/edit/provisioning.cattle.io.cluster/AgentEnv';\n\nconst HARVESTER_HIDE_KEY = 'cm-harvester-import';\n\nexport default {\n  components: {\n    Banner,\n    ClusterMembershipEditor,\n    Loading,\n    NameNsDescription,\n    CruResource,\n    Tab,\n    Tabbed,\n    Labels,\n    AgentEnv\n  },\n\n  mixins: [CreateEditView],\n\n  props: {\n    mode: {\n      type:     String,\n      required: true,\n    },\n\n    value: {\n      type:     Object,\n      required: true,\n    },\n\n    provider: {\n      type:     String,\n      required: true,\n    },\n  },\n\n  fetch() {\n    // if ( !this.value.spec.rkeConfig ) {\n    // set(this.value.spec, 'rkeConfig', {});\n    // }\n  },\n\n  data() {\n    return { membershipUpdate: {} };\n  },\n\n  computed: {\n    canManageMembers() {\n      return canViewClusterMembershipEditor(this.$store);\n    },\n\n    hideDescriptions: mapPref(HIDE_DESC),\n\n    harvesterEnabled: mapFeature(HARVESTER_FEATURE),\n\n    harvesterLocation() {\n      return this.isCreate && !this.hideDescriptions.includes(HARVESTER_HIDE_KEY) && this.harvesterEnabled ? {\n        name:   `c-cluster-product-resource`,\n        params: {\n          product:  HARVESTER_MANAGER,\n          resource: HCI.CLUSTER,\n        }\n      } : null;\n    }\n  },\n\n  created() {\n    this.registerAfterHook(this.saveRoleBindings, 'save-role-bindings');\n  },\n\n  methods: {\n    done() {\n      return this.$router.replace({\n        name:   'c-cluster-product-resource-namespace-id',\n        params: {\n          resource:  CAPI.RANCHER_CLUSTER,\n          namespace: this.value.metadata.namespace,\n          id:        this.value.metadata.name,\n        },\n      });\n    },\n\n    async saveRoleBindings() {\n      await this.value.waitForMgmt();\n\n      if (this.membershipUpdate.save) {\n        await this.membershipUpdate.save(this.value.mgmt.id);\n      }\n    },\n\n    async saveOverride(btnCb) {\n      await this.save(btnCb);\n    },\n\n    onMembershipUpdate(update) {\n      this.$set(this, 'membershipUpdate', update);\n    },\n\n    hideHarvesterNotice() {\n      const neu = this.hideDescriptions.slice();\n\n      addObject(neu, HARVESTER_HIDE_KEY);\n\n      this.hideDescriptions = neu;\n    },\n  },\n};\n</script>\n\n<template>\n  <Loading v-if=\"$fetchState.pending\" />\n  <CruResource\n    v-else\n    :mode=\"mode\"\n    :resource=\"value\"\n    :errors=\"errors\"\n    component-testid=\"cluster-manager-import\"\n    @finish=\"saveOverride\"\n    @error=\"e=>errors = e\"\n  >\n    <Banner\n      v-if=\"harvesterLocation\"\n      color=\"info\"\n      :closable=\"true\"\n      class=\"mb-20\"\n      @close=\"hideHarvesterNotice\"\n    >\n      {{ t('cluster.harvester.importNotice') }}\n      <nuxt-link :to=\"harvesterLocation\">\n        {{ t('product.harvesterManager') }}\n      </nuxt-link>\n    </Banner>\n\n    <NameNsDescription\n      v-if=\"!isView\"\n      v-model=\"value\"\n      :mode=\"mode\"\n      :namespaced=\"false\"\n      name-label=\"cluster.name.label\"\n      name-placeholder=\"cluster.name.placeholder\"\n      description-label=\"cluster.description.label\"\n      description-placeholder=\"cluster.description.placeholder\"\n    />\n\n    <Tabbed :side-tabs=\"true\">\n      <Tab\n        v-if=\"canManageMembers\"\n        name=\"memberRoles\"\n        label-key=\"cluster.tabs.memberRoles\"\n        :weight=\"3\"\n      >\n        <Banner\n          v-if=\"isEdit\"\n          color=\"info\"\n        >\n          {{ t('cluster.memberRoles.removeMessage') }}\n        </Banner>\n        <ClusterMembershipEditor\n          :mode=\"mode\"\n          :parent-id=\"value.mgmt ? value.mgmt.id : null\"\n          @membership-update=\"onMembershipUpdate\"\n        />\n      </Tab>\n      <AgentEnv\n        v-model=\"value\"\n        :mode=\"mode\"\n      />\n      <Labels\n        v-model=\"value\"\n        :mode=\"mode\"\n      />\n    </Tabbed>\n  </CruResource>\n</template>\n"]}]}