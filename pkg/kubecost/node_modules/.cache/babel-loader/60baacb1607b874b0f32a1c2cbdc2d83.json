{"remainingRequest":"/home/ubuntu/susecon-2024-ext-demo/node_modules/thread-loader/dist/cjs.js!/home/ubuntu/susecon-2024-ext-demo/node_modules/babel-loader/lib/index.js!/home/ubuntu/susecon-2024-ext-demo/node_modules/cache-loader/dist/cjs.js??ref--2-0!/home/ubuntu/susecon-2024-ext-demo/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ubuntu/susecon-2024-ext-demo/pkg/kubecost/components/kubecost.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/ubuntu/susecon-2024-ext-demo/pkg/kubecost/components/kubecost.vue","mtime":1725268750261},{"path":"/home/ubuntu/susecon-2024-ext-demo/pkg/kubecost/babel.config.js","mtime":1725268750261},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/thread-loader/dist/cjs.js","mtime":1725271299040},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/babel-loader/lib/index.js","mtime":1725271298942},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/cache-loader/dist/cjs.js","mtime":1725271299021},{"path":"/home/ubuntu/susecon-2024-ext-demo/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1725271300920}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IExvYWRpbmcgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvTG9hZGluZyc7CmltcG9ydCBMYWJlbFZhbHVlIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL0xhYmVsVmFsdWUnOwppbXBvcnQgeyBtYXBHZXR0ZXJzIH0gZnJvbSAndnVleCc7CmltcG9ydCB7IGdldEt1YmVjb3N0RGF0YSB9IGZyb20gJy4uL2t1YmVjb3N0TW9kdWxlJzsKaW1wb3J0IFBpZUNoYXJ0IGZyb20gJy4vcGllLnZ1ZSc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnUnVubmluZ0Nvc3RzJywKICBjb21wb25lbnRzOiB7CiAgICBMb2FkaW5nLAogICAgTGFiZWxWYWx1ZSwKICAgIFBpZUNoYXJ0CiAgfSwKICBwcm9wczogewogICAgcmVzb3VyY2U6IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICByZXF1aXJlZDogdHJ1ZQogICAgfQogIH0sCiAgYXN5bmMgZmV0Y2goKSB7CiAgICBpZiAodGhpcy5yZXNvdXJjZS5raW5kID09PSAnQ2x1c3RlcicpIHsKICAgICAgLy8gZm9yIGNsdXN0ZXIgZGFzaGJvYXJkIGNhcmQKICAgICAgdGhpcy5jb3N0cyA9IGF3YWl0IGdldEt1YmVjb3N0RGF0YSh7CiAgICAgICAgYWdncmVnYXRlOiAnY2x1c3RlcicsCiAgICAgICAgd2luZG93OiAnbW9udGgnLAogICAgICAgIGNsdXN0ZXJJZDogdGhpcy5jbHVzdGVySWQsCiAgICAgICAgY3R4OiB0aGlzCiAgICAgIH0pOwogICAgfSBlbHNlIHsKICAgICAgLy8gbmFtZXNwYWNlIHRhYgogICAgICB0aGlzLmNvc3RzID0gYXdhaXQgZ2V0S3ViZWNvc3REYXRhKHsKICAgICAgICBhZ2dyZWdhdGU6ICduYW1lc3BhY2UnLAogICAgICAgIHdpbmRvdzogJ21vbnRoJywKICAgICAgICB0YXJnZXROYW1lc3BhY2U6IHRoaXMucmVzb3VyY2UuaWQsCiAgICAgICAgY2x1c3RlcklkOiB0aGlzLmNsdXN0ZXJJZCwKICAgICAgICBjdHg6IHRoaXMKICAgICAgfSk7CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgJHJvdXRlOiB7CiAgICAgIGhhbmRsZXIobmV1KSB7CiAgICAgICAgaWYgKG5ldS5oYXNoICYmIG5ldS5oYXNoLmluY2x1ZGVzKCcjS3ViZWNvc3QnKSkgewogICAgICAgICAgdGhpcy5rZXkgPSB0aGlzLmdlbmVyYXRlU3RyaW5nKDEwKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGRlZXA6IHRydWUKICAgIH0KICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjb3N0czogdW5kZWZpbmVkLAogICAgICBrZXk6IHRoaXMuZ2VuZXJhdGVTdHJpbmcoMTApCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC4uLm1hcEdldHRlcnMoWydjbHVzdGVySWQnXSksCiAgICBpbmZvKCkgewogICAgICB2YXIgX3RoaXMkY29zdHMsIF90aGlzJGNvc3RzMjsKICAgICAgaWYgKChfdGhpcyRjb3N0cyA9IHRoaXMuY29zdHMpICE9PSBudWxsICYmIF90aGlzJGNvc3RzICE9PSB2b2lkIDAgJiYgX3RoaXMkY29zdHMudHlwZSAmJiAoX3RoaXMkY29zdHMyID0gdGhpcy5jb3N0cykgIT09IG51bGwgJiYgX3RoaXMkY29zdHMyICE9PSB2b2lkIDAgJiYgX3RoaXMkY29zdHMyLm1zZykgewogICAgICAgIHJldHVybiB0aGlzLmNvc3RzOwogICAgICB9CiAgICAgIHJldHVybiBudWxsOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgZ2VuZXJhdGVTdHJpbmcobGVuZ3RoKSB7CiAgICAgIGNvbnN0IGNoYXJhY3RlcnMgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5eic7CiAgICAgIGxldCByZXN1bHQgPSAnICc7CiAgICAgIGNvbnN0IGNoYXJhY3RlcnNMZW5ndGggPSBjaGFyYWN0ZXJzLmxlbmd0aDsKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgewogICAgICAgIHJlc3VsdCArPSBjaGFyYWN0ZXJzLmNoYXJBdChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBjaGFyYWN0ZXJzTGVuZ3RoKSk7CiAgICAgIH0KICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KICB9Cn07"},{"version":3,"names":["Loading","LabelValue","mapGetters","getKubecostData","PieChart","name","components","props","resource","type","Object","required","fetch","kind","costs","aggregate","window","clusterId","ctx","targetNamespace","id","watch","$route","handler","neu","hash","includes","key","generateString","deep","data","undefined","computed","info","_this$costs","_this$costs2","msg","methods","length","characters","result","charactersLength","i","charAt","Math","floor","random"],"sources":["components/kubecost.vue"],"sourcesContent":["<script>\nimport Loading from '@shell/components/Loading';\nimport LabelValue from '@shell/components/LabelValue';\nimport { mapGetters } from 'vuex';\nimport { getKubecostData } from '../kubecostModule';\nimport PieChart from './pie.vue';\n\nexport default {\n  name: 'RunningCosts',\n\n  components: {\n    Loading, LabelValue, PieChart\n  },\n\n  props: {\n    resource: {\n      type:     Object,\n      required: true,\n    }\n  },\n\n  async fetch() {\n    if (this.resource.kind === 'Cluster') {\n      // for cluster dashboard card\n      this.costs = await getKubecostData({\n        aggregate: 'cluster',\n        window:    'month',\n        clusterId: this.clusterId,\n        ctx:       this\n      });\n    } else {\n      // namespace tab\n      this.costs = await getKubecostData({\n        aggregate:       'namespace',\n        window:          'month',\n        targetNamespace: this.resource.id,\n        clusterId:       this.clusterId,\n        ctx:             this\n      });\n    }\n  },\n  watch: {\n    $route: {\n      handler(neu) {\n        if (neu.hash && neu.hash.includes('#Kubecost')) {\n          this.key = this.generateString(10);\n        }\n      },\n      deep: true\n    }\n  },\n\n  data() {\n    return { costs: undefined, key: this.generateString(10) };\n  },\n\n  computed: {\n    ...mapGetters(['clusterId']),\n\n    info() {\n      if (this.costs?.type && this.costs?.msg) {\n        return this.costs;\n      }\n\n      return null;\n    }\n  },\n\n  methods: {\n    generateString(length) {\n      const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';\n\n      let result = ' ';\n      const charactersLength = characters.length;\n\n      for ( let i = 0; i < length; i++ ) {\n        result += characters.charAt(Math.floor(Math.random() * charactersLength));\n      }\n\n      return result;\n    }\n  }\n};\n</script>\n\n<template>\n  <div class=\"main\">\n    <Loading\n      v-if=\"$fetchState.pending\"\n      mode=\"relative\"\n    />\n    <div v-else class=\"main-content\">\n      <h3 class=\"mb-40\">\n        {{ t('kubecost.title') }}\n      </h3>\n      <h4\n        v-if=\"info\"\n        :class=\"`text-${ info.type }`\"\n      >\n        {{ info.msg }}\n      </h4>\n      <div\n        v-else\n        class=\"label-values\"\n      >\n        <LabelValue\n          v-for=\"cost of costs\"\n          :key=\"cost.name\"\n          class=\"label-value\"\n          :name=\"cost.name\"\n          :value=\"cost.value\"\n        />\n      </div>\n      <PieChart\n        v-if=\"costs.length\"\n        :key=\"key\"\n        :costs=\"costs\"\n      />\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n.main-content {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n\n  h3 {\n    text-align: center;\n  }\n\n  .label-values {\n    display: flex;\n    flex-direction: row;\n\n    .label-value {\n      padding-right: 20px;\n    }\n  }\n}\n</style>\n"],"mappings":"AACA,OAAAA,OAAA;AACA,OAAAC,UAAA;AACA,SAAAC,UAAA;AACA,SAAAC,eAAA;AACA,OAAAC,QAAA;AAEA;EACAC,IAAA;EAEAC,UAAA;IACAN,OAAA;IAAAC,UAAA;IAAAG;EACA;EAEAG,KAAA;IACAC,QAAA;MACAC,IAAA,EAAAC,MAAA;MACAC,QAAA;IACA;EACA;EAEA,MAAAC,MAAA;IACA,SAAAJ,QAAA,CAAAK,IAAA;MACA;MACA,KAAAC,KAAA,SAAAX,eAAA;QACAY,SAAA;QACAC,MAAA;QACAC,SAAA,OAAAA,SAAA;QACAC,GAAA;MACA;IACA;MACA;MACA,KAAAJ,KAAA,SAAAX,eAAA;QACAY,SAAA;QACAC,MAAA;QACAG,eAAA,OAAAX,QAAA,CAAAY,EAAA;QACAH,SAAA,OAAAA,SAAA;QACAC,GAAA;MACA;IACA;EACA;EACAG,KAAA;IACAC,MAAA;MACAC,QAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA,IAAAD,GAAA,CAAAC,IAAA,CAAAC,QAAA;UACA,KAAAC,GAAA,QAAAC,cAAA;QACA;MACA;MACAC,IAAA;IACA;EACA;EAEAC,KAAA;IACA;MAAAhB,KAAA,EAAAiB,SAAA;MAAAJ,GAAA,OAAAC,cAAA;IAAA;EACA;EAEAI,QAAA;IACA,GAAA9B,UAAA;IAEA+B,KAAA;MAAA,IAAAC,WAAA,EAAAC,YAAA;MACA,KAAAD,WAAA,QAAApB,KAAA,cAAAoB,WAAA,eAAAA,WAAA,CAAAzB,IAAA,KAAA0B,YAAA,QAAArB,KAAA,cAAAqB,YAAA,eAAAA,YAAA,CAAAC,GAAA;QACA,YAAAtB,KAAA;MACA;MAEA;IACA;EACA;EAEAuB,OAAA;IACAT,eAAAU,MAAA;MACA,MAAAC,UAAA;MAEA,IAAAC,MAAA;MACA,MAAAC,gBAAA,GAAAF,UAAA,CAAAD,MAAA;MAEA,SAAAI,CAAA,MAAAA,CAAA,GAAAJ,MAAA,EAAAI,CAAA;QACAF,MAAA,IAAAD,UAAA,CAAAI,MAAA,CAAAC,IAAA,CAAAC,KAAA,CAAAD,IAAA,CAAAE,MAAA,KAAAL,gBAAA;MACA;MAEA,OAAAD,MAAA;IACA;EACA;AACA","ignoreList":[]}]}